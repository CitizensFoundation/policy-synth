import"./5cadb358.js";
/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const t=globalThis,e=t.ShadowRoot&&(void 0===t.ShadyCSS||t.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,i=Symbol(),r=new WeakMap;class o{constructor(t,e,r){if(this._$cssResult$=!0,r!==i)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=t,this.t=e}get styleSheet(){let t=this.o;const i=this.t;if(e&&void 0===t){const e=void 0!==i&&1===i.length;e&&(t=r.get(i)),void 0===t&&((this.o=t=new CSSStyleSheet).replaceSync(this.cssText),e&&r.set(i,t))}return t}toString(){return this.cssText}}const n=(t,...e)=>{const r=1===t.length?t[0]:e.reduce(((e,i,r)=>e+(t=>{if(!0===t._$cssResult$)return t.cssText;if("number"==typeof t)return t;throw Error("Value passed to 'css' function must be a 'css' function result: "+t+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(i)+t[r+1]),t[0]);return new o(r,t,i)},s=e?t=>t:t=>t instanceof CSSStyleSheet?(t=>{let e="";for(const i of t.cssRules)e+=i.cssText;return(t=>new o("string"==typeof t?t:t+"",void 0,i))(e)})(t):t
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */,{is:a,defineProperty:l,getOwnPropertyDescriptor:c,getOwnPropertyNames:d,getOwnPropertySymbols:h,getPrototypeOf:u}=Object,p=globalThis,f=p.trustedTypes,m=f?f.emptyScript:"",g=p.reactiveElementPolyfillSupport,v=(t,e)=>t,b={toAttribute(t,e){switch(e){case Boolean:t=t?m:null;break;case Object:case Array:t=null==t?t:JSON.stringify(t)}return t},fromAttribute(t,e){let i=t;switch(e){case Boolean:i=null!==t;break;case Number:i=null===t?null:Number(t);break;case Object:case Array:try{i=JSON.parse(t)}catch(t){i=null}}return i}},y=(t,e)=>!a(t,e),x={attribute:!0,type:String,converter:b,reflect:!1,hasChanged:y};Symbol.metadata??=Symbol("metadata"),p.litPropertyMetadata??=new WeakMap;class w extends HTMLElement{static addInitializer(t){this._$Ei(),(this.l??=[]).push(t)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(t,e=x){if(e.state&&(e.attribute=!1),this._$Ei(),this.elementProperties.set(t,e),!e.noAccessor){const i=Symbol(),r=this.getPropertyDescriptor(t,i,e);void 0!==r&&l(this.prototype,t,r)}}static getPropertyDescriptor(t,e,i){const{get:r,set:o}=c(this.prototype,t)??{get(){return this[e]},set(t){this[e]=t}};return{get(){return r?.call(this)},set(e){const n=r?.call(this);o.call(this,e),this.requestUpdate(t,n,i)},configurable:!0,enumerable:!0}}static getPropertyOptions(t){return this.elementProperties.get(t)??x}static _$Ei(){if(this.hasOwnProperty(v("elementProperties")))return;const t=u(this);t.finalize(),void 0!==t.l&&(this.l=[...t.l]),this.elementProperties=new Map(t.elementProperties)}static finalize(){if(this.hasOwnProperty(v("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(v("properties"))){const t=this.properties,e=[...d(t),...h(t)];for(const i of e)this.createProperty(i,t[i])}const t=this[Symbol.metadata];if(null!==t){const e=litPropertyMetadata.get(t);if(void 0!==e)for(const[t,i]of e)this.elementProperties.set(t,i)}this._$Eh=new Map;for(const[t,e]of this.elementProperties){const i=this._$Eu(t,e);void 0!==i&&this._$Eh.set(i,t)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(t){const e=[];if(Array.isArray(t)){const i=new Set(t.flat(1/0).reverse());for(const t of i)e.unshift(s(t))}else void 0!==t&&e.push(s(t));return e}static _$Eu(t,e){const i=e.attribute;return!1===i?void 0:"string"==typeof i?i:"string"==typeof t?t.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){this._$ES=new Promise((t=>this.enableUpdating=t)),this._$AL=new Map,this._$E_(),this.requestUpdate(),this.constructor.l?.forEach((t=>t(this)))}addController(t){(this._$EO??=new Set).add(t),void 0!==this.renderRoot&&this.isConnected&&t.hostConnected?.()}removeController(t){this._$EO?.delete(t)}_$E_(){const t=new Map,e=this.constructor.elementProperties;for(const i of e.keys())this.hasOwnProperty(i)&&(t.set(i,this[i]),delete this[i]);t.size>0&&(this._$Ep=t)}createRenderRoot(){const i=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return((i,r)=>{if(e)i.adoptedStyleSheets=r.map((t=>t instanceof CSSStyleSheet?t:t.styleSheet));else for(const e of r){const r=document.createElement("style"),o=t.litNonce;void 0!==o&&r.setAttribute("nonce",o),r.textContent=e.cssText,i.appendChild(r)}})(i,this.constructor.elementStyles),i}connectedCallback(){this.renderRoot??=this.createRenderRoot(),this.enableUpdating(!0),this._$EO?.forEach((t=>t.hostConnected?.()))}enableUpdating(t){}disconnectedCallback(){this._$EO?.forEach((t=>t.hostDisconnected?.()))}attributeChangedCallback(t,e,i){this._$AK(t,i)}_$EC(t,e){const i=this.constructor.elementProperties.get(t),r=this.constructor._$Eu(t,i);if(void 0!==r&&!0===i.reflect){const o=(void 0!==i.converter?.toAttribute?i.converter:b).toAttribute(e,i.type);this._$Em=t,null==o?this.removeAttribute(r):this.setAttribute(r,o),this._$Em=null}}_$AK(t,e){const i=this.constructor,r=i._$Eh.get(t);if(void 0!==r&&this._$Em!==r){const t=i.getPropertyOptions(r),o="function"==typeof t.converter?{fromAttribute:t.converter}:void 0!==t.converter?.fromAttribute?t.converter:b;this._$Em=r,this[r]=o.fromAttribute(e,t.type),this._$Em=null}}requestUpdate(t,e,i){if(void 0!==t){if(i??=this.constructor.getPropertyOptions(t),!(i.hasChanged??y)(this[t],e))return;this.P(t,e,i)}!1===this.isUpdatePending&&(this._$ES=this._$ET())}P(t,e,i){this._$AL.has(t)||this._$AL.set(t,e),!0===i.reflect&&this._$Em!==t&&(this._$Ej??=new Set).add(t)}async _$ET(){this.isUpdatePending=!0;try{await this._$ES}catch(t){Promise.reject(t)}const t=this.scheduleUpdate();return null!=t&&await t,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??=this.createRenderRoot(),this._$Ep){for(const[t,e]of this._$Ep)this[t]=e;this._$Ep=void 0}const t=this.constructor.elementProperties;if(t.size>0)for(const[e,i]of t)!0!==i.wrapped||this._$AL.has(e)||void 0===this[e]||this.P(e,this[e],i)}let t=!1;const e=this._$AL;try{t=this.shouldUpdate(e),t?(this.willUpdate(e),this._$EO?.forEach((t=>t.hostUpdate?.())),this.update(e)):this._$EU()}catch(e){throw t=!1,this._$EU(),e}t&&this._$AE(e)}willUpdate(t){}_$AE(t){this._$EO?.forEach((t=>t.hostUpdated?.())),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(t)),this.updated(t)}_$EU(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(t){return!0}update(t){this._$Ej&&=this._$Ej.forEach((t=>this._$EC(t,this[t]))),this._$EU()}updated(t){}firstUpdated(t){}}w.elementStyles=[],w.shadowRootOptions={mode:"open"},w[v("elementProperties")]=new Map,w[v("finalized")]=new Map,g?.({ReactiveElement:w}),(p.reactiveElementVersions??=[]).push("2.0.4");
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const _=globalThis,k=_.trustedTypes,C=k?k.createPolicy("lit-html",{createHTML:t=>t}):void 0,A="$lit$",S=`lit$${Math.random().toFixed(9).slice(2)}$`,T="?"+S,P=`<${T}>`,E=document,I=()=>E.createComment(""),L=t=>null===t||"object"!=typeof t&&"function"!=typeof t,O=Array.isArray,R="[ \t\n\f\r]",$=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,M=/-->/g,N=/>/g,D=RegExp(`>|${R}(?:([^\\s"'>=/]+)(${R}*=${R}*(?:[^ \t\n\f\r"'\`<>=]|("|')|))|$)`,"g"),z=/'/g,F=/"/g,B=/^(?:script|style|textarea|title)$/i,U=(t=>(e,...i)=>({_$litType$:t,strings:e,values:i}))(1),V=Symbol.for("lit-noChange"),j=Symbol.for("lit-nothing"),G=new WeakMap,H=E.createTreeWalker(E,129);function q(t,e){if(!Array.isArray(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return void 0!==C?C.createHTML(e):e}const W=(t,e)=>{const i=t.length-1,r=[];let o,n=2===e?"<svg>":"",s=$;for(let e=0;e<i;e++){const i=t[e];let a,l,c=-1,d=0;for(;d<i.length&&(s.lastIndex=d,l=s.exec(i),null!==l);)d=s.lastIndex,s===$?"!--"===l[1]?s=M:void 0!==l[1]?s=N:void 0!==l[2]?(B.test(l[2])&&(o=RegExp("</"+l[2],"g")),s=D):void 0!==l[3]&&(s=D):s===D?">"===l[0]?(s=o??$,c=-1):void 0===l[1]?c=-2:(c=s.lastIndex-l[2].length,a=l[1],s=void 0===l[3]?D:'"'===l[3]?F:z):s===F||s===z?s=D:s===M||s===N?s=$:(s=D,o=void 0);const h=s===D&&t[e+1].startsWith("/>")?" ":"";n+=s===$?i+P:c>=0?(r.push(a),i.slice(0,c)+A+i.slice(c)+S+h):i+S+(-2===c?e:h)}return[q(t,n+(t[i]||"<?>")+(2===e?"</svg>":"")),r]};class Y{constructor({strings:t,_$litType$:e},i){let r;this.parts=[];let o=0,n=0;const s=t.length-1,a=this.parts,[l,c]=W(t,e);if(this.el=Y.createElement(l,i),H.currentNode=this.el.content,2===e){const t=this.el.content.firstChild;t.replaceWith(...t.childNodes)}for(;null!==(r=H.nextNode())&&a.length<s;){if(1===r.nodeType){if(r.hasAttributes())for(const t of r.getAttributeNames())if(t.endsWith(A)){const e=c[n++],i=r.getAttribute(t).split(S),s=/([.?@])?(.*)/.exec(e);a.push({type:1,index:o,name:s[2],strings:i,ctor:"."===s[1]?Z:"?"===s[1]?tt:"@"===s[1]?et:K}),r.removeAttribute(t)}else t.startsWith(S)&&(a.push({type:6,index:o}),r.removeAttribute(t));if(B.test(r.tagName)){const t=r.textContent.split(S),e=t.length-1;if(e>0){r.textContent=k?k.emptyScript:"";for(let i=0;i<e;i++)r.append(t[i],I()),H.nextNode(),a.push({type:2,index:++o});r.append(t[e],I())}}}else if(8===r.nodeType)if(r.data===T)a.push({type:2,index:o});else{let t=-1;for(;-1!==(t=r.data.indexOf(S,t+1));)a.push({type:7,index:o}),t+=S.length-1}o++}}static createElement(t,e){const i=E.createElement("template");return i.innerHTML=t,i}}function X(t,e,i=t,r){if(e===V)return e;let o=void 0!==r?i._$Co?.[r]:i._$Cl;const n=L(e)?void 0:e._$litDirective$;return o?.constructor!==n&&(o?._$AO?.(!1),void 0===n?o=void 0:(o=new n(t),o._$AT(t,i,r)),void 0!==r?(i._$Co??=[])[r]=o:i._$Cl=o),void 0!==o&&(e=X(t,o._$AS(t,e.values),o,r)),e}class J{constructor(t,e){this._$AV=[],this._$AN=void 0,this._$AD=t,this._$AM=e}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(t){const{el:{content:e},parts:i}=this._$AD,r=(t?.creationScope??E).importNode(e,!0);H.currentNode=r;let o=H.nextNode(),n=0,s=0,a=i[0];for(;void 0!==a;){if(n===a.index){let e;2===a.type?e=new Q(o,o.nextSibling,this,t):1===a.type?e=new a.ctor(o,a.name,a.strings,this,t):6===a.type&&(e=new it(o,this,t)),this._$AV.push(e),a=i[++s]}n!==a?.index&&(o=H.nextNode(),n++)}return H.currentNode=E,r}p(t){let e=0;for(const i of this._$AV)void 0!==i&&(void 0!==i.strings?(i._$AI(t,i,e),e+=i.strings.length-2):i._$AI(t[e])),e++}}class Q{get _$AU(){return this._$AM?._$AU??this._$Cv}constructor(t,e,i,r){this.type=2,this._$AH=j,this._$AN=void 0,this._$AA=t,this._$AB=e,this._$AM=i,this.options=r,this._$Cv=r?.isConnected??!0}get parentNode(){let t=this._$AA.parentNode;const e=this._$AM;return void 0!==e&&11===t?.nodeType&&(t=e.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t,e=this){t=X(this,t,e),L(t)?t===j||null==t||""===t?(this._$AH!==j&&this._$AR(),this._$AH=j):t!==this._$AH&&t!==V&&this._(t):void 0!==t._$litType$?this.$(t):void 0!==t.nodeType?this.T(t):(t=>O(t)||"function"==typeof t?.[Symbol.iterator])(t)?this.k(t):this._(t)}S(t){return this._$AA.parentNode.insertBefore(t,this._$AB)}T(t){this._$AH!==t&&(this._$AR(),this._$AH=this.S(t))}_(t){this._$AH!==j&&L(this._$AH)?this._$AA.nextSibling.data=t:this.T(E.createTextNode(t)),this._$AH=t}$(t){const{values:e,_$litType$:i}=t,r="number"==typeof i?this._$AC(t):(void 0===i.el&&(i.el=Y.createElement(q(i.h,i.h[0]),this.options)),i);if(this._$AH?._$AD===r)this._$AH.p(e);else{const t=new J(r,this),i=t.u(this.options);t.p(e),this.T(i),this._$AH=t}}_$AC(t){let e=G.get(t.strings);return void 0===e&&G.set(t.strings,e=new Y(t)),e}k(t){O(this._$AH)||(this._$AH=[],this._$AR());const e=this._$AH;let i,r=0;for(const o of t)r===e.length?e.push(i=new Q(this.S(I()),this.S(I()),this,this.options)):i=e[r],i._$AI(o),r++;r<e.length&&(this._$AR(i&&i._$AB.nextSibling,r),e.length=r)}_$AR(t=this._$AA.nextSibling,e){for(this._$AP?.(!1,!0,e);t&&t!==this._$AB;){const e=t.nextSibling;t.remove(),t=e}}setConnected(t){void 0===this._$AM&&(this._$Cv=t,this._$AP?.(t))}}class K{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(t,e,i,r,o){this.type=1,this._$AH=j,this._$AN=void 0,this.element=t,this.name=e,this._$AM=r,this.options=o,i.length>2||""!==i[0]||""!==i[1]?(this._$AH=Array(i.length-1).fill(new String),this.strings=i):this._$AH=j}_$AI(t,e=this,i,r){const o=this.strings;let n=!1;if(void 0===o)t=X(this,t,e,0),n=!L(t)||t!==this._$AH&&t!==V,n&&(this._$AH=t);else{const r=t;let s,a;for(t=o[0],s=0;s<o.length-1;s++)a=X(this,r[i+s],e,s),a===V&&(a=this._$AH[s]),n||=!L(a)||a!==this._$AH[s],a===j?t=j:t!==j&&(t+=(a??"")+o[s+1]),this._$AH[s]=a}n&&!r&&this.j(t)}j(t){t===j?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,t??"")}}class Z extends K{constructor(){super(...arguments),this.type=3}j(t){this.element[this.name]=t===j?void 0:t}}class tt extends K{constructor(){super(...arguments),this.type=4}j(t){this.element.toggleAttribute(this.name,!!t&&t!==j)}}class et extends K{constructor(t,e,i,r,o){super(t,e,i,r,o),this.type=5}_$AI(t,e=this){if((t=X(this,t,e,0)??j)===V)return;const i=this._$AH,r=t===j&&i!==j||t.capture!==i.capture||t.once!==i.once||t.passive!==i.passive,o=t!==j&&(i===j||r);r&&this.element.removeEventListener(this.name,this,i),o&&this.element.addEventListener(this.name,this,t),this._$AH=t}handleEvent(t){"function"==typeof this._$AH?this._$AH.call(this.options?.host??this.element,t):this._$AH.handleEvent(t)}}class it{constructor(t,e,i){this.element=t,this.type=6,this._$AN=void 0,this._$AM=e,this.options=i}get _$AU(){return this._$AM._$AU}_$AI(t){X(this,t)}}const rt=_.litHtmlPolyfillSupport;rt?.(Y,Q),(_.litHtmlVersions??=[]).push("3.1.4");const ot=(t,e,i)=>{const r=i?.renderBefore??e;let o=r._$litPart$;if(void 0===o){const t=i?.renderBefore??null;r._$litPart$=o=new Q(e.insertBefore(I(),t),t,void 0,i??{})}return o._$AI(t),o};
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */class nt extends w{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){const t=super.createRenderRoot();return this.renderOptions.renderBefore??=t.firstChild,t}update(t){const e=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(t),this._$Do=ot(e,this.renderRoot,this.renderOptions)}connectedCallback(){super.connectedCallback(),this._$Do?.setConnected(!0)}disconnectedCallback(){super.disconnectedCallback(),this._$Do?.setConnected(!1)}render(){return V}}nt._$litElement$=!0,nt.finalized=!0,globalThis.litElementHydrateSupport?.({LitElement:nt});const st=globalThis.litElementPolyfillSupport;st?.({LitElement:nt}),(globalThis.litElementVersions??=[]).push("4.0.6");
/**
 * @license
 * Copyright 2022 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const at=t=>(e,i)=>{void 0!==i?i.addInitializer((()=>{customElements.define(t,e)})):customElements.define(t,e)}
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */,lt={attribute:!0,type:String,converter:b,reflect:!1,hasChanged:y},ct=(t=lt,e,i)=>{const{kind:r,metadata:o}=i;let n=globalThis.litPropertyMetadata.get(o);if(void 0===n&&globalThis.litPropertyMetadata.set(o,n=new Map),n.set(i.name,t),"accessor"===r){const{name:r}=i;return{set(i){const o=e.get.call(this);e.set.call(this,i),this.requestUpdate(r,o,t)},init(e){return void 0!==e&&this.P(r,void 0,t),e}}}if("setter"===r){const{name:r}=i;return function(i){const o=this[r];e.call(this,i),this.requestUpdate(r,o,t)}}throw Error("Unsupported decorator location: "+r)};
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function dt(t){return(e,i)=>"object"==typeof i?ct(t,e,i):((t,e,i)=>{const r=e.hasOwnProperty(i);return e.constructor.createProperty(i,r?{...t,wrapped:!0}:t),r?Object.getOwnPropertyDescriptor(e,i):void 0})(t,e,i)}
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function ht(t){return dt({...t,state:!0,attribute:!1})}
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const ut=(t,e,i)=>(i.configurable=!0,i.enumerable=!0,Reflect.decorate&&"object"!=typeof e&&Object.defineProperty(t,e,i),i)
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */;function pt(t,e){return(i,r,o)=>{const n=e=>e.renderRoot?.querySelector(t)??null;if(e){const{get:t,set:e}="object"==typeof r?i:o??(()=>{const t=Symbol();return{get(){return this[t]},set(e){this[t]=e}}})();return ut(i,r,{get(){let i=t.call(this);return void 0===i&&(i=n(this),(null!==i||this.hasUpdated)&&e.call(this,i)),i}})}return ut(i,r,{get(){return n(this)}})}}
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */let ft;
/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
function mt(t){return(e,i)=>{const{slot:r,selector:o}=t??{},n="slot"+(r?`[name=${r}]`:":not([name])");return ut(e,i,{get(){const e=this.renderRoot?.querySelector(n),i=e?.assignedElements(t)??[];return void 0===o?i:i.filter((t=>t.matches(o)))}})}}
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function gt(t){return(e,i)=>{const{slot:r}=t??{},o="slot"+(r?`[name=${r}]`:":not([name])");return ut(e,i,{get(){const e=this.renderRoot?.querySelector(o);return e?.assignedNodes(t)??[]}})}}var vt=function(){return vt=Object.assign||function(t){for(var e,i=1,r=arguments.length;i<r;i++)for(var o in e=arguments[i])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},vt.apply(this,arguments)};function bt(t,e,i,r){var o,n=arguments.length,s=n<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(n<3?o(s):n>3?o(e,i,s):o(e,i))||s);return n>3&&s&&Object.defineProperty(e,i,s),s}function yt(t,e,i,r){return new(i||(i=Promise))((function(o,n){function s(t){try{l(r.next(t))}catch(t){n(t)}}function a(t){try{l(r.throw(t))}catch(t){n(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(s,a)}l((r=r.apply(t,e||[])).next())}))}function xt(t,e){var i,r,o,n,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return n={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n;function a(a){return function(l){return function(a){if(i)throw new TypeError("Generator is already executing.");for(;n&&(n=0,a[0]&&(s=0)),s;)try{if(i=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=e.call(t,s)}catch(t){a=[6,t],r=0}finally{i=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}function wt(t,e,i){if(i||2===arguments.length)for(var r,o=0,n=e.length;o<n;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))}"function"==typeof SuppressedError&&SuppressedError;
/**
 * @license
 * Copyright 2022 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
class _t extends nt{connectedCallback(){super.connectedCallback(),this.setAttribute("aria-hidden","true")}render(){return U`<span class="shadow"></span>`}}
/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const kt=n`.shadow,.shadow::after,.shadow::before,:host{border-radius:inherit;inset:0;position:absolute;transition-duration:inherit;transition-property:inherit;transition-timing-function:inherit}:host{display:flex;pointer-events:none;transition-property:box-shadow,opacity}.shadow::after,.shadow::before{content:"";transition-property:box-shadow,opacity;--_level:var(--md-elevation-level, 0);--_shadow-color:var(--md-elevation-shadow-color, var(--md-sys-color-shadow, #000))}.shadow::before{box-shadow:0 calc(1px*(clamp(0,var(--_level),1) + clamp(0,var(--_level) - 3,1) + 2*clamp(0,var(--_level) - 4,1))) calc(1px*(2*clamp(0,var(--_level),1) + clamp(0,var(--_level) - 2,1) + clamp(0,var(--_level) - 4,1))) 0 var(--_shadow-color);opacity:.3}.shadow::after{box-shadow:0 calc(1px*(clamp(0,var(--_level),1) + clamp(0,var(--_level) - 1,1) + 2*clamp(0,var(--_level) - 2,3))) calc(1px*(3*clamp(0,var(--_level),2) + 2*clamp(0,var(--_level) - 2,3))) calc(1px*(clamp(0,var(--_level),4) + 2*clamp(0,var(--_level) - 4,1))) var(--_shadow-color);opacity:.15}`
/**
 * @license
 * Copyright 2022 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */;let Ct=class extends _t{};Ct.styles=[kt],Ct=bt([at("md-elevation")],Ct);
/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
const At=["role","ariaAtomic","ariaAutoComplete","ariaBusy","ariaChecked","ariaColCount","ariaColIndex","ariaColSpan","ariaCurrent","ariaDisabled","ariaExpanded","ariaHasPopup","ariaHidden","ariaInvalid","ariaKeyShortcuts","ariaLabel","ariaLevel","ariaLive","ariaModal","ariaMultiLine","ariaMultiSelectable","ariaOrientation","ariaPlaceholder","ariaPosInSet","ariaPressed","ariaReadOnly","ariaRequired","ariaRoleDescription","ariaRowCount","ariaRowIndex","ariaRowSpan","ariaSelected","ariaSetSize","ariaSort","ariaValueMax","ariaValueMin","ariaValueNow","ariaValueText"];function St(t){return t.replace("aria","aria-").replace(/Elements?/g,"").toLowerCase()}
/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Tt(t){for(const e of At)t.createProperty(e,{attribute:St(e),reflect:!0});t.addInitializer((t=>{const e={hostConnected(){t.setAttribute("role","presentation")}};t.addController(e)}))}
/**
 * @license
 * Copyright 2022 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Pt(t,e=!0){return e&&"rtl"===getComputedStyle(t).getPropertyValue("direction").trim()}
/**
 * @license
 * Copyright 2022 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */At.map(St);class Et extends nt{constructor(){super(...arguments),this.activeIndex=0,this.hideInactiveLabels=!1,this.tabs=[]}render(){const{ariaLabel:t}=this;return U`<div class="md3-navigation-bar" role="tablist" aria-label="${t||j}" @keydown="${this.handleKeydown}" @navigation-tab-interaction="${this.handleNavigationTabInteraction}" @navigation-tab-rendered="${this.handleNavigationTabConnected}"><md-elevation part="elevation"></md-elevation><div class="md3-navigation-bar__tabs-slot-container"><slot></slot></div></div>`}updated(t){t.has("activeIndex")&&(this.onActiveIndexChange(this.activeIndex),this.dispatchEvent(new CustomEvent("navigation-bar-activated",{detail:{tab:this.tabs[this.activeIndex],activeIndex:this.activeIndex},bubbles:!0,composed:!0}))),t.has("hideInactiveLabels")&&this.onHideInactiveLabelsChange(this.hideInactiveLabels),t.has("tabs")&&(this.onHideInactiveLabelsChange(this.hideInactiveLabels),this.onActiveIndexChange(this.activeIndex))}firstUpdated(t){super.firstUpdated(t),this.layout()}layout(){if(!this.tabsElement)return;const t=[];for(const e of this.tabsElement)t.push(e);this.tabs=t}handleNavigationTabConnected(t){const e=t.target;-1===this.tabs.indexOf(e)&&this.layout()}handleNavigationTabInteraction(t){this.activeIndex=this.tabs.indexOf(t.detail.state)}handleKeydown(t){const e=t.key,i=this.tabs.findIndex((t=>t.matches(":focus-within"))),r=Pt(this),o=this.tabs.length-1;if("Enter"===e||" "===e)return void(this.activeIndex=i);if("Home"===e)return void this.tabs[0].focus();if("End"===e)return void this.tabs[o].focus();const n="ArrowRight"===e&&!r||"ArrowLeft"===e&&r;if(n&&i===o)return void this.tabs[0].focus();if(n)return void this.tabs[i+1].focus();const s="ArrowLeft"===e&&!r||"ArrowRight"===e&&r;s&&0===i?this.tabs[o].focus():s&&this.tabs[i-1].focus()}onActiveIndexChange(t){if(!this.tabs[t])throw new Error("NavigationBar: activeIndex is out of bounds.");for(let e=0;e<this.tabs.length;e++)this.tabs[e].active=e===t}onHideInactiveLabelsChange(t){for(const e of this.tabs)e.hideInactiveLabel=t}}Tt(Et),bt([dt({type:Number,attribute:"active-index"})],Et.prototype,"activeIndex",void 0),bt([dt({type:Boolean,attribute:"hide-inactive-labels"})],Et.prototype,"hideInactiveLabels",void 0),bt([mt({flatten:!0})],Et.prototype,"tabsElement",void 0);
/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
const It=n`:host{--_active-indicator-color:var(--md-navigation-bar-active-indicator-color, var(--md-sys-color-secondary-container, #e8def8));--_active-indicator-height:var(--md-navigation-bar-active-indicator-height, 32px);--_active-indicator-shape:var(--md-navigation-bar-active-indicator-shape, var(--md-sys-shape-corner-full, 9999px));--_active-indicator-width:var(--md-navigation-bar-active-indicator-width, 64px);--_active-focus-icon-color:var(--md-navigation-bar-active-focus-icon-color, var(--md-sys-color-on-secondary-container, #1d192b));--_active-focus-label-text-color:var(--md-navigation-bar-active-focus-label-text-color, var(--md-sys-color-on-surface, #1d1b20));--_active-focus-state-layer-color:var(--md-navigation-bar-active-focus-state-layer-color, var(--md-sys-color-on-surface, #1d1b20));--_active-hover-icon-color:var(--md-navigation-bar-active-hover-icon-color, var(--md-sys-color-on-secondary-container, #1d192b));--_active-hover-label-text-color:var(--md-navigation-bar-active-hover-label-text-color, var(--md-sys-color-on-surface, #1d1b20));--_active-hover-state-layer-color:var(--md-navigation-bar-active-hover-state-layer-color, var(--md-sys-color-on-surface, #1d1b20));--_active-icon-color:var(--md-navigation-bar-active-icon-color, var(--md-sys-color-on-secondary-container, #1d192b));--_active-label-text-color:var(--md-navigation-bar-active-label-text-color, var(--md-sys-color-on-surface, #1d1b20));--_active-label-text-weight:var(--md-navigation-bar-active-label-text-weight, var(--md-sys-typescale-label-medium-weight-prominent, var(--md-ref-typeface-weight-bold, 700)));--_active-pressed-icon-color:var(--md-navigation-bar-active-pressed-icon-color, var(--md-sys-color-on-secondary-container, #1d192b));--_active-pressed-label-text-color:var(--md-navigation-bar-active-pressed-label-text-color, var(--md-sys-color-on-surface, #1d1b20));--_active-pressed-state-layer-color:var(--md-navigation-bar-active-pressed-state-layer-color, var(--md-sys-color-on-surface, #1d1b20));--_container-color:var(--md-navigation-bar-container-color, var(--md-sys-color-surface-container, #f3edf7));--_container-elevation:var(--md-navigation-bar-container-elevation, 2);--_container-height:var(--md-navigation-bar-container-height, 80px);--_container-shape:var(--md-navigation-bar-container-shape, var(--md-sys-shape-corner-none, 0px));--_focus-state-layer-opacity:var(--md-navigation-bar-focus-state-layer-opacity, 0.12);--_hover-state-layer-opacity:var(--md-navigation-bar-hover-state-layer-opacity, 0.08);--_icon-size:var(--md-navigation-bar-icon-size, 24px);--_inactive-focus-icon-color:var(--md-navigation-bar-inactive-focus-icon-color, var(--md-sys-color-on-surface, #1d1b20));--_inactive-focus-label-text-color:var(--md-navigation-bar-inactive-focus-label-text-color, var(--md-sys-color-on-surface, #1d1b20));--_inactive-focus-state-layer-color:var(--md-navigation-bar-inactive-focus-state-layer-color, var(--md-sys-color-on-surface, #1d1b20));--_inactive-hover-icon-color:var(--md-navigation-bar-inactive-hover-icon-color, var(--md-sys-color-on-surface, #1d1b20));--_inactive-hover-label-text-color:var(--md-navigation-bar-inactive-hover-label-text-color, var(--md-sys-color-on-surface, #1d1b20));--_inactive-hover-state-layer-color:var(--md-navigation-bar-inactive-hover-state-layer-color, var(--md-sys-color-on-surface, #1d1b20));--_inactive-icon-color:var(--md-navigation-bar-inactive-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_inactive-label-text-color:var(--md-navigation-bar-inactive-label-text-color, var(--md-sys-color-on-surface-variant, #49454f));--_inactive-pressed-icon-color:var(--md-navigation-bar-inactive-pressed-icon-color, var(--md-sys-color-on-surface, #1d1b20));--_inactive-pressed-label-text-color:var(--md-navigation-bar-inactive-pressed-label-text-color, var(--md-sys-color-on-surface, #1d1b20));--_inactive-pressed-state-layer-color:var(--md-navigation-bar-inactive-pressed-state-layer-color, var(--md-sys-color-on-surface, #1d1b20));--_label-text-font:var(--md-navigation-bar-label-text-font, var(--md-sys-typescale-label-medium-font, var(--md-ref-typeface-plain, Roboto)));--_label-text-line-height:var(--md-navigation-bar-label-text-line-height, var(--md-sys-typescale-label-medium-line-height, 1rem));--_label-text-size:var(--md-navigation-bar-label-text-size, var(--md-sys-typescale-label-medium-size, 0.75rem));--_label-text-tracking:var(--md-navigation-bar-label-text-tracking, );--_label-text-type:var(--md-navigation-bar-label-text-type, var(--md-sys-typescale-label-medium-weight, var(--md-ref-typeface-weight-medium, 500)) var(--md-sys-typescale-label-medium-size, 0.75rem) / var(--md-sys-typescale-label-medium-line-height, 1rem) var(--md-sys-typescale-label-medium-font, var(--md-ref-typeface-plain, Roboto)));--_label-text-weight:var(--md-navigation-bar-label-text-weight, var(--md-sys-typescale-label-medium-weight, var(--md-ref-typeface-weight-medium, 500)));--_pressed-state-layer-opacity:var(--md-navigation-bar-pressed-state-layer-opacity, 0.12);--md-elevation-level:var(--_container-elevation);--md-elevation-shadow-color:var(--_container-shadow-color);width:100%}.md3-navigation-bar{display:flex;position:relative;width:100%;background-color:var(--_container-color);border-radius:var(--_container-shape);height:var(--_container-height)}.md3-navigation-bar .md3-navigation-bar__tabs-slot-container{display:inherit;width:inherit}md-elevation{transition-duration:280ms;z-index:0}`
/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */;let Lt=class extends Et{};Lt.styles=[It],Lt=bt([at("md-navigation-bar")],Lt);
/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
const Ot=Symbol("attachableController");let Rt;Rt=new MutationObserver((t=>{for(const e of t)e.target[Ot]?.hostConnected()}));class $t{get htmlFor(){return this.host.getAttribute("for")}set htmlFor(t){null===t?this.host.removeAttribute("for"):this.host.setAttribute("for",t)}get control(){return this.host.hasAttribute("for")?this.htmlFor&&this.host.isConnected?this.host.getRootNode().querySelector(`#${this.htmlFor}`):null:this.currentControl||this.host.parentElement}set control(t){t?this.attach(t):this.detach()}constructor(t,e){this.host=t,this.onControlChange=e,this.currentControl=null,t.addController(this),t[Ot]=this,Rt?.observe(t,{attributeFilter:["for"]})}attach(t){t!==this.currentControl&&(this.setCurrentControl(t),this.host.removeAttribute("for"))}detach(){this.setCurrentControl(null),this.host.setAttribute("for","")}hostConnected(){this.setCurrentControl(this.control)}hostDisconnected(){this.setCurrentControl(null)}setCurrentControl(t){this.onControlChange(this.currentControl,t),this.currentControl=t}}
/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Mt=["focusin","focusout","pointerdown"];class Nt extends nt{constructor(){super(...arguments),this.visible=!1,this.inward=!1,this.attachableController=new $t(this,this.onControlChange.bind(this))}get htmlFor(){return this.attachableController.htmlFor}set htmlFor(t){this.attachableController.htmlFor=t}get control(){return this.attachableController.control}set control(t){this.attachableController.control=t}attach(t){this.attachableController.attach(t)}detach(){this.attachableController.detach()}connectedCallback(){super.connectedCallback(),this.setAttribute("aria-hidden","true")}handleEvent(t){if(!t[Dt]){switch(t.type){default:return;case"focusin":this.visible=this.control?.matches(":focus-visible")??!1;break;case"focusout":case"pointerdown":this.visible=!1}t[Dt]=!0}}onControlChange(t,e){for(const i of Mt)t?.removeEventListener(i,this),e?.addEventListener(i,this)}update(t){t.has("visible")&&this.dispatchEvent(new Event("visibility-changed")),super.update(t)}}bt([dt({type:Boolean,reflect:!0})],Nt.prototype,"visible",void 0),bt([dt({type:Boolean,reflect:!0})],Nt.prototype,"inward",void 0);const Dt=Symbol("handledByFocusRing"),zt=n`:host{animation-delay:0s,calc(var(--md-focus-ring-duration,600ms)*.25);animation-duration:calc(var(--md-focus-ring-duration,600ms)*.25),calc(var(--md-focus-ring-duration,600ms)*.75);animation-timing-function:cubic-bezier(.2,0,0,1);box-sizing:border-box;color:var(--md-focus-ring-color,var(--md-sys-color-secondary,#625b71));display:none;pointer-events:none;position:absolute}:host([visible]){display:flex}:host(:not([inward])){animation-name:outward-grow,outward-shrink;border-end-end-radius:calc(var(--md-focus-ring-shape-end-end,var(--md-focus-ring-shape,var(--md-sys-shape-corner-full,9999px))) + var(--md-focus-ring-outward-offset,2px));border-end-start-radius:calc(var(--md-focus-ring-shape-end-start,var(--md-focus-ring-shape,var(--md-sys-shape-corner-full,9999px))) + var(--md-focus-ring-outward-offset,2px));border-start-end-radius:calc(var(--md-focus-ring-shape-start-end,var(--md-focus-ring-shape,var(--md-sys-shape-corner-full,9999px))) + var(--md-focus-ring-outward-offset,2px));border-start-start-radius:calc(var(--md-focus-ring-shape-start-start,var(--md-focus-ring-shape,var(--md-sys-shape-corner-full,9999px))) + var(--md-focus-ring-outward-offset,2px));inset:calc(-1*var(--md-focus-ring-outward-offset,2px));outline:var(--md-focus-ring-width,3px) solid currentColor}:host([inward]){animation-name:inward-grow,inward-shrink;border-end-end-radius:calc(var(--md-focus-ring-shape-end-end,var(--md-focus-ring-shape,var(--md-sys-shape-corner-full,9999px))) - var(--md-focus-ring-inward-offset,0px));border-end-start-radius:calc(var(--md-focus-ring-shape-end-start,var(--md-focus-ring-shape,var(--md-sys-shape-corner-full,9999px))) - var(--md-focus-ring-inward-offset,0px));border-start-end-radius:calc(var(--md-focus-ring-shape-start-end,var(--md-focus-ring-shape,var(--md-sys-shape-corner-full,9999px))) - var(--md-focus-ring-inward-offset,0px));border-start-start-radius:calc(var(--md-focus-ring-shape-start-start,var(--md-focus-ring-shape,var(--md-sys-shape-corner-full,9999px))) - var(--md-focus-ring-inward-offset,0px));border:var(--md-focus-ring-width,3px) solid currentColor;inset:var(--md-focus-ring-inward-offset,0)}@keyframes outward-grow{from{outline-width:0}to{outline-width:var(--md-focus-ring-active-width,8px)}}@keyframes outward-shrink{from{outline-width:var(--md-focus-ring-active-width,8px)}}@keyframes inward-grow{from{border-width:0}to{border-width:var(--md-focus-ring-active-width,8px)}}@keyframes inward-shrink{from{border-width:var(--md-focus-ring-active-width,8px)}}@media(prefers-reduced-motion){:host{animation:none}}`
/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */;
/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Ft=class extends Nt{};Ft.styles=[zt],Ft=bt([at("md-focus-ring")],Ft);
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const Bt=1,Ut=2,Vt=3,jt=4,Gt=t=>(...e)=>({_$litDirective$:t,values:e});class Ht{constructor(t){}get _$AU(){return this._$AM._$AU}_$AT(t,e,i){this._$Ct=t,this._$AM=e,this._$Ci=i}_$AS(t,e){return this.update(t,e)}update(t,e){return this.render(...e)}}
/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const qt=Gt(class extends Ht{constructor(t){if(super(t),t.type!==Bt||"class"!==t.name||t.strings?.length>2)throw Error("`classMap()` can only be used in the `class` attribute and must be the only part in the attribute.")}render(t){return" "+Object.keys(t).filter((e=>t[e])).join(" ")+" "}update(t,[e]){if(void 0===this.st){this.st=new Set,void 0!==t.strings&&(this.nt=new Set(t.strings.join(" ").split(/\s/).filter((t=>""!==t))));for(const t in e)e[t]&&!this.nt?.has(t)&&this.st.add(t);return this.render(e)}const i=t.element.classList;for(const t of this.st)t in e||(i.remove(t),this.st.delete(t));for(const t in e){const r=!!e[t];r===this.st.has(t)||this.nt?.has(t)||(r?(i.add(t),this.st.add(t)):(i.remove(t),this.st.delete(t)))}return V}}),Wt="cubic-bezier(0.2, 0, 0, 1)",Yt="cubic-bezier(.3,0,0,1)",Xt="cubic-bezier(.3,0,.8,.15)";
/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Jt;!function(t){t[t.INACTIVE=0]="INACTIVE",t[t.TOUCH_DELAY=1]="TOUCH_DELAY",t[t.HOLDING=2]="HOLDING",t[t.WAITING_FOR_CLICK=3]="WAITING_FOR_CLICK"}(Jt||(Jt={}));const Qt=["click","contextmenu","pointercancel","pointerdown","pointerenter","pointerleave","pointerup"],Kt=window.matchMedia("(forced-colors: active)");class Zt extends nt{constructor(){super(...arguments),this.disabled=!1,this.hovered=!1,this.pressed=!1,this.rippleSize="",this.rippleScale="",this.initialSize=0,this.state=Jt.INACTIVE,this.checkBoundsAfterContextMenu=!1,this.attachableController=new $t(this,this.onControlChange.bind(this))}get htmlFor(){return this.attachableController.htmlFor}set htmlFor(t){this.attachableController.htmlFor=t}get control(){return this.attachableController.control}set control(t){this.attachableController.control=t}attach(t){this.attachableController.attach(t)}detach(){this.attachableController.detach()}connectedCallback(){super.connectedCallback(),this.setAttribute("aria-hidden","true")}render(){const t={hovered:this.hovered,pressed:this.pressed};return U`<div class="surface ${qt(t)}"></div>`}update(t){t.has("disabled")&&this.disabled&&(this.hovered=!1,this.pressed=!1),super.update(t)}handlePointerenter(t){this.shouldReactToEvent(t)&&(this.hovered=!0)}handlePointerleave(t){this.shouldReactToEvent(t)&&(this.hovered=!1,this.state!==Jt.INACTIVE&&this.endPressAnimation())}handlePointerup(t){if(this.shouldReactToEvent(t)){if(this.state!==Jt.HOLDING)return this.state===Jt.TOUCH_DELAY?(this.state=Jt.WAITING_FOR_CLICK,void this.startPressAnimation(this.rippleStartEvent)):void 0;this.state=Jt.WAITING_FOR_CLICK}}async handlePointerdown(t){if(this.shouldReactToEvent(t)){if(this.rippleStartEvent=t,!this.isTouch(t))return this.state=Jt.WAITING_FOR_CLICK,void this.startPressAnimation(t);this.checkBoundsAfterContextMenu&&!this.inBounds(t)||(this.checkBoundsAfterContextMenu=!1,this.state=Jt.TOUCH_DELAY,await new Promise((t=>{setTimeout(t,150)})),this.state===Jt.TOUCH_DELAY&&(this.state=Jt.HOLDING,this.startPressAnimation(t)))}}handleClick(){this.disabled||(this.state!==Jt.WAITING_FOR_CLICK?this.state===Jt.INACTIVE&&(this.startPressAnimation(),this.endPressAnimation()):this.endPressAnimation())}handlePointercancel(t){this.shouldReactToEvent(t)&&this.endPressAnimation()}handleContextmenu(){this.disabled||(this.checkBoundsAfterContextMenu=!0,this.endPressAnimation())}determineRippleSize(){const{height:t,width:e}=this.getBoundingClientRect(),i=Math.max(t,e),r=Math.max(.35*i,75),o=Math.floor(.2*i),n=Math.sqrt(e**2+t**2)+10;this.initialSize=o,this.rippleScale=""+(n+r)/o,this.rippleSize=`${o}px`}getNormalizedPointerEventCoords(t){const{scrollX:e,scrollY:i}=window,{left:r,top:o}=this.getBoundingClientRect(),n=e+r,s=i+o,{pageX:a,pageY:l}=t;return{x:a-n,y:l-s}}getTranslationCoordinates(t){const{height:e,width:i}=this.getBoundingClientRect(),r={x:(i-this.initialSize)/2,y:(e-this.initialSize)/2};let o;return o=t instanceof PointerEvent?this.getNormalizedPointerEventCoords(t):{x:i/2,y:e/2},o={x:o.x-this.initialSize/2,y:o.y-this.initialSize/2},{startPoint:o,endPoint:r}}startPressAnimation(t){if(!this.mdRoot)return;this.pressed=!0,this.growAnimation?.cancel(),this.determineRippleSize();const{startPoint:e,endPoint:i}=this.getTranslationCoordinates(t),r=`${e.x}px, ${e.y}px`,o=`${i.x}px, ${i.y}px`;this.growAnimation=this.mdRoot.animate({top:[0,0],left:[0,0],height:[this.rippleSize,this.rippleSize],width:[this.rippleSize,this.rippleSize],transform:[`translate(${r}) scale(1)`,`translate(${o}) scale(${this.rippleScale})`]},{pseudoElement:"::after",duration:450,easing:Wt,fill:"forwards"})}async endPressAnimation(){this.rippleStartEvent=void 0,this.state=Jt.INACTIVE;const t=this.growAnimation;let e=1/0;"number"==typeof t?.currentTime?e=t.currentTime:t?.currentTime&&(e=t.currentTime.to("ms").value),e>=225?this.pressed=!1:(await new Promise((t=>{setTimeout(t,225-e)})),this.growAnimation===t&&(this.pressed=!1))}shouldReactToEvent(t){if(this.disabled||!t.isPrimary)return!1;if(this.rippleStartEvent&&this.rippleStartEvent.pointerId!==t.pointerId)return!1;if("pointerenter"===t.type||"pointerleave"===t.type)return!this.isTouch(t);const e=1===t.buttons;return this.isTouch(t)||e}inBounds({x:t,y:e}){const{top:i,left:r,bottom:o,right:n}=this.getBoundingClientRect();return t>=r&&t<=n&&e>=i&&e<=o}isTouch({pointerType:t}){return"touch"===t}async handleEvent(t){if(!Kt?.matches)switch(t.type){case"click":this.handleClick();break;case"contextmenu":this.handleContextmenu();break;case"pointercancel":this.handlePointercancel(t);break;case"pointerdown":await this.handlePointerdown(t);break;case"pointerenter":this.handlePointerenter(t);break;case"pointerleave":this.handlePointerleave(t);break;case"pointerup":this.handlePointerup(t)}}onControlChange(t,e){for(const i of Qt)t?.removeEventListener(i,this),e?.addEventListener(i,this)}}bt([dt({type:Boolean,reflect:!0})],Zt.prototype,"disabled",void 0),bt([ht()],Zt.prototype,"hovered",void 0),bt([ht()],Zt.prototype,"pressed",void 0),bt([pt(".surface")],Zt.prototype,"mdRoot",void 0);
/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
const te=n`:host{display:flex;margin:auto;pointer-events:none}:host([disabled]){display:none}@media(forced-colors:active){:host{display:none}}.surface,:host{border-radius:inherit;position:absolute;inset:0;overflow:hidden}.surface{-webkit-tap-highlight-color:transparent}.surface::after,.surface::before{content:"";opacity:0;position:absolute}.surface::before{background-color:var(--md-ripple-hover-color,var(--md-sys-color-on-surface,#1d1b20));inset:0;transition:opacity 15ms linear,background-color 15ms linear}.surface::after{background:radial-gradient(closest-side,var(--md-ripple-pressed-color,var(--md-sys-color-on-surface,#1d1b20)) max(100% - 70px,65%),transparent 100%);transform-origin:center center;transition:opacity 375ms linear}.hovered::before{background-color:var(--md-ripple-hover-color,var(--md-sys-color-on-surface,#1d1b20));opacity:var(--md-ripple-hover-opacity,.08)}.pressed::after{opacity:var(--md-ripple-pressed-opacity,.12);transition-duration:105ms}`
/**
 * @license
 * Copyright 2022 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */;let ee=class extends Zt{};ee.styles=[te],ee=bt([at("md-ripple")],ee);
/**
 * @license
 * Copyright 2022 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
class ie extends nt{constructor(){super(...arguments),this.value=""}render(){const t={"md3-badge--large":this.value};return U`<div class="md3-badge ${qt(t)}"> <p class="md3-badge__value">${this.value}</p> </div>`}}bt([dt()],ie.prototype,"value",void 0);
/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
const re=n`:host{--_color:var(--md-badge-color, var(--md-sys-color-error, #b3261e));--_large-color:var(--md-badge-large-color, var(--md-sys-color-error, #b3261e));--_large-label-text-color:var(--md-badge-large-label-text-color, var(--md-sys-color-on-error, #fff));--_large-label-text-font:var(--md-badge-large-label-text-font, var(--md-sys-typescale-label-small-font, var(--md-ref-typeface-plain, Roboto)));--_large-label-text-line-height:var(--md-badge-large-label-text-line-height, var(--md-sys-typescale-label-small-line-height, 1rem));--_large-label-text-size:var(--md-badge-large-label-text-size, var(--md-sys-typescale-label-small-size, 0.6875rem));--_large-label-text-weight:var(--md-badge-large-label-text-weight, var(--md-sys-typescale-label-small-weight, var(--md-ref-typeface-weight-medium, 500)));--_large-shape:var(--md-badge-large-shape, var(--md-sys-shape-corner-full, 9999px));--_large-size:var(--md-badge-large-size, 16px);--_shape:var(--md-badge-shape, var(--md-sys-shape-corner-full, 9999px));--_size:var(--md-badge-size, 6px)}.md3-badge{inset-inline-start:50%;margin-inline-start:6px;margin-block-start:4px;position:absolute;inset-block-start:0;background-color:var(--_color);border-radius:var(--_shape);height:var(--_size)}.md3-badge:not(.md3-badge--large){width:var(--_size)}.md3-badge.md3-badge--large{display:flex;flex-direction:column;justify-content:center;margin-inline-start:2px;margin-block-start:1px;background-color:var(--_large-color);border-radius:var(--_large-shape);height:var(--_large-size);min-width:var(--_large-size);color:var(--_large-label-text-color)}.md3-badge.md3-badge--large .md3-badge__value{padding:0 4px;text-align:center}.md3-badge__value{font-family:var(--_large-label-text-font);font-size:var(--_large-label-text-size);line-height:var(--_large-label-text-line-height);font-weight:var(--_large-label-text-weight)}`
/**
 * @license
 * Copyright 2022 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */;let oe=class extends ie{};oe.styles=[re],oe=bt([at("md-badge")],oe);
/**
 * @license
 * Copyright 2022 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
class ne extends nt{constructor(){super(...arguments),this.disabled=!1,this.active=!1,this.hideInactiveLabel=!1,this.badgeValue="",this.showBadge=!1}render(){const{ariaLabel:t}=this;return U` <button class="md3-navigation-tab ${qt(this.getRenderClasses())}" role="tab" aria-selected="${this.active}" aria-label="${t||j}" tabindex="${this.active?0:-1}" @click="${this.handleClick}"> <md-focus-ring part="focus-ring" inward></md-focus-ring> <md-ripple ?disabled="${this.disabled}" class="md3-navigation-tab__ripple"></md-ripple> <span aria-hidden="true" class="md3-navigation-tab__icon-content"><span class="md3-navigation-tab__active-indicator"></span><span class="md3-navigation-tab__icon"><slot name="inactive-icon"></slot></span> <span class="md3-navigation-tab__icon md3-navigation-tab__icon--active"><slot name="active-icon"></slot></span>${this.renderBadge()}</span>${this.renderLabel()} </button>`}getRenderClasses(){return{"md3-navigation-tab--hide-inactive-label":this.hideInactiveLabel,"md3-navigation-tab--active":this.active}}renderBadge(){return this.showBadge?U`<md-badge .value="${this.badgeValue}"></md-badge>`:j}renderLabel(){const{ariaLabel:t}=this,e=t?"true":"false";return this.label?U` <span aria-hidden="${e}" class="md3-navigation-tab__label-text">${this.label}</span>`:j}firstUpdated(t){super.firstUpdated(t);const e=new Event("navigation-tab-rendered",{bubbles:!0,composed:!0});this.dispatchEvent(e)}focus(){const t=this.buttonElement;t&&t.focus()}blur(){const t=this.buttonElement;t&&t.blur()}handleClick(){this.dispatchEvent(new CustomEvent("navigation-tab-interaction",{detail:{state:this},bubbles:!0,composed:!0}))}}Tt(ne),bt([dt({type:Boolean})],ne.prototype,"disabled",void 0),bt([dt({type:Boolean,reflect:!0})],ne.prototype,"active",void 0),bt([dt({type:Boolean,attribute:"hide-inactive-label"})],ne.prototype,"hideInactiveLabel",void 0),bt([dt()],ne.prototype,"label",void 0),bt([dt({attribute:"badge-value"})],ne.prototype,"badgeValue",void 0),bt([dt({type:Boolean,attribute:"show-badge"})],ne.prototype,"showBadge",void 0),bt([pt("button")],ne.prototype,"buttonElement",void 0);
/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
const se=n`:host{--_active-indicator-color:var(--md-navigation-bar-active-indicator-color, var(--md-sys-color-secondary-container, #e8def8));--_active-indicator-height:var(--md-navigation-bar-active-indicator-height, 32px);--_active-indicator-shape:var(--md-navigation-bar-active-indicator-shape, var(--md-sys-shape-corner-full, 9999px));--_active-indicator-width:var(--md-navigation-bar-active-indicator-width, 64px);--_active-focus-icon-color:var(--md-navigation-bar-active-focus-icon-color, var(--md-sys-color-on-secondary-container, #1d192b));--_active-focus-label-text-color:var(--md-navigation-bar-active-focus-label-text-color, var(--md-sys-color-on-surface, #1d1b20));--_active-focus-state-layer-color:var(--md-navigation-bar-active-focus-state-layer-color, var(--md-sys-color-on-surface, #1d1b20));--_active-hover-icon-color:var(--md-navigation-bar-active-hover-icon-color, var(--md-sys-color-on-secondary-container, #1d192b));--_active-hover-label-text-color:var(--md-navigation-bar-active-hover-label-text-color, var(--md-sys-color-on-surface, #1d1b20));--_active-hover-state-layer-color:var(--md-navigation-bar-active-hover-state-layer-color, var(--md-sys-color-on-surface, #1d1b20));--_active-icon-color:var(--md-navigation-bar-active-icon-color, var(--md-sys-color-on-secondary-container, #1d192b));--_active-label-text-color:var(--md-navigation-bar-active-label-text-color, var(--md-sys-color-on-surface, #1d1b20));--_active-label-text-weight:var(--md-navigation-bar-active-label-text-weight, var(--md-sys-typescale-label-medium-weight-prominent, var(--md-ref-typeface-weight-bold, 700)));--_active-pressed-icon-color:var(--md-navigation-bar-active-pressed-icon-color, var(--md-sys-color-on-secondary-container, #1d192b));--_active-pressed-label-text-color:var(--md-navigation-bar-active-pressed-label-text-color, var(--md-sys-color-on-surface, #1d1b20));--_active-pressed-state-layer-color:var(--md-navigation-bar-active-pressed-state-layer-color, var(--md-sys-color-on-surface, #1d1b20));--_container-color:var(--md-navigation-bar-container-color, var(--md-sys-color-surface-container, #f3edf7));--_container-elevation:var(--md-navigation-bar-container-elevation, 2);--_container-height:var(--md-navigation-bar-container-height, 80px);--_container-shape:var(--md-navigation-bar-container-shape, var(--md-sys-shape-corner-none, 0px));--_focus-state-layer-opacity:var(--md-navigation-bar-focus-state-layer-opacity, 0.12);--_hover-state-layer-opacity:var(--md-navigation-bar-hover-state-layer-opacity, 0.08);--_icon-size:var(--md-navigation-bar-icon-size, 24px);--_inactive-focus-icon-color:var(--md-navigation-bar-inactive-focus-icon-color, var(--md-sys-color-on-surface, #1d1b20));--_inactive-focus-label-text-color:var(--md-navigation-bar-inactive-focus-label-text-color, var(--md-sys-color-on-surface, #1d1b20));--_inactive-focus-state-layer-color:var(--md-navigation-bar-inactive-focus-state-layer-color, var(--md-sys-color-on-surface, #1d1b20));--_inactive-hover-icon-color:var(--md-navigation-bar-inactive-hover-icon-color, var(--md-sys-color-on-surface, #1d1b20));--_inactive-hover-label-text-color:var(--md-navigation-bar-inactive-hover-label-text-color, var(--md-sys-color-on-surface, #1d1b20));--_inactive-hover-state-layer-color:var(--md-navigation-bar-inactive-hover-state-layer-color, var(--md-sys-color-on-surface, #1d1b20));--_inactive-icon-color:var(--md-navigation-bar-inactive-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_inactive-label-text-color:var(--md-navigation-bar-inactive-label-text-color, var(--md-sys-color-on-surface-variant, #49454f));--_inactive-pressed-icon-color:var(--md-navigation-bar-inactive-pressed-icon-color, var(--md-sys-color-on-surface, #1d1b20));--_inactive-pressed-label-text-color:var(--md-navigation-bar-inactive-pressed-label-text-color, var(--md-sys-color-on-surface, #1d1b20));--_inactive-pressed-state-layer-color:var(--md-navigation-bar-inactive-pressed-state-layer-color, var(--md-sys-color-on-surface, #1d1b20));--_label-text-font:var(--md-navigation-bar-label-text-font, var(--md-sys-typescale-label-medium-font, var(--md-ref-typeface-plain, Roboto)));--_label-text-line-height:var(--md-navigation-bar-label-text-line-height, var(--md-sys-typescale-label-medium-line-height, 1rem));--_label-text-size:var(--md-navigation-bar-label-text-size, var(--md-sys-typescale-label-medium-size, 0.75rem));--_label-text-tracking:var(--md-navigation-bar-label-text-tracking, );--_label-text-type:var(--md-navigation-bar-label-text-type, var(--md-sys-typescale-label-medium-weight, var(--md-ref-typeface-weight-medium, 500)) var(--md-sys-typescale-label-medium-size, 0.75rem) / var(--md-sys-typescale-label-medium-line-height, 1rem) var(--md-sys-typescale-label-medium-font, var(--md-ref-typeface-plain, Roboto)));--_label-text-weight:var(--md-navigation-bar-label-text-weight, var(--md-sys-typescale-label-medium-weight, var(--md-ref-typeface-weight-medium, 500)));--_pressed-state-layer-opacity:var(--md-navigation-bar-pressed-state-layer-opacity, 0.12);display:flex;flex-grow:1}md-focus-ring{--md-focus-ring-shape:var(--md-sys-shape-corner-small, 8px);--md-focus-ring-inward-offset:-1px}.md3-navigation-tab{align-items:center;appearance:none;background:0 0;border:none;box-sizing:border-box;cursor:pointer;display:flex;flex-direction:column;height:100%;justify-content:center;min-height:48px;min-width:48px;outline:0;padding:8px 0 12px;position:relative;text-align:center;width:100%;font-family:var(--_label-text-font);font-size:var(--_label-text-size);line-height:var(--_label-text-line-height);font-weight:var(--_label-text-weight);text-transform:inherit}.md3-navigation-tab::-moz-focus-inner{border:0;padding:0}.md3-navigation-tab__icon-content{align-items:center;box-sizing:border-box;display:flex;justify-content:center;position:relative;z-index:1}.md3-navigation-tab__label-text{height:16px;margin-top:4px;opacity:1;transition:opacity .1s cubic-bezier(.4,0,.2,1),height .1s cubic-bezier(.4,0,.2,1);z-index:1}.md3-navigation-tab--hide-inactive-label:not(.md3-navigation-tab--active) .md3-navigation-tab__label-text{height:0;opacity:0}.md3-navigation-tab__active-indicator{display:flex;justify-content:center;opacity:0;position:absolute;transition:width .1s cubic-bezier(.4,0,.2,1),opacity .1s cubic-bezier(.4,0,.2,1);width:32px;background-color:var(--_active-indicator-color);border-radius:var(--_active-indicator-shape)}.md3-navigation-tab--active .md3-navigation-tab__active-indicator{opacity:1}.md3-navigation-tab__active-indicator,.md3-navigation-tab__icon-content{height:var(--_active-indicator-height)}.md3-navigation-tab--active .md3-navigation-tab__active-indicator,.md3-navigation-tab__icon-content{width:var(--_active-indicator-width)}.md3-navigation-tab__icon{fill:currentColor;align-self:center;display:inline-block;position:relative;width:var(--_icon-size);height:var(--_icon-size);font-size:var(--_icon-size)}.md3-navigation-tab__icon.md3-navigation-tab__icon--active{display:none}.md3-navigation-tab--active .md3-navigation-tab__icon{display:none}.md3-navigation-tab--active .md3-navigation-tab__icon.md3-navigation-tab__icon--active{display:inline-block}.md3-navigation-tab__ripple{z-index:0}.md3-navigation-tab--active{--md-ripple-hover-color:var(--_active-hover-state-layer-color);--md-ripple-pressed-color:var(--_active-pressed-state-layer-color);--md-ripple-hover-opacity:var(--_hover-state-layer-opacity);--md-ripple-pressed-opacity:var(--_pressed-state-layer-opacity)}.md3-navigation-tab--active .md3-navigation-tab__icon{color:var(--_active-icon-color)}.md3-navigation-tab--active .md3-navigation-tab__label-text{color:var(--_active-label-text-color)}.md3-navigation-tab--active:hover .md3-navigation-tab__icon{color:var(--_active-hover-icon-color)}.md3-navigation-tab--active:hover .md3-navigation-tab__label-text{color:var(--_active-hover-label-text-color)}.md3-navigation-tab--active:focus .md3-navigation-tab__icon{color:var(--_active-focus-icon-color)}.md3-navigation-tab--active:focus .md3-navigation-tab__label-text{color:var(--_active-focus-label-text-color)}.md3-navigation-tab--active:active .md3-navigation-tab__icon{color:var(--_active-pressed-icon-color)}.md3-navigation-tab--active:active .md3-navigation-tab__label-text{color:var(--_active-pressed-label-text-color)}.md3-navigation-tab:not(.md3-navigation-tab--active){--md-ripple-hover-color:var(--_inactive-hover-state-layer-color);--md-ripple-pressed-color:var(--_inactive-pressed-state-layer-color);--md-ripple-hover-opacity:var(--_hover-state-layer-opacity);--md-ripple-pressed-opacity:var(--_pressed-state-layer-opacity)}.md3-navigation-tab:not(.md3-navigation-tab--active) .md3-navigation-tab__icon{color:var(--_inactive-icon-color)}.md3-navigation-tab:not(.md3-navigation-tab--active) .md3-navigation-tab__label-text{color:var(--_inactive-label-text-color)}.md3-navigation-tab:not(.md3-navigation-tab--active):hover .md3-navigation-tab__icon{color:var(--_inactive-hover-icon-color)}.md3-navigation-tab:not(.md3-navigation-tab--active):hover .md3-navigation-tab__label-text{color:var(--_inactive-hover-label-text-color)}.md3-navigation-tab:not(.md3-navigation-tab--active):focus .md3-navigation-tab__icon{color:var(--_inactive-focus-icon-color)}.md3-navigation-tab:not(.md3-navigation-tab--active):focus .md3-navigation-tab__label-text{color:var(--_inactive-focus-label-text-color)}.md3-navigation-tab:not(.md3-navigation-tab--active):active .md3-navigation-tab__icon{color:var(--_inactive-pressed-icon-color)}.md3-navigation-tab:not(.md3-navigation-tab--active):active .md3-navigation-tab__label-text{color:var(--_inactive-pressed-label-text-color)}`
/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */;let ae=class extends ne{};ae.styles=[se],ae=bt([at("md-navigation-tab")],ae);
/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
class le extends nt{constructor(){super(...arguments),this.opened=!1,this.pivot="end"}render(){const t=this.opened?"true":"false",e=this.opened?"false":"true",{ariaLabel:i,ariaModal:r}=this;return U` <div aria-expanded="${t}" aria-hidden="${e}" aria-label="${i||j}" aria-modal="${r||j}" class="md3-navigation-drawer ${this.getRenderClasses()}" role="dialog"> <md-elevation part="elevation"></md-elevation> <div class="md3-navigation-drawer__slot-content"> <slot></slot> </div> </div> `}getRenderClasses(){return qt({"md3-navigation-drawer--opened":this.opened,"md3-navigation-drawer--pivot-at-start":"start"===this.pivot})}updated(t){t.has("opened")&&setTimeout((()=>{this.dispatchEvent(new CustomEvent("navigation-drawer-changed",{detail:{opened:this.opened},bubbles:!0,composed:!0}))}),250)}}Tt(le),bt([dt({type:Boolean})],le.prototype,"opened",void 0),bt([dt()],le.prototype,"pivot",void 0);
/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
const ce=n`:host{--_container-color:var(--md-navigation-drawer-container-color, #fff);--_container-height:var(--md-navigation-drawer-container-height, 100%);--_container-shape:var(--md-navigation-drawer-container-shape, 0 16px 16px 0);--_container-width:var(--md-navigation-drawer-container-width, 360px);--_divider-color:var(--md-navigation-drawer-divider-color, #000);--_modal-container-elevation:var(--md-navigation-drawer-modal-container-elevation, 1);--_standard-container-elevation:var(--md-navigation-drawer-standard-container-elevation, 0);--md-elevation-level:var(--_standard-container-elevation);--md-elevation-shadow-color:var(--_divider-color)}:host{display:flex}.md3-navigation-drawer{inline-size:0;box-sizing:border-box;display:flex;justify-content:flex-end;overflow:hidden;overflow-y:auto;visibility:hidden;transition:inline-size .25s cubic-bezier(.4,0,.2,1) 0s,visibility 0s cubic-bezier(.4,0,.2,1) .25s}md-elevation{z-index:0}.md3-navigation-drawer--opened{visibility:visible;transition:inline-size .25s cubic-bezier(.4,0,.2,1) 0s,visibility 0s cubic-bezier(.4,0,.2,1) 0s}.md3-navigation-drawer--pivot-at-start{justify-content:flex-start}.md3-navigation-drawer__slot-content{display:flex;flex-direction:column;position:relative}`
/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */,de=n`.md3-navigation-drawer,.md3-navigation-drawer-modal{background-color:var(--_container-color);border-radius:var(--_container-shape);height:var(--_container-height)}.md3-navigation-drawer-modal.md3-navigation-drawer-modal--opened,.md3-navigation-drawer.md3-navigation-drawer--opened{inline-size:var(--_container-width)}.md3-navigation-drawer .md3-navigation-drawer__slot-content,.md3-navigation-drawer-modal .md3-navigation-drawer-modal__slot-content{min-inline-size:var(--_container-width);max-inline-size:var(--_container-width)}`
/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */;let he=class extends le{};he.styles=[de,ce],he=bt([at("md-navigation-drawer")],he);
/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
class ue extends nt{constructor(){super(...arguments),this.multiline=!1}render(){return U` <slot name="container"></slot> <slot class="non-text" name="start"></slot> <div class="text"> <slot name="overline" @slotchange="${this.handleTextSlotChange}"></slot> <slot class="default-slot" @slotchange="${this.handleTextSlotChange}"></slot> <slot name="headline" @slotchange="${this.handleTextSlotChange}"></slot> <slot name="supporting-text" @slotchange="${this.handleTextSlotChange}"></slot> </div> <slot class="non-text" name="trailing-supporting-text"></slot> <slot class="non-text" name="end"></slot> `}handleTextSlotChange(){let t=!1,e=0;for(const i of this.textSlots)if(pe(i)&&(e+=1),e>1){t=!0;break}this.multiline=t}}function pe(t){for(const e of t.assignedNodes({flatten:!0})){const t=e.nodeType===Node.ELEMENT_NODE,i=e.nodeType===Node.TEXT_NODE&&e.textContent?.match(/\S/);if(t||i)return!0}return!1}
/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */bt([dt({type:Boolean,reflect:!0})],ue.prototype,"multiline",void 0),bt([function(t){return(e,i)=>ut(e,i,{get(){return(this.renderRoot??(ft??=document.createDocumentFragment())).querySelectorAll(t)}})}(".text slot")],ue.prototype,"textSlots",void 0);const fe=n`:host{color:var(--md-sys-color-on-surface,#1d1b20);font-family:var(--md-sys-typescale-body-large-font,var(--md-ref-typeface-plain,Roboto));font-size:var(--md-sys-typescale-body-large-size,1rem);font-weight:var(--md-sys-typescale-body-large-weight,var(--md-ref-typeface-weight-regular,400));line-height:var(--md-sys-typescale-body-large-line-height,1.5rem);align-items:center;box-sizing:border-box;display:flex;gap:16px;min-height:56px;overflow:hidden;padding:12px 16px;position:relative;text-overflow:ellipsis}:host([multiline]){min-height:72px}[name=overline]{color:var(--md-sys-color-on-surface-variant,#49454f);font-family:var(--md-sys-typescale-label-small-font,var(--md-ref-typeface-plain,Roboto));font-size:var(--md-sys-typescale-label-small-size,.6875rem);font-weight:var(--md-sys-typescale-label-small-weight,var(--md-ref-typeface-weight-medium,500));line-height:var(--md-sys-typescale-label-small-line-height,1rem)}[name=supporting-text]{color:var(--md-sys-color-on-surface-variant,#49454f);font-family:var(--md-sys-typescale-body-medium-font,var(--md-ref-typeface-plain,Roboto));font-size:var(--md-sys-typescale-body-medium-size,.875rem);font-weight:var(--md-sys-typescale-body-medium-weight,var(--md-ref-typeface-weight-regular,400));line-height:var(--md-sys-typescale-body-medium-line-height,1.25rem)}[name=trailing-supporting-text]{color:var(--md-sys-color-on-surface-variant,#49454f);font-family:var(--md-sys-typescale-label-small-font,var(--md-ref-typeface-plain,Roboto));font-size:var(--md-sys-typescale-label-small-size,.6875rem);font-weight:var(--md-sys-typescale-label-small-weight,var(--md-ref-typeface-weight-medium,500));line-height:var(--md-sys-typescale-label-small-line-height,1rem)}[name=container]::slotted(*){inset:0;position:absolute}.default-slot{display:inline}.default-slot,.text ::slotted(*){overflow:hidden;text-overflow:ellipsis}.text{display:flex;flex:1;flex-direction:column;overflow:hidden}`
/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */;let me=class extends ue{};me.styles=[fe],me=bt([at("md-item")],me);
/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const ge=Symbol.for(""),ve=t=>{if(t?.r===ge)return t?._$litStatic$},be=(t,...e)=>({_$litStatic$:e.reduce(((e,i,r)=>e+(t=>{if(void 0!==t._$litStatic$)return t._$litStatic$;throw Error(`Value passed to 'literal' function must be a 'literal' result: ${t}. Use 'unsafeStatic' to pass non-literal values, but\n            take care to ensure page security.`)})(i)+t[r+1]),t[0]),r:ge}),ye=new Map,xe=(t=>(e,...i)=>{const r=i.length;let o,n;const s=[],a=[];let l,c=0,d=!1;for(;c<r;){for(l=e[c];c<r&&void 0!==(n=i[c],o=ve(n));)l+=o+e[++c],d=!0;c!==r&&a.push(n),s.push(l),c++}if(c===r&&s.push(e[r]),d){const t=s.join("$$lit$$");void 0===(e=ye.get(t))&&(s.raw=s,ye.set(t,e=s)),i=a}return t(e,...i)})(U);
/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function we(t,e=Pe){const i=Ce(t,e);return i&&(i.tabIndex=0,i.focus()),i}function _e(t,e=Pe){const i=Ae(t,e);return i&&(i.tabIndex=0,i.focus()),i}function ke(t,e=Pe){for(let i=0;i<t.length;i++){const r=t[i];if(0===r.tabIndex&&e(r))return{item:r,index:i}}return null}function Ce(t,e=Pe){for(const i of t)if(e(i))return i;return null}function Ae(t,e=Pe){for(let i=t.length-1;i>=0;i--){const r=t[i];if(e(r))return r}return null}function Se(t,e,i=Pe,r=!0){if(e){const o=function(t,e,i=Pe,r=!0){for(let o=1;o<t.length;o++){const n=(o+e)%t.length;if(n<e&&!r)return null;const s=t[n];if(i(s))return s}return t[e]?t[e]:null}(t,e.index,i,r);return o&&(o.tabIndex=0,o.focus()),o}return we(t,i)}function Te(t,e,i=Pe,r=!0){if(e){const o=function(t,e,i=Pe,r=!0){for(let o=1;o<t.length;o++){const n=(e-o+t.length)%t.length;if(n>e&&!r)return null;const s=t[n];if(i(s))return s}return t[e]?t[e]:null}(t,e.index,i,r);return o&&(o.tabIndex=0,o.focus()),o}return _e(t,i)}function Pe(t){return!t.disabled}
/**
 * @license
 * Copyright 2022 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ee extends nt{constructor(){super(...arguments),this.disabled=!1,this.type="text",this.isListItem=!0,this.href="",this.target=""}get isDisabled(){return this.disabled&&"link"!==this.type}willUpdate(t){this.href&&(this.type="link"),super.willUpdate(t)}render(){return this.renderListItem(U` <md-item> <div slot="container"> ${this.renderRipple()} ${this.renderFocusRing()} </div> <slot name="start" slot="start"></slot> <slot name="end" slot="end"></slot> ${this.renderBody()} </md-item> `)}renderListItem(t){const e="link"===this.type;let i;switch(this.type){case"link":i=be`a`;break;case"button":i=be`button`;break;default:i=be`li`}const r="text"!==this.type,o=e&&this.target?this.target:j;return xe`
      <${i}
        id="item"
        tabindex="${this.isDisabled||!r?-1:0}"
        ?disabled=${this.isDisabled}
        role="listitem"
        aria-selected=${this.ariaSelected||j}
        aria-checked=${this.ariaChecked||j}
        aria-expanded=${this.ariaExpanded||j}
        aria-haspopup=${this.ariaHasPopup||j}
        class="list-item ${qt(this.getRenderClasses())}"
        href=${this.href||j}
        target=${o}
        @focus=${this.onFocus}
      >${t}</${i}>
    `}renderRipple(){return"text"===this.type?j:U` <md-ripple part="ripple" for="item" ?disabled="${this.isDisabled}"></md-ripple>`}renderFocusRing(){return"text"===this.type?j:U` <md-focus-ring @visibility-changed="${this.onFocusRingVisibilityChanged}" part="focus-ring" for="item" inward></md-focus-ring>`}onFocusRingVisibilityChanged(t){}getRenderClasses(){return{disabled:this.isDisabled}}renderBody(){return U` <slot></slot> <slot name="overline" slot="overline"></slot> <slot name="headline" slot="headline"></slot> <slot name="supporting-text" slot="supporting-text"></slot> <slot name="trailing-supporting-text" slot="trailing-supporting-text"></slot> `}onFocus(){-1===this.tabIndex&&this.dispatchEvent(new Event("request-activation",{bubbles:!0,composed:!0}))}focus(){this.listItemRoot?.focus()}}Tt(Ee),Ee.shadowRootOptions={...nt.shadowRootOptions,delegatesFocus:!0},bt([dt({type:Boolean,reflect:!0})],Ee.prototype,"disabled",void 0),bt([dt({reflect:!0})],Ee.prototype,"type",void 0),bt([dt({type:Boolean,attribute:"md-list-item",reflect:!0})],Ee.prototype,"isListItem",void 0),bt([dt()],Ee.prototype,"href",void 0),bt([dt()],Ee.prototype,"target",void 0),bt([pt(".list-item")],Ee.prototype,"listItemRoot",void 0);
/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
const Ie=n`:host{display:flex;-webkit-tap-highlight-color:transparent;--md-ripple-hover-color:var(--md-list-item-hover-state-layer-color, var(--md-sys-color-on-surface, #1d1b20));--md-ripple-hover-opacity:var(--md-list-item-hover-state-layer-opacity, 0.08);--md-ripple-pressed-color:var(--md-list-item-pressed-state-layer-color, var(--md-sys-color-on-surface, #1d1b20));--md-ripple-pressed-opacity:var(--md-list-item-pressed-state-layer-opacity, 0.12)}:host(:is([type=button]:not([disabled]),[type=link])){cursor:pointer}md-focus-ring{z-index:1;--md-focus-ring-shape:8px}a,button,li{background:0 0;border:none;cursor:inherit;padding:0;margin:0;text-align:unset;text-decoration:none}.list-item{border-radius:inherit;display:flex;flex:1;max-width:inherit;min-width:inherit;outline:0;-webkit-tap-highlight-color:transparent;width:100%}.list-item.interactive{cursor:pointer}.list-item.disabled{opacity:var(--md-list-item-disabled-opacity,.3);pointer-events:none}[slot=container]{pointer-events:none}md-ripple{border-radius:inherit}md-item{border-radius:inherit;flex:1;height:100%;color:var(--md-list-item-label-text-color,var(--md-sys-color-on-surface,#1d1b20));font-family:var(--md-list-item-label-text-font,var(--md-sys-typescale-body-large-font,var(--md-ref-typeface-plain,Roboto)));font-size:var(--md-list-item-label-text-size,var(--md-sys-typescale-body-large-size,1rem));line-height:var(--md-list-item-label-text-line-height,var(--md-sys-typescale-body-large-line-height,1.5rem));font-weight:var(--md-list-item-label-text-weight,var(--md-sys-typescale-body-large-weight,var(--md-ref-typeface-weight-regular,400)));min-height:var(--md-list-item-one-line-container-height,56px);padding-top:var(--md-list-item-top-space,12px);padding-bottom:var(--md-list-item-bottom-space,12px);padding-inline-start:var(--md-list-item-leading-space,16px);padding-inline-end:var(--md-list-item-trailing-space,16px)}md-item[multiline]{min-height:var(--md-list-item-two-line-container-height,72px)}[slot=supporting-text]{color:var(--md-list-item-supporting-text-color,var(--md-sys-color-on-surface-variant,#49454f));font-family:var(--md-list-item-supporting-text-font,var(--md-sys-typescale-body-medium-font,var(--md-ref-typeface-plain,Roboto)));font-size:var(--md-list-item-supporting-text-size,var(--md-sys-typescale-body-medium-size,.875rem));line-height:var(--md-list-item-supporting-text-line-height,var(--md-sys-typescale-body-medium-line-height,1.25rem));font-weight:var(--md-list-item-supporting-text-weight,var(--md-sys-typescale-body-medium-weight,var(--md-ref-typeface-weight-regular,400)))}[slot=trailing-supporting-text]{color:var(--md-list-item-trailing-supporting-text-color,var(--md-sys-color-on-surface-variant,#49454f));font-family:var(--md-list-item-trailing-supporting-text-font,var(--md-sys-typescale-label-small-font,var(--md-ref-typeface-plain,Roboto)));font-size:var(--md-list-item-trailing-supporting-text-size,var(--md-sys-typescale-label-small-size,.6875rem));line-height:var(--md-list-item-trailing-supporting-text-line-height,var(--md-sys-typescale-label-small-line-height,1rem));font-weight:var(--md-list-item-trailing-supporting-text-weight,var(--md-sys-typescale-label-small-weight,var(--md-ref-typeface-weight-medium,500)))}:is([slot=start],[slot=end])::slotted(*){fill:currentColor}[slot=start]{color:var(--md-list-item-leading-icon-color,var(--md-sys-color-on-surface-variant,#49454f))}[slot=end]{color:var(--md-list-item-trailing-icon-color,var(--md-sys-color-on-surface-variant,#49454f))}@media(forced-colors:active){.disabled slot{color:GrayText}.list-item.disabled{color:GrayText;opacity:1}}`
/**
 * @license
 * Copyright 2022 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */;let Le=class extends Ee{};Le.styles=[Ie],Le=bt([at("md-list-item")],Le);
/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
const Oe={ArrowDown:"ArrowDown",ArrowLeft:"ArrowLeft",ArrowUp:"ArrowUp",ArrowRight:"ArrowRight",Home:"Home",End:"End"};class Re{constructor(t){this.handleKeydown=t=>{const e=t.key;if(t.defaultPrevented||!this.isNavigableKey(e))return;const i=this.items;if(!i.length)return;const r=ke(i,this.isActivatable);t.preventDefault();const o=this.isRtl();let n=null;switch(e){case Oe.ArrowDown:case o?Oe.ArrowLeft:Oe.ArrowRight:n=Se(i,r,this.isActivatable,this.wrapNavigation());break;case Oe.ArrowUp:case o?Oe.ArrowRight:Oe.ArrowLeft:n=Te(i,r,this.isActivatable,this.wrapNavigation());break;case Oe.Home:n=we(i,this.isActivatable);break;case Oe.End:n=_e(i,this.isActivatable)}n&&r&&r.item!==n&&(r.item.tabIndex=-1)},this.onDeactivateItems=()=>{const t=this.items;for(const e of t)this.deactivateItem(e)},this.onRequestActivation=t=>{this.onDeactivateItems();const e=t.target;this.activateItem(e),e.focus()},this.onSlotchange=()=>{const t=this.items;let e=!1;for(const i of t){!(!i.disabled&&i.tabIndex>-1)||e?i.tabIndex=-1:(e=!0,i.tabIndex=0)}if(e)return;const i=Ce(t,this.isActivatable);i&&(i.tabIndex=0)};const{isItem:e,getPossibleItems:i,isRtl:r,deactivateItem:o,activateItem:n,isNavigableKey:s,isActivatable:a,wrapNavigation:l}=t;this.isItem=e,this.getPossibleItems=i,this.isRtl=r,this.deactivateItem=o,this.activateItem=n,this.isNavigableKey=s,this.isActivatable=a,this.wrapNavigation=l??(()=>!0)}get items(){const t=this.getPossibleItems(),e=[];for(const i of t){if(this.isItem(i)){e.push(i);continue}const t=i.item;t&&this.isItem(t)&&e.push(t)}return e}activateNextItem(){const t=this.items,e=ke(t,this.isActivatable);return e&&(e.item.tabIndex=-1),Se(t,e,this.isActivatable,this.wrapNavigation())}activatePreviousItem(){const t=this.items,e=ke(t,this.isActivatable);return e&&(e.item.tabIndex=-1),Te(t,e,this.isActivatable,this.wrapNavigation())}}
/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const $e=new Set(Object.values(Oe));class Me extends nt{get items(){return this.listController.items}constructor(){super(),this.listController=new Re({isItem:t=>t.hasAttribute("md-list-item"),getPossibleItems:()=>this.slotItems,isRtl:()=>"rtl"===getComputedStyle(this).direction,deactivateItem:t=>{t.tabIndex=-1},activateItem:t=>{t.tabIndex=0},isNavigableKey:t=>$e.has(t),isActivatable:t=>!t.disabled&&"text"!==t.type}),this.internals=this.attachInternals(),this.internals.role="list",this.addEventListener("keydown",this.listController.handleKeydown)}render(){return U` <slot @deactivate-items="${this.listController.onDeactivateItems}" @request-activation="${this.listController.onRequestActivation}" @slotchange="${this.listController.onSlotchange}"> </slot> `}activateNextItem(){return this.listController.activateNextItem()}activatePreviousItem(){return this.listController.activatePreviousItem()}}bt([mt({flatten:!0})],Me.prototype,"slotItems",void 0);
/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
const Ne=n`:host{background:var(--md-list-container-color,var(--md-sys-color-surface,#fef7ff));color:unset;display:flex;flex-direction:column;outline:0;padding:8px 0;position:relative}`
/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */;let De=class extends Me{};De.styles=[Ne],De=bt([at("md-list")],De);
/**
 * @license
 * Copyright 2022 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
class ze extends nt{render(){return U`<slot></slot>`}connectedCallback(){super.connectedCallback();"false"!==this.getAttribute("aria-hidden")?this.setAttribute("aria-hidden","true"):this.removeAttribute("aria-hidden")}}
/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Fe=n`:host{font-size:var(--md-icon-size,24px);width:var(--md-icon-size,24px);height:var(--md-icon-size,24px);color:inherit;font-variation-settings:inherit;font-weight:400;font-family:var(--md-icon-font,Material Symbols Outlined);display:inline-flex;font-style:normal;place-items:center;place-content:center;line-height:1;overflow:hidden;letter-spacing:normal;text-transform:none;user-select:none;white-space:nowrap;word-wrap:normal;flex-shrink:0;-webkit-font-smoothing:antialiased;text-rendering:optimizeLegibility;-moz-osx-font-smoothing:grayscale}::slotted(svg){fill:currentColor}::slotted(*){height:100%;width:100%}`
/**
 * @license
 * Copyright 2022 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */;let Be=class extends ze{};Be.styles=[Fe],Be=bt([at("md-icon")],Be);
/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
const Ue=Symbol("internals"),Ve=Symbol("privateInternals");function je(t){return class extends t{get[Ue](){return this[Ve]||(this[Ve]=this.attachInternals()),this[Ve]}}}
/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ge(t){t.addInitializer((t=>{const e=t;e.addEventListener("click",(async t=>{const{type:i,[Ue]:r}=e,{form:o}=r;o&&"button"!==i&&(await new Promise((t=>{setTimeout(t)})),t.defaultPrevented||("reset"!==i?(o.addEventListener("submit",(t=>{Object.defineProperty(t,"submitter",{configurable:!0,enumerable:!0,get:()=>e})}),{capture:!0,once:!0}),r.setFormValue(e.value),o.requestSubmit()):o.reset()))}))}))}
/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const He=je(nt);class qe extends He{constructor(){super(...arguments),this.disabled=!1,this.flipIconInRtl=!1,this.href="",this.target="",this.ariaLabelSelected="",this.toggle=!1,this.selected=!1,this.type="submit",this.value="",this.flipIcon=Pt(this,this.flipIconInRtl)}get name(){return this.getAttribute("name")??""}set name(t){this.setAttribute("name",t)}get form(){return this[Ue].form}get labels(){return this[Ue].labels}willUpdate(){this.href&&(this.disabled=!1)}render(){const t=this.href?be`div`:be`button`,{ariaLabel:e,ariaHasPopup:i,ariaExpanded:r}=this,o=e&&this.ariaLabelSelected,n=this.toggle?this.selected:j;let s=j;return this.href||(s=o&&this.selected?this.ariaLabelSelected:e),xe`<${t}
        class="icon-button ${qt(this.getRenderClasses())}"
        id="button"
        aria-label="${s||j}"
        aria-haspopup="${!this.href&&i||j}"
        aria-expanded="${!this.href&&r||j}"
        aria-pressed="${n}"
        ?disabled="${!this.href&&this.disabled}"
        @click="${this.handleClick}">
        ${this.renderFocusRing()}
        ${this.renderRipple()}
        ${this.selected?j:this.renderIcon()}
        ${this.selected?this.renderSelectedIcon():j}
        ${this.renderTouchTarget()}
        ${this.href&&this.renderLink()}
  </${t}>`}renderLink(){const{ariaLabel:t}=this;return U` <a class="link" id="link" href="${this.href}" target="${this.target||j}" aria-label="${t||j}"></a> `}getRenderClasses(){return{"flip-icon":this.flipIcon,selected:this.toggle&&this.selected}}renderIcon(){return U`<span class="icon"><slot></slot></span>`}renderSelectedIcon(){return U`<span class="icon icon--selected"><slot name="selected"><slot></slot></slot></span>`}renderTouchTarget(){return U`<span class="touch"></span>`}renderFocusRing(){return U`<md-focus-ring part="focus-ring" for="${this.href?"link":"button"}"></md-focus-ring>`}renderRipple(){return U`<md-ripple for="${this.href?"link":j}" ?disabled="${!this.href&&this.disabled}"></md-ripple>`}connectedCallback(){this.flipIcon=Pt(this,this.flipIconInRtl),super.connectedCallback()}async handleClick(t){await 0,!this.toggle||this.disabled||t.defaultPrevented||(this.selected=!this.selected,this.dispatchEvent(new InputEvent("input",{bubbles:!0,composed:!0})),this.dispatchEvent(new Event("change",{bubbles:!0})))}}Tt(qe),Ge(qe),qe.formAssociated=!0,qe.shadowRootOptions={mode:"open",delegatesFocus:!0},bt([dt({type:Boolean,reflect:!0})],qe.prototype,"disabled",void 0),bt([dt({type:Boolean,attribute:"flip-icon-in-rtl"})],qe.prototype,"flipIconInRtl",void 0),bt([dt()],qe.prototype,"href",void 0),bt([dt()],qe.prototype,"target",void 0),bt([dt({attribute:"aria-label-selected"})],qe.prototype,"ariaLabelSelected",void 0),bt([dt({type:Boolean})],qe.prototype,"toggle",void 0),bt([dt({type:Boolean,reflect:!0})],qe.prototype,"selected",void 0),bt([dt()],qe.prototype,"type",void 0),bt([dt({reflect:!0})],qe.prototype,"value",void 0),bt([ht()],qe.prototype,"flipIcon",void 0);
/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
const We=n`:host{display:inline-flex;outline:0;-webkit-tap-highlight-color:transparent;height:var(--_container-height);width:var(--_container-width);justify-content:center}:host([touch-target=wrapper]){margin:max(0,(48px - var(--_container-height))/2) max(0,(48px - var(--_container-width))/2)}md-focus-ring{--md-focus-ring-shape-start-start:var(--_container-shape-start-start);--md-focus-ring-shape-start-end:var(--_container-shape-start-end);--md-focus-ring-shape-end-end:var(--_container-shape-end-end);--md-focus-ring-shape-end-start:var(--_container-shape-end-start)}:host([disabled]){pointer-events:none}.icon-button{place-items:center;background:0 0;border:none;box-sizing:border-box;cursor:pointer;display:flex;place-content:center;outline:0;padding:0;position:relative;text-decoration:none;user-select:none;z-index:0;flex:1;border-start-start-radius:var(--_container-shape-start-start);border-start-end-radius:var(--_container-shape-start-end);border-end-start-radius:var(--_container-shape-end-start);border-end-end-radius:var(--_container-shape-end-end)}.icon ::slotted(*){font-size:var(--_icon-size);height:var(--_icon-size);width:var(--_icon-size);font-weight:inherit}md-ripple{z-index:-1;border-start-start-radius:var(--_container-shape-start-start);border-start-end-radius:var(--_container-shape-start-end);border-end-start-radius:var(--_container-shape-end-start);border-end-end-radius:var(--_container-shape-end-end)}.flip-icon .icon{transform:scaleX(-1)}.icon{display:inline-flex}.link{height:100%;outline:0;position:absolute;width:100%}.touch{position:absolute;height:max(48px,100%);width:max(48px,100%)}:host([touch-target=none]) .touch{display:none}@media(forced-colors:active){:host([disabled]){--_disabled-icon-opacity:1}}`
/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */,Ye=n`:host{--_disabled-icon-color:var(--md-icon-button-disabled-icon-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-icon-opacity:var(--md-icon-button-disabled-icon-opacity, 0.38);--_icon-size:var(--md-icon-button-icon-size, 24px);--_selected-focus-icon-color:var(--md-icon-button-selected-focus-icon-color, var(--md-sys-color-primary, #6750a4));--_selected-hover-icon-color:var(--md-icon-button-selected-hover-icon-color, var(--md-sys-color-primary, #6750a4));--_selected-hover-state-layer-color:var(--md-icon-button-selected-hover-state-layer-color, var(--md-sys-color-primary, #6750a4));--_selected-hover-state-layer-opacity:var(--md-icon-button-selected-hover-state-layer-opacity, 0.08);--_selected-icon-color:var(--md-icon-button-selected-icon-color, var(--md-sys-color-primary, #6750a4));--_selected-pressed-icon-color:var(--md-icon-button-selected-pressed-icon-color, var(--md-sys-color-primary, #6750a4));--_selected-pressed-state-layer-color:var(--md-icon-button-selected-pressed-state-layer-color, var(--md-sys-color-primary, #6750a4));--_selected-pressed-state-layer-opacity:var(--md-icon-button-selected-pressed-state-layer-opacity, 0.12);--_state-layer-height:var(--md-icon-button-state-layer-height, 40px);--_state-layer-shape:var(--md-icon-button-state-layer-shape, var(--md-sys-shape-corner-full, 9999px));--_state-layer-width:var(--md-icon-button-state-layer-width, 40px);--_focus-icon-color:var(--md-icon-button-focus-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_hover-icon-color:var(--md-icon-button-hover-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_hover-state-layer-color:var(--md-icon-button-hover-state-layer-color, var(--md-sys-color-on-surface-variant, #49454f));--_hover-state-layer-opacity:var(--md-icon-button-hover-state-layer-opacity, 0.08);--_icon-color:var(--md-icon-button-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_pressed-icon-color:var(--md-icon-button-pressed-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_pressed-state-layer-color:var(--md-icon-button-pressed-state-layer-color, var(--md-sys-color-on-surface-variant, #49454f));--_pressed-state-layer-opacity:var(--md-icon-button-pressed-state-layer-opacity, 0.12);--_container-shape-start-start:0;--_container-shape-start-end:0;--_container-shape-end-end:0;--_container-shape-end-start:0;--_container-height:0;--_container-width:0;height:var(--_state-layer-height);width:var(--_state-layer-width)}:host([touch-target=wrapper]){margin:max(0,(48px - var(--_state-layer-height))/2) max(0,(48px - var(--_state-layer-width))/2)}md-focus-ring{--md-focus-ring-shape-start-start:var(--_state-layer-shape);--md-focus-ring-shape-start-end:var(--_state-layer-shape);--md-focus-ring-shape-end-end:var(--_state-layer-shape);--md-focus-ring-shape-end-start:var(--_state-layer-shape)}.standard{background-color:rgba(0,0,0,0);color:var(--_icon-color);--md-ripple-hover-color:var(--_hover-state-layer-color);--md-ripple-hover-opacity:var(--_hover-state-layer-opacity);--md-ripple-pressed-color:var(--_pressed-state-layer-color);--md-ripple-pressed-opacity:var(--_pressed-state-layer-opacity)}.standard:hover{color:var(--_hover-icon-color)}.standard:focus{color:var(--_focus-icon-color)}.standard:active{color:var(--_pressed-icon-color)}.standard:disabled{color:var(--_disabled-icon-color)}md-ripple{border-radius:var(--_state-layer-shape)}.standard:disabled .icon{opacity:var(--_disabled-icon-opacity)}.selected{--md-ripple-hover-color:var(--_selected-hover-state-layer-color);--md-ripple-hover-opacity:var(--_selected-hover-state-layer-opacity);--md-ripple-pressed-color:var(--_selected-pressed-state-layer-color);--md-ripple-pressed-opacity:var(--_selected-pressed-state-layer-opacity)}.selected:not(:disabled){color:var(--_selected-icon-color)}.selected:not(:disabled):hover{color:var(--_selected-hover-icon-color)}.selected:not(:disabled):focus{color:var(--_selected-focus-icon-color)}.selected:not(:disabled):active{color:var(--_selected-pressed-icon-color)}`
/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */;let Xe=class extends qe{getRenderClasses(){return{...super.getRenderClasses(),standard:!0}}};Xe.styles=[We,Ye],Xe=bt([at("md-icon-button")],Xe);
/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
const Je=n`:host{--_container-height:var(--md-outlined-icon-button-container-height, 40px);--_container-width:var(--md-outlined-icon-button-container-width, 40px);--_disabled-icon-color:var(--md-outlined-icon-button-disabled-icon-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-icon-opacity:var(--md-outlined-icon-button-disabled-icon-opacity, 0.38);--_disabled-selected-container-color:var(--md-outlined-icon-button-disabled-selected-container-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-selected-container-opacity:var(--md-outlined-icon-button-disabled-selected-container-opacity, 0.12);--_hover-state-layer-opacity:var(--md-outlined-icon-button-hover-state-layer-opacity, 0.08);--_icon-size:var(--md-outlined-icon-button-icon-size, 24px);--_pressed-state-layer-opacity:var(--md-outlined-icon-button-pressed-state-layer-opacity, 0.12);--_selected-container-color:var(--md-outlined-icon-button-selected-container-color, var(--md-sys-color-inverse-surface, #322f35));--_selected-focus-icon-color:var(--md-outlined-icon-button-selected-focus-icon-color, var(--md-sys-color-inverse-on-surface, #f5eff7));--_selected-hover-icon-color:var(--md-outlined-icon-button-selected-hover-icon-color, var(--md-sys-color-inverse-on-surface, #f5eff7));--_selected-hover-state-layer-color:var(--md-outlined-icon-button-selected-hover-state-layer-color, var(--md-sys-color-inverse-on-surface, #f5eff7));--_selected-icon-color:var(--md-outlined-icon-button-selected-icon-color, var(--md-sys-color-inverse-on-surface, #f5eff7));--_selected-pressed-icon-color:var(--md-outlined-icon-button-selected-pressed-icon-color, var(--md-sys-color-inverse-on-surface, #f5eff7));--_selected-pressed-state-layer-color:var(--md-outlined-icon-button-selected-pressed-state-layer-color, var(--md-sys-color-inverse-on-surface, #f5eff7));--_disabled-outline-color:var(--md-outlined-icon-button-disabled-outline-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-outline-opacity:var(--md-outlined-icon-button-disabled-outline-opacity, 0.12);--_focus-icon-color:var(--md-outlined-icon-button-focus-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_hover-icon-color:var(--md-outlined-icon-button-hover-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_hover-state-layer-color:var(--md-outlined-icon-button-hover-state-layer-color, var(--md-sys-color-on-surface-variant, #49454f));--_icon-color:var(--md-outlined-icon-button-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_outline-color:var(--md-outlined-icon-button-outline-color, var(--md-sys-color-outline, #79747e));--_outline-width:var(--md-outlined-icon-button-outline-width, 1px);--_pressed-icon-color:var(--md-outlined-icon-button-pressed-icon-color, var(--md-sys-color-on-surface, #1d1b20));--_pressed-state-layer-color:var(--md-outlined-icon-button-pressed-state-layer-color, var(--md-sys-color-on-surface, #1d1b20));--_container-shape-start-start:var(--md-outlined-icon-button-container-shape-start-start, var(--md-outlined-icon-button-container-shape, var(--md-sys-shape-corner-full, 9999px)));--_container-shape-start-end:var(--md-outlined-icon-button-container-shape-start-end, var(--md-outlined-icon-button-container-shape, var(--md-sys-shape-corner-full, 9999px)));--_container-shape-end-end:var(--md-outlined-icon-button-container-shape-end-end, var(--md-outlined-icon-button-container-shape, var(--md-sys-shape-corner-full, 9999px)));--_container-shape-end-start:var(--md-outlined-icon-button-container-shape-end-start, var(--md-outlined-icon-button-container-shape, var(--md-sys-shape-corner-full, 9999px)))}.outlined{background-color:rgba(0,0,0,0);color:var(--_icon-color);--md-ripple-hover-color:var(--_hover-state-layer-color);--md-ripple-hover-opacity:var(--_hover-state-layer-opacity);--md-ripple-pressed-color:var(--_pressed-state-layer-color);--md-ripple-pressed-opacity:var(--_pressed-state-layer-opacity)}.outlined::before{border-color:var(--_outline-color);border-width:var(--_outline-width)}.outlined:hover{color:var(--_hover-icon-color)}.outlined:focus{color:var(--_focus-icon-color)}.outlined:active{color:var(--_pressed-icon-color)}.outlined:disabled{color:var(--_disabled-icon-color)}.outlined:disabled::before{border-color:var(--_disabled-outline-color);opacity:var(--_disabled-outline-opacity)}.outlined:disabled .icon{opacity:var(--_disabled-icon-opacity)}.outlined::before{block-size:100%;border-style:solid;border-radius:inherit;box-sizing:border-box;content:"";inline-size:100%;inset:0;pointer-events:none;position:absolute;z-index:-1}.outlined.selected::before{border-width:0}.selected{--md-ripple-hover-color:var(--_selected-hover-state-layer-color);--md-ripple-hover-opacity:var(--_hover-state-layer-opacity);--md-ripple-pressed-color:var(--_selected-pressed-state-layer-color);--md-ripple-pressed-opacity:var(--_pressed-state-layer-opacity)}.selected:not(:disabled){color:var(--_selected-icon-color)}.selected:not(:disabled):hover{color:var(--_selected-hover-icon-color)}.selected:not(:disabled):focus{color:var(--_selected-focus-icon-color)}.selected:not(:disabled):active{color:var(--_selected-pressed-icon-color)}.selected:not(:disabled)::before{background-color:var(--_selected-container-color)}.selected:disabled::before{background-color:var(--_disabled-selected-container-color);opacity:var(--_disabled-selected-container-opacity)}@media(forced-colors:active){:host([disabled]){--_disabled-outline-opacity:1}.selected::before{border-color:CanvasText;border-width:var(--_outline-width)}.selected:disabled::before{border-color:GrayText;opacity:1}}`
/**
 * @license
 * Copyright 2022 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */;let Qe=class extends qe{getRenderClasses(){return{...super.getRenderClasses(),outlined:!0}}};
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Ke(t){return t<0?-1:0===t?0:1}function Ze(t,e,i){return(1-i)*t+i*e}function ti(t,e,i){return i<t?t:i>e?e:i}function ei(t){return(t%=360)<0&&(t+=360),t}function ii(t){return(t%=360)<0&&(t+=360),t}function ri(t,e){return 180-Math.abs(Math.abs(t-e)-180)}function oi(t,e){return[t[0]*e[0][0]+t[1]*e[0][1]+t[2]*e[0][2],t[0]*e[1][0]+t[1]*e[1][1]+t[2]*e[1][2],t[0]*e[2][0]+t[1]*e[2][1]+t[2]*e[2][2]]}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Qe.styles=[We,Je],Qe=bt([at("md-outlined-icon-button")],Qe);const ni=[[.41233895,.35762064,.18051042],[.2126,.7152,.0722],[.01932141,.11916382,.95034478]],si=[[3.2413774792388685,-1.5376652402851851,-.49885366846268053],[-.9691452513005321,1.8758853451067872,.04156585616912061],[.05562093689691305,-.20395524564742123,1.0571799111220335]],ai=[95.047,100,108.883];function li(t,e,i){return(255<<24|(255&t)<<16|(255&e)<<8|255&i)>>>0}function ci(t){return li(yi(t[0]),yi(t[1]),yi(t[2]))}function di(t){return t>>16&255}function hi(t){return t>>8&255}function ui(t){return 255&t}function pi(t,e,i){const r=si,o=r[0][0]*t+r[0][1]*e+r[0][2]*i,n=r[1][0]*t+r[1][1]*e+r[1][2]*i,s=r[2][0]*t+r[2][1]*e+r[2][2]*i;return li(yi(o),yi(n),yi(s))}function fi(t){const e=bi(di(t)),i=bi(hi(t)),r=bi(ui(t)),o=ni,n=o[0][0]*e+o[0][1]*i+o[0][2]*r,s=o[1][0]*e+o[1][1]*i+o[1][2]*r,a=o[2][0]*e+o[2][1]*i+o[2][2]*r,l=s/ai[1],c=a/ai[2],d=xi(n/ai[0]),h=xi(l);return[116*h-16,500*(d-h),200*(h-xi(c))]}function mi(t){const e=function(t){return oi([bi(di(t)),bi(hi(t)),bi(ui(t))],ni)}(t)[1];return 116*xi(e/100)-16}function gi(t){return 100*wi((t+16)/116)}function vi(t){return 116*xi(t/100)-16}function bi(t){const e=t/255;return e<=.040449936?e/12.92*100:100*Math.pow((e+.055)/1.055,2.4)}function yi(t){const e=t/100;let i=0;return i=e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055,function(t,e,i){return i<t?t:i>e?e:i}(0,255,Math.round(255*i))}function xi(t){const e=24389/27;return t>216/24389?Math.pow(t,1/3):(e*t+16)/116}function wi(t){const e=t*t*t;return e>216/24389?e:(116*t-16)/(24389/27)}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i{static make(t=function(){return ai}(),e=200/Math.PI*gi(50)/100,i=50,r=2,o=!1){const n=t,s=.401288*n[0]+.650173*n[1]+-.051461*n[2],a=-.250268*n[0]+1.204414*n[1]+.045854*n[2],l=-.002079*n[0]+.048952*n[1]+.953127*n[2],c=.8+r/10,d=c>=.9?Ze(.59,.69,10*(c-.9)):Ze(.525,.59,10*(c-.8));let h=o?1:c*(1-1/3.6*Math.exp((-e-42)/92));h=h>1?1:h<0?0:h;const u=c,p=[h*(100/s)+1-h,h*(100/a)+1-h,h*(100/l)+1-h],f=1/(5*e+1),m=f*f*f*f,g=1-m,v=m*e+.1*g*g*Math.cbrt(5*e),b=gi(i)/t[1],y=1.48+Math.sqrt(b),x=.725/Math.pow(b,.2),w=x,_=[Math.pow(v*p[0]*s/100,.42),Math.pow(v*p[1]*a/100,.42),Math.pow(v*p[2]*l/100,.42)],k=[400*_[0]/(_[0]+27.13),400*_[1]/(_[1]+27.13),400*_[2]/(_[2]+27.13)];return new _i(b,(2*k[0]+k[1]+.05*k[2])*x,x,w,d,u,p,v,Math.pow(v,.25),y)}constructor(t,e,i,r,o,n,s,a,l,c){this.n=t,this.aw=e,this.nbb=i,this.ncb=r,this.c=o,this.nc=n,this.rgbD=s,this.fl=a,this.fLRoot=l,this.z=c}}_i.DEFAULT=_i.make();
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class ki{constructor(t,e,i,r,o,n,s,a,l){this.hue=t,this.chroma=e,this.j=i,this.q=r,this.m=o,this.s=n,this.jstar=s,this.astar=a,this.bstar=l}distance(t){const e=this.jstar-t.jstar,i=this.astar-t.astar,r=this.bstar-t.bstar,o=Math.sqrt(e*e+i*i+r*r);return 1.41*Math.pow(o,.63)}static fromInt(t){return ki.fromIntInViewingConditions(t,_i.DEFAULT)}static fromIntInViewingConditions(t,e){const i=(65280&t)>>8,r=255&t,o=bi((16711680&t)>>16),n=bi(i),s=bi(r),a=.41233895*o+.35762064*n+.18051042*s,l=.2126*o+.7152*n+.0722*s,c=.01932141*o+.11916382*n+.95034478*s,d=.401288*a+.650173*l-.051461*c,h=-.250268*a+1.204414*l+.045854*c,u=-.002079*a+.048952*l+.953127*c,p=e.rgbD[0]*d,f=e.rgbD[1]*h,m=e.rgbD[2]*u,g=Math.pow(e.fl*Math.abs(p)/100,.42),v=Math.pow(e.fl*Math.abs(f)/100,.42),b=Math.pow(e.fl*Math.abs(m)/100,.42),y=400*Ke(p)*g/(g+27.13),x=400*Ke(f)*v/(v+27.13),w=400*Ke(m)*b/(b+27.13),_=(11*y+-12*x+w)/11,k=(y+x-2*w)/9,C=(20*y+20*x+21*w)/20,A=(40*y+20*x+w)/20,S=180*Math.atan2(k,_)/Math.PI,T=S<0?S+360:S>=360?S-360:S,P=T*Math.PI/180,E=A*e.nbb,I=100*Math.pow(E/e.aw,e.c*e.z),L=4/e.c*Math.sqrt(I/100)*(e.aw+4)*e.fLRoot,O=T<20.14?T+360:T,R=5e4/13*(.25*(Math.cos(O*Math.PI/180+2)+3.8))*e.nc*e.ncb*Math.sqrt(_*_+k*k)/(C+.305),$=Math.pow(R,.9)*Math.pow(1.64-Math.pow(.29,e.n),.73),M=$*Math.sqrt(I/100),N=M*e.fLRoot,D=50*Math.sqrt($*e.c/(e.aw+4)),z=(1+100*.007)*I/(1+.007*I),F=1/.0228*Math.log(1+.0228*N),B=F*Math.cos(P),U=F*Math.sin(P);return new ki(T,M,I,L,N,D,z,B,U)}static fromJch(t,e,i){return ki.fromJchInViewingConditions(t,e,i,_i.DEFAULT)}static fromJchInViewingConditions(t,e,i,r){const o=4/r.c*Math.sqrt(t/100)*(r.aw+4)*r.fLRoot,n=e*r.fLRoot,s=e/Math.sqrt(t/100),a=50*Math.sqrt(s*r.c/(r.aw+4)),l=i*Math.PI/180,c=(1+100*.007)*t/(1+.007*t),d=1/.0228*Math.log(1+.0228*n),h=d*Math.cos(l),u=d*Math.sin(l);return new ki(i,e,t,o,n,a,c,h,u)}static fromUcs(t,e,i){return ki.fromUcsInViewingConditions(t,e,i,_i.DEFAULT)}static fromUcsInViewingConditions(t,e,i,r){const o=e,n=i,s=Math.sqrt(o*o+n*n),a=(Math.exp(.0228*s)-1)/.0228/r.fLRoot;let l=Math.atan2(n,o)*(180/Math.PI);l<0&&(l+=360);const c=t/(1-.007*(t-100));return ki.fromJchInViewingConditions(c,a,l,r)}toInt(){return this.viewed(_i.DEFAULT)}viewed(t){const e=0===this.chroma||0===this.j?0:this.chroma/Math.sqrt(this.j/100),i=Math.pow(e/Math.pow(1.64-Math.pow(.29,t.n),.73),1/.9),r=this.hue*Math.PI/180,o=.25*(Math.cos(r+2)+3.8),n=t.aw*Math.pow(this.j/100,1/t.c/t.z),s=o*(5e4/13)*t.nc*t.ncb,a=n/t.nbb,l=Math.sin(r),c=Math.cos(r),d=23*(a+.305)*i/(23*s+11*i*c+108*i*l),h=d*c,u=d*l,p=(460*a+451*h+288*u)/1403,f=(460*a-891*h-261*u)/1403,m=(460*a-220*h-6300*u)/1403,g=Math.max(0,27.13*Math.abs(p)/(400-Math.abs(p))),v=Ke(p)*(100/t.fl)*Math.pow(g,1/.42),b=Math.max(0,27.13*Math.abs(f)/(400-Math.abs(f))),y=Ke(f)*(100/t.fl)*Math.pow(b,1/.42),x=Math.max(0,27.13*Math.abs(m)/(400-Math.abs(m))),w=Ke(m)*(100/t.fl)*Math.pow(x,1/.42),_=v/t.rgbD[0],k=y/t.rgbD[1],C=w/t.rgbD[2];return pi(1.86206786*_-1.01125463*k+.14918677*C,.38752654*_+.62144744*k-.00897398*C,-.0158415*_-.03412294*k+1.04996444*C)}static fromXyzInViewingConditions(t,e,i,r){const o=.401288*t+.650173*e-.051461*i,n=-.250268*t+1.204414*e+.045854*i,s=-.002079*t+.048952*e+.953127*i,a=r.rgbD[0]*o,l=r.rgbD[1]*n,c=r.rgbD[2]*s,d=Math.pow(r.fl*Math.abs(a)/100,.42),h=Math.pow(r.fl*Math.abs(l)/100,.42),u=Math.pow(r.fl*Math.abs(c)/100,.42),p=400*Ke(a)*d/(d+27.13),f=400*Ke(l)*h/(h+27.13),m=400*Ke(c)*u/(u+27.13),g=(11*p+-12*f+m)/11,v=(p+f-2*m)/9,b=(20*p+20*f+21*m)/20,y=(40*p+20*f+m)/20,x=180*Math.atan2(v,g)/Math.PI,w=x<0?x+360:x>=360?x-360:x,_=w*Math.PI/180,k=y*r.nbb,C=100*Math.pow(k/r.aw,r.c*r.z),A=4/r.c*Math.sqrt(C/100)*(r.aw+4)*r.fLRoot,S=w<20.14?w+360:w,T=5e4/13*(1/4*(Math.cos(S*Math.PI/180+2)+3.8))*r.nc*r.ncb*Math.sqrt(g*g+v*v)/(b+.305),P=Math.pow(T,.9)*Math.pow(1.64-Math.pow(.29,r.n),.73),E=P*Math.sqrt(C/100),I=E*r.fLRoot,L=50*Math.sqrt(P*r.c/(r.aw+4)),O=(1+100*.007)*C/(1+.007*C),R=Math.log(1+.0228*I)/.0228,$=R*Math.cos(_),M=R*Math.sin(_);return new ki(w,E,C,A,I,L,O,$,M)}xyzInViewingConditions(t){const e=0===this.chroma||0===this.j?0:this.chroma/Math.sqrt(this.j/100),i=Math.pow(e/Math.pow(1.64-Math.pow(.29,t.n),.73),1/.9),r=this.hue*Math.PI/180,o=.25*(Math.cos(r+2)+3.8),n=t.aw*Math.pow(this.j/100,1/t.c/t.z),s=o*(5e4/13)*t.nc*t.ncb,a=n/t.nbb,l=Math.sin(r),c=Math.cos(r),d=23*(a+.305)*i/(23*s+11*i*c+108*i*l),h=d*c,u=d*l,p=(460*a+451*h+288*u)/1403,f=(460*a-891*h-261*u)/1403,m=(460*a-220*h-6300*u)/1403,g=Math.max(0,27.13*Math.abs(p)/(400-Math.abs(p))),v=Ke(p)*(100/t.fl)*Math.pow(g,1/.42),b=Math.max(0,27.13*Math.abs(f)/(400-Math.abs(f))),y=Ke(f)*(100/t.fl)*Math.pow(b,1/.42),x=Math.max(0,27.13*Math.abs(m)/(400-Math.abs(m))),w=Ke(m)*(100/t.fl)*Math.pow(x,1/.42),_=v/t.rgbD[0],k=y/t.rgbD[1],C=w/t.rgbD[2];return[1.86206786*_-1.01125463*k+.14918677*C,.38752654*_+.62144744*k-.00897398*C,-.0158415*_-.03412294*k+1.04996444*C]}}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci{static sanitizeRadians(t){return(t+8*Math.PI)%(2*Math.PI)}static trueDelinearized(t){const e=t/100;let i=0;return i=e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055,255*i}static chromaticAdaptation(t){const e=Math.pow(Math.abs(t),.42);return 400*Ke(t)*e/(e+27.13)}static hueOf(t){const e=oi(t,Ci.SCALED_DISCOUNT_FROM_LINRGB),i=Ci.chromaticAdaptation(e[0]),r=Ci.chromaticAdaptation(e[1]),o=Ci.chromaticAdaptation(e[2]),n=(11*i+-12*r+o)/11,s=(i+r-2*o)/9;return Math.atan2(s,n)}static areInCyclicOrder(t,e,i){return Ci.sanitizeRadians(e-t)<Ci.sanitizeRadians(i-t)}static intercept(t,e,i){return(e-t)/(i-t)}static lerpPoint(t,e,i){return[t[0]+(i[0]-t[0])*e,t[1]+(i[1]-t[1])*e,t[2]+(i[2]-t[2])*e]}static setCoordinate(t,e,i,r){const o=Ci.intercept(t[r],e,i[r]);return Ci.lerpPoint(t,o,i)}static isBounded(t){return 0<=t&&t<=100}static nthVertex(t,e){const i=Ci.Y_FROM_LINRGB[0],r=Ci.Y_FROM_LINRGB[1],o=Ci.Y_FROM_LINRGB[2],n=e%4<=1?0:100,s=e%2==0?0:100;if(e<4){const e=n,a=s,l=(t-e*r-a*o)/i;return Ci.isBounded(l)?[l,e,a]:[-1,-1,-1]}if(e<8){const e=n,a=s,l=(t-a*i-e*o)/r;return Ci.isBounded(l)?[a,l,e]:[-1,-1,-1]}{const e=n,a=s,l=(t-e*i-a*r)/o;return Ci.isBounded(l)?[e,a,l]:[-1,-1,-1]}}static bisectToSegment(t,e){let i=[-1,-1,-1],r=i,o=0,n=0,s=!1,a=!0;for(let l=0;l<12;l++){const c=Ci.nthVertex(t,l);if(c[0]<0)continue;const d=Ci.hueOf(c);s?(a||Ci.areInCyclicOrder(o,d,n))&&(a=!1,Ci.areInCyclicOrder(o,e,d)?(r=c,n=d):(i=c,o=d)):(i=c,r=c,o=d,n=d,s=!0)}return[i,r]}static midpoint(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2,(t[2]+e[2])/2]}static criticalPlaneBelow(t){return Math.floor(t-.5)}static criticalPlaneAbove(t){return Math.ceil(t-.5)}static bisectToLimit(t,e){const i=Ci.bisectToSegment(t,e);let r=i[0],o=Ci.hueOf(r),n=i[1];for(let t=0;t<3;t++)if(r[t]!==n[t]){let i=-1,s=255;r[t]<n[t]?(i=Ci.criticalPlaneBelow(Ci.trueDelinearized(r[t])),s=Ci.criticalPlaneAbove(Ci.trueDelinearized(n[t]))):(i=Ci.criticalPlaneAbove(Ci.trueDelinearized(r[t])),s=Ci.criticalPlaneBelow(Ci.trueDelinearized(n[t])));for(let a=0;a<8&&!(Math.abs(s-i)<=1);a++){const a=Math.floor((i+s)/2),l=Ci.CRITICAL_PLANES[a],c=Ci.setCoordinate(r,l,n,t),d=Ci.hueOf(c);Ci.areInCyclicOrder(o,e,d)?(n=c,s=a):(r=c,o=d,i=a)}}return Ci.midpoint(r,n)}static inverseChromaticAdaptation(t){const e=Math.abs(t),i=Math.max(0,27.13*e/(400-e));return Ke(t)*Math.pow(i,1/.42)}static findResultByJ(t,e,i){let r=11*Math.sqrt(i);const o=_i.DEFAULT,n=1/Math.pow(1.64-Math.pow(.29,o.n),.73),s=.25*(Math.cos(t+2)+3.8)*(5e4/13)*o.nc*o.ncb,a=Math.sin(t),l=Math.cos(t);for(let t=0;t<5;t++){const c=r/100,d=0===e||0===r?0:e/Math.sqrt(c),h=Math.pow(d*n,1/.9),u=o.aw*Math.pow(c,1/o.c/o.z)/o.nbb,p=23*(u+.305)*h/(23*s+11*h*l+108*h*a),f=p*l,m=p*a,g=(460*u+451*f+288*m)/1403,v=(460*u-891*f-261*m)/1403,b=(460*u-220*f-6300*m)/1403,y=oi([Ci.inverseChromaticAdaptation(g),Ci.inverseChromaticAdaptation(v),Ci.inverseChromaticAdaptation(b)],Ci.LINRGB_FROM_SCALED_DISCOUNT);if(y[0]<0||y[1]<0||y[2]<0)return 0;const x=Ci.Y_FROM_LINRGB[0],w=Ci.Y_FROM_LINRGB[1],_=Ci.Y_FROM_LINRGB[2],k=x*y[0]+w*y[1]+_*y[2];if(k<=0)return 0;if(4===t||Math.abs(k-i)<.002)return y[0]>100.01||y[1]>100.01||y[2]>100.01?0:ci(y);r-=(k-i)*r/(2*k)}return 0}static solveToInt(t,e,i){if(e<1e-4||i<1e-4||i>99.9999)return function(t){const e=yi(gi(t));return li(e,e,e)}(i);const r=(t=ii(t))/180*Math.PI,o=gi(i),n=Ci.findResultByJ(r,e,o);if(0!==n)return n;return ci(Ci.bisectToLimit(o,r))}static solveToCam(t,e,i){return ki.fromInt(Ci.solveToInt(t,e,i))}}Ci.SCALED_DISCOUNT_FROM_LINRGB=[[.001200833568784504,.002389694492170889,.0002795742885861124],[.0005891086651375999,.0029785502573438758,.0003270666104008398],[.00010146692491640572,.0005364214359186694,.0032979401770712076]],Ci.LINRGB_FROM_SCALED_DISCOUNT=[[1373.2198709594231,-1100.4251190754821,-7.278681089101213],[-271.815969077903,559.6580465940733,-32.46047482791194],[1.9622899599665666,-57.173814538844006,308.7233197812385]],Ci.Y_FROM_LINRGB=[.2126,.7152,.0722],Ci.CRITICAL_PLANES=[.015176349177441876,.045529047532325624,.07588174588720938,.10623444424209313,.13658714259697685,.16693984095186062,.19729253930674434,.2276452376616281,.2579979360165119,.28835063437139563,.3188300904430532,.350925934958123,.3848314933096426,.42057480301049466,.458183274052838,.4976837250274023,.5391024159806381,.5824650784040898,.6277969426914107,.6751227633498623,.7244668422128921,.775853049866786,.829304845476233,.8848452951698498,.942497089126609,1.0022825574869039,1.0642236851973577,1.1283421258858297,1.1946592148522128,1.2631959812511864,1.3339731595349034,1.407011200216447,1.4823302800086415,1.5599503113873272,1.6398909516233677,1.7221716113234105,1.8068114625156377,1.8938294463134073,1.9832442801866852,2.075074464868551,2.1693382909216234,2.2660538449872063,2.36523901573795,2.4669114995532007,2.5710888059345764,2.6777882626779785,2.7870270208169257,2.898822059350997,3.0131901897720907,3.1301480604002863,3.2497121605402226,3.3718988244681087,3.4967242352587946,3.624204428461639,3.754355295633311,3.887192587735158,4.022731918402185,4.160988767090289,4.301978482107941,4.445716283538092,4.592217266055746,4.741496401646282,4.893568542229298,5.048448422192488,5.20615066083972,5.3666897647573375,5.5300801301023865,5.696336044816294,5.865471690767354,6.037501145825082,6.212438385869475,6.390297286737924,6.571091626112461,6.7548350853498045,6.941541251256611,7.131223617812143,7.323895587840543,7.5195704746346665,7.7182615035334345,7.919981813454504,8.124744458384042,8.332562408825165,8.543448553206703,8.757415699253682,8.974476575321063,9.194643831691977,9.417930041841839,9.644347703669503,9.873909240696694,10.106627003236781,10.342513269534024,10.58158024687427,10.8238400726681,11.069304815507364,11.317986476196008,11.569896988756009,11.825048221409341,12.083451977536606,12.345119996613247,12.610063955123938,12.878295467455942,13.149826086772048,13.42466730586372,13.702830557985108,13.984327217668513,14.269168601521828,14.55736596900856,14.848930523210871,15.143873411576273,15.44220572664832,15.743938506781891,16.04908273684337,16.35764934889634,16.66964922287304,16.985093187232053,17.30399201960269,17.62635644741625,17.95219714852476,18.281524751807332,18.614349837764564,18.95068293910138,19.290534541298456,19.633915083172692,19.98083495742689,20.331304511189067,20.685334046541502,21.042933821039977,21.404114048223256,21.76888489811322,22.137256497705877,22.50923893145328,22.884842241736916,23.264076429332462,23.6469514538663,24.033477234264016,24.42366364919083,24.817520537484558,25.21505769858089,25.61628489293138,26.021211842414342,26.429848230738664,26.842203703840827,27.258287870275353,27.678110301598522,28.10168053274597,28.529008062403893,28.96010235337422,29.39497283293396,29.83362889318845,30.276079891419332,30.722335150426627,31.172403958865512,31.62629557157785,32.08401920991837,32.54558406207592,33.010999283389665,33.4802739966603,33.953417292456834,34.430438229418264,34.911345834551085,35.39614910352207,35.88485700094671,36.37747846067349,36.87402238606382,37.37449765026789,37.87891309649659,38.38727753828926,38.89959975977785,39.41588851594697,39.93615253289054,40.460400508064545,40.98864111053629,41.520882981230194,42.05713473317016,42.597404951718396,43.141702194811224,43.6900349931913,44.24241185063697,44.798841244188324,45.35933162437017,45.92389141541209,46.49252901546552,47.065252796817916,47.64207110610409,48.22299226451468,48.808024568002054,49.3971762874833,49.9904556690408,50.587870934119984,51.189430279724725,51.79514187861014,52.40501387947288,53.0190544071392,53.637271562750364,54.259673423945976,54.88626804504493,55.517063457223934,56.15206766869424,56.79128866487574,57.43473440856916,58.08241284012621,58.734331877617365,59.39049941699807,60.05092333227251,60.715611475655585,61.38457167773311,62.057811747619894,62.7353394731159,63.417162620860914,64.10328893648692,64.79372614476921,65.48848194977529,66.18756403501224,66.89098006357258,67.59873767827808,68.31084450182222,69.02730813691093,69.74813616640164,70.47333615344107,71.20291564160104,71.93688215501312,72.67524319850172,73.41800625771542,74.16517879925733,74.9167682708136,75.67278210128072,76.43322770089146,77.1981124613393,77.96744375590167,78.74122893956174,79.51947534912904,80.30219030335869,81.08938110306934,81.88105503125999,82.67721935322541,83.4778813166706,84.28304815182372,85.09272707154808,85.90692527145302,86.72564993000343,87.54890820862819,88.3767072518277,89.2090541872801,90.04595612594655,90.88742016217518,91.73345337380438,92.58406282226491,93.43925555268066,94.29903859396902,95.16341895893969,96.03240364439274,96.9059996312159,97.78421388448044,98.6670533535366,99.55452497210776];
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Ai{static from(t,e,i){return new Ai(Ci.solveToInt(t,e,i))}static fromInt(t){return new Ai(t)}toInt(){return this.argb}get hue(){return this.internalHue}set hue(t){this.setInternalState(Ci.solveToInt(t,this.internalChroma,this.internalTone))}get chroma(){return this.internalChroma}set chroma(t){this.setInternalState(Ci.solveToInt(this.internalHue,t,this.internalTone))}get tone(){return this.internalTone}set tone(t){this.setInternalState(Ci.solveToInt(this.internalHue,this.internalChroma,t))}constructor(t){this.argb=t;const e=ki.fromInt(t);this.internalHue=e.hue,this.internalChroma=e.chroma,this.internalTone=mi(t),this.argb=t}setInternalState(t){const e=ki.fromInt(t);this.internalHue=e.hue,this.internalChroma=e.chroma,this.internalTone=mi(t),this.argb=t}inViewingConditions(t){const e=ki.fromInt(this.toInt()).xyzInViewingConditions(t),i=ki.fromXyzInViewingConditions(e[0],e[1],e[2],_i.make());return Ai.from(i.hue,i.chroma,vi(e[1]))}}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si{static harmonize(t,e){const i=Ai.fromInt(t),r=Ai.fromInt(e),o=ri(i.hue,r.hue),n=Math.min(.5*o,15),s=ii(i.hue+n*(a=i.hue,ii(r.hue-a)<=180?1:-1));var a;return Ai.from(s,i.chroma,i.tone).toInt()}static hctHue(t,e,i){const r=Si.cam16Ucs(t,e,i),o=ki.fromInt(r),n=ki.fromInt(t);return Ai.from(o.hue,n.chroma,mi(t)).toInt()}static cam16Ucs(t,e,i){const r=ki.fromInt(t),o=ki.fromInt(e),n=r.jstar,s=r.astar,a=r.bstar,l=n+(o.jstar-n)*i,c=s+(o.astar-s)*i,d=a+(o.bstar-a)*i;return ki.fromUcs(l,c,d).toInt()}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti{static ratioOfTones(t,e){return t=ti(0,100,t),e=ti(0,100,e),Ti.ratioOfYs(gi(t),gi(e))}static ratioOfYs(t,e){const i=t>e?t:e;return(i+5)/((i===e?t:e)+5)}static lighter(t,e){if(t<0||t>100)return-1;const i=gi(t),r=e*(i+5)-5,o=Ti.ratioOfYs(r,i),n=Math.abs(o-e);if(o<e&&n>.04)return-1;const s=vi(r)+.4;return s<0||s>100?-1:s}static darker(t,e){if(t<0||t>100)return-1;const i=gi(t),r=(i+5)/e-5,o=Ti.ratioOfYs(i,r),n=Math.abs(o-e);if(o<e&&n>.04)return-1;const s=vi(r)-.4;return s<0||s>100?-1:s}static lighterUnsafe(t,e){const i=Ti.lighter(t,e);return i<0?100:i}static darkerUnsafe(t,e){const i=Ti.darker(t,e);return i<0?0:i}}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi{static isDisliked(t){const e=Math.round(t.hue)>=90&&Math.round(t.hue)<=111,i=Math.round(t.chroma)>16,r=Math.round(t.tone)<65;return e&&i&&r}static fixIfDisliked(t){return Pi.isDisliked(t)?Ai.from(t.hue,t.chroma,70):t}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei{static fromPalette(t){return new Ei(t.name??"",t.palette,t.tone,t.isBackground??!1,t.background,t.secondBackground,t.contrastCurve,t.toneDeltaPair)}constructor(t,e,i,r,o,n,s,a){if(this.name=t,this.palette=e,this.tone=i,this.isBackground=r,this.background=o,this.secondBackground=n,this.contrastCurve=s,this.toneDeltaPair=a,this.hctCache=new Map,!o&&n)throw new Error(`Color ${t} has secondBackgrounddefined, but background is not defined.`);if(!o&&s)throw new Error(`Color ${t} has contrastCurvedefined, but background is not defined.`);if(o&&!s)throw new Error(`Color ${t} has backgrounddefined, but contrastCurve is not defined.`)}getArgb(t){return this.getHct(t).toInt()}getHct(t){const e=this.hctCache.get(t);if(null!=e)return e;const i=this.getTone(t),r=this.palette(t).getHct(i);return this.hctCache.size>4&&this.hctCache.clear(),this.hctCache.set(t,r),r}getTone(t){const e=t.contrastLevel<0;if(this.toneDeltaPair){const i=this.toneDeltaPair(t),r=i.roleA,o=i.roleB,n=i.delta,s=i.polarity,a=i.stayTogether,l=this.background(t).getTone(t),c="nearer"===s||"lighter"===s&&!t.isDark||"darker"===s&&t.isDark,d=c?r:o,h=c?o:r,u=this.name===d.name,p=t.isDark?1:-1,f=d.contrastCurve.getContrast(t.contrastLevel),m=h.contrastCurve.getContrast(t.contrastLevel),g=d.tone(t);let v=Ti.ratioOfTones(l,g)>=f?g:Ei.foregroundTone(l,f);const b=h.tone(t);let y=Ti.ratioOfTones(l,b)>=m?b:Ei.foregroundTone(l,m);return e&&(v=Ei.foregroundTone(l,f),y=Ei.foregroundTone(l,m)),(y-v)*p>=n||(y=ti(0,100,v+n*p),(y-v)*p>=n||(v=ti(0,100,y-n*p))),50<=v&&v<60?p>0?(v=60,y=Math.max(y,v+n*p)):(v=49,y=Math.min(y,v+n*p)):50<=y&&y<60&&(a?p>0?(v=60,y=Math.max(y,v+n*p)):(v=49,y=Math.min(y,v+n*p)):y=p>0?60:49),u?v:y}{let i=this.tone(t);if(null==this.background)return i;const r=this.background(t).getTone(t),o=this.contrastCurve.getContrast(t.contrastLevel);if(Ti.ratioOfTones(r,i)>=o||(i=Ei.foregroundTone(r,o)),e&&(i=Ei.foregroundTone(r,o)),this.isBackground&&50<=i&&i<60&&(i=Ti.ratioOfTones(49,r)>=o?49:60),this.secondBackground){const[e,r]=[this.background,this.secondBackground],[n,s]=[e(t).getTone(t),r(t).getTone(t)],[a,l]=[Math.max(n,s),Math.min(n,s)];if(Ti.ratioOfTones(a,i)>=o&&Ti.ratioOfTones(l,i)>=o)return i;const c=Ti.lighter(a,o),d=Ti.darker(l,o),h=[];-1!==c&&h.push(c),-1!==d&&h.push(d);return Ei.tonePrefersLightForeground(n)||Ei.tonePrefersLightForeground(s)?c<0?100:c:1===h.length?h[0]:d<0?0:d}return i}}static foregroundTone(t,e){const i=Ti.lighterUnsafe(t,e),r=Ti.darkerUnsafe(t,e),o=Ti.ratioOfTones(i,t),n=Ti.ratioOfTones(r,t);if(Ei.tonePrefersLightForeground(t)){const t=Math.abs(o-n)<.1&&o<e&&n<e;return o>=e||o>=n||t?i:r}return n>=e||n>=o?r:i}static tonePrefersLightForeground(t){return Math.round(t)<60}static toneAllowsLightForeground(t){return Math.round(t)<=49}static enableLightForeground(t){return Ei.tonePrefersLightForeground(t)&&!Ei.toneAllowsLightForeground(t)?49:t}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ii;!function(t){t[t.MONOCHROME=0]="MONOCHROME",t[t.NEUTRAL=1]="NEUTRAL",t[t.TONAL_SPOT=2]="TONAL_SPOT",t[t.VIBRANT=3]="VIBRANT",t[t.EXPRESSIVE=4]="EXPRESSIVE",t[t.FIDELITY=5]="FIDELITY",t[t.CONTENT=6]="CONTENT",t[t.RAINBOW=7]="RAINBOW",t[t.FRUIT_SALAD=8]="FRUIT_SALAD"}(Ii||(Ii={}));
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Li{constructor(t,e,i,r){this.low=t,this.normal=e,this.medium=i,this.high=r}getContrast(t){return t<=-1?this.low:t<0?Ze(this.low,this.normal,(t- -1)/1):t<.5?Ze(this.normal,this.medium,(t-0)/.5):t<1?Ze(this.medium,this.high,(t-.5)/.5):this.high}}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oi{constructor(t,e,i,r,o){this.roleA=t,this.roleB=e,this.delta=i,this.polarity=r,this.stayTogether=o}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ri(t){return t.variant===Ii.FIDELITY||t.variant===Ii.CONTENT}function $i(t){return t.variant===Ii.MONOCHROME}function Mi(t,e){const i=t.inViewingConditions(function(t){return _i.make(void 0,void 0,t.isDark?30:80,void 0,void 0)}(e));return Ei.tonePrefersLightForeground(t.tone)&&!Ei.toneAllowsLightForeground(i.tone)?Ei.enableLightForeground(t.tone):Ei.enableLightForeground(i.tone)}class Ni{static highestSurface(t){return t.isDark?Ni.surfaceBright:Ni.surfaceDim}}Ni.contentAccentToneDelta=15,Ni.primaryPaletteKeyColor=Ei.fromPalette({name:"primary_palette_key_color",palette:t=>t.primaryPalette,tone:t=>t.primaryPalette.keyColor.tone}),Ni.secondaryPaletteKeyColor=Ei.fromPalette({name:"secondary_palette_key_color",palette:t=>t.secondaryPalette,tone:t=>t.secondaryPalette.keyColor.tone}),Ni.tertiaryPaletteKeyColor=Ei.fromPalette({name:"tertiary_palette_key_color",palette:t=>t.tertiaryPalette,tone:t=>t.tertiaryPalette.keyColor.tone}),Ni.neutralPaletteKeyColor=Ei.fromPalette({name:"neutral_palette_key_color",palette:t=>t.neutralPalette,tone:t=>t.neutralPalette.keyColor.tone}),Ni.neutralVariantPaletteKeyColor=Ei.fromPalette({name:"neutral_variant_palette_key_color",palette:t=>t.neutralVariantPalette,tone:t=>t.neutralVariantPalette.keyColor.tone}),Ni.background=Ei.fromPalette({name:"background",palette:t=>t.neutralPalette,tone:t=>t.isDark?6:98,isBackground:!0}),Ni.onBackground=Ei.fromPalette({name:"on_background",palette:t=>t.neutralPalette,tone:t=>t.isDark?90:10,background:t=>Ni.background,contrastCurve:new Li(3,3,4.5,7)}),Ni.surface=Ei.fromPalette({name:"surface",palette:t=>t.neutralPalette,tone:t=>t.isDark?6:98,isBackground:!0}),Ni.surfaceDim=Ei.fromPalette({name:"surface_dim",palette:t=>t.neutralPalette,tone:t=>t.isDark?6:87,isBackground:!0}),Ni.surfaceBright=Ei.fromPalette({name:"surface_bright",palette:t=>t.neutralPalette,tone:t=>t.isDark?24:98,isBackground:!0}),Ni.surfaceContainerLowest=Ei.fromPalette({name:"surface_container_lowest",palette:t=>t.neutralPalette,tone:t=>t.isDark?4:100,isBackground:!0}),Ni.surfaceContainerLow=Ei.fromPalette({name:"surface_container_low",palette:t=>t.neutralPalette,tone:t=>t.isDark?10:96,isBackground:!0}),Ni.surfaceContainer=Ei.fromPalette({name:"surface_container",palette:t=>t.neutralPalette,tone:t=>t.isDark?12:94,isBackground:!0}),Ni.surfaceContainerHigh=Ei.fromPalette({name:"surface_container_high",palette:t=>t.neutralPalette,tone:t=>t.isDark?17:92,isBackground:!0}),Ni.surfaceContainerHighest=Ei.fromPalette({name:"surface_container_highest",palette:t=>t.neutralPalette,tone:t=>t.isDark?22:90,isBackground:!0}),Ni.onSurface=Ei.fromPalette({name:"on_surface",palette:t=>t.neutralPalette,tone:t=>t.isDark?90:10,background:t=>Ni.highestSurface(t),contrastCurve:new Li(4.5,7,11,21)}),Ni.surfaceVariant=Ei.fromPalette({name:"surface_variant",palette:t=>t.neutralVariantPalette,tone:t=>t.isDark?30:90,isBackground:!0}),Ni.onSurfaceVariant=Ei.fromPalette({name:"on_surface_variant",palette:t=>t.neutralVariantPalette,tone:t=>t.isDark?80:30,background:t=>Ni.highestSurface(t),contrastCurve:new Li(3,4.5,7,11)}),Ni.inverseSurface=Ei.fromPalette({name:"inverse_surface",palette:t=>t.neutralPalette,tone:t=>t.isDark?90:20}),Ni.inverseOnSurface=Ei.fromPalette({name:"inverse_on_surface",palette:t=>t.neutralPalette,tone:t=>t.isDark?20:95,background:t=>Ni.inverseSurface,contrastCurve:new Li(4.5,7,11,21)}),Ni.outline=Ei.fromPalette({name:"outline",palette:t=>t.neutralVariantPalette,tone:t=>t.isDark?60:50,background:t=>Ni.highestSurface(t),contrastCurve:new Li(1.5,3,4.5,7)}),Ni.outlineVariant=Ei.fromPalette({name:"outline_variant",palette:t=>t.neutralVariantPalette,tone:t=>t.isDark?30:80,background:t=>Ni.highestSurface(t),contrastCurve:new Li(1,1,3,7)}),Ni.shadow=Ei.fromPalette({name:"shadow",palette:t=>t.neutralPalette,tone:t=>0}),Ni.scrim=Ei.fromPalette({name:"scrim",palette:t=>t.neutralPalette,tone:t=>0}),Ni.surfaceTint=Ei.fromPalette({name:"surface_tint",palette:t=>t.primaryPalette,tone:t=>t.isDark?80:40,isBackground:!0}),Ni.primary=Ei.fromPalette({name:"primary",palette:t=>t.primaryPalette,tone:t=>$i(t)?t.isDark?100:0:t.isDark?80:40,isBackground:!0,background:t=>Ni.highestSurface(t),contrastCurve:new Li(3,4.5,7,11),toneDeltaPair:t=>new Oi(Ni.primaryContainer,Ni.primary,15,"nearer",!1)}),Ni.onPrimary=Ei.fromPalette({name:"on_primary",palette:t=>t.primaryPalette,tone:t=>$i(t)?t.isDark?10:90:t.isDark?20:100,background:t=>Ni.primary,contrastCurve:new Li(4.5,7,11,21)}),Ni.primaryContainer=Ei.fromPalette({name:"primary_container",palette:t=>t.primaryPalette,tone:t=>Ri(t)?Mi(t.sourceColorHct,t):$i(t)?t.isDark?85:25:t.isDark?30:90,isBackground:!0,background:t=>Ni.highestSurface(t),contrastCurve:new Li(1,1,3,7),toneDeltaPair:t=>new Oi(Ni.primaryContainer,Ni.primary,15,"nearer",!1)}),Ni.onPrimaryContainer=Ei.fromPalette({name:"on_primary_container",palette:t=>t.primaryPalette,tone:t=>Ri(t)?Ei.foregroundTone(Ni.primaryContainer.tone(t),4.5):$i(t)?t.isDark?0:100:t.isDark?90:10,background:t=>Ni.primaryContainer,contrastCurve:new Li(4.5,7,11,21)}),Ni.inversePrimary=Ei.fromPalette({name:"inverse_primary",palette:t=>t.primaryPalette,tone:t=>t.isDark?40:80,background:t=>Ni.inverseSurface,contrastCurve:new Li(3,4.5,7,11)}),Ni.secondary=Ei.fromPalette({name:"secondary",palette:t=>t.secondaryPalette,tone:t=>t.isDark?80:40,isBackground:!0,background:t=>Ni.highestSurface(t),contrastCurve:new Li(3,4.5,7,11),toneDeltaPair:t=>new Oi(Ni.secondaryContainer,Ni.secondary,15,"nearer",!1)}),Ni.onSecondary=Ei.fromPalette({name:"on_secondary",palette:t=>t.secondaryPalette,tone:t=>$i(t)?t.isDark?10:100:t.isDark?20:100,background:t=>Ni.secondary,contrastCurve:new Li(4.5,7,11,21)}),Ni.secondaryContainer=Ei.fromPalette({name:"secondary_container",palette:t=>t.secondaryPalette,tone:t=>{const e=t.isDark?30:90;if($i(t))return t.isDark?30:85;if(!Ri(t))return e;let i=function(t,e,i,r){let o=i,n=Ai.from(t,e,i);if(n.chroma<e){let i=n.chroma;for(;n.chroma<e;){o+=r?-1:1;const s=Ai.from(t,e,o);if(i>s.chroma)break;if(Math.abs(s.chroma-e)<.4)break;Math.abs(s.chroma-e)<Math.abs(n.chroma-e)&&(n=s),i=Math.max(i,s.chroma)}}return o}(t.secondaryPalette.hue,t.secondaryPalette.chroma,e,!t.isDark);return i=Mi(t.secondaryPalette.getHct(i),t),i},isBackground:!0,background:t=>Ni.highestSurface(t),contrastCurve:new Li(1,1,3,7),toneDeltaPair:t=>new Oi(Ni.secondaryContainer,Ni.secondary,15,"nearer",!1)}),Ni.onSecondaryContainer=Ei.fromPalette({name:"on_secondary_container",palette:t=>t.secondaryPalette,tone:t=>Ri(t)?Ei.foregroundTone(Ni.secondaryContainer.tone(t),4.5):t.isDark?90:10,background:t=>Ni.secondaryContainer,contrastCurve:new Li(4.5,7,11,21)}),Ni.tertiary=Ei.fromPalette({name:"tertiary",palette:t=>t.tertiaryPalette,tone:t=>$i(t)?t.isDark?90:25:t.isDark?80:40,isBackground:!0,background:t=>Ni.highestSurface(t),contrastCurve:new Li(3,4.5,7,11),toneDeltaPair:t=>new Oi(Ni.tertiaryContainer,Ni.tertiary,15,"nearer",!1)}),Ni.onTertiary=Ei.fromPalette({name:"on_tertiary",palette:t=>t.tertiaryPalette,tone:t=>$i(t)?t.isDark?10:90:t.isDark?20:100,background:t=>Ni.tertiary,contrastCurve:new Li(4.5,7,11,21)}),Ni.tertiaryContainer=Ei.fromPalette({name:"tertiary_container",palette:t=>t.tertiaryPalette,tone:t=>{if($i(t))return t.isDark?60:49;if(!Ri(t))return t.isDark?30:90;const e=Mi(t.tertiaryPalette.getHct(t.sourceColorHct.tone),t),i=t.tertiaryPalette.getHct(e);return Pi.fixIfDisliked(i).tone},isBackground:!0,background:t=>Ni.highestSurface(t),contrastCurve:new Li(1,1,3,7),toneDeltaPair:t=>new Oi(Ni.tertiaryContainer,Ni.tertiary,15,"nearer",!1)}),Ni.onTertiaryContainer=Ei.fromPalette({name:"on_tertiary_container",palette:t=>t.tertiaryPalette,tone:t=>$i(t)?t.isDark?0:100:Ri(t)?Ei.foregroundTone(Ni.tertiaryContainer.tone(t),4.5):t.isDark?90:10,background:t=>Ni.tertiaryContainer,contrastCurve:new Li(4.5,7,11,21)}),Ni.error=Ei.fromPalette({name:"error",palette:t=>t.errorPalette,tone:t=>t.isDark?80:40,isBackground:!0,background:t=>Ni.highestSurface(t),contrastCurve:new Li(3,4.5,7,11),toneDeltaPair:t=>new Oi(Ni.errorContainer,Ni.error,15,"nearer",!1)}),Ni.onError=Ei.fromPalette({name:"on_error",palette:t=>t.errorPalette,tone:t=>t.isDark?20:100,background:t=>Ni.error,contrastCurve:new Li(4.5,7,11,21)}),Ni.errorContainer=Ei.fromPalette({name:"error_container",palette:t=>t.errorPalette,tone:t=>t.isDark?30:90,isBackground:!0,background:t=>Ni.highestSurface(t),contrastCurve:new Li(1,1,3,7),toneDeltaPair:t=>new Oi(Ni.errorContainer,Ni.error,15,"nearer",!1)}),Ni.onErrorContainer=Ei.fromPalette({name:"on_error_container",palette:t=>t.errorPalette,tone:t=>t.isDark?90:10,background:t=>Ni.errorContainer,contrastCurve:new Li(4.5,7,11,21)}),Ni.primaryFixed=Ei.fromPalette({name:"primary_fixed",palette:t=>t.primaryPalette,tone:t=>$i(t)?40:90,isBackground:!0,background:t=>Ni.highestSurface(t),contrastCurve:new Li(1,1,3,7),toneDeltaPair:t=>new Oi(Ni.primaryFixed,Ni.primaryFixedDim,10,"lighter",!0)}),Ni.primaryFixedDim=Ei.fromPalette({name:"primary_fixed_dim",palette:t=>t.primaryPalette,tone:t=>$i(t)?30:80,isBackground:!0,background:t=>Ni.highestSurface(t),contrastCurve:new Li(1,1,3,7),toneDeltaPair:t=>new Oi(Ni.primaryFixed,Ni.primaryFixedDim,10,"lighter",!0)}),Ni.onPrimaryFixed=Ei.fromPalette({name:"on_primary_fixed",palette:t=>t.primaryPalette,tone:t=>$i(t)?100:10,background:t=>Ni.primaryFixedDim,secondBackground:t=>Ni.primaryFixed,contrastCurve:new Li(4.5,7,11,21)}),Ni.onPrimaryFixedVariant=Ei.fromPalette({name:"on_primary_fixed_variant",palette:t=>t.primaryPalette,tone:t=>$i(t)?90:30,background:t=>Ni.primaryFixedDim,secondBackground:t=>Ni.primaryFixed,contrastCurve:new Li(3,4.5,7,11)}),Ni.secondaryFixed=Ei.fromPalette({name:"secondary_fixed",palette:t=>t.secondaryPalette,tone:t=>$i(t)?80:90,isBackground:!0,background:t=>Ni.highestSurface(t),contrastCurve:new Li(1,1,3,7),toneDeltaPair:t=>new Oi(Ni.secondaryFixed,Ni.secondaryFixedDim,10,"lighter",!0)}),Ni.secondaryFixedDim=Ei.fromPalette({name:"secondary_fixed_dim",palette:t=>t.secondaryPalette,tone:t=>$i(t)?70:80,isBackground:!0,background:t=>Ni.highestSurface(t),contrastCurve:new Li(1,1,3,7),toneDeltaPair:t=>new Oi(Ni.secondaryFixed,Ni.secondaryFixedDim,10,"lighter",!0)}),Ni.onSecondaryFixed=Ei.fromPalette({name:"on_secondary_fixed",palette:t=>t.secondaryPalette,tone:t=>10,background:t=>Ni.secondaryFixedDim,secondBackground:t=>Ni.secondaryFixed,contrastCurve:new Li(4.5,7,11,21)}),Ni.onSecondaryFixedVariant=Ei.fromPalette({name:"on_secondary_fixed_variant",palette:t=>t.secondaryPalette,tone:t=>$i(t)?25:30,background:t=>Ni.secondaryFixedDim,secondBackground:t=>Ni.secondaryFixed,contrastCurve:new Li(3,4.5,7,11)}),Ni.tertiaryFixed=Ei.fromPalette({name:"tertiary_fixed",palette:t=>t.tertiaryPalette,tone:t=>$i(t)?40:90,isBackground:!0,background:t=>Ni.highestSurface(t),contrastCurve:new Li(1,1,3,7),toneDeltaPair:t=>new Oi(Ni.tertiaryFixed,Ni.tertiaryFixedDim,10,"lighter",!0)}),Ni.tertiaryFixedDim=Ei.fromPalette({name:"tertiary_fixed_dim",palette:t=>t.tertiaryPalette,tone:t=>$i(t)?30:80,isBackground:!0,background:t=>Ni.highestSurface(t),contrastCurve:new Li(1,1,3,7),toneDeltaPair:t=>new Oi(Ni.tertiaryFixed,Ni.tertiaryFixedDim,10,"lighter",!0)}),Ni.onTertiaryFixed=Ei.fromPalette({name:"on_tertiary_fixed",palette:t=>t.tertiaryPalette,tone:t=>$i(t)?100:10,background:t=>Ni.tertiaryFixedDim,secondBackground:t=>Ni.tertiaryFixed,contrastCurve:new Li(4.5,7,11,21)}),Ni.onTertiaryFixedVariant=Ei.fromPalette({name:"on_tertiary_fixed_variant",palette:t=>t.tertiaryPalette,tone:t=>$i(t)?90:30,background:t=>Ni.tertiaryFixedDim,secondBackground:t=>Ni.tertiaryFixed,contrastCurve:new Li(3,4.5,7,11)});
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Di{static fromInt(t){const e=Ai.fromInt(t);return Di.fromHct(e)}static fromHct(t){return new Di(t.hue,t.chroma,t)}static fromHueAndChroma(t,e){return new Di(t,e,Di.createKeyColor(t,e))}constructor(t,e,i){this.hue=t,this.chroma=e,this.keyColor=i,this.cache=new Map}static createKeyColor(t,e){let i=Ai.from(t,e,50),r=Math.abs(i.chroma-e);for(let o=1;o<50;o+=1){if(Math.round(e)===Math.round(i.chroma))return i;const n=Ai.from(t,e,50+o),s=Math.abs(n.chroma-e);s<r&&(r=s,i=n);const a=Ai.from(t,e,50-o),l=Math.abs(a.chroma-e);l<r&&(r=l,i=a)}return i}tone(t){let e=this.cache.get(t);return void 0===e&&(e=Ai.from(this.hue,this.chroma,t).toInt(),this.cache.set(t,e)),e}getHct(t){return Ai.fromInt(this.tone(t))}}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi{static of(t){return new zi(t,!1)}static contentOf(t){return new zi(t,!0)}static fromColors(t){return zi.createPaletteFromColors(!1,t)}static contentFromColors(t){return zi.createPaletteFromColors(!0,t)}static createPaletteFromColors(t,e){const i=new zi(e.primary,t);if(e.secondary){const r=new zi(e.secondary,t);i.a2=r.a1}if(e.tertiary){const r=new zi(e.tertiary,t);i.a3=r.a1}if(e.error){const r=new zi(e.error,t);i.error=r.a1}if(e.neutral){const r=new zi(e.neutral,t);i.n1=r.n1}if(e.neutralVariant){const r=new zi(e.neutralVariant,t);i.n2=r.n2}return i}constructor(t,e){const i=Ai.fromInt(t),r=i.hue,o=i.chroma;e?(this.a1=Di.fromHueAndChroma(r,o),this.a2=Di.fromHueAndChroma(r,o/3),this.a3=Di.fromHueAndChroma(r+60,o/2),this.n1=Di.fromHueAndChroma(r,Math.min(o/12,4)),this.n2=Di.fromHueAndChroma(r,Math.min(o/6,8))):(this.a1=Di.fromHueAndChroma(r,Math.max(48,o)),this.a2=Di.fromHueAndChroma(r,16),this.a3=Di.fromHueAndChroma(r+60,24),this.n1=Di.fromHueAndChroma(r,4),this.n2=Di.fromHueAndChroma(r,8)),this.error=Di.fromHueAndChroma(25,84)}}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi{fromInt(t){return fi(t)}toInt(t){return function(t,e,i){const r=ai,o=(t+16)/116,n=o-i/200,s=wi(e/500+o),a=wi(o),l=wi(n);return pi(s*r[0],a*r[1],l*r[2])}(t[0],t[1],t[2])}distance(t,e){const i=t[0]-e[0],r=t[1]-e[1],o=t[2]-e[2];return i*i+r*r+o*o}}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi{static quantize(t,e,i){const r=new Map,o=new Array,n=new Array,s=new Fi;let a=0;for(let e=0;e<t.length;e++){const i=t[e],l=r.get(i);void 0===l?(a++,o.push(s.fromInt(i)),n.push(i),r.set(i,1)):r.set(i,l+1)}const l=new Array;for(let t=0;t<a;t++){const e=n[t],i=r.get(e);void 0!==i&&(l[t]=i)}let c=Math.min(i,a);e.length>0&&(c=Math.min(c,e.length));const d=new Array;for(let t=0;t<e.length;t++)d.push(s.fromInt(e[t]));const h=c-d.length;if(0===e.length&&h>0)for(let t=0;t<h;t++){const t=100*Math.random(),e=201*Math.random()-100,i=201*Math.random()-100;d.push(new Array(t,e,i))}const u=new Array;for(let t=0;t<a;t++)u.push(Math.floor(Math.random()*c));const p=new Array;for(let t=0;t<c;t++){p.push(new Array);for(let e=0;e<c;e++)p[t].push(0)}const f=new Array;for(let t=0;t<c;t++){f.push(new Array);for(let e=0;e<c;e++)f[t].push(new Ui)}const m=new Array;for(let t=0;t<c;t++)m.push(0);for(let t=0;t<10;t++){for(let t=0;t<c;t++){for(let e=t+1;e<c;e++){const i=s.distance(d[t],d[e]);f[e][t].distance=i,f[e][t].index=t,f[t][e].distance=i,f[t][e].index=e}f[t].sort();for(let e=0;e<c;e++)p[t][e]=f[t][e].index}let e=0;for(let t=0;t<a;t++){const i=o[t],r=u[t],n=d[r],a=s.distance(i,n);let l=a,h=-1;for(let t=0;t<c;t++){if(f[r][t].distance>=4*a)continue;const e=s.distance(i,d[t]);e<l&&(l=e,h=t)}if(-1!==h){Math.abs(Math.sqrt(l)-Math.sqrt(a))>3&&(e++,u[t]=h)}}if(0===e&&0!==t)break;const i=new Array(c).fill(0),r=new Array(c).fill(0),n=new Array(c).fill(0);for(let t=0;t<c;t++)m[t]=0;for(let t=0;t<a;t++){const e=u[t],s=o[t],a=l[t];m[e]+=a,i[e]+=s[0]*a,r[e]+=s[1]*a,n[e]+=s[2]*a}for(let t=0;t<c;t++){const e=m[t];if(0===e){d[t]=[0,0,0];continue}const o=i[t]/e,s=r[t]/e,a=n[t]/e;d[t]=[o,s,a]}}const g=new Map;for(let t=0;t<c;t++){const e=m[t];if(0===e)continue;const i=s.toInt(d[t]);g.has(i)||g.set(i,e)}return g}}class Ui{constructor(){this.distance=-1,this.index=-1}}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi{static quantize(t){const e=new Map;for(let i=0;i<t.length;i++){const r=t[i];(r>>24&255)<255||e.set(r,(e.get(r)??0)+1)}return e}}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ji=33,Gi=35937,Hi="red",qi="green",Wi="blue";class Yi{constructor(t=[],e=[],i=[],r=[],o=[],n=[]){this.weights=t,this.momentsR=e,this.momentsG=i,this.momentsB=r,this.moments=o,this.cubes=n}quantize(t,e){this.constructHistogram(t),this.computeMoments();const i=this.createBoxes(e);return this.createResult(i.resultCount)}constructHistogram(t){this.weights=Array.from({length:Gi}).fill(0),this.momentsR=Array.from({length:Gi}).fill(0),this.momentsG=Array.from({length:Gi}).fill(0),this.momentsB=Array.from({length:Gi}).fill(0),this.moments=Array.from({length:Gi}).fill(0);const e=Vi.quantize(t);for(const[t,i]of e.entries()){const e=di(t),r=hi(t),o=ui(t),n=3,s=1+(e>>n),a=1+(r>>n),l=1+(o>>n),c=this.getIndex(s,a,l);this.weights[c]=(this.weights[c]??0)+i,this.momentsR[c]+=i*e,this.momentsG[c]+=i*r,this.momentsB[c]+=i*o,this.moments[c]+=i*(e*e+r*r+o*o)}}computeMoments(){for(let t=1;t<ji;t++){const e=Array.from({length:ji}).fill(0),i=Array.from({length:ji}).fill(0),r=Array.from({length:ji}).fill(0),o=Array.from({length:ji}).fill(0),n=Array.from({length:ji}).fill(0);for(let s=1;s<ji;s++){let a=0,l=0,c=0,d=0,h=0;for(let u=1;u<ji;u++){const p=this.getIndex(t,s,u);a+=this.weights[p],l+=this.momentsR[p],c+=this.momentsG[p],d+=this.momentsB[p],h+=this.moments[p],e[u]+=a,i[u]+=l,r[u]+=c,o[u]+=d,n[u]+=h;const f=this.getIndex(t-1,s,u);this.weights[p]=this.weights[f]+e[u],this.momentsR[p]=this.momentsR[f]+i[u],this.momentsG[p]=this.momentsG[f]+r[u],this.momentsB[p]=this.momentsB[f]+o[u],this.moments[p]=this.moments[f]+n[u]}}}}createBoxes(t){this.cubes=Array.from({length:t}).fill(0).map((()=>new Xi));const e=Array.from({length:t}).fill(0);this.cubes[0].r0=0,this.cubes[0].g0=0,this.cubes[0].b0=0,this.cubes[0].r1=32,this.cubes[0].g1=32,this.cubes[0].b1=32;let i=t,r=0;for(let o=1;o<t;o++){this.cut(this.cubes[r],this.cubes[o])?(e[r]=this.cubes[r].vol>1?this.variance(this.cubes[r]):0,e[o]=this.cubes[o].vol>1?this.variance(this.cubes[o]):0):(e[r]=0,o--),r=0;let t=e[0];for(let i=1;i<=o;i++)e[i]>t&&(t=e[i],r=i);if(t<=0){i=o+1;break}}return new Ji(t,i)}createResult(t){const e=[];for(let i=0;i<t;++i){const t=this.cubes[i],r=this.volume(t,this.weights);if(r>0){const i=255<<24|(255&Math.round(this.volume(t,this.momentsR)/r))<<16|(255&Math.round(this.volume(t,this.momentsG)/r))<<8|255&Math.round(this.volume(t,this.momentsB)/r);e.push(i)}}return e}variance(t){const e=this.volume(t,this.momentsR),i=this.volume(t,this.momentsG),r=this.volume(t,this.momentsB);return this.moments[this.getIndex(t.r1,t.g1,t.b1)]-this.moments[this.getIndex(t.r1,t.g1,t.b0)]-this.moments[this.getIndex(t.r1,t.g0,t.b1)]+this.moments[this.getIndex(t.r1,t.g0,t.b0)]-this.moments[this.getIndex(t.r0,t.g1,t.b1)]+this.moments[this.getIndex(t.r0,t.g1,t.b0)]+this.moments[this.getIndex(t.r0,t.g0,t.b1)]-this.moments[this.getIndex(t.r0,t.g0,t.b0)]-(e*e+i*i+r*r)/this.volume(t,this.weights)}cut(t,e){const i=this.volume(t,this.momentsR),r=this.volume(t,this.momentsG),o=this.volume(t,this.momentsB),n=this.volume(t,this.weights),s=this.maximize(t,Hi,t.r0+1,t.r1,i,r,o,n),a=this.maximize(t,qi,t.g0+1,t.g1,i,r,o,n),l=this.maximize(t,Wi,t.b0+1,t.b1,i,r,o,n);let c;const d=s.maximum,h=a.maximum,u=l.maximum;if(d>=h&&d>=u){if(s.cutLocation<0)return!1;c=Hi}else c=h>=d&&h>=u?qi:Wi;switch(e.r1=t.r1,e.g1=t.g1,e.b1=t.b1,c){case Hi:t.r1=s.cutLocation,e.r0=t.r1,e.g0=t.g0,e.b0=t.b0;break;case qi:t.g1=a.cutLocation,e.r0=t.r0,e.g0=t.g1,e.b0=t.b0;break;case Wi:t.b1=l.cutLocation,e.r0=t.r0,e.g0=t.g0,e.b0=t.b1;break;default:throw new Error("unexpected direction "+c)}return t.vol=(t.r1-t.r0)*(t.g1-t.g0)*(t.b1-t.b0),e.vol=(e.r1-e.r0)*(e.g1-e.g0)*(e.b1-e.b0),!0}maximize(t,e,i,r,o,n,s,a){const l=this.bottom(t,e,this.momentsR),c=this.bottom(t,e,this.momentsG),d=this.bottom(t,e,this.momentsB),h=this.bottom(t,e,this.weights);let u=0,p=-1,f=0,m=0,g=0,v=0;for(let b=i;b<r;b++){if(f=l+this.top(t,e,b,this.momentsR),m=c+this.top(t,e,b,this.momentsG),g=d+this.top(t,e,b,this.momentsB),v=h+this.top(t,e,b,this.weights),0===v)continue;let i=1*(f*f+m*m+g*g),r=1*v,y=i/r;f=o-f,m=n-m,g=s-g,v=a-v,0!==v&&(i=1*(f*f+m*m+g*g),r=1*v,y+=i/r,y>u&&(u=y,p=b))}return new Qi(p,u)}volume(t,e){return e[this.getIndex(t.r1,t.g1,t.b1)]-e[this.getIndex(t.r1,t.g1,t.b0)]-e[this.getIndex(t.r1,t.g0,t.b1)]+e[this.getIndex(t.r1,t.g0,t.b0)]-e[this.getIndex(t.r0,t.g1,t.b1)]+e[this.getIndex(t.r0,t.g1,t.b0)]+e[this.getIndex(t.r0,t.g0,t.b1)]-e[this.getIndex(t.r0,t.g0,t.b0)]}bottom(t,e,i){switch(e){case Hi:return-i[this.getIndex(t.r0,t.g1,t.b1)]+i[this.getIndex(t.r0,t.g1,t.b0)]+i[this.getIndex(t.r0,t.g0,t.b1)]-i[this.getIndex(t.r0,t.g0,t.b0)];case qi:return-i[this.getIndex(t.r1,t.g0,t.b1)]+i[this.getIndex(t.r1,t.g0,t.b0)]+i[this.getIndex(t.r0,t.g0,t.b1)]-i[this.getIndex(t.r0,t.g0,t.b0)];case Wi:return-i[this.getIndex(t.r1,t.g1,t.b0)]+i[this.getIndex(t.r1,t.g0,t.b0)]+i[this.getIndex(t.r0,t.g1,t.b0)]-i[this.getIndex(t.r0,t.g0,t.b0)];default:throw new Error("unexpected direction $direction")}}top(t,e,i,r){switch(e){case Hi:return r[this.getIndex(i,t.g1,t.b1)]-r[this.getIndex(i,t.g1,t.b0)]-r[this.getIndex(i,t.g0,t.b1)]+r[this.getIndex(i,t.g0,t.b0)];case qi:return r[this.getIndex(t.r1,i,t.b1)]-r[this.getIndex(t.r1,i,t.b0)]-r[this.getIndex(t.r0,i,t.b1)]+r[this.getIndex(t.r0,i,t.b0)];case Wi:return r[this.getIndex(t.r1,t.g1,i)]-r[this.getIndex(t.r1,t.g0,i)]-r[this.getIndex(t.r0,t.g1,i)]+r[this.getIndex(t.r0,t.g0,i)];default:throw new Error("unexpected direction $direction")}}getIndex(t,e,i){return(t<<10)+(t<<6)+t+(e<<5)+e+i}}class Xi{constructor(t=0,e=0,i=0,r=0,o=0,n=0,s=0){this.r0=t,this.r1=e,this.g0=i,this.g1=r,this.b0=o,this.b1=n,this.vol=s}}class Ji{constructor(t,e){this.requestedCount=t,this.resultCount=e}}class Qi{constructor(t,e){this.cutLocation=t,this.maximum=e}}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki{static quantize(t,e){const i=(new Yi).quantize(t,e);return Bi.quantize(t,i,e)}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi{constructor(t){this.sourceColorArgb=t.sourceColorArgb,this.variant=t.variant,this.contrastLevel=t.contrastLevel,this.isDark=t.isDark,this.sourceColorHct=Ai.fromInt(t.sourceColorArgb),this.primaryPalette=t.primaryPalette,this.secondaryPalette=t.secondaryPalette,this.tertiaryPalette=t.tertiaryPalette,this.neutralPalette=t.neutralPalette,this.neutralVariantPalette=t.neutralVariantPalette,this.errorPalette=Di.fromHueAndChroma(25,84)}static getRotatedHue(t,e,i){const r=t.hue;if(e.length!==i.length)throw new Error(`mismatch between hue length ${e.length} & rotations ${i.length}`);if(1===i.length)return ii(t.hue+i[0]);const o=e.length;for(let t=0;t<=o-2;t++){const o=e[t],n=e[t+1];if(o<r&&r<n)return ii(r+i[t])}return r}}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr{get primary(){return this.props.primary}get onPrimary(){return this.props.onPrimary}get primaryContainer(){return this.props.primaryContainer}get onPrimaryContainer(){return this.props.onPrimaryContainer}get secondary(){return this.props.secondary}get onSecondary(){return this.props.onSecondary}get secondaryContainer(){return this.props.secondaryContainer}get onSecondaryContainer(){return this.props.onSecondaryContainer}get tertiary(){return this.props.tertiary}get onTertiary(){return this.props.onTertiary}get tertiaryContainer(){return this.props.tertiaryContainer}get onTertiaryContainer(){return this.props.onTertiaryContainer}get error(){return this.props.error}get onError(){return this.props.onError}get errorContainer(){return this.props.errorContainer}get onErrorContainer(){return this.props.onErrorContainer}get background(){return this.props.background}get onBackground(){return this.props.onBackground}get surface(){return this.props.surface}get onSurface(){return this.props.onSurface}get surfaceVariant(){return this.props.surfaceVariant}get onSurfaceVariant(){return this.props.onSurfaceVariant}get outline(){return this.props.outline}get outlineVariant(){return this.props.outlineVariant}get shadow(){return this.props.shadow}get scrim(){return this.props.scrim}get inverseSurface(){return this.props.inverseSurface}get inverseOnSurface(){return this.props.inverseOnSurface}get inversePrimary(){return this.props.inversePrimary}static light(t){return tr.lightFromCorePalette(zi.of(t))}static dark(t){return tr.darkFromCorePalette(zi.of(t))}static lightContent(t){return tr.lightFromCorePalette(zi.contentOf(t))}static darkContent(t){return tr.darkFromCorePalette(zi.contentOf(t))}static lightFromCorePalette(t){return new tr({primary:t.a1.tone(40),onPrimary:t.a1.tone(100),primaryContainer:t.a1.tone(90),onPrimaryContainer:t.a1.tone(10),secondary:t.a2.tone(40),onSecondary:t.a2.tone(100),secondaryContainer:t.a2.tone(90),onSecondaryContainer:t.a2.tone(10),tertiary:t.a3.tone(40),onTertiary:t.a3.tone(100),tertiaryContainer:t.a3.tone(90),onTertiaryContainer:t.a3.tone(10),error:t.error.tone(40),onError:t.error.tone(100),errorContainer:t.error.tone(90),onErrorContainer:t.error.tone(10),background:t.n1.tone(99),onBackground:t.n1.tone(10),surface:t.n1.tone(99),onSurface:t.n1.tone(10),surfaceVariant:t.n2.tone(90),onSurfaceVariant:t.n2.tone(30),outline:t.n2.tone(50),outlineVariant:t.n2.tone(80),shadow:t.n1.tone(0),scrim:t.n1.tone(0),inverseSurface:t.n1.tone(20),inverseOnSurface:t.n1.tone(95),inversePrimary:t.a1.tone(80)})}static darkFromCorePalette(t){return new tr({primary:t.a1.tone(80),onPrimary:t.a1.tone(20),primaryContainer:t.a1.tone(30),onPrimaryContainer:t.a1.tone(90),secondary:t.a2.tone(80),onSecondary:t.a2.tone(20),secondaryContainer:t.a2.tone(30),onSecondaryContainer:t.a2.tone(90),tertiary:t.a3.tone(80),onTertiary:t.a3.tone(20),tertiaryContainer:t.a3.tone(30),onTertiaryContainer:t.a3.tone(90),error:t.error.tone(80),onError:t.error.tone(20),errorContainer:t.error.tone(30),onErrorContainer:t.error.tone(80),background:t.n1.tone(10),onBackground:t.n1.tone(90),surface:t.n1.tone(10),onSurface:t.n1.tone(90),surfaceVariant:t.n2.tone(30),onSurfaceVariant:t.n2.tone(80),outline:t.n2.tone(60),outlineVariant:t.n2.tone(30),shadow:t.n1.tone(0),scrim:t.n1.tone(0),inverseSurface:t.n1.tone(90),inverseOnSurface:t.n1.tone(20),inversePrimary:t.a1.tone(40)})}constructor(t){this.props=t}toJSON(){return{...this.props}}}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class er{constructor(t){this.input=t,this.hctsByTempCache=[],this.hctsByHueCache=[],this.tempsByHctCache=new Map,this.inputRelativeTemperatureCache=-1,this.complementCache=null}get hctsByTemp(){if(this.hctsByTempCache.length>0)return this.hctsByTempCache;const t=this.hctsByHue.concat([this.input]),e=this.tempsByHct;return t.sort(((t,i)=>e.get(t)-e.get(i))),this.hctsByTempCache=t,t}get warmest(){return this.hctsByTemp[this.hctsByTemp.length-1]}get coldest(){return this.hctsByTemp[0]}analogous(t=5,e=12){const i=Math.round(this.input.hue),r=this.hctsByHue[i];let o=this.relativeTemperature(r);const n=[r];let s=0;for(let t=0;t<360;t++){const e=ei(i+t),r=this.hctsByHue[e],n=this.relativeTemperature(r),a=Math.abs(n-o);o=n,s+=a}let a=1;const l=s/e;let c=0;for(o=this.relativeTemperature(r);n.length<e;){const t=ei(i+a),r=this.hctsByHue[t],s=this.relativeTemperature(r);c+=Math.abs(s-o);let d=c>=n.length*l,h=1;for(;d&&n.length<e;){n.push(r);d=c>=(n.length+h)*l,h++}if(o=s,a++,a>360){for(;n.length<e;)n.push(r);break}}const d=[this.input],h=Math.floor((t-1)/2);for(let t=1;t<h+1;t++){let e=0-t;for(;e<0;)e=n.length+e;e>=n.length&&(e%=n.length),d.splice(0,0,n[e])}const u=t-h-1;for(let t=1;t<u+1;t++){let e=t;for(;e<0;)e=n.length+e;e>=n.length&&(e%=n.length),d.push(n[e])}return d}get complement(){if(null!=this.complementCache)return this.complementCache;const t=this.coldest.hue,e=this.tempsByHct.get(this.coldest),i=this.warmest.hue,r=this.tempsByHct.get(this.warmest)-e,o=er.isBetween(this.input.hue,t,i),n=o?i:t,s=o?t:i;let a=1e3,l=this.hctsByHue[Math.round(this.input.hue)];const c=1-this.inputRelativeTemperature;for(let t=0;t<=360;t+=1){const i=ii(n+1*t);if(!er.isBetween(i,n,s))continue;const o=this.hctsByHue[Math.round(i)],d=(this.tempsByHct.get(o)-e)/r,h=Math.abs(c-d);h<a&&(a=h,l=o)}return this.complementCache=l,this.complementCache}relativeTemperature(t){const e=this.tempsByHct.get(this.warmest)-this.tempsByHct.get(this.coldest),i=this.tempsByHct.get(t)-this.tempsByHct.get(this.coldest);return 0===e?.5:i/e}get inputRelativeTemperature(){return this.inputRelativeTemperatureCache>=0||(this.inputRelativeTemperatureCache=this.relativeTemperature(this.input)),this.inputRelativeTemperatureCache}get tempsByHct(){if(this.tempsByHctCache.size>0)return this.tempsByHctCache;const t=this.hctsByHue.concat([this.input]),e=new Map;for(const i of t)e.set(i,er.rawTemperature(i));return this.tempsByHctCache=e,e}get hctsByHue(){if(this.hctsByHueCache.length>0)return this.hctsByHueCache;const t=[];for(let e=0;e<=360;e+=1){const i=Ai.from(e,this.input.chroma,this.input.tone);t.push(i)}return this.hctsByHueCache=t,this.hctsByHueCache}static isBetween(t,e,i){return e<i?e<=t&&t<=i:e<=t||t<=i}static rawTemperature(t){const e=fi(t.toInt()),i=ii(180*Math.atan2(e[2],e[1])/Math.PI),r=Math.sqrt(e[1]*e[1]+e[2]*e[2]);return.02*Math.pow(r,1.07)*Math.cos(ii(i-50)*Math.PI/180)-.5}}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir extends Zi{constructor(t,e,i){super({sourceColorArgb:t.toInt(),variant:Ii.CONTENT,contrastLevel:i,isDark:e,primaryPalette:Di.fromHueAndChroma(t.hue,t.chroma),secondaryPalette:Di.fromHueAndChroma(t.hue,Math.max(t.chroma-32,.5*t.chroma)),tertiaryPalette:Di.fromInt(Pi.fixIfDisliked(new er(t).analogous(3,6)[2]).toInt()),neutralPalette:Di.fromHueAndChroma(t.hue,t.chroma/8),neutralVariantPalette:Di.fromHueAndChroma(t.hue,t.chroma/8+4)})}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr extends Zi{constructor(t,e,i){super({sourceColorArgb:t.toInt(),variant:Ii.EXPRESSIVE,contrastLevel:i,isDark:e,primaryPalette:Di.fromHueAndChroma(ii(t.hue+240),40),secondaryPalette:Di.fromHueAndChroma(Zi.getRotatedHue(t,rr.hues,rr.secondaryRotations),24),tertiaryPalette:Di.fromHueAndChroma(Zi.getRotatedHue(t,rr.hues,rr.tertiaryRotations),32),neutralPalette:Di.fromHueAndChroma(t.hue+15,8),neutralVariantPalette:Di.fromHueAndChroma(t.hue+15,12)})}}rr.hues=[0,21,51,121,151,191,271,321,360],rr.secondaryRotations=[45,95,45,20,45,90,45,45,45],rr.tertiaryRotations=[120,120,20,45,20,15,20,120,120];
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class or extends Zi{constructor(t,e,i){super({sourceColorArgb:t.toInt(),variant:Ii.FIDELITY,contrastLevel:i,isDark:e,primaryPalette:Di.fromHueAndChroma(t.hue,t.chroma),secondaryPalette:Di.fromHueAndChroma(t.hue,Math.max(t.chroma-32,.5*t.chroma)),tertiaryPalette:Di.fromInt(Pi.fixIfDisliked(new er(t).complement).toInt()),neutralPalette:Di.fromHueAndChroma(t.hue,t.chroma/8),neutralVariantPalette:Di.fromHueAndChroma(t.hue,t.chroma/8+4)})}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nr extends Zi{constructor(t,e,i){super({sourceColorArgb:t.toInt(),variant:Ii.MONOCHROME,contrastLevel:i,isDark:e,primaryPalette:Di.fromHueAndChroma(t.hue,0),secondaryPalette:Di.fromHueAndChroma(t.hue,0),tertiaryPalette:Di.fromHueAndChroma(t.hue,0),neutralPalette:Di.fromHueAndChroma(t.hue,0),neutralVariantPalette:Di.fromHueAndChroma(t.hue,0)})}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr extends Zi{constructor(t,e,i){super({sourceColorArgb:t.toInt(),variant:Ii.NEUTRAL,contrastLevel:i,isDark:e,primaryPalette:Di.fromHueAndChroma(t.hue,12),secondaryPalette:Di.fromHueAndChroma(t.hue,8),tertiaryPalette:Di.fromHueAndChroma(t.hue,16),neutralPalette:Di.fromHueAndChroma(t.hue,2),neutralVariantPalette:Di.fromHueAndChroma(t.hue,2)})}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ar extends Zi{constructor(t,e,i){super({sourceColorArgb:t.toInt(),variant:Ii.TONAL_SPOT,contrastLevel:i,isDark:e,primaryPalette:Di.fromHueAndChroma(t.hue,36),secondaryPalette:Di.fromHueAndChroma(t.hue,16),tertiaryPalette:Di.fromHueAndChroma(ii(t.hue+60),24),neutralPalette:Di.fromHueAndChroma(t.hue,6),neutralVariantPalette:Di.fromHueAndChroma(t.hue,8)})}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr extends Zi{constructor(t,e,i){super({sourceColorArgb:t.toInt(),variant:Ii.VIBRANT,contrastLevel:i,isDark:e,primaryPalette:Di.fromHueAndChroma(t.hue,200),secondaryPalette:Di.fromHueAndChroma(Zi.getRotatedHue(t,lr.hues,lr.secondaryRotations),24),tertiaryPalette:Di.fromHueAndChroma(Zi.getRotatedHue(t,lr.hues,lr.tertiaryRotations),32),neutralPalette:Di.fromHueAndChroma(t.hue,10),neutralVariantPalette:Di.fromHueAndChroma(t.hue,12)})}}lr.hues=[0,41,61,101,131,181,251,301,360],lr.secondaryRotations=[18,15,10,12,15,18,15,12,12],lr.tertiaryRotations=[35,30,20,25,30,35,30,25,25];
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const cr={desired:4,fallbackColorARGB:4282549748,filter:!0};function dr(t,e){return t.score>e.score?-1:t.score<e.score?1:0}class hr{constructor(){}static score(t,e){const{desired:i,fallbackColorARGB:r,filter:o}={...cr,...e},n=[],s=new Array(360).fill(0);let a=0;for(const[e,i]of t.entries()){const t=Ai.fromInt(e);n.push(t);s[Math.floor(t.hue)]+=i,a+=i}const l=new Array(360).fill(0);for(let t=0;t<360;t++){const e=s[t]/a;for(let i=t-14;i<t+16;i++){l[ei(i)]+=e}}const c=new Array;for(const t of n){const e=l[ei(Math.round(t.hue))];if(o&&(t.chroma<hr.CUTOFF_CHROMA||e<=hr.CUTOFF_EXCITED_PROPORTION))continue;const i=100*e*hr.WEIGHT_PROPORTION,r=t.chroma<hr.TARGET_CHROMA?hr.WEIGHT_CHROMA_BELOW:hr.WEIGHT_CHROMA_ABOVE,n=i+(t.chroma-hr.TARGET_CHROMA)*r;c.push({hct:t,score:n})}c.sort(dr);const d=[];for(let t=90;t>=15;t--){d.length=0;for(const{hct:e}of c){if(d.find((i=>ri(e.hue,i.hue)<t))||d.push(e),d.length>=i)break}if(d.length>=i)break}const h=[];0===d.length&&h.push(r);for(const t of d)h.push(t.toInt());return h}}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function ur(t){const e=di(t),i=hi(t),r=ui(t),o=[e.toString(16),i.toString(16),r.toString(16)];for(const[t,e]of o.entries())1===e.length&&(o[t]="0"+e);return"#"+o.join("")}function pr(t){const e=3===(t=t.replace("#","")).length,i=6===t.length,r=8===t.length;if(!e&&!i&&!r)throw new Error("unexpected hex "+t);let o=0,n=0,s=0;return e?(o=fr(t.slice(0,1).repeat(2)),n=fr(t.slice(1,2).repeat(2)),s=fr(t.slice(2,3).repeat(2))):i?(o=fr(t.slice(0,2)),n=fr(t.slice(2,4)),s=fr(t.slice(4,6))):r&&(o=fr(t.slice(2,4)),n=fr(t.slice(4,6)),s=fr(t.slice(6,8))),(255<<24|(255&o)<<16|(255&n)<<8|255&s)>>>0}function fr(t){return parseInt(t,16)}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mr(t,e=[]){const i=zi.of(t);return{source:t,schemes:{light:tr.light(t),dark:tr.dark(t)},palettes:{primary:i.a1,secondary:i.a2,tertiary:i.a3,neutral:i.n1,neutralVariant:i.n2,error:i.error},customColors:e.map((e=>function(t,e){let i=e.value;const r=i,o=t;e.blend&&(i=Si.harmonize(r,o));const n=zi.of(i),s=n.a1;return{color:e,value:i,light:{color:s.tone(40),onColor:s.tone(100),colorContainer:s.tone(90),onColorContainer:s.tone(10)},dark:{color:s.tone(80),onColor:s.tone(20),colorContainer:s.tone(30),onColorContainer:s.tone(90)}}}(t,e)))}}function gr(t,e,i=""){for(const[r,o]of Object.entries(e.toJSON())){const e=r.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),n=ur(o);t.style.setProperty(`--md-sys-color-${e}${i}`,n)}}
/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */hr.TARGET_CHROMA=48,hr.WEIGHT_PROPORTION=.7,hr.WEIGHT_CHROMA_ABOVE=.3,hr.WEIGHT_CHROMA_BELOW=.1,hr.CUTOFF_CHROMA=5,hr.CUTOFF_EXCITED_PROPORTION=.01;const vr="important",br=" !"+vr,yr=Gt(class extends Ht{constructor(t){if(super(t),t.type!==Bt||"style"!==t.name||t.strings?.length>2)throw Error("The `styleMap` directive must be used in the `style` attribute and must be the only part in the attribute.")}render(t){return Object.keys(t).reduce(((e,i)=>{const r=t[i];return null==r?e:e+`${i=i.includes("-")?i:i.replace(/(?:^(webkit|moz|ms|o)|)(?=[A-Z])/g,"-$&").toLowerCase()}:${r};`}),"")}update(t,[e]){const{style:i}=t.element;if(void 0===this.ft)return this.ft=new Set(Object.keys(e)),this.render(e);for(const t of this.ft)null==e[t]&&(this.ft.delete(t),t.includes("-")?i.removeProperty(t):i[t]=null);for(const t in e){const r=e[t];if(null!=r){this.ft.add(t);const e="string"==typeof r&&r.endsWith(br);t.includes("-")||e?i.setProperty(t,e?r.slice(0,-11):r,e?vr:""):i[t]=r}}return V}});
/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const xr=function(t,e){return new CustomEvent("close-menu",{bubbles:!0,composed:!0,detail:{initiator:t,reason:e,itemPath:[t]}})},wr={SPACE:"Space",ENTER:"Enter"},_r="click-selection",kr="keydown",Cr={ESCAPE:"Escape",SPACE:wr.SPACE,ENTER:wr.ENTER};function Ar(t){return Object.values(Cr).some((e=>e===t))}function Sr(t,e){const i=new Event("md-contains",{bubbles:!0,composed:!0});let r=[];const o=t=>{r=t.composedPath()};e.addEventListener("md-contains",o),t.dispatchEvent(i),e.removeEventListener("md-contains",o);return r.length>0}const Tr="none",Pr="list-root",Er="first-item",Ir="last-item",Lr="end-start",Or="start-start";
/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Rr{constructor(t,e){this.host=t,this.getProperties=e,this.surfaceStylesInternal={display:"none"},this.lastValues={isOpen:!1},this.host.addController(this)}get surfaceStyles(){return this.surfaceStylesInternal}async position(){const{surfaceEl:t,anchorEl:e,anchorCorner:i,surfaceCorner:r,positioning:o,xOffset:n,yOffset:s,repositionStrategy:a}=this.getProperties(),l=i.toLowerCase().trim(),c=r.toLowerCase().trim();if(!t||!e)return;const d=window.innerWidth,h=window.innerHeight,u=document.createElement("div");u.style.opacity="0",u.style.position="fixed",u.style.display="block",u.style.inset="0",document.body.appendChild(u);const p=u.getBoundingClientRect();u.remove();const f=window.innerHeight-p.bottom,m=window.innerWidth-p.right;this.surfaceStylesInternal={display:"block",opacity:"0"},this.host.requestUpdate(),await this.host.updateComplete,t.popover&&t.isConnected&&t.showPopover();const g=t.getSurfacePositionClientRect?t.getSurfacePositionClientRect():t.getBoundingClientRect(),v=e.getSurfacePositionClientRect?e.getSurfacePositionClientRect():e.getBoundingClientRect(),[b,y]=c.split("-"),[x,w]=l.split("-"),_="ltr"===getComputedStyle(t).direction;let{blockInset:k,blockOutOfBoundsCorrection:C,surfaceBlockProperty:A}=this.calculateBlock({surfaceRect:g,anchorRect:v,anchorBlock:x,surfaceBlock:b,yOffset:s,positioning:o,windowInnerHeight:h,blockScrollbarHeight:f});if(C){const t="start"===b?"end":"start",e="start"===x?"end":"start",i=this.calculateBlock({surfaceRect:g,anchorRect:v,anchorBlock:e,surfaceBlock:t,yOffset:s,positioning:o,windowInnerHeight:h,blockScrollbarHeight:f});C>i.blockOutOfBoundsCorrection&&(k=i.blockInset,C=i.blockOutOfBoundsCorrection,A=i.surfaceBlockProperty)}let{inlineInset:S,inlineOutOfBoundsCorrection:T,surfaceInlineProperty:P}=this.calculateInline({surfaceRect:g,anchorRect:v,anchorInline:w,surfaceInline:y,xOffset:n,positioning:o,isLTR:_,windowInnerWidth:d,inlineScrollbarWidth:m});if(T){const t="start"===y?"end":"start",e="start"===w?"end":"start",i=this.calculateInline({surfaceRect:g,anchorRect:v,anchorInline:e,surfaceInline:t,xOffset:n,positioning:o,isLTR:_,windowInnerWidth:d,inlineScrollbarWidth:m});Math.abs(T)>Math.abs(i.inlineOutOfBoundsCorrection)&&(S=i.inlineInset,T=i.inlineOutOfBoundsCorrection,P=i.surfaceInlineProperty)}"move"===a&&(k-=C,S-=T),this.surfaceStylesInternal={display:"block",opacity:"1",[A]:`${k}px`,[P]:`${S}px`},"resize"===a&&(C&&(this.surfaceStylesInternal.height=g.height-C+"px"),T&&(this.surfaceStylesInternal.width=g.width-T+"px")),this.host.requestUpdate()}calculateBlock(t){const{surfaceRect:e,anchorRect:i,anchorBlock:r,surfaceBlock:o,yOffset:n,positioning:s,windowInnerHeight:a,blockScrollbarHeight:l}=t,c="fixed"===s||"document"===s?1:0,d="document"===s?1:0,h="start"===o?1:0,u="end"===o?1:0,p=(r!==o?1:0)*i.height+n,f=h*i.top+u*(a-i.bottom-l);return{blockInset:c*f+d*(h*window.scrollY-u*window.scrollY)+p,blockOutOfBoundsCorrection:Math.abs(Math.min(0,a-f-p-e.height)),surfaceBlockProperty:"start"===o?"inset-block-start":"inset-block-end"}}calculateInline(t){const{isLTR:e,surfaceInline:i,anchorInline:r,anchorRect:o,surfaceRect:n,xOffset:s,positioning:a,windowInnerWidth:l,inlineScrollbarWidth:c}=t,d="fixed"===a||"document"===a?1:0,h="document"===a?1:0,u=e?1:0,p=e?0:1,f="start"===i?1:0,m="end"===i?1:0,g=(r!==i?1:0)*o.width+s,v=u*(f*o.left+m*(l-o.right-c))+p*(f*(l-o.right-c)+m*o.left);let b="start"===i?"inset-inline-start":"inset-inline-end";return"document"!==a&&"fixed"!==a||(b="start"===i&&e||"end"===i&&!e?"left":"right"),{inlineInset:d*v+g+h*(u*(f*window.scrollX-m*window.scrollX)+p*(m*window.scrollX-f*window.scrollX)),inlineOutOfBoundsCorrection:Math.abs(Math.min(0,l-v-g-n.width)),surfaceInlineProperty:b}}hostUpdate(){this.onUpdate()}hostUpdated(){this.onUpdate()}async onUpdate(){const t=this.getProperties();let e=!1;for(const[i,r]of Object.entries(t))if(e=e||r!==this.lastValues[i],e)break;const i=this.lastValues.isOpen!==t.isOpen,r=!!t.anchorEl,o=!!t.surfaceEl;e&&r&&o&&(this.lastValues.isOpen=t.isOpen,t.isOpen?(this.lastValues=t,await this.position(),t.onOpen()):i&&(await t.beforeClose(),this.close(),t.onClose()))}close(){this.surfaceStylesInternal={display:"none"},this.host.requestUpdate();const t=this.getProperties().surfaceEl;t?.popover&&t?.isConnected&&t.hidePopover()}}
/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const $r=0,Mr=1,Nr=2;class Dr{constructor(t){this.getProperties=t,this.typeaheadRecords=[],this.typaheadBuffer="",this.cancelTypeaheadTimeout=0,this.isTypingAhead=!1,this.lastActiveRecord=null,this.onKeydown=t=>{this.isTypingAhead?this.typeahead(t):this.beginTypeahead(t)},this.endTypeahead=()=>{this.isTypingAhead=!1,this.typaheadBuffer="",this.typeaheadRecords=[]}}get items(){return this.getProperties().getItems()}get active(){return this.getProperties().active}beginTypeahead(t){this.active&&("Space"===t.code||"Enter"===t.code||t.code.startsWith("Arrow")||"Escape"===t.code||(this.isTypingAhead=!0,this.typeaheadRecords=this.items.map(((t,e)=>[e,t,t.typeaheadText.trim().toLowerCase()])),this.lastActiveRecord=this.typeaheadRecords.find((t=>0===t[Mr].tabIndex))??null,this.lastActiveRecord&&(this.lastActiveRecord[Mr].tabIndex=-1),this.typeahead(t)))}typeahead(t){if(t.defaultPrevented)return;if(clearTimeout(this.cancelTypeaheadTimeout),"Enter"===t.code||t.code.startsWith("Arrow")||"Escape"===t.code)return this.endTypeahead(),void(this.lastActiveRecord&&(this.lastActiveRecord[Mr].tabIndex=-1));"Space"===t.code&&t.preventDefault(),this.cancelTypeaheadTimeout=setTimeout(this.endTypeahead,this.getProperties().typeaheadBufferTime),this.typaheadBuffer+=t.key.toLowerCase();const e=this.lastActiveRecord?this.lastActiveRecord[$r]:-1,i=this.typeaheadRecords.length,r=t=>(t[$r]+i-e)%i,o=this.typeaheadRecords.filter((t=>!t[Mr].disabled&&t[Nr].startsWith(this.typaheadBuffer))).sort(((t,e)=>r(t)-r(e)));if(0===o.length)return clearTimeout(this.cancelTypeaheadTimeout),this.lastActiveRecord&&(this.lastActiveRecord[Mr].tabIndex=-1),void this.endTypeahead();const n=1===this.typaheadBuffer.length;let s;s=this.lastActiveRecord===o[0]&&n?o[1]??o[0]:o[0],this.lastActiveRecord&&(this.lastActiveRecord[Mr].tabIndex=-1),this.lastActiveRecord=s,s[Mr].tabIndex=0,s[Mr].focus()}}
/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const zr=new Set([Oe.ArrowDown,Oe.ArrowUp,Oe.Home,Oe.End]),Fr=new Set([Oe.ArrowLeft,Oe.ArrowRight,...zr]);class Br extends nt{get openDirection(){return"start"===this.menuCorner.split("-")[0]?"DOWN":"UP"}get anchorElement(){return this.anchor?this.getRootNode().querySelector(`#${this.anchor}`):this.currentAnchorElement}set anchorElement(t){this.currentAnchorElement=t,this.requestUpdate("anchorElement")}constructor(){super(),this.anchor="",this.positioning="absolute",this.quick=!1,this.hasOverflow=!1,this.open=!1,this.xOffset=0,this.yOffset=0,this.typeaheadDelay=200,this.anchorCorner=Lr,this.menuCorner=Or,this.stayOpenOnOutsideClick=!1,this.stayOpenOnFocusout=!1,this.skipRestoreFocus=!1,this.defaultFocus=Er,this.noNavigationWrap=!1,this.typeaheadActive=!0,this.isSubmenu=!1,this.pointerPath=[],this.isRepositioning=!1,this.openCloseAnimationSignal=function(){let t=null;return{start:()=>(t?.abort(),t=new AbortController,t.signal),finish(){t=null}}}
/**
 * @license
 * Copyright 2022 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */(),this.listController=new Re({isItem:t=>t.hasAttribute("md-menu-item"),getPossibleItems:()=>this.slotItems,isRtl:()=>"rtl"===getComputedStyle(this).direction,deactivateItem:t=>{t.selected=!1,t.tabIndex=-1},activateItem:t=>{t.selected=!0,t.tabIndex=0},isNavigableKey:t=>{if(!this.isSubmenu)return Fr.has(t);return t===("rtl"===getComputedStyle(this).direction?Oe.ArrowLeft:Oe.ArrowRight)||zr.has(t)},wrapNavigation:()=>!this.noNavigationWrap}),this.lastFocusedElement=null,this.typeaheadController=new Dr((()=>({getItems:()=>this.items,typeaheadBufferTime:this.typeaheadDelay,active:this.typeaheadActive}))),this.currentAnchorElement=null,this.internals=this.attachInternals(),this.menuPositionController=new Rr(this,(()=>({anchorCorner:this.anchorCorner,surfaceCorner:this.menuCorner,surfaceEl:this.surfaceEl,anchorEl:this.anchorElement,positioning:"popover"===this.positioning?"document":this.positioning,isOpen:this.open,xOffset:this.xOffset,yOffset:this.yOffset,onOpen:this.onOpened,beforeClose:this.beforeClose,onClose:this.onClosed,repositionStrategy:this.hasOverflow&&"popover"!==this.positioning?"move":"resize"}))),this.onWindowResize=()=>{this.isRepositioning||"document"!==this.positioning&&"fixed"!==this.positioning&&"popover"!==this.positioning||(this.isRepositioning=!0,this.reposition(),this.isRepositioning=!1)},this.handleFocusout=async t=>{const e=this.anchorElement;if(this.stayOpenOnFocusout||!this.open||this.pointerPath.includes(e))return;if(t.relatedTarget){if(Sr(t.relatedTarget,this)||0!==this.pointerPath.length&&Sr(t.relatedTarget,e))return}else if(this.pointerPath.includes(this))return;const i=this.skipRestoreFocus;this.skipRestoreFocus=!0,this.close(),await this.updateComplete,this.skipRestoreFocus=i},this.onOpened=async()=>{this.lastFocusedElement=function(t=document){let e=t.activeElement;for(;e&&e?.shadowRoot?.activeElement;)e=e.shadowRoot.activeElement;return e}();const t=this.items,e=ke(t);e&&this.defaultFocus!==Tr&&(e.item.tabIndex=-1);let i=!this.quick;switch(this.quick?this.dispatchEvent(new Event("opening")):i=!!await this.animateOpen(),this.defaultFocus){case Er:const e=Ce(t);e&&(e.tabIndex=0,e.focus(),await e.updateComplete);break;case Ir:const i=Ae(t);i&&(i.tabIndex=0,i.focus(),await i.updateComplete);break;case Pr:this.focus()}i||this.dispatchEvent(new Event("opened"))},this.beforeClose=async()=>{this.open=!1,this.skipRestoreFocus||this.lastFocusedElement?.focus?.(),this.quick||await this.animateClose()},this.onClosed=()=>{this.quick&&(this.dispatchEvent(new Event("closing")),this.dispatchEvent(new Event("closed")))},this.onWindowPointerdown=t=>{this.pointerPath=t.composedPath()},this.onDocumentClick=t=>{if(!this.open)return;const e=t.composedPath();this.stayOpenOnOutsideClick||e.includes(this)||e.includes(this.anchorElement)||(this.open=!1)},this.internals.role="menu",this.addEventListener("keydown",this.handleKeydown),this.addEventListener("keydown",this.captureKeydown,{capture:!0}),this.addEventListener("focusout",this.handleFocusout)}get items(){return this.listController.items}willUpdate(t){t.has("open")&&(this.open?this.removeAttribute("aria-hidden"):this.setAttribute("aria-hidden","true"))}update(t){t.has("open")&&(this.open?this.setUpGlobalEventListeners():this.cleanUpGlobalEventListeners()),t.has("positioning")&&"popover"===this.positioning&&!this.showPopover&&(this.positioning="fixed"),super.update(t)}connectedCallback(){super.connectedCallback(),this.open&&this.setUpGlobalEventListeners()}disconnectedCallback(){super.disconnectedCallback(),this.cleanUpGlobalEventListeners()}getBoundingClientRect(){return this.surfaceEl?this.surfaceEl.getBoundingClientRect():super.getBoundingClientRect()}getClientRects(){return this.surfaceEl?this.surfaceEl.getClientRects():super.getClientRects()}render(){return this.renderSurface()}renderSurface(){return U` <div class="menu ${qt(this.getSurfaceClasses())}" style="${yr(this.menuPositionController.surfaceStyles)}" popover="${"popover"===this.positioning?"manual":j}"> ${this.renderElevation()} <div class="items"> <div class="item-padding"> ${this.renderMenuItems()} </div> </div> </div> `}renderMenuItems(){return U`<slot @close-menu="${this.onCloseMenu}" @deactivate-items="${this.onDeactivateItems}" @request-activation="${this.onRequestActivation}" @deactivate-typeahead="${this.handleDeactivateTypeahead}" @activate-typeahead="${this.handleActivateTypeahead}" @stay-open-on-focusout="${this.handleStayOpenOnFocusout}" @close-on-focusout="${this.handleCloseOnFocusout}" @slotchange="${this.listController.onSlotchange}"></slot>`}renderElevation(){return U`<md-elevation part="elevation"></md-elevation>`}getSurfaceClasses(){return{open:this.open,fixed:"fixed"===this.positioning,"has-overflow":this.hasOverflow}}captureKeydown(t){t.target===this&&!t.defaultPrevented&&Ar(t.code)&&(t.preventDefault(),this.close()),this.typeaheadController.onKeydown(t)}async animateOpen(){const t=this.surfaceEl,e=this.slotEl;if(!t||!e)return!0;const i=this.openDirection;this.dispatchEvent(new Event("opening")),t.classList.toggle("animating",!0);const r=this.openCloseAnimationSignal.start(),o=t.offsetHeight,n="UP"===i,s=this.items,a=250/s.length,l=t.animate([{height:"0px"},{height:`${o}px`}],{duration:500,easing:Yt}),c=e.animate([{transform:n?`translateY(-${o}px)`:""},{transform:""}],{duration:500,easing:Yt}),d=t.animate([{opacity:0},{opacity:1}],50),h=[];for(let t=0;t<s.length;t++){const e=s[n?s.length-1-t:t],i=e.animate([{opacity:0},{opacity:1}],{duration:250,delay:a*t});e.classList.toggle("md-menu-hidden",!0),i.addEventListener("finish",(()=>{e.classList.toggle("md-menu-hidden",!1)})),h.push([e,i])}let u=t=>{};const p=new Promise((t=>{u=t}));return r.addEventListener("abort",(()=>{l.cancel(),c.cancel(),d.cancel(),h.forEach((([t,e])=>{t.classList.toggle("md-menu-hidden",!1),e.cancel()})),u(!0)})),l.addEventListener("finish",(()=>{t.classList.toggle("animating",!1),this.openCloseAnimationSignal.finish(),u(!1)})),await p}animateClose(){let t,e;const i=new Promise(((i,r)=>{t=i,e=r})),r=this.surfaceEl,o=this.slotEl;if(!r||!o)return e(),i;const n="UP"===this.openDirection;this.dispatchEvent(new Event("closing")),r.classList.toggle("animating",!0);const s=this.openCloseAnimationSignal.start(),a=r.offsetHeight,l=this.items,c=150,d=50/l.length,h=r.animate([{height:`${a}px`},{height:.35*a+"px"}],{duration:c,easing:Xt}),u=o.animate([{transform:""},{transform:n?`translateY(-${.65*a}px)`:""}],{duration:c,easing:Xt}),p=r.animate([{opacity:1},{opacity:0}],{duration:50,delay:100}),f=[];for(let t=0;t<l.length;t++){const e=l[n?t:l.length-1-t],i=e.animate([{opacity:1},{opacity:0}],{duration:50,delay:50+d*t});i.addEventListener("finish",(()=>{e.classList.toggle("md-menu-hidden",!0)})),f.push([e,i])}return s.addEventListener("abort",(()=>{h.cancel(),u.cancel(),p.cancel(),f.forEach((([t,e])=>{e.cancel(),t.classList.toggle("md-menu-hidden",!1)})),e()})),h.addEventListener("finish",(()=>{r.classList.toggle("animating",!1),f.forEach((([t])=>{t.classList.toggle("md-menu-hidden",!1)})),this.openCloseAnimationSignal.finish(),this.dispatchEvent(new Event("closed")),t(!0)})),i}handleKeydown(t){this.pointerPath=[],this.listController.handleKeydown(t)}setUpGlobalEventListeners(){document.addEventListener("click",this.onDocumentClick,{capture:!0}),window.addEventListener("pointerdown",this.onWindowPointerdown),document.addEventListener("resize",this.onWindowResize,{passive:!0}),window.addEventListener("resize",this.onWindowResize,{passive:!0})}cleanUpGlobalEventListeners(){document.removeEventListener("click",this.onDocumentClick,{capture:!0}),window.removeEventListener("pointerdown",this.onWindowPointerdown),document.removeEventListener("resize",this.onWindowResize),window.removeEventListener("resize",this.onWindowResize)}onCloseMenu(){this.close()}onDeactivateItems(t){t.stopPropagation(),this.listController.onDeactivateItems()}onRequestActivation(t){t.stopPropagation(),this.listController.onRequestActivation(t)}handleDeactivateTypeahead(t){t.stopPropagation(),this.typeaheadActive=!1}handleActivateTypeahead(t){t.stopPropagation(),this.typeaheadActive=!0}handleStayOpenOnFocusout(t){t.stopPropagation(),this.stayOpenOnFocusout=!0}handleCloseOnFocusout(t){t.stopPropagation(),this.stayOpenOnFocusout=!1}close(){this.open=!1;this.slotItems.forEach((t=>{t.close?.()}))}show(){this.open=!0}activateNextItem(){return this.listController.activateNextItem()??null}activatePreviousItem(){return this.listController.activatePreviousItem()??null}reposition(){this.open&&this.menuPositionController.position()}}bt([pt(".menu")],Br.prototype,"surfaceEl",void 0),bt([pt("slot")],Br.prototype,"slotEl",void 0),bt([dt()],Br.prototype,"anchor",void 0),bt([dt()],Br.prototype,"positioning",void 0),bt([dt({type:Boolean})],Br.prototype,"quick",void 0),bt([dt({type:Boolean,attribute:"has-overflow"})],Br.prototype,"hasOverflow",void 0),bt([dt({type:Boolean,reflect:!0})],Br.prototype,"open",void 0),bt([dt({type:Number,attribute:"x-offset"})],Br.prototype,"xOffset",void 0),bt([dt({type:Number,attribute:"y-offset"})],Br.prototype,"yOffset",void 0),bt([dt({type:Number,attribute:"typeahead-delay"})],Br.prototype,"typeaheadDelay",void 0),bt([dt({attribute:"anchor-corner"})],Br.prototype,"anchorCorner",void 0),bt([dt({attribute:"menu-corner"})],Br.prototype,"menuCorner",void 0),bt([dt({type:Boolean,attribute:"stay-open-on-outside-click"})],Br.prototype,"stayOpenOnOutsideClick",void 0),bt([dt({type:Boolean,attribute:"stay-open-on-focusout"})],Br.prototype,"stayOpenOnFocusout",void 0),bt([dt({type:Boolean,attribute:"skip-restore-focus"})],Br.prototype,"skipRestoreFocus",void 0),bt([dt({attribute:"default-focus"})],Br.prototype,"defaultFocus",void 0),bt([dt({type:Boolean,attribute:"no-navigation-wrap"})],Br.prototype,"noNavigationWrap",void 0),bt([mt({flatten:!0})],Br.prototype,"slotItems",void 0),bt([ht()],Br.prototype,"typeaheadActive",void 0);
/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
const Ur=n`:host{--md-elevation-level:var(--md-menu-container-elevation, 2);--md-elevation-shadow-color:var(--md-menu-container-shadow-color, var(--md-sys-color-shadow, #000));min-width:112px;color:unset;display:contents}md-focus-ring{--md-focus-ring-shape:var(--md-menu-container-shape, var(--md-sys-shape-corner-extra-small, 4px))}.menu{border-radius:var(--md-menu-container-shape,var(--md-sys-shape-corner-extra-small,4px));display:none;inset:auto;border:none;padding:0;overflow:visible;background-color:rgba(0,0,0,0);color:inherit;opacity:0;z-index:20;position:absolute;user-select:none;max-height:inherit;height:inherit;min-width:inherit;max-width:inherit;scrollbar-width:inherit}.menu::backdrop{display:none}.fixed{position:fixed}.items{display:block;list-style-type:none;margin:0;outline:0;box-sizing:border-box;background-color:var(--md-menu-container-color,var(--md-sys-color-surface-container,#f3edf7));height:inherit;max-height:inherit;overflow:auto;min-width:inherit;max-width:inherit;border-radius:inherit;scrollbar-width:inherit}.item-padding{padding-block:8px}.has-overflow:not([popover]) .items{overflow:visible}.animating .items,.has-overflow.animating .items{overflow:hidden}.has-overflow.animating .items{pointer-events:none}.animating ::slotted(.md-menu-hidden){opacity:0}slot{display:block;height:inherit;max-height:inherit}::slotted(:is(md-divider,[role=separator])){margin:8px 0}@media(forced-colors:active){.menu{border-style:solid;border-color:CanvasText;border-width:1px}}`
/**
 * @license
 * Copyright 2022 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */;let Vr=class extends Br{};Vr.styles=[Ur],Vr=bt([at("md-menu")],Vr);
/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const jr=t=>t??j
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */;
/**
@license
Copyright (c) 2016 The Polymer Community Authors. All rights reserved.
Copyright (c) 2020 Citizens Foundation Iceland / Citizens Foundation USA LitElement Port. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer community is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
var Gr=function(t,e,i,r){var o,n=arguments.length,s=n<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(n<3?o(s):n>3?o(e,i,s):o(e,i))||s);return n>3&&s&&Object.defineProperty(e,i,s),s};let Hr=class extends nt{constructor(){super(...arguments),this.src="",this.alt=void 0,this.crossorigin=void 0,this.preventLoad=!1,this.sizing=void 0,this.position="center",this.preload=!1,this.placeholder=void 0,this.fade=!1,this.loaded=!1,this.loading=!1,this.error=!1,this.width=void 0,this.height=void 0,this._resolvedSrc=void 0,this.ABS_URL=/(^\/[^\/])|(^#)|(^[\w-\d]*:)/,this.workingURL=void 0,this.resolveDoc=void 0}static get styles(){return[n`:host{display:inline-block;overflow:hidden;position:relative}#baseURIAnchor{display:none}#sizedImgDiv{position:absolute;top:0;right:0;bottom:0;left:0;display:none}#img{display:block;width:var(--yp-image-width,auto);height:var(--yp-image-height,auto)}:host([sizing]) #sizedImgDiv{display:block}:host([sizing]) #img{display:none}#placeholder{position:absolute;top:0;right:0;bottom:0;left:0;background-color:inherit;opacity:1}#placeholder.faded-out{transition:opacity .5s linear;opacity:0}`]}render(){return U` <a id="baseURIAnchor" href="#"></a> <div id="sizedImgDiv" role="img" ?hidden="${this._computeImgDivHidden}" aria-hidden="${this._computeImgDivARIAHidden}" aria-label="${jr(this._computeImgDivARIALabel)}"></div> <img id="img" alt="${this.alt?this.alt:""}" ?hidden="${this._computeImgHidden}" crossorigin="${jr(this.crossorigin)}" @load="${this._imgOnLoad}" @error="${this._imgOnError}"> <div id="placeholder" ?hidden="${this.computePlaceholderHidden}" class="${this._computePlaceholderClassName}"></div> `}$$(t){return this.shadowRoot?this.shadowRoot.querySelector(t):null}connectedCallback(){super.connectedCallback(),this._resolvedSrc=""}static async getThemeColorsFromImage(t){return await new Promise((async(e,i)=>{try{const i=await async function(t){try{const e=await new Promise(((e,i)=>{const r=document.createElement("canvas"),o=r.getContext("2d");if(!o)return i(new Error("Could not get canvas context"));r.width=t.width,r.height=t.height,o.drawImage(t,0,0),e(o.getImageData(0,0,t.width,t.height).data)})),i=[];for(let t=0;t<e.length;t+=4){const r=e[t],o=e[t+1],n=e[t+2];if(e[t+3]<255)continue;const s=li(r,o,n);i.push(s)}const r=Ki.quantize(i,128);return"#"+("000000"+(16777215&hr.score(r)[0]).toString(16)).slice(-6)}catch(e){return void console.error(`Error getting source color from image: ${e.message} ${t.src}`)}}(t);e(i)}catch(t){i(t)}}))}_imgOnLoad(){this.$$("img").src===this._resolveSrc(this.src)&&(this.loading=!1,this.loaded=!0,this.error=!1)}_imgOnError(){this.$$("img").src===this._resolveSrc(this.src)&&(this.$$("img").removeAttribute("src"),this.$$("#sizedImgDiv").style.backgroundImage="",this.loading=!1,this.loaded=!1,this.error=!0)}get computePlaceholderHidden(){return!this.preload||!this.fade&&!this.loading&&this.loaded}_computePlaceholderClassName(){return this.preload&&this.fade&&!this.loading&&this.loaded?"faded-out":""}get _computeImgDivHidden(){return!this.sizing}get _computeImgDivARIAHidden(){return""===this.alt}get _computeImgDivARIALabel(){if(null!==this.alt)return this.alt;if(""===this.src)return"";const t=this._resolveSrc(this.src);return t?t.replace(/[?|#].*/g,"").split("/").pop():""}get _computeImgHidden(){return!!this.sizing}_widthChanged(){this.width&&(this.style.width=this.width+"px")}_heightChanged(){this.style.height=this.height+"px"}_loadStateObserver(){const t=this._resolveSrc(this.src);t!==this._resolvedSrc&&(this._resolvedSrc="",this.$$("img").removeAttribute("src"),this.$$("#sizedImgDiv").style.backgroundImage="",""===this.src||this.preventLoad?(this.loading=!1,this.loaded=!1,this.error=!1):(this._resolvedSrc=t,this._resolvedSrc&&(this.$$("img").src=this._resolvedSrc),this.$$("#sizedImgDiv").style.backgroundImage='url("'+this._resolvedSrc+'")',this.loading=!0,this.loaded=!1,this.error=!1))}_placeholderChanged(){this.$$("#placeholder").style.backgroundImage=this.placeholder?'url("'+this.placeholder+'")':""}_transformChanged(){const t=this.$$("#sizedImgDiv").style,e=this.$$("#placeholder").style;this.sizing&&(t.backgroundSize=e.backgroundSize=this.sizing),t.backgroundPosition=e.backgroundPosition=this.sizing?this.position:"",t.backgroundRepeat=e.backgroundRepeat=this.sizing?"no-repeat":""}_resolveSrc(t){let e=this.resolveUrl(t,this.$$("#baseURIAnchor").href);return e&&e.length>=2&&"/"===e[0]&&"/"!==e[1]&&(e=(location.origin||location.protocol+"//"+location.host)+e),e}resolveUrl(t,e){if(t&&this.ABS_URL.test(t))return t;if("//"===t)return t;if(void 0===this.workingURL){this.workingURL=!1;try{const t=new URL("b","http://a");t.pathname="c%20d",this.workingURL="http://a/c%20d"===t.href}catch(t){}}if(e||(e=document.baseURI||window.location.href),this.workingURL)try{return new URL(t,e).href}catch(e){return t}}updated(t){if(super.updated(t),t.has("placeHolder")&&this._placeholderChanged(),t.has("loaded")&&this.loaded){const t=new CustomEvent("loaded",{detail:{imageYp:this}});this.dispatchEvent(t)}t.has("width")&&this._widthChanged(),t.has("height")&&this._widthChanged(),(t.has("sizing")||t.has("position"))&&this._transformChanged(),(t.has("src")||t.has("preventLoad"))&&this._loadStateObserver()}};Gr([dt({type:String})],Hr.prototype,"src",void 0),Gr([dt({type:String})],Hr.prototype,"alt",void 0),Gr([dt({type:String})],Hr.prototype,"crossorigin",void 0),Gr([dt({type:Boolean})],Hr.prototype,"preventLoad",void 0),Gr([dt({type:String,reflect:!0})],Hr.prototype,"sizing",void 0),Gr([dt({type:String})],Hr.prototype,"position",void 0),Gr([dt({type:Boolean})],Hr.prototype,"preload",void 0),Gr([dt({type:String})],Hr.prototype,"placeholder",void 0),Gr([dt({type:Boolean})],Hr.prototype,"fade",void 0),Gr([dt({type:Boolean})],Hr.prototype,"loaded",void 0),Gr([dt({type:Boolean})],Hr.prototype,"loading",void 0),Gr([dt({type:Boolean})],Hr.prototype,"error",void 0),Gr([dt({type:String})],Hr.prototype,"width",void 0),Gr([dt({type:String})],Hr.prototype,"height",void 0),Hr=Gr([at("yp-image")],Hr);const qr=n`
  display: -ms-flexbox;
  display: -webkit-flex;
  display: flex;
`;n`
  box-sizing: border-box;
`;const Wr=n`
  display: -ms-inline-flexbox;
  display: -webkit-inline-flex;
  display: inline-flex;
`,Yr=n`
  -ms-flex-direction: row;
  -webkit-flex-direction: row;
  flex-direction: row;
`,Xr=n`
  -ms-flex-direction: column;
  -webkit-flex-direction: column;
  flex-direction: column;
`,Jr=n`
  -ms-flex-wrap: wrap;
  -webkit-flex-wrap: wrap;
  flex-wrap: wrap;
`,Qr=n`
  -ms-flex-wrap: nowrap;
  -webkit-flex-wrap: nowrap;
  flex-wrap: nowrap;
`,Kr=n`
  -ms-flex: 1 1 0.000000001px;
  -webkit-flex: 1;
  flex: 1;
  -webkit-flex-basis: 0.000000001px;
  flex-basis: 0.000000001px;
`,Zr=n`
  -ms-flex: 1 1 auto;
  -webkit-flex: 1 1 auto;
  flex: 1 1 auto;
`,to=n`
  -ms-flex: 1 1 auto;
  -webkit-flex: 1 1 auto;
  flex: 1 1 auto;
`,eo=n`
  display: none !important;
`,io=n`
  -ms-flex: 2;
  -webkit-flex: 2;
  flex: 2;
`,ro=n`
  -ms-flex: 3;
  -webkit-flex: 3;
  flex: 3;
`,oo=n`
  -ms-flex: 4;
  -webkit-flex: 4;
  flex: 4;
`,no=n`
  -ms-flex: 5;
  -webkit-flex: 5;
  flex: 5;
`,so=n`
  -ms-flex: 6;
  -webkit-flex: 6;
  flex: 6;
`,ao=n`
  -ms-flex: 7;
  -webkit-flex: 7;
  flex: 7;
`,lo=n`
  -ms-flex: 8;
  -webkit-flex: 8;
  flex: 8;
`,co=n`
  -ms-flex: 9;
  -webkit-flex: 9;
  flex: 9;
`,ho=n`
  -ms-flex: 10;
  -webkit-flex: 10;
  flex: 10;
`,uo=n`
  -ms-flex: 11;
  -webkit-flex: 11;
  flex: 11;
`,po=n`
  -ms-flex: 12;
  -webkit-flex: 12;
  flex: 12;
`,fo=n`
  -ms-flex-direction: row-reverse;
  -webkit-flex-direction: row-reverse;
  flex-direction: row-reverse;
`,mo=n`
  -ms-flex-direction: column-reverse;
  -webkit-flex-direction: column-reverse;
  flex-direction: column-reverse;
`,go=n`
  -ms-flex-wrap: wrap-reverse;
  -webkit-flex-wrap: wrap-reverse;
  flex-wrap: wrap-reverse;
`,vo=n`
  display: block;
`,bo=n`
  visibility: hidden !important;
`,yo=n`
  position: relative;
`,xo=n`
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
`,wo=n`
  -webkit-overflow-scrolling: touch;
  overflow: auto;
`,_o=n`
  position: fixed;
`,ko=n`
  top: 0;
  left: 0;
  right: 0;
`,Co=n`
  top: 0;
  right: 0;
  bottom: 0;
`,Ao=n`
  top: 0;
  bottom: 0;
  left: 0;
`,So=n`
  right: 0;
  bottom: 0;
  left: 0;
`,To=n`
  -ms-flex-align: start;
  -webkit-align-items: flex-start;
  align-items: flex-start;
`,Po=n`
  -ms-flex-align: center;
  -webkit-align-items: center;
  align-items: center;
`,Eo=n`
  -ms-flex-align: end;
  -webkit-align-items: flex-end;
  align-items: flex-end;
`,Io=n`
  -ms-flex-align: baseline;
  -webkit-align-items: baseline;
  align-items: baseline;
`,Lo=n`
  -ms-flex-pack: start;
  -webkit-justify-content: flex-start;
  justify-content: flex-start;
`,Oo=n`
  -ms-flex-pack: center;
  -webkit-justify-content: center;
  justify-content: center;
`,Ro=n`
  -ms-flex-pack: end;
  -webkit-justify-content: flex-end;
  justify-content: flex-end;
`,$o=n`
  -ms-flex-pack: distribute;
  -webkit-justify-content: space-around;
  justify-content: space-around;
`,Mo=n`
  -ms-flex-pack: justify;
  -webkit-justify-content: space-between;
  justify-content: space-between;
`,No=n`
  -ms-align-self: flex-start;
  -webkit-align-self: flex-start;
  align-self: flex-start;
`,Do=n`
  -ms-align-self: center;
  -webkit-align-self: center;
  align-self: center;
`,zo=n`
  -ms-align-self: flex-end;
  -webkit-align-self: flex-end;
  align-self: flex-end;
`,Fo=n`
  -ms-align-self: stretch;
  -webkit-align-self: stretch;
  align-self: stretch;
`,Bo=n`
  -ms-align-self: baseline;
  -webkit-align-self: baseline;
  align-self: baseline;
`,Uo=n`
  -ms-flex-line-pack: start; /* IE10 */
  -ms-align-content: flex-start;
  -webkit-align-content: flex-start;
  align-content: flex-start;
`,Vo=n`
  -ms-flex-line-pack: end; /* IE10 */
  -ms-align-content: flex-end;
  -webkit-align-content: flex-end;
  align-content: flex-end;
`,jo=n`
  -ms-flex-line-pack: center; /* IE10 */
  -ms-align-content: center;
  -webkit-align-content: center;
  align-content: center;
`,Go=n`
  -ms-flex-line-pack: justify; /* IE10 */
  -ms-align-content: space-between;
  -webkit-align-content: space-between;
  align-content: space-between;
`,Ho=n`
  -ms-flex-line-pack: distribute; /* IE10 */
  -ms-align-content: space-around;
  -webkit-align-content: space-around;
  align-content: space-around;
`,qo=n`.layout.horizontal,.layout.vertical{${qr}}.layout.inline{${Wr}}.layout.horizontal{${Yr}}.layout.vertical{${Xr}}.layout.wrap{${Jr}}.layout.no-wrap{${Qr}}.layout.center,.layout.center-center{${Po}}.layout.center-center,.layout.center-justified{${Oo}}.flex{${Kr}}.flex-auto{${Zr}}.flex-none{${to}}.none{${eo}}`;
/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
function Wo(t){const e=new MouseEvent("click",{bubbles:!0});return t.dispatchEvent(e),e}function Yo(t){return t.currentTarget===t.target&&(t.composedPath()[0]===t.target&&(!t.target.disabled&&!function(t){const e=Xo;e&&(t.preventDefault(),t.stopImmediatePropagation());return async function(){Xo=!0,await null,Xo=!1}
/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */(),e}(t)))}n`.flex,.flex-1{${Zr}}.flex-2{${io}}.flex-3{${ro}}.flex-4{${oo}}.flex-5{${no}}.flex-6{${so}}.flex-7{${ao}}.flex-8{${lo}}.flex-9{${co}}.flex-10{${ho}}.flex-11{${uo}}.flex-12{${po}}`,n`.layout.horizontal-reverse,.layout.vertical-reverse{${qr}}.layout.horizontal-reverse{${fo}}.layout.vertical-reverse{${mo}}.layout.wrap-reverse{${go}}`,n`.block{${vo}}[hidden]{${eo}}.invisible{${bo}}.relative{${yo}}.fit{${xo}}body.fullbleed{margin:0;height:100vh}.scroll{${wo}}.fixed-bottom,.fixed-left,.fixed-right,.fixed-top{${_o}}.fixed-top{${ko}}.fixed-right{${Co}}.fixed-bottom{${So}}.fixed-left{${Ao}}`,n`
  .layout.start {
    ${To}
  }

  .layout.center,
  .layout.center-center {
    ${Po}
  }

  .layout.end {
    ${Eo}
  }

  .layout.baseline {
    ${Io}
  }

  .layout.start-justified {
    ${Lo}
  }

  .layout.center-justified,
  .layout.center-center {
    ${Oo}
  }

  .layout.end-justified {
    ${Ro}
  }

  .layout.around-justified {
    ${$o}
  }

  .layout.justified {
    ${Mo}
  }

  .self-start {
   ${No}

  .self-center {
   ${Do}
  }

  .self-end {
    ${zo}
  }

  .self-stretch {
   ${Fo}
  }

  .self-baseline {
   ${Bo}
  }

  .layout.start-aligned {
   ${Uo}
  }

  .layout.end-aligned {
    ${Vo}
  }

  .layout.center-aligned {
   ${jo}
  }

  .layout.between-aligned {
    ${Go}
  }

  .layout.around-aligned {
    ${Ho}
  }
`;let Xo=!1;function Jo(t,e){!e.bubbles||t.shadowRoot&&!e.composed||e.stopPropagation();const i=Reflect.construct(e.constructor,[e.type,e]),r=t.dispatchEvent(i);return r||e.preventDefault(),r}
/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Qo=Symbol("createValidator"),Ko=Symbol("getValidityAnchor"),Zo=Symbol("privateValidator"),tn=Symbol("privateSyncValidity"),en=Symbol("privateCustomValidationMessage");function rn(t){var e;class i extends t{constructor(){super(...arguments),this[e]=""}get validity(){return this[tn](),this[Ue].validity}get validationMessage(){return this[tn](),this[Ue].validationMessage}get willValidate(){return this[tn](),this[Ue].willValidate}checkValidity(){return this[tn](),this[Ue].checkValidity()}reportValidity(){return this[tn](),this[Ue].reportValidity()}setCustomValidity(t){this[en]=t,this[tn]()}requestUpdate(t,e,i){super.requestUpdate(t,e,i),this[tn]()}firstUpdated(t){super.firstUpdated(t),this[tn]()}[(e=en,tn)](){this[Zo]||(this[Zo]=this[Qo]());const{validity:t,validationMessage:e}=this[Zo].getValidity(),i=!!this[en],r=this[en]||e;this[Ue].setValidity({...t,customError:i},r,this[Ko]()??void 0)}[Qo](){throw new Error("Implement [createValidator]")}[Ko](){throw new Error("Implement [getValidityAnchor]")}}return i}
/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const on=Symbol("getFormValue"),nn=Symbol("getFormState");function sn(t){class e extends t{get form(){return this[Ue].form}get labels(){return this[Ue].labels}get name(){return this.getAttribute("name")??""}set name(t){this.setAttribute("name",t)}get disabled(){return this.hasAttribute("disabled")}set disabled(t){this.toggleAttribute("disabled",t)}attributeChangedCallback(t,e,i){if("name"!==t&&"disabled"!==t)super.attributeChangedCallback(t,e,i);else{const i="disabled"===t?null!==e:e;this.requestUpdate(t,i)}}requestUpdate(t,e,i){super.requestUpdate(t,e,i),this[Ue].setFormValue(this[on](),this[nn]())}[on](){throw new Error("Implement [getFormValue]")}[nn](){return this[on]()}formDisabledCallback(t){this.disabled=t}}return e.formAssociated=!0,bt([dt({noAccessor:!0})],e.prototype,"name",null),bt([dt({type:Boolean,noAccessor:!0})],e.prototype,"disabled",null),e}
/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class an{constructor(t){this.getCurrentState=t,this.currentValidity={validity:{},validationMessage:""}}getValidity(){const t=this.getCurrentState();if(!(!this.prevState||!this.equals(this.prevState,t)))return this.currentValidity;const{validity:e,validationMessage:i}=this.computeValidity(t);return this.prevState=this.copy(t),this.currentValidity={validationMessage:i,validity:{badInput:e.badInput,customError:e.customError,patternMismatch:e.patternMismatch,rangeOverflow:e.rangeOverflow,rangeUnderflow:e.rangeUnderflow,stepMismatch:e.stepMismatch,tooLong:e.tooLong,tooShort:e.tooShort,typeMismatch:e.typeMismatch,valueMissing:e.valueMissing}},this.currentValidity}}
/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ln extends an{computeValidity(t){return this.checkboxControl||(this.checkboxControl=document.createElement("input"),this.checkboxControl.type="checkbox"),this.checkboxControl.checked=t.checked,this.checkboxControl.required=t.required,{validity:this.checkboxControl.validity,validationMessage:this.checkboxControl.validationMessage}}equals(t,e){return t.checked===e.checked&&t.required===e.required}copy({checked:t,required:e}){return{checked:t,required:e}}}
/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const cn=rn(sn(je(nt)));class dn extends cn{constructor(){super(),this.checked=!1,this.indeterminate=!1,this.required=!1,this.value="on",this.prevChecked=!1,this.prevDisabled=!1,this.prevIndeterminate=!1,this.addEventListener("click",(t=>{Yo(t)&&this.input&&(this.focus(),Wo(this.input))}))}update(t){(t.has("checked")||t.has("disabled")||t.has("indeterminate"))&&(this.prevChecked=t.get("checked")??this.checked,this.prevDisabled=t.get("disabled")??this.disabled,this.prevIndeterminate=t.get("indeterminate")??this.indeterminate),super.update(t)}render(){const t=!this.prevChecked&&!this.prevIndeterminate,e=this.prevChecked&&!this.prevIndeterminate,i=this.prevIndeterminate,r=this.checked&&!this.indeterminate,o=this.indeterminate,n=qt({disabled:this.disabled,selected:r||o,unselected:!r&&!o,checked:r,indeterminate:o,"prev-unselected":t,"prev-checked":e,"prev-indeterminate":i,"prev-disabled":this.prevDisabled}),{ariaLabel:s,ariaInvalid:a}=this;return U` <div class="container ${n}"> <input type="checkbox" id="input" aria-checked="${o?"mixed":j}" aria-label="${s||j}" aria-invalid="${a||j}" ?disabled="${this.disabled}" ?required="${this.required}" .indeterminate="${this.indeterminate}" .checked="${this.checked}" @input="${this.handleInput}" @change="${this.handleChange}"> <div class="outline"></div> <div class="background"></div> <md-focus-ring part="focus-ring" for="input"></md-focus-ring> <md-ripple for="input" ?disabled="${this.disabled}"></md-ripple> <svg class="icon" viewBox="0 0 18 18" aria-hidden="true"> <rect class="mark short"/> <rect class="mark long"/> </svg> </div> `}handleInput(t){const e=t.target;this.checked=e.checked,this.indeterminate=e.indeterminate}handleChange(t){Jo(this,t)}[on](){return!this.checked||this.indeterminate?null:this.value}[nn](){return String(this.checked)}formResetCallback(){this.checked=this.hasAttribute("checked")}formStateRestoreCallback(t){this.checked="true"===t}[Qo](){return new ln((()=>this))}[Ko](){return this.input}}Tt(dn),dn.shadowRootOptions={...nt.shadowRootOptions,delegatesFocus:!0},bt([dt({type:Boolean})],dn.prototype,"checked",void 0),bt([dt({type:Boolean})],dn.prototype,"indeterminate",void 0),bt([dt({type:Boolean})],dn.prototype,"required",void 0),bt([dt()],dn.prototype,"value",void 0),bt([ht()],dn.prototype,"prevChecked",void 0),bt([ht()],dn.prototype,"prevDisabled",void 0),bt([ht()],dn.prototype,"prevIndeterminate",void 0),bt([pt("input")],dn.prototype,"input",void 0);
/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
const hn=n`:host{border-start-start-radius:var(--md-checkbox-container-shape-start-start,var(--md-checkbox-container-shape,2px));border-start-end-radius:var(--md-checkbox-container-shape-start-end,var(--md-checkbox-container-shape,2px));border-end-end-radius:var(--md-checkbox-container-shape-end-end,var(--md-checkbox-container-shape,2px));border-end-start-radius:var(--md-checkbox-container-shape-end-start,var(--md-checkbox-container-shape,2px));display:inline-flex;height:var(--md-checkbox-container-size,18px);position:relative;vertical-align:top;width:var(--md-checkbox-container-size,18px);-webkit-tap-highlight-color:transparent;cursor:pointer}:host([disabled]){cursor:default}:host([touch-target=wrapper]){margin:max(0,(48px - var(--md-checkbox-container-size,18px))/2)}md-focus-ring{height:44px;inset:unset;width:44px}input{appearance:none;height:48px;margin:0;opacity:0;outline:0;position:absolute;width:48px;z-index:1;cursor:inherit}:host([touch-target=none]) input{height:100%;width:100%}.container{border-radius:inherit;display:flex;height:100%;place-content:center;place-items:center;position:relative;width:100%}.background,.icon,.outline{inset:0;position:absolute}.background,.outline{border-radius:inherit}.outline{border-color:var(--md-checkbox-outline-color,var(--md-sys-color-on-surface-variant,#49454f));border-style:solid;border-width:var(--md-checkbox-outline-width,2px);box-sizing:border-box}.background{background-color:var(--md-checkbox-selected-container-color,var(--md-sys-color-primary,#6750a4))}.background,.icon{opacity:0;transition-duration:150ms,50ms;transition-property:transform,opacity;transition-timing-function:cubic-bezier(.3,0,.8,.15),linear;transform:scale(.6)}:where(.selected) :is(.background,.icon){opacity:1;transition-duration:350ms,50ms;transition-timing-function:cubic-bezier(.05,.7,.1,1),linear;transform:scale(1)}md-ripple{border-radius:var(--md-checkbox-state-layer-shape,var(--md-sys-shape-corner-full,9999px));height:var(--md-checkbox-state-layer-size,40px);inset:unset;width:var(--md-checkbox-state-layer-size,40px);--md-ripple-hover-color:var(--md-checkbox-hover-state-layer-color, var(--md-sys-color-on-surface, #1d1b20));--md-ripple-hover-opacity:var(--md-checkbox-hover-state-layer-opacity, 0.08);--md-ripple-pressed-color:var(--md-checkbox-pressed-state-layer-color, var(--md-sys-color-primary, #6750a4));--md-ripple-pressed-opacity:var(--md-checkbox-pressed-state-layer-opacity, 0.12)}.selected md-ripple{--md-ripple-hover-color:var(--md-checkbox-selected-hover-state-layer-color, var(--md-sys-color-primary, #6750a4));--md-ripple-hover-opacity:var(--md-checkbox-selected-hover-state-layer-opacity, 0.08);--md-ripple-pressed-color:var(--md-checkbox-selected-pressed-state-layer-color, var(--md-sys-color-on-surface, #1d1b20));--md-ripple-pressed-opacity:var(--md-checkbox-selected-pressed-state-layer-opacity, 0.12)}.icon{fill:var(--md-checkbox-selected-icon-color,var(--md-sys-color-on-primary,#fff));height:var(--md-checkbox-icon-size,18px);width:var(--md-checkbox-icon-size,18px)}.mark.short{height:2px;transition-property:transform,height;width:2px}.mark.long{height:2px;transition-property:transform,width;width:10px}.mark{animation-duration:150ms;animation-timing-function:cubic-bezier(.3,0,.8,.15);transition-duration:150ms;transition-timing-function:cubic-bezier(.3,0,.8,.15)}.selected .mark{animation-duration:350ms;animation-timing-function:cubic-bezier(.05,.7,.1,1);transition-duration:350ms;transition-timing-function:cubic-bezier(.05,.7,.1,1)}.checked .mark,.prev-checked.unselected .mark{transform:scaleY(-1) translate(7px,-14px) rotate(45deg)}.checked .mark.short,.prev-checked.unselected .mark.short{height:5.6568542495px}.checked .mark.long,.prev-checked.unselected .mark.long{width:11.313708499px}.indeterminate .mark,.prev-indeterminate.unselected .mark{transform:scaleY(-1) translate(4px,-10px) rotate(0)}.prev-unselected .mark{transition-property:none}.prev-unselected.checked .mark.long{animation-name:prev-unselected-to-checked}@keyframes prev-unselected-to-checked{from{width:0}}:where(:hover) .outline{border-color:var(--md-checkbox-hover-outline-color,var(--md-sys-color-on-surface,#1d1b20));border-width:var(--md-checkbox-hover-outline-width,2px)}:where(:hover) .background{background:var(--md-checkbox-selected-hover-container-color,var(--md-sys-color-primary,#6750a4))}:where(:hover) .icon{fill:var(--md-checkbox-selected-hover-icon-color,var(--md-sys-color-on-primary,#fff))}:where(:focus-within) .outline{border-color:var(--md-checkbox-focus-outline-color,var(--md-sys-color-on-surface,#1d1b20));border-width:var(--md-checkbox-focus-outline-width,2px)}:where(:focus-within) .background{background:var(--md-checkbox-selected-focus-container-color,var(--md-sys-color-primary,#6750a4))}:where(:focus-within) .icon{fill:var(--md-checkbox-selected-focus-icon-color,var(--md-sys-color-on-primary,#fff))}:where(:active) .outline{border-color:var(--md-checkbox-pressed-outline-color,var(--md-sys-color-on-surface,#1d1b20));border-width:var(--md-checkbox-pressed-outline-width,2px)}:where(:active) .background{background:var(--md-checkbox-selected-pressed-container-color,var(--md-sys-color-primary,#6750a4))}:where(:active) .icon{fill:var(--md-checkbox-selected-pressed-icon-color,var(--md-sys-color-on-primary,#fff))}:where(.disabled,.prev-disabled) :is(.background,.icon,.mark){animation-duration:0s;transition-duration:0s}:where(.disabled) .outline{border-color:var(--md-checkbox-disabled-outline-color,var(--md-sys-color-on-surface,#1d1b20));border-width:var(--md-checkbox-disabled-outline-width,2px);opacity:var(--md-checkbox-disabled-container-opacity,.38)}:where(.selected.disabled) .outline{visibility:hidden}:where(.selected.disabled) .background{background:var(--md-checkbox-selected-disabled-container-color,var(--md-sys-color-on-surface,#1d1b20));opacity:var(--md-checkbox-selected-disabled-container-opacity,.38)}:where(.disabled) .icon{fill:var(--md-checkbox-selected-disabled-icon-color,var(--md-sys-color-surface,#fef7ff))}@media(forced-colors:active){.background{background-color:CanvasText}.selected.disabled .background{background-color:GrayText;opacity:1}.outline{border-color:CanvasText}.disabled .outline{border-color:GrayText;opacity:1}.icon{fill:Canvas}}`
/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */;let un=class extends dn{};un.styles=[hn],un=bt([at("md-checkbox")],un);
/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
const pn=je(nt);class fn extends pn{get name(){return this.getAttribute("name")??""}set name(t){this.setAttribute("name",t)}get form(){return this[Ue].form}constructor(){super(),this.disabled=!1,this.href="",this.target="",this.trailingIcon=!1,this.hasIcon=!1,this.type="submit",this.value="",this.handleActivationClick=t=>{Yo(t)&&this.buttonElement&&(this.focus(),Wo(this.buttonElement))},this.addEventListener("click",this.handleActivationClick)}focus(){this.buttonElement?.focus()}blur(){this.buttonElement?.blur()}render(){const t=this.disabled&&!this.href,e=this.href?this.renderLink():this.renderButton(),i=this.href?"link":"button";return U` ${this.renderElevationOrOutline?.()} <div class="background"></div> <md-focus-ring part="focus-ring" for="${i}"></md-focus-ring> <md-ripple part="ripple" for="${i}" ?disabled="${t}"></md-ripple> ${e} `}renderButton(){const{ariaLabel:t,ariaHasPopup:e,ariaExpanded:i}=this;return U`<button id="button" class="button" ?disabled="${this.disabled}" aria-label="${t||j}" aria-haspopup="${e||j}" aria-expanded="${i||j}"> ${this.renderContent()} </button>`}renderLink(){const{ariaLabel:t,ariaHasPopup:e,ariaExpanded:i}=this;return U`<a id="link" class="button" aria-label="${t||j}" aria-haspopup="${e||j}" aria-expanded="${i||j}" href="${this.href}" target="${this.target||j}">${this.renderContent()} </a>`}renderContent(){const t=U`<slot name="icon" @slotchange="${this.handleSlotChange}"></slot>`;return U` <span class="touch"></span> ${this.trailingIcon?j:t} <span class="label"><slot></slot></span> ${this.trailingIcon?t:j} `}handleSlotChange(){this.hasIcon=this.assignedIcons.length>0}}Tt(fn),Ge(fn),fn.formAssociated=!0,fn.shadowRootOptions={mode:"open",delegatesFocus:!0},bt([dt({type:Boolean,reflect:!0})],fn.prototype,"disabled",void 0),bt([dt()],fn.prototype,"href",void 0),bt([dt()],fn.prototype,"target",void 0),bt([dt({type:Boolean,attribute:"trailing-icon",reflect:!0})],fn.prototype,"trailingIcon",void 0),bt([dt({type:Boolean,attribute:"has-icon",reflect:!0})],fn.prototype,"hasIcon",void 0),bt([dt()],fn.prototype,"type",void 0),bt([dt({reflect:!0})],fn.prototype,"value",void 0),bt([pt(".button")],fn.prototype,"buttonElement",void 0),bt([mt({slot:"icon",flatten:!0})],fn.prototype,"assignedIcons",void 0);
/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
class mn extends fn{renderElevationOrOutline(){return U`<div class="outline"></div>`}}
/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const gn=n`:host{--_container-height:var(--md-outlined-button-container-height, 40px);--_disabled-label-text-color:var(--md-outlined-button-disabled-label-text-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-label-text-opacity:var(--md-outlined-button-disabled-label-text-opacity, 0.38);--_disabled-outline-color:var(--md-outlined-button-disabled-outline-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-outline-opacity:var(--md-outlined-button-disabled-outline-opacity, 0.12);--_focus-label-text-color:var(--md-outlined-button-focus-label-text-color, var(--md-sys-color-primary, #6750a4));--_hover-label-text-color:var(--md-outlined-button-hover-label-text-color, var(--md-sys-color-primary, #6750a4));--_hover-state-layer-color:var(--md-outlined-button-hover-state-layer-color, var(--md-sys-color-primary, #6750a4));--_hover-state-layer-opacity:var(--md-outlined-button-hover-state-layer-opacity, 0.08);--_label-text-color:var(--md-outlined-button-label-text-color, var(--md-sys-color-primary, #6750a4));--_label-text-font:var(--md-outlined-button-label-text-font, var(--md-sys-typescale-label-large-font, var(--md-ref-typeface-plain, Roboto)));--_label-text-line-height:var(--md-outlined-button-label-text-line-height, var(--md-sys-typescale-label-large-line-height, 1.25rem));--_label-text-size:var(--md-outlined-button-label-text-size, var(--md-sys-typescale-label-large-size, 0.875rem));--_label-text-weight:var(--md-outlined-button-label-text-weight, var(--md-sys-typescale-label-large-weight, var(--md-ref-typeface-weight-medium, 500)));--_outline-color:var(--md-outlined-button-outline-color, var(--md-sys-color-outline, #79747e));--_outline-width:var(--md-outlined-button-outline-width, 1px);--_pressed-label-text-color:var(--md-outlined-button-pressed-label-text-color, var(--md-sys-color-primary, #6750a4));--_pressed-outline-color:var(--md-outlined-button-pressed-outline-color, var(--md-sys-color-outline, #79747e));--_pressed-state-layer-color:var(--md-outlined-button-pressed-state-layer-color, var(--md-sys-color-primary, #6750a4));--_pressed-state-layer-opacity:var(--md-outlined-button-pressed-state-layer-opacity, 0.12);--_disabled-icon-color:var(--md-outlined-button-disabled-icon-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-icon-opacity:var(--md-outlined-button-disabled-icon-opacity, 0.38);--_focus-icon-color:var(--md-outlined-button-focus-icon-color, var(--md-sys-color-primary, #6750a4));--_hover-icon-color:var(--md-outlined-button-hover-icon-color, var(--md-sys-color-primary, #6750a4));--_icon-color:var(--md-outlined-button-icon-color, var(--md-sys-color-primary, #6750a4));--_icon-size:var(--md-outlined-button-icon-size, 18px);--_pressed-icon-color:var(--md-outlined-button-pressed-icon-color, var(--md-sys-color-primary, #6750a4));--_container-shape-start-start:var(--md-outlined-button-container-shape-start-start, var(--md-outlined-button-container-shape, var(--md-sys-shape-corner-full, 9999px)));--_container-shape-start-end:var(--md-outlined-button-container-shape-start-end, var(--md-outlined-button-container-shape, var(--md-sys-shape-corner-full, 9999px)));--_container-shape-end-end:var(--md-outlined-button-container-shape-end-end, var(--md-outlined-button-container-shape, var(--md-sys-shape-corner-full, 9999px)));--_container-shape-end-start:var(--md-outlined-button-container-shape-end-start, var(--md-outlined-button-container-shape, var(--md-sys-shape-corner-full, 9999px)));--_leading-space:var(--md-outlined-button-leading-space, 24px);--_trailing-space:var(--md-outlined-button-trailing-space, 24px);--_with-leading-icon-leading-space:var(--md-outlined-button-with-leading-icon-leading-space, 16px);--_with-leading-icon-trailing-space:var(--md-outlined-button-with-leading-icon-trailing-space, 24px);--_with-trailing-icon-leading-space:var(--md-outlined-button-with-trailing-icon-leading-space, 24px);--_with-trailing-icon-trailing-space:var(--md-outlined-button-with-trailing-icon-trailing-space, 16px);--_container-color:none;--_disabled-container-color:none;--_disabled-container-opacity:0}.outline{inset:0;border-style:solid;position:absolute;box-sizing:border-box;border-color:var(--_outline-color);border-start-start-radius:var(--_container-shape-start-start);border-start-end-radius:var(--_container-shape-start-end);border-end-start-radius:var(--_container-shape-end-start);border-end-end-radius:var(--_container-shape-end-end)}:host(:active) .outline{border-color:var(--_pressed-outline-color)}:host([disabled]) .outline{border-color:var(--_disabled-outline-color);opacity:var(--_disabled-outline-opacity)}@media(forced-colors:active){:host([disabled]) .background{border-color:GrayText}:host([disabled]) .outline{opacity:1}}.outline,md-ripple{border-width:var(--_outline-width)}md-ripple{inline-size:calc(100% - 2*var(--_outline-width));block-size:calc(100% - 2*var(--_outline-width));border-style:solid;border-color:transparent}`
/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */,vn=n`:host{border-start-start-radius:var(--_container-shape-start-start);border-start-end-radius:var(--_container-shape-start-end);border-end-start-radius:var(--_container-shape-end-start);border-end-end-radius:var(--_container-shape-end-end);box-sizing:border-box;cursor:pointer;display:inline-flex;gap:8px;min-height:var(--_container-height);outline:0;padding-block:calc((var(--_container-height) - max(var(--_label-text-line-height),var(--_icon-size)))/ 2);padding-inline-start:var(--_leading-space);padding-inline-end:var(--_trailing-space);place-content:center;place-items:center;position:relative;font-family:var(--_label-text-font);font-size:var(--_label-text-size);line-height:var(--_label-text-line-height);font-weight:var(--_label-text-weight);text-overflow:ellipsis;text-wrap:nowrap;user-select:none;-webkit-tap-highlight-color:transparent;vertical-align:top;--md-ripple-hover-color:var(--_hover-state-layer-color);--md-ripple-pressed-color:var(--_pressed-state-layer-color);--md-ripple-hover-opacity:var(--_hover-state-layer-opacity);--md-ripple-pressed-opacity:var(--_pressed-state-layer-opacity)}md-focus-ring{--md-focus-ring-shape-start-start:var(--_container-shape-start-start);--md-focus-ring-shape-start-end:var(--_container-shape-start-end);--md-focus-ring-shape-end-end:var(--_container-shape-end-end);--md-focus-ring-shape-end-start:var(--_container-shape-end-start)}:host([disabled]){cursor:default;pointer-events:none}.button{border-radius:inherit;cursor:inherit;display:inline-flex;align-items:center;justify-content:center;border:none;outline:0;-webkit-appearance:none;vertical-align:middle;background:rgba(0,0,0,0);text-decoration:none;min-width:calc(64px - var(--_leading-space) - var(--_trailing-space));width:100%;z-index:0;height:100%;font:inherit;color:var(--_label-text-color);padding:0;gap:inherit;text-transform:inherit}.button::-moz-focus-inner{padding:0;border:0}:host(:hover) .button{color:var(--_hover-label-text-color)}:host(:focus-within) .button{color:var(--_focus-label-text-color)}:host(:active) .button{color:var(--_pressed-label-text-color)}.background{background-color:var(--_container-color);border-radius:inherit;inset:0;position:absolute}.label{overflow:hidden}.label ::slotted(*),:is(.button,.label,.labelslot){text-overflow:inherit}:host([disabled]) .label{color:var(--_disabled-label-text-color);opacity:var(--_disabled-label-text-opacity)}:host([disabled]) .background{background-color:var(--_disabled-container-color);opacity:var(--_disabled-container-opacity)}@media(forced-colors:active){.background{border:1px solid CanvasText}:host([disabled]){--_disabled-icon-color:GrayText;--_disabled-icon-opacity:1;--_disabled-container-opacity:1;--_disabled-label-text-color:GrayText;--_disabled-label-text-opacity:1}}:host([has-icon]:not([trailing-icon])){padding-inline-start:var(--_with-leading-icon-leading-space);padding-inline-end:var(--_with-leading-icon-trailing-space)}:host([has-icon][trailing-icon]){padding-inline-start:var(--_with-trailing-icon-leading-space);padding-inline-end:var(--_with-trailing-icon-trailing-space)}::slotted([slot=icon]){display:inline-flex;position:relative;writing-mode:horizontal-tb;fill:currentColor;flex-shrink:0;color:var(--_icon-color);font-size:var(--_icon-size);inline-size:var(--_icon-size);block-size:var(--_icon-size)}:host(:hover) ::slotted([slot=icon]){color:var(--_hover-icon-color)}:host(:focus-within) ::slotted([slot=icon]){color:var(--_focus-icon-color)}:host(:active) ::slotted([slot=icon]){color:var(--_pressed-icon-color)}:host([disabled]) ::slotted([slot=icon]){color:var(--_disabled-icon-color);opacity:var(--_disabled-icon-opacity)}.touch{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}:host([touch-target=wrapper]){margin:max(0,(48px - var(--_container-height))/2) 0}:host([touch-target=none]) .touch{display:none}`
/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */;let bn=class extends mn{};bn.styles=[vn,gn],bn=bt([at("md-outlined-button")],bn);
/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
class yn extends nt{constructor(){super(...arguments),this.value=0,this.max=1,this.indeterminate=!1,this.fourColor=!1}render(){const{ariaLabel:t}=this;return U` <div class="progress ${qt(this.getRenderClasses())}" role="progressbar" aria-label="${t||j}" aria-valuemin="0" aria-valuemax="${this.max}" aria-valuenow="${this.indeterminate?j:this.value}">${this.renderIndicator()}</div> `}getRenderClasses(){return{indeterminate:this.indeterminate,"four-color":this.fourColor}}}Tt(yn),bt([dt({type:Number})],yn.prototype,"value",void 0),bt([dt({type:Number})],yn.prototype,"max",void 0),bt([dt({type:Boolean})],yn.prototype,"indeterminate",void 0),bt([dt({type:Boolean,attribute:"four-color"})],yn.prototype,"fourColor",void 0);
/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
class xn extends yn{renderIndicator(){return this.indeterminate?this.renderIndeterminateContainer():this.renderDeterminateContainer()}renderDeterminateContainer(){const t=100*(1-this.value/this.max);return U` <svg viewBox="0 0 4800 4800"> <circle class="track" pathLength="100"></circle> <circle class="active-track" pathLength="100" stroke-dashoffset="${t}"></circle> </svg> `}renderIndeterminateContainer(){return U` <div class="spinner"> <div class="left"> <div class="circle"></div> </div> <div class="right"> <div class="circle"></div> </div> </div>`}}
/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const wn=n`:host{--_active-indicator-color: var(--md-circular-progress-active-indicator-color, var(--md-sys-color-primary, #6750a4));--_active-indicator-width: var(--md-circular-progress-active-indicator-width, 10);--_four-color-active-indicator-four-color: var(--md-circular-progress-four-color-active-indicator-four-color, var(--md-sys-color-tertiary-container, #ffd8e4));--_four-color-active-indicator-one-color: var(--md-circular-progress-four-color-active-indicator-one-color, var(--md-sys-color-primary, #6750a4));--_four-color-active-indicator-three-color: var(--md-circular-progress-four-color-active-indicator-three-color, var(--md-sys-color-tertiary, #7d5260));--_four-color-active-indicator-two-color: var(--md-circular-progress-four-color-active-indicator-two-color, var(--md-sys-color-primary-container, #eaddff));--_size: var(--md-circular-progress-size, 48px);display:inline-flex;vertical-align:middle;width:var(--_size);height:var(--_size);position:relative;align-items:center;justify-content:center;contain:strict;content-visibility:auto}.progress{flex:1;align-self:stretch;margin:4px}.progress,.spinner,.left,.right,.circle,svg,.track,.active-track{position:absolute;inset:0}svg{transform:rotate(-90deg)}circle{cx:50%;cy:50%;r:calc(50%*(1 - var(--_active-indicator-width)/100));stroke-width:calc(var(--_active-indicator-width)*1%);stroke-dasharray:100;fill:rgba(0,0,0,0)}.active-track{transition:stroke-dashoffset 500ms cubic-bezier(0, 0, 0.2, 1);stroke:var(--_active-indicator-color)}.track{stroke:rgba(0,0,0,0)}.progress.indeterminate{animation:linear infinite linear-rotate;animation-duration:1568.2352941176ms}.spinner{animation:infinite both rotate-arc;animation-duration:5332ms;animation-timing-function:cubic-bezier(0.4, 0, 0.2, 1)}.left{overflow:hidden;inset:0 50% 0 0}.right{overflow:hidden;inset:0 0 0 50%}.circle{box-sizing:border-box;border-radius:50%;border:solid calc(var(--_active-indicator-width)/100*(var(--_size) - 8px));border-color:var(--_active-indicator-color) var(--_active-indicator-color) rgba(0,0,0,0) rgba(0,0,0,0);animation:expand-arc;animation-iteration-count:infinite;animation-fill-mode:both;animation-duration:1333ms,5332ms;animation-timing-function:cubic-bezier(0.4, 0, 0.2, 1)}.four-color .circle{animation-name:expand-arc,four-color}.left .circle{rotate:135deg;inset:0 -100% 0 0}.right .circle{rotate:100deg;inset:0 0 0 -100%;animation-delay:-666.5ms,0ms}@media(forced-colors: active){.active-track{stroke:CanvasText}.circle{border-color:CanvasText CanvasText Canvas Canvas}}@keyframes expand-arc{0%{transform:rotate(265deg)}50%{transform:rotate(130deg)}100%{transform:rotate(265deg)}}@keyframes rotate-arc{12.5%{transform:rotate(135deg)}25%{transform:rotate(270deg)}37.5%{transform:rotate(405deg)}50%{transform:rotate(540deg)}62.5%{transform:rotate(675deg)}75%{transform:rotate(810deg)}87.5%{transform:rotate(945deg)}100%{transform:rotate(1080deg)}}@keyframes linear-rotate{to{transform:rotate(360deg)}}@keyframes four-color{0%{border-top-color:var(--_four-color-active-indicator-one-color);border-right-color:var(--_four-color-active-indicator-one-color)}15%{border-top-color:var(--_four-color-active-indicator-one-color);border-right-color:var(--_four-color-active-indicator-one-color)}25%{border-top-color:var(--_four-color-active-indicator-two-color);border-right-color:var(--_four-color-active-indicator-two-color)}40%{border-top-color:var(--_four-color-active-indicator-two-color);border-right-color:var(--_four-color-active-indicator-two-color)}50%{border-top-color:var(--_four-color-active-indicator-three-color);border-right-color:var(--_four-color-active-indicator-three-color)}65%{border-top-color:var(--_four-color-active-indicator-three-color);border-right-color:var(--_four-color-active-indicator-three-color)}75%{border-top-color:var(--_four-color-active-indicator-four-color);border-right-color:var(--_four-color-active-indicator-four-color)}90%{border-top-color:var(--_four-color-active-indicator-four-color);border-right-color:var(--_four-color-active-indicator-four-color)}100%{border-top-color:var(--_four-color-active-indicator-one-color);border-right-color:var(--_four-color-active-indicator-one-color)}}
`
/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */;let _n=class extends xn{};_n.styles=[wn],_n=bt([at("md-circular-progress")],_n);const kn=n`
  display: -ms-flexbox;
  display: -webkit-flex;
  display: flex;
`;n`
  box-sizing: border-box;
`;const Cn=n`
  display: -ms-inline-flexbox;
  display: -webkit-inline-flex;
  display: inline-flex;
`,An=n`
  -ms-flex-direction: row;
  -webkit-flex-direction: row;
  flex-direction: row;
`,Sn=n`
  -ms-flex-direction: column;
  -webkit-flex-direction: column;
  flex-direction: column;
`,Tn=n`
  -ms-flex-wrap: wrap;
  -webkit-flex-wrap: wrap;
  flex-wrap: wrap;
`,Pn=n`
  -ms-flex-wrap: nowrap;
  -webkit-flex-wrap: nowrap;
  flex-wrap: nowrap;
`,En=n`
  -ms-flex: 1 1 0.000000001px;
  -webkit-flex: 1;
  flex: 1;
  -webkit-flex-basis: 0.000000001px;
  flex-basis: 0.000000001px;
`,In=n`
  -ms-flex: 1 1 auto;
  -webkit-flex: 1 1 auto;
  flex: 1 1 auto;
`,Ln=n`
  -ms-flex: 1 1 auto;
  -webkit-flex: 1 1 auto;
  flex: 1 1 auto;
`,On=n`
  display: none !important;
`,Rn=n`
  -ms-flex: 2;
  -webkit-flex: 2;
  flex: 2;
`,$n=n`
  -ms-flex: 3;
  -webkit-flex: 3;
  flex: 3;
`,Mn=n`
  -ms-flex: 4;
  -webkit-flex: 4;
  flex: 4;
`,Nn=n`
  -ms-flex: 5;
  -webkit-flex: 5;
  flex: 5;
`,Dn=n`
  -ms-flex: 6;
  -webkit-flex: 6;
  flex: 6;
`,zn=n`
  -ms-flex: 7;
  -webkit-flex: 7;
  flex: 7;
`,Fn=n`
  -ms-flex: 8;
  -webkit-flex: 8;
  flex: 8;
`,Bn=n`
  -ms-flex: 9;
  -webkit-flex: 9;
  flex: 9;
`,Un=n`
  -ms-flex: 10;
  -webkit-flex: 10;
  flex: 10;
`,Vn=n`
  -ms-flex: 11;
  -webkit-flex: 11;
  flex: 11;
`,jn=n`
  -ms-flex: 12;
  -webkit-flex: 12;
  flex: 12;
`,Gn=n`
  -ms-flex-direction: row-reverse;
  -webkit-flex-direction: row-reverse;
  flex-direction: row-reverse;
`,Hn=n`
  -ms-flex-direction: column-reverse;
  -webkit-flex-direction: column-reverse;
  flex-direction: column-reverse;
`,qn=n`
  -ms-flex-wrap: wrap-reverse;
  -webkit-flex-wrap: wrap-reverse;
  flex-wrap: wrap-reverse;
`,Wn=n`
  display: block;
`,Yn=n`
  visibility: hidden !important;
`,Xn=n`
  position: relative;
`,Jn=n`
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
`,Qn=n`
  -webkit-overflow-scrolling: touch;
  overflow: auto;
`,Kn=n`
  position: fixed;
`,Zn=n`
  top: 0;
  left: 0;
  right: 0;
`,ts=n`
  top: 0;
  right: 0;
  bottom: 0;
`,es=n`
  top: 0;
  bottom: 0;
  left: 0;
`,is=n`
  right: 0;
  bottom: 0;
  left: 0;
`,rs=n`
  -ms-flex-align: start;
  -webkit-align-items: flex-start;
  align-items: flex-start;
`,os=n`
  -ms-flex-align: center;
  -webkit-align-items: center;
  align-items: center;
`,ns=n`
  -ms-flex-align: end;
  -webkit-align-items: flex-end;
  align-items: flex-end;
`,ss=n`
  -ms-flex-align: baseline;
  -webkit-align-items: baseline;
  align-items: baseline;
`,as=n`
  -ms-flex-pack: start;
  -webkit-justify-content: flex-start;
  justify-content: flex-start;
`,ls=n`
  -ms-flex-pack: center;
  -webkit-justify-content: center;
  justify-content: center;
`,cs=n`
  -ms-flex-pack: end;
  -webkit-justify-content: flex-end;
  justify-content: flex-end;
`,ds=n`
  -ms-flex-pack: distribute;
  -webkit-justify-content: space-around;
  justify-content: space-around;
`,hs=n`
  -ms-flex-pack: justify;
  -webkit-justify-content: space-between;
  justify-content: space-between;
`,us=n`
  -ms-align-self: flex-start;
  -webkit-align-self: flex-start;
  align-self: flex-start;
`,ps=n`
  -ms-align-self: center;
  -webkit-align-self: center;
  align-self: center;
`,fs=n`
  -ms-align-self: flex-end;
  -webkit-align-self: flex-end;
  align-self: flex-end;
`,ms=n`
  -ms-align-self: stretch;
  -webkit-align-self: stretch;
  align-self: stretch;
`,gs=n`
  -ms-align-self: baseline;
  -webkit-align-self: baseline;
  align-self: baseline;
`,vs=n`
  -ms-flex-line-pack: start; /* IE10 */
  -ms-align-content: flex-start;
  -webkit-align-content: flex-start;
  align-content: flex-start;
`,bs=n`
  -ms-flex-line-pack: end; /* IE10 */
  -ms-align-content: flex-end;
  -webkit-align-content: flex-end;
  align-content: flex-end;
`,ys=n`
  -ms-flex-line-pack: center; /* IE10 */
  -ms-align-content: center;
  -webkit-align-content: center;
  align-content: center;
`,xs=n`
  -ms-flex-line-pack: justify; /* IE10 */
  -ms-align-content: space-between;
  -webkit-align-content: space-between;
  align-content: space-between;
`,ws=n`
  -ms-flex-line-pack: distribute; /* IE10 */
  -ms-align-content: space-around;
  -webkit-align-content: space-around;
  align-content: space-around;
`,_s=n`.layout.horizontal,.layout.vertical{${kn}}.layout.inline{${Cn}}.layout.horizontal{${An}}.layout.vertical{${Sn}}.layout.wrap{${Tn}}.layout.no-wrap{${Pn}}.layout.center,.layout.center-center{${os}}.layout.center-center,.layout.center-justified{${ls}}.flex{${En}}.flex-auto{${In}}.flex-none{${Ln}}.none{${On}}`;n`.flex,.flex-1{${In}}.flex-2{${Rn}}.flex-3{${$n}}.flex-4{${Mn}}.flex-5{${Nn}}.flex-6{${Dn}}.flex-7{${zn}}.flex-8{${Fn}}.flex-9{${Bn}}.flex-10{${Un}}.flex-11{${Vn}}.flex-12{${jn}}`,n`.layout.horizontal-reverse,.layout.vertical-reverse{${kn}}.layout.horizontal-reverse{${Gn}}.layout.vertical-reverse{${Hn}}.layout.wrap-reverse{${qn}}`,n`.block{${Wn}}[hidden]{${On}}.invisible{${Yn}}.relative{${Xn}}.fit{${Jn}}body.fullbleed{margin:0;height:100vh}.scroll{${Qn}}.fixed-bottom,.fixed-left,.fixed-right,.fixed-top{${Kn}}.fixed-top{${Zn}}.fixed-right{${ts}}.fixed-bottom{${is}}.fixed-left{${es}}`,n`
  .layout.start {
    ${rs}
  }

  .layout.center,
  .layout.center-center {
    ${os}
  }

  .layout.end {
    ${ns}
  }

  .layout.baseline {
    ${ss}
  }

  .layout.start-justified {
    ${as}
  }

  .layout.center-justified,
  .layout.center-center {
    ${ls}
  }

  .layout.end-justified {
    ${cs}
  }

  .layout.around-justified {
    ${ds}
  }

  .layout.justified {
    ${hs}
  }

  .self-start {
   ${us}

  .self-center {
   ${ps}
  }

  .self-end {
    ${fs}
  }

  .self-stretch {
   ${ms}
  }

  .self-baseline {
   ${gs}
  }

  .layout.start-aligned {
   ${vs}
  }

  .layout.end-aligned {
    ${bs}
  }

  .layout.center-aligned {
   ${ys}
  }

  .layout.between-aligned {
    ${xs}
  }

  .layout.around-aligned {
    ${ws}
  }
`;var ks=function(t,e,i,r){var o,n=arguments.length,s=n<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(n<3?o(s):n>3?o(e,i,s):o(e,i))||s);return n>3&&s&&Object.defineProperty(e,i,s),s};class Cs extends nt{constructor(){super(...arguments),this.language="en",this.wide=!1,this.rtl=!1,this.hasLlm=!1,this.largeFont=!1,this.themeColor="#002255",this.installMediaQueryWatcher=(t,e)=>{let i=window.matchMedia(t);i.addListener((t=>e(t.matches))),e(i.matches)}}static get styles(){return[_s,n`[hidden]{display:none!important}.lightDarkContainer{padding-left:8px;padding-right:8px;font-size:14px;margin-bottom:16px}`]}get isAppleDevice(){return/Macintosh|iPhone|iPad/.test(navigator.userAgent)}connectedCallback(){super.connectedCallback(),this.hasLlm=window.appGlobals.hasLlm,this.addGlobalListener("yp-language-loaded",this._languageEvent.bind(this)),this.addGlobalListener("yp-large-font",this._largeFont.bind(this)),this.addGlobalListener("yp-theme-color",this._changeThemeColor.bind(this)),this.addGlobalListener("yp-theme-dark-mode",this._changeThemeDarkMode.bind(this)),window.appGlobals&&window.appGlobals.i18nTranslation&&window.appGlobals.locale?(this.language=window.appGlobals.locale,this._setupRtl()):this.language="",this.installMediaQueryWatcher("(min-width: 900px)",(t=>{this.wide=t})),this.setupThemeSettings()}hasBooted(){this.hasLlm=window.appGlobals.hasLlm}setupBootListener(){this.addGlobalListener("yp-boot-from-server",this.hasBooted.bind(this))}async setupThemeSettings(){await new Promise((t=>setTimeout(t,50))),this.themeDarkMode=window.appGlobals.theme.themeDarkMode,this.themeHighContrast=window.appGlobals.theme.themeHighContrast}disconnectedCallback(){super.disconnectedCallback(),this.removeGlobalListener("yp-language-loaded",this._languageEvent.bind(this)),this.removeGlobalListener("yp-large-font",this._largeFont.bind(this)),this.removeGlobalListener("yp-theme-color",this._changeThemeColor.bind(this)),this.removeGlobalListener("yp-theme-dark-mode",this._changeThemeDarkMode.bind(this)),this.removeGlobalListener("yp-boot-from-server",this.hasBooted.bind(this))}_changeThemeColor(t){this.themeColor=t.detail}_changeThemeDarkMode(t){this.themeDarkMode=t.detail}updated(t){super.updated(t),t.has("language")&&this.languageChanged()}static get rtlLanguages(){return["fa","ar","he","ur","ps","ku","sd","dv","ug","yi"]}languageChanged(){}get isSafari(){const t=navigator.userAgent;return t.includes("Safari")&&t.includes("Version")&&!t.includes("Chrome")&&!t.includes("Edg")}_setupRtl(){const t=this.language.substring(0,2).toLowerCase();Cs.rtlLanguages.indexOf(t)>-1?this.rtl=!0:this.rtl=!1}scrimDisableAction(t){t.preventDefault(),t.stopPropagation()}_largeFont(t){this.largeFont=t.detail}_languageEvent(t){this.language=t.detail.language,window.appGlobals.locale=t.detail.language,void 0!==this.rtl&&this._setupRtl()}fire(t,e={},i=this){const r=new CustomEvent(t,{detail:e,bubbles:!0,composed:!0});i.dispatchEvent(r)}fireGlobal(t,e={}){this.fire(t,e,document)}addListener(t,e,i=this){i.addEventListener(t,e,!1)}addGlobalListener(t,e){this.addListener(t,e,document)}removeListener(t,e,i=this){i.removeEventListener(t,e)}removeGlobalListener(t,e){this.removeListener(t,e,document)}t(...t){const e=t[0];if(window.appGlobals&&window.appGlobals.i18nTranslation){let t=window.appGlobals.i18nTranslation.t(e);return t||(t=""),t}return e}$$(t){return this.shadowRoot?this.shadowRoot.querySelector(t):null}toggleHighContrast(){this.themeHighContrast=!this.themeHighContrast,window.appGlobals.theme.themeHighContrast=!window.appGlobals.theme.themeHighContrast,window.appGlobals.theme.themeHighContrast?(window.appGlobals.activity("Settings - high contrast mode"),localStorage.setItem(Cs.highContrastLocalStorageKey,"true")):(window.appGlobals.activity("Settings - non high contrast mode"),localStorage.removeItem(Cs.highContrastLocalStorageKey)),window.appGlobals.theme.themeChanged()}toggleDarkMode(){this.themeDarkMode=!this.themeDarkMode,window.appGlobals.theme.themeDarkMode=!window.appGlobals.theme.themeDarkMode,window.appGlobals.theme.themeDarkMode?(window.appGlobals.activity("Settings - dark mode"),localStorage.setItem(Cs.darkModeLocalStorageKey,"true")):(window.appGlobals.activity("Settings - light mode"),localStorage.removeItem(Cs.darkModeLocalStorageKey)),window.appGlobals.theme.themeChanged()}renderThemeToggle(t=!1){return U`<div class="layout vertical center-center lightDarkContainer"> ${this.themeDarkMode?U` <md-outlined-icon-button class="darkModeButton" @click="${this.toggleDarkMode}"><md-icon>light_mode</md-icon></md-outlined-icon-button> `:U` <md-outlined-icon-button class="darkModeButton" @click="${this.toggleDarkMode}"><md-icon>dark_mode</md-icon></md-outlined-icon-button> `} <div ?hidden="${t}">${this.t("Light/Dark")}</div> </div> <div class="layout vertical center-center lightDarkContainer" ?hidden="${this.isAppleDevice}"> ${this.themeHighContrast?U` <md-outlined-icon-button class="darkModeButton" @click="${this.toggleHighContrast}"><md-icon>contrast_rtl_off</md-icon></md-outlined-icon-button> `:U` <md-outlined-icon-button class="darkModeButton" @click="${this.toggleHighContrast}"><md-icon>contrast</md-icon></md-outlined-icon-button> `} <div ?hidden="${t}">${this.t("Contrast")}</div> </div>`}}Cs.darkModeLocalStorageKey="md3-yp-dark-mode",Cs.highContrastLocalStorageKey="md3-yp-high-contrast-mode",ks([dt({type:String})],Cs.prototype,"language",void 0),ks([dt({type:Boolean})],Cs.prototype,"wide",void 0),ks([dt({type:Boolean})],Cs.prototype,"rtl",void 0),ks([dt({type:Boolean})],Cs.prototype,"hasLlm",void 0),ks([dt({type:Boolean})],Cs.prototype,"largeFont",void 0),ks([dt({type:String})],Cs.prototype,"themeColor",void 0),ks([dt({type:Boolean})],Cs.prototype,"themeDarkMode",void 0),ks([dt({type:Boolean})],Cs.prototype,"themeHighContrast",void 0);var As=function(t,e,i,r){var o,n=arguments.length,s=n<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(n<3?o(s):n>3?o(e,i,s):o(e,i))||s);return n>3&&s&&Object.defineProperty(e,i,s),s};class Ss extends Cs{constructor(){super(...arguments),this.childType="solution",this.showEloRatings=!1,this.activeSubProblemIndex=null,this.activeSolutionIndex=null,this.activePolicyIndex=null,this.activePopulationIndex=0,this.firstTimeSubProblemClick=!0,this.activeGroupIndex=null,this.longDescriptions=!1,this.displayStates=new Map,this.subProblemListScrollPositionX=0,this.subProblemListScrollPositionY=0,this.subProblemColors=[],this.maxTopSearchQueries=4,this.maxUsedSearchResults=1e3}connectedCallback(){super.connectedCallback(),this.memory&&(2==this.memory.groupId&&(this.maxTopSearchQueries=4,this.maxUsedSearchResults=1e3),2===this.memory.groupId&&(this.longDescriptions=!0),this.memory.subProblemClientColors?this.subProblemColors=this.memory.subProblemClientColors:this.subProblemColors=["#0b60b9","#ee782d","#face2d","#50c363","#cf1103","#e9a633","#87559b","#3f5fce"])}updateRoutes(){this.fire("update-route",{activeSolutionIndex:this.activeSolutionIndex,activeSubProblemIndex:this.activeSubProblemIndex,activePopulationIndex:this.activePopulationIndex})}updated(t){super.updated(t),(t.has("activeSolutionIndex")||t.has("activePolicyIndex")||t.has("activeSubProblemIndex")||t.has("activePopulationIndex"))&&this.updateRoutes(),t.has("activeSubProblemIndex")&&null!==this.activeSubProblemIndex&&this.setSubProblemColor(this.activeSubProblemIndex)}exitSubProblemScreen(){window.scrollTo(this.subProblemListScrollPositionX,this.subProblemListScrollPositionY)}async toggleDisplayState(t){const e=window.scrollY,i=this.displayStates.get(t);this.displayStates.set(t,!i),this.requestUpdate(),await this.updateComplete,window.scrollTo(0,e)}toggleScores(){const t=this.$$("#showScores");this.showEloRatings=t.checked,window.psAppGlobals.activity("View memory - toggle scores "+(this.showEloRatings?"on":"off"))}fixImageUrlIfNeeded(t){return t.startsWith("https")?t:`https://${t}`}static get styles(){return[super.styles,n`.topContainer{margin-right:32px;margin-top:24px;margin-bottom:64px}.topContainer[is-header]{width:100%;max-width:100%}.subProblemImage[is-header]{margin-bottom:32px;margin-top:0}.subProblemImage[not-header]{margin-bottom:16px;margin-top:-16px;margin-left:8px;margin-right:8px}.problemStatement{font-size:22px;padding:16px;margin:16px 0;border-radius:16px;line-height:1.5;background-color:var(--md-sys-color-surface);color:var(--md-sys-color-on-surface);max-width:960px;margin-bottom:0;padding-top:8px}.problemStatementText{padding:16px;font-size:26px}.subProblemStatement,.subProblemTitle{font-size:22px;padding:8px;margin:8px;border-radius:12px;line-height:1.4;max-width:960px}.subProblemStatement{padding-left:0;padding-right:16px}.subProblemStatement[not-header]{background-color:var(--md-sys-color-surface);color:var(--md-sys-color-on-surface)}.subProblemStatement[is-header]{font-size:18px}.subProblemTitle{font-size:26px;padding-bottom:0;font-family:'Roboto Condensed',sans-serif}.subProblemMainTitle{font-size:32px;margin-left:8px}.subProblemMainTitle[is-header]{margin-left:8px}.headerContainer[is-header]{position:relative;width:100%}.subProblem{opacity:1;border-radius:12px;padding:16px;margin:16px 0;background-color:var(--md-sys-color-primary-container);color:var(--md-sys-color-on-primary-container);margin-bottom:8px;padding-bottom:16px}.subProblem[is-header]{cursor:default;background-color:var(--md-sys-color-secondary-container);color:var(--md-sys-color-on-secondary-container);max-height:206px;margin:0;max-width:960px;margin-top:24px}.subProblem[is-wordy]{max-height:300px}.headerContainer[is-wordy]{padding-bottom:28px}.subProblem[not-header]{cursor:pointer;background-color:var(--md-sys-color-surface);color:var(--md-sys-color-on-surface);max-width:450px;margin-top:16px;margin-bottom:16px;padding-top:0;margin-right:16px;margin-left:16px}.navButton[is-header]{position:absolute;bottom:0;left:0}.title{font-family:'Roboto Condensed',sans-serif;font-size:32px;margin-bottom:8px;color:var(--md-sys-color-secondary);background-color:var(--md-sys-color-on-secondary);text-align:center;padding:16px;border-radius:16px;max-width:960px;margin-top:32px;width:100%}.smallerTitle{font-size:22px}.subProblem.lessProminent{opacity:.55}.profileImage{width:50px;height:50px;min-height:50px;min-width:50px;margin-right:8px}.searchResults{background-color:var(--md-sys-color-surface);color:var(--md-sys-color-on-surface)}.row{padding:8px;margin:8px;border-radius:16px;background-color:var(--md-sys-color-on-primary);color:var(--md-sys-color-primary);min-width:350px;width:550px;font-size:16px;vertical-align:center;padding-bottom:16px}.row[current-user]{background-color:var(--md-sys-color-teriary);color:var(--md-sys-color-on-primary)}.column{padding:8px;padding-bottom:0}.index{font-size:16px}.ideaName{padding-bottom:0;width:100%}.nameAndScore{width:100%}.subProblemContainer{width:100%}.scores{margin-top:16px;padding:16px;padding-top:12px;padding-bottom:12px;margin-bottom:0;text-align:center;background-color:var(--md-sys-color-surface-variant);color:var(--md-sys-color-on-surface-variant);border-radius:24px;font-size:14px;line-height:1.2}.checkboxText{color:var(--md-sys-color-primary);margin-top:14px}md-checkbox{padding-bottom:8px}.loading{display:flex;justify-content:center;align-items:center;width:100%;height:100vh}.scores[hidden]{display:none}.winLosses{margin-top:4px}.scoreAndNameContainer{width:100%}.exportButton{margin-bottom:128px;margin-top:32px}.queryType{font-size:18px;margin-top:16px;margin-bottom:8px}.query{font-size:16px;margin-bottom:0;opacity:.7}.queryUsed{font-weight:500;opacity:1}.card{padding:16px;padding-top:0;margin:8px;border-radius:8px;width:100%;max-width:960px;color:var(--md-sys-color-on-surface)}.searchItem{opacity:.5}a{color:var(--md-sys-color-on-surface)}.selectedSearchItem{opacity:1}.searchTitle{margin-top:16px}.url{margin-bottom:16px;margin-top:4px}.problemStatementImage{margin-top:24px}@media (max-width:960px){.problemStatementText{font-size:22px}.headerContainer[is-wordy]{padding-bottom:16px}.subProblemMainTitle{font-size:28px;line-height:1.3}.subProblemStatement,.subProblemTitle{font-size:18px;max-width:100%}.subProblemStatement{padding-left:8px;padding-right:8px}.subProblem{max-width:100%!important;height:100%;max-height:100%;padding:8px;padding-bottom:0}.subProblemStatement{padding:0;padding-bottom:32px}.subProblem[is-header]{max-width:100%!important;height:100%;max-height:100%}.subProblemMainTitle[is-header]{margin:8px;font-size:24px}.navButton[is-header]{position:absolute;bottom:0;right:0}.subProblemImage[is-header]{margin-bottom:8px}.title{margin-top:16px;max-width:100%;margin-right:8px;margin-left:8px;font-size:26px;border-radius:16px;max-width:100%}.smallerTitle{font-size:16px;max-width:320px}.topContainer{margin-left:16px;margin-right:16px}.problemStatement{font-size:18px;max-width:100%;margin-bottom:16px}.queryType{font-size:16px;margin-top:12px;margin-bottom:6px}.query{font-size:14px;margin-bottom:3px}}@media (min-width:960px){.questionTitle{margin-bottom:16px}}@media (max-width:960px){.loading{width:100vw;height:100vh}.searchTitle{max-width:320px}.problemStatement{padding-left:0;padding-right:0;padding-bottom:0;margin:0;margin-top:8px;margin-bottom:16px}.problemStatementText{margin-top:0;padding-top:0;margin-bottom:0;padding-bottom:0;font-size:16px}}`]}isUsedSearch(t,e){return e<this.maxUsedSearchResults||t.position&&t.position<=this.maxUsedSearchResults||t.originalPosition&&t.originalPosition<=this.maxUsedSearchResults?"selectedSearchItem":""}closeSubProblem(t){this.activeSubProblemIndex=null,t.stopPropagation(),this.fire("yp-theme-color",this.subProblemColors[7])}setSubProblemColor(t){t<7&&this.fire("yp-theme-color",this.subProblemColors[t])}setSubProblem(t){this.activeSubProblemIndex=t,this.subProblemListScrollPositionX=window.scrollX,this.subProblemListScrollPositionY=window.scrollY,window.scrollTo(0,0),(this.firstTimeSubProblemClick||null===this.activePopulationIndex)&&(this.firstTimeSubProblemClick=!1,this.memory.subProblems.length>0&&this.memory.subProblems[this.activeSubProblemIndex].solutions&&(this.activePopulationIndex=this.memory.subProblems[this.activeSubProblemIndex].solutions.populations.length-1)),this.updateRoutes(),window.psAppGlobals.activity("Sub Problem - click")}toggleDarkMode(){this.fire("yp-theme-dark-mode",!this.themeDarkMode),window.psAppGlobals.activity("Solutions - toggle darkmode"),this.themeDarkMode?(window.psAppGlobals.activity("Settings - dark mode"),localStorage.setItem("md3-ps-dark-mode","true")):(window.psAppGlobals.activity("Settings - light mode"),localStorage.removeItem("md3-ps-dark-mode"))}renderThemeToggle(){return U`<div class="layout vertical center-center"> ${this.themeDarkMode?U` <md-outlined-icon-button class="darkModeButton" @click="${this.toggleDarkMode}"><md-icon>light_mode</md-icon></md-outlined-icon-button> `:U` <md-outlined-icon-button class="darkModeButton" @click="${this.toggleDarkMode}"><md-icon>dark_mode</md-icon></md-outlined-icon-button> `} </div> `}renderProblemStatement(t=void 0){return U` ${this.wide?j:U` ${this.renderThemeToggle()} `} ${this.memory.problemStatement.imageUrl?U` <img class="problemStatementImage" alt="${this.memory.problemStatement.imagePrompt}" title="${this.memory.problemStatement.imagePrompt}" width="${this.wide?650:340}" height="${this.wide?371:194}" src="${this.memory.problemStatement.imageUrl}"> `:U` <div class="title"> ${t||this.t("Problem Statement")} </div> `} <div class="problemStatement"> <div class="problemStatementText"> ${this.memory.problemStatement.description} </div> </div> `}renderSubProblemList(t,e=this.t("Sub Problems")){return U` <div class="topContainer layout vertical center-center"> ${this.renderProblemStatement()} <div class="title">${e}</div> <div class="subProblemContainer layout horizontal center-justified wrap"> ${t.map(((t,e)=>{const i=e>=7;return this.renderSubProblem(t,i,e)}))} </div> </div> `}getImgHeight(t){return this.wide?t?170:275:t?177:193}getImgWidth(t){return this.wide?t?298:481:t?310:350}renderSubProblemImageUrl(t,e){return U` <div class="layout horizontal ${t?"":"center-center"} subProblemImage"> <img loading="lazy" title="${e.imagePrompt}" alt="${e.imagePrompt}" ?is-header="${t}" ?not-header="${!t}" class="subProblemImage" height="${this.getImgHeight(t)}" width="${this.getImgWidth(t)}" src="${this.fixImageUrlIfNeeded(e.imageUrl)}"> </div> `}renderSubProblem(t,e,i,r=!1,o=!1,n=!1){return U` <div ?is-wordy="${r&&this.longDescriptions}" ?not-header="${!r}" ?is-header="${r}" class="subProblem ${e?"lessProminent":""}" @click="${()=>{r||this.setSubProblem(i)}}"> <div class="subProblemTitle layout ${r?this.wide?"horizontal":"vertical":"vertical center-center"}"> ${t.imageUrl&&!r||!this.wide?this.renderSubProblemImageUrl(r,t):j} <div ?is-wordy="${this.longDescriptions}" ?is-header="${r}" ?not-header="${!r}" class="layout headerContainer ${"horizontal"}"> <div class="layout vertical"> <div class="subProblemMainTitle" ?is-header="${r}"> ${t.title} </div> <div ?hidden="${!r}" ?is_header="${r}" class="subProblemStatement"> ${t.displayDescription||t.description} </div> </div> ${t.imageUrl&&r&&this.wide?this.renderSubProblemImageUrl(r,t):j} <div ?is-header="${r}" class="navButton ${r?"horizontal flex":""}"> ${r&&!n?U` <md-icon-button aria-label="Previous" .disabled="${0===this.activeSubProblemIndex}" @click="${t=>{t.stopPropagation(),this.activeSubProblemIndex>0&&(this.activeSubProblemIndex-=1,this.setSubProblemColor(this.activeSubProblemIndex),this.activeGroupIndex=null,window.psAppGlobals.activity("Sub Problem - click previous"))}}"> <md-icon>navigate_before</md-icon> </md-icon-button> <md-icon-button id="nextButton" aria-label="Next" .disabled="${6===this.activeSubProblemIndex}" @click="${t=>{t.stopPropagation(),!this.$$("#nextButton").disabled&&this.activeSubProblemIndex<6&&(this.activeSubProblemIndex+=1,this.setSubProblemColor(this.activeSubProblemIndex),this.activeGroupIndex=null,window.psAppGlobals.activity("Sub Problem - click next"))}}"> <md-icon>navigate_next</md-icon> </md-icon-button> <md-icon-button aria-label="Close" @click="${t=>{t.stopPropagation(),this.activeSubProblemIndex=null,this.fire("yp-theme-color",this.subProblemColors[7]),this.exitSubProblemScreen(),this.activeGroupIndex=null,window.psAppGlobals.activity("Sub Problem - exit")}}"> <md-icon>close</md-icon> </md-icon-button> `:j} </div> </div> </div> <div ?hidden="${r}" class="subProblemStatement"> ${t.displayDescription||t.description} </div> ${o&&!r?U` <div class="subProblemStatement"> ${t.whyIsSubProblemImportant} </div> `:j} </div> `}renderSearchQueries(t,e){return e?U` <div class="title smallerTitle layout horizontal center-center" @click="${e=>{e.stopPropagation(),this.toggleDisplayState(t)}}"> <div class="flex"></div> <div>${t}</div> <div class="flex"></div> <md-icon-button><md-icon>expand_more</md-icon></md-icon-button> </div> <div class="searchResults layout vertical self-start"> ${this.displayStates.get(t)?Object.entries(e).map((([t,e])=>0===e.length?j:U` <div class="queryType">${t}</div> ${e.map(((t,e)=>U` <div class="column"> <div class="query ${e<this.maxTopSearchQueries?"queryUsed":""}"> ${t} </div> </div> `))} `)):j} </div> `:j}getUrlInRightSize(t){return!this.wide&&t.length>30?`${t.substring(0,30)}...`:t}renderSearchResults(t,e){return e&&e.pages?U` <div class="title smallerTitle layout horizontal" @click="${e=>{e.stopPropagation(),this.toggleDisplayState(t)}}"> <div class="flex"></div> <div>${t}</div> <div class="flex"></div> <md-icon-button><md-icon>expand_more</md-icon></md-icon-button> </div> <div class="searchResults"> ${this.displayStates.get(t)?Object.entries(e.pages).map((([t,e])=>0===e.length?j:U` <div class="queryType">${t}</div> <div class="card"> ${e.map(((t,e)=>U` <div class="searchItem ${this.isUsedSearch(t,e)}"> <div class="searchTitle">${t.title}</div> <div class="url"> <a target="blank" href="${t.url||t.link}" target="_blank"> ${this.getUrlInRightSize(t.url||t.link)} </a> </div> </div> `))} </div> `)):j} </div> `:j}}As([dt({type:Object})],Ss.prototype,"memory",void 0),As([dt({type:String})],Ss.prototype,"childType",void 0),As([dt({type:Boolean})],Ss.prototype,"showEloRatings",void 0),As([dt({type:Number})],Ss.prototype,"activeSubProblemIndex",void 0),As([dt({type:Number})],Ss.prototype,"activeSolutionIndex",void 0),As([dt({type:Number})],Ss.prototype,"activePolicyIndex",void 0),As([dt({type:Number})],Ss.prototype,"activePopulationIndex",void 0),As([dt({type:Boolean})],Ss.prototype,"firstTimeSubProblemClick",void 0),As([dt({type:Number})],Ss.prototype,"activeGroupIndex",void 0),As([dt({type:Boolean})],Ss.prototype,"longDescriptions",void 0),As([dt({type:Object})],Ss.prototype,"router",void 0),As([ht()],Ss.prototype,"displayStates",void 0);const Ts=1e-5,Ps=.03/1e3,Es=7e4,Is=15e4,Ls=1e4;class Os{static simplifyEvidenceType(t){let e=t.replace(/allPossible/g,"").replace(/IdentifiedInTextContext/g,"");return e=e.charAt(0).toLowerCase()+e.slice(1),e}static simplifyRootCauseType(t){let e=t.replace(/allPossible/g,"").replace(/IdentifiedInTextContext/g,"");return e=e.charAt(0).toLowerCase()+e.slice(1),"rootCausesCaseStudies"!=e&&(e=e.slice(0,-1)),e}}Os.createSubProblemsModel={name:"gpt-4-1106-preview",temperature:.7,maxOutputTokens:4096,tokenLimit:Es,inTokenCostUSD:Ts,outTokenCostUSD:Ps,limitTPM:Is,limitRPM:Ls,verbose:!0},Os.policiesSeedModel={name:"gpt-4-1106-preview",temperature:.7,maxOutputTokens:4096,tokenLimit:Es,inTokenCostUSD:Ts,outTokenCostUSD:Ps,limitTPM:Is,limitRPM:Ls,verbose:!1},Os.analyseExternalSolutionsModel={name:"gpt-4-1106-preview",temperature:0,maxOutputTokens:256,tokenLimit:Es,inTokenCostUSD:Ts,outTokenCostUSD:Ps,limitTPM:Is,limitRPM:Ls,verbose:!1},Os.createEntitiesModel={name:"gpt-4-1106-preview",temperature:.7,maxOutputTokens:2048,tokenLimit:Es,inTokenCostUSD:Ts,outTokenCostUSD:Ps,limitTPM:Is,limitRPM:Ls,verbose:!0},Os.topicMapSolutionsModel={inTokenCostsUSD:1e-4},Os.createSolutionImagesModel={name:"gpt-4-1106-preview",temperature:.7,maxOutputTokens:256,tokenLimit:Es,inTokenCostUSD:Ts,outTokenCostUSD:Ps,limitTPM:Is,limitRPM:Ls,verbose:!1},Os.createSearchQueriesModel={name:"gpt-4-1106-preview",temperature:.7,maxOutputTokens:1024,tokenLimit:Es,inTokenCostUSD:Ts,outTokenCostUSD:Ps,limitTPM:Is,limitRPM:Ls,verbose:!0},Os.createEvidenceSearchQueriesModel={name:"gpt-4-1106-preview",temperature:.5,maxOutputTokens:1024,tokenLimit:Es,inTokenCostUSD:Ts,outTokenCostUSD:Ps,limitTPM:Is,limitRPM:Ls,verbose:!1},Os.createRootCauseSearchQueriesModel={name:"gpt-4-1106-preview",temperature:.7,maxOutputTokens:1024,tokenLimit:Es,inTokenCostUSD:Ts,outTokenCostUSD:Ps,limitTPM:Is,limitRPM:Ls,verbose:!0},Os.searchQueryRankingsModel={name:"gpt-4-1106-preview",temperature:0,maxOutputTokens:2,tokenLimit:Es,inTokenCostUSD:Ts,outTokenCostUSD:Ps,limitTPM:Is,limitRPM:Ls,verbose:!1},Os.searchResultsRankingsModel={name:"gpt-4-1106-preview",temperature:0,maxOutputTokens:2,tokenLimit:Es,inTokenCostUSD:Ts,outTokenCostUSD:Ps,limitTPM:Is,limitRPM:Ls,verbose:!1},Os.subProblemsRankingsModel={name:"gpt-4-1106-preview",temperature:0,maxOutputTokens:2,tokenLimit:Es,inTokenCostUSD:Ts,outTokenCostUSD:Ps,limitTPM:Is,limitRPM:Ls,verbose:!1},Os.entitiesRankingsModel={name:"gpt-4-1106-preview",temperature:0,maxOutputTokens:2,tokenLimit:Es,inTokenCostUSD:Ts,outTokenCostUSD:Ps,limitTPM:Is,limitRPM:Ls,verbose:!0},Os.solutionsRankingsModel={name:"gpt-4-1106-preview",temperature:0,maxOutputTokens:2,tokenLimit:Es,inTokenCostUSD:Ts,outTokenCostUSD:Ps,limitTPM:Is,limitRPM:Ls,verbose:!1},Os.prosConsRankingsModel={name:"gpt-4-1106-preview",temperature:0,maxOutputTokens:2,tokenLimit:Es,inTokenCostUSD:Ts,outTokenCostUSD:Ps,limitTPM:Is,limitRPM:Ls,verbose:!1},Os.getPageAnalysisModel={name:"gpt-3.5-turbo-1106",temperature:0,maxOutputTokens:2048,tokenLimit:16385,inTokenCostUSD:1e-6,outTokenCostUSD:2e-6,limitTPM:1e6,limitRPM:1e4,verbose:!1},Os.getSolutionsPagesAnalysisModel={name:"gpt-4-1106-preview",temperature:0,maxOutputTokens:4e3,tokenLimit:Es,inTokenCostUSD:Ts,outTokenCostUSD:Ps,limitTPM:Is,limitRPM:Ls,verbose:!1},Os.rankWebSolutionsModel={name:"gpt-4-1106-preview",temperature:0,maxOutputTokens:2048,tokenLimit:Es,inTokenCostUSD:Ts,outTokenCostUSD:Ps,limitTPM:Is,limitRPM:Ls,verbose:!1},Os.reduceSubProblemsModel={name:"gpt-4-1106-preview",temperature:.1,maxOutputTokens:4096,tokenLimit:Es,inTokenCostUSD:Ts,outTokenCostUSD:Ps,limitTPM:Is,limitRPM:Ls,verbose:!1},Os.rateWebEvidenceModel={name:"gpt-4-1106-preview",temperature:0,maxOutputTokens:2048,tokenLimit:4096,inTokenCostUSD:Ts,outTokenCostUSD:Ps,limitTPM:Is,limitRPM:Ls,verbose:!1},Os.rateWebRootCausesModel={name:"gpt-4-1106-preview",temperature:0,maxOutputTokens:2048,tokenLimit:Es,inTokenCostUSD:Ts,outTokenCostUSD:Ps,limitTPM:Is,limitRPM:Ls,verbose:!1},Os.rankWebEvidenceModel={name:"gpt-4-1106-preview",temperature:0,maxOutputTokens:2048,tokenLimit:Es,inTokenCostUSD:Ts,outTokenCostUSD:Ps,limitTPM:Is,limitRPM:Ls,verbose:!1},Os.rankWebRootCausesModel={name:"gpt-4-1106-preview",temperature:0,maxOutputTokens:2048,tokenLimit:Es,inTokenCostUSD:Ts,outTokenCostUSD:Ps,limitTPM:Is,limitRPM:Ls,verbose:!1},Os.getRefinedEvidenceModel={name:"gpt-4-1106-preview",temperature:0,maxOutputTokens:2048,tokenLimit:Es,inTokenCostUSD:Ts,outTokenCostUSD:Ps,limitTPM:Is,limitRPM:Ls,verbose:!1},Os.getRefinedRootCausesModel={name:"gpt-4-1106-preview",temperature:0,maxOutputTokens:3048,tokenLimit:Es,inTokenCostUSD:Ts,outTokenCostUSD:Ps,limitTPM:Is,limitRPM:Ls,verbose:!1},Os.reapSolutionsModel={name:"gpt-4-1106-preview",temperature:0,maxOutputTokens:128,tokenLimit:Es,inTokenCostUSD:Ts,outTokenCostUSD:Ps,limitTPM:Is,limitRPM:Ls,verbose:!1},Os.groupSolutionsModel={name:"gpt-4-1106-preview",temperature:0,maxOutputTokens:4095,tokenLimit:Es,inTokenCostUSD:Ts,outTokenCostUSD:Ps,limitTPM:Is,limitRPM:Ls,verbose:!1},Os.rateSolutionsModel={name:"gpt-4-1106-preview",temperature:0,maxOutputTokens:1024,tokenLimit:Es,inTokenCostUSD:Ts,outTokenCostUSD:Ps,limitTPM:Is,limitRPM:Ls,verbose:!1},Os.createSolutionsModel={name:"gpt-4-1106-preview",temperature:.5,maxOutputTokens:1200,tokenLimit:Es,inTokenCostUSD:Ts,outTokenCostUSD:Ps,limitTPM:Is,limitRPM:Ls,verbose:!1},Os.evolveSolutionsModel={name:"gpt-4-1106-preview",temperature:.5,maxOutputTokens:1200,tokenLimit:Es,inTokenCostUSD:Ts,outTokenCostUSD:Ps,limitTPM:Is,limitRPM:Ls,verbose:!1},Os.createProsConsModel={name:"gpt-4-1106-preview",temperature:.7,maxOutputTokens:2048,tokenLimit:Es,inTokenCostUSD:Ts,outTokenCostUSD:Ps,limitTPM:Is,limitRPM:Ls,verbose:!1},Os.evolutionMutateModel={name:"gpt-4-1106-preview",temperature:.7,maxOutputTokens:1024,tokenLimit:Es,inTokenCostUSD:Ts,outTokenCostUSD:Ps,limitTPM:Is,limitRPM:Ls,verbose:!1},Os.evolutionRecombineModel={name:"gpt-4-1106-preview",temperature:.7,maxOutputTokens:1024,tokenLimit:Es,inTokenCostUSD:Ts,outTokenCostUSD:Ps,limitTPM:Is,limitRPM:Ls,verbose:!1},Os.validationModel={name:"gpt-4-1106-preview",temperature:0,maxOutputTokens:1024,tokenLimit:Es,inTokenCostUSD:Ts,outTokenCostUSD:Ps,limitTPM:Is,limitRPM:Ls,verbose:!1},Os.getPageCacheExpiration=14515200,Os.maxSubProblems=7,Os.maxNumberGeneratedOfEntities=7,Os.maxStabilityRetryCount=14,Os.mainLLMmaxRetryCount=40,Os.limitedLLMmaxRetryCount=10,Os.rankingLLMmaxRetryCount=40,Os.maxTopEntitiesToSearch=4,Os.maxTopEntitiesToRender=3,Os.maxTopQueriesToSearchPerType=5,Os.maxTopEvidenceQueriesToSearchPerType=4,Os.maxTopRootCauseQueriesToSearchPerType=5,Os.maxRootCausePercentOfSearchResultWebPagesToGet=.65,Os.maxRootCausesToUseForRatingRootCauses=5,Os.topWebPagesToGetForRefineRootCausesScan=10,Os.mainSearchRetryCount=40,Os.maxDalleRetryCount=7,Os.maxTopWebPagesToGet=5,Os.maxBingSearchResults=10,Os.maxTopProsConsUsedForRating=2,Os.maxNumberGeneratedProsConsForSolution=3,Os.minSleepBeforeBrowserRequest=50,Os.maxAdditionalRandomSleepBeforeBrowserRequest=100,Os.numberOfSearchTypes=4,Os.webPageNavTimeout=3e4,Os.subProblemsRankingMinNumberOfMatches=10,Os.currentUserAgent="Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/119.0.0.0 Safari/537.36",Os.topItemsToKeepForTopicClusterPruning=3,Os.chances={createSolutions:{searchQueries:{useMainProblemSearchQueries:.01,useOtherSubProblemSearchQueries:.01,useSubProblemSearchQueries:.38,useRandomEntitySearchQueries:.58},webSolutions:{top:.05,topThree:.25,topSeven:.5,all:.2},notUsingTopSearchQueries:.1,vectorSearchAcrossAllProblems:.001}},Os.maxTopSearchQueriesForSolutionCreation=8,Os.maxPercentOfSolutionsWebPagesToGet=.25,Os.limits={webPageVectorResultsForNewSolutions:14,useRandomTopFromVectorSearchResults:14},Os.enable={refine:{createSubProblems:!0,createEntities:!0,createSolutions:!0,createProsCons:!0,policiesSeed:!0}},Os.evolution={populationSize:80,limitTopTopicClusterElitesToEloRating:850,keepElitePercent:.1,randomImmigrationPercent:.4,mutationOffspringPercent:.35,crossoverPercent:.15,lowMutationRate:.5,mediumMutationRate:.3,highMutationRate:.2,selectParentTournamentSize:7,crossoverMutationPercent:.05},Os.maxPercentOfEloMatched=.75,Os.minimumNumberOfPairwiseVotesForPopulation=10,Os.maxNumberOfPairwiseRankingPrompts=Os.evolution.populationSize*Os.minimumNumberOfPairwiseVotesForPopulation,Os.maxTopSolutionsToCreatePolicies=3,Os.maxTopPoliciesToProcess=1,Os.maxEvidenceToUseForRatingEvidence=5,Os.policyEvidenceFieldTypes=["allPossiblePositiveEvidenceIdentifiedInTextContext","allPossibleNegativeEvidenceIdentifiedInTextContext","allPossibleNeutralEvidenceIdentifiedInTextContext","allPossibleEconomicEvidenceIdentifiedInTextContext","allPossibleScientificEvidenceIdentifiedInTextContext","allPossibleCulturalEvidenceIdentifiedInTextContext","allPossibleEnvironmentalEvidenceIdentifiedInTextContext","allPossibleLegalEvidenceIdentifiedInTextContext","allPossibleTechnologicalEvidenceIdentifiedInTextContext","allPossibleGeopoliticalEvidenceIdentifiedInTextContext","allPossibleCaseStudiesIdentifiedInTextContext","allPossibleStakeholderOpinionsIdentifiedInTextContext","allPossibleExpertOpinionsIdentifiedInTextContext","allPossiblePublicOpinionsIdentifiedInTextContext","allPossibleHistoricalContextIdentifiedInTextContext","allPossibleEthicalConsiderationsIdentifiedInTextContext","allPossibleLongTermImpactIdentifiedInTextContext","allPossibleShortTermImpactIdentifiedInTextContext","allPossibleLocalPerspectiveIdentifiedInTextContext","allPossibleGlobalPerspectiveIdentifiedInTextContext","allPossibleCostAnalysisIdentifiedInTextContext","allPossibleImplementationFeasibilityIdentifiedInTextContext"],Os.rootCauseFieldTypes=["allPossibleHistoricalRootCausesIdentifiedInTextContext","allPossibleEconomicRootCausesIdentifiedInTextContext","allPossibleScientificRootCausesIdentifiedInTextContext","allPossibleCulturalRootCausesIdentifiedInTextContext","allPossibleSocialRootCausesIdentifiedInTextContext","allPossibleEnvironmentalRootCausesIdentifiedInTextContext","allPossibleLegalRootCausesIdentifiedInTextContext","allPossibleTechnologicalRootCausesIdentifiedInTextContext","allPossibleGeopoliticalRootCausesIdentifiedInTextContext","allPossibleEthicalRootCausesIdentifiedInTextContext","allPossibleRootCausesCaseStudiesIdentifiedInTextContext"];var Rs=function(t,e,i,r){var o,n=arguments.length,s=n<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(n<3?o(s):n>3?o(e,i,s):o(e,i))||s);return n>3&&s&&Object.defineProperty(e,i,s),s};let $s=class extends Ss{constructor(){super(...arguments),this.maxNumberOfTopEntities=4}async connectedCallback(){super.connectedCallback(),window.psAppGlobals.activity("Web research - open"),1===this.memory.groupId&&(this.maxNumberOfTopEntities=3)}updated(t){super.updated(t)}disconnectedCallback(){super.disconnectedCallback(),window.psAppGlobals.activity("Web research - close")}static get styles(){return[super.styles,n`.subProblemContainer{margin-top:64px}.entity{width:940px;max-width:100%;color:var(--md-sys-color-on-surface);background-color:var(--md-sys-color-surface)}.entity[not-scanned]{opacity:.5}.entityName{margin-top:24px;margin-bottom:8px;width:100%;font-size:20px;font-weight:700}.entityName[not-scanned]{font-weight:300}.negPos{width:100%;margin-top:16px}@media (max-width:960px){.entity{width:100%}.entityName{font-size:18px}}`]}render(){return U` <div class="topContainer layout vertical center-center"> ${this.renderProblemStatement(this.t("Automated Web Research"))} ${this.renderSearchQueries(this.t("Search queries for problem statement"),this.memory.problemStatement.searchQueries)} ${this.renderSearchResults(this.t("Webpages scanned for solutions to problem statement"),this.memory.problemStatement.searchResults)} ${this.renderSubProblemsWithAll()} </div> `}renderEntities(t){return U` ${t.entities.map(((t,e)=>{const i=e>=this.maxNumberOfTopEntities;return U` <div class="layout vertical center-center"> <div class="entity ${i?"lessProminent":""}" ?not-scanned="${i}"> <div class="entityName" ?not-scanned="${i}"> ${t.name} </div> <div class="negPos"> ${t.negativeEffects?.length>0?U` <div> Negative Effects: <ul> ${t.negativeEffects?.map((t=>U` <li>${t}</li> `))} </ul> </div> `:j} ${t.positiveEffects?.length>0?U` <div> Positive Effects: <ul> ${t.positiveEffects?.map((t=>U` <li>${t}</li> `))} </ul> </div> `:j} ${i?j:U` ${this.renderSearchQueries(this.t("Search queries for entity"),t.searchQueries)} ${this.renderSearchResults(this.t("Webpages scanned for solutions to entites problems"),t.searchResults)} `} </div> </div> </div> `}))} `}renderSubProblemsWithAll(){const t=this.memory.subProblems.slice(0,Os.maxSubProblems);return U` ${t.map((t=>U` <div class="subProblemContainer layout vertical center-center"> ${this.renderSubProblem(t,!1,0,!0,!0,!0)} ${this.renderSearchQueries(this.t("Search queries for sub problem"),t.searchQueries)} ${this.renderSearchResults(this.t("Webpages scanned for solutions to sub problem"),t.searchResults)} ${this.renderEntities(t)} </div> `))} `}};$s=Rs([at("ps-web-research")],$s);class Ms{constructor(){this.wide=!1,this.installMediaQueryWatcher=(t,e)=>{let i=window.matchMedia(t);i.addListener((t=>e(t.matches))),e(i.matches)},this.installMediaQueryWatcher("(min-width: 900px)",(t=>{this.wide=t})),this.addGlobalListener("yp-language-loaded",this._languageEvent.bind(this)),window.appGlobals&&window.appGlobals.i18nTranslation&&window.appGlobals.locale?this.language=window.appGlobals.locale:this.language="en"}_languageEvent(t){const e=t.detail;this.language=e.language,window.appGlobals.locale=e.language}fire(t,e={},i){const r=new CustomEvent(t,{detail:e,bubbles:!0,composed:!0});i.dispatchEvent(r)}fireGlobal(t,e={}){this.fire(t,e,document)}addListener(t,e,i){i.addEventListener(t,e,!1)}addGlobalListener(t,e){this.addListener(t,e,document)}showToast(t,e=4e3){window.appDialogs.getDialogAsync("masterToast",(i=>{i.labelText=t,i.timeoutMs=e,i.open=!0}))}removeListener(t,e,i){i.removeEventListener(t,e)}removeGlobalListener(t,e){this.removeListener(t,e,document)}t(...t){const e=t[0];if(window.appGlobals.i18nTranslation){let t=window.appGlobals.i18nTranslation.t(e);return t||(t=""),t}return""}}class Ns extends Ms{constructor(){super(...arguments),this.baseUrlPath="/api"}static transformCollectionTypeToApi(t){let e;switch(t){case"domain":e="domains";break;case"community":e="communities";break;case"group":e="groups";break;case"post":e="posts";break;case"user":e="users";break;default:e="",console.error(`Cant find collection type transform for ${t}`)}return e}async fetchWrapper(t,e={},i=!0,r=void 0,o=!1){if(e.headers||(e.headers={"Content-Type":"application/json"}),navigator.onLine||"POST"!==e.method||void 0===window.fetch){if(!navigator.onLine&&["POST","PUT","DELETE"].indexOf(e.method)>-1)throw this.showToast(this.t("youAreOfflineCantSend")),new Error("offlineSendLater");{const n=await fetch(t,e);return await this.handleResponse(n,i,r,o)}}throw window.appGlobals.offline.sendWhenOnlineNext({body:e.body,method:e.method,params:{},url:t}),new Error("offlineSendLater")}async handleResponse(t,e,i=void 0,r=!1){if(t.ok){let o=null;try{o=await t.json()}catch(o){if(200===t.status||"OK"===t.statusText);else if(this.fireGlobal("yp-network-error",{response:t,jsonError:o,showUserError:e,errorId:i}),r)throw o}return null===o||o}if(this.fireGlobal("yp-network-error",{response:t,showUserError:e,errorId:i}),r)throw t.statusText;return null}}class Ds extends Ns{boot(){return this.fetchWrapper(this.baseUrlPath+"/domains")}isloggedin(){return this.fetchWrapper(this.baseUrlPath+"/users/loggedInUser/isloggedin")}getAdminRights(){return this.fetchWrapper(this.baseUrlPath+"/users/loggedInUser/adminRights")}getMemberships(){return this.fetchWrapper(this.baseUrlPath+"/users/loggedInUser/memberships")}getAdminRightsWithNames(){return this.fetchWrapper(this.baseUrlPath+"/users/loggedInUser/adminRightsWithNames")}getMembershipsWithNames(){return this.fetchWrapper(this.baseUrlPath+"/users/loggedInUser/membershipsWithNames")}logout(){return this.fetchWrapper(this.baseUrlPath+"/users/logout",{method:"POST"})}setLocale(t){return this.fetchWrapper(this.baseUrlPath+"/users/loggedInUser/setLocale",{method:"PUT",body:JSON.stringify(t)},!1)}getRecommendationsForGroup(t){return this.fetchWrapper(this.baseUrlPath+`/recommendations/groups/${t}/getPostRecommendations`,{method:"PUT",body:JSON.stringify({})})}hasVideoUploadSupport(){return this.fetchWrapper(this.baseUrlPath+"/videos/hasVideoUploadSupport")}hasAudioUploadSupport(){return this.fetchWrapper(this.baseUrlPath+"/audios/hasAudioUploadSupport")}sendVideoView(t){return this.fetchWrapper(this.baseUrlPath+"/videos/videoView",{method:"PUT",body:JSON.stringify(t)},!1)}sendAudioView(t){return this.fetchWrapper(this.baseUrlPath+"/audios/videoView",{method:"PUT",body:JSON.stringify(t)},!1)}createActivityFromApp(t){return this.fetchWrapper(this.baseUrlPath+"/users/createActivityFromApp",{method:"POST",body:JSON.stringify(t)},!1)}marketingTrackingOpen(t,e){return this.fetchWrapper(this.baseUrlPath+`/groups/${t}/marketingTrackingOpen`,{method:"POST",body:JSON.stringify(e)},!1)}createApiKey(){return this.fetchWrapper(this.baseUrlPath+"/users/createApiKey",{method:"POST",body:JSON.stringify({})},!1)}triggerTrackingGoal(t,e){return this.fetchWrapper(this.baseUrlPath+`/groups/${t}/triggerTrackingGoal`,{method:"POST",body:JSON.stringify(e)},!1)}startGeneratingAiImage(t,e,i,r){return this.fetchWrapper(this.baseUrlPath+`/${Ds.transformCollectionTypeToApi(t)}/${e}/start_generating/ai_image`,{method:"POST",body:JSON.stringify({prompt:r,imageType:i})})}getPromoterRights(){return this.fetchWrapper(this.baseUrlPath+"/users/loggedInUser/promoterRights")}pollForGeneratingAiImage(t,e,i){return this.fetchWrapper(this.baseUrlPath+`/${Ds.transformCollectionTypeToApi(t)}/${e}/${i}/poll_for_generating_ai_image`)}getCollection(t,e){return this.fetchWrapper(this.baseUrlPath+`/${Ds.transformCollectionTypeToApi(t)}/${e}`)}getCategoriesCount(t,e){return this.fetchWrapper(this.baseUrlPath+`/groups/${t}/categories_count/${e}`)}getGroupPosts(t){return this.fetchWrapper(t)}getPost(t){return this.fetchWrapper(this.baseUrlPath+`/post/${t}`)}getGroup(t){return this.fetchWrapper(this.baseUrlPath+`/groups/${t}`)}endorsePost(t,e,i){return this.fetchWrapper(this.baseUrlPath+`/posts/${t}/endorse`,{method:e,body:JSON.stringify(i)},!1)}getHasNonOpenPosts(t){return this.fetchWrapper(this.baseUrlPath+`/groups/${t}/checkNonOpenPosts`)}getHelpPages(t,e){return this.fetchWrapper(this.baseUrlPath+`/${Ds.transformCollectionTypeToApi(t)}/${e}/pages`)}getTranslation(t){return this.fetchWrapper(t)}getTranslatedRegistrationQuestions(t,e){return this.fetchWrapper(this.baseUrlPath+`/groups/${t}/translatedRegistrationQuestions?targetLanguage=${e}`)}sendRegistrationQuestions(t){return this.fetchWrapper(this.baseUrlPath+"/users/setRegistrationAnswers",{method:"PUT",body:JSON.stringify({registration_answers:t})},!0)}savePostTranscript(t,e){return this.fetchWrapper(this.baseUrlPath+`/posts/${t}/editTranscript`,{method:"PUT",body:JSON.stringify(e)},!1)}getPostTranscriptStatus(t,e){return this.fetchWrapper(this.baseUrlPath+`/groups/${t}/categories_count/${e}`)}addPoint(t,e){return this.fetchWrapper(this.baseUrlPath+`/points/${t}`,{method:"POST",body:JSON.stringify(e)},!1)}completeMediaPoint(t,e,i){return this.fetchWrapper(this.baseUrlPath+`/${t}/${e}/completeAndAddToPoint`,{method:"POST",body:JSON.stringify(i)},!1)}completeMediaPost(t,e,i,r){return this.fetchWrapper(this.baseUrlPath+`/${t}/${i}/completeAndAddToPost`,{method:e,body:JSON.stringify(r)},!1)}getPoints(t){return this.fetchWrapper(this.baseUrlPath+`/posts/${t}/points`)}getMorePoints(t,e,i){return this.fetchWrapper(this.baseUrlPath+`/posts/${t}/points?offsetUp=${e}&offsetDown=${i}`)}getNewPoints(t,e){return this.fetchWrapper(this.baseUrlPath+`/posts/${t}/newPoints?latestPointCreatedAt=${e}`)}getSurveyTranslations(t,e){return this.fetchWrapper(this.baseUrlPath+`/posts/${t.id}/translatedSurvey?targetLanguage=${e}&groupId=${t.Group.id}`)}getSurveyQuestionsTranslations(t,e){return this.fetchWrapper(this.baseUrlPath+`/groups/${t.id}/translatedSurveyQuestions?targetLanguage=${e}`)}getVideoFormatsAndImages(t){return this.fetchWrapper(this.baseUrlPath+`/videos/${t}/formatsAndImages`)}getGroupConfiguration(t){return this.fetchWrapper(this.baseUrlPath+`/groups/${t}/configuration`)}setVideoCover(t,e){return this.fetchWrapper(this.baseUrlPath+`/videos/${t}/setVideoCover`,{method:"PUT",body:JSON.stringify(e)},!1)}getTranscodingJobStatus(t,e,i){return this.fetchWrapper(this.baseUrlPath+`/${t}/${e}/getTranscodingJobStatus`,{method:"PUT",body:JSON.stringify({jobId:i})})}startTranscoding(t,e,i,r){return this.fetchWrapper(this.baseUrlPath+`/${t}/${e}/${i}`,{method:"POST",body:JSON.stringify(r)},!1)}createPresignUrl(t,e={}){return this.fetchWrapper(t,{method:"POST",body:JSON.stringify(e)},!1)}updatePoint(t,e){return this.fetchWrapper(this.baseUrlPath+`/points/${t}`,{method:"PUT",body:JSON.stringify(e)},!1)}updatePointAdminComment(t,e,i){return this.fetchWrapper(this.baseUrlPath+`/groups/${t}/${e}/adminComment`,{method:"PUT",body:JSON.stringify(i)},!1)}deletePoint(t){return this.fetchWrapper(this.baseUrlPath+`/points/${t}`,{method:"DELETE",body:JSON.stringify({})},!1)}checkPointTranscriptStatus(t,e){return this.fetchWrapper(this.baseUrlPath+`/$points/${e}/${t}`)}registerUser(t){return this.fetchWrapper(this.baseUrlPath+"/users/register",{method:"POST",body:JSON.stringify(t)},!1)}async registerAnonymously(t){return this.fetchWrapper(this.baseUrlPath+"/users/register_anonymously",{method:"POST",body:JSON.stringify(t)},!1)}loginUser(t){return this.fetchWrapper(this.baseUrlPath+"/users/login",{method:"POST",body:JSON.stringify(t)},!1)}getAoiTotalStats(t){return this.fetchWrapper(`/api/allOurIdeas/${t}/getAoiSiteStats`)}submitForm(t,e,i,r){return this.fetchWrapper(this.baseUrlPath+t,{method:e,headers:i,body:r},!1,"formError")}getSurveyGroup(t){return this.fetchWrapper(this.baseUrlPath+`/groups/${t}/survey`)}postSurvey(t,e){return this.fetchWrapper(this.baseUrlPath+`/groups/${t}/survey`,{method:"POST",body:JSON.stringify(e)},!1)}deleteActivity(t,e,i){return this.fetchWrapper(this.baseUrlPath+`/${t}/${e}/${i}/delete_activity`,{method:"DELETE",body:JSON.stringify({})},!1)}getAcActivities(t){return this.fetchWrapper(t)}getRecommendations(t,e){return this.fetchWrapper(this.baseUrlPath+`/recommendations/${t}/${e}`)}setNotificationsAsViewed(t){return this.fetchWrapper(this.baseUrlPath+"/notifications/setIdsViewed",{method:"PUT",body:JSON.stringify(t)},!1)}setNotificationsAllAsViewed(){return this.fetchWrapper(this.baseUrlPath+"/notifications/markAllViewed",{method:"PUT",body:JSON.stringify({})},!1)}getAcNotifications(t){return this.fetchWrapper(t)}getComments(t,e){return this.fetchWrapper(this.baseUrlPath+`/${t}/${e}/comments`)}getCommentsCount(t,e){return this.fetchWrapper(this.baseUrlPath+`/${t}/${e}/commentsCount`)}postComment(t,e,i){return this.fetchWrapper(this.baseUrlPath+`/${t}/${e}/comment`,{method:"POST",body:JSON.stringify(i)},!1)}setPointQuality(t,e,i){return this.fetchWrapper(this.baseUrlPath+`/points/${t}/pointQuality`,{method:e,body:JSON.stringify(i)},!1)}postNewsStory(t,e){return this.fetchWrapper(t,{method:"POST",body:JSON.stringify(e)},!1)}pointUrlPreview(t){return this.fetchWrapper(this.baseUrlPath+`/points/url_preview?${t}`)}disconnectSamlLogin(){return this.fetchWrapper(this.baseUrlPath+"/users/disconnectSamlLogin",{method:"DELETE",body:JSON.stringify({})},!1)}disconnectFacebookLogin(){return this.fetchWrapper(this.baseUrlPath+"/users/disconnectFacebookLogin",{method:"DELETE",body:JSON.stringify({})},!1)}deleteUser(){return this.fetchWrapper(this.baseUrlPath+"/users/delete_current_user",{method:"DELETE",body:JSON.stringify({})},!1)}anonymizeUser(){return this.fetchWrapper(this.baseUrlPath+"/users/anonymize_current_user",{method:"DELETE",body:JSON.stringify({})},!1)}resetPassword(t,e){return this.fetchWrapper(this.baseUrlPath+`/users/reset/${t}`,{method:"POST",body:JSON.stringify(e)},!1)}setEmail(t){return this.fetchWrapper(this.baseUrlPath+"/users/missingEmail/setEmail",{method:"PUT",body:JSON.stringify(t)},!1)}linkAccounts(t){return this.fetchWrapper(this.baseUrlPath+"/users/missingEmail/linkAccounts",{method:"PUT",body:JSON.stringify(t)},!1)}confirmEmailShown(){return this.fetchWrapper(this.baseUrlPath+"/users/missingEmail/emailConfirmationShown",{method:"PUT",body:JSON.stringify({})},!1,"forgotPassword")}forgotPassword(t){return this.fetchWrapper(this.baseUrlPath+"/users/forgot_password",{method:"PUT",body:JSON.stringify(t)},!1)}acceptInvite(t){return this.fetchWrapper(this.baseUrlPath+`/users/accept_invite/${t}`,{method:"POST",body:JSON.stringify({})},!1,"acceptInvite")}getInviteSender(t){return this.fetchWrapper(this.baseUrlPath+`/users/get_invite_info/${t}`,{method:"GET"},!1,"acceptInvite")}getPostLocations(t,e){return this.fetchWrapper(this.baseUrlPath+`/${t}/${e}/post_locations`)}hasAutoTranslation(){return this.fetchWrapper(this.baseUrlPath+"/users/has/AutoTranslation")}apiAction(t,e,i){return this.fetchWrapper(t,{method:e,body:JSON.stringify(i)},!1)}getImages(t){return this.fetchWrapper(this.baseUrlPath+`/images/${t}/user_images`)}postRating(t,e,i){return this.fetchWrapper(this.baseUrlPath+`/ratings/${t}/${e}`,{method:"POST",body:JSON.stringify(i)},!1)}deleteRating(t,e){return this.fetchWrapper(this.baseUrlPath+`/ratings/${t}/${e}`,{method:"DELETE",body:JSON.stringify({})},!1)}}class zs extends Ds{constructor(t="/api"){super(),this.baseUrlPath=t}async getProject(t,e,i){return await this.fetchWrapper(this.baseUrlPath+`/projects/${t}${i?"/new":""}${e?`?trm=${e}`:""}`)}async getMiddleSolutions(t,e){return await this.fetchWrapper(this.baseUrlPath+`/projects/${t}/${e}/middle/solutions`)}async getRawEvidence(t,e,i){return await this.fetchWrapper(this.baseUrlPath+`/projects/${t}/${e}/${i}/rawEvidence`)}}const Fs={type:"logger",log(t){this.output("log",t)},warn(t){this.output("warn",t)},error(t){this.output("error",t)},output(t,e){console&&console[t]&&console[t].apply(console,e)}};class Bs{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.init(t,e)}init(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.prefix=e.prefix||"i18next:",this.logger=t||Fs,this.options=e,this.debug=e.debug}log(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return this.forward(e,"log","",!0)}warn(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return this.forward(e,"warn","",!0)}error(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return this.forward(e,"error","")}deprecate(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return this.forward(e,"warn","WARNING DEPRECATED: ",!0)}forward(t,e,i,r){return r&&!this.debug?null:("string"==typeof t[0]&&(t[0]=`${i}${this.prefix} ${t[0]}`),this.logger[e](t))}create(t){return new Bs(this.logger,{prefix:`${this.prefix}:${t}:`,...this.options})}clone(t){return(t=t||this.options).prefix=t.prefix||this.prefix,new Bs(this.logger,t)}}var Us=new Bs;class Vs{constructor(){this.observers={}}on(t,e){return t.split(" ").forEach((t=>{this.observers[t]||(this.observers[t]=new Map);const i=this.observers[t].get(e)||0;this.observers[t].set(e,i+1)})),this}off(t,e){this.observers[t]&&(e?this.observers[t].delete(e):delete this.observers[t])}emit(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),r=1;r<e;r++)i[r-1]=arguments[r];if(this.observers[t]){Array.from(this.observers[t].entries()).forEach((t=>{let[e,r]=t;for(let t=0;t<r;t++)e(...i)}))}if(this.observers["*"]){Array.from(this.observers["*"].entries()).forEach((e=>{let[r,o]=e;for(let e=0;e<o;e++)r.apply(r,[t,...i])}))}}}function js(){let t,e;const i=new Promise(((i,r)=>{t=i,e=r}));return i.resolve=t,i.reject=e,i}function Gs(t){return null==t?"":""+t}const Hs=/###/g;function qs(t,e,i){function r(t){return t&&t.indexOf("###")>-1?t.replace(Hs,"."):t}function o(){return!t||"string"==typeof t}const n="string"!=typeof e?e:e.split(".");let s=0;for(;s<n.length-1;){if(o())return{};const e=r(n[s]);!t[e]&&i&&(t[e]=new i),t=Object.prototype.hasOwnProperty.call(t,e)?t[e]:{},++s}return o()?{}:{obj:t,k:r(n[s])}}function Ws(t,e,i){const{obj:r,k:o}=qs(t,e,Object);if(void 0!==r||1===e.length)return void(r[o]=i);let n=e[e.length-1],s=e.slice(0,e.length-1),a=qs(t,s,Object);for(;void 0===a.obj&&s.length;)n=`${s[s.length-1]}.${n}`,s=s.slice(0,s.length-1),a=qs(t,s,Object),a&&a.obj&&void 0!==a.obj[`${a.k}.${n}`]&&(a.obj=void 0);a.obj[`${a.k}.${n}`]=i}function Ys(t,e){const{obj:i,k:r}=qs(t,e);if(i)return i[r]}function Xs(t,e,i){for(const r in e)"__proto__"!==r&&"constructor"!==r&&(r in t?"string"==typeof t[r]||t[r]instanceof String||"string"==typeof e[r]||e[r]instanceof String?i&&(t[r]=e[r]):Xs(t[r],e[r],i):t[r]=e[r]);return t}function Js(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var Qs={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function Ks(t){return"string"==typeof t?t.replace(/[&<>"'\/]/g,(t=>Qs[t])):t}const Zs=[" ",",","?","!",";"],ta=new class{constructor(t){this.capacity=t,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(t){const e=this.regExpMap.get(t);if(void 0!==e)return e;const i=new RegExp(t);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(t,i),this.regExpQueue.push(t),i}}(20);function ea(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".";if(!t)return;if(t[e])return t[e];const r=e.split(i);let o=t;for(let t=0;t<r.length;){if(!o||"object"!=typeof o)return;let e,n="";for(let s=t;s<r.length;++s)if(s!==t&&(n+=i),n+=r[s],e=o[n],void 0!==e){if(["string","number","boolean"].indexOf(typeof e)>-1&&s<r.length-1)continue;t+=s-t+1;break}o=e}return o}function ia(t){return t&&t.indexOf("_")>0?t.replace("_","-"):t}class ra extends Vs{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=t||{},this.options=e,void 0===this.options.keySeparator&&(this.options.keySeparator="."),void 0===this.options.ignoreJSONStructure&&(this.options.ignoreJSONStructure=!0)}addNamespaces(t){this.options.ns.indexOf(t)<0&&this.options.ns.push(t)}removeNamespaces(t){const e=this.options.ns.indexOf(t);e>-1&&this.options.ns.splice(e,1)}getResource(t,e,i){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const o=void 0!==r.keySeparator?r.keySeparator:this.options.keySeparator,n=void 0!==r.ignoreJSONStructure?r.ignoreJSONStructure:this.options.ignoreJSONStructure;let s;t.indexOf(".")>-1?s=t.split("."):(s=[t,e],i&&(Array.isArray(i)?s.push(...i):"string"==typeof i&&o?s.push(...i.split(o)):s.push(i)));const a=Ys(this.data,s);return!a&&!e&&!i&&t.indexOf(".")>-1&&(t=s[0],e=s[1],i=s.slice(2).join(".")),a||!n||"string"!=typeof i?a:ea(this.data&&this.data[t]&&this.data[t][e],i,o)}addResource(t,e,i,r){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{silent:!1};const n=void 0!==o.keySeparator?o.keySeparator:this.options.keySeparator;let s=[t,e];i&&(s=s.concat(n?i.split(n):i)),t.indexOf(".")>-1&&(s=t.split("."),r=e,e=s[1]),this.addNamespaces(e),Ws(this.data,s,r),o.silent||this.emit("added",t,e,i,r)}addResources(t,e,i){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{silent:!1};for(const r in i)("string"==typeof i[r]||Array.isArray(i[r]))&&this.addResource(t,e,r,i[r],{silent:!0});r.silent||this.emit("added",t,e,i)}addResourceBundle(t,e,i,r,o){let n=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{silent:!1,skipCopy:!1},s=[t,e];t.indexOf(".")>-1&&(s=t.split("."),r=i,i=e,e=s[1]),this.addNamespaces(e);let a=Ys(this.data,s)||{};n.skipCopy||(i=JSON.parse(JSON.stringify(i))),r?Xs(a,i,o):a={...a,...i},Ws(this.data,s,a),n.silent||this.emit("added",t,e,i)}removeResourceBundle(t,e){this.hasResourceBundle(t,e)&&delete this.data[t][e],this.removeNamespaces(e),this.emit("removed",t,e)}hasResourceBundle(t,e){return void 0!==this.getResource(t,e)}getResourceBundle(t,e){return e||(e=this.options.defaultNS),"v1"===this.options.compatibilityAPI?{...this.getResource(t,e)}:this.getResource(t,e)}getDataByLanguage(t){return this.data[t]}hasLanguageSomeTranslations(t){const e=this.getDataByLanguage(t);return!!(e&&Object.keys(e)||[]).find((t=>e[t]&&Object.keys(e[t]).length>0))}toJSON(){return this.data}}var oa={processors:{},addPostProcessor(t){this.processors[t.name]=t},handle(t,e,i,r,o){return t.forEach((t=>{this.processors[t]&&(e=this.processors[t].process(e,i,r,o))})),e}};const na={};class sa extends Vs{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),function(t,e,i){t.forEach((t=>{e[t]&&(i[t]=e[t])}))}(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],t,this),this.options=e,void 0===this.options.keySeparator&&(this.options.keySeparator="."),this.logger=Us.create("translator")}changeLanguage(t){t&&(this.language=t)}exists(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}};if(null==t)return!1;const i=this.resolve(t,e);return i&&void 0!==i.res}extractFromKey(t,e){let i=void 0!==e.nsSeparator?e.nsSeparator:this.options.nsSeparator;void 0===i&&(i=":");const r=void 0!==e.keySeparator?e.keySeparator:this.options.keySeparator;let o=e.ns||this.options.defaultNS||[];const n=i&&t.indexOf(i)>-1,s=!(this.options.userDefinedKeySeparator||e.keySeparator||this.options.userDefinedNsSeparator||e.nsSeparator||function(t,e,i){e=e||"",i=i||"";const r=Zs.filter((t=>e.indexOf(t)<0&&i.indexOf(t)<0));if(0===r.length)return!0;const o=ta.getRegExp(`(${r.map((t=>"?"===t?"\\?":t)).join("|")})`);let n=!o.test(t);if(!n){const e=t.indexOf(i);e>0&&!o.test(t.substring(0,e))&&(n=!0)}return n}(t,i,r));if(n&&!s){const e=t.match(this.interpolator.nestingRegexp);if(e&&e.length>0)return{key:t,namespaces:o};const n=t.split(i);(i!==r||i===r&&this.options.ns.indexOf(n[0])>-1)&&(o=n.shift()),t=n.join(r)}return"string"==typeof o&&(o=[o]),{key:t,namespaces:o}}translate(t,e,i){if("object"!=typeof e&&this.options.overloadTranslationOptionHandler&&(e=this.options.overloadTranslationOptionHandler(arguments)),"object"==typeof e&&(e={...e}),e||(e={}),null==t)return"";Array.isArray(t)||(t=[String(t)]);const r=void 0!==e.returnDetails?e.returnDetails:this.options.returnDetails,o=void 0!==e.keySeparator?e.keySeparator:this.options.keySeparator,{key:n,namespaces:s}=this.extractFromKey(t[t.length-1],e),a=s[s.length-1],l=e.lng||this.language,c=e.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(l&&"cimode"===l.toLowerCase()){if(c){const t=e.nsSeparator||this.options.nsSeparator;return r?{res:`${a}${t}${n}`,usedKey:n,exactUsedKey:n,usedLng:l,usedNS:a,usedParams:this.getUsedParamsDetails(e)}:`${a}${t}${n}`}return r?{res:n,usedKey:n,exactUsedKey:n,usedLng:l,usedNS:a,usedParams:this.getUsedParamsDetails(e)}:n}const d=this.resolve(t,e);let h=d&&d.res;const u=d&&d.usedKey||n,p=d&&d.exactUsedKey||n,f=Object.prototype.toString.apply(h),m=void 0!==e.joinArrays?e.joinArrays:this.options.joinArrays,g=!this.i18nFormat||this.i18nFormat.handleAsObject;if(g&&h&&("string"!=typeof h&&"boolean"!=typeof h&&"number"!=typeof h)&&["[object Number]","[object Function]","[object RegExp]"].indexOf(f)<0&&("string"!=typeof m||!Array.isArray(h))){if(!e.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const t=this.options.returnedObjectHandler?this.options.returnedObjectHandler(u,h,{...e,ns:s}):`key '${n} (${this.language})' returned an object instead of string.`;return r?(d.res=t,d.usedParams=this.getUsedParamsDetails(e),d):t}if(o){const t=Array.isArray(h),i=t?[]:{},r=t?p:u;for(const t in h)if(Object.prototype.hasOwnProperty.call(h,t)){const n=`${r}${o}${t}`;i[t]=this.translate(n,{...e,joinArrays:!1,ns:s}),i[t]===n&&(i[t]=h[t])}h=i}}else if(g&&"string"==typeof m&&Array.isArray(h))h=h.join(m),h&&(h=this.extendTranslation(h,t,e,i));else{let r=!1,s=!1;const c=void 0!==e.count&&"string"!=typeof e.count,u=sa.hasDefaultValue(e),p=c?this.pluralResolver.getSuffix(l,e.count,e):"",f=e.ordinal&&c?this.pluralResolver.getSuffix(l,e.count,{ordinal:!1}):"",m=c&&!e.ordinal&&0===e.count&&this.pluralResolver.shouldUseIntlApi(),g=m&&e[`defaultValue${this.options.pluralSeparator}zero`]||e[`defaultValue${p}`]||e[`defaultValue${f}`]||e.defaultValue;!this.isValidLookup(h)&&u&&(r=!0,h=g),this.isValidLookup(h)||(s=!0,h=n);const v=(e.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&s?void 0:h,b=u&&g!==h&&this.options.updateMissing;if(s||r||b){if(this.logger.log(b?"updateKey":"missingKey",l,a,n,b?g:h),o){const t=this.resolve(n,{...e,keySeparator:!1});t&&t.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let t=[];const i=this.languageUtils.getFallbackCodes(this.options.fallbackLng,e.lng||this.language);if("fallback"===this.options.saveMissingTo&&i&&i[0])for(let e=0;e<i.length;e++)t.push(i[e]);else"all"===this.options.saveMissingTo?t=this.languageUtils.toResolveHierarchy(e.lng||this.language):t.push(e.lng||this.language);const r=(t,i,r)=>{const o=u&&r!==h?r:v;this.options.missingKeyHandler?this.options.missingKeyHandler(t,a,i,o,b,e):this.backendConnector&&this.backendConnector.saveMissing&&this.backendConnector.saveMissing(t,a,i,o,b,e),this.emit("missingKey",t,a,i,h)};this.options.saveMissing&&(this.options.saveMissingPlurals&&c?t.forEach((t=>{const i=this.pluralResolver.getSuffixes(t,e);m&&e[`defaultValue${this.options.pluralSeparator}zero`]&&i.indexOf(`${this.options.pluralSeparator}zero`)<0&&i.push(`${this.options.pluralSeparator}zero`),i.forEach((i=>{r([t],n+i,e[`defaultValue${i}`]||g)}))})):r(t,n,g))}h=this.extendTranslation(h,t,e,d,i),s&&h===n&&this.options.appendNamespaceToMissingKey&&(h=`${a}:${n}`),(s||r)&&this.options.parseMissingKeyHandler&&(h="v1"!==this.options.compatibilityAPI?this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${a}:${n}`:n,r?h:void 0):this.options.parseMissingKeyHandler(h))}return r?(d.res=h,d.usedParams=this.getUsedParamsDetails(e),d):h}extendTranslation(t,e,i,r,o){var n=this;if(this.i18nFormat&&this.i18nFormat.parse)t=this.i18nFormat.parse(t,{...this.options.interpolation.defaultVariables,...i},i.lng||this.language||r.usedLng,r.usedNS,r.usedKey,{resolved:r});else if(!i.skipInterpolation){i.interpolation&&this.interpolator.init({...i,interpolation:{...this.options.interpolation,...i.interpolation}});const s="string"==typeof t&&(i&&i.interpolation&&void 0!==i.interpolation.skipOnVariables?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let a;if(s){const e=t.match(this.interpolator.nestingRegexp);a=e&&e.length}let l=i.replace&&"string"!=typeof i.replace?i.replace:i;if(this.options.interpolation.defaultVariables&&(l={...this.options.interpolation.defaultVariables,...l}),t=this.interpolator.interpolate(t,l,i.lng||this.language,i),s){const e=t.match(this.interpolator.nestingRegexp);a<(e&&e.length)&&(i.nest=!1)}!i.lng&&"v1"!==this.options.compatibilityAPI&&r&&r.res&&(i.lng=r.usedLng),!1!==i.nest&&(t=this.interpolator.nest(t,(function(){for(var t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];return o&&o[0]===r[0]&&!i.context?(n.logger.warn(`It seems you are nesting recursively key: ${r[0]} in key: ${e[0]}`),null):n.translate(...r,e)}),i)),i.interpolation&&this.interpolator.reset()}const s=i.postProcess||this.options.postProcess,a="string"==typeof s?[s]:s;return null!=t&&a&&a.length&&!1!==i.applyPostProcessor&&(t=oa.handle(a,t,e,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...r,usedParams:this.getUsedParamsDetails(i)},...i}:i,this)),t}resolve(t){let e,i,r,o,n,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"string"==typeof t&&(t=[t]),t.forEach((t=>{if(this.isValidLookup(e))return;const a=this.extractFromKey(t,s),l=a.key;i=l;let c=a.namespaces;this.options.fallbackNS&&(c=c.concat(this.options.fallbackNS));const d=void 0!==s.count&&"string"!=typeof s.count,h=d&&!s.ordinal&&0===s.count&&this.pluralResolver.shouldUseIntlApi(),u=void 0!==s.context&&("string"==typeof s.context||"number"==typeof s.context)&&""!==s.context,p=s.lngs?s.lngs:this.languageUtils.toResolveHierarchy(s.lng||this.language,s.fallbackLng);c.forEach((t=>{this.isValidLookup(e)||(n=t,!na[`${p[0]}-${t}`]&&this.utils&&this.utils.hasLoadedNamespace&&!this.utils.hasLoadedNamespace(n)&&(na[`${p[0]}-${t}`]=!0,this.logger.warn(`key "${i}" for languages "${p.join(", ")}" won't get resolved as namespace "${n}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),p.forEach((i=>{if(this.isValidLookup(e))return;o=i;const n=[l];if(this.i18nFormat&&this.i18nFormat.addLookupKeys)this.i18nFormat.addLookupKeys(n,l,i,t,s);else{let t;d&&(t=this.pluralResolver.getSuffix(i,s.count,s));const e=`${this.options.pluralSeparator}zero`,r=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(d&&(n.push(l+t),s.ordinal&&0===t.indexOf(r)&&n.push(l+t.replace(r,this.options.pluralSeparator)),h&&n.push(l+e)),u){const i=`${l}${this.options.contextSeparator}${s.context}`;n.push(i),d&&(n.push(i+t),s.ordinal&&0===t.indexOf(r)&&n.push(i+t.replace(r,this.options.pluralSeparator)),h&&n.push(i+e))}}let a;for(;a=n.pop();)this.isValidLookup(e)||(r=a,e=this.getResource(i,t,a,s))})))}))})),{res:e,usedKey:i,exactUsedKey:r,usedLng:o,usedNS:n}}isValidLookup(t){return!(void 0===t||!this.options.returnNull&&null===t||!this.options.returnEmptyString&&""===t)}getResource(t,e,i){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(t,e,i,r):this.resourceStore.getResource(t,e,i,r)}getUsedParamsDetails(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const e=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],i=t.replace&&"string"!=typeof t.replace;let r=i?t.replace:t;if(i&&void 0!==t.count&&(r.count=t.count),this.options.interpolation.defaultVariables&&(r={...this.options.interpolation.defaultVariables,...r}),!i){r={...r};for(const t of e)delete r[t]}return r}static hasDefaultValue(t){const e="defaultValue";for(const i in t)if(Object.prototype.hasOwnProperty.call(t,i)&&e===i.substring(0,12)&&void 0!==t[i])return!0;return!1}}function aa(t){return t.charAt(0).toUpperCase()+t.slice(1)}class la{constructor(t){this.options=t,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Us.create("languageUtils")}getScriptPartFromCode(t){if(!(t=ia(t))||t.indexOf("-")<0)return null;const e=t.split("-");return 2===e.length?null:(e.pop(),"x"===e[e.length-1].toLowerCase()?null:this.formatLanguageCode(e.join("-")))}getLanguagePartFromCode(t){if(!(t=ia(t))||t.indexOf("-")<0)return t;const e=t.split("-");return this.formatLanguageCode(e[0])}formatLanguageCode(t){if("string"==typeof t&&t.indexOf("-")>-1){const e=["hans","hant","latn","cyrl","cans","mong","arab"];let i=t.split("-");return this.options.lowerCaseLng?i=i.map((t=>t.toLowerCase())):2===i.length?(i[0]=i[0].toLowerCase(),i[1]=i[1].toUpperCase(),e.indexOf(i[1].toLowerCase())>-1&&(i[1]=aa(i[1].toLowerCase()))):3===i.length&&(i[0]=i[0].toLowerCase(),2===i[1].length&&(i[1]=i[1].toUpperCase()),"sgn"!==i[0]&&2===i[2].length&&(i[2]=i[2].toUpperCase()),e.indexOf(i[1].toLowerCase())>-1&&(i[1]=aa(i[1].toLowerCase())),e.indexOf(i[2].toLowerCase())>-1&&(i[2]=aa(i[2].toLowerCase()))),i.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?t.toLowerCase():t}isSupportedCode(t){return("languageOnly"===this.options.load||this.options.nonExplicitSupportedLngs)&&(t=this.getLanguagePartFromCode(t)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(t)>-1}getBestMatchFromCodes(t){if(!t)return null;let e;return t.forEach((t=>{if(e)return;const i=this.formatLanguageCode(t);this.options.supportedLngs&&!this.isSupportedCode(i)||(e=i)})),!e&&this.options.supportedLngs&&t.forEach((t=>{if(e)return;const i=this.getLanguagePartFromCode(t);if(this.isSupportedCode(i))return e=i;e=this.options.supportedLngs.find((t=>t===i?t:t.indexOf("-")<0&&i.indexOf("-")<0?void 0:t.indexOf("-")>0&&i.indexOf("-")<0&&t.substring(0,t.indexOf("-"))===i||0===t.indexOf(i)&&i.length>1?t:void 0))})),e||(e=this.getFallbackCodes(this.options.fallbackLng)[0]),e}getFallbackCodes(t,e){if(!t)return[];if("function"==typeof t&&(t=t(e)),"string"==typeof t&&(t=[t]),Array.isArray(t))return t;if(!e)return t.default||[];let i=t[e];return i||(i=t[this.getScriptPartFromCode(e)]),i||(i=t[this.formatLanguageCode(e)]),i||(i=t[this.getLanguagePartFromCode(e)]),i||(i=t.default),i||[]}toResolveHierarchy(t,e){const i=this.getFallbackCodes(e||this.options.fallbackLng||[],t),r=[],o=t=>{t&&(this.isSupportedCode(t)?r.push(t):this.logger.warn(`rejecting language code not found in supportedLngs: ${t}`))};return"string"==typeof t&&(t.indexOf("-")>-1||t.indexOf("_")>-1)?("languageOnly"!==this.options.load&&o(this.formatLanguageCode(t)),"languageOnly"!==this.options.load&&"currentOnly"!==this.options.load&&o(this.getScriptPartFromCode(t)),"currentOnly"!==this.options.load&&o(this.getLanguagePartFromCode(t))):"string"==typeof t&&o(this.formatLanguageCode(t)),i.forEach((t=>{r.indexOf(t)<0&&o(this.formatLanguageCode(t))})),r}}let ca=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],da={1:function(t){return Number(t>1)},2:function(t){return Number(1!=t)},3:function(t){return 0},4:function(t){return Number(t%10==1&&t%100!=11?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2)},5:function(t){return Number(0==t?0:1==t?1:2==t?2:t%100>=3&&t%100<=10?3:t%100>=11?4:5)},6:function(t){return Number(1==t?0:t>=2&&t<=4?1:2)},7:function(t){return Number(1==t?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2)},8:function(t){return Number(1==t?0:2==t?1:8!=t&&11!=t?2:3)},9:function(t){return Number(t>=2)},10:function(t){return Number(1==t?0:2==t?1:t<7?2:t<11?3:4)},11:function(t){return Number(1==t||11==t?0:2==t||12==t?1:t>2&&t<20?2:3)},12:function(t){return Number(t%10!=1||t%100==11)},13:function(t){return Number(0!==t)},14:function(t){return Number(1==t?0:2==t?1:3==t?2:3)},15:function(t){return Number(t%10==1&&t%100!=11?0:t%10>=2&&(t%100<10||t%100>=20)?1:2)},16:function(t){return Number(t%10==1&&t%100!=11?0:0!==t?1:2)},17:function(t){return Number(1==t||t%10==1&&t%100!=11?0:1)},18:function(t){return Number(0==t?0:1==t?1:2)},19:function(t){return Number(1==t?0:0==t||t%100>1&&t%100<11?1:t%100>10&&t%100<20?2:3)},20:function(t){return Number(1==t?0:0==t||t%100>0&&t%100<20?1:2)},21:function(t){return Number(t%100==1?1:t%100==2?2:t%100==3||t%100==4?3:0)},22:function(t){return Number(1==t?0:2==t?1:(t<0||t>10)&&t%10==0?2:3)}};const ha=["v1","v2","v3"],ua=["v4"],pa={zero:0,one:1,two:2,few:3,many:4,other:5};class fa{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.languageUtils=t,this.options=e,this.logger=Us.create("pluralResolver"),this.options.compatibilityJSON&&!ua.includes(this.options.compatibilityJSON)||"undefined"!=typeof Intl&&Intl.PluralRules||(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=function(){const t={};return ca.forEach((e=>{e.lngs.forEach((i=>{t[i]={numbers:e.nr,plurals:da[e.fc]}}))})),t}()}addRule(t,e){this.rules[t]=e}getRule(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.shouldUseIntlApi())try{return new Intl.PluralRules(ia("dev"===t?"en":t),{type:e.ordinal?"ordinal":"cardinal"})}catch(t){return}return this.rules[t]||this.rules[this.languageUtils.getLanguagePartFromCode(t)]}needsPlural(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=this.getRule(t,e);return this.shouldUseIntlApi()?i&&i.resolvedOptions().pluralCategories.length>1:i&&i.numbers.length>1}getPluralFormsOfKey(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.getSuffixes(t,i).map((t=>`${e}${t}`))}getSuffixes(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=this.getRule(t,e);return i?this.shouldUseIntlApi()?i.resolvedOptions().pluralCategories.sort(((t,e)=>pa[t]-pa[e])).map((t=>`${this.options.prepend}${e.ordinal?`ordinal${this.options.prepend}`:""}${t}`)):i.numbers.map((i=>this.getSuffix(t,i,e))):[]}getSuffix(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=this.getRule(t,i);return r?this.shouldUseIntlApi()?`${this.options.prepend}${i.ordinal?`ordinal${this.options.prepend}`:""}${r.select(e)}`:this.getSuffixRetroCompatible(r,e):(this.logger.warn(`no plural rule found for: ${t}`),"")}getSuffixRetroCompatible(t,e){const i=t.noAbs?t.plurals(e):t.plurals(Math.abs(e));let r=t.numbers[i];this.options.simplifyPluralSuffix&&2===t.numbers.length&&1===t.numbers[0]&&(2===r?r="plural":1===r&&(r=""));const o=()=>this.options.prepend&&r.toString()?this.options.prepend+r.toString():r.toString();return"v1"===this.options.compatibilityJSON?1===r?"":"number"==typeof r?`_plural_${r.toString()}`:o():"v2"===this.options.compatibilityJSON||this.options.simplifyPluralSuffix&&2===t.numbers.length&&1===t.numbers[0]?o():this.options.prepend&&i.toString()?this.options.prepend+i.toString():i.toString()}shouldUseIntlApi(){return!ha.includes(this.options.compatibilityJSON)}}function ma(t,e,i){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:".",o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],n=function(t,e,i){const r=Ys(t,i);return void 0!==r?r:Ys(e,i)}(t,e,i);return!n&&o&&"string"==typeof i&&(n=ea(t,i,r),void 0===n&&(n=ea(e,i,r))),n}class ga{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.logger=Us.create("interpolator"),this.options=t,this.format=t.interpolation&&t.interpolation.format||(t=>t),this.init(t)}init(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.interpolation||(t.interpolation={escapeValue:!0});const{escape:e,escapeValue:i,useRawValueToEscape:r,prefix:o,prefixEscaped:n,suffix:s,suffixEscaped:a,formatSeparator:l,unescapeSuffix:c,unescapePrefix:d,nestingPrefix:h,nestingPrefixEscaped:u,nestingSuffix:p,nestingSuffixEscaped:f,nestingOptionsSeparator:m,maxReplaces:g,alwaysFormat:v}=t.interpolation;this.escape=void 0!==e?e:Ks,this.escapeValue=void 0===i||i,this.useRawValueToEscape=void 0!==r&&r,this.prefix=o?Js(o):n||"{{",this.suffix=s?Js(s):a||"}}",this.formatSeparator=l||",",this.unescapePrefix=c?"":d||"-",this.unescapeSuffix=this.unescapePrefix?"":c||"",this.nestingPrefix=h?Js(h):u||Js("$t("),this.nestingSuffix=p?Js(p):f||Js(")"),this.nestingOptionsSeparator=m||",",this.maxReplaces=g||1e3,this.alwaysFormat=void 0!==v&&v,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const t=(t,e)=>t&&t.source===e?(t.lastIndex=0,t):new RegExp(e,"g");this.regexp=t(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=t(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=t(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(t,e,i,r){let o,n,s;const a=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function l(t){return t.replace(/\$/g,"$$$$")}const c=t=>{if(t.indexOf(this.formatSeparator)<0){const o=ma(e,a,t,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(o,void 0,i,{...r,...e,interpolationkey:t}):o}const o=t.split(this.formatSeparator),n=o.shift().trim(),s=o.join(this.formatSeparator).trim();return this.format(ma(e,a,n,this.options.keySeparator,this.options.ignoreJSONStructure),s,i,{...r,...e,interpolationkey:n})};this.resetRegExp();const d=r&&r.missingInterpolationHandler||this.options.missingInterpolationHandler,h=r&&r.interpolation&&void 0!==r.interpolation.skipOnVariables?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:t=>l(t)},{regex:this.regexp,safeValue:t=>this.escapeValue?l(this.escape(t)):l(t)}].forEach((e=>{for(s=0;o=e.regex.exec(t);){const i=o[1].trim();if(n=c(i),void 0===n)if("function"==typeof d){const e=d(t,o,r);n="string"==typeof e?e:""}else if(r&&Object.prototype.hasOwnProperty.call(r,i))n="";else{if(h){n=o[0];continue}this.logger.warn(`missed to pass in variable ${i} for interpolating ${t}`),n=""}else"string"==typeof n||this.useRawValueToEscape||(n=Gs(n));const a=e.safeValue(n);if(t=t.replace(o[0],a),h?(e.regex.lastIndex+=n.length,e.regex.lastIndex-=o[0].length):e.regex.lastIndex=0,s++,s>=this.maxReplaces)break}})),t}nest(t,e){let i,r,o,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};function s(t,e){const i=this.nestingOptionsSeparator;if(t.indexOf(i)<0)return t;const r=t.split(new RegExp(`${i}[ ]*{`));let n=`{${r[1]}`;t=r[0],n=this.interpolate(n,o);const s=n.match(/'/g),a=n.match(/"/g);(s&&s.length%2==0&&!a||a.length%2!=0)&&(n=n.replace(/'/g,'"'));try{o=JSON.parse(n),e&&(o={...e,...o})}catch(e){return this.logger.warn(`failed parsing options string in nesting for key ${t}`,e),`${t}${i}${n}`}return o.defaultValue&&o.defaultValue.indexOf(this.prefix)>-1&&delete o.defaultValue,t}for(;i=this.nestingRegexp.exec(t);){let a=[];o={...n},o=o.replace&&"string"!=typeof o.replace?o.replace:o,o.applyPostProcessor=!1,delete o.defaultValue;let l=!1;if(-1!==i[0].indexOf(this.formatSeparator)&&!/{.*}/.test(i[1])){const t=i[1].split(this.formatSeparator).map((t=>t.trim()));i[1]=t.shift(),a=t,l=!0}if(r=e(s.call(this,i[1].trim(),o),o),r&&i[0]===t&&"string"!=typeof r)return r;"string"!=typeof r&&(r=Gs(r)),r||(this.logger.warn(`missed to resolve ${i[1]} for nesting ${t}`),r=""),l&&(r=a.reduce(((t,e)=>this.format(t,e,n.lng,{...n,interpolationkey:i[1].trim()})),r.trim())),t=t.replace(i[0],r),this.regexp.lastIndex=0}return t}}function va(t){const e={};return function(i,r,o){const n=r+JSON.stringify(o);let s=e[n];return s||(s=t(ia(r),o),e[n]=s),s(i)}}class ba{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.logger=Us.create("formatter"),this.options=t,this.formats={number:va(((t,e)=>{const i=new Intl.NumberFormat(t,{...e});return t=>i.format(t)})),currency:va(((t,e)=>{const i=new Intl.NumberFormat(t,{...e,style:"currency"});return t=>i.format(t)})),datetime:va(((t,e)=>{const i=new Intl.DateTimeFormat(t,{...e});return t=>i.format(t)})),relativetime:va(((t,e)=>{const i=new Intl.RelativeTimeFormat(t,{...e});return t=>i.format(t,e.range||"day")})),list:va(((t,e)=>{const i=new Intl.ListFormat(t,{...e});return t=>i.format(t)}))},this.init(t)}init(t){const e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}}).interpolation;this.formatSeparator=e.formatSeparator?e.formatSeparator:e.formatSeparator||","}add(t,e){this.formats[t.toLowerCase().trim()]=e}addCached(t,e){this.formats[t.toLowerCase().trim()]=va(e)}format(t,e,i){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const o=e.split(this.formatSeparator).reduce(((t,e)=>{const{formatName:o,formatOptions:n}=function(t){let e=t.toLowerCase().trim();const i={};if(t.indexOf("(")>-1){const r=t.split("(");e=r[0].toLowerCase().trim();const o=r[1].substring(0,r[1].length-1);"currency"===e&&o.indexOf(":")<0?i.currency||(i.currency=o.trim()):"relativetime"===e&&o.indexOf(":")<0?i.range||(i.range=o.trim()):o.split(";").forEach((t=>{if(t){const[e,...r]=t.split(":"),o=r.join(":").trim().replace(/^'+|'+$/g,""),n=e.trim();i[n]||(i[n]=o),"false"===o&&(i[n]=!1),"true"===o&&(i[n]=!0),isNaN(o)||(i[n]=parseInt(o,10))}}))}return{formatName:e,formatOptions:i}}(e);if(this.formats[o]){let e=t;try{const s=r&&r.formatParams&&r.formatParams[r.interpolationkey]||{},a=s.locale||s.lng||r.locale||r.lng||i;e=this.formats[o](t,a,{...n,...r,...s})}catch(t){this.logger.warn(t)}return e}return this.logger.warn(`there was no format function for ${o}`),t}),t);return o}}class ya extends Vs{constructor(t,e,i){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};super(),this.backend=t,this.store=e,this.services=i,this.languageUtils=i.languageUtils,this.options=r,this.logger=Us.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=r.maxParallelReads||10,this.readingCalls=0,this.maxRetries=r.maxRetries>=0?r.maxRetries:5,this.retryTimeout=r.retryTimeout>=1?r.retryTimeout:350,this.state={},this.queue=[],this.backend&&this.backend.init&&this.backend.init(i,r.backend,r)}queueLoad(t,e,i,r){const o={},n={},s={},a={};return t.forEach((t=>{let r=!0;e.forEach((e=>{const s=`${t}|${e}`;!i.reload&&this.store.hasResourceBundle(t,e)?this.state[s]=2:this.state[s]<0||(1===this.state[s]?void 0===n[s]&&(n[s]=!0):(this.state[s]=1,r=!1,void 0===n[s]&&(n[s]=!0),void 0===o[s]&&(o[s]=!0),void 0===a[e]&&(a[e]=!0)))})),r||(s[t]=!0)})),(Object.keys(o).length||Object.keys(n).length)&&this.queue.push({pending:n,pendingCount:Object.keys(n).length,loaded:{},errors:[],callback:r}),{toLoad:Object.keys(o),pending:Object.keys(n),toLoadLanguages:Object.keys(s),toLoadNamespaces:Object.keys(a)}}loaded(t,e,i){const r=t.split("|"),o=r[0],n=r[1];e&&this.emit("failedLoading",o,n,e),i&&this.store.addResourceBundle(o,n,i,void 0,void 0,{skipCopy:!0}),this.state[t]=e?-1:2;const s={};this.queue.forEach((i=>{!function(t,e,i,r){const{obj:o,k:n}=qs(t,e,Object);o[n]=o[n]||[],r&&(o[n]=o[n].concat(i)),r||o[n].push(i)}(i.loaded,[o],n),function(t,e){void 0!==t.pending[e]&&(delete t.pending[e],t.pendingCount--)}(i,t),e&&i.errors.push(e),0!==i.pendingCount||i.done||(Object.keys(i.loaded).forEach((t=>{s[t]||(s[t]={});const e=i.loaded[t];e.length&&e.forEach((e=>{void 0===s[t][e]&&(s[t][e]=!0)}))})),i.done=!0,i.errors.length?i.callback(i.errors):i.callback())})),this.emit("loaded",s),this.queue=this.queue.filter((t=>!t.done))}read(t,e,i){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.retryTimeout,n=arguments.length>5?arguments[5]:void 0;if(!t.length)return n(null,{});if(this.readingCalls>=this.maxParallelReads)return void this.waitingReads.push({lng:t,ns:e,fcName:i,tried:r,wait:o,callback:n});this.readingCalls++;const s=(s,a)=>{if(this.readingCalls--,this.waitingReads.length>0){const t=this.waitingReads.shift();this.read(t.lng,t.ns,t.fcName,t.tried,t.wait,t.callback)}s&&a&&r<this.maxRetries?setTimeout((()=>{this.read.call(this,t,e,i,r+1,2*o,n)}),o):n(s,a)},a=this.backend[i].bind(this.backend);if(2!==a.length)return a(t,e,s);try{const i=a(t,e);i&&"function"==typeof i.then?i.then((t=>s(null,t))).catch(s):s(null,i)}catch(t){s(t)}}prepareLoading(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),r&&r();"string"==typeof t&&(t=this.languageUtils.toResolveHierarchy(t)),"string"==typeof e&&(e=[e]);const o=this.queueLoad(t,e,i,r);if(!o.toLoad.length)return o.pending.length||r(),null;o.toLoad.forEach((t=>{this.loadOne(t)}))}load(t,e,i){this.prepareLoading(t,e,{},i)}reload(t,e,i){this.prepareLoading(t,e,{reload:!0},i)}loadOne(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const i=t.split("|"),r=i[0],o=i[1];this.read(r,o,"read",void 0,void 0,((i,n)=>{i&&this.logger.warn(`${e}loading namespace ${o} for language ${r} failed`,i),!i&&n&&this.logger.log(`${e}loaded namespace ${o} for language ${r}`,n),this.loaded(t,i,n)}))}saveMissing(t,e,i,r,o){let n=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:()=>{};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(e))this.logger.warn(`did not save key "${i}" as the namespace "${e}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");else if(null!=i&&""!==i){if(this.backend&&this.backend.create){const a={...n,isUpdate:o},l=this.backend.create.bind(this.backend);if(l.length<6)try{let o;o=5===l.length?l(t,e,i,r,a):l(t,e,i,r),o&&"function"==typeof o.then?o.then((t=>s(null,t))).catch(s):s(null,o)}catch(t){s(t)}else l(t,e,i,r,s,a)}t&&t[0]&&this.store.addResource(t[0],e,i,r)}}}function xa(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(t){let e={};if("object"==typeof t[1]&&(e=t[1]),"string"==typeof t[1]&&(e.defaultValue=t[1]),"string"==typeof t[2]&&(e.tDescription=t[2]),"object"==typeof t[2]||"object"==typeof t[3]){const i=t[3]||t[2];Object.keys(i).forEach((t=>{e[t]=i[t]}))}return e},interpolation:{escapeValue:!0,format:t=>t,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}}function wa(t){return"string"==typeof t.ns&&(t.ns=[t.ns]),"string"==typeof t.fallbackLng&&(t.fallbackLng=[t.fallbackLng]),"string"==typeof t.fallbackNS&&(t.fallbackNS=[t.fallbackNS]),t.supportedLngs&&t.supportedLngs.indexOf("cimode")<0&&(t.supportedLngs=t.supportedLngs.concat(["cimode"])),t}function _a(){}class ka extends Vs{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;var i;if(super(),this.options=wa(t),this.services={},this.logger=Us,this.modules={external:[]},i=this,Object.getOwnPropertyNames(Object.getPrototypeOf(i)).forEach((t=>{"function"==typeof i[t]&&(i[t]=i[t].bind(i))})),e&&!this.isInitialized&&!t.isClone){if(!this.options.initImmediate)return this.init(t,e),this;setTimeout((()=>{this.init(t,e)}),0)}}init(){var t=this;let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,"function"==typeof e&&(i=e,e={}),!e.defaultNS&&!1!==e.defaultNS&&e.ns&&("string"==typeof e.ns?e.defaultNS=e.ns:e.ns.indexOf("translation")<0&&(e.defaultNS=e.ns[0]));const r=xa();function o(t){return t?"function"==typeof t?new t:t:null}if(this.options={...r,...this.options,...wa(e)},"v1"!==this.options.compatibilityAPI&&(this.options.interpolation={...r.interpolation,...this.options.interpolation}),void 0!==e.keySeparator&&(this.options.userDefinedKeySeparator=e.keySeparator),void 0!==e.nsSeparator&&(this.options.userDefinedNsSeparator=e.nsSeparator),!this.options.isClone){let e;this.modules.logger?Us.init(o(this.modules.logger),this.options):Us.init(null,this.options),this.modules.formatter?e=this.modules.formatter:"undefined"!=typeof Intl&&(e=ba);const i=new la(this.options);this.store=new ra(this.options.resources,this.options);const n=this.services;n.logger=Us,n.resourceStore=this.store,n.languageUtils=i,n.pluralResolver=new fa(i,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),!e||this.options.interpolation.format&&this.options.interpolation.format!==r.interpolation.format||(n.formatter=o(e),n.formatter.init(n,this.options),this.options.interpolation.format=n.formatter.format.bind(n.formatter)),n.interpolator=new ga(this.options),n.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},n.backendConnector=new ya(o(this.modules.backend),n.resourceStore,n,this.options),n.backendConnector.on("*",(function(e){for(var i=arguments.length,r=new Array(i>1?i-1:0),o=1;o<i;o++)r[o-1]=arguments[o];t.emit(e,...r)})),this.modules.languageDetector&&(n.languageDetector=o(this.modules.languageDetector),n.languageDetector.init&&n.languageDetector.init(n,this.options.detection,this.options)),this.modules.i18nFormat&&(n.i18nFormat=o(this.modules.i18nFormat),n.i18nFormat.init&&n.i18nFormat.init(this)),this.translator=new sa(this.services,this.options),this.translator.on("*",(function(e){for(var i=arguments.length,r=new Array(i>1?i-1:0),o=1;o<i;o++)r[o-1]=arguments[o];t.emit(e,...r)})),this.modules.external.forEach((t=>{t.init&&t.init(this)}))}if(this.format=this.options.interpolation.format,i||(i=_a),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const t=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);t.length>0&&"dev"!==t[0]&&(this.options.lng=t[0])}this.services.languageDetector||this.options.lng||this.logger.warn("init: no languageDetector is used and no lng is defined");["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach((e=>{this[e]=function(){return t.store[e](...arguments)}}));["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach((e=>{this[e]=function(){return t.store[e](...arguments),t}}));const n=js(),s=()=>{const t=(t,e)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),n.resolve(e),i(t,e)};if(this.languages&&"v1"!==this.options.compatibilityAPI&&!this.isInitialized)return t(null,this.t.bind(this));this.changeLanguage(this.options.lng,t)};return this.options.resources||!this.options.initImmediate?s():setTimeout(s,0),n}loadResources(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_a;const i="string"==typeof t?t:this.language;if("function"==typeof t&&(e=t),!this.options.resources||this.options.partialBundledLanguages){if(i&&"cimode"===i.toLowerCase()&&(!this.options.preload||0===this.options.preload.length))return e();const t=[],r=e=>{if(!e)return;if("cimode"===e)return;this.services.languageUtils.toResolveHierarchy(e).forEach((e=>{"cimode"!==e&&t.indexOf(e)<0&&t.push(e)}))};if(i)r(i);else{this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach((t=>r(t)))}this.options.preload&&this.options.preload.forEach((t=>r(t))),this.services.backendConnector.load(t,this.options.ns,(t=>{t||this.resolvedLanguage||!this.language||this.setResolvedLanguage(this.language),e(t)}))}else e(null)}reloadResources(t,e,i){const r=js();return t||(t=this.languages),e||(e=this.options.ns),i||(i=_a),this.services.backendConnector.reload(t,e,(t=>{r.resolve(),i(t)})),r}use(t){if(!t)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!t.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return"backend"===t.type&&(this.modules.backend=t),("logger"===t.type||t.log&&t.warn&&t.error)&&(this.modules.logger=t),"languageDetector"===t.type&&(this.modules.languageDetector=t),"i18nFormat"===t.type&&(this.modules.i18nFormat=t),"postProcessor"===t.type&&oa.addPostProcessor(t),"formatter"===t.type&&(this.modules.formatter=t),"3rdParty"===t.type&&this.modules.external.push(t),this}setResolvedLanguage(t){if(t&&this.languages&&!(["cimode","dev"].indexOf(t)>-1))for(let t=0;t<this.languages.length;t++){const e=this.languages[t];if(!(["cimode","dev"].indexOf(e)>-1)&&this.store.hasLanguageSomeTranslations(e)){this.resolvedLanguage=e;break}}}changeLanguage(t,e){var i=this;this.isLanguageChangingTo=t;const r=js();this.emit("languageChanging",t);const o=t=>{this.language=t,this.languages=this.services.languageUtils.toResolveHierarchy(t),this.resolvedLanguage=void 0,this.setResolvedLanguage(t)},n=(t,n)=>{n?(o(n),this.translator.changeLanguage(n),this.isLanguageChangingTo=void 0,this.emit("languageChanged",n),this.logger.log("languageChanged",n)):this.isLanguageChangingTo=void 0,r.resolve((function(){return i.t(...arguments)})),e&&e(t,(function(){return i.t(...arguments)}))},s=e=>{t||e||!this.services.languageDetector||(e=[]);const i="string"==typeof e?e:this.services.languageUtils.getBestMatchFromCodes(e);i&&(this.language||o(i),this.translator.language||this.translator.changeLanguage(i),this.services.languageDetector&&this.services.languageDetector.cacheUserLanguage&&this.services.languageDetector.cacheUserLanguage(i)),this.loadResources(i,(t=>{n(t,i)}))};return t||!this.services.languageDetector||this.services.languageDetector.async?!t&&this.services.languageDetector&&this.services.languageDetector.async?0===this.services.languageDetector.detect.length?this.services.languageDetector.detect().then(s):this.services.languageDetector.detect(s):s(t):s(this.services.languageDetector.detect()),r}getFixedT(t,e,i){var r=this;const o=function(t,e){let n;if("object"!=typeof e){for(var s=arguments.length,a=new Array(s>2?s-2:0),l=2;l<s;l++)a[l-2]=arguments[l];n=r.options.overloadTranslationOptionHandler([t,e].concat(a))}else n={...e};n.lng=n.lng||o.lng,n.lngs=n.lngs||o.lngs,n.ns=n.ns||o.ns,n.keyPrefix=n.keyPrefix||i||o.keyPrefix;const c=r.options.keySeparator||".";let d;return d=n.keyPrefix&&Array.isArray(t)?t.map((t=>`${n.keyPrefix}${c}${t}`)):n.keyPrefix?`${n.keyPrefix}${c}${t}`:t,r.t(d,n)};return"string"==typeof t?o.lng=t:o.lngs=t,o.ns=e,o.keyPrefix=i,o}t(){return this.translator&&this.translator.translate(...arguments)}exists(){return this.translator&&this.translator.exists(...arguments)}setDefaultNamespace(t){this.options.defaultNS=t}hasLoadedNamespace(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const i=e.lng||this.resolvedLanguage||this.languages[0],r=!!this.options&&this.options.fallbackLng,o=this.languages[this.languages.length-1];if("cimode"===i.toLowerCase())return!0;const n=(t,e)=>{const i=this.services.backendConnector.state[`${t}|${e}`];return-1===i||2===i};if(e.precheck){const t=e.precheck(this,n);if(void 0!==t)return t}return!!this.hasResourceBundle(i,t)||(!(this.services.backendConnector.backend&&(!this.options.resources||this.options.partialBundledLanguages))||!(!n(i,t)||r&&!n(o,t)))}loadNamespaces(t,e){const i=js();return this.options.ns?("string"==typeof t&&(t=[t]),t.forEach((t=>{this.options.ns.indexOf(t)<0&&this.options.ns.push(t)})),this.loadResources((t=>{i.resolve(),e&&e(t)})),i):(e&&e(),Promise.resolve())}loadLanguages(t,e){const i=js();"string"==typeof t&&(t=[t]);const r=this.options.preload||[],o=t.filter((t=>r.indexOf(t)<0&&this.services.languageUtils.isSupportedCode(t)));return o.length?(this.options.preload=r.concat(o),this.loadResources((t=>{i.resolve(),e&&e(t)})),i):(e&&e(),Promise.resolve())}dir(t){if(t||(t=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!t)return"rtl";const e=this.services&&this.services.languageUtils||new la(xa());return["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"].indexOf(e.getLanguagePartFromCode(t))>-1||t.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){return new ka(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments.length>1?arguments[1]:void 0)}cloneInstance(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_a;const i=t.forkResourceStore;i&&delete t.forkResourceStore;const r={...this.options,...t,isClone:!0},o=new ka(r);void 0===t.debug&&void 0===t.prefix||(o.logger=o.logger.clone(t));return["store","services","language"].forEach((t=>{o[t]=this[t]})),o.services={...this.services},o.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},i&&(o.store=new ra(this.store.data,r),o.services.resourceStore=o.store),o.translator=new sa(o.services,r),o.translator.on("*",(function(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),r=1;r<e;r++)i[r-1]=arguments[r];o.emit(t,...i)})),o.init(r,e),o.translator.options=r,o.translator.backendConnector.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},o}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const Ca=ka.createInstance();function Aa(t){return Aa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Aa(t)}function Sa(){return"function"==typeof XMLHttpRequest||"object"===("undefined"==typeof XMLHttpRequest?"undefined":Aa(XMLHttpRequest))}var Ta;if(Ca.createInstance=ka.createInstance,Ca.createInstance,Ca.dir,Ca.init,Ca.loadResources,Ca.reloadResources,Ca.use,Ca.changeLanguage,Ca.getFixedT,Ca.t,Ca.exists,Ca.setDefaultNamespace,Ca.hasLoadedNamespace,Ca.loadNamespaces,Ca.loadLanguages,"function"==typeof fetch&&(Ta="undefined"!=typeof global&&global.fetch?global.fetch:"undefined"!=typeof window&&window.fetch?window.fetch:fetch),"undefined"!=typeof require&&"undefined"==typeof window){var Pa=Ta||require("cross-fetch");Pa.default&&(Pa=Pa.default),exports.default=Pa,module.exports=exports.default}var Ea,Ia,La,Oa=Object.freeze({__proto__:null});function Ra(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function $a(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Ra(Object(i),!0).forEach((function(e){Ma(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Ra(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function Ma(t,e,i){return e=function(t){var e=function(t,e){if("object"!=Na(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=Na(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Na(e)?e:e+""}(e),e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function Na(t){return Na="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Na(t)}"function"==typeof fetch&&(Ea="undefined"!=typeof global&&global.fetch?global.fetch:"undefined"!=typeof window&&window.fetch?window.fetch:fetch),Sa()&&("undefined"!=typeof global&&global.XMLHttpRequest?Ia=global.XMLHttpRequest:"undefined"!=typeof window&&window.XMLHttpRequest&&(Ia=window.XMLHttpRequest)),"function"==typeof ActiveXObject&&("undefined"!=typeof global&&global.ActiveXObject?La=global.ActiveXObject:"undefined"!=typeof window&&window.ActiveXObject&&(La=window.ActiveXObject)),Ea||!Oa||Ia||La||(Ea=Oa),"function"!=typeof Ea&&(Ea=void 0);var Da=function(t,e){if(e&&"object"===Na(e)){var i="";for(var r in e)i+="&"+encodeURIComponent(r)+"="+encodeURIComponent(e[r]);if(!i)return t;t=t+(-1!==t.indexOf("?")?"&":"?")+i.slice(1)}return t},za=function(t,e,i,r){var o=function(t){if(!t.ok)return i(t.statusText||"Error",{status:t.status});t.text().then((function(e){i(null,{status:t.status,data:e})})).catch(i)};if(r){var n=r(t,e);if(n instanceof Promise)return void n.then(o).catch(i)}"function"==typeof fetch?fetch(t,e).then(o).catch(i):Ea(t,e).then(o).catch(i)},Fa=!1,Ba=function(t,e,i,r){return"function"==typeof i&&(r=i,i=void 0),r=r||function(){},Ea&&0!==e.indexOf("file:")?function(t,e,i,r){t.queryStringParams&&(e=Da(e,t.queryStringParams));var o=$a({},"function"==typeof t.customHeaders?t.customHeaders():t.customHeaders);"undefined"==typeof window&&"undefined"!=typeof global&&void 0!==global.process&&global.process.versions&&global.process.versions.node&&(o["User-Agent"]="i18next-http-backend (node/".concat(global.process.version,"; ").concat(global.process.platform," ").concat(global.process.arch,")")),i&&(o["Content-Type"]="application/json");var n="function"==typeof t.requestOptions?t.requestOptions(i):t.requestOptions,s=$a({method:i?"POST":"GET",body:i?t.stringify(i):void 0,headers:o},Fa?{}:n),a="function"==typeof t.alternateFetch&&t.alternateFetch.length>=1?t.alternateFetch:void 0;try{za(e,s,r,a)}catch(t){if(!n||0===Object.keys(n).length||!t.message||t.message.indexOf("not implemented")<0)return r(t);try{Object.keys(n).forEach((function(t){delete s[t]})),za(e,s,r,a),Fa=!0}catch(t){r(t)}}}(t,e,i,r):Sa()||"function"==typeof ActiveXObject?function(t,e,i,r){i&&"object"===Na(i)&&(i=Da("",i).slice(1)),t.queryStringParams&&(e=Da(e,t.queryStringParams));try{var o;(o=Ia?new Ia:new La("MSXML2.XMLHTTP.3.0")).open(i?"POST":"GET",e,1),t.crossDomain||o.setRequestHeader("X-Requested-With","XMLHttpRequest"),o.withCredentials=!!t.withCredentials,i&&o.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),o.overrideMimeType&&o.overrideMimeType("application/json");var n=t.customHeaders;if(n="function"==typeof n?n():n)for(var s in n)o.setRequestHeader(s,n[s]);o.onreadystatechange=function(){o.readyState>3&&r(o.status>=400?o.statusText:null,{status:o.status,data:o.responseText})},o.send(i)}catch(t){console&&console.log(t)}}(t,e,i,r):void r(new Error("No fetch and no xhr implementation found!"))};function Ua(t){return Ua="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ua(t)}function Va(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function ja(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Va(Object(i),!0).forEach((function(e){Ha(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Va(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function Ga(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,qa(r.key),r)}}function Ha(t,e,i){return(e=qa(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function qa(t){var e=function(t,e){if("object"!=Ua(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=Ua(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ua(e)?e:e+""}var Wa,Ya,Xa,Ja=(Wa=function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.services=e,this.options=i,this.allOptions=r,this.type="backend",this.init(e,i,r)},Ya=[{key:"init",value:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this.services=t,this.options=ja(ja(ja({},{loadPath:"/locales/{{lng}}/{{ns}}.json",addPath:"/locales/add/{{lng}}/{{ns}}",parse:function(t){return JSON.parse(t)},stringify:JSON.stringify,parsePayload:function(t,e,i){return Ha({},e,i||"")},parseLoadPayload:function(t,e){},request:Ba,reloadInterval:"undefined"==typeof window&&36e5,customHeaders:{},queryStringParams:{},crossDomain:!1,withCredentials:!1,overrideMimeType:!1,requestOptions:{mode:"cors",credentials:"same-origin",cache:"default"}}),this.options||{}),i),this.allOptions=r,this.services&&this.options.reloadInterval){var o=setInterval((function(){return e.reload()}),this.options.reloadInterval);"object"===Ua(o)&&"function"==typeof o.unref&&o.unref()}}},{key:"readMulti",value:function(t,e,i){this._readAny(t,t,e,e,i)}},{key:"read",value:function(t,e,i){this._readAny([t],t,[e],e,i)}},{key:"_readAny",value:function(t,e,i,r,o){var n,s=this,a=this.options.loadPath;"function"==typeof this.options.loadPath&&(a=this.options.loadPath(t,i)),(a=function(t){return!!t&&"function"==typeof t.then}(n=a)?n:Promise.resolve(n)).then((function(n){if(!n)return o(null,{});var a=s.services.interpolator.interpolate(n,{lng:t.join("+"),ns:i.join("+")});s.loadUrl(a,o,e,r)}))}},{key:"loadUrl",value:function(t,e,i,r){var o=this,n="string"==typeof i?[i]:i,s="string"==typeof r?[r]:r,a=this.options.parseLoadPayload(n,s);this.options.request(this.options,t,a,(function(n,s){if(s&&(s.status>=500&&s.status<600||!s.status))return e("failed loading "+t+"; status code: "+s.status,!0);if(s&&s.status>=400&&s.status<500)return e("failed loading "+t+"; status code: "+s.status,!1);if(!s&&n&&n.message&&n.message.indexOf("Failed to fetch")>-1)return e("failed loading "+t+": "+n.message,!0);if(n)return e(n,!1);var a,l;try{a="string"==typeof s.data?o.options.parse(s.data,i,r):s.data}catch(e){l="failed parsing "+t+" to json"}if(l)return e(l,!1);e(null,a)}))}},{key:"create",value:function(t,e,i,r,o){var n=this;if(this.options.addPath){"string"==typeof t&&(t=[t]);var s=this.options.parsePayload(e,i,r),a=0,l=[],c=[];t.forEach((function(i){var r=n.options.addPath;"function"==typeof n.options.addPath&&(r=n.options.addPath(i,e));var d=n.services.interpolator.interpolate(r,{lng:i,ns:e});n.options.request(n.options,d,s,(function(e,i){a+=1,l.push(e),c.push(i),a===t.length&&"function"==typeof o&&o(l,c)}))}))}}},{key:"reload",value:function(){var t=this,e=this.services,i=e.backendConnector,r=e.languageUtils,o=e.logger,n=i.language;if(!n||"cimode"!==n.toLowerCase()){var s=[],a=function(t){r.toResolveHierarchy(t).forEach((function(t){s.indexOf(t)<0&&s.push(t)}))};a(n),this.allOptions.preload&&this.allOptions.preload.forEach((function(t){return a(t)})),s.forEach((function(e){t.allOptions.ns.forEach((function(t){i.read(e,t,"read",null,null,(function(r,n){r&&o.warn("loading namespace ".concat(t," for language ").concat(e," failed"),r),!r&&n&&o.log("loaded namespace ".concat(t," for language ").concat(e),n),i.loaded("".concat(e,"|").concat(t),r,n)}))}))}))}}}],Ya&&Ga(Wa.prototype,Ya),Xa&&Ga(Wa,Xa),Object.defineProperty(Wa,"prototype",{writable:!1}),Wa);Ja.type="backend";class Qa{static redirectTo(t){history.pushState({},"",t),window.dispatchEvent(new CustomEvent("location-changed")),document.dispatchEvent(new CustomEvent("yp-pause-media-playback",{bubbles:!0,detail:{}}))}static goToPost(t,e=void 0,i=void 0,r=void 0,o=!1){if(void 0===t)return void console.error("Can't find post id for goToPost");let n="/post/"+t;void 0!==e&&(n+="/"+e);const s=window.location.href;i&&(window.appGlobals.cache.cachedActivityItem=i),r&&r.Group&&r.Group.Community&&(window.appGlobals.cache.cachedPostItem=r),-1==s.indexOf(n)&&(window.appGlobals.activity("open","post",n,{id:t,modelType:"post"}),!0!==o&&window.app.setKeepOpenForPostsOn(window.location.pathname),setTimeout((()=>{this.redirectTo(n)})))}}class Ka extends Ms{constructor(t){super(),this.recommendationsGroupCache={},this.recommendationCallbacks={},this.lastRecommendationResponseLengths={},this.currentlyDownloadingIds={},this.preCacheLimit=3,this.serverApi=t}getNextRecommendationForGroup(t,e,i){if(this.currentPostId=e,this.recommendationCallbacks[t]=i,this.recommendationsGroupCache[t])if(this.recommendationsGroupCache[t].length>0){const e=this._getSelectedPost(t);e&&window.appGlobals.showRecommendationInfoIfNeeded(),i(e)}else i(null);else this._getRecommendationsForGroup(t)}_preCacheMediaForPost(t){setTimeout((()=>{let e=null;t.cover_media_type&&"none"!==t.cover_media_type||t.Category?t.cover_media_type&&"none"!==t.cover_media_type||!t.Category?"image"===t.cover_media_type&&(e=this._getImageFormatUrl(t.PostHeaderImages,0)):e=this._getCategoryImagePath(t):e="https://i.imgur.com/sdsFAoT.png",e&&((new Image).src=e)}))}_getImageFormatUrl(t,e){if(!(t&&t.length>0))return"";{const i=JSON.parse(t[t.length-1].formats);if(i&&i.length>0)return i[e]}}_getCategoryImagePath(t){return t&&t.Category&&t.Category.CategoryIconImages?this._getImageFormatUrl(t.Category.CategoryIconImages,0):""}_downloadItemToCache(t){setTimeout((()=>{this.currentlyDownloadingIds[t]?console.warn("Recommendation already downloading: "+t):(this.currentlyDownloadingIds[t]=!0,console.log("Recommendation downloading for cache: "+t),fetch("/api/posts/"+t).then((e=>(this.currentlyDownloadingIds[t]=!1,e.json()))).then((e=>{e?this._preCacheMediaForPost(e):console.error("Recommendation no post to save to cache"),window.appGlobals.cache.postItemsCache[t]=e})).catch((e=>{console.error("Recommendation: Error in getting post for cache",e),this.currentlyDownloadingIds[t]=!1})))}))}_ensureNextItemsAreCached(t){for(let e=0;e<Math.min(this.recommendationsGroupCache[t].length-1,this.preCacheLimit);e++)window.appGlobals.cache.postItemsCache[this.recommendationsGroupCache[t][e].id]||this._downloadItemToCache(this.recommendationsGroupCache[t][e].id)}async _getRecommendationsForGroup(t){const e=await this.serverApi.getRecommendationsForGroup(t);e&&(this.lastRecommendationResponseLengths[t]=e.length,this.recommendationsGroupCache[t]?this.recommendationsGroupCache[t]=this.recommendationsGroupCache[t].concat(e):this.recommendationsGroupCache[t]=e,this.recommendationCallbacks[t]&&(this.recommendationCallbacks[t](this._getSelectedPost(t)),delete this.recommendationCallbacks[t]))}_getSelectedPost(t){if(this.recommendationsGroupCache[t]){let e=this.recommendationsGroupCache[t][0];return e?(e.id===this.currentPostId&&(this.recommendationsGroupCache[t].shift(),e=this.recommendationsGroupCache[t].length>0?this.recommendationsGroupCache[t][0]:null),e&&this._ensureNextItemsAreCached(t),e):(console.warn("Recommendation no post for getSelectedPost, groupId: "+t),null)}return null}reset(){this.recommendationsSeenPostIds={},this.lastRecommendationResponseLengths={},this.recommendationCallbacks={},this.recommendationsGroupCache={}}}class Za extends Ms{constructor(){super(...arguments),this.backToDomainCommunityItems={},this.backToCommunityGroupItems={},this.communityItemsCache={},this.groupItemsCache={},this.postItemsCache={},this.autoTranslateCache={}}addPostsToCacheLater(t){const e=Math.floor(1e3*Math.random())+750;setTimeout((()=>{this.addPostsToCache(t)}),e)}addPostsToCache(t){if(t)for(let e=0;e<t.length;e++)this.postItemsCache[t[e].id]||(this.postItemsCache[t[e].id]=t[e]);else console.error("No posts for cache")}getPostFromCache(t){return this.postItemsCache[t]}updatePostInCache(t){this.postItemsCache[t.id]=t}}class tl extends Ms{_onlineEvent(){this.showToast(this.t("youAreOnline")),this._checkContentToSend()}_offlineEvent(){this.showToast(this.t("youAreNowOffline"))}_urlWithQuery(t,e){const i=Object.keys(e).filter((t=>void 0!==e[t]&&"object"!=typeof e[t])).map((t=>encodeURIComponent(t)+"="+encodeURIComponent(e[t]))).join("&");return t+=(-1===t.indexOf("?")?"?":"&")+i}_getItemsFromLocalStorage(){const t=[];for(let e=0;e<localStorage.length;e++){const i=localStorage.key(e);i&&i.indexOf(this.sendLaterStoragePrefix)>-1&&t.push({key:i,content:JSON.parse(localStorage.getItem(i))})}return t}_sendItems(t){t.forEach((t=>{const e=t.content;fetch(e.url,{method:e.method,headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e.body)}).then((()=>{this.showToast(this.t("storedDataSent")),localStorage.removeItem(t.key)})).catch((t=>{console.error(t),this.showToast(this.t("errorSendingContentWhenOnline"))}))}))}_checkContentToSend(){setTimeout((()=>{const t=this._getItemsFromLocalStorage();t.length>0?navigator.onLine?window.appUser.user?this._sendItems(t):this.showToast(this.t("notLoggedInContentSentWhenLoggedIn")):this.showToast(this.t("offlineContentSentWhenOnline")):navigator.onLine||this.showToast(this.t("youAreOffline"))}),4e3)}checkContentToSendForLoggedInUser(){this._checkContentToSend()}sendWhenOnlineNext(t){setTimeout((()=>{const e=this.sendLaterStoragePrefix+(new Date).getTime();localStorage.setItem(e,JSON.stringify(t)),this.showToast(this.t("offlineContentSentWhenOnline"))}))}constructor(){super(),this.sendLaterStoragePrefix="yp-send-later-",window.addEventListener("online",this._onlineEvent.bind(this)),window.addEventListener("offline",this._offlineEvent.bind(this)),this._checkContentToSend()}}class el extends Ms{constructor(){super(...arguments),this.communityTrackerIds={}}setupGoogleAnalytics(t){}facebookPixelTracking(t,e=void 0){if(this.pixelTrackerId&&t){let i;i="pageview"===t?"PageView":"event"===t&&e?e:t;new Image(1,1).src="https://www.facebook.com/tr?id="+this.pixelTrackerId+"&ev="+i+"&noscript=1",console.debug("Have sent to Facebook pixel: "+i)}}setCommunityPixelTracker(t){if(t&&""!==t)if(null!=localStorage.getItem("consentGivenForFacebookPixelTracking")){const e=this.pixelTrackerId;this.pixelTrackerId=t,t!==e&&this.facebookPixelTracking("pageview")}else localStorage.getItem("disableFacebookPixelTracking")?console.log("Facebook tracking disabled"):this.fireGlobal("yp-open-pixel-cookie-confirm",t);else this.pixelTrackerId=void 0}setCommunityAnalyticsTracker(t){if(t=t?.trim(),t&&t.length>5){const e=this.communityTrackerId;this.communityTrackerId=t,t!==e&&this.sendToAnalyticsTrackers("sendOnlyCommunity","pageview",location.pathname)}else this.communityTrackerId=void 0}sendToAnalyticsTrackers(t,e,i,r=void 0,o=void 0,n=void 0){"sendOnlyCommunity"!=t&&this.facebookPixelTracking(e,i),"pageview"===e&&"sendOnlyCommunity"!==t&&window.appGlobals.activity("pageview",i)}sendLoginAndSignup(t,e,i,r=void 0){}}const il={monochrome:0,neutral:1,tonalSpot:2,vibrant:3,expressive:4,fidelity:5,content:6,rainbow:7,fruitSalad:8};function rl(t,e,i,r,o){if("string"!=typeof t&&"dynamic"!==r||"object"!=typeof t&&"dynamic"===r)throw new Error("color / scheme type mismatch");let n,s;if(e&&(s=il[e]),"tonal"===r)n=new ar(Ai.fromInt(pr(t)),i,o);else if("fidelity"===r)n=new or(Ai.fromInt(pr(t)),i,o);else if("vibrant"===r)n=new lr(Ai.fromInt(pr(t)),i,o);else if("expressive"===r)n=new rr(Ai.fromInt(pr(t)),i,o);else if("content"===r)n=new ir(Ai.fromInt(pr(t)),i,o);else if("neutral"===r)n=new sr(Ai.fromInt(pr(t)),i,o);else if("monochrome"===r)n=new nr(Ai.fromInt(pr(t)),i,o);else if("dynamic"===r&&"object"==typeof t){console.log(t);const e=Ai.fromInt(pr(t.primary)),r=Ai.fromInt(pr(t.secondary)),a=Ai.fromInt(pr(t.tertiary)),l=Ai.fromInt(pr(t.neutral)),c=Ai.fromInt(pr(t.neutralVariant));console.log(t.primary),n=new Zi({sourceColorArgb:pr(t.primary),variant:void 0===s?5:s,contrastLevel:o,isDark:i,primaryPalette:Di.fromHueAndChroma(e.hue,e.chroma),secondaryPalette:Di.fromHueAndChroma(r.hue,r.chroma),tertiaryPalette:Di.fromHueAndChroma(a.hue,a.chroma),neutralPalette:Di.fromHueAndChroma(l.hue,l.chroma),neutralVariantPalette:Di.fromHueAndChroma(c.hue,c.chroma)})}return function(t){const e=function(t){return{"highest-surface":Ni.highestSurface(t),background:Ni.background,"on-background":Ni.onBackground,surface:Ni.surface,"surface-dim":Ni.surfaceDim,"surface-bright":Ni.surfaceBright,"surface-container-lowest":Ni.surfaceContainerLowest,"surface-container-low":Ni.surfaceContainerLow,"surface-container":Ni.surfaceContainer,"surface-container-high":Ni.surfaceContainerHigh,"surface-container-highest":Ni.surfaceContainerHighest,"on-surface":Ni.onSurface,"surface-variant":Ni.surfaceVariant,"on-surface-variant":Ni.onSurfaceVariant,"inverse-surface":Ni.inverseSurface,"inverse-on-surface":Ni.inverseOnSurface,outline:Ni.outline,"outline-variant":Ni.outlineVariant,shadow:Ni.shadow,scrim:Ni.scrim,"surface-tint":Ni.surfaceTint,primary:Ni.primary,"on-primary":Ni.onPrimary,"primary-container":Ni.primaryContainer,"on-primary-container":Ni.onPrimaryContainer,"inverse-primary":Ni.inversePrimary,"inverse-on-primary":Ni.primary,secondary:Ni.secondary,"on-secondary":Ni.onSecondary,"secondary-container":Ni.secondaryContainer,"on-secondary-container":Ni.onSecondaryContainer,tertiary:Ni.tertiary,"on-tertiary":Ni.onTertiary,"tertiary-container":Ni.tertiaryContainer,"on-tertiary-container":Ni.onTertiaryContainer,error:Ni.error,"on-error":Ni.onError,"error-container":Ni.errorContainer,"on-error-container":Ni.onErrorContainer}}(t),i={};for(const[r,o]of Object.entries(e))i[r]=ur(o.getArgb(t));return i}(n)}function ol(t,e,i="material-theme"){let r=":root{";for(const[t,i]of Object.entries(e))r+=`--md-sys-color-${t}:${i};`;r+="}",function(t,e,i){try{if((new CSSStyleSheet).replace instanceof Function){let r=window[i];r||(r=new CSSStyleSheet,t.adoptedStyleSheets=[...t.adoptedStyleSheets,r],window[i]=r),r.replace(e).catch(console.error)}}catch(r){if(t instanceof Document&&t.head){let r=t.createElement("style");r.setAttribute("id",i),r.textContent=e,t.head.appendChild(r)}else console.error("The provided document does not have a head element.",r)}}(t,r,i)}class nl{constructor(){this.themes=[],this.themeColor="#0327f8",this.themeDarkMode=!1,this.themeHighContrast=!1,this.isAppleDevice=!1,this.themeScheme="tonal";const t=localStorage.getItem(Cs.darkModeLocalStorageKey);this.themeDarkMode=!!t;const e=localStorage.getItem(Cs.highContrastLocalStorageKey);this.themeHighContrast=!!e,this.setupOldThemes(),this.themeChanged()}setupOldThemes(){this.themes.push({name:"Reykjavk","--mdc-theme-background":"#f7f7f7","--mdc-theme-primary":"#103458","--mdc-theme-secondary":"#ff6500"}),this.themes.push({name:"Basalt Gray","--mdc-theme-background":"#f7f7f7","--mdc-theme-primary":"#37474f","--mdc-theme-secondary":"#ff6500"}),this.themes.push({name:"Green Moss","--mdc-theme-background":"#dcedc8","--mdc-theme-primary":"#558b2f","--mdc-theme-secondary":"#c51162"}),this.themes.push({name:"Google Blue","--mdc-theme-background":"#e3f2fd","--mdc-theme-primary":"#1565c0","--mdc-theme-secondary":"#ff3d00"}),this.themes.push({name:"Red Rhubarb","--mdc-theme-background":"#f1f8e9","--mdc-theme-primary":"#c62828","--mdc-theme-secondary":"#ffd600"}),this.themes.push({name:"Mountain Roses","--mdc-theme-background":"#f1f8e9","--mdc-theme-primary":"#2e7d32","--mdc-theme-secondary":"#d50000"}),this.themes.push({name:"Purple Wizards","--mdc-theme-background":"#ede7f6","--mdc-theme-primary":"#4527a0","--mdc-theme-secondary":"#d50000"}),this.themes.push({name:"Kpavogur","--mdc-theme-background":"#F0F0F0","--mdc-theme-primary":"#004E24","--mdc-theme-secondary":"#ff6500"}),this.themes.push({name:"Forbrukerrdet","--mdc-theme-background":"#f5f5f5","--mdc-theme-primary":"#4b7179","--mdc-theme-secondary":"#d0672f"}),this.themes.push({name:"Forbrukerrdet Fonts","--mdc-theme-background":"#f5f5f5","--mdc-theme-primary":"#4b7179","--mdc-theme-secondary":"#d0672f",fonts:{htmlImport:"/styles/fonts/forbrukerradet-font.html",fontName:"FFClanWebBook"}}),this.themes.push({name:"I choose Malta","--mdc-theme-background":"#cfd8dc","--mdc-theme-primary":"#001a4b","--mdc-theme-secondary":"#d71920"}),this.themes.push({name:"Reykjavk Blue","--mdc-theme-background":"#f7f7f7","--mdc-theme-primary":"#084F71","--mdc-theme-secondary":"#ff6500"}),this.themes.push({name:"Unicorn 1","--mdc-theme-background":"#f7f7f7","--mdc-theme-primary":"#aa3319","--mdc-theme-secondary":"#112e4c"}),this.themes.push({name:"Unicorn 2","--mdc-theme-background":"#f7f7f7","--mdc-theme-primary":"#282828","--mdc-theme-secondary":"#aa3319"}),this.themes.push({name:"Mount Air","--mdc-theme-background":"#f7f7f7","--mdc-theme-primary":"#0d3c55","--mdc-theme-secondary":"#f16c20"}),this.themes.push({name:"Snjallborg","--mdc-theme-background":"#cfd8dc","--mdc-theme-primary":"#1e9ac8","--mdc-theme-secondary":"#ee7aa2"}),this.themes.push({name:"Black","--mdc-theme-background":"#f7f7f7","--mdc-theme-primary":"#282828","--mdc-theme-secondary":"#ff6500"}),this.themes.push({name:"Nesi Okkar","--mdc-theme-background":"#cfd8dc","--mdc-theme-primary":"#525254","--mdc-theme-secondary":"#e0701e"}),this.themes.push({disabled:!0,name:"Snjallborg","--mdc-theme-background":"#cfd8dc","--mdc-theme-primary":"#1e9ac8","--mdc-theme-secondary":"#ee7aa2"}),this.themes.push({disabled:!0,name:"Black","--mdc-theme-background":"#cfd8dc","--mdc-theme-primary":"#282828","--mdc-theme-secondary":"#ff6500"}),this.themes.push({disabled:!0,name:"Nesi Okkar","--mdc-theme-background":"#cfd8dc","--mdc-theme-primary":"#525254","--mdc-theme-secondary":"#e0701e"}),this.themes.push({name:"Iceland","--mdc-theme-background":"#cfd8dc","--mdc-theme-primary":"#282828","--mdc-theme-secondary":"#dc1e35"}),this.themes.push({name:"The Westbourne","--mdc-theme-background":"#f1f8e9","--mdc-theme-primary":"#c62828","--mdc-theme-secondary":"#fbba00"}),this.themes.push({name:"Amsterdam","--mdc-theme-background":"#cfd8dc","--mdc-theme-primary":"#164995","--mdc-theme-secondary":"#ed1b24"}),this.themes.push({name:"AS Roma","--mdc-theme-background":"#DDDBDA","--mdc-theme-primary":"#970a2c","--mdc-theme-secondary":"#fbba00"}),this.themes.push({name:"AS Roma Inverted","--mdc-theme-background":"#DDDBDA","--mdc-theme-primary":"#970a2c","--mdc-theme-secondary":"#1D1D1B"}),this.themes.push({name:"New Jersey","--mdc-theme-background":"#f7f7f7","--mdc-theme-primary":"#56920C","--mdc-theme-secondary":"#1880c7"}),this.themes.push({name:"New Jersey Inverted","--mdc-theme-background":"#f7f7f7","--mdc-theme-primary":"#1880c7","--mdc-theme-secondary":"#56920C"}),this.themes.push({name:"Scottish Parliament","--mdc-theme-background":"#f7f7f7","--mdc-theme-primary":"#500778","--mdc-theme-secondary":"#E87722"}),this.themes.push({name:"RoStartup","--mdc-theme-background":"#F7F7F7","--mdc-theme-primary":"#154164","--mdc-theme-secondary":"#1f52a5","--app-header-font-weight":"500","--app-tags-text-color":"#1f52a5","--app-tags-font-weight":"500",fonts:{htmlImport:"/styles/fonts/rostartup-font.html",fontName:"Montserrat"}}),this.themes.push({name:"wienExtra","--mdc-theme-background":"#F7F7F7","--mdc-theme-primary":"#292929","--mdc-theme-secondary":"#ff0000",fonts:{htmlImport:"/styles/fonts/junges-wien-font.html",fontName:"WienerMelange"}}),this.themes.push({name:"Frumbjrg","--mdc-theme-background":"#fefefe","--mdc-theme-primary":"#17263e","--mdc-theme-secondary":"#1f5d04",fonts:{htmlImport:"/styles/fonts/frumbjorg-font.html",fontName:"Merriweather"}})}updateStyles(t){for(const e in t)Object.prototype.hasOwnProperty.call(t,e)&&window.app&&window.app.style.setProperty(e,t[e])}setThemeFromOldConfiguration(t,e=void 0){if(e&&e.themeOverrideColorPrimary&&e.themeOverrideColorPrimary.length>5&&e.themeOverrideColorAccent&&e.themeOverrideColorAccent.length>5?(6===e.themeOverrideColorPrimary.length&&(e.themeOverrideColorPrimary="#"+e.themeOverrideColorPrimary),6===e.themeOverrideColorAccent.length&&(e.themeOverrideColorAccent="#"+e.themeOverrideColorAccent),e.themeOverrideBackgroundColor&&6===e.themeOverrideBackgroundColor.length&&(e.themeOverrideBackgroundColor="#"+e.themeOverrideBackgroundColor),this.themeColor=e.themeOverrideColorPrimary,this.themeChanged()):void 0!==t&&this.themes[t]&&(this.themeColor=this.themes[t]["--mdc-theme-primary"],this.themeChanged()),t&&this.themes[t]&&("wienExtra"===this.themes[t].originalName||"RoStartup"===this.themes[t].originalName||"Frumbjrg"===this.themes[t].originalName)){const t=new CustomEvent("yp-large-font",{detail:!0,bubbles:!0,composed:!0});document.dispatchEvent(t)}else if(t&&this.themes[t]){const t=new CustomEvent("yp-large-font",{detail:!1,bubbles:!0,composed:!0});document.dispatchEvent(t)}}sanitizeFontStyles(t){const e=["body","font-family","font-weight","font-size"],i=/([a-zA-Z\-]+)\s*:\s*([^;]+);?/g;let r,o="";for(;null!==(r=i.exec(t));)e.includes(r[1])&&(o+=`${r[1]}: ${r[2]}; `);return o}sanitizeFontImports(t){const e=["fonts.googleapis.com","use.typekit.net","fonts.fontsquirrel.com","fast.fonts.net","myfonts.com","foundry.typenetwork.com","fonts.fontspring.com","creativemarket.com","fonts.linotype.com","fonts.monotype.com","fontshop.com","typography.com"];return t.filter((t=>{try{const i=new URL(t);return"https:"===i.protocol&&e.some((t=>i.hostname.endsWith(t)||i.hostname.includes(t)))}catch(t){return!1}}))}applyFontStyles(t){let e=document.getElementById("custom-font-styles");t?(e||(e=document.createElement("style"),e.id="custom-font-styles",document.head.appendChild(e)),e.textContent=t):e&&(e.textContent="")}importFonts(t){if(document.querySelectorAll("link[data-font-import]").forEach((t=>t.remove())),t){this.sanitizeFontImports(t.split("\n")).forEach((t=>{const e=document.createElement("link");e.rel="stylesheet",e.href=t,e.setAttribute("data-font-import","true"),document.head.appendChild(e)}))}}setTheme(t,e=void 0){e?e.theme?(e.theme.oneDynamicColor?(this.themeColor=e.theme.oneDynamicColor,this.themeScheme=e.theme.oneColorScheme):e.theme.primaryColor&&(this.themeColor=void 0,this.themePrimaryColor=e.theme.primaryColor,this.themeSecondaryColor=e.theme.secondaryColor,this.themeTertiaryColor=e.theme.tertiaryColor,this.themeNeutralColor=e.theme.neutralColor,this.themeNeutralVariantColor=e.theme.neutralVariantColor),e.theme.fontStyles?this.applyFontStyles(e.theme.fontStyles):this.applyFontStyles(null),e.theme.fontImports?this.importFonts(e.theme.fontImports):this.importFonts(null),this.themeChanged(),this.updateBrowserThemeColor()):this.setThemeFromOldConfiguration(t,e):console.warn("No configuration found")}updateBrowserThemeColor(){let t=document.querySelector('meta[name="theme-color"]'),e=this.themeColor||this.themePrimaryColor||"#000000";e&&!e.startsWith("#")&&(e=`#${e}`),!t&&e&&(t=document.createElement("meta"),t.setAttribute("name","theme-color"),document.getElementsByTagName("head")[0].appendChild(t)),t&&e&&t.setAttribute("content",e)}updateLiveFromConfiguration(t){t&&(t.oneDynamicColor?(this.themeColor=t.oneDynamicColor,this.themeScheme=t.oneColorScheme):(this.themeColor=void 0,this.themePrimaryColor=t.primaryColor,this.themeSecondaryColor=t.secondaryColor,this.themeTertiaryColor=t.tertiaryColor,this.themeNeutralColor=t.neutralColor,this.themeNeutralVariantColor=t.neutralVariantColor,this.themeVariant=t.variant||"fidelity"),this.themeChanged())}themeChanged(t=void 0){let e={};const i=void 0===this.themeDarkMode?window.matchMedia("(prefers-color-scheme: dark)").matches:this.themeDarkMode;e=this.themeColor?rl(this.getHexColor(this.themeColor),this.themeVariant,i,this.themeScheme,this.themeHighContrast?2:0):rl({primary:this.getHexColor(this.themePrimaryColor||"#000000"),secondary:this.getHexColor(this.themeSecondaryColor||"#000000"),tertiary:this.getHexColor(this.themeTertiaryColor||"#000000"),neutral:this.getHexColor(this.themeNeutralColor||"#000000"),neutralVariant:this.getHexColor(this.themeNeutralVariantColor||"#000000")},this.themeVariant,i,"dynamic",this.themeHighContrast?2:0),ol(document,e)}getHexColor(t){return t&&6===(t=t.replace(/#/g,"")).length?`#${t}`:"#000000"}}nl.themeScemesOptionsWithName=[{name:"Tonal",value:"tonal"},{name:"Vibrant",value:"vibrant"},{name:"Expressive",value:"expressive"},{name:"Content",value:"content"},{name:"Neutral",value:"neutral"},{name:"Monochrome",value:"monochrome"},{name:"Fidelity",value:"fidelity"}],nl.themeVariantsOptionsWithName=[{name:"Monochrome",value:"monochrome"},{name:"Neutral",value:"neutral"},{name:"Tonal Spot",value:"tonalSpot"},{name:"Vibrant",value:"vibrant"},{name:"Expressive",value:"expressive"},{name:"Fidelity",value:"fidelity"},{name:"Content",value:"content"},{name:"Rainbow",value:"rainbow"},{name:"Fruit Salad",value:"fruitSalad"}];class sl extends Ms{constructor(t,e=!1){super(),this.seenWelcome=!1,this.resetSeenWelcome=!1,this.disableWelcome=!1,this.activityHost="",this.groupConfigOverrides={},this.currentForceSaml=!1,this.disableFacebookLoginForGroup=!1,this.hasLlm=!1,this.originalQueryParameters={},this.externalGoalCounter=0,this.autoTranslate=!1,this.goalTriggerEvents=["newPost","endorse_up","endorse_down","newPointFor","newPointAgainst"],this.haveLoadedLanguages=!1,this.hasTranscriptSupport=!1,this.hasVideoUpload=!1,this.hasAudioUpload=!1,this.groupLoadNewPost=!1,e||(this.appStartTime=new Date,this.serverApi=t,this.recommendations=new Ka(t),this.cache=new Za,this.analytics=new el,this.theme=new nl,this.offline=new tl,this.boot(),this.hasVideoUploadSupport(),this.hasAudioUploadSupport(),this.fireGlobal("app-ready"),this.parseQueryString(),this.addGlobalListener("yp-logged-in",this._userLoggedIn.bind(this)))}showRecommendationInfoIfNeeded(){localStorage.getItem("ypHaveShownRecommendationInfo")||(localStorage.setItem("ypHaveShownRecommendationInfo","1"),this.fireGlobal("yp-notify-dialog",{text:this.t("recommendationToastInfo")}))}showSpeechToTextInfoIfNeeded(){window.appGlobals.hasTranscriptSupport&&!localStorage.getItem("haveShownTranscriptInfo")&&(localStorage.setItem("haveShownTranscriptInfo","1"),this.fireGlobal("yp-notify-dialog",{text:this.t("speechToTextInfo")}))}async hasVideoUploadSupport(){const t=await this.serverApi.hasVideoUploadSupport();t&&(window.appGlobals.hasVideoUpload=t.hasVideoUploadSupport,window.appGlobals.hasTranscriptSupport=t.hasTranscriptSupport,this.fireGlobal("yp-has-video-upload"))}sendVideoView(t){this.serverApi.sendVideoView({videoId:t}),this.activity("view","video",t)}sendLongVideoView(t){this.serverApi.sendVideoView({videoId:t,longPlaytime:!0}),this.activity("view","videoLong",t)}async hasAudioUploadSupport(){const t=await this.serverApi.hasAudioUploadSupport();t&&(window.appGlobals.hasAudioUpload=t.hasAudioUploadSupport,this.fireGlobal("yp-has-audio-upload"))}sendAudioListen(t){this.serverApi.sendAudioView({audioId:t}),this.activity("view","audio",t)}sendLongAudioListen(t){this.serverApi.sendAudioView({audioId:t,longPlaytime:!0}),this.activity("view","audioLong",t)}changeLocaleIfNeededAfterWait(t,e){!0===window.appGlobals.haveLoadedLanguages&&t&&this.language!=t&&(!e&&localStorage.getItem("yp-user-locale")||Ca.changeLanguage(t,(()=>{this.fireGlobal("yp-language-loaded",{language:t}),this.fireGlobal("language-loaded",{language:t})})))}setHighlightedLanguages(t){this.highlightedLanguages=t,this.fireGlobal("yp-refresh-language-selection")}changeLocaleIfNeeded(t,e=!1){window.appGlobals.haveLoadedLanguages?this.changeLocaleIfNeededAfterWait(t,e):setTimeout((()=>{console.warn("Locales not loaded while trying to load languages, trying again in 100 ms"),this.changeLocaleIfNeeded(t,e)}),100)}parseQueryString(){const t=(window.location.search||"?").substr(1),e={};t.split("&").forEach((t=>{const i=t.split("="),r=decodeURIComponent(i[0]),o=decodeURIComponent(i.length>1?i[1]:"");e[r]=o})),this.originalQueryParameters=e}setAnonymousUser(t){this.currentAnonymousUser=t}setRegistrationQuestionGroup(t){t&&t.configuration&&t.configuration.registrationQuestionsJson?(this.registrationQuestionsGroup=t,window.appUser.checkRegistrationAnswersCurrent()):this.registrationQuestionsGroup=void 0}setAnonymousGroupStatus(t){t&&t.configuration&&(t.configuration.allowAnonymousUsers||t.configuration.allowOneTimeLoginWithName)?(this.currentAnonymousGroup=t,!window.appUser.user&&this.currentAnonymousUser?window.appUser.setLoggedInUser(this.currentAnonymousUser):window.appUser&&!window.appUser.user&&t.configuration.allowAnonymousAutoLogin&&this.originalQueryParameters&&this.originalQueryParameters.autoLogin&&window.appUser.autoAnonymousLogin()):(window.appUser&&window.appUser.user&&window.appUser.user.profile_data&&window.appUser.user.profile_data.isAnonymousUser&&window.appUser.removeAnonymousUser(),this.currentAnonymousGroup=void 0)}_domainChanged(t){t&&this.fireGlobal("yp-domain-changed",{domain:t})}notifyUserViaToast(t){this.fireGlobal("yp-open-toast",{text:t})}reBoot(){this.boot()}_userLoggedIn(t){t.detail&&setTimeout((()=>{}),250),this.recommendations.reset()}setupTranslationSystem(t=""){const e=window.location.hostname;let i="en";if(e.indexOf("betrireykjavik")>-1)i="is";else if(e.indexOf("betraisland")>-1)i="is";else if(e.indexOf("forbrukerradet")>-1)i="no";else{const t=e.substring(e.lastIndexOf("."));i={".fr":"fr",".hr":"hr",".hu":"hu",".nl":"nl",".no":"no",".pl":"pl",".tw":"zh_tw"}[t]||"en"}const r=localStorage.getItem("yp-user-locale");let o;r&&(i=r),window.appGlobals.originalQueryParameters&&window.appGlobals.originalQueryParameters.locale&&(o=window.appGlobals.originalQueryParameters.locale),window.appGlobals.originalQueryParameters&&window.appGlobals.originalQueryParameters.startAutoTranslate&&setTimeout((()=>{this.startTranslation()}),2500),o&&o.length>1&&(i=o,localStorage.setItem("yp-user-locale",o)),i=i.replace("-","_").toLowerCase(),Ca.use(Ja).init({lng:i,fallbackLng:"en",backend:{loadPath:`${t}/locales/{{lng}}/{{ns}}.json`}},(()=>{window.appGlobals.locale=i,window.appGlobals.i18nTranslation=Ca,window.appGlobals.haveLoadedLanguages=!0,this.fireGlobal("yp-language-loaded",{language:i}),this.fireGlobal("language-loaded",{language:i})}))}startTranslation(){window.appGlobals.autoTranslate=!0,this.fireGlobal("yp-auto-translate",!0),window.appDialogs.getDialogAsync("masterToast",(t=>{t.labelText=this.t("autoTranslationStarted"),t.open=!0}))}stopTranslation(){window.appGlobals.autoTranslate=!1,this.fireGlobal("yp-auto-translate",!1),window.appDialogs.getDialogAsync("masterToast",(t=>{t.labelText=this.t("autoTranslationStopped"),t.open=!0})),sessionStorage.setItem("dontPromptForAutoTranslation","1")}async boot(){const t=await this.serverApi.boot();t&&(this.domain=t.domain,this.googleMapsApiKey=t.domain.googleMapsApiKey,this.hasLlm=void 0!==t.domain.hasLlm&&t.domain.hasLlm,this._domainChanged(this.domain),"/"==window.location.pathname&&(t.community&&t.community.configuration&&t.community.configuration.redirectToGroupId?Qa.redirectTo("/group/"+t.community.configuration.redirectToGroupId):t.community&&!t.community.is_community_folder?Qa.redirectTo("/community/"+t.community.id):t.community&&t.community.is_community_folder?Qa.redirectTo("/community_folder/"+t.community.id):(Qa.redirectTo("/domain/"+this.domain.id),this.fireGlobal("yp-change-header",{headerTitle:this.domain.domain_name,headerDescription:this.domain.description})))),this.fireGlobal("yp-boot-from-server")}setupGroupConfigOverride(t,e){const i={};e.split(";").forEach((function(t){const e=t.split("=");i[e[0]]=e[1]})),this.groupConfigOverrides[t]=i,i.ln&&this.changeLocaleIfNeeded(i.ln,!0)}overrideGroupConfigIfNeeded(t,e){e||(e={});const i=this.groupConfigOverrides[t];return i?(i.hg&&(e.hideGroupHeader=Boolean(i.hg)),i.ht&&(e.hideAllTabs=Boolean(i.ht)),i.hh&&(e.hideHelpIcon=Boolean(i.hh)),i.rn&&(e.customBackName=i.rn),i.ru&&(e.customBackURL=i.ru),e):e}postLoadGroupProcessing(t){this.originalQueryParameters.yu&&(this.serverApi.marketingTrackingOpen(t.id,this.originalQueryParameters),this.externalGoalTriggerGroupId=t.id,this.goalTriggerEvents=["newPost","newPointFor","newPointAgainst"],this.originalQueryParameters.goalThreshold=1)}checkExternalGoalTrigger(t){this.externalGoalTriggerGroupId&&this.originalQueryParameters&&this.originalQueryParameters.goalThreshold&&this.goalTriggerEvents.indexOf(t)>-1&&(this.externalGoalCounter+=1,this.externalGoalCounter==this.originalQueryParameters.goalThreshold&&this.serverApi.triggerTrackingGoal(this.externalGoalTriggerGroupId,this.originalQueryParameters))}activity(t,e=void 0,i=void 0,r=void 0){let o;o=window.appUser&&window.appUser.user?window.appUser.user.id:"-1";let n="activity stream: "+o+" "+t+" "+e;console.log(n),i&&(n+=" "+i),"open"==t?setTimeout((()=>{this.analytics.sendToAnalyticsTrackers("send","event",e||{},t)}),25):this.analytics.sendToAnalyticsTrackers("send","event",e||{},t),this.serverApi.createActivityFromApp({actor:o,type:t,object:e,target:JSON.stringify(r),context:i||"",path_name:location.pathname,referrer:document.referrer,screen_width:window.innerWidth,url:window.location.href,userLocale:this.locale,userAutoTranslate:this.autoTranslate,groupId:this.currentGroup?this.currentGroup.id:void 0,event_time:(new Date).toISOString(),session_id:this.getSessionFromCookie(),user_agent:navigator.userAgent}),"completed"!==t&&"clicked"!==t||this.checkExternalGoalTrigger(e)}setSeenWelcome(){this.seenWelcome=!0,localStorage.setItem("yrpri-welcome-status","1")}getSessionFromCookie(){const t=document.cookie.split(";");let e="";for(let i=0;i<t.length;i++){const r=t[i].split("=")[0],o=t[i].split("=")[1];" connect.sid"==r&&(e=o)}return e}}class al extends sl{constructor(t){super(t,!0),this.disableParentConstruction=!0,this.agentsInstanceRegistry=new Map,this.connectorsInstanceRegistry=new Map,this.currentAgentListeners=[],this.addToAgentsRegistry=t=>{this.agentsInstanceRegistry.set(t.id,t)},this.addToConnectorsRegistry=t=>{this.connectorsInstanceRegistry.set(t.id,t)},this.getEarlName=()=>{const t=new URLSearchParams(window.location.search);if(t.has("name"))return t.get("name");{const t=window.location.pathname.split("/");if(t.length>=2&&t[1])return t[1]}return console.error(`Earl name not found in URL or path: ${window.location.href}`),null},this.setIds=t=>{this.questionId=t.detail.questionId,this.earlId=t.detail.earlId,this.promptId=t.detail.promptId},this.parseQueryString=()=>{const t=(window.location.search||"?").substr(1);let e={};const i=/([^&=]+)=?([^&]*)(?:&+|$)/g;let r;for(;r=i.exec(t);){const t=r[1],i=r[2];e[t]=i}this.originalQueryParameters=e},this.getSessionFromCookie=()=>{const t=document.cookie.split(";");let e="";for(let i=0;i<t.length;i++){let r=t[i].split("=")[0],o=t[i].split("=")[1];"_all_our_ideas_session"===r.trim()&&(e=o)}return e},this.activity=(t,e=void 0)=>{let i;window.appUser&&window.appUser.user||(i="-1");const r=new Date,o={actor:i,type:t,object:e,path_name:location.pathname,event_time:r.toISOString(),session_id:this.getSessionFromCookie(),originalQueryString:this.getOriginalQueryString(),originalReferrer:this.originalReferrer,questionId:this.questionId,earlId:this.earlId,promptId:this.promptId,earlName:this.earlName,userLocale:window.locale,userAutoTranslate:window.autoTranslate,user_agent:navigator.userAgent,referrer:document.referrer,url:location.href,screen_width:window.innerWidth};"function"==typeof gtag&&gtag("event",t);try{fetch("/api/analytics/createActivityFromApp",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}).then((e=>{e.ok?"Voting - left"!==t&&"Voting - right"!==t&&"New Idea - added"!==t||this.checkExternalGoalTrigger(t):console.error(`HTTP error! status: ${e.status}`)})).catch((t=>{console.error("There has been a problem with your fetch operation:",t)}))}catch(t){console.error(t)}},this.currentRunningAgentId=void 0,this.parseQueryString(),this.originalReferrer=document.referrer,document.addEventListener("set-ids",this.setIds.bind(this))}setCurrentRunningAgentId(t){this.currentRunningAgentId=t,this.notifyCurrentAgentListeners()}addCurrentAgentListener(t){this.currentAgentListeners.push(t)}removeCurrentAgentListener(t){this.currentAgentListeners=this.currentAgentListeners.filter((e=>e!==t))}notifyCurrentAgentListeners(){this.currentAgentListeners.forEach((t=>t(this.currentRunningAgentId)))}getAgentInstance(t){return this.agentsInstanceRegistry.get(t)}getConnectorInstance(t){return this.connectorsInstanceRegistry.get(t)}getOriginalQueryString(){return this.originalQueryParameters?new URLSearchParams(this.originalQueryParameters).toString():null}}class ll{static _hasAdminRights(t,e){return null!=e.find((e=>e.id==t))}static _hasPromoterAccess(t,e,i){return t?!(!window.appUser||!window.appUser.user)&&(window.appUser.user.id==t.user_id||(!(!t.User||window.appUser.user.id!=t.User.id)||!!window.appUser.promoterRights&&this._hasAdminRights(e,i))):!!window.appUser&&(console.warn("No object in hasAccess"),!1)}static checkGroupPromoterAccess(t){return t&&window.appUser&&window.appUser.promoterRights?this._hasPromoterAccess(t,t.id,window.appUser.promoterRights.GroupPromoters):(t||console.warn("No group in hasAccess"),!1)}static checkCommunityPromoterAccess(t){return t&&window.appUser&&window.appUser.promoterRights?this._hasPromoterAccess(t,t.id,window.appUser.promoterRights.CommunityPromoters):(t||console.warn("No community in hasAccess"),!1)}static _hasAccess(t,e,i){return t?!(!window.appUser||!window.appUser.user)&&(window.appUser.user.id==t.user_id||(!(!t.User||window.appUser.user.id!=t.User.id)||!!window.appUser.adminRights&&this._hasAdminRights(e,i))):!!window.appUser&&(console.warn("No object in hasAccess"),!1)}static hasImageAccess(t,e){return!!(t&&e&&window.appUser&&window.appUser.adminRights)&&this._hasAccess(t,e.group_id,window.appUser.adminRights.GroupAdmins)}static checkPostAccess(t){return t&&window.appUser&&window.appUser.adminRights?this._hasAccess(t,t.group_id,window.appUser.adminRights.GroupAdmins):t&&t.User&&window.appUser&&window.appUser.user?t.User.id===window.appUser.user.id:(t||console.warn("No post in hasAccess"),!1)}static checkPointAccess(t){return t&&t.Post&&window.appUser&&window.appUser.adminRights?this._hasAccess(t,t.Post.group_id,window.appUser.adminRights.GroupAdmins):!!(t&&window.appUser&&window.appUser.user&&window.appUser.user.id==t.user_id)}static checkPostAdminOnlyAccess(t){return t&&window.appUser&&window.appUser.adminRights?this._hasAdminRights(t.group_id,window.appUser.adminRights.GroupAdmins):(t||console.warn("No post in hasAccess"),!1)}static checkGroupAccess(t){return t&&window.appUser&&window.appUser.adminRights?this._hasAccess(t,t.id,window.appUser.adminRights.GroupAdmins):(t||console.warn("No group in hasAccess"),!1)}static checkCommunityAccess(t){return t&&window.appUser&&window.appUser.adminRights?this._hasAccess(t,t.id,window.appUser.adminRights.CommunityAdmins):(t||console.warn("No community in hasAccess"),!1)}static checkDomainAccess(t){return t&&window.appUser&&window.appUser.adminRights?this._hasAccess(t,t.id,window.appUser.adminRights.DomainAdmins):(t||console.warn("No domain in hasAccess"),!1)}static hasUserAccess(t){return!!(t&&window.appUser&&window.appUser.user&&window.appUser.user.id==t.id)}}var cl="3.4.2";function dl(t,e){return new Promise((function(i){return setTimeout(i,t,e)}))}function hl(t){return!!t&&"function"==typeof t.then}function ul(t,e){try{var i=t();hl(i)?i.then((function(t){return e(!0,t)}),(function(t){return e(!1,t)})):e(!0,i)}catch(t){e(!1,t)}}function pl(t,e,i){return void 0===i&&(i=16),yt(this,void 0,void 0,(function(){var r,o,n,s;return xt(this,(function(a){switch(a.label){case 0:r=Array(t.length),o=Date.now(),n=0,a.label=1;case 1:return n<t.length?(r[n]=e(t[n],n),(s=Date.now())>=o+i?(o=s,[4,dl(0)]):[3,3]):[3,4];case 2:a.sent(),a.label=3;case 3:return++n,[3,1];case 4:return[2,r]}}))}))}function fl(t){t.then(void 0,(function(){}))}function ml(t,e){t=[t[0]>>>16,65535&t[0],t[1]>>>16,65535&t[1]],e=[e[0]>>>16,65535&e[0],e[1]>>>16,65535&e[1]];var i=[0,0,0,0];return i[3]+=t[3]+e[3],i[2]+=i[3]>>>16,i[3]&=65535,i[2]+=t[2]+e[2],i[1]+=i[2]>>>16,i[2]&=65535,i[1]+=t[1]+e[1],i[0]+=i[1]>>>16,i[1]&=65535,i[0]+=t[0]+e[0],i[0]&=65535,[i[0]<<16|i[1],i[2]<<16|i[3]]}function gl(t,e){t=[t[0]>>>16,65535&t[0],t[1]>>>16,65535&t[1]],e=[e[0]>>>16,65535&e[0],e[1]>>>16,65535&e[1]];var i=[0,0,0,0];return i[3]+=t[3]*e[3],i[2]+=i[3]>>>16,i[3]&=65535,i[2]+=t[2]*e[3],i[1]+=i[2]>>>16,i[2]&=65535,i[2]+=t[3]*e[2],i[1]+=i[2]>>>16,i[2]&=65535,i[1]+=t[1]*e[3],i[0]+=i[1]>>>16,i[1]&=65535,i[1]+=t[2]*e[2],i[0]+=i[1]>>>16,i[1]&=65535,i[1]+=t[3]*e[1],i[0]+=i[1]>>>16,i[1]&=65535,i[0]+=t[0]*e[3]+t[1]*e[2]+t[2]*e[1]+t[3]*e[0],i[0]&=65535,[i[0]<<16|i[1],i[2]<<16|i[3]]}function vl(t,e){return 32===(e%=64)?[t[1],t[0]]:e<32?[t[0]<<e|t[1]>>>32-e,t[1]<<e|t[0]>>>32-e]:(e-=32,[t[1]<<e|t[0]>>>32-e,t[0]<<e|t[1]>>>32-e])}function bl(t,e){return 0===(e%=64)?t:e<32?[t[0]<<e|t[1]>>>32-e,t[1]<<e]:[t[1]<<e-32,0]}function yl(t,e){return[t[0]^e[0],t[1]^e[1]]}function xl(t){return t=yl(t,[0,t[0]>>>1]),t=yl(t=gl(t,[4283543511,3981806797]),[0,t[0]>>>1]),t=yl(t=gl(t,[3301882366,444984403]),[0,t[0]>>>1])}function wl(t){return parseInt(t)}function _l(t){return parseFloat(t)}function kl(t,e){return"number"==typeof t&&isNaN(t)?e:t}function Cl(t){return t.reduce((function(t,e){return t+(e?1:0)}),0)}function Al(t,e){if(void 0===e&&(e=1),Math.abs(e)>=1)return Math.round(t/e)*e;var i=1/e;return Math.round(t*i)/i}function Sl(t){return t&&"object"==typeof t&&"message"in t?t:{message:t}}function Tl(t,e,i){var r=Object.keys(t).filter((function(t){return!function(t,e){for(var i=0,r=t.length;i<r;++i)if(t[i]===e)return!0;return!1}(i,t)})),o=pl(r,(function(i){return function(t,e){var i=new Promise((function(i){var r=Date.now();ul(t.bind(null,e),(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var o=Date.now()-r;if(!t[0])return i((function(){return{error:Sl(t[1]),duration:o}}));var n=t[1];if(function(t){return"function"!=typeof t}(n))return i((function(){return{value:n,duration:o}}));i((function(){return new Promise((function(t){var e=Date.now();ul(n,(function(){for(var i=[],r=0;r<arguments.length;r++)i[r]=arguments[r];var n=o+Date.now()-e;if(!i[0])return t({error:Sl(i[1]),duration:n});t({value:i[1],duration:n})}))}))}))}))}));return fl(i),function(){return i.then((function(t){return t()}))}}(t[i],e)}));return fl(o),function(){return yt(this,void 0,void 0,(function(){var t,e,i,n;return xt(this,(function(s){switch(s.label){case 0:return[4,o];case 1:return[4,pl(s.sent(),(function(t){var e=t();return fl(e),e}))];case 2:return t=s.sent(),[4,Promise.all(t)];case 3:for(e=s.sent(),i={},n=0;n<r.length;++n)i[r[n]]=e[n];return[2,i]}}))}))}}function Pl(){var t=window,e=navigator;return Cl(["MSCSSMatrix"in t,"msSetImmediate"in t,"msIndexedDB"in t,"msMaxTouchPoints"in e,"msPointerEnabled"in e])>=4}function El(){var t=window,e=navigator;return Cl(["webkitPersistentStorage"in e,"webkitTemporaryStorage"in e,0===e.vendor.indexOf("Google"),"webkitResolveLocalFileSystemURL"in t,"BatteryManager"in t,"webkitMediaStream"in t,"webkitSpeechGrammar"in t])>=5}function Il(){var t=window,e=navigator;return Cl(["ApplePayError"in t,"CSSPrimitiveValue"in t,"Counter"in t,0===e.vendor.indexOf("Apple"),"getStorageUpdates"in e,"WebKitMediaKeys"in t])>=4}function Ll(){var t=window;return Cl(["safari"in t,!("DeviceMotionEvent"in t),!("ongestureend"in t),!("standalone"in navigator)])>=3}function Ol(){var t=document;return(t.exitFullscreen||t.msExitFullscreen||t.mozCancelFullScreen||t.webkitExitFullscreen).call(t)}function Rl(){var t=El(),e=function(){var t,e,i=window;return Cl(["buildID"in navigator,"MozAppearance"in(null!==(e=null===(t=document.documentElement)||void 0===t?void 0:t.style)&&void 0!==e?e:{}),"onmozfullscreenchange"in i,"mozInnerScreenX"in i,"CSSMozDocumentRule"in i,"CanvasCaptureMediaStream"in i])>=4}();if(!t&&!e)return!1;var i=window;return Cl(["onorientationchange"in i,"orientation"in i,t&&!("SharedWorker"in i),e&&/android/i.test(navigator.appVersion)])>=2}function $l(t){var e=new Error(t);return e.name=t,e}function Ml(t,e,i){var r,o,n;return void 0===i&&(i=50),yt(this,void 0,void 0,(function(){var s,a;return xt(this,(function(l){switch(l.label){case 0:s=document,l.label=1;case 1:return s.body?[3,3]:[4,dl(i)];case 2:return l.sent(),[3,1];case 3:a=s.createElement("iframe"),l.label=4;case 4:return l.trys.push([4,,10,11]),[4,new Promise((function(t,i){var r=!1,o=function(){r=!0,t()};a.onload=o,a.onerror=function(t){r=!0,i(t)};var n=a.style;n.setProperty("display","block","important"),n.position="absolute",n.top="0",n.left="0",n.visibility="hidden",e&&"srcdoc"in a?a.srcdoc=e:a.src="about:blank",s.body.appendChild(a);var l=function(){var t,e;r||("complete"===(null===(e=null===(t=a.contentWindow)||void 0===t?void 0:t.document)||void 0===e?void 0:e.readyState)?o():setTimeout(l,10))};l()}))];case 5:l.sent(),l.label=6;case 6:return(null===(o=null===(r=a.contentWindow)||void 0===r?void 0:r.document)||void 0===o?void 0:o.body)?[3,8]:[4,dl(i)];case 7:return l.sent(),[3,6];case 8:return[4,t(a,a.contentWindow)];case 9:return[2,l.sent()];case 10:return null===(n=a.parentNode)||void 0===n||n.removeChild(a),[7];case 11:return[2]}}))}))}function Nl(t){for(var e=function(t){for(var e,i,r="Unexpected syntax '".concat(t,"'"),o=/^\s*([a-z-]*)(.*)$/i.exec(t),n=o[1]||void 0,s={},a=/([.:#][\w-]+|\[.+?\])/gi,l=function(t,e){s[t]=s[t]||[],s[t].push(e)};;){var c=a.exec(o[2]);if(!c)break;var d=c[0];switch(d[0]){case".":l("class",d.slice(1));break;case"#":l("id",d.slice(1));break;case"[":var h=/^\[([\w-]+)([~|^$*]?=("(.*?)"|([\w-]+)))?(\s+[is])?\]$/.exec(d);if(!h)throw new Error(r);l(h[1],null!==(i=null!==(e=h[4])&&void 0!==e?e:h[5])&&void 0!==i?i:"");break;default:throw new Error(r)}}return[n,s]}(t),i=e[0],r=e[1],o=document.createElement(null!=i?i:"div"),n=0,s=Object.keys(r);n<s.length;n++){var a=s[n],l=r[a].join(" ");"style"===a?Dl(o.style,l):o.setAttribute(a,l)}return o}function Dl(t,e){for(var i=0,r=e.split(";");i<r.length;i++){var o=r[i],n=/^\s*([\w-]+)\s*:\s*(.+?)(\s*!([\w-]+))?\s*$/.exec(o);if(n){var s=n[1],a=n[2],l=n[4];t.setProperty(s,a,l||"")}}}var zl=["monospace","sans-serif","serif"],Fl=["sans-serif-thin","ARNO PRO","Agency FB","Arabic Typesetting","Arial Unicode MS","AvantGarde Bk BT","BankGothic Md BT","Batang","Bitstream Vera Sans Mono","Calibri","Century","Century Gothic","Clarendon","EUROSTILE","Franklin Gothic","Futura Bk BT","Futura Md BT","GOTHAM","Gill Sans","HELV","Haettenschweiler","Helvetica Neue","Humanst521 BT","Leelawadee","Letter Gothic","Levenim MT","Lucida Bright","Lucida Sans","Menlo","MS Mincho","MS Outlook","MS Reference Specialty","MS UI Gothic","MT Extra","MYRIAD PRO","Marlett","Meiryo UI","Microsoft Uighur","Minion Pro","Monotype Corsiva","PMingLiU","Pristina","SCRIPTINA","Segoe UI Light","Serifa","SimHei","Small Fonts","Staccato222 BT","TRAJAN PRO","Univers CE 55 Medium","Vrinda","ZWAdobeF"];function Bl(t){return t.toDataURL()}var Ul,Vl,jl=2500;function Gl(){var t=this;return function(){if(void 0===Vl){var t=function(){var e=Hl();ql(e)?Vl=setTimeout(t,jl):(Ul=e,Vl=void 0)};t()}}(),function(){return yt(t,void 0,void 0,(function(){var t;return xt(this,(function(e){switch(e.label){case 0:return ql(t=Hl())?Ul?[2,wt([],Ul,!0)]:function(){var t=document;return t.fullscreenElement||t.msFullscreenElement||t.mozFullScreenElement||t.webkitFullscreenElement||null}()?[4,Ol()]:[3,2]:[3,2];case 1:e.sent(),t=Hl(),e.label=2;case 2:return ql(t)||(Ul=t),[2,t]}}))}))}}function Hl(){var t=screen;return[kl(_l(t.availTop),null),kl(_l(t.width)-_l(t.availWidth)-kl(_l(t.availLeft),0),null),kl(_l(t.height)-_l(t.availHeight)-kl(_l(t.availTop),0),null),kl(_l(t.availLeft),null)]}function ql(t){for(var e=0;e<4;++e)if(t[e])return!1;return!0}function Wl(t){var e;return yt(this,void 0,void 0,(function(){var i,r,o,n,s,a,l;return xt(this,(function(c){switch(c.label){case 0:for(i=document,r=i.createElement("div"),o=new Array(t.length),n={},Yl(r),l=0;l<t.length;++l)"DIALOG"===(s=Nl(t[l])).tagName&&s.show(),Yl(a=i.createElement("div")),a.appendChild(s),r.appendChild(a),o[l]=s;c.label=1;case 1:return i.body?[3,3]:[4,dl(50)];case 2:return c.sent(),[3,1];case 3:i.body.appendChild(r);try{for(l=0;l<t.length;++l)o[l].offsetParent||(n[t[l]]=!0)}finally{null===(e=r.parentNode)||void 0===e||e.removeChild(r)}return[2,n]}}))}))}function Yl(t){t.style.setProperty("display","block","important")}function Xl(t){return matchMedia("(inverted-colors: ".concat(t,")")).matches}function Jl(t){return matchMedia("(forced-colors: ".concat(t,")")).matches}function Ql(t){return matchMedia("(prefers-contrast: ".concat(t,")")).matches}function Kl(t){return matchMedia("(prefers-reduced-motion: ".concat(t,")")).matches}function Zl(t){return matchMedia("(dynamic-range: ".concat(t,")")).matches}var tc=Math,ec=function(){return 0};var ic={default:[],apple:[{font:"-apple-system-body"}],serif:[{fontFamily:"serif"}],sans:[{fontFamily:"sans-serif"}],mono:[{fontFamily:"monospace"}],min:[{fontSize:"1px"}],system:[{fontFamily:"system-ui"}]};var rc={fonts:function(){return Ml((function(t,e){var i=e.document,r=i.body;r.style.fontSize="48px";var o=i.createElement("div"),n={},s={},a=function(t){var e=i.createElement("span"),r=e.style;return r.position="absolute",r.top="0",r.left="0",r.fontFamily=t,e.textContent="mmMwWLliI0O&1",o.appendChild(e),e},l=zl.map(a),c=function(){for(var t={},e=function(e){t[e]=zl.map((function(t){return function(t,e){return a("'".concat(t,"',").concat(e))}(e,t)}))},i=0,r=Fl;i<r.length;i++){e(r[i])}return t}();r.appendChild(o);for(var d=0;d<zl.length;d++)n[zl[d]]=l[d].offsetWidth,s[zl[d]]=l[d].offsetHeight;return Fl.filter((function(t){return e=c[t],zl.some((function(t,i){return e[i].offsetWidth!==n[t]||e[i].offsetHeight!==s[t]}));var e}))}))},domBlockers:function(t){var e=(void 0===t?{}:t).debug;return yt(this,void 0,void 0,(function(){var t,i,r,o,n;return xt(this,(function(s){switch(s.label){case 0:return Il()||Rl()?(a=atob,t={abpIndo:["#Iklan-Melayang","#Kolom-Iklan-728","#SidebarIklan-wrapper",'[title="ALIENBOLA" i]',a("I0JveC1CYW5uZXItYWRz")],abpvn:[".quangcao","#mobileCatfish",a("LmNsb3NlLWFkcw=="),'[id^="bn_bottom_fixed_"]',"#pmadv"],adBlockFinland:[".mainostila",a("LnNwb25zb3JpdA=="),".ylamainos",a("YVtocmVmKj0iL2NsaWNrdGhyZ2guYXNwPyJd"),a("YVtocmVmXj0iaHR0cHM6Ly9hcHAucmVhZHBlYWsuY29tL2FkcyJd")],adBlockPersian:["#navbar_notice_50",".kadr",'TABLE[width="140px"]',"#divAgahi",a("YVtocmVmXj0iaHR0cDovL2cxLnYuZndtcm0ubmV0L2FkLyJd")],adBlockWarningRemoval:["#adblock-honeypot",".adblocker-root",".wp_adblock_detect",a("LmhlYWRlci1ibG9ja2VkLWFk"),a("I2FkX2Jsb2NrZXI=")],adGuardAnnoyances:[".hs-sosyal","#cookieconsentdiv",'div[class^="app_gdpr"]',".as-oil",'[data-cypress="soft-push-notification-modal"]'],adGuardBase:[".BetterJsPopOverlay",a("I2FkXzMwMFgyNTA="),a("I2Jhbm5lcmZsb2F0MjI="),a("I2NhbXBhaWduLWJhbm5lcg=="),a("I0FkLUNvbnRlbnQ=")],adGuardChinese:[a("LlppX2FkX2FfSA=="),a("YVtocmVmKj0iLmh0aGJldDM0LmNvbSJd"),"#widget-quan",a("YVtocmVmKj0iLzg0OTkyMDIwLnh5eiJd"),a("YVtocmVmKj0iLjE5NTZobC5jb20vIl0=")],adGuardFrench:["#pavePub",a("LmFkLWRlc2t0b3AtcmVjdGFuZ2xl"),".mobile_adhesion",".widgetadv",a("LmFkc19iYW4=")],adGuardGerman:['aside[data-portal-id="leaderboard"]'],adGuardJapanese:["#kauli_yad_1",a("YVtocmVmXj0iaHR0cDovL2FkMi50cmFmZmljZ2F0ZS5uZXQvIl0="),a("Ll9wb3BJbl9pbmZpbml0ZV9hZA=="),a("LmFkZ29vZ2xl"),a("Ll9faXNib29zdFJldHVybkFk")],adGuardMobile:[a("YW1wLWF1dG8tYWRz"),a("LmFtcF9hZA=="),'amp-embed[type="24smi"]',"#mgid_iframe1",a("I2FkX2ludmlld19hcmVh")],adGuardRussian:[a("YVtocmVmXj0iaHR0cHM6Ly9hZC5sZXRtZWFkcy5jb20vIl0="),a("LnJlY2xhbWE="),'div[id^="smi2adblock"]',a("ZGl2W2lkXj0iQWRGb3hfYmFubmVyXyJd"),"#psyduckpockeball"],adGuardSocial:[a("YVtocmVmXj0iLy93d3cuc3R1bWJsZXVwb24uY29tL3N1Ym1pdD91cmw9Il0="),a("YVtocmVmXj0iLy90ZWxlZ3JhbS5tZS9zaGFyZS91cmw/Il0="),".etsy-tweet","#inlineShare",".popup-social"],adGuardSpanishPortuguese:["#barraPublicidade","#Publicidade","#publiEspecial","#queTooltip",".cnt-publi"],adGuardTrackingProtection:["#qoo-counter",a("YVtocmVmXj0iaHR0cDovL2NsaWNrLmhvdGxvZy5ydS8iXQ=="),a("YVtocmVmXj0iaHR0cDovL2hpdGNvdW50ZXIucnUvdG9wL3N0YXQucGhwIl0="),a("YVtocmVmXj0iaHR0cDovL3RvcC5tYWlsLnJ1L2p1bXAiXQ=="),"#top100counter"],adGuardTurkish:["#backkapat",a("I3Jla2xhbWk="),a("YVtocmVmXj0iaHR0cDovL2Fkc2Vydi5vbnRlay5jb20udHIvIl0="),a("YVtocmVmXj0iaHR0cDovL2l6bGVuemkuY29tL2NhbXBhaWduLyJd"),a("YVtocmVmXj0iaHR0cDovL3d3dy5pbnN0YWxsYWRzLm5ldC8iXQ==")],bulgarian:[a("dGQjZnJlZW5ldF90YWJsZV9hZHM="),"#ea_intext_div",".lapni-pop-over","#xenium_hot_offers"],easyList:[".yb-floorad",a("LndpZGdldF9wb19hZHNfd2lkZ2V0"),a("LnRyYWZmaWNqdW5reS1hZA=="),".textad_headline",a("LnNwb25zb3JlZC10ZXh0LWxpbmtz")],easyListChina:[a("LmFwcGd1aWRlLXdyYXBbb25jbGljayo9ImJjZWJvcy5jb20iXQ=="),a("LmZyb250cGFnZUFkdk0="),"#taotaole","#aafoot.top_box",".cfa_popup"],easyListCookie:[".ezmob-footer",".cc-CookieWarning","[data-cookie-number]",a("LmF3LWNvb2tpZS1iYW5uZXI="),".sygnal24-gdpr-modal-wrap"],easyListCzechSlovak:["#onlajny-stickers",a("I3Jla2xhbW5pLWJveA=="),a("LnJla2xhbWEtbWVnYWJvYXJk"),".sklik",a("W2lkXj0ic2tsaWtSZWtsYW1hIl0=")],easyListDutch:[a("I2FkdmVydGVudGll"),a("I3ZpcEFkbWFya3RCYW5uZXJCbG9jaw=="),".adstekst",a("YVtocmVmXj0iaHR0cHM6Ly94bHR1YmUubmwvY2xpY2svIl0="),"#semilo-lrectangle"],easyListGermany:["#SSpotIMPopSlider",a("LnNwb25zb3JsaW5rZ3J1ZW4="),a("I3dlcmJ1bmdza3k="),a("I3Jla2xhbWUtcmVjaHRzLW1pdHRl"),a("YVtocmVmXj0iaHR0cHM6Ly9iZDc0Mi5jb20vIl0=")],easyListItaly:[a("LmJveF9hZHZfYW5udW5jaQ=="),".sb-box-pubbliredazionale",a("YVtocmVmXj0iaHR0cDovL2FmZmlsaWF6aW9uaWFkcy5zbmFpLml0LyJd"),a("YVtocmVmXj0iaHR0cHM6Ly9hZHNlcnZlci5odG1sLml0LyJd"),a("YVtocmVmXj0iaHR0cHM6Ly9hZmZpbGlhemlvbmlhZHMuc25haS5pdC8iXQ==")],easyListLithuania:[a("LnJla2xhbW9zX3RhcnBhcw=="),a("LnJla2xhbW9zX251b3JvZG9z"),a("aW1nW2FsdD0iUmVrbGFtaW5pcyBza3lkZWxpcyJd"),a("aW1nW2FsdD0iRGVkaWt1b3RpLmx0IHNlcnZlcmlhaSJd"),a("aW1nW2FsdD0iSG9zdGluZ2FzIFNlcnZlcmlhaS5sdCJd")],estonian:[a("QVtocmVmKj0iaHR0cDovL3BheTRyZXN1bHRzMjQuZXUiXQ==")],fanboyAnnoyances:["#ac-lre-player",".navigate-to-top","#subscribe_popup",".newsletter_holder","#back-top"],fanboyAntiFacebook:[".util-bar-module-firefly-visible"],fanboyEnhancedTrackers:[".open.pushModal","#issuem-leaky-paywall-articles-zero-remaining-nag","#sovrn_container",'div[class$="-hide"][zoompage-fontsize][style="display: block;"]',".BlockNag__Card"],fanboySocial:["#FollowUs","#meteored_share","#social_follow",".article-sharer",".community__social-desc"],frellwitSwedish:[a("YVtocmVmKj0iY2FzaW5vcHJvLnNlIl1bdGFyZ2V0PSJfYmxhbmsiXQ=="),a("YVtocmVmKj0iZG9rdG9yLXNlLm9uZWxpbmsubWUiXQ=="),"article.category-samarbete",a("ZGl2LmhvbGlkQWRz"),"ul.adsmodern"],greekAdBlock:[a("QVtocmVmKj0iYWRtYW4ub3RlbmV0LmdyL2NsaWNrPyJd"),a("QVtocmVmKj0iaHR0cDovL2F4aWFiYW5uZXJzLmV4b2R1cy5nci8iXQ=="),a("QVtocmVmKj0iaHR0cDovL2ludGVyYWN0aXZlLmZvcnRobmV0LmdyL2NsaWNrPyJd"),"DIV.agores300","TABLE.advright"],hungarian:["#cemp_doboz",".optimonk-iframe-container",a("LmFkX19tYWlu"),a("W2NsYXNzKj0iR29vZ2xlQWRzIl0="),"#hirdetesek_box"],iDontCareAboutCookies:['.alert-info[data-block-track*="CookieNotice"]',".ModuleTemplateCookieIndicator",".o--cookies--container","#cookies-policy-sticky","#stickyCookieBar"],icelandicAbp:[a("QVtocmVmXj0iL2ZyYW1ld29yay9yZXNvdXJjZXMvZm9ybXMvYWRzLmFzcHgiXQ==")],latvian:[a("YVtocmVmPSJodHRwOi8vd3d3LnNhbGlkemluaS5sdi8iXVtzdHlsZT0iZGlzcGxheTogYmxvY2s7IHdpZHRoOiAxMjBweDsgaGVpZ2h0OiA0MHB4OyBvdmVyZmxvdzogaGlkZGVuOyBwb3NpdGlvbjogcmVsYXRpdmU7Il0="),a("YVtocmVmPSJodHRwOi8vd3d3LnNhbGlkemluaS5sdi8iXVtzdHlsZT0iZGlzcGxheTogYmxvY2s7IHdpZHRoOiA4OHB4OyBoZWlnaHQ6IDMxcHg7IG92ZXJmbG93OiBoaWRkZW47IHBvc2l0aW9uOiByZWxhdGl2ZTsiXQ==")],listKr:[a("YVtocmVmKj0iLy9hZC5wbGFuYnBsdXMuY28ua3IvIl0="),a("I2xpdmVyZUFkV3JhcHBlcg=="),a("YVtocmVmKj0iLy9hZHYuaW1hZHJlcC5jby5rci8iXQ=="),a("aW5zLmZhc3R2aWV3LWFk"),".revenue_unit_item.dable"],listeAr:[a("LmdlbWluaUxCMUFk"),".right-and-left-sponsers",a("YVtocmVmKj0iLmFmbGFtLmluZm8iXQ=="),a("YVtocmVmKj0iYm9vcmFxLm9yZyJd"),a("YVtocmVmKj0iZHViaXp6bGUuY29tL2FyLz91dG1fc291cmNlPSJd")],listeFr:[a("YVtocmVmXj0iaHR0cDovL3Byb21vLnZhZG9yLmNvbS8iXQ=="),a("I2FkY29udGFpbmVyX3JlY2hlcmNoZQ=="),a("YVtocmVmKj0id2Vib3JhbWEuZnIvZmNnaS1iaW4vIl0="),".site-pub-interstitiel",'div[id^="crt-"][data-criteo-id]'],officialPolish:["#ceneo-placeholder-ceneo-12",a("W2hyZWZePSJodHRwczovL2FmZi5zZW5kaHViLnBsLyJd"),a("YVtocmVmXj0iaHR0cDovL2Fkdm1hbmFnZXIudGVjaGZ1bi5wbC9yZWRpcmVjdC8iXQ=="),a("YVtocmVmXj0iaHR0cDovL3d3dy50cml6ZXIucGwvP3V0bV9zb3VyY2UiXQ=="),a("ZGl2I3NrYXBpZWNfYWQ=")],ro:[a("YVtocmVmXj0iLy9hZmZ0cmsuYWx0ZXgucm8vQ291bnRlci9DbGljayJd"),a("YVtocmVmXj0iaHR0cHM6Ly9ibGFja2ZyaWRheXNhbGVzLnJvL3Ryay9zaG9wLyJd"),a("YVtocmVmXj0iaHR0cHM6Ly9ldmVudC4ycGVyZm9ybWFudC5jb20vZXZlbnRzL2NsaWNrIl0="),a("YVtocmVmXj0iaHR0cHM6Ly9sLnByb2ZpdHNoYXJlLnJvLyJd"),'a[href^="/url/"]'],ruAd:[a("YVtocmVmKj0iLy9mZWJyYXJlLnJ1LyJd"),a("YVtocmVmKj0iLy91dGltZy5ydS8iXQ=="),a("YVtocmVmKj0iOi8vY2hpa2lkaWtpLnJ1Il0="),"#pgeldiz",".yandex-rtb-block"],thaiAds:["a[href*=macau-uta-popup]",a("I2Fkcy1nb29nbGUtbWlkZGxlX3JlY3RhbmdsZS1ncm91cA=="),a("LmFkczMwMHM="),".bumq",".img-kosana"],webAnnoyancesUltralist:["#mod-social-share-2","#social-tools",a("LmN0cGwtZnVsbGJhbm5lcg=="),".zergnet-recommend",".yt.btn-link.btn-md.btn"]},i=Object.keys(t),[4,Wl((n=[]).concat.apply(n,i.map((function(e){return t[e]}))))]):[2,void 0];case 1:return r=s.sent(),e&&function(t,e){for(var i="DOM blockers debug:\n```",r=0,o=Object.keys(t);r<o.length;r++){var n=o[r];i+="\n".concat(n,":");for(var s=0,a=t[n];s<a.length;s++){var l=a[s];i+="\n  ".concat(e[l]?"":""," ").concat(l)}}console.log("".concat(i,"\n```"))}(t,r),(o=i.filter((function(e){var i=t[e];return Cl(i.map((function(t){return r[t]})))>.6*i.length}))).sort(),[2,o]}var a}))}))},fontPreferences:function(){return function(t,e){void 0===e&&(e=4e3);return Ml((function(i,r){var o=r.document,n=o.body,s=n.style;s.width="".concat(e,"px"),s.webkitTextSizeAdjust=s.textSizeAdjust="none",El()?n.style.zoom="".concat(1/r.devicePixelRatio):Il()&&(n.style.zoom="reset");var a=o.createElement("div");return a.textContent=wt([],Array(e/20|0),!0).map((function(){return"word"})).join(" "),n.appendChild(a),t(o,n)}),'<!doctype html><html><head><meta name="viewport" content="width=device-width, initial-scale=1">')}((function(t,e){for(var i={},r={},o=0,n=Object.keys(ic);o<n.length;o++){var s=n[o],a=ic[s],l=a[0],c=void 0===l?{}:l,d=a[1],h=void 0===d?"mmMwWLliI0fiflO&1":d,u=t.createElement("span");u.textContent=h,u.style.whiteSpace="nowrap";for(var p=0,f=Object.keys(c);p<f.length;p++){var m=f[p],g=c[m];void 0!==g&&(u.style[m]=g)}i[s]=u,e.appendChild(t.createElement("br")),e.appendChild(u)}for(var v=0,b=Object.keys(ic);v<b.length;v++){r[s=b[v]]=i[s].getBoundingClientRect().width}return r}))},audio:function(){var t=window,e=t.OfflineAudioContext||t.webkitOfflineAudioContext;if(!e)return-2;if(Il()&&!Ll()&&!function(){var t=window;return Cl(["DOMRectList"in t,"RTCPeerConnectionIceEvent"in t,"SVGGeometryElement"in t,"ontransitioncancel"in t])>=3}())return-1;var i=new e(1,5e3,44100),r=i.createOscillator();r.type="triangle",r.frequency.value=1e4;var o=i.createDynamicsCompressor();o.threshold.value=-50,o.knee.value=40,o.ratio.value=12,o.attack.value=0,o.release.value=.25,r.connect(o),o.connect(i.destination),r.start(0);var n=function(t){var e=3,i=500,r=500,o=5e3,n=function(){},s=new Promise((function(s,a){var l=!1,c=0,d=0;t.oncomplete=function(t){return s(t.renderedBuffer)};var h=function(){setTimeout((function(){return a($l("timeout"))}),Math.min(r,d+o-Date.now()))},u=function(){try{var r=t.startRendering();switch(hl(r)&&fl(r),t.state){case"running":d=Date.now(),l&&h();break;case"suspended":document.hidden||c++,l&&c>=e?a($l("suspended")):setTimeout(u,i)}}catch(t){a(t)}};u(),n=function(){l||(l=!0,d>0&&h())}}));return[s,n]}(i),s=n[0],a=n[1],l=s.then((function(t){return function(t){for(var e=0,i=0;i<t.length;++i)e+=Math.abs(t[i]);return e}(t.getChannelData(0).subarray(4500))}),(function(t){if("timeout"===t.name||"suspended"===t.name)return-3;throw t}));return fl(l),function(){return a(),l}},screenFrame:function(){var t=this,e=Gl();return function(){return yt(t,void 0,void 0,(function(){var t,i;return xt(this,(function(r){switch(r.label){case 0:return[4,e()];case 1:return t=r.sent(),[2,[(i=function(t){return null===t?null:Al(t,10)})(t[0]),i(t[1]),i(t[2]),i(t[3])]]}}))}))}},osCpu:function(){return navigator.oscpu},languages:function(){var t=navigator,e=[],i=t.language||t.userLanguage||t.browserLanguage||t.systemLanguage;if(void 0!==i&&e.push([i]),Array.isArray(t.languages))El()&&function(){var t=window;return Cl([!("MediaSettingsRange"in t),"RTCEncodedAudioFrame"in t,""+t.Intl=="[object Intl]",""+t.Reflect=="[object Reflect]"])>=3}()||e.push(t.languages);else if("string"==typeof t.languages){var r=t.languages;r&&e.push(r.split(","))}return e},colorDepth:function(){return window.screen.colorDepth},deviceMemory:function(){return kl(_l(navigator.deviceMemory),void 0)},screenResolution:function(){var t=screen,e=function(t){return kl(wl(t),null)},i=[e(t.width),e(t.height)];return i.sort().reverse(),i},hardwareConcurrency:function(){return kl(wl(navigator.hardwareConcurrency),void 0)},timezone:function(){var t,e=null===(t=window.Intl)||void 0===t?void 0:t.DateTimeFormat;if(e){var i=(new e).resolvedOptions().timeZone;if(i)return i}var r,o=(r=(new Date).getFullYear(),-Math.max(_l(new Date(r,0,1).getTimezoneOffset()),_l(new Date(r,6,1).getTimezoneOffset())));return"UTC".concat(o>=0?"+":"").concat(Math.abs(o))},sessionStorage:function(){try{return!!window.sessionStorage}catch(t){return!0}},localStorage:function(){try{return!!window.localStorage}catch(t){return!0}},indexedDB:function(){if(!Pl()&&!function(){var t=window,e=navigator;return Cl(["msWriteProfilerMark"in t,"MSStream"in t,"msLaunchUri"in e,"msSaveBlob"in e])>=3&&!Pl()}())try{return!!window.indexedDB}catch(t){return!0}},openDatabase:function(){return!!window.openDatabase},cpuClass:function(){return navigator.cpuClass},platform:function(){var t=navigator.platform;return"MacIntel"===t&&Il()&&!Ll()?function(){if("iPad"===navigator.platform)return!0;var t=screen,e=t.width/t.height;return Cl(["MediaSource"in window,!!Element.prototype.webkitRequestFullscreen,e>.65&&e<1.53])>=2}()?"iPad":"iPhone":t},plugins:function(){var t=navigator.plugins;if(t){for(var e=[],i=0;i<t.length;++i){var r=t[i];if(r){for(var o=[],n=0;n<r.length;++n){var s=r[n];o.push({type:s.type,suffixes:s.suffixes})}e.push({name:r.name,description:r.description,mimeTypes:o})}}return e}},canvas:function(){var t,e,i=!1,r=function(){var t=document.createElement("canvas");return t.width=1,t.height=1,[t,t.getContext("2d")]}(),o=r[0],n=r[1];if(function(t,e){return!(!e||!t.toDataURL)}(o,n)){i=function(t){return t.rect(0,0,10,10),t.rect(2,2,6,6),!t.isPointInPath(5,5,"evenodd")}(n),function(t,e){t.width=240,t.height=60,e.textBaseline="alphabetic",e.fillStyle="#f60",e.fillRect(100,1,62,20),e.fillStyle="#069",e.font='11pt "Times New Roman"';var i="Cwm fjordbank gly ".concat(String.fromCharCode(55357,56835));e.fillText(i,2,15),e.fillStyle="rgba(102, 204, 0, 0.2)",e.font="18pt Arial",e.fillText(i,4,45)}(o,n);var s=Bl(o);s!==Bl(o)?t=e="unstable":(e=s,function(t,e){t.width=122,t.height=110,e.globalCompositeOperation="multiply";for(var i=0,r=[["#f2f",40,40],["#2ff",80,40],["#ff2",60,80]];i<r.length;i++){var o=r[i],n=o[0],s=o[1],a=o[2];e.fillStyle=n,e.beginPath(),e.arc(s,a,40,0,2*Math.PI,!0),e.closePath(),e.fill()}e.fillStyle="#f9c",e.arc(60,60,60,0,2*Math.PI,!0),e.arc(60,60,20,0,2*Math.PI,!0),e.fill("evenodd")}(o,n),t=Bl(o))}else t=e="";return{winding:i,geometry:t,text:e}},touchSupport:function(){var t,e=navigator,i=0;void 0!==e.maxTouchPoints?i=wl(e.maxTouchPoints):void 0!==e.msMaxTouchPoints&&(i=e.msMaxTouchPoints);try{document.createEvent("TouchEvent"),t=!0}catch(e){t=!1}return{maxTouchPoints:i,touchEvent:t,touchStart:"ontouchstart"in window}},vendor:function(){return navigator.vendor||""},vendorFlavors:function(){for(var t=[],e=0,i=["chrome","safari","__crWeb","__gCrWeb","yandex","__yb","__ybro","__firefox__","__edgeTrackingPreventionStatistics","webkit","oprt","samsungAr","ucweb","UCShellJava","puffinDevice"];e<i.length;e++){var r=i[e],o=window[r];o&&"object"==typeof o&&t.push(r)}return t.sort()},cookiesEnabled:function(){var t=document;try{t.cookie="cookietest=1; SameSite=Strict;";var e=-1!==t.cookie.indexOf("cookietest=");return t.cookie="cookietest=1; SameSite=Strict; expires=Thu, 01-Jan-1970 00:00:01 GMT",e}catch(t){return!1}},colorGamut:function(){for(var t=0,e=["rec2020","p3","srgb"];t<e.length;t++){var i=e[t];if(matchMedia("(color-gamut: ".concat(i,")")).matches)return i}},invertedColors:function(){return!!Xl("inverted")||!Xl("none")&&void 0},forcedColors:function(){return!!Jl("active")||!Jl("none")&&void 0},monochrome:function(){if(matchMedia("(min-monochrome: 0)").matches){for(var t=0;t<=100;++t)if(matchMedia("(max-monochrome: ".concat(t,")")).matches)return t;throw new Error("Too high value")}},contrast:function(){return Ql("no-preference")?0:Ql("high")||Ql("more")?1:Ql("low")||Ql("less")?-1:Ql("forced")?10:void 0},reducedMotion:function(){return!!Kl("reduce")||!Kl("no-preference")&&void 0},hdr:function(){return!!Zl("high")||!Zl("standard")&&void 0},math:function(){var t,e=tc.acos||ec,i=tc.acosh||ec,r=tc.asin||ec,o=tc.asinh||ec,n=tc.atanh||ec,s=tc.atan||ec,a=tc.sin||ec,l=tc.sinh||ec,c=tc.cos||ec,d=tc.cosh||ec,h=tc.tan||ec,u=tc.tanh||ec,p=tc.exp||ec,f=tc.expm1||ec,m=tc.log1p||ec;return{acos:e(.12312423423423424),acosh:i(1e308),acoshPf:(t=1e154,tc.log(t+tc.sqrt(t*t-1))),asin:r(.12312423423423424),asinh:o(1),asinhPf:function(t){return tc.log(t+tc.sqrt(t*t+1))}(1),atanh:n(.5),atanhPf:function(t){return tc.log((1+t)/(1-t))/2}(.5),atan:s(.5),sin:a(-1e300),sinh:l(1),sinhPf:function(t){return tc.exp(t)-1/tc.exp(t)/2}(1),cos:c(10.000000000123),cosh:d(1),coshPf:function(t){return(tc.exp(t)+1/tc.exp(t))/2}(1),tan:h(-1e300),tanh:u(1),tanhPf:function(t){return(tc.exp(2*t)-1)/(tc.exp(2*t)+1)}(1),exp:p(1),expm1:f(1),expm1Pf:function(t){return tc.exp(t)-1}(1),log1p:m(10),log1pPf:function(t){return tc.log(1+t)}(10),powPI:function(t){return tc.pow(tc.PI,t)}(-100)}},videoCard:function(){var t,e=document.createElement("canvas"),i=null!==(t=e.getContext("webgl"))&&void 0!==t?t:e.getContext("experimental-webgl");if(i&&"getExtension"in i){var r=i.getExtension("WEBGL_debug_renderer_info");if(r)return{vendor:(i.getParameter(r.UNMASKED_VENDOR_WEBGL)||"").toString(),renderer:(i.getParameter(r.UNMASKED_RENDERER_WEBGL)||"").toString()}}},pdfViewerEnabled:function(){return navigator.pdfViewerEnabled},architecture:function(){var t=new Float32Array(1),e=new Uint8Array(t.buffer);return t[0]=1/0,t[0]=t[0]-t[0],e[3]}};var oc="$ if upgrade to Pro: https://fpjs.dev/pro";function nc(t){var e=function(t){if(Rl())return.4;if(Il())return Ll()?.5:.3;var e=t.platform.value||"";if(/^Win/.test(e))return.6;if(/^Mac/.test(e))return.5;return.7}(t),i=function(t){return Al(.99+.01*t,1e-4)}(e);return{score:e,comment:oc.replace(/\$/g,"".concat(i))}}function sc(t){return JSON.stringify(t,(function(t,e){return e instanceof Error?function(t){var e;return vt({name:t.name,message:t.message,stack:null===(e=t.stack)||void 0===e?void 0:e.split("\n")},t)}(e):e}),2)}function ac(t){return function(t,e){e=e||0;var i,r=(t=t||"").length%16,o=t.length-r,n=[0,e],s=[0,e],a=[0,0],l=[0,0],c=[2277735313,289559509],d=[1291169091,658871167];for(i=0;i<o;i+=16)a=[255&t.charCodeAt(i+4)|(255&t.charCodeAt(i+5))<<8|(255&t.charCodeAt(i+6))<<16|(255&t.charCodeAt(i+7))<<24,255&t.charCodeAt(i)|(255&t.charCodeAt(i+1))<<8|(255&t.charCodeAt(i+2))<<16|(255&t.charCodeAt(i+3))<<24],l=[255&t.charCodeAt(i+12)|(255&t.charCodeAt(i+13))<<8|(255&t.charCodeAt(i+14))<<16|(255&t.charCodeAt(i+15))<<24,255&t.charCodeAt(i+8)|(255&t.charCodeAt(i+9))<<8|(255&t.charCodeAt(i+10))<<16|(255&t.charCodeAt(i+11))<<24],a=vl(a=gl(a,c),31),n=ml(n=vl(n=yl(n,a=gl(a,d)),27),s),n=ml(gl(n,[0,5]),[0,1390208809]),l=vl(l=gl(l,d),33),s=ml(s=vl(s=yl(s,l=gl(l,c)),31),n),s=ml(gl(s,[0,5]),[0,944331445]);switch(a=[0,0],l=[0,0],r){case 15:l=yl(l,bl([0,t.charCodeAt(i+14)],48));case 14:l=yl(l,bl([0,t.charCodeAt(i+13)],40));case 13:l=yl(l,bl([0,t.charCodeAt(i+12)],32));case 12:l=yl(l,bl([0,t.charCodeAt(i+11)],24));case 11:l=yl(l,bl([0,t.charCodeAt(i+10)],16));case 10:l=yl(l,bl([0,t.charCodeAt(i+9)],8));case 9:l=gl(l=yl(l,[0,t.charCodeAt(i+8)]),d),s=yl(s,l=gl(l=vl(l,33),c));case 8:a=yl(a,bl([0,t.charCodeAt(i+7)],56));case 7:a=yl(a,bl([0,t.charCodeAt(i+6)],48));case 6:a=yl(a,bl([0,t.charCodeAt(i+5)],40));case 5:a=yl(a,bl([0,t.charCodeAt(i+4)],32));case 4:a=yl(a,bl([0,t.charCodeAt(i+3)],24));case 3:a=yl(a,bl([0,t.charCodeAt(i+2)],16));case 2:a=yl(a,bl([0,t.charCodeAt(i+1)],8));case 1:a=gl(a=yl(a,[0,t.charCodeAt(i)]),c),n=yl(n,a=gl(a=vl(a,31),d))}return n=ml(n=yl(n,[0,t.length]),s=yl(s,[0,t.length])),s=ml(s,n),n=ml(n=xl(n),s=xl(s)),s=ml(s,n),("00000000"+(n[0]>>>0).toString(16)).slice(-8)+("00000000"+(n[1]>>>0).toString(16)).slice(-8)+("00000000"+(s[0]>>>0).toString(16)).slice(-8)+("00000000"+(s[1]>>>0).toString(16)).slice(-8)}(function(t){for(var e="",i=0,r=Object.keys(t).sort();i<r.length;i++){var o=r[i],n=t[o],s=n.error?"error":JSON.stringify(n.value);e+="".concat(e?"|":"").concat(o.replace(/([:|\\])/g,"\\$1"),":").concat(s)}return e}(t))}function lc(t){return void 0===t&&(t=50),function(t,e){void 0===e&&(e=1/0);var i=window.requestIdleCallback;return i?new Promise((function(t){return i.call(window,(function(){return t()}),{timeout:e})})):dl(Math.min(t,e))}(t,2*t)}function cc(t,e){var i=Date.now();return{get:function(r){return yt(this,void 0,void 0,(function(){var o,n,s;return xt(this,(function(a){switch(a.label){case 0:return o=Date.now(),[4,t()];case 1:return n=a.sent(),s=function(t){var e,i=nc(t);return{get visitorId(){return void 0===e&&(e=ac(this.components)),e},set visitorId(t){e=t},confidence:i,components:t,version:cl}}(n),(e||(null==r?void 0:r.debug))&&console.log("Copy the text below to get the debug data:\n\n```\nversion: ".concat(s.version,"\nuserAgent: ").concat(navigator.userAgent,"\ntimeBetweenLoadAndGet: ").concat(o-i,"\nvisitorId: ").concat(s.visitorId,"\ncomponents: ").concat(sc(n),"\n```")),[2,s]}}))}))}}}var dc={load:function(t){var e=void 0===t?{}:t,i=e.delayFallback,r=e.debug,o=e.monitoring,n=void 0===o||o;return yt(this,void 0,void 0,(function(){return xt(this,(function(t){switch(t.label){case 0:return n&&function(){if(!(window.__fpjs_d_m||Math.random()>=.001))try{var t=new XMLHttpRequest;t.open("get","https://m1.openfpcdn.io/fingerprintjs/v".concat(cl,"/npm-monitoring"),!0),t.send()}catch(t){console.error(t)}}(),[4,lc(i)];case 1:return t.sent(),[2,cc(Tl(rc,{debug:r},[]),r)]}}))}))},hashComponents:ac,componentsToDebugString:sc};class hc extends Ms{constructor(t,e=!1){super(),this.loginForAcceptInviteParams=null,this.loginForEditParams=null,this.loginForNewPointParams=null,this.loginForEndorseParams=null,this.loginForRatingsParams=null,this.loginForPointQualityParams=null,this.loginForMembershipParams=null,this.loginForNotificationSettingsParams=!1,this.endorsementPostsIndex={},this.groupCurrentVoteCountIndex={},this.ratingPostsIndex={},this.membershipsIndex={},this.pointQualitiesIndex={},this.isPollingForLogin=!1,this.facebookPopupWindow=null,this.samlPopupWindow=null,this.hasIssuedLogout=!1,this.sessionPrefix="session_",this.sessionStorage=window.localStorage,this.serverApi=t,this._setupBrowserFingerprint(),e||(window.location.pathname.startsWith("/survey/")?console.log("Not checking login in survey mode"):this.checkLogin(),this.addGlobalListener("yp-forgot-password",this._forgotPassword.bind(this)),this.addGlobalListener("yp-reset-password",this._resetPassword.bind(this)))}getBrowserId(){var t=localStorage.getItem("aoi-brid");return t||((t=this._generateRandomString(32))?localStorage.setItem("yp-brid",t):console.error("Could not generate browser id")),t}_setupBrowserFingerprint(){try{dc.load({monitoring:!1}).then((t=>t.get())).then((t=>{this.browserFingerprint=t.visitorId,this.browserFingerprintConfidence=t.confidence.score}))}catch(t){console.error(t)}}_generateRandomString(t){if(window.crypto){for(var e=window.crypto.getRandomValues(new Uint32Array(3)),i="",r=0,o=e.length;r<o;r++)i+=e[r].toString(36);return i}return console.log("Not checking login in survey mode"),null}sessionHas(t){const e=this.sessionPrefix+t;return null!==this.sessionStorage.getItem(e)}sessionGet(t){const e=this.sessionPrefix+t,i=this.sessionStorage.getItem(e);let r;if(i)try{r=JSON.parse(i)}catch(t){r=null}return r}sessionSet(t,e){const i=this.sessionPrefix+t,r=JSON.stringify(e);this.sessionStorage.setItem(i,r)}sessionUnset(t){const e=this.sessionPrefix+t;this.sessionStorage.removeItem(e)}sessionClear(){this.sessionStorage.clear()}loginForAcceptInvite(t,e,i,r){this.loginForAcceptInviteParams={editDialog:t,token:e},this.openUserlogin(i,r)}loginForEdit(t,e,i,r){this.loginForEditParams={editDialog:t,newOrUpdate:e,params:i,refreshFunction:r},this.openUserlogin()}loginForNewPoint(t,e){this.loginForNewPointParams={postPointsElement:t,params:e},this.openUserlogin()}loginForEndorse(t,e){this.loginForEndorseParams={postActionElement:t,params:e},this.openUserlogin()}loginForRatings(t){this.loginForRatingsParams={postActionElement:t},this.openUserlogin()}loginForPointQuality(t,e){this.loginForPointQualityParams={pointActionElement:t,params:e},this.openUserlogin()}loginForMembership(t,e){this.loginForMembershipParams={membershipActionElement:t,params:e},this.openUserlogin()}loginFor401(t){this.loginFor401refreshFunction=t,this.openUserlogin()}loginForNotificationSettings(){this.loginForNotificationSettingsParams=!0,this.openUserlogin()}openUserlogin(t=void 0,e=void 0){window.appDialogs.getDialogAsync("userLogin",(i=>{i.setup(this._handleLogin.bind(this),window.appGlobals.domain),i.openDialog(void 0,t,e)}))}autoAnonymousLogin(){setTimeout((()=>{null==this.user?window.appDialogs.getDialogAsync("userLogin",(t=>{t.setup(this._handleLogin.bind(this),window.appGlobals.domain),t.anonymousLogin()})):console.log("Not doing auto anon login as user already exists")}),1)}_closeUserLogin(){window.appDialogs.closeDialog("userLogin")}_setUserLoginSpinner(){window.appDialogs.getDialogAsync("userLogin",(t=>{t.userSpinner=!1}))}_handleLogin(t){this._closeUserLogin(),this.setLoggedInUser(t),t.profile_data&&t.profile_data.isAnonymousUser?console.debug("Do not fetch admin or memberships for anonymous users"):(this.getAdminRights(),this.getPromoterRights(),this.getMemberShips(),this.toastLoginTextCombined=this.t("user.loginCompleteFor")+" "+this.user?.name,this.fireGlobal("yp-open-toast",{text:this.toastLoginTextCombined})),this._checkLoginForParameters(),setTimeout((()=>{window.appGlobals.originalQueryParameters&&window.appGlobals.originalQueryParameters.raLogin&&(window.location.href=window.appGlobals.originalQueryParameters.raLogin)})),setTimeout((()=>{this._checkRegistrationAnswers(t)}),450)}_checkLoginForParameters(){}openNotificationSettings(){window.appDialogs.getDialogAsync("userEdit",(t=>{t.setup(window.appUser.user,!1,null,!0),t.open("edit",{userId:window.appUser.user?.id})}))}_forgotPassword(t){window.appDialogs.getDialogAsync("forgotPassword",(e=>{e.open(t.detail)}))}_resetPassword(t){window.appDialogs.getDialogAsync("resetPassword",(e=>{e.open(t.detail)}))}getUser(){return this.sessionGet("user")}setLoggedInUser(t){this.sessionSet("user",t),this.user=t,this.fireGlobal("yp-logged-in",this.user),window.appGlobals.analytics.sendLoginAndSignup(t.id,"Login Success",this.lastLoginMethod?this.lastLoginMethod:"Email"),this.lastLoginMethod=void 0,t&&t.profile_data&&t.profile_data.isAnonymousUser?window.appGlobals.setAnonymousUser(t):window.appGlobals.setAnonymousUser(void 0),window.appGlobals.offline.checkContentToSendForLoggedInUser()}removeAnonymousUser(){console.log("Remove anon user"),this.removeUserSession()}removeUserSession(){this.sessionUnset("user"),this.user=null,window.appGlobals.setAnonymousUser(void 0),this.fireGlobal("yp-logged-in",null)}loggedIn(){let t=!0;return window.appGlobals.currentForceSaml&&window.appGlobals.currentGroup&&(ll.checkGroupAccess(window.appGlobals.currentGroup)||(this.user?("saml"!==this.user.loginProvider&&(t=!1),window.appGlobals.currentGroup&&window.appGlobals.currentGroup.configuration&&window.appGlobals.currentGroup.configuration.forceSecureSamlEmployeeLogin&&(this.user.isSamlEmployee||(t=!1))):t=!1)),null!=this.user&&t}async setLocale(t){await this.serverApi.setLocale({locale:t})}cancelLoginPolling(){this.pollingStartedAt=void 0}_closeAllPopups(){if(this.facebookPopupWindow){try{this.facebookPopupWindow.close()}catch(t){console.error(t)}this.facebookPopupWindow=null}if(this.samlPopupWindow){try{this.samlPopupWindow.close()}catch(t){console.error(t)}this.samlPopupWindow=null}}async pollForLogin(){if(this.pollingStartedAt){const t=await this.serverApi.isloggedin();if(t&&!0===t.notLoggedIn&&this.pollingStartedAt){Date.now()-this.pollingStartedAt<3e5?setTimeout((()=>{this.pollForLogin()}),1200):this.pollingStartedAt=void 0}else t&&t.name&&(this.fireGlobal("yp-logged-in-via-polling",t),this.cancelLoginPolling(),this.facebookPopupWindow?this.loginFromFacebook():this.samlPopupWindow&&this.loginFromSaml(),this._closeAllPopups())}else console.error("Unkown state in polling..."),this._closeAllPopups(),this.cancelLoginPolling()}startPollingForLogin(){this.pollingStartedAt=Date.now(),setTimeout((()=>{this.pollForLogin()}),1e3)}loginFromFacebook(){this.cancelLoginPolling(),this.lastLoginMethod="Facebook",this._completeExternalLogin(this.t("user.loggedInWithFacebook"))}loginFromSaml(){this.cancelLoginPolling(),this.lastLoginMethod="Saml2",this._completeExternalLogin(this.t("user.loggedInWithSaml"))}_completeExternalLogin(t){this.checkLogin(),this._setUserLoginSpinner(),this.completeExternalLoginText=t}checkLogin(){this.isloggedin(),this.getMemberShips(),this.getAdminRights(),this.getPromoterRights()}recheckAdminRights(){this.getAdminRights(),this.getPromoterRights()}async getPromoterRights(){const t=await this.serverApi.getPromoterRights();t?(this.promoterRights=t,this.fireGlobal("yp-got-promoter-rights",!0)):(this.promoterRights=void 0,this.fireGlobal("yp-got-promoter-rights",!1))}updateEndorsementForPost(t,e,i=void 0){if(this.user){this.user.Endorsements||(this.user.Endorsements=[]);let i=!1;for(let r=0;r<this.user.Endorsements.length;r++)if(this.user.Endorsements[r].post_id===t){e?this.user.Endorsements[r]=e:this.user.Endorsements.splice(r,1),i=!0;break}!i&&e&&this.user.Endorsements.push(e),this._updateEndorsementPostsIndex(this.user)}else console.error("Can't find user for updateEndorsementForPost");i&&i.configuration&&i.configuration.maxNumberOfGroupVotes?this.calculateVotesLeftForGroup(i):this.fireGlobal("got-endorsements-and-qualities",null)}calculateVotesLeftForGroup(t){setTimeout((()=>{if(this.user&&this.user.Endorsements){const e=this.groupCurrentVoteCountIndex[t.id];if(this.groupCurrentVoteCountIndex[t.id]=this.user.Endorsements.filter((function(e){return e.Post&&e.Post.group_id===t.id&&-1!==e.value&&0!==e.value})).length,e!=this.groupCurrentVoteCountIndex[t.id]){const e=`${this.t("youHaveUsed")} ${this.groupCurrentVoteCountIndex[t.id]} ${this.t("ofNumber")} ${t.configuration.maxNumberOfGroupVotes} ${this.t("votesForGroup")}`;window.appDialogs.getDialogAsync("masterToast",(t=>{t.labelText=e,t.open=!0,t.timeoutMs=4e3}))}this.fireGlobal("got-endorsements-and-qualities",{maxGroupId:t.id,groupCurrentVoteCount:this.groupCurrentVoteCountIndex[t.id]})}else console.warn("No user or endorsements for calculateVotesLeftForGroup")}))}_updateEndorsementPostsIndex(t){if(t&&t.Endorsements&&t.Endorsements.length>0){this.endorsementPostsIndex={};for(let e=0;e<t.Endorsements.length;e++)this.endorsementPostsIndex[t.Endorsements[e].post_id]=t.Endorsements[e]}else this.endorsementPostsIndex={}}_updateRatingPostsIndex(t){if(t&&t.Ratings&&t.Ratings.length>0){this.ratingPostsIndex={};for(let e=0;e<t.Ratings.length;e++)this.ratingPostsIndex[t.Ratings[e].post_id]||(this.ratingPostsIndex[t.Ratings[e].post_id]={}),this.ratingPostsIndex[t.Ratings[e].post_id][t.Ratings[e].type_index]=t.Ratings[e]}else this.ratingPostsIndex={}}updateRatingForPost(t,e,i){if(this.user){this.user.Ratings||(this.user.Ratings=[]);let r=!1;for(let o=0;o<this.user.Ratings.length;o++)if(this.user.Ratings[o].post_id===t&&this.user.Ratings[o].type_index===e){i?this.user.Ratings[o]=i:this.user.Ratings.splice(o,1),r=!0;break}!r&&i&&this.user.Ratings.push(i),this._updateRatingPostsIndex(this.user)}else console.error("Can't find user for updateRatingForPost")}updatePointQualityForPost(t,e){if(this.user){if(this.user.PointQualities){let i=!1;for(let r=0;r<this.user.PointQualities.length;r++)if(this.user.PointQualities[r].point_id===t){e?this.user.PointQualities[r]=e:this.user.PointQualities.splice(r,1),i=!0;break}i&&this._updatePointQualitiesIndex(this.user)}}else console.error("Can't find user for updatePointQualityForPost")}_updatePointQualitiesIndex(t){if(t&&t.PointQualities&&t.PointQualities.length>0){this.pointQualitiesIndex={};for(let e=0;e<t.PointQualities.length;e++)this.pointQualitiesIndex[t.PointQualities[e].point_id]=t.PointQualities[e]}else this.pointQualitiesIndex={}}_onUserChanged(t){t&&(this._updateEndorsementPostsIndex(t),this._updatePointQualitiesIndex(t),this._updateRatingPostsIndex(t),this.fireGlobal("got-endorsements-and-qualities",null))}async logout(){this.hasIssuedLogout=!0,await this.serverApi.logout(),this.toastLogoutTextCombined=this.t("user.logoutCompleteFor")+" "+this.user?.name,this.fireGlobal("yp-open-toast",{text:this.toastLogoutTextCombined}),this.fireGlobal("yp-close-right-drawer",!0),this.removeUserSession(),this.recheckAdminRights()}checkRegistrationAnswersCurrent(){this.user&&this._checkRegistrationAnswers(this.user)}setHasRegistrationAnswers(){this.user&&(this.user.hasRegistrationAnswers=!0)}_checkRegistrationAnswers(t){t&&!t.notLoggedIn&&window.appGlobals.registrationQuestionsGroup&&!t.hasRegistrationAnswers&&(!window.appGlobals.currentAnonymousUser||window.appGlobals.currentAnonymousUser&&window.appGlobals.registrationQuestionsGroup.configuration.anonymousAskRegistrationQuestions)?window.appDialogs.getDialogAsync("registrationQuestions",(t=>{t.open(window.appGlobals.registrationQuestionsGroup)})):this.fireGlobal("yp-registration-questions-done")}async isloggedin(){const t=await this.serverApi.isloggedin();t&&!0===t.notLoggedIn?this.removeUserSession():t&&t.name&&t.profile_data&&t.profile_data.isAnonymousUser?setTimeout((()=>{window.appGlobals.currentAnonymousGroup?this.setLoggedInUser(t):window.appGlobals.setAnonymousUser(t)}),500):t&&t.name&&this.setLoggedInUser(t),t&&t.missingEmail?window.appDialogs.getDialogAsync("missingEmail",(e=>{e.open(t.loginProvider)})):t&&t.profile_data&&!1===t.profile_data.saml_show_confirm_email_completed&&window.appDialogs.getDialogAsync("missingEmail",(e=>{e.open(t.loginProvider,!0,t.email)})),setTimeout((()=>{"Saml2"!==this.lastLoginMethod&&"Facebook"!==this.lastLoginMethod||this._checkRegistrationAnswers(t)}),250),t&&(t.customSamlDeniedMessage?window.appGlobals.currentSamlDeniedMessage=t.customSamlDeniedMessage:window.appGlobals.currentSamlDeniedMessage=void 0,t.customSamlLoginMessage?window.appGlobals.currentSamlLoginMessage=t.customSamlLoginMessage:window.appGlobals.currentSamlLoginMessage=void 0,t.forceSecureSamlLogin?window.appGlobals.currentForceSaml=!0:window.appGlobals.currentForceSaml=!1),this.completeExternalLoginText&&(window.appGlobals.notifyUserViaToast(this.completeExternalLoginText),this._closeUserLogin(),this.completeExternalLoginText=void 0,this._checkLoginForParameters())}async getAdminRights(){const t=await this.serverApi.getAdminRights();t?(this.adminRights=t,this.fireGlobal("yp-got-admin-rights",!0)):this.adminRights&&(this.adminRights=void 0,this.fireGlobal("yp-got-admin-rights",!1)),this.fireGlobal("yp-have-checked-admin-rights")}_updateMembershipsIndex(t){if(t){let e;for(this.membershipsIndex={groups:{},communities:{},domains:{}},e=0;e<t.GroupUsers.length;e++)this.membershipsIndex.groups[t.GroupUsers[e].id]=!0;for(e=0;e<t.CommunityUsers.length;e++)this.membershipsIndex.communities[t.CommunityUsers[e].id]=!0;for(e=0;e<t.DomainUsers.length;e++)this.membershipsIndex.domains[t.DomainUsers[e].id]=!0}else this.membershipsIndex={groups:{},communities:{},domains:{}}}async getMemberShips(){const t=await this.serverApi.getMemberships();t?(this.memberships=t,this._updateMembershipsIndex(this.memberships),this.fireGlobal("yp-got-memberships",!0)):this.memberships&&(this.memberships=void 0,this.fireGlobal("yp-got-memberships",!1))}}class uc extends hc{constructor(t,e=!1){super(t,!0)}}var pc=function(t,e,i,r){var o,n=arguments.length,s=n<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(n<3?o(s):n>3?o(e,i,s):o(e,i))||s);return n>3&&s&&Object.defineProperty(e,i,s),s};const fc=[{id:1,title:"Democracy in Distress",imageUrl:"https://cps-images.citizens.is/projects/1/problemStatement/images/916898992.png",description:"The first test run is entirely automated except for the problem statement provided by us. All sub problems, entities and solutions with pros & cons are generated using GPT-4 & GPT-3.5. The context for solutions is obtained through curated web searches. This setup allows us to explore how human and AI-driven insights can work together to solve complex problems."}];let mc=class extends Ss{async connectedCallback(){super.connectedCallback(),window.psAppGlobals.activity("Home - open")}updated(t){super.updated(t)}disconnectedCallback(){super.disconnectedCallback(),window.psAppGlobals.activity("Home - close")}static get styles(){return[super.styles,n`.subContainer{max-width:960px;margin-top:8px;padding:16px}.projectItem{background-color:var(--md-sys-color-surface-variant);color:var(--md-sys-color-on-surface-variant);border-radius:16px;margin:16px;margin-top:32px;width:100%;max-width:420px;padding:0}.projectTitle{font-size:32px;background-color:var(--md-sys-color-primary);color:var(--md-sys-color-on-primary);width:100%;max-width:420px;height:100%;padding:0;margin:0;margin-top:-4px}.projectDescription{padding:16px;height:142px}.projectTitleInner{padding:16px;padding-bottom:20px}.projectImage{margin:0;padding:0}.moreInfo{margin:16px;margin-top:0;font-size:18px;padding:24px;line-height:1.5;max-width:944px;border-radius:24px;color:var(--md-sys-color-on-surface);background-color:var(--md-sys-color-surface)}a{text-decoration:none}.gitHubLink{margin-top:16px}.gitHubLink a{text-decoration:underline}.title{padding:24px;margin-bottom:0;color:var(--md-sys-color-primary);background-color:var(--md-sys-color-on-primary)}@media (max-width:960px){.projectItem,.projectTitle{max-width:100%;width:100%;margin:0}.projectTitle{font-size:26px;margin-top:-3px}.subContainer{max-width:100%;margin-top:8px;padding:8px}.moreInfo{margin:8px;max-width:100%;width:100%}.projectDescription{padding-bottom:24px;height:100%}.title{font-size:26px;padding:16px;line-height:1.45}}`]}renderProject(t){return U` <a href="/projects/${t.id}" @click="${()=>window.scrollTo(0,0)}"> <div class="projectItem layout vertical center-center"> <div class="projectImage"> <img width="${this.wide?420:343}" height="${this.wide?240:196}" src="${t.imageUrl}"> </div> <div class="projectTitle layout vertical center-center"> <div class="projectTitleInner">${t.title}</div> </div> <div class="projectDescription">${t.description}</div> </div> </a> `}render(){return U` <div class="topContainer layout vertical center-center"> <img height="${this.wide?300:190}" src="https://yrpri-usa-production-direct-assets.s3.amazonaws.com/Robert_Bjarnason_High_quality_abstract_new_high_tech_new_wave.__61a9b3d8-7533-4841-a99e-ef036fed1fbf.png"> <div class="title">${this.t("Welcome to Policy Synth")}</div> <div class="layout horizontal center-justified wrap"> ${fc.map((t=>this.renderProject(t)))} </div> <div class="subContainer layout vertical center-center"> <div class="title"> ${this.t("Bringing together the best of collective and artificial intelligence")} </div> <div class="moreInfo"> Our project embodies a unique effort to intertwine human insights and artificial intelligence to grapple with complex policy dilemmas. We are in the process of building a state-of-the-art platform where policymakers, citizens, and AI can engage in a collective discourse. This collaborative interaction is expected to not only expedite decision-making processes but also augment their quality, paving the way for more inventive and efficacious policy resolutions. </div> <div class="gitHubLink"> <a href="https://github.com/CitizensFoundation/policy-synth" target="_blank">${this.t("Join us and collaborate on Github")}</a> </div> </div> </div> `}};mc=pc([at("ps-home")],mc);
/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
class gc extends yn{constructor(){super(...arguments),this.buffer=0}renderIndicator(){const t={transform:`scaleX(${100*(this.indeterminate?1:this.value/this.max)}%)`},e=this.buffer??0,i=e>0,r={transform:`scaleX(${100*(this.indeterminate||!i?1:e/this.max)}%)`},o=this.indeterminate||!i||e>=this.max||this.value>=this.max;return U` <div class="dots" ?hidden="${o}"></div> <div class="inactive-track" style="${yr(r)}"></div> <div class="bar primary-bar" style="${yr(t)}"> <div class="bar-inner"></div> </div> <div class="bar secondary-bar"> <div class="bar-inner"></div> </div> `}}bt([dt({type:Number})],gc.prototype,"buffer",void 0);
/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
const vc=n`:host{--_active-indicator-color:var(--md-linear-progress-active-indicator-color, var(--md-sys-color-primary, #6750a4));--_active-indicator-height:var(--md-linear-progress-active-indicator-height, 4px);--_four-color-active-indicator-four-color:var(--md-linear-progress-four-color-active-indicator-four-color, var(--md-sys-color-tertiary-container, #ffd8e4));--_four-color-active-indicator-one-color:var(--md-linear-progress-four-color-active-indicator-one-color, var(--md-sys-color-primary, #6750a4));--_four-color-active-indicator-three-color:var(--md-linear-progress-four-color-active-indicator-three-color, var(--md-sys-color-tertiary, #7d5260));--_four-color-active-indicator-two-color:var(--md-linear-progress-four-color-active-indicator-two-color, var(--md-sys-color-primary-container, #eaddff));--_track-color:var(--md-linear-progress-track-color, var(--md-sys-color-surface-container-highest, #e6e0e9));--_track-height:var(--md-linear-progress-track-height, 4px);--_track-shape:var(--md-linear-progress-track-shape, var(--md-sys-shape-corner-none, 0px));border-radius:var(--_track-shape);display:flex;position:relative;min-width:80px;height:var(--_track-height);content-visibility:auto;contain:strict}.bar,.bar-inner,.dots,.inactive-track,.progress{position:absolute}.progress{direction:ltr;inset:0;border-radius:inherit;overflow:hidden;display:flex;align-items:center}.bar{animation:none;width:100%;height:var(--_active-indicator-height);transform-origin:left center;transition:transform 250ms cubic-bezier(.4,0,.6,1)}.secondary-bar{display:none}.bar-inner{inset:0;animation:none;background:var(--_active-indicator-color)}.inactive-track{background:var(--_track-color);inset:0;transition:transform 250ms cubic-bezier(.4,0,.6,1);transform-origin:left center}.dots{inset:0;animation:linear infinite 250ms;animation-name:buffering;background-color:var(--_track-color);background-repeat:repeat-x;-webkit-mask-image:url("data:image/svg+xml,%3Csvg version='1.1' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 5 2' preserveAspectRatio='xMinYMin slice'%3E%3Ccircle cx='1' cy='1' r='1'/%3E%3C/svg%3E");mask-image:url("data:image/svg+xml,%3Csvg version='1.1' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 5 2' preserveAspectRatio='xMinYMin slice'%3E%3Ccircle cx='1' cy='1' r='1'/%3E%3C/svg%3E");z-index:-1}.dots[hidden]{display:none}.indeterminate .bar{transition:none}.indeterminate .primary-bar{inset-inline-start:-145.167%}.indeterminate .secondary-bar{inset-inline-start:-54.8889%;display:block}.indeterminate .primary-bar{animation:linear infinite 2s;animation-name:primary-indeterminate-translate}.indeterminate .primary-bar>.bar-inner{animation:linear infinite 2s primary-indeterminate-scale}.indeterminate.four-color .primary-bar>.bar-inner{animation-name:primary-indeterminate-scale,four-color;animation-duration:2s,4s}.indeterminate .secondary-bar{animation:linear infinite 2s;animation-name:secondary-indeterminate-translate}.indeterminate .secondary-bar>.bar-inner{animation:linear infinite 2s secondary-indeterminate-scale}.indeterminate.four-color .secondary-bar>.bar-inner{animation-name:secondary-indeterminate-scale,four-color;animation-duration:2s,4s}:host(:dir(rtl)){transform:scale(-1)}@keyframes primary-indeterminate-scale{0%{transform:scaleX(.08)}36.65%{animation-timing-function:cubic-bezier(.334731,.12482,.785844,1);transform:scaleX(.08)}69.15%{animation-timing-function:cubic-bezier(.06,.11,.6,1);transform:scaleX(.661479)}100%{transform:scaleX(.08)}}@keyframes secondary-indeterminate-scale{0%{animation-timing-function:cubic-bezier(.205028,.057051,.57661,.453971);transform:scaleX(.08)}19.15%{animation-timing-function:cubic-bezier(.152313,.196432,.648374,1.00432);transform:scaleX(.457104)}44.15%{animation-timing-function:cubic-bezier(.257759,-.003163,.211762,1.38179);transform:scaleX(.72796)}100%{transform:scaleX(.08)}}@keyframes buffering{0%{transform:translateX(calc(var(--_track-height)/ 2 * 5))}}@keyframes primary-indeterminate-translate{0%{transform:translateX(0)}20%{animation-timing-function:cubic-bezier(.5,0,.701732,.495819);transform:translateX(0)}59.15%{animation-timing-function:cubic-bezier(.302435,.381352,.55,.956352);transform:translateX(83.6714%)}100%{transform:translateX(200.611%)}}@keyframes secondary-indeterminate-translate{0%{animation-timing-function:cubic-bezier(.15,0,.515058,.409685);transform:translateX(0)}25%{animation-timing-function:cubic-bezier(.31033,.284058,.8,.733712);transform:translateX(37.6519%)}48.35%{animation-timing-function:cubic-bezier(.4,.627035,.6,.902026);transform:translateX(84.3862%)}100%{transform:translateX(160.278%)}}@keyframes four-color{0%{background:var(--_four-color-active-indicator-one-color)}15%{background:var(--_four-color-active-indicator-one-color)}25%{background:var(--_four-color-active-indicator-two-color)}40%{background:var(--_four-color-active-indicator-two-color)}50%{background:var(--_four-color-active-indicator-three-color)}65%{background:var(--_four-color-active-indicator-three-color)}75%{background:var(--_four-color-active-indicator-four-color)}90%{background:var(--_four-color-active-indicator-four-color)}100%{background:var(--_four-color-active-indicator-one-color)}}@media(forced-colors:active){:host{outline:1px solid CanvasText}.bar-inner,.dots{background-color:CanvasText}}`
/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */;let bc=class extends gc{};bc.styles=[vc],bc=bt([at("md-linear-progress")],bc);
/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
class yc extends nt{constructor(){super(...arguments),this.inset=!1,this.insetStart=!1,this.insetEnd=!1}}bt([dt({type:Boolean,reflect:!0})],yc.prototype,"inset",void 0),bt([dt({type:Boolean,reflect:!0,attribute:"inset-start"})],yc.prototype,"insetStart",void 0),bt([dt({type:Boolean,reflect:!0,attribute:"inset-end"})],yc.prototype,"insetEnd",void 0);
/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
const xc=n`:host{box-sizing:border-box;color:var(--md-divider-color,var(--md-sys-color-outline-variant,#cac4d0));display:flex;height:var(--md-divider-thickness,1px);width:100%}:host([inset-start]),:host([inset]){padding-inline-start:16px}:host([inset-end]),:host([inset]){padding-inline-end:16px}:host::before{background:currentColor;content:"";height:100%;width:100%}@media(forced-colors:active){:host::before{background:CanvasText}}`
/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */;let wc=class extends yc{};wc.styles=[xc],wc=bt([at("md-divider")],wc);
/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
const _c=Symbol("isFocusable"),kc=Symbol("privateIsFocusable"),Cc=Symbol("externalTabIndex"),Ac=Symbol("isUpdatingTabIndex"),Sc=Symbol("updateTabIndex");function Tc(t){var e,i,r;class o extends t{constructor(){super(...arguments),this[e]=!0,this[i]=null,this[r]=!1}get[_c](){return this[kc]}set[_c](t){this[_c]!==t&&(this[kc]=t,this[Sc]())}connectedCallback(){super.connectedCallback(),this[Sc]()}attributeChangedCallback(t,e,i){if("tabindex"===t){if(this.requestUpdate("tabIndex",Number(e??-1)),!this[Ac])return this.hasAttribute("tabindex")?void(this[Cc]=this.tabIndex):(this[Cc]=null,void this[Sc]())}else super.attributeChangedCallback(t,e,i)}[(e=kc,i=Cc,r=Ac,Sc)](){const t=this[_c]?0:-1,e=this[Cc]??t;this[Ac]=!0,this.tabIndex=e,this[Ac]=!1}}return bt([dt({noAccessor:!0})],o.prototype,"tabIndex",void 0),o}
/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Pc;const Ec=Symbol("indicator"),Ic=Symbol("animateIndicator"),Lc=Tc(nt);class Oc extends Lc{get selected(){return this.active}set selected(t){this.active=t}constructor(){super(),this.isTab=!0,this.active=!1,this.hasIcon=!1,this.iconOnly=!1,this.fullWidthIndicator=!1,this.internals=this.attachInternals(),this.internals.role="tab",this.addEventListener("keydown",this.handleKeydown.bind(this))}render(){const t=U`<div class="indicator"></div>`;return U`<div class="button" role="presentation" @click="${this.handleContentClick}"> <md-focus-ring part="focus-ring" inward .control="${this}"></md-focus-ring> <md-elevation part="elevation"></md-elevation> <md-ripple .control="${this}"></md-ripple> <div class="content ${qt(this.getContentClasses())}" role="presentation"> <slot name="icon" @slotchange="${this.handleIconSlotChange}"></slot> <slot @slotchange="${this.handleSlotChange}"></slot> ${this.fullWidthIndicator?j:t} </div> ${this.fullWidthIndicator?t:j} </div>`}getContentClasses(){return{"has-icon":this.hasIcon,"has-label":!this.iconOnly}}updated(){this.internals.ariaSelected=String(this.active)}async handleKeydown(t){await 0,t.defaultPrevented||"Enter"!==t.key&&" "!==t.key||(t.preventDefault(),this.click())}handleContentClick(t){t.stopPropagation(),this.click()}[(Pc=Ec,Ic)](t){if(!this[Ec])return;this[Ec].getAnimations().forEach((t=>{t.cancel()}));const e=this.getKeyframes(t);null!==e&&this[Ec].animate(e,{duration:250,easing:Yt})}getKeyframes(t){const e=window.matchMedia("(prefers-reduced-motion: reduce)").matches;if(!this.active)return e?[{opacity:1},{transform:"none"}]:null;const i={},r=t[Ec]?.getBoundingClientRect()??{},o=r.left,n=r.width,s=this[Ec].getBoundingClientRect(),a=s.left,l=n/s.width;return e||void 0===o||void 0===a||isNaN(l)?i.opacity=0:i.transform=`translateX(${(o-a).toFixed(4)}px) scaleX(${l.toFixed(4)})`,[i,{transform:"none"}]}handleSlotChange(){this.iconOnly=!1;for(const t of this.assignedDefaultNodes){const e=t.nodeType===Node.TEXT_NODE&&!!t.wholeText.match(/\S/);if(t.nodeType===Node.ELEMENT_NODE||e)return}this.iconOnly=!0}handleIconSlotChange(){this.hasIcon=this.assignedIcons.length>0}}bt([dt({type:Boolean,reflect:!0,attribute:"md-tab"})],Oc.prototype,"isTab",void 0),bt([dt({type:Boolean,reflect:!0})],Oc.prototype,"active",void 0),bt([dt({type:Boolean})],Oc.prototype,"selected",null),bt([dt({type:Boolean,attribute:"has-icon"})],Oc.prototype,"hasIcon",void 0),bt([dt({type:Boolean,attribute:"icon-only"})],Oc.prototype,"iconOnly",void 0),bt([pt(".indicator")],Oc.prototype,Pc,void 0),bt([ht()],Oc.prototype,"fullWidthIndicator",void 0),bt([gt({flatten:!0})],Oc.prototype,"assignedDefaultNodes",void 0),bt([mt({slot:"icon",flatten:!0})],Oc.prototype,"assignedIcons",void 0);
/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
class Rc extends nt{get activeTab(){return this.tabs.find((t=>t.active))??null}set activeTab(t){t&&this.activateTab(t)}get activeTabIndex(){return this.tabs.findIndex((t=>t.active))}set activeTabIndex(t){const e=()=>{const e=this.tabs[t];e&&this.activateTab(e)};this.slotElement?e():this.updateComplete.then(e)}get focusedTab(){return this.tabs.find((t=>t.matches(":focus-within")))}constructor(){super(),this.autoActivate=!1,this.internals=this.attachInternals(),this.internals.role="tablist",this.addEventListener("keydown",this.handleKeydown.bind(this)),this.addEventListener("keyup",this.handleKeyup.bind(this)),this.addEventListener("focusout",this.handleFocusout.bind(this))}async scrollToTab(t){await this.updateComplete;const{tabs:e}=this;if(t??(t=this.activeTab),!t||!e.includes(t)||!this.tabsScrollerElement)return;for(const t of this.tabs)await t.updateComplete;const i=t.offsetLeft,r=t.offsetWidth,o=this.scrollLeft,n=i-48,s=i+r-this.offsetWidth+48,a=Math.min(n,Math.max(s,o)),l=this.focusedTab?"auto":"instant";this.tabsScrollerElement.scrollTo({behavior:l,top:0,left:a})}render(){return U` <div class="tabs"> <slot @slotchange="${this.handleSlotChange}" @click="${this.handleTabClick}"></slot> </div> <md-divider part="divider"></md-divider> `}async handleTabClick(t){const e=t.target;var i;
/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */(await 0,t.defaultPrevented||!((i=e)instanceof HTMLElement&&i.hasAttribute("md-tab"))||e.active)||this.activateTab(e)}activateTab(t){const{tabs:e}=this,i=this.activeTab;if(e.includes(t)&&i!==t){for(const i of e)i.active=i===t;if(i){if(!this.dispatchEvent(new Event("change",{bubbles:!0,cancelable:!0}))){for(const t of e)t.active=t===i;return}t[Ic](i)}this.updateFocusableTab(t),this.scrollToTab(t)}}updateFocusableTab(t){for(const e of this.tabs)e.tabIndex=e===t?0:-1}async handleKeydown(t){await 0;const e="ArrowLeft"===t.key,i="ArrowRight"===t.key,r="Home"===t.key,o="End"===t.key;if(t.defaultPrevented||!e&&!i&&!r&&!o)return;const{tabs:n}=this;if(n.length<2)return;let s;if(t.preventDefault(),r||o)s=r?0:n.length-1;else{const t="rtl"===getComputedStyle(this).direction?e:i,{focusedTab:r}=this;if(r){const e=this.tabs.indexOf(r);s=t?e+1:e-1,s>=n.length?s=0:s<0&&(s=n.length-1)}else s=t?0:n.length-1}const a=n[s];a.focus(),this.autoActivate?this.activateTab(a):this.updateFocusableTab(a)}handleKeyup(){this.scrollToTab(this.focusedTab??this.activeTab)}handleFocusout(){if(this.matches(":focus-within"))return;const{activeTab:t}=this;t&&this.updateFocusableTab(t)}handleSlotChange(){const t=this.tabs[0];!this.activeTab&&t&&this.activateTab(t),this.scrollToTab(this.activeTab)}}bt([mt({flatten:!0,selector:"[md-tab]"})],Rc.prototype,"tabs",void 0),bt([dt({type:Number,attribute:"active-tab-index"})],Rc.prototype,"activeTabIndex",null),bt([dt({type:Boolean,attribute:"auto-activate"})],Rc.prototype,"autoActivate",void 0),bt([pt(".tabs")],Rc.prototype,"tabsScrollerElement",void 0),bt([pt("slot")],Rc.prototype,"slotElement",void 0);const $c=n`:host{box-sizing:border-box;display:flex;flex-direction:column;overflow:auto;scroll-behavior:smooth;scrollbar-width:none;position:relative}:host([hidden]){display:none}:host::-webkit-scrollbar{display:none}.tabs{align-items:end;display:flex;height:100%;overflow:inherit;scroll-behavior:inherit;scrollbar-width:inherit;justify-content:space-between;width:100%}::slotted(*){flex:1}::slotted([active]){z-index:1}`;
/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Mc=class extends Rc{};Mc.styles=[$c],Mc=bt([at("md-tabs")],Mc);
/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
class Nc extends Oc{constructor(){super(...arguments),this.inlineIcon=!1}getContentClasses(){return{...super.getContentClasses(),stacked:!this.inlineIcon}}}bt([dt({type:Boolean,attribute:"inline-icon"})],Nc.prototype,"inlineIcon",void 0);
/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
const Dc=n`:host{--_active-indicator-color:var(--md-primary-tab-active-indicator-color, var(--md-sys-color-primary, #6750a4));--_active-indicator-height:var(--md-primary-tab-active-indicator-height, 3px);--_active-indicator-shape:var(--md-primary-tab-active-indicator-shape, 3px 3px 0px 0px);--_active-hover-state-layer-color:var(--md-primary-tab-active-hover-state-layer-color, var(--md-sys-color-primary, #6750a4));--_active-hover-state-layer-opacity:var(--md-primary-tab-active-hover-state-layer-opacity, 0.08);--_active-pressed-state-layer-color:var(--md-primary-tab-active-pressed-state-layer-color, var(--md-sys-color-primary, #6750a4));--_active-pressed-state-layer-opacity:var(--md-primary-tab-active-pressed-state-layer-opacity, 0.12);--_container-color:var(--md-primary-tab-container-color, var(--md-sys-color-surface, #fef7ff));--_container-elevation:var(--md-primary-tab-container-elevation, 0);--_container-height:var(--md-primary-tab-container-height, 48px);--_with-icon-and-label-text-container-height:var(--md-primary-tab-with-icon-and-label-text-container-height, 64px);--_hover-state-layer-color:var(--md-primary-tab-hover-state-layer-color, var(--md-sys-color-on-surface, #1d1b20));--_hover-state-layer-opacity:var(--md-primary-tab-hover-state-layer-opacity, 0.08);--_pressed-state-layer-color:var(--md-primary-tab-pressed-state-layer-color, var(--md-sys-color-primary, #6750a4));--_pressed-state-layer-opacity:var(--md-primary-tab-pressed-state-layer-opacity, 0.12);--_active-focus-icon-color:var(--md-primary-tab-active-focus-icon-color, var(--md-sys-color-primary, #6750a4));--_active-hover-icon-color:var(--md-primary-tab-active-hover-icon-color, var(--md-sys-color-primary, #6750a4));--_active-icon-color:var(--md-primary-tab-active-icon-color, var(--md-sys-color-primary, #6750a4));--_active-pressed-icon-color:var(--md-primary-tab-active-pressed-icon-color, var(--md-sys-color-primary, #6750a4));--_icon-size:var(--md-primary-tab-icon-size, 24px);--_focus-icon-color:var(--md-primary-tab-focus-icon-color, var(--md-sys-color-on-surface, #1d1b20));--_hover-icon-color:var(--md-primary-tab-hover-icon-color, var(--md-sys-color-on-surface, #1d1b20));--_icon-color:var(--md-primary-tab-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_pressed-icon-color:var(--md-primary-tab-pressed-icon-color, var(--md-sys-color-on-surface, #1d1b20));--_label-text-font:var(--md-primary-tab-label-text-font, var(--md-sys-typescale-title-small-font, var(--md-ref-typeface-plain, Roboto)));--_label-text-line-height:var(--md-primary-tab-label-text-line-height, var(--md-sys-typescale-title-small-line-height, 1.25rem));--_label-text-size:var(--md-primary-tab-label-text-size, var(--md-sys-typescale-title-small-size, 0.875rem));--_label-text-weight:var(--md-primary-tab-label-text-weight, var(--md-sys-typescale-title-small-weight, var(--md-ref-typeface-weight-medium, 500)));--_active-focus-label-text-color:var(--md-primary-tab-active-focus-label-text-color, var(--md-sys-color-primary, #6750a4));--_active-hover-label-text-color:var(--md-primary-tab-active-hover-label-text-color, var(--md-sys-color-primary, #6750a4));--_active-label-text-color:var(--md-primary-tab-active-label-text-color, var(--md-sys-color-primary, #6750a4));--_active-pressed-label-text-color:var(--md-primary-tab-active-pressed-label-text-color, var(--md-sys-color-primary, #6750a4));--_focus-label-text-color:var(--md-primary-tab-focus-label-text-color, var(--md-sys-color-on-surface, #1d1b20));--_hover-label-text-color:var(--md-primary-tab-hover-label-text-color, var(--md-sys-color-on-surface, #1d1b20));--_label-text-color:var(--md-primary-tab-label-text-color, var(--md-sys-color-on-surface-variant, #49454f));--_pressed-label-text-color:var(--md-primary-tab-pressed-label-text-color, var(--md-sys-color-on-surface, #1d1b20));--_container-shape-start-start:var(--md-primary-tab-container-shape-start-start, var(--md-primary-tab-container-shape, var(--md-sys-shape-corner-none, 0px)));--_container-shape-start-end:var(--md-primary-tab-container-shape-start-end, var(--md-primary-tab-container-shape, var(--md-sys-shape-corner-none, 0px)));--_container-shape-end-end:var(--md-primary-tab-container-shape-end-end, var(--md-primary-tab-container-shape, var(--md-sys-shape-corner-none, 0px)));--_container-shape-end-start:var(--md-primary-tab-container-shape-end-start, var(--md-primary-tab-container-shape, var(--md-sys-shape-corner-none, 0px)))}.content.stacked{flex-direction:column;gap:2px}.content.stacked.has-icon.has-label{height:var(--_with-icon-and-label-text-container-height)}`
/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */,zc=n`:host{display:inline-flex;align-items:center;justify-content:center;outline:0;padding:0 16px;position:relative;-webkit-tap-highlight-color:transparent;vertical-align:middle;user-select:none;font-family:var(--_label-text-font);font-size:var(--_label-text-size);line-height:var(--_label-text-line-height);font-weight:var(--_label-text-weight);color:var(--_label-text-color);z-index:0;--md-ripple-hover-color:var(--_hover-state-layer-color);--md-ripple-hover-opacity:var(--_hover-state-layer-opacity);--md-ripple-pressed-color:var(--_pressed-state-layer-color);--md-ripple-pressed-opacity:var(--_pressed-state-layer-opacity);--md-elevation-level:var(--_container-elevation)}md-focus-ring{--md-focus-ring-shape:8px}:host([active]) md-focus-ring{margin-bottom:calc(var(--_active-indicator-height) + 1px)}.button::before{background:var(--_container-color);content:"";inset:0;position:absolute;z-index:-1}.button::before,md-elevation,md-ripple{border-start-start-radius:var(--_container-shape-start-start);border-start-end-radius:var(--_container-shape-start-end);border-end-end-radius:var(--_container-shape-end-end);border-end-start-radius:var(--_container-shape-end-start)}.content{position:relative;box-sizing:border-box;display:inline-flex;flex-direction:row;align-items:center;justify-content:center;height:var(--_container-height);gap:8px}.indicator{position:absolute;box-sizing:border-box;z-index:-1;transform-origin:bottom left;background:var(--_active-indicator-color);border-radius:var(--_active-indicator-shape);height:var(--_active-indicator-height);inset:auto 0 0 0;opacity:0}::slotted([slot=icon]){display:inline-flex;position:relative;writing-mode:horizontal-tb;fill:currentColor;color:var(--_icon-color);font-size:var(--_icon-size);width:var(--_icon-size);height:var(--_icon-size)}:host(:hover){color:var(--_hover-label-text-color);cursor:pointer}:host(:hover) ::slotted([slot=icon]){color:var(--_hover-icon-color)}:host(:focus){color:var(--_focus-label-text-color)}:host(:focus) ::slotted([slot=icon]){color:var(--_focus-icon-color)}:host(:active){color:var(--_pressed-label-text-color)}:host(:active) ::slotted([slot=icon]){color:var(--_pressed-icon-color)}:host([active]) .indicator{opacity:1}:host([active]){color:var(--_active-label-text-color);--md-ripple-hover-color:var(--_active-hover-state-layer-color);--md-ripple-hover-opacity:var(--_active-hover-state-layer-opacity);--md-ripple-pressed-color:var(--_active-pressed-state-layer-color);--md-ripple-pressed-opacity:var(--_active-pressed-state-layer-opacity)}:host([active]) ::slotted([slot=icon]){color:var(--_active-icon-color)}:host([active]:hover){color:var(--_active-hover-label-text-color)}:host([active]:hover) ::slotted([slot=icon]){color:var(--_active-hover-icon-color)}:host([active]:focus){color:var(--_active-focus-label-text-color)}:host([active]:focus) ::slotted([slot=icon]){color:var(--_active-focus-icon-color)}:host([active]:active){color:var(--_active-pressed-label-text-color)}:host([active]:active) ::slotted([slot=icon]){color:var(--_active-pressed-icon-color)}::slotted(*),:host{white-space:nowrap}@media(forced-colors:active){.indicator{background:CanvasText}}`;
/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
let Fc=class extends Nc{};Fc.styles=[zc,Dc],Fc=bt([at("md-primary-tab")],Fc);
/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
class Bc extends nt{constructor(){super(...arguments),this.disabled=!1,this.error=!1,this.focused=!1,this.label="",this.noAsterisk=!1,this.populated=!1,this.required=!1,this.resizable=!1,this.supportingText="",this.errorText="",this.count=-1,this.max=-1,this.hasStart=!1,this.hasEnd=!1,this.isAnimating=!1,this.refreshErrorAlert=!1,this.disableTransitions=!1}get counterText(){const t=this.count??-1,e=this.max??-1;return t<0||e<=0?"":`${t} / ${e}`}get supportingOrErrorText(){return this.error&&this.errorText?this.errorText:this.supportingText}reannounceError(){this.refreshErrorAlert=!0}update(t){t.has("disabled")&&void 0!==t.get("disabled")&&(this.disableTransitions=!0),this.disabled&&this.focused&&(t.set("focused",!0),this.focused=!1),this.animateLabelIfNeeded({wasFocused:t.get("focused"),wasPopulated:t.get("populated")}),super.update(t)}render(){const t=this.renderLabel(!0),e=this.renderLabel(!1),i=this.renderOutline?.(t),r={disabled:this.disabled,"disable-transitions":this.disableTransitions,error:this.error&&!this.disabled,focused:this.focused,"with-start":this.hasStart,"with-end":this.hasEnd,populated:this.populated,resizable:this.resizable,required:this.required,"no-label":!this.label};return U` <div class="field ${qt(r)}"> <div class="container-overflow"> ${this.renderBackground?.()} ${this.renderIndicator?.()} ${i} <div class="container"> <div class="start"> <slot name="start"></slot> </div> <div class="middle"> <div class="label-wrapper"> ${e} ${i?j:t} </div> <div class="content"> <slot></slot> </div> </div> <div class="end"> <slot name="end"></slot> </div> </div> </div> ${this.renderSupportingText()} </div> `}updated(t){(t.has("supportingText")||t.has("errorText")||t.has("count")||t.has("max"))&&this.updateSlottedAriaDescribedBy(),this.refreshErrorAlert&&requestAnimationFrame((()=>{this.refreshErrorAlert=!1})),this.disableTransitions&&requestAnimationFrame((()=>{this.disableTransitions=!1}))}renderSupportingText(){const{supportingOrErrorText:t,counterText:e}=this;if(!t&&!e)return j;const i=U`<span>${t}</span>`,r=e?U`<span class="counter">${e}</span>`:j,o=this.error&&this.errorText&&!this.refreshErrorAlert;return U` <div class="supporting-text" role="${o?"alert":j}">${i}${r}</div> <slot name="aria-describedby" @slotchange="${this.updateSlottedAriaDescribedBy}"></slot> `}updateSlottedAriaDescribedBy(){for(const t of this.slottedAriaDescribedBy)ot(U`${this.supportingOrErrorText} ${this.counterText}`,t),t.setAttribute("hidden","")}renderLabel(t){if(!this.label)return j;let e;e=t?this.focused||this.populated||this.isAnimating:!this.focused&&!this.populated&&!this.isAnimating;const i={hidden:!e,floating:t,resting:!t},r=`${this.label}${this.required&&!this.noAsterisk?"*":""}`;return U` <span class="label ${qt(i)}" aria-hidden="${!e}">${r}</span> `}animateLabelIfNeeded({wasFocused:t,wasPopulated:e}){if(!this.label)return;t??(t=this.focused),e??(e=this.populated);(t||e)!==(this.focused||this.populated)&&(this.isAnimating=!0,this.labelAnimation?.cancel(),this.labelAnimation=this.floatingLabelEl?.animate(this.getLabelKeyframes(),{duration:150,easing:Wt}),this.labelAnimation?.addEventListener("finish",(()=>{this.isAnimating=!1})))}getLabelKeyframes(){const{floatingLabelEl:t,restingLabelEl:e}=this;if(!t||!e)return[];const{x:i,y:r,height:o}=t.getBoundingClientRect(),{x:n,y:s,height:a}=e.getBoundingClientRect(),l=t.scrollWidth,c=e.scrollWidth,d=c/l,h=`translateX(${n-i}px) translateY(${s-r+Math.round((a-o*d)/2)}px) scale(${d})`,u="translateX(0) translateY(0) scale(1)",p=e.clientWidth,f=c>p?p/d+"px":"";return this.focused||this.populated?[{transform:h,width:f},{transform:u,width:f}]:[{transform:u,width:f},{transform:h,width:f}]}getSurfacePositionClientRect(){return this.containerEl.getBoundingClientRect()}}bt([dt({type:Boolean})],Bc.prototype,"disabled",void 0),bt([dt({type:Boolean})],Bc.prototype,"error",void 0),bt([dt({type:Boolean})],Bc.prototype,"focused",void 0),bt([dt()],Bc.prototype,"label",void 0),bt([dt({type:Boolean,attribute:"no-asterisk"})],Bc.prototype,"noAsterisk",void 0),bt([dt({type:Boolean})],Bc.prototype,"populated",void 0),bt([dt({type:Boolean})],Bc.prototype,"required",void 0),bt([dt({type:Boolean})],Bc.prototype,"resizable",void 0),bt([dt({attribute:"supporting-text"})],Bc.prototype,"supportingText",void 0),bt([dt({attribute:"error-text"})],Bc.prototype,"errorText",void 0),bt([dt({type:Number})],Bc.prototype,"count",void 0),bt([dt({type:Number})],Bc.prototype,"max",void 0),bt([dt({type:Boolean,attribute:"has-start"})],Bc.prototype,"hasStart",void 0),bt([dt({type:Boolean,attribute:"has-end"})],Bc.prototype,"hasEnd",void 0),bt([mt({slot:"aria-describedby"})],Bc.prototype,"slottedAriaDescribedBy",void 0),bt([ht()],Bc.prototype,"isAnimating",void 0),bt([ht()],Bc.prototype,"refreshErrorAlert",void 0),bt([ht()],Bc.prototype,"disableTransitions",void 0),bt([pt(".label.floating")],Bc.prototype,"floatingLabelEl",void 0),bt([pt(".label.resting")],Bc.prototype,"restingLabelEl",void 0),bt([pt(".container")],Bc.prototype,"containerEl",void 0);
/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
class Uc extends Bc{renderOutline(t){return U` <div class="outline"> <div class="outline-start"></div> <div class="outline-notch"> <div class="outline-panel-inactive"></div> <div class="outline-panel-active"></div> <div class="outline-label">${t}</div> </div> <div class="outline-end"></div> </div> `}}
/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Vc=n`@layer styles{:host{--_bottom-space: var(--md-outlined-field-bottom-space, 16px);--_content-color: var(--md-outlined-field-content-color, var(--md-sys-color-on-surface, #1d1b20));--_content-font: var(--md-outlined-field-content-font, var(--md-sys-typescale-body-large-font, var(--md-ref-typeface-plain, Roboto)));--_content-line-height: var(--md-outlined-field-content-line-height, var(--md-sys-typescale-body-large-line-height, 1.5rem));--_content-size: var(--md-outlined-field-content-size, var(--md-sys-typescale-body-large-size, 1rem));--_content-weight: var(--md-outlined-field-content-weight, var(--md-sys-typescale-body-large-weight, var(--md-ref-typeface-weight-regular, 400)));--_disabled-content-color: var(--md-outlined-field-disabled-content-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-content-opacity: var(--md-outlined-field-disabled-content-opacity, 0.38);--_disabled-label-text-color: var(--md-outlined-field-disabled-label-text-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-label-text-opacity: var(--md-outlined-field-disabled-label-text-opacity, 0.38);--_disabled-leading-content-color: var(--md-outlined-field-disabled-leading-content-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-leading-content-opacity: var(--md-outlined-field-disabled-leading-content-opacity, 0.38);--_disabled-outline-color: var(--md-outlined-field-disabled-outline-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-outline-opacity: var(--md-outlined-field-disabled-outline-opacity, 0.12);--_disabled-outline-width: var(--md-outlined-field-disabled-outline-width, 1px);--_disabled-supporting-text-color: var(--md-outlined-field-disabled-supporting-text-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-supporting-text-opacity: var(--md-outlined-field-disabled-supporting-text-opacity, 0.38);--_disabled-trailing-content-color: var(--md-outlined-field-disabled-trailing-content-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-trailing-content-opacity: var(--md-outlined-field-disabled-trailing-content-opacity, 0.38);--_error-content-color: var(--md-outlined-field-error-content-color, var(--md-sys-color-on-surface, #1d1b20));--_error-focus-content-color: var(--md-outlined-field-error-focus-content-color, var(--md-sys-color-on-surface, #1d1b20));--_error-focus-label-text-color: var(--md-outlined-field-error-focus-label-text-color, var(--md-sys-color-error, #b3261e));--_error-focus-leading-content-color: var(--md-outlined-field-error-focus-leading-content-color, var(--md-sys-color-on-surface-variant, #49454f));--_error-focus-outline-color: var(--md-outlined-field-error-focus-outline-color, var(--md-sys-color-error, #b3261e));--_error-focus-supporting-text-color: var(--md-outlined-field-error-focus-supporting-text-color, var(--md-sys-color-error, #b3261e));--_error-focus-trailing-content-color: var(--md-outlined-field-error-focus-trailing-content-color, var(--md-sys-color-error, #b3261e));--_error-hover-content-color: var(--md-outlined-field-error-hover-content-color, var(--md-sys-color-on-surface, #1d1b20));--_error-hover-label-text-color: var(--md-outlined-field-error-hover-label-text-color, var(--md-sys-color-on-error-container, #410e0b));--_error-hover-leading-content-color: var(--md-outlined-field-error-hover-leading-content-color, var(--md-sys-color-on-surface-variant, #49454f));--_error-hover-outline-color: var(--md-outlined-field-error-hover-outline-color, var(--md-sys-color-on-error-container, #410e0b));--_error-hover-supporting-text-color: var(--md-outlined-field-error-hover-supporting-text-color, var(--md-sys-color-error, #b3261e));--_error-hover-trailing-content-color: var(--md-outlined-field-error-hover-trailing-content-color, var(--md-sys-color-on-error-container, #410e0b));--_error-label-text-color: var(--md-outlined-field-error-label-text-color, var(--md-sys-color-error, #b3261e));--_error-leading-content-color: var(--md-outlined-field-error-leading-content-color, var(--md-sys-color-on-surface-variant, #49454f));--_error-outline-color: var(--md-outlined-field-error-outline-color, var(--md-sys-color-error, #b3261e));--_error-supporting-text-color: var(--md-outlined-field-error-supporting-text-color, var(--md-sys-color-error, #b3261e));--_error-trailing-content-color: var(--md-outlined-field-error-trailing-content-color, var(--md-sys-color-error, #b3261e));--_focus-content-color: var(--md-outlined-field-focus-content-color, var(--md-sys-color-on-surface, #1d1b20));--_focus-label-text-color: var(--md-outlined-field-focus-label-text-color, var(--md-sys-color-primary, #6750a4));--_focus-leading-content-color: var(--md-outlined-field-focus-leading-content-color, var(--md-sys-color-on-surface-variant, #49454f));--_focus-outline-color: var(--md-outlined-field-focus-outline-color, var(--md-sys-color-primary, #6750a4));--_focus-outline-width: var(--md-outlined-field-focus-outline-width, 3px);--_focus-supporting-text-color: var(--md-outlined-field-focus-supporting-text-color, var(--md-sys-color-on-surface-variant, #49454f));--_focus-trailing-content-color: var(--md-outlined-field-focus-trailing-content-color, var(--md-sys-color-on-surface-variant, #49454f));--_hover-content-color: var(--md-outlined-field-hover-content-color, var(--md-sys-color-on-surface, #1d1b20));--_hover-label-text-color: var(--md-outlined-field-hover-label-text-color, var(--md-sys-color-on-surface, #1d1b20));--_hover-leading-content-color: var(--md-outlined-field-hover-leading-content-color, var(--md-sys-color-on-surface-variant, #49454f));--_hover-outline-color: var(--md-outlined-field-hover-outline-color, var(--md-sys-color-on-surface, #1d1b20));--_hover-outline-width: var(--md-outlined-field-hover-outline-width, 1px);--_hover-supporting-text-color: var(--md-outlined-field-hover-supporting-text-color, var(--md-sys-color-on-surface-variant, #49454f));--_hover-trailing-content-color: var(--md-outlined-field-hover-trailing-content-color, var(--md-sys-color-on-surface-variant, #49454f));--_label-text-color: var(--md-outlined-field-label-text-color, var(--md-sys-color-on-surface-variant, #49454f));--_label-text-font: var(--md-outlined-field-label-text-font, var(--md-sys-typescale-body-large-font, var(--md-ref-typeface-plain, Roboto)));--_label-text-line-height: var(--md-outlined-field-label-text-line-height, var(--md-sys-typescale-body-large-line-height, 1.5rem));--_label-text-padding-bottom: var(--md-outlined-field-label-text-padding-bottom, 8px);--_label-text-populated-line-height: var(--md-outlined-field-label-text-populated-line-height, var(--md-sys-typescale-body-small-line-height, 1rem));--_label-text-populated-size: var(--md-outlined-field-label-text-populated-size, var(--md-sys-typescale-body-small-size, 0.75rem));--_label-text-size: var(--md-outlined-field-label-text-size, var(--md-sys-typescale-body-large-size, 1rem));--_label-text-weight: var(--md-outlined-field-label-text-weight, var(--md-sys-typescale-body-large-weight, var(--md-ref-typeface-weight-regular, 400)));--_leading-content-color: var(--md-outlined-field-leading-content-color, var(--md-sys-color-on-surface-variant, #49454f));--_leading-space: var(--md-outlined-field-leading-space, 16px);--_outline-color: var(--md-outlined-field-outline-color, var(--md-sys-color-outline, #79747e));--_outline-label-padding: var(--md-outlined-field-outline-label-padding, 4px);--_outline-width: var(--md-outlined-field-outline-width, 1px);--_supporting-text-color: var(--md-outlined-field-supporting-text-color, var(--md-sys-color-on-surface-variant, #49454f));--_supporting-text-font: var(--md-outlined-field-supporting-text-font, var(--md-sys-typescale-body-small-font, var(--md-ref-typeface-plain, Roboto)));--_supporting-text-leading-space: var(--md-outlined-field-supporting-text-leading-space, 16px);--_supporting-text-line-height: var(--md-outlined-field-supporting-text-line-height, var(--md-sys-typescale-body-small-line-height, 1rem));--_supporting-text-size: var(--md-outlined-field-supporting-text-size, var(--md-sys-typescale-body-small-size, 0.75rem));--_supporting-text-top-space: var(--md-outlined-field-supporting-text-top-space, 4px);--_supporting-text-trailing-space: var(--md-outlined-field-supporting-text-trailing-space, 16px);--_supporting-text-weight: var(--md-outlined-field-supporting-text-weight, var(--md-sys-typescale-body-small-weight, var(--md-ref-typeface-weight-regular, 400)));--_top-space: var(--md-outlined-field-top-space, 16px);--_trailing-content-color: var(--md-outlined-field-trailing-content-color, var(--md-sys-color-on-surface-variant, #49454f));--_trailing-space: var(--md-outlined-field-trailing-space, 16px);--_container-shape-start-start: var(--md-outlined-field-container-shape-start-start, var(--md-outlined-field-container-shape, var(--md-sys-shape-corner-extra-small, 4px)));--_container-shape-start-end: var(--md-outlined-field-container-shape-start-end, var(--md-outlined-field-container-shape, var(--md-sys-shape-corner-extra-small, 4px)));--_container-shape-end-end: var(--md-outlined-field-container-shape-end-end, var(--md-outlined-field-container-shape, var(--md-sys-shape-corner-extra-small, 4px)));--_container-shape-end-start: var(--md-outlined-field-container-shape-end-start, var(--md-outlined-field-container-shape, var(--md-sys-shape-corner-extra-small, 4px)))}.outline{border-color:var(--_outline-color);border-radius:inherit;display:flex;pointer-events:none;height:100%;position:absolute;width:100%;z-index:1}.outline-start::before,.outline-start::after,.outline-panel-inactive::before,.outline-panel-inactive::after,.outline-panel-active::before,.outline-panel-active::after,.outline-end::before,.outline-end::after{border:inherit;content:"";inset:0;position:absolute}.outline-start,.outline-end{border:inherit;border-radius:inherit;box-sizing:border-box;position:relative}.outline-start::before,.outline-start::after,.outline-end::before,.outline-end::after{border-bottom-style:solid;border-top-style:solid}.outline-start::after,.outline-end::after{opacity:0;transition:opacity 150ms cubic-bezier(0.2, 0, 0, 1)}.focused .outline-start::after,.focused .outline-end::after{opacity:1}.outline-start::before,.outline-start::after{border-inline-start-style:solid;border-inline-end-style:none;border-start-start-radius:inherit;border-start-end-radius:0;border-end-start-radius:inherit;border-end-end-radius:0;margin-inline-end:var(--_outline-label-padding)}.outline-end{flex-grow:1;margin-inline-start:calc(-1*var(--_outline-label-padding))}.outline-end::before,.outline-end::after{border-inline-start-style:none;border-inline-end-style:solid;border-start-start-radius:0;border-start-end-radius:inherit;border-end-start-radius:0;border-end-end-radius:inherit}.outline-notch{align-items:flex-start;border:inherit;display:flex;margin-inline-start:calc(-1*var(--_outline-label-padding));margin-inline-end:var(--_outline-label-padding);max-width:calc(100% - var(--_leading-space) - var(--_trailing-space));padding:0 var(--_outline-label-padding);position:relative}.no-label .outline-notch{display:none}.outline-panel-inactive,.outline-panel-active{border:inherit;border-bottom-style:solid;inset:0;position:absolute}.outline-panel-inactive::before,.outline-panel-inactive::after,.outline-panel-active::before,.outline-panel-active::after{border-top-style:solid;border-bottom:none;bottom:auto;transform:scaleX(1);transition:transform 150ms cubic-bezier(0.2, 0, 0, 1)}.outline-panel-inactive::before,.outline-panel-active::before{right:50%;transform-origin:top left}.outline-panel-inactive::after,.outline-panel-active::after{left:50%;transform-origin:top right}.populated .outline-panel-inactive::before,.populated .outline-panel-inactive::after,.populated .outline-panel-active::before,.populated .outline-panel-active::after,.focused .outline-panel-inactive::before,.focused .outline-panel-inactive::after,.focused .outline-panel-active::before,.focused .outline-panel-active::after{transform:scaleX(0)}.outline-panel-active{opacity:0;transition:opacity 150ms cubic-bezier(0.2, 0, 0, 1)}.focused .outline-panel-active{opacity:1}.outline-label{display:flex;max-width:100%;transform:translateY(calc(-100% + var(--_label-text-padding-bottom)))}.outline-start,.field:not(.with-start) .content ::slotted(*){padding-inline-start:max(var(--_leading-space),max(var(--_container-shape-start-start),var(--_container-shape-end-start)) + var(--_outline-label-padding))}.field:not(.with-start) .label-wrapper{margin-inline-start:max(var(--_leading-space),max(var(--_container-shape-start-start),var(--_container-shape-end-start)) + var(--_outline-label-padding))}.field:not(.with-end) .content ::slotted(*){padding-inline-end:max(var(--_trailing-space),max(var(--_container-shape-start-end),var(--_container-shape-end-end)))}.field:not(.with-end) .label-wrapper{margin-inline-end:max(var(--_trailing-space),max(var(--_container-shape-start-end),var(--_container-shape-end-end)))}.outline-start::before,.outline-end::before,.outline-panel-inactive,.outline-panel-inactive::before,.outline-panel-inactive::after{border-width:var(--_outline-width)}:hover .outline{border-color:var(--_hover-outline-color);color:var(--_hover-outline-color)}:hover .outline-start::before,:hover .outline-end::before,:hover .outline-panel-inactive,:hover .outline-panel-inactive::before,:hover .outline-panel-inactive::after{border-width:var(--_hover-outline-width)}.focused .outline{border-color:var(--_focus-outline-color);color:var(--_focus-outline-color)}.outline-start::after,.outline-end::after,.outline-panel-active,.outline-panel-active::before,.outline-panel-active::after{border-width:var(--_focus-outline-width)}.disabled .outline{border-color:var(--_disabled-outline-color);color:var(--_disabled-outline-color)}.disabled .outline-start,.disabled .outline-end,.disabled .outline-panel-inactive{opacity:var(--_disabled-outline-opacity)}.disabled .outline-start::before,.disabled .outline-end::before,.disabled .outline-panel-inactive,.disabled .outline-panel-inactive::before,.disabled .outline-panel-inactive::after{border-width:var(--_disabled-outline-width)}.error .outline{border-color:var(--_error-outline-color);color:var(--_error-outline-color)}.error:hover .outline{border-color:var(--_error-hover-outline-color);color:var(--_error-hover-outline-color)}.error.focused .outline{border-color:var(--_error-focus-outline-color);color:var(--_error-focus-outline-color)}.resizable .container{bottom:var(--_focus-outline-width);inset-inline-end:var(--_focus-outline-width);clip-path:inset(var(--_focus-outline-width) 0 0 var(--_focus-outline-width))}.resizable .container>*{top:var(--_focus-outline-width);inset-inline-start:var(--_focus-outline-width)}.resizable .container:dir(rtl){clip-path:inset(var(--_focus-outline-width) var(--_focus-outline-width) 0 0)}}@layer hcm{@media(forced-colors: active){.disabled .outline{border-color:GrayText;color:GrayText}.disabled :is(.outline-start,.outline-end,.outline-panel-inactive){opacity:1}}}
`
/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */,jc=n`:host{display:inline-flex;resize:both}.field{display:flex;flex:1;flex-direction:column;writing-mode:horizontal-tb;max-width:100%}.container-overflow{border-start-start-radius:var(--_container-shape-start-start);border-start-end-radius:var(--_container-shape-start-end);border-end-end-radius:var(--_container-shape-end-end);border-end-start-radius:var(--_container-shape-end-start);display:flex;height:100%;position:relative}.container{align-items:center;border-radius:inherit;display:flex;flex:1;max-height:100%;min-height:100%;min-width:min-content;position:relative}.field,.container-overflow{resize:inherit}.resizable:not(.disabled) .container{resize:inherit;overflow:hidden}.disabled{pointer-events:none}@layer styles{.start,.middle,.end{display:flex;box-sizing:border-box;height:100%;position:relative}.start{color:var(--_leading-content-color)}.end{color:var(--_trailing-content-color)}.start,.end{align-items:center;justify-content:center}.with-start .start,.with-end .end{min-width:48px}.with-start .start{margin-inline-end:4px}.with-end .end{margin-inline-start:4px}.middle{align-items:stretch;align-self:baseline;flex:1}.content{color:var(--_content-color);display:flex;flex:1;opacity:0;transition:opacity 83ms cubic-bezier(0.2, 0, 0, 1)}.no-label .content,.focused .content,.populated .content{opacity:1;transition-delay:67ms}:is(.disabled,.disable-transitions) .content{transition:none}.content ::slotted(*){all:unset;color:currentColor;font-family:var(--_content-font);font-size:var(--_content-size);line-height:var(--_content-line-height);font-weight:var(--_content-weight);width:100%;overflow-wrap:revert;white-space:revert}.content ::slotted(:not(textarea)){padding-top:var(--_top-space);padding-bottom:var(--_bottom-space)}.content ::slotted(textarea){margin-top:var(--_top-space);margin-bottom:var(--_bottom-space)}:hover .content{color:var(--_hover-content-color)}:hover .start{color:var(--_hover-leading-content-color)}:hover .end{color:var(--_hover-trailing-content-color)}.focused .content{color:var(--_focus-content-color)}.focused .start{color:var(--_focus-leading-content-color)}.focused .end{color:var(--_focus-trailing-content-color)}.disabled .content{color:var(--_disabled-content-color)}.disabled.no-label .content,.disabled.focused .content,.disabled.populated .content{opacity:var(--_disabled-content-opacity)}.disabled .start{color:var(--_disabled-leading-content-color);opacity:var(--_disabled-leading-content-opacity)}.disabled .end{color:var(--_disabled-trailing-content-color);opacity:var(--_disabled-trailing-content-opacity)}.error .content{color:var(--_error-content-color)}.error .start{color:var(--_error-leading-content-color)}.error .end{color:var(--_error-trailing-content-color)}.error:hover .content{color:var(--_error-hover-content-color)}.error:hover .start{color:var(--_error-hover-leading-content-color)}.error:hover .end{color:var(--_error-hover-trailing-content-color)}.error.focused .content{color:var(--_error-focus-content-color)}.error.focused .start{color:var(--_error-focus-leading-content-color)}.error.focused .end{color:var(--_error-focus-trailing-content-color)}}@layer hcm{@media(forced-colors: active){.disabled :is(.start,.content,.end){color:GrayText;opacity:1}}}@layer styles{.label{box-sizing:border-box;color:var(--_label-text-color);overflow:hidden;max-width:100%;text-overflow:ellipsis;white-space:nowrap;z-index:1;font-family:var(--_label-text-font);font-size:var(--_label-text-size);line-height:var(--_label-text-line-height);font-weight:var(--_label-text-weight);width:min-content}.label-wrapper{inset:0;pointer-events:none;position:absolute}.label.resting{position:absolute;top:var(--_top-space)}.label.floating{font-size:var(--_label-text-populated-size);line-height:var(--_label-text-populated-line-height);transform-origin:top left}.label.hidden{opacity:0}.no-label .label{display:none}.label-wrapper{inset:0;position:absolute;text-align:initial}:hover .label{color:var(--_hover-label-text-color)}.focused .label{color:var(--_focus-label-text-color)}.disabled .label{color:var(--_disabled-label-text-color)}.disabled .label:not(.hidden){opacity:var(--_disabled-label-text-opacity)}.error .label{color:var(--_error-label-text-color)}.error:hover .label{color:var(--_error-hover-label-text-color)}.error.focused .label{color:var(--_error-focus-label-text-color)}}@layer hcm{@media(forced-colors: active){.disabled .label:not(.hidden){color:GrayText;opacity:1}}}@layer styles{.supporting-text{color:var(--_supporting-text-color);display:flex;font-family:var(--_supporting-text-font);font-size:var(--_supporting-text-size);line-height:var(--_supporting-text-line-height);font-weight:var(--_supporting-text-weight);gap:16px;justify-content:space-between;padding-inline-start:var(--_supporting-text-leading-space);padding-inline-end:var(--_supporting-text-trailing-space);padding-top:var(--_supporting-text-top-space)}.supporting-text :nth-child(2){flex-shrink:0}:hover .supporting-text{color:var(--_hover-supporting-text-color)}.focus .supporting-text{color:var(--_focus-supporting-text-color)}.disabled .supporting-text{color:var(--_disabled-supporting-text-color);opacity:var(--_disabled-supporting-text-opacity)}.error .supporting-text{color:var(--_error-supporting-text-color)}.error:hover .supporting-text{color:var(--_error-hover-supporting-text-color)}.error.focus .supporting-text{color:var(--_error-focus-supporting-text-color)}}@layer hcm{@media(forced-colors: active){.disabled .supporting-text{color:GrayText;opacity:1}}}
`
/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */;let Gc=class extends Uc{};Gc.styles=[jc,Vc],Gc=bt([at("md-outlined-field")],Gc);
/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
const Hc=n`:host{--_caret-color:var(--md-outlined-text-field-caret-color, var(--md-sys-color-primary, #6750a4));--_disabled-input-text-color:var(--md-outlined-text-field-disabled-input-text-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-input-text-opacity:var(--md-outlined-text-field-disabled-input-text-opacity, 0.38);--_disabled-label-text-color:var(--md-outlined-text-field-disabled-label-text-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-label-text-opacity:var(--md-outlined-text-field-disabled-label-text-opacity, 0.38);--_disabled-leading-icon-color:var(--md-outlined-text-field-disabled-leading-icon-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-leading-icon-opacity:var(--md-outlined-text-field-disabled-leading-icon-opacity, 0.38);--_disabled-outline-color:var(--md-outlined-text-field-disabled-outline-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-outline-opacity:var(--md-outlined-text-field-disabled-outline-opacity, 0.12);--_disabled-outline-width:var(--md-outlined-text-field-disabled-outline-width, 1px);--_disabled-supporting-text-color:var(--md-outlined-text-field-disabled-supporting-text-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-supporting-text-opacity:var(--md-outlined-text-field-disabled-supporting-text-opacity, 0.38);--_disabled-trailing-icon-color:var(--md-outlined-text-field-disabled-trailing-icon-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-trailing-icon-opacity:var(--md-outlined-text-field-disabled-trailing-icon-opacity, 0.38);--_error-focus-caret-color:var(--md-outlined-text-field-error-focus-caret-color, var(--md-sys-color-error, #b3261e));--_error-focus-input-text-color:var(--md-outlined-text-field-error-focus-input-text-color, var(--md-sys-color-on-surface, #1d1b20));--_error-focus-label-text-color:var(--md-outlined-text-field-error-focus-label-text-color, var(--md-sys-color-error, #b3261e));--_error-focus-leading-icon-color:var(--md-outlined-text-field-error-focus-leading-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_error-focus-outline-color:var(--md-outlined-text-field-error-focus-outline-color, var(--md-sys-color-error, #b3261e));--_error-focus-supporting-text-color:var(--md-outlined-text-field-error-focus-supporting-text-color, var(--md-sys-color-error, #b3261e));--_error-focus-trailing-icon-color:var(--md-outlined-text-field-error-focus-trailing-icon-color, var(--md-sys-color-error, #b3261e));--_error-hover-input-text-color:var(--md-outlined-text-field-error-hover-input-text-color, var(--md-sys-color-on-surface, #1d1b20));--_error-hover-label-text-color:var(--md-outlined-text-field-error-hover-label-text-color, var(--md-sys-color-on-error-container, #410e0b));--_error-hover-leading-icon-color:var(--md-outlined-text-field-error-hover-leading-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_error-hover-outline-color:var(--md-outlined-text-field-error-hover-outline-color, var(--md-sys-color-on-error-container, #410e0b));--_error-hover-supporting-text-color:var(--md-outlined-text-field-error-hover-supporting-text-color, var(--md-sys-color-error, #b3261e));--_error-hover-trailing-icon-color:var(--md-outlined-text-field-error-hover-trailing-icon-color, var(--md-sys-color-on-error-container, #410e0b));--_error-input-text-color:var(--md-outlined-text-field-error-input-text-color, var(--md-sys-color-on-surface, #1d1b20));--_error-label-text-color:var(--md-outlined-text-field-error-label-text-color, var(--md-sys-color-error, #b3261e));--_error-leading-icon-color:var(--md-outlined-text-field-error-leading-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_error-outline-color:var(--md-outlined-text-field-error-outline-color, var(--md-sys-color-error, #b3261e));--_error-supporting-text-color:var(--md-outlined-text-field-error-supporting-text-color, var(--md-sys-color-error, #b3261e));--_error-trailing-icon-color:var(--md-outlined-text-field-error-trailing-icon-color, var(--md-sys-color-error, #b3261e));--_focus-input-text-color:var(--md-outlined-text-field-focus-input-text-color, var(--md-sys-color-on-surface, #1d1b20));--_focus-label-text-color:var(--md-outlined-text-field-focus-label-text-color, var(--md-sys-color-primary, #6750a4));--_focus-leading-icon-color:var(--md-outlined-text-field-focus-leading-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_focus-outline-color:var(--md-outlined-text-field-focus-outline-color, var(--md-sys-color-primary, #6750a4));--_focus-outline-width:var(--md-outlined-text-field-focus-outline-width, 3px);--_focus-supporting-text-color:var(--md-outlined-text-field-focus-supporting-text-color, var(--md-sys-color-on-surface-variant, #49454f));--_focus-trailing-icon-color:var(--md-outlined-text-field-focus-trailing-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_hover-input-text-color:var(--md-outlined-text-field-hover-input-text-color, var(--md-sys-color-on-surface, #1d1b20));--_hover-label-text-color:var(--md-outlined-text-field-hover-label-text-color, var(--md-sys-color-on-surface, #1d1b20));--_hover-leading-icon-color:var(--md-outlined-text-field-hover-leading-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_hover-outline-color:var(--md-outlined-text-field-hover-outline-color, var(--md-sys-color-on-surface, #1d1b20));--_hover-outline-width:var(--md-outlined-text-field-hover-outline-width, 1px);--_hover-supporting-text-color:var(--md-outlined-text-field-hover-supporting-text-color, var(--md-sys-color-on-surface-variant, #49454f));--_hover-trailing-icon-color:var(--md-outlined-text-field-hover-trailing-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_input-text-color:var(--md-outlined-text-field-input-text-color, var(--md-sys-color-on-surface, #1d1b20));--_input-text-font:var(--md-outlined-text-field-input-text-font, var(--md-sys-typescale-body-large-font, var(--md-ref-typeface-plain, Roboto)));--_input-text-line-height:var(--md-outlined-text-field-input-text-line-height, var(--md-sys-typescale-body-large-line-height, 1.5rem));--_input-text-placeholder-color:var(--md-outlined-text-field-input-text-placeholder-color, var(--md-sys-color-on-surface-variant, #49454f));--_input-text-prefix-color:var(--md-outlined-text-field-input-text-prefix-color, var(--md-sys-color-on-surface-variant, #49454f));--_input-text-size:var(--md-outlined-text-field-input-text-size, var(--md-sys-typescale-body-large-size, 1rem));--_input-text-suffix-color:var(--md-outlined-text-field-input-text-suffix-color, var(--md-sys-color-on-surface-variant, #49454f));--_input-text-weight:var(--md-outlined-text-field-input-text-weight, var(--md-sys-typescale-body-large-weight, var(--md-ref-typeface-weight-regular, 400)));--_label-text-color:var(--md-outlined-text-field-label-text-color, var(--md-sys-color-on-surface-variant, #49454f));--_label-text-font:var(--md-outlined-text-field-label-text-font, var(--md-sys-typescale-body-large-font, var(--md-ref-typeface-plain, Roboto)));--_label-text-line-height:var(--md-outlined-text-field-label-text-line-height, var(--md-sys-typescale-body-large-line-height, 1.5rem));--_label-text-populated-line-height:var(--md-outlined-text-field-label-text-populated-line-height, var(--md-sys-typescale-body-small-line-height, 1rem));--_label-text-populated-size:var(--md-outlined-text-field-label-text-populated-size, var(--md-sys-typescale-body-small-size, 0.75rem));--_label-text-size:var(--md-outlined-text-field-label-text-size, var(--md-sys-typescale-body-large-size, 1rem));--_label-text-weight:var(--md-outlined-text-field-label-text-weight, var(--md-sys-typescale-body-large-weight, var(--md-ref-typeface-weight-regular, 400)));--_leading-icon-color:var(--md-outlined-text-field-leading-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_leading-icon-size:var(--md-outlined-text-field-leading-icon-size, 24px);--_outline-color:var(--md-outlined-text-field-outline-color, var(--md-sys-color-outline, #79747e));--_outline-width:var(--md-outlined-text-field-outline-width, 1px);--_supporting-text-color:var(--md-outlined-text-field-supporting-text-color, var(--md-sys-color-on-surface-variant, #49454f));--_supporting-text-font:var(--md-outlined-text-field-supporting-text-font, var(--md-sys-typescale-body-small-font, var(--md-ref-typeface-plain, Roboto)));--_supporting-text-line-height:var(--md-outlined-text-field-supporting-text-line-height, var(--md-sys-typescale-body-small-line-height, 1rem));--_supporting-text-size:var(--md-outlined-text-field-supporting-text-size, var(--md-sys-typescale-body-small-size, 0.75rem));--_supporting-text-weight:var(--md-outlined-text-field-supporting-text-weight, var(--md-sys-typescale-body-small-weight, var(--md-ref-typeface-weight-regular, 400)));--_trailing-icon-color:var(--md-outlined-text-field-trailing-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_trailing-icon-size:var(--md-outlined-text-field-trailing-icon-size, 24px);--_container-shape-start-start:var(--md-outlined-text-field-container-shape-start-start, var(--md-outlined-text-field-container-shape, var(--md-sys-shape-corner-extra-small, 4px)));--_container-shape-start-end:var(--md-outlined-text-field-container-shape-start-end, var(--md-outlined-text-field-container-shape, var(--md-sys-shape-corner-extra-small, 4px)));--_container-shape-end-end:var(--md-outlined-text-field-container-shape-end-end, var(--md-outlined-text-field-container-shape, var(--md-sys-shape-corner-extra-small, 4px)));--_container-shape-end-start:var(--md-outlined-text-field-container-shape-end-start, var(--md-outlined-text-field-container-shape, var(--md-sys-shape-corner-extra-small, 4px)));--_leading-space:var(--md-outlined-text-field-leading-space, 16px);--_trailing-space:var(--md-outlined-text-field-trailing-space, 16px);--_top-space:var(--md-outlined-text-field-top-space, 16px);--_bottom-space:var(--md-outlined-text-field-bottom-space, 16px);--_input-text-prefix-trailing-space:var(--md-outlined-text-field-input-text-prefix-trailing-space, 2px);--_input-text-suffix-leading-space:var(--md-outlined-text-field-input-text-suffix-leading-space, 2px);--_focus-caret-color:var(--md-outlined-text-field-focus-caret-color, var(--md-sys-color-primary, #6750a4));--md-outlined-field-bottom-space:var(--_bottom-space);--md-outlined-field-container-shape-end-end:var(--_container-shape-end-end);--md-outlined-field-container-shape-end-start:var(--_container-shape-end-start);--md-outlined-field-container-shape-start-end:var(--_container-shape-start-end);--md-outlined-field-container-shape-start-start:var(--_container-shape-start-start);--md-outlined-field-content-color:var(--_input-text-color);--md-outlined-field-content-font:var(--_input-text-font);--md-outlined-field-content-line-height:var(--_input-text-line-height);--md-outlined-field-content-size:var(--_input-text-size);--md-outlined-field-content-weight:var(--_input-text-weight);--md-outlined-field-disabled-content-color:var(--_disabled-input-text-color);--md-outlined-field-disabled-content-opacity:var(--_disabled-input-text-opacity);--md-outlined-field-disabled-label-text-color:var(--_disabled-label-text-color);--md-outlined-field-disabled-label-text-opacity:var(--_disabled-label-text-opacity);--md-outlined-field-disabled-leading-content-color:var(--_disabled-leading-icon-color);--md-outlined-field-disabled-leading-content-opacity:var(--_disabled-leading-icon-opacity);--md-outlined-field-disabled-outline-color:var(--_disabled-outline-color);--md-outlined-field-disabled-outline-opacity:var(--_disabled-outline-opacity);--md-outlined-field-disabled-outline-width:var(--_disabled-outline-width);--md-outlined-field-disabled-supporting-text-color:var(--_disabled-supporting-text-color);--md-outlined-field-disabled-supporting-text-opacity:var(--_disabled-supporting-text-opacity);--md-outlined-field-disabled-trailing-content-color:var(--_disabled-trailing-icon-color);--md-outlined-field-disabled-trailing-content-opacity:var(--_disabled-trailing-icon-opacity);--md-outlined-field-error-content-color:var(--_error-input-text-color);--md-outlined-field-error-focus-content-color:var(--_error-focus-input-text-color);--md-outlined-field-error-focus-label-text-color:var(--_error-focus-label-text-color);--md-outlined-field-error-focus-leading-content-color:var(--_error-focus-leading-icon-color);--md-outlined-field-error-focus-outline-color:var(--_error-focus-outline-color);--md-outlined-field-error-focus-supporting-text-color:var(--_error-focus-supporting-text-color);--md-outlined-field-error-focus-trailing-content-color:var(--_error-focus-trailing-icon-color);--md-outlined-field-error-hover-content-color:var(--_error-hover-input-text-color);--md-outlined-field-error-hover-label-text-color:var(--_error-hover-label-text-color);--md-outlined-field-error-hover-leading-content-color:var(--_error-hover-leading-icon-color);--md-outlined-field-error-hover-outline-color:var(--_error-hover-outline-color);--md-outlined-field-error-hover-supporting-text-color:var(--_error-hover-supporting-text-color);--md-outlined-field-error-hover-trailing-content-color:var(--_error-hover-trailing-icon-color);--md-outlined-field-error-label-text-color:var(--_error-label-text-color);--md-outlined-field-error-leading-content-color:var(--_error-leading-icon-color);--md-outlined-field-error-outline-color:var(--_error-outline-color);--md-outlined-field-error-supporting-text-color:var(--_error-supporting-text-color);--md-outlined-field-error-trailing-content-color:var(--_error-trailing-icon-color);--md-outlined-field-focus-content-color:var(--_focus-input-text-color);--md-outlined-field-focus-label-text-color:var(--_focus-label-text-color);--md-outlined-field-focus-leading-content-color:var(--_focus-leading-icon-color);--md-outlined-field-focus-outline-color:var(--_focus-outline-color);--md-outlined-field-focus-outline-width:var(--_focus-outline-width);--md-outlined-field-focus-supporting-text-color:var(--_focus-supporting-text-color);--md-outlined-field-focus-trailing-content-color:var(--_focus-trailing-icon-color);--md-outlined-field-hover-content-color:var(--_hover-input-text-color);--md-outlined-field-hover-label-text-color:var(--_hover-label-text-color);--md-outlined-field-hover-leading-content-color:var(--_hover-leading-icon-color);--md-outlined-field-hover-outline-color:var(--_hover-outline-color);--md-outlined-field-hover-outline-width:var(--_hover-outline-width);--md-outlined-field-hover-supporting-text-color:var(--_hover-supporting-text-color);--md-outlined-field-hover-trailing-content-color:var(--_hover-trailing-icon-color);--md-outlined-field-label-text-color:var(--_label-text-color);--md-outlined-field-label-text-font:var(--_label-text-font);--md-outlined-field-label-text-line-height:var(--_label-text-line-height);--md-outlined-field-label-text-populated-line-height:var(--_label-text-populated-line-height);--md-outlined-field-label-text-populated-size:var(--_label-text-populated-size);--md-outlined-field-label-text-size:var(--_label-text-size);--md-outlined-field-label-text-weight:var(--_label-text-weight);--md-outlined-field-leading-content-color:var(--_leading-icon-color);--md-outlined-field-leading-space:var(--_leading-space);--md-outlined-field-outline-color:var(--_outline-color);--md-outlined-field-outline-width:var(--_outline-width);--md-outlined-field-supporting-text-color:var(--_supporting-text-color);--md-outlined-field-supporting-text-font:var(--_supporting-text-font);--md-outlined-field-supporting-text-line-height:var(--_supporting-text-line-height);--md-outlined-field-supporting-text-size:var(--_supporting-text-size);--md-outlined-field-supporting-text-weight:var(--_supporting-text-weight);--md-outlined-field-top-space:var(--_top-space);--md-outlined-field-trailing-content-color:var(--_trailing-icon-color);--md-outlined-field-trailing-space:var(--_trailing-space)}`
/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */,qc={},Wc=Gt(class extends Ht{constructor(t){if(super(t),t.type!==Vt&&t.type!==Bt&&t.type!==jt)throw Error("The `live` directive is not allowed on child or event bindings");if(!(t=>void 0===t.strings)(t))throw Error("`live` bindings can only contain a single expression")}render(t){return t}update(t,[e]){if(e===V||e===j)return e;const i=t.element,r=t.name;if(t.type===Vt){if(e===i[r])return V}else if(t.type===jt){if(!!e===i.hasAttribute(r))return V}else if(t.type===Bt&&i.getAttribute(r)===e+"")return V;return((t,e=qc)=>{t._$AH=e;
/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */})(t),e}}),Yc={fromAttribute:t=>t??"",toAttribute:t=>t||null},Xc=Symbol("onReportValidity"),Jc=Symbol("privateCleanupFormListeners"),Qc=Symbol("privateDoNotReportInvalid"),Kc=Symbol("privateIsSelfReportingValidity"),Zc=Symbol("privateCallOnReportValidity");function td(t){var e,i,r;class o extends t{constructor(...t){super(...t),this[e]=new AbortController,this[i]=!1,this[r]=!1,this.addEventListener("invalid",(t=>{!this[Qc]&&t.isTrusted&&this.addEventListener("invalid",(()=>{this[Zc](t)}),{once:!0})}),{capture:!0})}checkValidity(){this[Qc]=!0;const t=super.checkValidity();return this[Qc]=!1,t}reportValidity(){this[Kc]=!0;const t=super.reportValidity();return t&&this[Zc](null),this[Kc]=!1,t}[(e=Jc,i=Qc,r=Kc,Zc)](t){const e=t?.defaultPrevented;if(e)return;this[Xc](t);!e&&t?.defaultPrevented&&(this[Kc]||function(t,e){if(!t)return!0;let i;for(const e of t.elements)if(e.matches(":invalid")){i=e;break}return i===e}
/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */(this[Ue].form,this))&&this.focus()}[Xc](t){throw new Error("Implement [onReportValidity]")}formAssociatedCallback(t){super.formAssociatedCallback&&super.formAssociatedCallback(t),this[Jc].abort(),t&&(this[Jc]=new AbortController,function(t,e,i,r){const o=function(t){if(!ed.has(t)){const e=new EventTarget;ed.set(t,e);for(const i of["reportValidity","requestSubmit"]){const r=t[i];t[i]=function(){e.dispatchEvent(new Event("before"));const t=Reflect.apply(r,this,arguments);return e.dispatchEvent(new Event("after")),t}}}return ed.get(t)}(e);let n,s=!1,a=!1;o.addEventListener("before",(()=>{a=!0,n=new AbortController,s=!1,t.addEventListener("invalid",(()=>{s=!0}),{signal:n.signal})}),{signal:r}),o.addEventListener("after",(()=>{a=!1,n?.abort(),s||i()}),{signal:r}),e.addEventListener("submit",(()=>{a||i()}),{signal:r})}(this,t,(()=>{this[Zc](null)}),this[Jc].signal))}}return o}const ed=new WeakMap;class id extends an{computeValidity({state:t,renderedControl:e}){let i=e;rd(t)&&!i?(i=this.inputControl||document.createElement("input"),this.inputControl=i):i||(i=this.textAreaControl||document.createElement("textarea"),this.textAreaControl=i);const r=rd(t)?i:null;if(r&&(r.type=t.type),i.value!==t.value&&(i.value=t.value),i.required=t.required,r){const e=t;e.pattern?r.pattern=e.pattern:r.removeAttribute("pattern"),e.min?r.min=e.min:r.removeAttribute("min"),e.max?r.max=e.max:r.removeAttribute("max"),e.step?r.step=e.step:r.removeAttribute("step")}return(t.minLength??-1)>-1?i.setAttribute("minlength",String(t.minLength)):i.removeAttribute("minlength"),(t.maxLength??-1)>-1?i.setAttribute("maxlength",String(t.maxLength)):i.removeAttribute("maxlength"),{validity:i.validity,validationMessage:i.validationMessage}}equals({state:t},{state:e}){const i=t.type===e.type&&t.value===e.value&&t.required===e.required&&t.minLength===e.minLength&&t.maxLength===e.maxLength;return rd(t)&&rd(e)?i&&t.pattern===e.pattern&&t.min===e.min&&t.max===e.max&&t.step===e.step:i}copy({state:t}){return{state:rd(t)?this.copyInput(t):this.copyTextArea(t),renderedControl:null}}copyInput(t){const{type:e,pattern:i,min:r,max:o,step:n}=t;return{...this.copySharedState(t),type:e,pattern:i,min:r,max:o,step:n}}copyTextArea(t){return{...this.copySharedState(t),type:t.type}}copySharedState({value:t,required:e,minLength:i,maxLength:r}){return{value:t,required:e,minLength:i,maxLength:r}}}function rd(t){return"textarea"!==t.type}
/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const od=td(rn(sn(je(nt))));class nd extends od{constructor(){super(...arguments),this.error=!1,this.errorText="",this.label="",this.noAsterisk=!1,this.required=!1,this.value="",this.prefixText="",this.suffixText="",this.hasLeadingIcon=!1,this.hasTrailingIcon=!1,this.supportingText="",this.textDirection="",this.rows=2,this.cols=20,this.inputMode="",this.max="",this.maxLength=-1,this.min="",this.minLength=-1,this.noSpinner=!1,this.pattern="",this.placeholder="",this.readOnly=!1,this.multiple=!1,this.step="",this.type="text",this.autocomplete="",this.dirty=!1,this.focused=!1,this.nativeError=!1,this.nativeErrorText=""}get selectionDirection(){return this.getInputOrTextarea().selectionDirection}set selectionDirection(t){this.getInputOrTextarea().selectionDirection=t}get selectionEnd(){return this.getInputOrTextarea().selectionEnd}set selectionEnd(t){this.getInputOrTextarea().selectionEnd=t}get selectionStart(){return this.getInputOrTextarea().selectionStart}set selectionStart(t){this.getInputOrTextarea().selectionStart=t}get valueAsNumber(){const t=this.getInput();return t?t.valueAsNumber:NaN}set valueAsNumber(t){const e=this.getInput();e&&(e.valueAsNumber=t,this.value=e.value)}get valueAsDate(){const t=this.getInput();return t?t.valueAsDate:null}set valueAsDate(t){const e=this.getInput();e&&(e.valueAsDate=t,this.value=e.value)}get hasError(){return this.error||this.nativeError}select(){this.getInputOrTextarea().select()}setRangeText(...t){this.getInputOrTextarea().setRangeText(...t),this.value=this.getInputOrTextarea().value}setSelectionRange(t,e,i){this.getInputOrTextarea().setSelectionRange(t,e,i)}stepDown(t){const e=this.getInput();e&&(e.stepDown(t),this.value=e.value)}stepUp(t){const e=this.getInput();e&&(e.stepUp(t),this.value=e.value)}reset(){this.dirty=!1,this.value=this.getAttribute("value")??"",this.nativeError=!1,this.nativeErrorText=""}attributeChangedCallback(t,e,i){"value"===t&&this.dirty||super.attributeChangedCallback(t,e,i)}render(){const t={disabled:this.disabled,error:!this.disabled&&this.hasError,textarea:"textarea"===this.type,"no-spinner":this.noSpinner};return U` <span class="text-field ${qt(t)}"> ${this.renderField()} </span> `}updated(t){const e=this.getInputOrTextarea().value;this.value!==e&&(this.value=e)}renderField(){return xe`<${this.fieldTag}
      class="field"
      count=${this.value.length}
      ?disabled=${this.disabled}
      ?error=${this.hasError}
      error-text=${this.getErrorText()}
      ?focused=${this.focused}
      ?has-end=${this.hasTrailingIcon}
      ?has-start=${this.hasLeadingIcon}
      label=${this.label}
      ?no-asterisk=${this.noAsterisk}
      max=${this.maxLength}
      ?populated=${!!this.value}
      ?required=${this.required}
      ?resizable=${"textarea"===this.type}
      supporting-text=${this.supportingText}
    >
      ${this.renderLeadingIcon()}
      ${this.renderInputOrTextarea()}
      ${this.renderTrailingIcon()}
      <div id="description" slot="aria-describedby"></div>
    </${this.fieldTag}>`}renderLeadingIcon(){return U` <span class="icon leading" slot="start"> <slot name="leading-icon" @slotchange="${this.handleIconChange}"></slot> </span> `}renderTrailingIcon(){return U` <span class="icon trailing" slot="end"> <slot name="trailing-icon" @slotchange="${this.handleIconChange}"></slot> </span> `}renderInputOrTextarea(){const t={direction:this.textDirection},e=this.ariaLabel||this.label||j,i=this.autocomplete,r=(this.maxLength??-1)>-1,o=(this.minLength??-1)>-1;if("textarea"===this.type)return U` <textarea class="input" style="${yr(t)}" aria-describedby="description" aria-invalid="${this.hasError}" aria-label="${e}" autocomplete="${i||j}" name="${this.name||j}" ?disabled="${this.disabled}" maxlength="${r?this.maxLength:j}" minlength="${o?this.minLength:j}" placeholder="${this.placeholder||j}" ?readonly="${this.readOnly}" ?required="${this.required}" rows="${this.rows}" cols="${this.cols}" .value="${Wc(this.value)}" @change="${this.redispatchEvent}" @focus="${this.handleFocusChange}" @blur="${this.handleFocusChange}" @input="${this.handleInput}" @select="${this.redispatchEvent}"></textarea> `;const n=this.renderPrefix(),s=this.renderSuffix(),a=this.inputMode;return U` <div class="input-wrapper"> ${n} <input class="input" style="${yr(t)}" aria-describedby="description" aria-invalid="${this.hasError}" aria-label="${e}" autocomplete="${i||j}" name="${this.name||j}" ?disabled="${this.disabled}" inputmode="${a||j}" max="${this.max||j}" maxlength="${r?this.maxLength:j}" min="${this.min||j}" minlength="${o?this.minLength:j}" pattern="${this.pattern||j}" placeholder="${this.placeholder||j}" ?readonly="${this.readOnly}" ?required="${this.required}" ?multiple="${this.multiple}" step="${this.step||j}" type="${this.type}" .value="${Wc(this.value)}" @change="${this.redispatchEvent}" @focus="${this.handleFocusChange}" @blur="${this.handleFocusChange}" @input="${this.handleInput}" @select="${this.redispatchEvent}"> ${s} </div> `}renderPrefix(){return this.renderAffix(this.prefixText,!1)}renderSuffix(){return this.renderAffix(this.suffixText,!0)}renderAffix(t,e){if(!t)return j;return U`<span class="${qt({suffix:e,prefix:!e})}">${t}</span>`}getErrorText(){return this.error?this.errorText:this.nativeErrorText}handleFocusChange(){this.focused=this.inputOrTextarea?.matches(":focus")??!1}handleInput(t){this.dirty=!0,this.value=t.target.value}redispatchEvent(t){Jo(this,t)}getInputOrTextarea(){return this.inputOrTextarea||(this.connectedCallback(),this.scheduleUpdate()),this.isUpdatePending&&this.scheduleUpdate(),this.inputOrTextarea}getInput(){return"textarea"===this.type?null:this.getInputOrTextarea()}handleIconChange(){this.hasLeadingIcon=this.leadingIcons.length>0,this.hasTrailingIcon=this.trailingIcons.length>0}[on](){return this.value}formResetCallback(){this.reset()}formStateRestoreCallback(t){this.value=t}focus(){this.getInputOrTextarea().focus()}[Qo](){return new id((()=>({state:this,renderedControl:this.inputOrTextarea})))}[Ko](){return this.inputOrTextarea}[Xc](t){t?.preventDefault();const e=this.getErrorText();this.nativeError=!!t,this.nativeErrorText=this.validationMessage,e===this.getErrorText()&&this.field?.reannounceError()}}Tt(nd),nd.shadowRootOptions={...nt.shadowRootOptions,delegatesFocus:!0},bt([dt({type:Boolean,reflect:!0})],nd.prototype,"error",void 0),bt([dt({attribute:"error-text"})],nd.prototype,"errorText",void 0),bt([dt()],nd.prototype,"label",void 0),bt([dt({type:Boolean,attribute:"no-asterisk"})],nd.prototype,"noAsterisk",void 0),bt([dt({type:Boolean,reflect:!0})],nd.prototype,"required",void 0),bt([dt()],nd.prototype,"value",void 0),bt([dt({attribute:"prefix-text"})],nd.prototype,"prefixText",void 0),bt([dt({attribute:"suffix-text"})],nd.prototype,"suffixText",void 0),bt([dt({type:Boolean,attribute:"has-leading-icon"})],nd.prototype,"hasLeadingIcon",void 0),bt([dt({type:Boolean,attribute:"has-trailing-icon"})],nd.prototype,"hasTrailingIcon",void 0),bt([dt({attribute:"supporting-text"})],nd.prototype,"supportingText",void 0),bt([dt({attribute:"text-direction"})],nd.prototype,"textDirection",void 0),bt([dt({type:Number})],nd.prototype,"rows",void 0),bt([dt({type:Number})],nd.prototype,"cols",void 0),bt([dt({reflect:!0})],nd.prototype,"inputMode",void 0),bt([dt()],nd.prototype,"max",void 0),bt([dt({type:Number})],nd.prototype,"maxLength",void 0),bt([dt()],nd.prototype,"min",void 0),bt([dt({type:Number})],nd.prototype,"minLength",void 0),bt([dt({type:Boolean,attribute:"no-spinner"})],nd.prototype,"noSpinner",void 0),bt([dt()],nd.prototype,"pattern",void 0),bt([dt({reflect:!0,converter:Yc})],nd.prototype,"placeholder",void 0),bt([dt({type:Boolean,reflect:!0})],nd.prototype,"readOnly",void 0),bt([dt({type:Boolean,reflect:!0})],nd.prototype,"multiple",void 0),bt([dt()],nd.prototype,"step",void 0),bt([dt({reflect:!0})],nd.prototype,"type",void 0),bt([dt({reflect:!0})],nd.prototype,"autocomplete",void 0),bt([ht()],nd.prototype,"dirty",void 0),bt([ht()],nd.prototype,"focused",void 0),bt([ht()],nd.prototype,"nativeError",void 0),bt([ht()],nd.prototype,"nativeErrorText",void 0),bt([pt(".input")],nd.prototype,"inputOrTextarea",void 0),bt([pt(".field")],nd.prototype,"field",void 0),bt([mt({slot:"leading-icon"})],nd.prototype,"leadingIcons",void 0),bt([mt({slot:"trailing-icon"})],nd.prototype,"trailingIcons",void 0);
/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
class sd extends nd{constructor(){super(...arguments),this.fieldTag=be`md-outlined-field`}}
/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ad=n`:host{display:inline-flex;outline:0;resize:both;text-align:start;-webkit-tap-highlight-color:transparent}.field,.text-field{width:100%}.text-field{display:inline-flex}.field{cursor:text}.disabled .field{cursor:default}.text-field,.textarea .field{resize:inherit}.icon{color:currentColor;display:flex;fill:currentColor}.icon ::slotted(*){display:flex}[hasstart] .icon.leading{font-size:var(--_leading-icon-size);height:var(--_leading-icon-size);width:var(--_leading-icon-size)}[hasend] .icon.trailing{font-size:var(--_trailing-icon-size);height:var(--_trailing-icon-size);width:var(--_trailing-icon-size)}.input-wrapper{display:flex}.input-wrapper>*{all:inherit;padding:0}.input{caret-color:var(--_caret-color);overflow-x:hidden;text-align:inherit}.input::placeholder{color:currentColor;opacity:1}.input::-webkit-calendar-picker-indicator{display:none}.input::-webkit-search-cancel-button,.input::-webkit-search-decoration{display:none}@media(forced-colors:active){.input{background:0 0}}.no-spinner .input::-webkit-inner-spin-button,.no-spinner .input::-webkit-outer-spin-button{display:none}.no-spinner .input[type=number]{-moz-appearance:textfield}:focus-within .input{caret-color:var(--_focus-caret-color)}.error:focus-within .input{caret-color:var(--_error-focus-caret-color)}.text-field:not(.disabled) .prefix{color:var(--_input-text-prefix-color)}.text-field:not(.disabled) .suffix{color:var(--_input-text-suffix-color)}.text-field:not(.disabled) .input::placeholder{color:var(--_input-text-placeholder-color)}.prefix,.suffix{text-wrap:nowrap;width:min-content}.prefix{padding-inline-end:var(--_input-text-prefix-trailing-space)}.suffix{padding-inline-start:var(--_input-text-suffix-leading-space)}`
/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */;let ld=class extends sd{constructor(){super(...arguments),this.fieldTag=be`md-outlined-field`}};ld.styles=[ad,Hc],ld=bt([at("md-outlined-text-field")],ld);
/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
class cd extends fn{renderElevationOrOutline(){return U`<md-elevation part="elevation"></md-elevation>`}}
/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const dd=n`:host{--_container-color:var(--md-filled-tonal-button-container-color, var(--md-sys-color-secondary-container, #e8def8));--_container-elevation:var(--md-filled-tonal-button-container-elevation, 0);--_container-height:var(--md-filled-tonal-button-container-height, 40px);--_container-shadow-color:var(--md-filled-tonal-button-container-shadow-color, var(--md-sys-color-shadow, #000));--_disabled-container-color:var(--md-filled-tonal-button-disabled-container-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-container-elevation:var(--md-filled-tonal-button-disabled-container-elevation, 0);--_disabled-container-opacity:var(--md-filled-tonal-button-disabled-container-opacity, 0.12);--_disabled-label-text-color:var(--md-filled-tonal-button-disabled-label-text-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-label-text-opacity:var(--md-filled-tonal-button-disabled-label-text-opacity, 0.38);--_focus-container-elevation:var(--md-filled-tonal-button-focus-container-elevation, 0);--_focus-label-text-color:var(--md-filled-tonal-button-focus-label-text-color, var(--md-sys-color-on-secondary-container, #1d192b));--_hover-container-elevation:var(--md-filled-tonal-button-hover-container-elevation, 1);--_hover-label-text-color:var(--md-filled-tonal-button-hover-label-text-color, var(--md-sys-color-on-secondary-container, #1d192b));--_hover-state-layer-color:var(--md-filled-tonal-button-hover-state-layer-color, var(--md-sys-color-on-secondary-container, #1d192b));--_hover-state-layer-opacity:var(--md-filled-tonal-button-hover-state-layer-opacity, 0.08);--_label-text-color:var(--md-filled-tonal-button-label-text-color, var(--md-sys-color-on-secondary-container, #1d192b));--_label-text-font:var(--md-filled-tonal-button-label-text-font, var(--md-sys-typescale-label-large-font, var(--md-ref-typeface-plain, Roboto)));--_label-text-line-height:var(--md-filled-tonal-button-label-text-line-height, var(--md-sys-typescale-label-large-line-height, 1.25rem));--_label-text-size:var(--md-filled-tonal-button-label-text-size, var(--md-sys-typescale-label-large-size, 0.875rem));--_label-text-weight:var(--md-filled-tonal-button-label-text-weight, var(--md-sys-typescale-label-large-weight, var(--md-ref-typeface-weight-medium, 500)));--_pressed-container-elevation:var(--md-filled-tonal-button-pressed-container-elevation, 0);--_pressed-label-text-color:var(--md-filled-tonal-button-pressed-label-text-color, var(--md-sys-color-on-secondary-container, #1d192b));--_pressed-state-layer-color:var(--md-filled-tonal-button-pressed-state-layer-color, var(--md-sys-color-on-secondary-container, #1d192b));--_pressed-state-layer-opacity:var(--md-filled-tonal-button-pressed-state-layer-opacity, 0.12);--_disabled-icon-color:var(--md-filled-tonal-button-disabled-icon-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-icon-opacity:var(--md-filled-tonal-button-disabled-icon-opacity, 0.38);--_focus-icon-color:var(--md-filled-tonal-button-focus-icon-color, var(--md-sys-color-on-secondary-container, #1d192b));--_hover-icon-color:var(--md-filled-tonal-button-hover-icon-color, var(--md-sys-color-on-secondary-container, #1d192b));--_icon-color:var(--md-filled-tonal-button-icon-color, var(--md-sys-color-on-secondary-container, #1d192b));--_icon-size:var(--md-filled-tonal-button-icon-size, 18px);--_pressed-icon-color:var(--md-filled-tonal-button-pressed-icon-color, var(--md-sys-color-on-secondary-container, #1d192b));--_container-shape-start-start:var(--md-filled-tonal-button-container-shape-start-start, var(--md-filled-tonal-button-container-shape, var(--md-sys-shape-corner-full, 9999px)));--_container-shape-start-end:var(--md-filled-tonal-button-container-shape-start-end, var(--md-filled-tonal-button-container-shape, var(--md-sys-shape-corner-full, 9999px)));--_container-shape-end-end:var(--md-filled-tonal-button-container-shape-end-end, var(--md-filled-tonal-button-container-shape, var(--md-sys-shape-corner-full, 9999px)));--_container-shape-end-start:var(--md-filled-tonal-button-container-shape-end-start, var(--md-filled-tonal-button-container-shape, var(--md-sys-shape-corner-full, 9999px)));--_leading-space:var(--md-filled-tonal-button-leading-space, 24px);--_trailing-space:var(--md-filled-tonal-button-trailing-space, 24px);--_with-leading-icon-leading-space:var(--md-filled-tonal-button-with-leading-icon-leading-space, 16px);--_with-leading-icon-trailing-space:var(--md-filled-tonal-button-with-leading-icon-trailing-space, 24px);--_with-trailing-icon-leading-space:var(--md-filled-tonal-button-with-trailing-icon-leading-space, 24px);--_with-trailing-icon-trailing-space:var(--md-filled-tonal-button-with-trailing-icon-trailing-space, 16px)}`
/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */,hd=n`md-elevation{transition-duration:280ms}:host([disabled]) md-elevation{transition:none}md-elevation{--md-elevation-level:var(--_container-elevation);--md-elevation-shadow-color:var(--_container-shadow-color)}:host(:focus-within) md-elevation{--md-elevation-level:var(--_focus-container-elevation)}:host(:hover) md-elevation{--md-elevation-level:var(--_hover-container-elevation)}:host(:active) md-elevation{--md-elevation-level:var(--_pressed-container-elevation)}:host([disabled]) md-elevation{--md-elevation-level:var(--_disabled-container-elevation)}`
/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */;let ud=class extends cd{};ud.styles=[vn,hd,dd],ud=bt([at("md-filled-tonal-button")],ud);const{round:pd,floor:fd,PI:md}=Math,gd=function(t){return t%360+(t<0?360:0)},vd=function(t,e){return e*pd(t/e)},bd=function(t){return 180*t/md%360},yd=function(t,e){return(t=(e=e||!1)?t:t%360)*md/180},xd=function(t,e){if(void 0===e)e=void 0===t?1:t,t=0;else if(e<t){const i=t;t=e,e=i}return fd(Math.random()*(e-t+1)+t)},{cos:wd,sin:_d,atan2:kd}=Math,Cd=function(t,e){var i=yd(t.y),r=yd(e.y),o=t.x,n=e.x,s=yd(n-o),a=_d(s)*wd(r),l=wd(i)*_d(r)-_d(i)*wd(r)*wd(s),c=bd(kd(a,l))-22.5;return c<0&&(c+=360),["NE","E","SE","S","SW","W","NW","N"][c=parseInt(c/45)]},Ad=function(t,e){var i=t.x,r=t.y;return(i-=e.x)*i+(r-=e.y)*r},Sd=function(t,e){return Math.sqrt(Ad(t,e))},Td={Point:1,Line:2,Ellipse:3,Rect:4,Polyline:5,Polygon:6,Curve:7,Path:8},{abs:Pd,cos:Ed,sin:Id,sqrt:Ld,min:Od,max:Rd,atan2:$d,round:Md,pow:Nd,PI:Dd}=Math,zd=function(t,e){if(!(this instanceof zd))return new zd(t,e);if("string"==typeof t){var i=t.split(-1===t.indexOf("@")?" ":"@");t=parseFloat(i[0]),e=parseFloat(i[1])}else Object(t)===t&&(e=t.y,t=t.x);this.x=void 0===t?0:t,this.y=void 0===e?0:e};zd.fromPolar=function(t,e,i){i=new zd(i);var r=Pd(t*Ed(e)),o=Pd(t*Id(e)),n=gd(bd(e));return n<90?o=-o:n<180?(r=-r,o=-o):n<270&&(r=-r),new zd(i.x+r,i.y+o)},zd.random=function(t,e,i,r){return new zd(xd(t,e),xd(i,r))},zd.prototype={type:Td.Point,chooseClosest:function(t){var e=t.length;if(1===e)return new zd(t[0]);for(var i=null,r=1/0,o=0;o<e;o++){var n=new zd(t[o]),s=this.squaredDistance(n);s<r&&(i=n,r=s)}return i},adhereToRect:function(t){return t.containsPoint(this)||(this.x=Od(Rd(this.x,t.x),t.x+t.width),this.y=Od(Rd(this.y,t.y),t.y+t.height)),this},angleBetween:function(t,e){var i=this.equals(t)||this.equals(e)?NaN:this.theta(e)-this.theta(t);return i<0&&(i+=360),i},bearing:function(t){return Cd(this,t)},changeInAngle:function(t,e,i){return this.clone().offset(-t,-e).theta(i)-this.theta(i)},clone:function(){return new zd(this)},cross:function(t,e){return t&&e?(e.x-this.x)*(t.y-this.y)-(e.y-this.y)*(t.x-this.x):NaN},difference:function(t,e){return Object(t)===t&&(e=t.y,t=t.x),new zd(this.x-(t||0),this.y-(e||0))},distance:function(t){return Sd(this,t)},dot:function(t){return t?this.x*t.x+this.y*t.y:NaN},equals:function(t){return!!t&&this.x===t.x&&this.y===t.y},lerp:function(t,e){var i=this.x,r=this.y;return new zd((1-e)*i+e*t.x,(1-e)*r+e*t.y)},magnitude:function(){return Ld(this.x*this.x+this.y*this.y)||.01},manhattanDistance:function(t){return Pd(t.x-this.x)+Pd(t.y-this.y)},move:function(t,e){var i=yd(new zd(t).theta(this));return this.offset(Ed(i)*e,-Id(i)*e)},normalize:function(t){var e=(t||1)/this.magnitude();return this.scale(e,e)},offset:function(t,e){return Object(t)===t&&(e=t.y,t=t.x),this.x+=t||0,this.y+=e||0,this},reflection:function(t){return new zd(t).move(this,this.distance(t))},rotate:function(t,e){if(0===e)return this;t=t||new zd(0,0),e=yd(gd(-e));var i=Ed(e),r=Id(e),o=i*(this.x-t.x)-r*(this.y-t.y)+t.x,n=r*(this.x-t.x)+i*(this.y-t.y)+t.y;return this.x=o,this.y=n,this},round:function(t){let e=1;if(t)switch(t){case 1:e=10;break;case 2:e=100;break;case 3:e=1e3;break;default:e=Nd(10,t)}return this.x=Md(this.x*e)/e,this.y=Md(this.y*e)/e,this},scale:function(t,e,i){return i=i&&new zd(i)||new zd(0,0),this.x=i.x+t*(this.x-i.x),this.y=i.y+e*(this.y-i.y),this},snapToGrid:function(t,e){return this.x=vd(this.x,t),this.y=vd(this.y,e||t),this},squaredDistance:function(t){return Ad(this,t)},theta:function(t){var e=-((t=new zd(t)).y-this.y),i=t.x-this.x,r=$d(e,i);return r<0&&(r=2*Dd+r),180*r/Dd},toJSON:function(){return{x:this.x,y:this.y}},toPolar:function(t){t=t&&new zd(t)||new zd(0,0);var e=this.x,i=this.y;return this.x=Ld((e-t.x)*(e-t.x)+(i-t.y)*(i-t.y)),this.y=yd(t.theta(new zd(e,i))),this},toString:function(){return this.x+"@"+this.y},serialize:function(){return this.x+","+this.y},update:function(t,e){return Object(t)===t&&(e=t.y,t=t.x),this.x=t||0,this.y=e||0,this},vectorAngle:function(t){return new zd(0,0).angleBetween(this,t)}},zd.prototype.translate=zd.prototype.offset;const Fd=zd,{max:Bd,min:Ud}=Math,Vd=function(t,e){return this instanceof Vd?t instanceof Vd?new Vd(t.start,t.end):(this.start=new zd(t),void(this.end=new zd(e))):new Vd(t,e)};Vd.prototype={type:Td.Line,angle:function(){var t=new zd(this.start.x+1,this.start.y);return this.start.angleBetween(this.end,t)},bbox:function(){var t=Ud(this.start.x,this.end.x),e=Ud(this.start.y,this.end.y),i=Bd(this.start.x,this.end.x),r=Bd(this.start.y,this.end.y);return new ih(t,e,i-t,r-e)},bearing:function(){return Cd(this.start,this.end)},clone:function(){return new Vd(this.start,this.end)},closestPoint:function(t){return this.pointAt(this.closestPointNormalizedLength(t))},closestPointLength:function(t){return this.closestPointNormalizedLength(t)*this.length()},closestPointNormalizedLength:function(t){var e=this.vector().dot(new Vd(this.start,t).vector()),i=Ud(1,Bd(0,e/this.squaredLength()));return i!=i?0:i},closestPointTangent:function(t){return this.tangentAt(this.closestPointNormalizedLength(t))},containsPoint:function(t){var e=this.start,i=this.end;if(0!==e.cross(t,i))return!1;var r=this.length();return!(new Vd(e,t).length()>r)&&!(new Vd(t,i).length()>r)},divideAt:function(t){var e=this.pointAt(t);return[new Vd(this.start,e),new Vd(e,this.end)]},divideAtLength:function(t){var e=this.pointAtLength(t);return[new Vd(this.start,e),new Vd(e,this.end)]},equals:function(t){return!!t&&this.start.x===t.start.x&&this.start.y===t.start.y&&this.end.x===t.end.x&&this.end.y===t.end.y},intersect:function(t,e){if(t&&t.intersectionWithLine){var i=t.intersectionWithLine(this,e);return i&&t instanceof Vd&&(i=i[0]),i}return null},intersectionWithLine:function(t){var e=new zd(this.end.x-this.start.x,this.end.y-this.start.y),i=new zd(t.end.x-t.start.x,t.end.y-t.start.y),r=e.x*i.y-e.y*i.x,o=new zd(t.start.x-this.start.x,t.start.y-this.start.y),n=o.x*i.y-o.y*i.x,s=o.x*e.y-o.y*e.x;if(0===r||n*r<0||s*r<0)return null;if(r>0){if(n>r||s>r)return null}else if(n<r||s<r)return null;return[new zd(this.start.x+n*e.x/r,this.start.y+n*e.y/r)]},isDifferentiable:function(){return!this.start.equals(this.end)},length:function(){return Sd(this.start,this.end)},midpoint:function(){return new zd((this.start.x+this.end.x)/2,(this.start.y+this.end.y)/2)},parallel:function(t){const e=this.clone();if(!this.isDifferentiable())return e;const{start:i,end:r}=e,o=i.clone().rotate(r,270),n=r.clone().rotate(i,90);return i.move(n,t),r.move(o,t),e},pointAt:function(t){var e=this.start,i=this.end;return t<=0?e.clone():t>=1?i.clone():e.lerp(i,t)},pointAtLength:function(t){var e=this.start,i=this.end,r=!0;t<0&&(r=!1,t=-t);var o=this.length();return t>=o?r?i.clone():e.clone():this.pointAt((r?t:o-t)/o)},pointOffset:function(t){t=new zd(t);var e=this.start,i=this.end;return((i.x-e.x)*(t.y-e.y)-(i.y-e.y)*(t.x-e.x))/this.length()},rotate:function(t,e){return this.start.rotate(t,e),this.end.rotate(t,e),this},round:function(t){return this.start.round(t),this.end.round(t),this},scale:function(t,e,i){return this.start.scale(t,e,i),this.end.scale(t,e,i),this},setLength:function(t){var e=this.length();if(!e)return this;var i=t/e;return this.scale(i,i,this.start)},squaredLength:function(){return Ad(this.start,this.end)},tangentAt:function(t){if(!this.isDifferentiable())return null;var e=this.start,i=this.end,r=this.pointAt(t),o=new Vd(e,i);return o.translate(r.x-e.x,r.y-e.y),o},tangentAtLength:function(t){if(!this.isDifferentiable())return null;var e=this.start,i=this.end,r=this.pointAtLength(t),o=new Vd(e,i);return o.translate(r.x-e.x,r.y-e.y),o},toString:function(){return this.start.toString()+" "+this.end.toString()},serialize:function(){return this.start.serialize()+" "+this.end.serialize()},translate:function(t,e){return this.start.translate(t,e),this.end.translate(t,e),this},vector:function(){return new zd(this.end.x-this.start.x,this.end.y-this.start.y)}},Vd.prototype.intersection=Vd.prototype.intersect;const jd=Vd,{sqrt:Gd,round:Hd,pow:qd}=Math,Wd=function(t,e,i){return this instanceof Wd?t instanceof Wd?new Wd(new zd(t.x,t.y),t.a,t.b):(t=new zd(t),this.x=t.x,this.y=t.y,this.a=e,void(this.b=i)):new Wd(t,e,i)};Wd.fromRect=function(t){return t=new ih(t),new Wd(t.center(),t.width/2,t.height/2)},Wd.prototype={type:Td.Ellipse,bbox:function(){return new ih(this.x-this.a,this.y-this.b,2*this.a,2*this.b)},center:function(){return new zd(this.x,this.y)},clone:function(){return new Wd(this)},containsPoint:function(t){return this.normalizedDistance(t)<=1},equals:function(t){return!!t&&t.x===this.x&&t.y===this.y&&t.a===this.a&&t.b===this.b},inflate:function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.a+=2*t,this.b+=2*e,this},intersectionWithLine:function(t){var e=[],i=t.start,r=t.end,o=this.a,n=this.b,s=t.vector(),a=i.difference(new zd(this)),l=new zd(s.x/(o*o),s.y/(n*n)),c=new zd(a.x/(o*o),a.y/(n*n)),d=s.dot(l),h=s.dot(c),u=h*h-d*(a.dot(c)-1);if(u<0)return null;if(u>0){var p=Gd(u),f=(-h-p)/d,m=(-h+p)/d;if((f<0||1<f)&&(m<0||1<m))return null;0<=f&&f<=1&&e.push(i.lerp(r,f)),0<=m&&m<=1&&e.push(i.lerp(r,m))}else{var g=-h/d;if(!(0<=g&&g<=1))return null;e.push(i.lerp(r,g))}return e},intersectionWithLineFromCenterToPoint:function(t,e){t=new zd(t),e&&t.rotate(new zd(this.x,this.y),e);var i,r=t.x-this.x,o=t.y-this.y;if(0===r)return i=this.bbox().pointNearestToPoint(t),e?i.rotate(new zd(this.x,this.y),-e):i;var n=o/r,s=n*n,a=this.a*this.a,l=this.b*this.b,c=Gd(1/(1/a+s/l)),d=n*(c=r<0?-c:c);return i=new zd(this.x+c,this.y+d),e?i.rotate(new zd(this.x,this.y),-e):i},normalizedDistance:function(t){var e=t.x,i=t.y,r=this.a,o=this.b,n=this.x,s=this.y;return(e-n)*(e-n)/(r*r)+(i-s)*(i-s)/(o*o)},round:function(t){let e=1;if(t)switch(t){case 1:e=10;break;case 2:e=100;break;case 3:e=1e3;break;default:e=qd(10,t)}return this.x=Hd(this.x*e)/e,this.y=Hd(this.y*e)/e,this.a=Hd(this.a*e)/e,this.b=Hd(this.b*e)/e,this},tangentTheta:function(t){var e,i,r=t.x,o=t.y,n=this.a,s=this.b,a=this.bbox().center(),l=a.x,c=a.y,d=r>a.x+n/2,h=r<a.x-n/2;return d||h?i=n*n/(r-l)-n*n*(o-c)*((e=r>a.x?o-30:o+30)-c)/(s*s*(r-l))+l:e=s*s/(o-c)-s*s*(r-l)*((i=o>a.y?r+30:r-30)-l)/(n*n*(o-c))+c,new zd(i,e).theta(t)},toString:function(){return new zd(this.x,this.y).toString()+" "+this.a+" "+this.b}};const Yd=Wd,{abs:Xd,cos:Jd,sin:Qd,min:Kd,max:Zd,round:th,pow:eh}=Math,ih=function(t,e,i,r){if(!(this instanceof ih))return new ih(t,e,i,r);Object(t)===t&&(e=t.y,i=t.width,r=t.height,t=t.x),this.x=void 0===t?0:t,this.y=void 0===e?0:e,this.width=void 0===i?0:i,this.height=void 0===r?0:r};ih.fromEllipse=function(t){return t=new Wd(t),new ih(t.x-t.a,t.y-t.b,2*t.a,2*t.b)},ih.fromPointUnion=function(...t){if(0===t.length)return null;const e=new zd;let i,r,o,n;i=r=1/0,o=n=-1/0;for(let s=0;s<t.length;s++){e.update(t[s]);const a=e.x,l=e.y;a<i&&(i=a),a>o&&(o=a),l<r&&(r=l),l>n&&(n=l)}return new ih(i,r,o-i,n-r)},ih.fromRectUnion=function(...t){if(0===t.length)return null;const e=new ih;let i,r,o,n;i=r=1/0,o=n=-1/0;for(let s=0;s<t.length;s++){e.update(t[s]);const a=e.x,l=e.y,c=a+e.width,d=l+e.height;a<i&&(i=a),c>o&&(o=c),l<r&&(r=l),d>n&&(n=d)}return new ih(i,r,o-i,n-r)},ih.prototype={type:Td.Rect,bbox:function(t){return this.clone().rotateAroundCenter(t)},rotateAroundCenter:function(t){if(!t)return this;const{width:e,height:i}=this,r=yd(t),o=Xd(Qd(r)),n=Xd(Jd(r)),s=e*n+i*o,a=e*o+i*n;return this.x+=(e-s)/2,this.y+=(i-a)/2,this.width=s,this.height=a,this},bottomLeft:function(){return new zd(this.x,this.y+this.height)},bottomLine:function(){return new Vd(this.bottomLeft(),this.bottomRight())},bottomMiddle:function(){return new zd(this.x+this.width/2,this.y+this.height)},center:function(){return new zd(this.x+this.width/2,this.y+this.height/2)},clone:function(){return new ih(this)},containsPoint:function(t){return t instanceof zd||(t=new zd(t)),t.x>=this.x&&t.x<=this.x+this.width&&t.y>=this.y&&t.y<=this.y+this.height},containsRect:function(t){var e=new ih(this).normalize(),i=new ih(t).normalize(),r=e.width,o=e.height,n=i.width,s=i.height;if(!(r&&o&&n&&s))return!1;var a=e.x,l=e.y,c=i.x,d=i.y;return n+=c,r+=a,s+=d,o+=l,a<=c&&n<=r&&l<=d&&s<=o},corner:function(){return new zd(this.x+this.width,this.y+this.height)},equals:function(t){var e=new ih(this).normalize(),i=new ih(t).normalize();return e.x===i.x&&e.y===i.y&&e.width===i.width&&e.height===i.height},inflate:function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x-=t,this.y-=e,this.width+=2*t,this.height+=2*e,this},intersect:function(t){var e=this.origin(),i=this.corner(),r=t.origin(),o=t.corner();if(o.x<=e.x||o.y<=e.y||r.x>=i.x||r.y>=i.y)return null;var n=Zd(e.x,r.x),s=Zd(e.y,r.y);return new ih(n,s,Kd(i.x,o.x)-n,Kd(i.y,o.y)-s)},intersectionWithLine:function(t){var e,i,r=this,o=[r.topLine(),r.rightLine(),r.bottomLine(),r.leftLine()],n=[],s=[],a=o.length;for(i=0;i<a;i++)null!==(e=t.intersect(o[i]))&&s.indexOf(e.toString())<0&&(n.push(e),s.push(e.toString()));return n.length>0?n:null},intersectionWithLineFromCenterToPoint:function(t,e){t=new zd(t);var i,r=new zd(this.x+this.width/2,this.y+this.height/2);e&&t.rotate(r,e);for(var o=[this.topLine(),this.rightLine(),this.bottomLine(),this.leftLine()],n=new Vd(r,t),s=o.length-1;s>=0;--s){var a=o[s].intersection(n);if(null!==a){i=a;break}}return i&&e&&i.rotate(r,-e),i},leftLine:function(){return new Vd(this.topLeft(),this.bottomLeft())},leftMiddle:function(){return new zd(this.x,this.y+this.height/2)},maxRectScaleToFit:function(t,e){var i,r,o,n,s,a,l,c;t=new ih(t),e||(e=t.center());var d=e.x,h=e.y;i=r=o=n=s=a=l=c=1/0;var u=t.topLeft();u.x<d&&(i=(this.x-d)/(u.x-d)),u.y<h&&(s=(this.y-h)/(u.y-h));var p=t.bottomRight();p.x>d&&(r=(this.x+this.width-d)/(p.x-d)),p.y>h&&(a=(this.y+this.height-h)/(p.y-h));var f=t.topRight();f.x>d&&(o=(this.x+this.width-d)/(f.x-d)),f.y<h&&(l=(this.y-h)/(f.y-h));var m=t.bottomLeft();return m.x<d&&(n=(this.x-d)/(m.x-d)),m.y>h&&(c=(this.y+this.height-h)/(m.y-h)),{sx:Kd(i,r,o,n),sy:Kd(s,a,l,c)}},maxRectUniformScaleToFit:function(t,e){var i=this.maxRectScaleToFit(t,e);return Kd(i.sx,i.sy)},moveAndExpand:function(t){return this.x+=t.x||0,this.y+=t.y||0,this.width+=t.width||0,this.height+=t.height||0,this},normalize:function(){var t=this.x,e=this.y,i=this.width,r=this.height;return this.width<0&&(t=this.x+this.width,i=-this.width),this.height<0&&(e=this.y+this.height,r=-this.height),this.x=t,this.y=e,this.width=i,this.height=r,this},offset:function(t,e){return zd.prototype.offset.call(this,t,e)},origin:function(){return new zd(this.x,this.y)},pointNearestToPoint:function(t){if(t=new zd(t),this.containsPoint(t))switch(this.sideNearestToPoint(t)){case"right":return new zd(this.x+this.width,t.y);case"left":return new zd(this.x,t.y);case"bottom":return new zd(t.x,this.y+this.height);case"top":return new zd(t.x,this.y)}return t.adhereToRect(this)},rightLine:function(){return new Vd(this.topRight(),this.bottomRight())},rightMiddle:function(){return new zd(this.x+this.width,this.y+this.height/2)},round:function(t){let e=1;if(t)switch(t){case 1:e=10;break;case 2:e=100;break;case 3:e=1e3;break;default:e=eh(10,t)}return this.x=th(this.x*e)/e,this.y=th(this.y*e)/e,this.width=th(this.width*e)/e,this.height=th(this.height*e)/e,this},scale:function(t,e,i){return i=this.origin().scale(t,e,i),this.x=i.x,this.y=i.y,this.width*=t,this.height*=e,this},sideNearestToPoint:function(t){var e=(t=new zd(t)).x-this.x,i=this.x+this.width-t.x,r=t.y-this.y,o=e,n="left";return i<o&&(o=i,n="right"),r<o&&(o=r,n="top"),this.y+this.height-t.y<o&&(n="bottom"),n},snapToGrid:function(t,e){var i=this.origin().snapToGrid(t,e),r=this.corner().snapToGrid(t,e);return this.x=i.x,this.y=i.y,this.width=r.x-i.x,this.height=r.y-i.y,this},toJSON:function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},topLine:function(){return new Vd(this.topLeft(),this.topRight())},topMiddle:function(){return new zd(this.x+this.width/2,this.y)},topRight:function(){return new zd(this.x+this.width,this.y)},toString:function(){return this.origin().toString()+" "+this.corner().toString()},union:function(t){return ih.fromRectUnion(this,t)},update:function(t,e,i,r){return Object(t)===t&&(e=t.y,i=t.width,r=t.height,t=t.x),this.x=t||0,this.y=e||0,this.width=i||0,this.height=r||0,this}},ih.prototype.bottomRight=ih.prototype.corner,ih.prototype.topLeft=ih.prototype.origin,ih.prototype.translate=ih.prototype.offset;const rh=ih;function oh(t){const e=t.trim();if(""===e)return[];const i=[],r=e.split(/\b\s*,\s*|,\s*|\s+/),o=r.length;for(let t=0;t<o;t+=2)i.push({x:+r[t],y:+r[t+1]});return i}function nh(t){const e=t.length;if(0===e)return[];const i=[];for(let r=0;r<e;r++){const e=t[r].clone();i.push(e)}return i}function sh(t){const{abs:e}=Math;var i,r,o,n=t.length;if(0===n)return[];for(i=0;i<n;i++)(void 0===o||t[i].y<o.y||t[i].y===o.y&&t[i].x>o.x)&&(o=t[i]);var s=[];for(i=0;i<n;i++){var a=o.theta(t[i]);0===a&&(a=360);var l=[t[i],i,a];s.push(l)}if(s.sort((function(t,e){var i=t[2]-e[2];return 0===i&&(i=e[1]-t[1]),i})),s.length>2){var c=s[s.length-1];s.unshift(c)}for(var d,h,u,p,f,m,g,v={},b=[];0!==s.length;)if(h=(d=s.pop())[0],!v.hasOwnProperty(d[0]+"@@"+d[1]))for(var y=!1;!y;)if(b.length<2)b.push(d),y=!0;else{p=(u=b.pop())[0];var x=(m=(f=b.pop())[0]).cross(p,h);if(x<0)b.push(f),b.push(u),b.push(d),y=!0;else if(0===x){var w=p.angleBetween(m,h);e(w-180)<1e-10||p.equals(h)||m.equals(p)?(v[u[0]+"@@"+u[1]]=p,b.push(f)):e((w+1)%360-1)<1e-10&&(b.push(f),s.push(u))}else v[u[0]+"@@"+u[1]]=p,b.push(f)}b.length>2&&b.pop();var _=-1;for(r=b.length,i=0;i<r;i++){var k=b[i][1];(void 0===g||k<g)&&(g=k,_=i)}var C=[];if(_>0){var A=b.slice(_),S=b.slice(0,_);C=A.concat(S)}else C=b;var T=[];for(r=C.length,i=0;i<r;i++)T.push(C[i][0]);return T}const ah=function(t){return this instanceof ah?"string"==typeof t?new ah.parse(t):void(this.points=Array.isArray(t)?t.map(zd):[]):new ah(t)};ah.parse=function(t){return new ah(oh(t))},ah.fromRect=function(t){return new ah([t.topLeft(),t.topRight(),t.bottomRight(),t.bottomLeft(),t.topLeft()])},ah.prototype={type:Td.Polyline,bbox:function(){var t=1/0,e=-1/0,i=1/0,r=-1/0,o=this.points,n=o.length;if(0===n)return null;for(var s=0;s<n;s++){var a=o[s],l=a.x,c=a.y;l<t&&(t=l),l>e&&(e=l),c<i&&(i=c),c>r&&(r=c)}return new ih(t,i,e-t,r-i)},clone:function(){return new ah(nh(this.points))},closestPoint:function(t){var e=this.closestPointLength(t);return this.pointAtLength(e)},closestPointLength:function(t){var e,i=this.lengthPoints(),r=i.length;if(0===r)return 0;if(1===r)return 0;for(var o=1/0,n=0,s=r-1,a=0;a<s;a++){var l=new Vd(i[a],i[a+1]),c=l.length(),d=l.closestPointNormalizedLength(t),h=l.pointAt(d).squaredDistance(t);h<o&&(o=h,e=n+d*c),n+=c}return e},closestPointNormalizedLength:function(t){var e=this.closestPointLength(t);if(0===e)return 0;var i=this.length();return 0===i?0:e/i},closestPointTangent:function(t){var e=this.closestPointLength(t);return this.tangentAtLength(e)},containsPoint:function(t){var e=this.points,i=e.length;if(0===i)return!1;for(var r=t.x,o=t.y,n=i-1,s=0,a=0,l=new Vd,c=new Vd,d=new zd;s<i;s++){var h=e[n],u=e[s];if(t.equals(h))return!0;if(l.start=h,l.end=u,l.containsPoint(t))return!0;if(o<=h.y&&o>u.y||o>h.y&&o<=u.y){var p=h.x-r>u.x-r?h.x-r:u.x-r;p>=0&&(d.x=r+p,d.y=o,c.start=t,c.end=d,l.intersect(c)&&a++)}n=s}return a%2==1},close:function(){const{start:t,end:e,points:i}=this;return t&&e&&!t.equals(e)&&i.push(t.clone()),this},lengthPoints:function(){return this.points},convexHull:function(){return new ah(sh(this.points))},equals:function(t){if(!t)return!1;var e=this.points,i=t.points,r=e.length;if(i.length!==r)return!1;for(var o=0;o<r;o++){var n=e[o],s=t.points[o];if(!n.equals(s))return!1}return!0},intersectionWithLine:function(t){for(var e=new Vd(t),i=[],r=this.lengthPoints(),o=new Vd,n=0,s=r.length-1;n<s;n++){o.start=r[n],o.end=r[n+1];var a=e.intersectionWithLine(o);a&&i.push(a[0])}return i.length>0?i:null},isDifferentiable:function(){var t=this.points,e=t.length;if(0===e)return!1;for(var i=new Vd,r=e-1,o=0;o<r;o++)if(i.start=t[o],i.end=t[o+1],i.isDifferentiable())return!0;return!1},length:function(){var t=this.lengthPoints(),e=t.length;if(0===e)return 0;for(var i=0,r=e-1,o=0;o<r;o++)i+=t[o].distance(t[o+1]);return i},pointAt:function(t){var e=this.lengthPoints(),i=e.length;if(0===i)return null;if(1===i)return e[0].clone();if(t<=0)return e[0].clone();if(t>=1)return e[i-1].clone();var r=this.length()*t;return this.pointAtLength(r)},pointAtLength:function(t){var e=this.lengthPoints(),i=e.length;if(0===i)return null;if(1===i)return e[0].clone();var r=!0;t<0&&(r=!1,t=-t);for(var o=0,n=i-1,s=0;s<n;s++){var a=r?s:n-1-s,l=e[a],c=e[a+1],d=new Vd(l,c),h=l.distance(c);if(t<=o+h)return d.pointAtLength((r?1:-1)*(t-o));o+=h}return(r?e[i-1]:e[0]).clone()},round:function(t){for(var e=this.points,i=e.length,r=0;r<i;r++)e[r].round(t);return this},scale:function(t,e,i){for(var r=this.points,o=r.length,n=0;n<o;n++)r[n].scale(t,e,i);return this},simplify:function(t={}){const e=this.points;if(e.length<3)return this;const i=t.threshold||1e-10;let r=0;for(;e[r+2];){const t=r+1,o=r+2,n=e[r],s=e[t],a=e[o];new Vd(n,a).closestPoint(s).distance(s)<=i?e.splice(t,1):r+=1}return this},tangentAt:function(t){var e=this.lengthPoints().length;if(0===e)return null;if(1===e)return null;t<0&&(t=0),t>1&&(t=1);var i=this.length()*t;return this.tangentAtLength(i)},tangentAtLength:function(t){var e=this.lengthPoints(),i=e.length;if(0===i)return null;if(1===i)return null;var r,o=!0;t<0&&(o=!1,t=-t);for(var n=0,s=i-1,a=0;a<s;a++){var l=o?a:s-1-a,c=e[l],d=e[l+1],h=new Vd(c,d),u=c.distance(d);if(h.isDifferentiable()){if(t<=n+u)return h.tangentAtLength((o?1:-1)*(t-n));r=h}n+=u}if(r){var p=o?1:0;return r.tangentAt(p)}return null},toString:function(){return this.points+""},translate:function(t,e){for(var i=this.points,r=i.length,o=0;o<r;o++)i[o].translate(t,e);return this},serialize:function(){var t=this.points,e=t.length;if(0===e)return"";for(var i="",r=0;r<e;r++){var o=t[r];i+=o.x+","+o.y+" "}return i.trim()}},Object.defineProperty(ah.prototype,"start",{configurable:!0,enumerable:!0,get:function(){return 0===this.points.length?null:this.points[0]}}),Object.defineProperty(ah.prototype,"end",{configurable:!0,enumerable:!0,get:function(){var t=this.points.length;return 0===t?null:this.points[t-1]}});const{abs:lh,sqrt:ch,min:dh,max:hh,pow:uh}=Math,ph=function(t,e,i,r){return this instanceof ph?t instanceof ph?new ph(t.start,t.controlPoint1,t.controlPoint2,t.end):(this.start=new zd(t),this.controlPoint1=new zd(e),this.controlPoint2=new zd(i),void(this.end=new zd(r))):new ph(t,e,i,r)};function fh(t){var e,i,r=[];for(i=arguments.length,e=1;e<i;e++)r.push(arguments[e]);if(!t)throw new Error("Missing a parent object.");var o=Object.create(t);for(i=r.length,e=0;e<i;e++){var n,s,a=r[e];for(s in a)a.hasOwnProperty(s)&&(delete o[s],n=Object.getOwnPropertyDescriptor(a,s),Object.defineProperty(o,s,n))}return o}ph.throughPoints=function(){function t(t){var e=t.length,i=[],r=[],o=2;i[0]=t[0]/o;for(var n=1;n<e;n++)r[n]=1/o,o=(n<e-1?4:3.5)-r[n],i[n]=(t[n]-i[n-1])/o;for(n=1;n<e;n++)i[e-n-1]-=r[e-n]*i[e-n];return i}return function(e){if(!e||Array.isArray(e)&&e.length<2)throw new Error("At least 2 points are required");for(var i=function(e){var i,r=[],o=[],n=e.length-1;if(1==n)return r[0]=new zd((2*e[0].x+e[1].x)/3,(2*e[0].y+e[1].y)/3),o[0]=new zd(2*r[0].x-e[0].x,2*r[0].y-e[0].y),[r,o];var s=[];for(i=1;i<n-1;i++)s[i]=4*e[i].x+2*e[i+1].x;s[0]=e[0].x+2*e[1].x,s[n-1]=(8*e[n-1].x+e[n].x)/2;var a=t(s);for(i=1;i<n-1;++i)s[i]=4*e[i].y+2*e[i+1].y;s[0]=e[0].y+2*e[1].y,s[n-1]=(8*e[n-1].y+e[n].y)/2;var l=t(s);for(i=0;i<n;i++)r.push(new zd(a[i],l[i])),i<n-1?o.push(new zd(2*e[i+1].x-a[i+1],2*e[i+1].y-l[i+1])):o.push(new zd((e[n].x+a[n-1])/2,(e[n].y+l[n-1])/2));return[r,o]}(e),r=[],o=i[0].length,n=0;n<o;n++){var s=new zd(i[0][n].x,i[0][n].y),a=new zd(i[1][n].x,i[1][n].y);r.push(new ph(e[n],s,a,e[n+1]))}return r}}(),ph.prototype={type:Td.Curve,bbox:function(){for(var t,e,i,r,o,n,s,a,l=this.start,c=this.controlPoint1,d=this.controlPoint2,h=this.end,u=l.x,p=l.y,f=c.x,m=c.y,g=d.x,v=d.y,b=h.x,y=h.y,x=new Array,w=new Array,_=[new Array,new Array],k=0;k<2;++k)if(0===k?(e=6*u-12*f+6*g,t=-3*u+9*f-9*g+3*b,i=3*f-3*u):(e=6*p-12*m+6*v,t=-3*p+9*m-9*v+3*y,i=3*m-3*p),lh(t)<1e-12){if(lh(e)<1e-12)continue;0<(r=-i/e)&&r<1&&w.push(r)}else a=ch(s=e*e-4*i*t),s<0||(0<(o=(-e+a)/(2*t))&&o<1&&w.push(o),0<(n=(-e-a)/(2*t))&&n<1&&w.push(n));for(var C,A,S,T=w.length,P=T;T--;)A=(C=1-(r=w[T]))*C*C*u+3*C*C*r*f+3*C*r*r*g+r*r*r*b,_[0][T]=A,S=C*C*C*p+3*C*C*r*m+3*C*r*r*v+r*r*r*y,_[1][T]=S,x[T]={X:A,Y:S};w[P]=0,w[P+1]=1,x[P]={X:u,Y:p},x[P+1]={X:b,Y:y},_[0][P]=u,_[1][P]=p,_[0][P+1]=b,_[1][P+1]=y,w.length=P+2,_[0].length=P+2,_[1].length=P+2,x.length=P+2;var E=dh.apply(null,_[0]),I=dh.apply(null,_[1]),L=hh.apply(null,_[0]),O=hh.apply(null,_[1]);return new ih(E,I,L-E,O-I)},clone:function(){return new ph(this.start,this.controlPoint1,this.controlPoint2,this.end)},closestPoint:function(t,e){return this.pointAtT(this.closestPointT(t,e))},closestPointLength:function(t,e){var i=void 0===(e=e||{}).precision?this.PRECISION:e.precision,r={precision:i,subdivisions:void 0===e.subdivisions?this.getSubdivisions({precision:i}):e.subdivisions};return this.lengthAtT(this.closestPointT(t,r),r)},closestPointNormalizedLength:function(t,e){var i=void 0===(e=e||{}).precision?this.PRECISION:e.precision,r={precision:i,subdivisions:void 0===e.subdivisions?this.getSubdivisions({precision:i}):e.subdivisions},o=this.closestPointLength(t,r);if(!o)return 0;var n=this.length(r);return 0===n?0:o/n},closestPointT:function(t,e){for(var i,r,o,n,s,a,l,c=void 0===(e=e||{}).precision?this.PRECISION:e.precision,d=void 0===e.subdivisions?this.getSubdivisions({precision:c}):e.subdivisions,h=d.length,u=h?1/h:0,p=0;p<h;p++){var f=d[p],m=f.start.distance(t),g=f.end.distance(t),v=m+g;(!l||v<l)&&(i=f,r=p*u,o=(p+1)*u,n=m,s=g,a=f.start.distance(f.end),l=v)}for(var b=uh(10,-c);;){var y=n?lh(n-s)/n:0,x=s?lh(n-s)/s:0;if(y<b||x<b||(!n||n<a*b||(!s||s<a*b)))return n<=s?r:o;var w=i.divide(.5);u/=2;var _=w[0].start.distance(t),k=w[0].end.distance(t),C=_+k,A=w[1].start.distance(t),S=w[1].end.distance(t);C<=A+S?(i=w[0],o-=u,n=_,s=k):(i=w[1],r+=u,n=A,s=S)}},closestPointTangent:function(t,e){return this.tangentAtT(this.closestPointT(t,e))},containsPoint:function(t,e){return this.toPolyline(e).containsPoint(t)},divideAt:function(t,e){if(t<=0)return this.divideAtT(0);if(t>=1)return this.divideAtT(1);var i=this.tAt(t,e);return this.divideAtT(i)},divideAtLength:function(t,e){var i=this.tAtLength(t,e);return this.divideAtT(i)},divideAtT:function(t){var e=this.start,i=this.controlPoint1,r=this.controlPoint2,o=this.end;if(t<=0)return[new ph(e,e,e,e),new ph(e,i,r,o)];if(t>=1)return[new ph(e,i,r,o),new ph(o,o,o,o)];var n=this.getSkeletonPoints(t),s=n.startControlPoint1,a=n.startControlPoint2,l=n.divider,c=n.dividerControlPoint1,d=n.dividerControlPoint2;return[new ph(e,s,a,l),new ph(l,c,d,o)]},endpointDistance:function(){return this.start.distance(this.end)},equals:function(t){return!!t&&this.start.x===t.start.x&&this.start.y===t.start.y&&this.controlPoint1.x===t.controlPoint1.x&&this.controlPoint1.y===t.controlPoint1.y&&this.controlPoint2.x===t.controlPoint2.x&&this.controlPoint2.y===t.controlPoint2.y&&this.end.x===t.end.x&&this.end.y===t.end.y},getSkeletonPoints:function(t){var e=this.start,i=this.controlPoint1,r=this.controlPoint2,o=this.end;if(t<=0)return{startControlPoint1:e.clone(),startControlPoint2:e.clone(),divider:e.clone(),dividerControlPoint1:i.clone(),dividerControlPoint2:r.clone()};if(t>=1)return{startControlPoint1:i.clone(),startControlPoint2:r.clone(),divider:o.clone(),dividerControlPoint1:o.clone(),dividerControlPoint2:o.clone()};var n=new Vd(e,i).pointAt(t),s=new Vd(i,r).pointAt(t),a=new Vd(r,o).pointAt(t),l=new Vd(n,s).pointAt(t),c=new Vd(s,a).pointAt(t);return{startControlPoint1:n,startControlPoint2:l,divider:new Vd(l,c).pointAt(t),dividerControlPoint1:c,dividerControlPoint2:a}},getSubdivisions:function(t){var e=void 0===(t=t||{}).precision?this.PRECISION:t.precision,i=this.start,r=this.controlPoint1,o=this.controlPoint2,n=this.end,s=[new ph(i,r,o,n)];if(0===e)return s;if(!this.isDifferentiable())return s;var a=this.endpointDistance(),l=uh(10,-e),c=2;0===r.cross(i,n)&&0===o.cross(i,n)&&(c=2*e);for(var d=0;;){d+=1;for(var h=[],u=s.length,p=0;p<u;p++){var f=s[p].divide(.5);h.push(f[0],f[1])}for(var m=0,g=h.length,v=0;v<g;v++){m+=h[v].endpointDistance()}if(d>=c)if((0!==m?(m-a)/m:0)<l)return h;s=h,a=m}},isDifferentiable:function(){var t=this.start,e=this.controlPoint1,i=this.controlPoint2,r=this.end;return!(t.equals(e)&&e.equals(i)&&i.equals(r))},length:function(t){for(var e=void 0===(t=t||{}).precision?this.PRECISION:t.precision,i=void 0===t.subdivisions?this.getSubdivisions({precision:e}):t.subdivisions,r=0,o=i.length,n=0;n<o;n++){r+=i[n].endpointDistance()}return r},lengthAtT:function(t,e){if(t<=0)return 0;var i=void 0===(e=e||{}).precision?this.PRECISION:e.precision;return this.divide(t)[0].length({precision:i})},pointAt:function(t,e){if(t<=0)return this.start.clone();if(t>=1)return this.end.clone();var i=this.tAt(t,e);return this.pointAtT(i)},pointAtLength:function(t,e){var i=this.tAtLength(t,e);return this.pointAtT(i)},pointAtT:function(t){return t<=0?this.start.clone():t>=1?this.end.clone():this.getSkeletonPoints(t).divider},PRECISION:3,round:function(t){return this.start.round(t),this.controlPoint1.round(t),this.controlPoint2.round(t),this.end.round(t),this},scale:function(t,e,i){return this.start.scale(t,e,i),this.controlPoint1.scale(t,e,i),this.controlPoint2.scale(t,e,i),this.end.scale(t,e,i),this},tangentAt:function(t,e){if(!this.isDifferentiable())return null;t<0?t=0:t>1&&(t=1);var i=this.tAt(t,e);return this.tangentAtT(i)},tangentAtLength:function(t,e){if(!this.isDifferentiable())return null;var i=this.tAtLength(t,e);return this.tangentAtT(i)},tangentAtT:function(t){if(!this.isDifferentiable())return null;t<0?t=0:t>1&&(t=1);var e=this.getSkeletonPoints(t),i=e.startControlPoint2,r=e.dividerControlPoint1,o=e.divider,n=new Vd(i,r);return n.translate(o.x-i.x,o.y-i.y),n},tAt:function(t,e){if(t<=0)return 0;if(t>=1)return 1;var i=void 0===(e=e||{}).precision?this.PRECISION:e.precision,r={precision:i,subdivisions:void 0===e.subdivisions?this.getSubdivisions({precision:i}):e.subdivisions},o=this.length(r)*t;return this.tAtLength(o,r)},tAtLength:function(t,e){var i=!0;t<0&&(i=!1,t=-t);for(var r,o,n,s,a,l=void 0===(e=e||{}).precision?this.PRECISION:e.precision,c=void 0===e.subdivisions?this.getSubdivisions({precision:l}):e.subdivisions,d={precision:l,subdivisions:c},h=0,u=c.length,p=1/u,f=0;f<u;f++){var m=i?f:u-1-f,g=c[f],v=g.endpointDistance();if(t<=h+v){r=g,o=m*p,n=(m+1)*p,s=i?t-h:v+h-t,a=i?v+h-t:t-h;break}h+=v}if(!r)return i?1:0;for(var b=this.length(d),y=uh(10,-l);;){var x,w;if((0!==b?s/b:0)<y)return o;if((0!==b?a/b:0)<y)return n;var _=r.divide(.5);p/=2;var k=_[0].endpointDistance(),C=_[1].endpointDistance();s<=k?(r=_[0],n-=p,w=k-(x=s)):(r=_[1],o+=p,w=C-(x=s-k)),s=x,a=w}},toPoints:function(t){for(var e=void 0===(t=t||{}).precision?this.PRECISION:t.precision,i=void 0===t.subdivisions?this.getSubdivisions({precision:e}):t.subdivisions,r=[i[0].start.clone()],o=i.length,n=0;n<o;n++){var s=i[n];r.push(s.end.clone())}return r},toPolyline:function(t){return new ah(this.toPoints(t))},toString:function(){return this.start+" "+this.controlPoint1+" "+this.controlPoint2+" "+this.end},translate:function(t,e){return this.start.translate(t,e),this.controlPoint1.translate(t,e),this.controlPoint2.translate(t,e),this.end.translate(t,e),this}},ph.prototype.divide=ph.prototype.divideAtT;const mh=function(t){if(!(this instanceof mh))return new mh(t);if("string"==typeof t)return new mh.parse(t);var e,i;if(this.segments=[],t)if(Array.isArray(t)&&0!==t.length)if(i=(t=t.reduce((function(t,e){return t.concat(e)}),[])).length,t[0].isSegment)for(e=0;e<i;e++){var r=t[e];this.appendSegment(r)}else{var o=null;for(e=0;e<i;e++){var n=t[e];if(!(n instanceof Vd||n instanceof ph))throw new Error("Cannot construct a path segment from the provided object.");0===e&&this.appendSegment(mh.createSegment("M",n.start)),o&&!o.end.equals(n.start)&&this.appendSegment(mh.createSegment("M",n.start)),n instanceof Vd?this.appendSegment(mh.createSegment("L",n.end)):n instanceof ph&&this.appendSegment(mh.createSegment("C",n.controlPoint1,n.controlPoint2,n.end)),o=n}}else if(t.isSegment)this.appendSegment(t);else if(t instanceof Vd)this.appendSegment(mh.createSegment("M",t.start)),this.appendSegment(mh.createSegment("L",t.end));else if(t instanceof ph)this.appendSegment(mh.createSegment("M",t.start)),this.appendSegment(mh.createSegment("C",t.controlPoint1,t.controlPoint2,t.end));else{if(!(t instanceof ah))throw new Error("Cannot construct a path from the provided object.");if(!t.points||0===t.points.length)return;for(i=t.points.length,e=0;e<i;e++){var s=t.points[e];0===e?this.appendSegment(mh.createSegment("M",s)):this.appendSegment(mh.createSegment("L",s))}}else;};function gh(t,e){return e.unshift(null),new(Function.prototype.bind.apply(t,e))}mh.parse=function(t){if(!t)return new mh;for(var e=new mh,i=t.match(/(?:[a-zA-Z] *)(?:(?:-?\d+(?:\.\d+)?(?:e[-+]?\d+)? *,? *)|(?:-?\.\d+ *,? *))+|(?:[a-zA-Z] *)(?! |\d|-|\.)/g),r=i.length,o=0;o<r;o++){var n=i[o].match(/(?:[a-zA-Z])|(?:(?:-?\d+(?:\.\d+)?(?:e[-+]?\d+)?))|(?:(?:-?\.\d+))/g),s=mh.createSegment.apply(this,n);e.appendSegment(s)}return e},mh.createSegment=function(t){if(!t)throw new Error("Type must be provided.");var e=mh.segmentTypes[t];if(!e)throw new Error(t+" is not a recognized path segment type.");for(var i=[],r=arguments.length,o=1;o<r;o++)i.push(arguments[o]);return gh(e,i)},mh.prototype={type:Td.Path,appendSegment:function(t){var e,i=this.segments,r=i.length,o=0!==r?i[r-1]:null;if(Array.isArray(t)){if(!(t=t.reduce((function(t,e){return t.concat(e)}),[]))[0].isSegment)throw new Error("Segments required.");for(var n=t.length,s=0;s<n;s++){var a=t[s];e=this.prepareSegment(a,o,null),i.push(e),o=e}}else{if(!t||!t.isSegment)throw new Error("Segment required.");e=this.prepareSegment(t,o,null),i.push(e)}},bbox:function(){var t,e=this.segments,i=e.length;if(0===i)return null;for(var r=0;r<i;r++){var o=e[r];if(o.isVisible){var n=o.bbox();t=t?t.union(n):n}}if(t)return t;var s=e[i-1];return new ih(s.end.x,s.end.y,0,0)},clone:function(){for(var t=this.segments,e=t.length,i=new mh,r=0;r<e;r++){var o=t[r].clone();i.appendSegment(o)}return i},closestPoint:function(t,e){var i=this.closestPointT(t,e);return i?this.pointAtT(i):null},closestPointLength:function(t,e){var i=void 0===(e=e||{}).precision?this.PRECISION:e.precision,r={precision:i,segmentSubdivisions:void 0===e.segmentSubdivisions?this.getSegmentSubdivisions({precision:i}):e.segmentSubdivisions},o=this.closestPointT(t,r);return o?this.lengthAtT(o,r):0},closestPointNormalizedLength:function(t,e){var i=void 0===(e=e||{}).precision?this.PRECISION:e.precision,r={precision:i,segmentSubdivisions:void 0===e.segmentSubdivisions?this.getSegmentSubdivisions({precision:i}):e.segmentSubdivisions},o=this.closestPointLength(t,r);if(0===o)return 0;var n=this.length(r);return 0===n?0:o/n},closestPointT:function(t,e){var i=this.segments,r=i.length;if(0===r)return null;for(var o,n=void 0===(e=e||{}).precision?this.PRECISION:e.precision,s=void 0===e.segmentSubdivisions?this.getSegmentSubdivisions({precision:n}):e.segmentSubdivisions,a=1/0,l=0;l<r;l++){var c=i[l],d=s[l];if(c.isVisible){var h=c.closestPointT(t,{precision:n,subdivisions:d}),u=c.pointAtT(h),p=new Vd(u,t).squaredLength();p<a&&(o={segmentIndex:l,value:h},a=p)}}return o||{segmentIndex:r-1,value:1}},closestPointTangent:function(t,e){var i=this.segments,r=i.length;if(0===r)return null;for(var o,n=void 0===(e=e||{}).precision?this.PRECISION:e.precision,s=void 0===e.segmentSubdivisions?this.getSegmentSubdivisions({precision:n}):e.segmentSubdivisions,a=1/0,l=0;l<r;l++){var c=i[l],d=s[l];if(c.isDifferentiable()){var h=c.closestPointT(t,{precision:n,subdivisions:d}),u=c.pointAtT(h),p=new Vd(u,t).squaredLength();p<a&&(o=c.tangentAtT(h),a=p)}}return o||null},containsPoint:function(t,e){var i=this.toPolylines(e);if(!i)return!1;for(var r=i.length,o=0,n=0;n<r;n++){i[n].containsPoint(t)&&o++}return o%2==1},divideAt:function(t,e){if(0===this.segments.length)return null;t<0&&(t=0),t>1&&(t=1);var i=void 0===(e=e||{}).precision?this.PRECISION:e.precision,r={precision:i,segmentSubdivisions:void 0===e.segmentSubdivisions?this.getSegmentSubdivisions({precision:i}):e.segmentSubdivisions},o=this.length(r)*t;return this.divideAtLength(o,r)},divideAtLength:function(t,e){var i=this.segments.length;if(0===i)return null;var r=!0;t<0&&(r=!1,t=-t);var o,n,s,a,l,c,d,h=void 0===(e=e||{}).precision?this.PRECISION:e.precision,u=void 0===e.segmentSubdivisions?this.getSegmentSubdivisions({precision:h}):e.segmentSubdivisions,p=0;for(o=0;o<i;o++){var f=r?o:i-1-o;n=this.getSegment(f);var m=u[f],g=n.length({precision:h,subdivisions:m});if(n.isDifferentiable()&&(l=n,c=f,t<=p+g)){a=f,s=n.divideAtLength((r?1:-1)*(t-p),{precision:h,subdivisions:m});break}p+=g}if(!l)return null;s||(a=c,d=r?1:0,s=l.divideAtT(d));var v=this.clone();v.replaceSegment(a,s);var b=a,y=a+1,x=a+2;s[0].isDifferentiable()||(v.removeSegment(b),y-=1,x-=1);var w=v.getSegment(y).start;v.insertSegment(y,mh.createSegment("M",w)),x+=1,s[1].isDifferentiable()||(v.removeSegment(x-1),x-=1);var _=x-b-1;for(o=x;o<v.segments.length;o++){var k=this.getSegment(o-_);if("Z"===(n=v.getSegment(o)).type&&!k.subpathStartSegment.end.equals(n.subpathStartSegment.end)){var C=mh.createSegment("L",k.end);v.replaceSegment(o,C)}}return[new mh(v.segments.slice(0,y)),new mh(v.segments.slice(y))]},equals:function(t){if(!t)return!1;var e=this.segments,i=t.segments,r=e.length;if(i.length!==r)return!1;for(var o=0;o<r;o++){var n=e[o],s=i[o];if(n.type!==s.type||!n.equals(s))return!1}return!0},getSegment:function(t){var e=this.segments,i=e.length;if(0===i)throw new Error("Path has no segments.");if(t<0&&(t=i+t),t>=i||t<0)throw new Error("Index out of range.");return e[t]},getSegmentSubdivisions:function(t){for(var e=this.segments,i=e.length,r=void 0===(t=t||{}).precision?this.PRECISION:t.precision,o=[],n=0;n<i;n++){var s=e[n].getSubdivisions({precision:r});o.push(s)}return o},getSubpaths:function(){const t=this.clone().validate().segments,e=t.length,i=[];for(let r=0;r<e;r++){const e=t[r];e.isSubpathStart?i.push(new mh(e)):i[i.length-1].appendSegment(e)}return i},insertSegment:function(t,e){var i,r=this.segments,o=r.length;if(t<0&&(t=o+t+1),t>o||t<0)throw new Error("Index out of range.");var n=null,s=null;if(0!==o&&(s=t>=1?(n=r[t-1]).nextSegment:r[0]),Array.isArray(e)){if(!(e=e.reduce((function(t,e){return t.concat(e)}),[]))[0].isSegment)throw new Error("Segments required.");for(var a=e.length,l=0;l<a;l++){var c=e[l];i=this.prepareSegment(c,n,s),r.splice(t+l,0,i),n=i}}else{if(!e||!e.isSegment)throw new Error("Segment required.");i=this.prepareSegment(e,n,s),r.splice(t,0,i)}},intersectionWithLine:function(t,e){var i=null,r=this.toPolylines(e);if(!r)return null;for(var o=0,n=r.length;o<n;o++){var s=r[o],a=t.intersect(s);a&&(i||(i=[]),Array.isArray(a)?Array.prototype.push.apply(i,a):i.push(a))}return i},isDifferentiable:function(){for(var t=this.segments,e=t.length,i=0;i<e;i++){if(t[i].isDifferentiable())return!0}return!1},isValid:function(){var t=this.segments;return 0===t.length||"M"===t[0].type},length:function(t){var e=this.segments,i=e.length;if(0===i)return 0;for(var r=void 0===(t=t||{}).precision?this.PRECISION:t.precision,o=void 0===t.segmentSubdivisions?this.getSegmentSubdivisions({precision:r}):t.segmentSubdivisions,n=0,s=0;s<i;s++){var a=e[s],l=o[s];n+=a.length({subdivisions:l})}return n},lengthAtT:function(t,e){var i=this.segments,r=i.length;if(0===r)return 0;var o=t.segmentIndex;if(o<0)return 0;var n=t.value;o>=r?(o=r-1,n=1):n<0?n=0:n>1&&(n=1);for(var s,a=void 0===(e=e||{}).precision?this.PRECISION:e.precision,l=void 0===e.segmentSubdivisions?this.getSegmentSubdivisions({precision:a}):e.segmentSubdivisions,c=0,d=0;d<o;d++){var h=i[d];s=l[d],c+=h.length({precisison:a,subdivisions:s})}return h=i[o],s=l[o],c+=h.lengthAtT(n,{precisison:a,subdivisions:s})},pointAt:function(t,e){if(0===this.segments.length)return null;if(t<=0)return this.start.clone();if(t>=1)return this.end.clone();var i=void 0===(e=e||{}).precision?this.PRECISION:e.precision,r={precision:i,segmentSubdivisions:void 0===e.segmentSubdivisions?this.getSegmentSubdivisions({precision:i}):e.segmentSubdivisions},o=this.length(r)*t;return this.pointAtLength(o,r)},pointAtLength:function(t,e){var i=this.segments,r=i.length;if(0===r)return null;if(0===t)return this.start.clone();var o=!0;t<0&&(o=!1,t=-t);for(var n,s=void 0===(e=e||{}).precision?this.PRECISION:e.precision,a=void 0===e.segmentSubdivisions?this.getSegmentSubdivisions({precision:s}):e.segmentSubdivisions,l=0,c=0;c<r;c++){var d=o?c:r-1-c,h=i[d],u=a[d],p=h.length({precision:s,subdivisions:u});if(h.isVisible){if(t<=l+p)return h.pointAtLength((o?1:-1)*(t-l),{precision:s,subdivisions:u});n=h}l+=p}return n?o?n.end:n.start:i[r-1].end.clone()},pointAtT:function(t){var e=this.segments,i=e.length;if(0===i)return null;var r=t.segmentIndex;if(r<0)return e[0].pointAtT(0);if(r>=i)return e[i-1].pointAtT(1);var o=t.value;return o<0?o=0:o>1&&(o=1),e[r].pointAtT(o)},PRECISION:3,prepareSegment:function(t,e,i){t.previousSegment=e,t.nextSegment=i,e&&(e.nextSegment=t),i&&(i.previousSegment=t);var r=t;return t.isSubpathStart&&(t.subpathStartSegment=t,r=i),r&&this.updateSubpathStartSegment(r),t},removeSegment:function(t){var e=this.segments,i=e.length;if(0===i)throw new Error("Path has no segments.");if(t<0&&(t=i+t),t>=i||t<0)throw new Error("Index out of range.");var r=e.splice(t,1)[0],o=r.previousSegment,n=r.nextSegment;o&&(o.nextSegment=n),n&&(n.previousSegment=o),r.isSubpathStart&&n&&this.updateSubpathStartSegment(n)},replaceSegment:function(t,e){var i,r=this.segments,o=r.length;if(0===o)throw new Error("Path has no segments.");if(t<0&&(t=o+t),t>=o||t<0)throw new Error("Index out of range.");var n=r[t],s=n.previousSegment,a=n.nextSegment,l=n.isSubpathStart;if(Array.isArray(e)){if(!(e=e.reduce((function(t,e){return t.concat(e)}),[]))[0].isSegment)throw new Error("Segments required.");r.splice(t,1);for(var c=e.length,d=0;d<c;d++){var h=e[d];i=this.prepareSegment(h,s,a),r.splice(t+d,0,i),s=i,l&&i.isSubpathStart&&(l=!1)}}else{if(!e||!e.isSegment)throw new Error("Segment required.");i=this.prepareSegment(e,s,a),r.splice(t,1,i),l&&i.isSubpathStart&&(l=!1)}l&&a&&this.updateSubpathStartSegment(a)},round:function(t){for(var e=this.segments,i=e.length,r=0;r<i;r++){e[r].round(t)}return this},scale:function(t,e,i){for(var r=this.segments,o=r.length,n=0;n<o;n++){r[n].scale(t,e,i)}return this},segmentAt:function(t,e){var i=this.segmentIndexAt(t,e);return i?this.getSegment(i):null},segmentAtLength:function(t,e){var i=this.segmentIndexAtLength(t,e);return i?this.getSegment(i):null},segmentIndexAt:function(t,e){if(0===this.segments.length)return null;t<0&&(t=0),t>1&&(t=1);var i=void 0===(e=e||{}).precision?this.PRECISION:e.precision,r={precision:i,segmentSubdivisions:void 0===e.segmentSubdivisions?this.getSegmentSubdivisions({precision:i}):e.segmentSubdivisions},o=this.length(r)*t;return this.segmentIndexAtLength(o,r)},segmentIndexAtLength:function(t,e){var i=this.segments,r=i.length;if(0===r)return null;var o=!0;t<0&&(o=!1,t=-t);for(var n=void 0===(e=e||{}).precision?this.PRECISION:e.precision,s=void 0===e.segmentSubdivisions?this.getSegmentSubdivisions({precision:n}):e.segmentSubdivisions,a=null,l=0,c=0;c<r;c++){var d=o?c:r-1-c,h=i[d],u=s[d],p=h.length({precision:n,subdivisions:u});if(h.isVisible){if(t<=l+p)return d;a=d}l+=p}return a},serialize:function(){if(!this.isValid())throw new Error("Invalid path segments.");return this.toString()},tangentAt:function(t,e){if(0===this.segments.length)return null;t<0&&(t=0),t>1&&(t=1);var i=void 0===(e=e||{}).precision?this.PRECISION:e.precision,r={precision:i,segmentSubdivisions:void 0===e.segmentSubdivisions?this.getSegmentSubdivisions({precision:i}):e.segmentSubdivisions},o=this.length(r)*t;return this.tangentAtLength(o,r)},tangentAtLength:function(t,e){var i=this.segments,r=i.length;if(0===r)return null;var o=!0;t<0&&(o=!1,t=-t);for(var n,s=void 0===(e=e||{}).precision?this.PRECISION:e.precision,a=void 0===e.segmentSubdivisions?this.getSegmentSubdivisions({precision:s}):e.segmentSubdivisions,l=0,c=0;c<r;c++){var d=o?c:r-1-c,h=i[d],u=a[d],p=h.length({precision:s,subdivisions:u});if(h.isDifferentiable()){if(t<=l+p)return h.tangentAtLength((o?1:-1)*(t-l),{precision:s,subdivisions:u});n=h}l+=p}if(n){var f=o?1:0;return n.tangentAtT(f)}return null},tangentAtT:function(t){var e=this.segments,i=e.length;if(0===i)return null;var r=t.segmentIndex;if(r<0)return e[0].tangentAtT(0);if(r>=i)return e[i-1].tangentAtT(1);var o=t.value;return o<0?o=0:o>1&&(o=1),e[r].tangentAtT(o)},toPoints:function(t){var e=this.segments,i=e.length;if(0===i)return null;for(var r=void 0===(t=t||{}).precision?this.PRECISION:t.precision,o=void 0===t.segmentSubdivisions?this.getSegmentSubdivisions({precision:r}):t.segmentSubdivisions,n=[],s=[],a=0;a<i;a++){var l=e[a];if(l.isVisible){var c=o[a];if(c.length>0){var d=c.map((function(t){return t.start}));Array.prototype.push.apply(s,d)}else s.push(l.start)}else s.length>0&&(s.push(e[a-1].end),n.push(s),s=[])}return s.length>0&&(s.push(this.end),n.push(s)),n},toPolylines:function(t){var e=[],i=this.toPoints(t);if(!i)return null;for(var r=0,o=i.length;r<o;r++)e.push(new ah(i[r]));return e},toString:function(){for(var t=this.segments,e=t.length,i="",r=0;r<e;r++){i+=t[r].serialize()+" "}return i.trim()},translate:function(t,e){for(var i=this.segments,r=i.length,o=0;o<r;o++){i[o].translate(t,e)}return this},updateSubpathStartSegment:function(t){for(var e=t.previousSegment;t&&!t.isSubpathStart;)t.subpathStartSegment=e?e.subpathStartSegment:null,e=t,t=t.nextSegment},validate:function(){return this.isValid()||this.insertSegment(0,mh.createSegment("M",0,0)),this}},Object.defineProperty(mh.prototype,"start",{configurable:!0,enumerable:!0,get:function(){var t=this.segments,e=t.length;if(0===e)return null;for(var i=0;i<e;i++){var r=t[i];if(r.isVisible)return r.start}return t[e-1].end}}),Object.defineProperty(mh.prototype,"end",{configurable:!0,enumerable:!0,get:function(){var t=this.segments,e=t.length;if(0===e)return null;for(var i=e-1;i>=0;i--){var r=t[i];if(r.isVisible)return r.end}return t[e-1].end}});var vh={bbox:function(){throw new Error("Declaration missing for virtual function.")},clone:function(){throw new Error("Declaration missing for virtual function.")},closestPoint:function(){throw new Error("Declaration missing for virtual function.")},closestPointLength:function(){throw new Error("Declaration missing for virtual function.")},closestPointNormalizedLength:function(){throw new Error("Declaration missing for virtual function.")},closestPointT:function(t){if(this.closestPointNormalizedLength)return this.closestPointNormalizedLength(t);throw new Error("Neither closestPointT() nor closestPointNormalizedLength() function is implemented.")},closestPointTangent:function(){throw new Error("Declaration missing for virtual function.")},divideAt:function(){throw new Error("Declaration missing for virtual function.")},divideAtLength:function(){throw new Error("Declaration missing for virtual function.")},divideAtT:function(t){if(this.divideAt)return this.divideAt(t);throw new Error("Neither divideAtT() nor divideAt() function is implemented.")},equals:function(){throw new Error("Declaration missing for virtual function.")},getSubdivisions:function(){throw new Error("Declaration missing for virtual function.")},isDifferentiable:function(){throw new Error("Declaration missing for virtual function.")},isSegment:!0,isSubpathStart:!1,isVisible:!0,length:function(){throw new Error("Declaration missing for virtual function.")},lengthAtT:function(t){if(t<=0)return 0;var e=this.length();return t>=1?e:e*t},nextSegment:null,pointAt:function(){throw new Error("Declaration missing for virtual function.")},pointAtLength:function(){throw new Error("Declaration missing for virtual function.")},pointAtT:function(t){if(this.pointAt)return this.pointAt(t);throw new Error("Neither pointAtT() nor pointAt() function is implemented.")},previousSegment:null,round:function(){throw new Error("Declaration missing for virtual function.")},subpathStartSegment:null,scale:function(){throw new Error("Declaration missing for virtual function.")},serialize:function(){throw new Error("Declaration missing for virtual function.")},tangentAt:function(){throw new Error("Declaration missing for virtual function.")},tangentAtLength:function(){throw new Error("Declaration missing for virtual function.")},tangentAtT:function(t){if(this.tangentAt)return this.tangentAt(t);throw new Error("Neither tangentAtT() nor tangentAt() function is implemented.")},toString:function(){throw new Error("Declaration missing for virtual function.")},translate:function(){throw new Error("Declaration missing for virtual function.")}};Object.defineProperty(vh,"end",{configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(vh,"start",{configurable:!0,enumerable:!0,get:function(){if(!this.previousSegment)throw new Error("Missing previous segment. (This segment cannot be the first segment of a path; OR segment has not yet been added to a path.)");return this.previousSegment.end}}),Object.defineProperty(vh,"type",{configurable:!0,enumerable:!0,get:function(){throw new Error("Bad segment declaration. No type specified.")}});var bh=function(){for(var t,e,i=[],r=arguments.length,o=0;o<r;o++)i.push(arguments[o]);if(!(this instanceof bh))return gh(bh,i);if(0===r)throw new Error("Lineto constructor expects a line, 1 point, or 2 coordinates (none provided).");if(i[0]instanceof Vd){if(1===r)return this.end=i[0].end.clone(),this;throw new Error("Lineto constructor expects a line, 1 point, or 2 coordinates ("+r+" lines provided).")}if("string"==typeof i[0]||"number"==typeof i[0]){if(2===r)return this.end=new zd(+i[0],+i[1]),this;if(r<2)throw new Error("Lineto constructor expects a line, 1 point, or 2 coordinates ("+r+" coordinates provided).");var n;for(t=[],o=0;o<r;o+=2)n=i.slice(o,o+2),t.push(gh(bh,n));return t}if(1===r)return this.end=new zd(i[0]),this;for(t=[],o=0;o<r;o+=1)e=i[o],t.push(new bh(e));return t},yh={clone:function(){return new bh(this.end)},divideAt:function(t){var e=new Vd(this.start,this.end).divideAt(t);return[new bh(e[0]),new bh(e[1])]},divideAtLength:function(t){var e=new Vd(this.start,this.end).divideAtLength(t);return[new bh(e[0]),new bh(e[1])]},getSubdivisions:function(){return[]},isDifferentiable:function(){return!!this.previousSegment&&!this.start.equals(this.end)},round:function(t){return this.end.round(t),this},scale:function(t,e,i){return this.end.scale(t,e,i),this},serialize:function(){var t=this.end;return this.type+" "+t.x+" "+t.y},toString:function(){return this.type+" "+this.start+" "+this.end},translate:function(t,e){return this.end.translate(t,e),this}};Object.defineProperty(yh,"type",{configurable:!0,enumerable:!0,value:"L"}),bh.prototype=fh(vh,Vd.prototype,yh);var xh=function(){for(var t,e,i=[],r=arguments.length,o=0;o<r;o++)i.push(arguments[o]);if(!(this instanceof xh))return gh(xh,i);if(0===r)throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates (none provided).");if(i[0]instanceof ph){if(1===r)return this.controlPoint1=i[0].controlPoint1.clone(),this.controlPoint2=i[0].controlPoint2.clone(),this.end=i[0].end.clone(),this;throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates ("+r+" curves provided).")}if("string"==typeof i[0]||"number"==typeof i[0]){if(6===r)return this.controlPoint1=new zd(+i[0],+i[1]),this.controlPoint2=new zd(+i[2],+i[3]),this.end=new zd(+i[4],+i[5]),this;if(r<6)throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates ("+r+" coordinates provided).");var n;for(t=[],o=0;o<r;o+=6)n=i.slice(o,o+6),t.push(gh(xh,n));return t}if(3===r)return this.controlPoint1=new zd(i[0]),this.controlPoint2=new zd(i[1]),this.end=new zd(i[2]),this;if(r<3)throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates ("+r+" points provided).");for(t=[],o=0;o<r;o+=3)e=i.slice(o,o+3),t.push(gh(xh,e));return t},wh={clone:function(){return new xh(this.controlPoint1,this.controlPoint2,this.end)},divideAt:function(t,e){var i=new ph(this.start,this.controlPoint1,this.controlPoint2,this.end).divideAt(t,e);return[new xh(i[0]),new xh(i[1])]},divideAtLength:function(t,e){var i=new ph(this.start,this.controlPoint1,this.controlPoint2,this.end).divideAtLength(t,e);return[new xh(i[0]),new xh(i[1])]},divideAtT:function(t){var e=new ph(this.start,this.controlPoint1,this.controlPoint2,this.end).divideAtT(t);return[new xh(e[0]),new xh(e[1])]},isDifferentiable:function(){if(!this.previousSegment)return!1;var t=this.start,e=this.controlPoint1,i=this.controlPoint2,r=this.end;return!(t.equals(e)&&e.equals(i)&&i.equals(r))},round:function(t){return this.controlPoint1.round(t),this.controlPoint2.round(t),this.end.round(t),this},scale:function(t,e,i){return this.controlPoint1.scale(t,e,i),this.controlPoint2.scale(t,e,i),this.end.scale(t,e,i),this},serialize:function(){var t=this.controlPoint1,e=this.controlPoint2,i=this.end;return this.type+" "+t.x+" "+t.y+" "+e.x+" "+e.y+" "+i.x+" "+i.y},toString:function(){return this.type+" "+this.start+" "+this.controlPoint1+" "+this.controlPoint2+" "+this.end},translate:function(t,e){return this.controlPoint1.translate(t,e),this.controlPoint2.translate(t,e),this.end.translate(t,e),this}};Object.defineProperty(wh,"type",{configurable:!0,enumerable:!0,value:"C"}),xh.prototype=fh(vh,ph.prototype,wh);var _h=function(){for(var t,e,i=[],r=arguments.length,o=0;o<r;o++)i.push(arguments[o]);if(!(this instanceof _h))return gh(_h,i);if(0===r)throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates (none provided).");if(i[0]instanceof Vd){if(1===r)return this.end=i[0].end.clone(),this;throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates ("+r+" lines provided).")}if(i[0]instanceof ph){if(1===r)return this.end=i[0].end.clone(),this;throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates ("+r+" curves provided).")}if("string"==typeof i[0]||"number"==typeof i[0]){if(2===r)return this.end=new zd(+i[0],+i[1]),this;if(r<2)throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates ("+r+" coordinates provided).");var n;for(t=[],o=0;o<r;o+=2)n=i.slice(o,o+2),0===o?t.push(gh(_h,n)):t.push(gh(bh,n));return t}if(1===r)return this.end=new zd(i[0]),this;for(t=[],o=0;o<r;o+=1)e=i[o],0===o?t.push(new _h(e)):t.push(new bh(e));return t},kh={bbox:function(){return null},clone:function(){return new _h(this.end)},closestPoint:function(){return this.end.clone()},closestPointNormalizedLength:function(){return 0},closestPointLength:function(){return 0},closestPointT:function(){return 1},closestPointTangent:function(){return null},divideAt:function(){return[this.clone(),this.clone()]},divideAtLength:function(){return[this.clone(),this.clone()]},equals:function(t){return this.end.equals(t.end)},getSubdivisions:function(){return[]},isDifferentiable:function(){return!1},isSubpathStart:!0,isVisible:!1,length:function(){return 0},lengthAtT:function(){return 0},pointAt:function(){return this.end.clone()},pointAtLength:function(){return this.end.clone()},pointAtT:function(){return this.end.clone()},round:function(t){return this.end.round(t),this},scale:function(t,e,i){return this.end.scale(t,e,i),this},serialize:function(){var t=this.end;return this.type+" "+t.x+" "+t.y},tangentAt:function(){return null},tangentAtLength:function(){return null},tangentAtT:function(){return null},toString:function(){return this.type+" "+this.end},translate:function(t,e){return this.end.translate(t,e),this}};Object.defineProperty(kh,"start",{configurable:!0,enumerable:!0,get:function(){throw new Error("Illegal access. Moveto segments should not need a start property.")}}),Object.defineProperty(kh,"type",{configurable:!0,enumerable:!0,value:"M"}),_h.prototype=fh(vh,kh);var Ch=function(){for(var t=[],e=arguments.length,i=0;i<e;i++)t.push(arguments[i]);if(!(this instanceof Ch))return gh(Ch,t);if(e>0)throw new Error("Closepath constructor expects no arguments.");return this},Ah={clone:function(){return new Ch},divideAt:function(t){var e=new Vd(this.start,this.end).divideAt(t);return[e[1].isDifferentiable()?new bh(e[0]):this.clone(),new bh(e[1])]},divideAtLength:function(t){var e=new Vd(this.start,this.end).divideAtLength(t);return[e[1].isDifferentiable()?new bh(e[0]):this.clone(),new bh(e[1])]},getSubdivisions:function(){return[]},isDifferentiable:function(){return!(!this.previousSegment||!this.subpathStartSegment)&&!this.start.equals(this.end)},round:function(){return this},scale:function(){return this},serialize:function(){return this.type},toString:function(){return this.type+" "+this.start+" "+this.end},translate:function(){return this}};Object.defineProperty(Ah,"end",{configurable:!0,enumerable:!0,get:function(){if(!this.subpathStartSegment)throw new Error("Missing subpath start segment. (This segment needs a subpath start segment (e.g. Moveto); OR segment has not yet been added to a path.)");return this.subpathStartSegment.end}}),Object.defineProperty(Ah,"type",{configurable:!0,enumerable:!0,value:"Z"}),Ch.prototype=fh(vh,Vd.prototype,Ah);var Sh=mh.segmentTypes={L:bh,C:xh,M:_h,Z:Ch,z:Ch};mh.regexSupportedData=new RegExp("^[\\s\\d"+Object.keys(Sh).join("")+",.]*$"),mh.isDataSupported=function(t){return"string"==typeof t&&this.regexSupportedData.test(t)};const Th={curveThroughPoints:function(t){return console.warn("deprecated"),new mh(ph.throughPoints(t)).serialize()},getCurveControlPoints:function(t){console.warn("deprecated");var e,i=[],r=[],o=t.length-1;if(1==o)return i[0]=new zd((2*t[0].x+t[1].x)/3,(2*t[0].y+t[1].y)/3),r[0]=new zd(2*i[0].x-t[0].x,2*i[0].y-t[0].y),[i,r];var n=[];for(e=1;e<o-1;e++)n[e]=4*t[e].x+2*t[e+1].x;n[0]=t[0].x+2*t[1].x,n[o-1]=(8*t[o-1].x+t[o].x)/2;var s=this.getFirstControlPoints(n);for(e=1;e<o-1;++e)n[e]=4*t[e].y+2*t[e+1].y;n[0]=t[0].y+2*t[1].y,n[o-1]=(8*t[o-1].y+t[o].y)/2;var a=this.getFirstControlPoints(n);for(e=0;e<o;e++)i.push(new zd(s[e],a[e])),e<o-1?r.push(new zd(2*t[e+1].x-s[e+1],2*t[e+1].y-a[e+1])):r.push(new zd((t[o].x+s[o-1])/2,(t[o].y+a[o-1])/2));return[i,r]},getCurveDivider:function(t,e,i,r){console.warn("deprecated");var o=new ph(t,e,i,r);return function(t){var e=o.divide(t);return[{p0:e[0].start,p1:e[0].controlPoint1,p2:e[0].controlPoint2,p3:e[0].end},{p0:e[1].start,p1:e[1].controlPoint1,p2:e[1].controlPoint2,p3:e[1].end}]}},getFirstControlPoints:function(t){console.warn("deprecated");var e=t.length,i=[],r=[],o=2;i[0]=t[0]/o;for(var n=1;n<e;n++)r[n]=1/o,o=(n<e-1?4:3.5)-r[n],i[n]=(t[n]-i[n-1])/o;for(n=1;n<e;n++)i[e-n-1]-=r[e-n]*i[e-n];return i},getInversionSolver:function(t,e,i,r){console.warn("deprecated");var o=new ph(t,e,i,r);return function(t){return o.closestPointT(t)}}},Ph=function(t){return this instanceof Ph?"string"==typeof t?new Ph.parse(t):void(this.points=Array.isArray(t)?t.map(zd):[]):new Ph(t)};function Eh(t,e){const i=t.start.x,r=t.start.y,o=t.end.x,n=t.end.y,s=e.start.x,a=e.start.y,l=o-i,c=n-r,d=e.end.x-s,h=e.end.y-a,u=i-s,p=r-a,f=l*h-d*c,m=(l*p-c*u)/f,g=(d*p-h*u)/f;return m>=0&&m<=1&&g>=0&&g<=1}function Ih(t,e){const i=t.a,r=t.b,o=t.x,n=t.y,s=e.start.x-o,a=e.end.x-o,l=e.start.y-n,c=i*i,d=r*r,h=a-s,u=e.end.y-n-l,p=h*h/c+u*u/d,f=2*s*h/c+2*l*u/d,m=f*f-4*p*(s*s/c+l*l/d-1);if(0===m){const t=-f/2/p;return t>=0&&t<=1}if(m>0){const t=Math.sqrt(m),e=(-f+t)/2/p,i=(-f-t)/2/p;return e>=0&&e<=1||i>=0&&i<=1}return!1}function Lh(t,e){return function(t,e,i,r){const{cos:o,sin:n}=Math,s=n(e),a=o(e),l=n(r),c=o(r),d=s*s,h=a*a,u=s*a,p=l*l,f=c*c,m=l*c,g=t.a*t.a,v=t.b*t.b,b=i.a*i.a,y=i.b*i.b,x=g*d+v*h,w=b*p+y*f,_=g*h+v*d,k=b*f+y*p;let C=2*(v-g)*u,A=2*(y-b)*m,S=-2*x*t.x-C*t.y,T=-2*w*i.x-A*i.y,P=-C*t.x-2*_*t.y,E=-A*i.x-2*k*i.y;const I=x*t.x*t.x+_*t.y*t.y+C*t.x*t.y-g*v,L=w*i.x*i.x+k*i.y*i.y+A*i.x*i.y-b*y;C/=2,A/=2,S/=2,T/=2,P/=2,E/=2;const O=ru([[x,C,S],[C,_,P],[S,P,I]]),R=ru([[w,A,T],[A,k,E],[T,E,L]]),$=.33333333*(ru([[w,C,S],[A,_,P],[T,P,I]])+ru([[x,A,S],[C,k,P],[S,E,I]])+ru([[x,C,T],[C,_,E],[S,P,L]])),M=.33333333*(ru([[x,A,T],[C,k,E],[S,E,L]])+ru([[w,C,T],[A,_,E],[T,P,L]])+ru([[w,A,S],[A,k,P],[T,E,I]])),N=iu([[O,$],[$,M]]),D=iu([[O,M],[$,R]]),z=iu([[$,M],[M,R]]);if(iu([[2*N,D],[D,2*z]])>0&&(M>0||$>0))return!1;return!0}(t,0,e,0)}function Oh(t,e){const{start:i,end:r}=e,{x:o,y:n,width:s,height:a}=t;return!(i.x>o+s&&r.x>o+s||i.x<o&&r.x<o||i.y>n+a&&r.y>n+a||i.y<n&&r.y<n)&&(!(!t.containsPoint(e.start)&&!t.containsPoint(e.end))||(Eh(t.topLine(),e)||Eh(t.rightLine(),e)||Eh(t.bottomLine(),e)||Eh(t.leftLine(),e)))}function Rh(t,e){return!!$h(t,ih.fromEllipse(e))&&Bh(Ph.fromRect(t),e)}function $h(t,e){return t.x<e.x+e.width&&t.x+t.width>e.x&&t.y<e.y+e.height&&t.y+t.height>e.y}function Mh(t,e){return Jh(t,e,{interior:!1})}function Nh(t,e){return Qh(t,e,{interior:!1})}function Dh(t,e){return Kh(t,e,{interior:!1})}function zh(t,e){return tu(t,e,{interior:!1})}function Fh(t,e){return Jh(t,e,{interior:!0})}function Bh(t,e){return Qh(t,e,{interior:!0})}function Uh(t,e){return Kh(t,e,{interior:!0})}function Vh(t,e){return tu(t,e,{interior:!0})}function jh(t,e){return eu(t,e,{interior:!0})}function Gh(t,e,i){return t.getSubpaths().some((t=>{const[r]=t.toPolylines(i),{type:o}=t.getSegment(-1);return"Z"===o?Fh(r,e):Mh(r,e)}))}function Hh(t,e,i){return t.getSubpaths().some((t=>{const[r]=t.toPolylines(i),{type:o}=t.getSegment(-1);return"Z"===o?Bh(r,e):Nh(r,e)}))}function qh(t,e,i){return Yh(t,Ph.fromRect(e),i)}function Wh(t,e,i){return Zh(t,e,i,{interior:!1})}function Yh(t,e,i){return Zh(t,e,i,{interior:!0})}function Xh(t,e,i,r){return t.getSubpaths().some((t=>{const[o]=t.toPolylines(i),{type:n}=t.getSegment(-1);return"Z"===n?Yh(e,o,r):Wh(e,o,r)}))}function Jh(t,e,i={}){const{interior:r=!1}=i;let o;if(r){if(t.containsPoint(e.start))return!0;const{start:i,end:r,points:n}=t;o=r.equals(i)?n:[...n,i]}else o=t.points;const{length:n}=o,s=new Vd;for(let t=0;t<n-1;t++)if(s.start=o[t],s.end=o[t+1],Eh(e,s))return!0;return!1}function Qh(t,e,i={}){const{start:r,end:o,points:n}=t;if(e.containsPoint(r))return!0;let s;const{interior:a=!1}=i;if(a){if(t.containsPoint(e.center()))return!0;s=o.equals(r)?n:[...n,r]}else s=n;const{length:l}=s,c=new Vd;for(let t=0;t<l-1;t++)if(c.start=s[t],c.end=s[t+1],Ih(e,c))return!0;return!1}function Kh(t,e,i){return eu(t,Ph.fromRect(e),i)}function Zh(t,e,i,r){return t.getSubpaths().some((t=>{const[o]=t.toPolylines(i),{type:n}=t.getSegment(-1);return"Z"===n?eu(e,o,r):tu(e,o,r)}))}function tu(t,e,i={}){const{interior:r=!1}=i;let o;if(r){const{start:i}=e;if(t.containsPoint(i))return!0;o=t.clone().close()}else o=t;const n=e.points,{length:s}=n,a=new Vd;for(let t=0;t<s-1;t++)if(a.start=n[t],a.end=n[t+1],Mh(o,a))return!0;return!1}function eu(t,e,i){return e.containsPoint(t.start)||tu(t,e.clone().close(),i)}function iu(t){return t[0][0]*t[1][1]-t[0][1]*t[1][0]}function ru(t){return t[0][0]*t[1][1]*t[2][2]-t[0][0]*t[1][2]*t[2][1]-t[0][1]*t[1][0]*t[2][2]+t[0][1]*t[1][2]*t[2][0]+t[0][2]*t[1][0]*t[2][1]-t[0][2]*t[1][1]*t[2][0]}Ph.parse=function(t){return new Ph(oh(t))},Ph.fromRect=function(t){return new Ph([t.topLeft(),t.topRight(),t.bottomRight(),t.bottomLeft()])},Ph.prototype=fh(ah.prototype,{type:Td.Polygon,clone:function(){return new Ph(nh(this.points))},convexHull:function(){return new Ph(sh(this.points))},lengthPoints:function(){const{start:t,end:e,points:i}=this;return i.length<=1||t.equals(e)?i:[...i,t.clone()]}});var ou=Object.freeze({__proto__:null,exists:function t(e,i,r,o){switch(e.type){case Td.Line:if(i.type===Td.Line)return Eh(e,i);break;case Td.Ellipse:switch(i.type){case Td.Line:return Ih(e,i);case Td.Ellipse:return Lh(e,i)}break;case Td.Rect:switch(i.type){case Td.Line:return Oh(e,i);case Td.Ellipse:return Rh(e,i);case Td.Rect:return $h(e,i)}break;case Td.Polyline:switch(i.type){case Td.Line:return Mh(e,i);case Td.Ellipse:return Nh(e,i);case Td.Rect:return Dh(e,i);case Td.Polyline:return zh(e,i)}break;case Td.Polygon:switch(i.type){case Td.Line:return Fh(e,i);case Td.Ellipse:return Bh(e,i);case Td.Rect:return Uh(e,i);case Td.Polyline:return Vh(e,i);case Td.Polygon:return jh(e,i)}break;case Td.Path:switch(i.type){case Td.Line:return Gh(e,i,r);case Td.Ellipse:return Hh(e,i,r);case Td.Rect:return qh(e,i,r);case Td.Polyline:return Wh(e,i,r);case Td.Polygon:return Yh(e,i,r);case Td.Path:return Xh(e,i,r,o)}}switch(i.type){case Td.Ellipse:case Td.Rect:case Td.Polyline:case Td.Polygon:case Td.Path:return t(i,e,o,r);default:throw Error(`The intersection for ${e} and ${i} could not be found.`)}},lineWithLine:Eh,ellipseWithLine:Ih,ellipseWithEllipse:Lh,rectWithLine:Oh,rectWithEllipse:Rh,rectWithRect:$h,polylineWithLine:Mh,polylineWithEllipse:Nh,polylineWithRect:Dh,polylineWithPolyline:zh,polygonWithLine:Fh,polygonWithEllipse:Bh,polygonWithRect:Uh,polygonWithPolyline:Vh,polygonWithPolygon:jh,pathWithLine:Gh,pathWithEllipse:Hh,pathWithRect:qh,pathWithPolyline:Wh,pathWithPolygon:Yh,pathWithPath:Xh});const nu=ou;var su=Object.freeze({__proto__:null,intersection:nu,scale:{linear:function(t,e,i){var r=t[1]-t[0],o=e[1]-e[0];return(i-t[0])/r*o+e[0]||0}},normalizeAngle:gd,snapToGrid:vd,toDeg:bd,toRad:yd,random:xd,bezier:Th,Curve:ph,Ellipse:Wd,ellipse:Yd,Line:Vd,line:jd,Path:mh,Point:zd,point:Fd,Polyline:ah,Polygon:Ph,Rect:ih,rect:rh,types:Td});const au=function(){if(!("object"==typeof window&&!!window.SVGAngle))return function(){throw new Error("SVG is required to use Vectorizer.")};var t={svg:"http://www.w3.org/2000/svg",xmlns:"http://www.w3.org/2000/xmlns/",xml:"http://www.w3.org/XML/1998/namespace",xlink:"http://www.w3.org/1999/xlink",xhtml:"http://www.w3.org/1999/xhtml"},e=Math,i=e.PI,r=e.atan2,o=e.sqrt,n=e.min,s=e.max,a=e.cos,l=e.sin,c=function(e,i,r){if(!(this instanceof c))return c.apply(Object.create(c.prototype),arguments);if(e){if(c.isV(e)&&(e=e.node),i=i||{},c.isString(e)){if("svg"===(e=e.trim()).toLowerCase())e=c.createSvgDocument();else if("<"===e[0]){var o=c.createSvgDocument(e);if(o.childNodes.length>1){var n,s,a=[];for(n=0,s=o.childNodes.length;n<s;n++){var l=o.childNodes[n];a.push(new c(document.importNode(l,!0)))}return a}e=document.importNode(o.firstChild,!0)}else e=document.createElementNS(t.svg,e);c.ensureId(e)}return this.node=e,this.setAttributes(i),r&&this.append(r),this}},d=c.prototype;function h(t,e,i){i||(i={});for(var r=i.includeAnnotationIndices,o=i.eol,n=i.lineHeight,s=i.baseSize,a=0,l={},d=e.length-1,h=0;h<=d;h++){var u=e[h],p=null;if(c.isObject(u)){var f=u.attrs,m=c("tspan",f),g=m.node,v=u.t;o&&h===d&&(v+=o),g.textContent=v;var b=f.class;b&&m.addClass(b),r&&m.attr("annotations",u.annotations),p=parseFloat(f["font-size"]),isFinite(p)||(p=s),p&&p>a&&(a=p)}else o&&h===d&&(u+=o),g=document.createTextNode(u||" "),s&&s>a&&(a=s);t.appendChild(g)}return a&&(l.maxFontSize=a),n?l.lineHeight=n:a&&(l.lineHeight=1.2*a),l}Object.defineProperty(d,"id",{enumerable:!0,get:function(){return this.node.id},set:function(t){this.node.id=t}}),d.getTransformToElement=function(t){var e=this.node;if(c.isSVGGraphicsElement(t)&&c.isSVGGraphicsElement(e)){var i=c.toNode(t).getScreenCTM(),r=e.getScreenCTM();if(i&&r)return i.inverse().multiply(r)}return c.createSVGMatrix()},d.transform=function(t,e){var i=this.node;if(c.isUndefined(t))return c.transformStringToMatrix(this.attr("transform"));if(e&&e.absolute)return this.attr("transform",c.matrixToTransformString(t));var r=c.createSVGTransform(t);return i.transform.baseVal.appendItem(r),this},d.translate=function(t,e,i){i=i||{},e=e||0;var r=this.attr("transform")||"",o=c.parseTransformString(r);if(r=o.value,c.isUndefined(t))return o.translate;r=r.replace(/translate\([^)]*\)/g,"").trim();var n="translate("+(i.absolute?t:o.translate.tx+t)+","+(i.absolute?e:o.translate.ty+e)+")";return this.attr("transform",(n+" "+r).trim()),this},d.rotate=function(t,e,i,r){r=r||{};var o=this.attr("transform")||"",n=c.parseTransformString(o);if(o=n.value,c.isUndefined(t))return n.rotate;o=o.replace(/rotate\([^)]*\)/g,"").trim(),t%=360;var s="rotate("+(r.absolute?t:n.rotate.angle+t)+(void 0!==e&&void 0!==i?","+e+","+i:"")+")";return this.attr("transform",(o+" "+s).trim()),this},d.scale=function(t,e){e=c.isUndefined(e)?t:e;var i=this.attr("transform")||"",r=c.parseTransformString(i);if(i=r.value,c.isUndefined(t))return r.scale;i=i.replace(/scale\([^)]*\)/g,"").trim();var o="scale("+t+","+e+")";return this.attr("transform",(i+" "+o).trim()),this},d.bbox=function(t,e){var i,r=this.node,o=r.ownerSVGElement;if(!o)return new ih(0,0,0,0);try{i=r.getBBox()}catch(t){i={x:r.clientLeft,y:r.clientTop,width:r.clientWidth,height:r.clientHeight}}if(t)return new ih(i);var n=this.getTransformToElement(e||o);return c.transformRect(i,n)},d.getBBox=function(t){var e,i={},r=this.node;if(!r.ownerSVGElement||!c.isSVGGraphicsElement(r))return new ih(0,0,0,0);if(t&&(t.target&&(i.target=c.toNode(t.target)),t.recursive&&(i.recursive=t.recursive)),i.recursive){var o=this.children(),n=o.length;if(0===n)return this.getBBox({target:i.target,recursive:!1});i.target||(i.target=this);for(var s=0;s<n;s++){var a,l=o[s];a=0===l.children().length?l.getBBox({target:i.target,recursive:!1}):l.getBBox({target:i.target,recursive:!0}),e=e?e.union(a):a}return e}try{e=r.getBBox()}catch(t){e={x:r.clientLeft,y:r.clientTop,width:r.clientWidth,height:r.clientHeight}}if(i.target){var d=this.getTransformToElement(i.target);return c.transformRect(e,d)}return new ih(e)};var u=/em$/;function p(t,e){var i=parseFloat(t);return u.test(t)?i*e:i}d.text=function(e,i){if(e&&"string"!=typeof e)throw new Error("Vectorizer: text() expects the first argument to be a string.");e=c.sanitizeText(e),i||(i={});var r=i.displayEmpty,o=i.eol,n=i.textPath,s=i.textVerticalAnchor,a="middle"===s||"bottom"===s||"top"===s,l=i.x;void 0===l&&(l=this.attr("x")||0);var d=i.includeAnnotationIndices,f=i.annotations;f&&!c.isArray(f)&&(f=[f]);var m=i.lineHeight,g="auto"===m,v=g?"1.5em":m||"1em";this.empty(),this.attr({"xml:space":"preserve",display:e||r?null:"none"});var b=parseFloat(this.attr("font-size"));b||(b=16,(a||f)&&this.attr("font-size",b));var y,x=document;n?("string"==typeof n&&(n={d:n}),y=function(t,e){t||(t={});var i=c("textPath"),r=t.d;if(r&&void 0===t["xlink:href"]){var o=c("path").attr("d",r).appendTo(e.defs());i.attr("xlink:href","#"+o.id)}return c.isObject(t)&&i.attr(t),i.node}(n,this)):y=x.createDocumentFragment();for(var w,_=0,k=e.split("\n"),C=[],A=0,S=k.length-1;A<=S;A++){var T,P=v,E="v-line",I=x.createElementNS(t.svg,"tspan"),L=k[A];if(L)if(f){var O=c.annotateString(L,f,{offset:-_,includeAnnotationIndices:d}),R=(T=h(I,O,{includeAnnotationIndices:d,eol:A!==S&&o,lineHeight:g?null:v,baseSize:b})).lineHeight;R&&g&&0!==A&&(P=R),0===A&&(w=.8*T.maxFontSize)}else o&&A!==S&&(L+=o),I.textContent=L;else{I.textContent="-",E+=" v-empty-line";var $=I.style;if($.fillOpacity=0,$.strokeOpacity=0,f){T={};let t=b;for(let e=(O=c.findAnnotationsAtIndex(f,_)).length;e>0;e--){const i=O[e-1].attrs;if(!i||!("font-size"in i))continue;const r=parseFloat(i["font-size"]);if(isFinite(r)){t=r;break}}g&&(A>0?P=1.2*t:w=.8*t),I.setAttribute("font-size",t),T.maxFontSize=t}}T&&C.push(T),A>0&&I.setAttribute("dy",P),(A>0||n)&&I.setAttribute("x",l),I.className.baseVal=E,y.appendChild(I),_+=L.length+1}if(a)if(f)P=function(t,e,i,r){if(!Array.isArray(e))return 0;var o=e.length;if(!o)return 0;for(var n=e[0],s=p(n.maxFontSize,i)||i,a=0,l=p(r,i),c=1;c<o;c++)a+=p((n=e[c]).lineHeight,i)||l;var d,h=p(n.maxFontSize,i)||i;switch(t){case"middle":d=s/2-.15*h-a/2;break;case"bottom":d=-.25*h-a;break;default:d=.8*s}return d}(s,C,b,v);else if("top"===s)P="0.8em";else{var M;switch(S>0?(M=parseFloat(v)||1,M*=S,u.test(v)||(M/=b)):M=0,s){case"middle":P=.3-M/2+"em";break;case"bottom":P=-M-.3+"em"}}else 0===s?P="0em":s?P=s:(P=0,null===this.attr("y")&&this.attr("y",w||"0.8em"));return y.firstChild.setAttribute("dy",P),this.append(y),this},d.removeAttr=function(t){const e=v[t],{ns:i,local:r}=c.qualifyAttr(e),o=this.node;return i?o.hasAttributeNS(i,r)&&o.removeAttributeNS(i,r):o.hasAttribute(e)&&o.removeAttribute(e),this},d.attr=function(t,e){if(c.isUndefined(t)){for(var i=this.node.attributes,r={},o=0;o<i.length;o++)r[i[o].name]=i[o].value;return r}if(c.isString(t)&&c.isUndefined(e))return this.node.getAttribute(v[t]);if("object"==typeof t)for(var n in t)t.hasOwnProperty(n)&&this.setAttribute(n,t[n]);else this.setAttribute(t,e);return this},d.normalizePath=function(){return"PATH"===this.tagName()&&this.attr("d",c.normalizePathData(this.attr("d"))),this},d.remove=function(){return this.node.parentNode&&this.node.parentNode.removeChild(this.node),this},d.empty=function(){for(;this.node.firstChild;)this.node.removeChild(this.node.firstChild);return this},d.setAttributes=function(t){for(var e in t)t.hasOwnProperty(e)&&this.setAttribute(e,t[e]);return this},d.append=function(t){c.isArray(t)||(t=[t]);for(var e=0,i=t.length;e<i;e++)this.node.appendChild(c.toNode(t[e]));return this},d.prepend=function(t){var e=this.node.firstChild;return e?c(e).before(t):this.append(t)},d.before=function(t){var e=this.node,i=e.parentNode;if(i){c.isArray(t)||(t=[t]);for(var r=0,o=t.length;r<o;r++)i.insertBefore(c.toNode(t[r]),e)}return this},d.appendTo=function(t){return c.toNode(t).appendChild(this.node),this},d.svg=function(){return this.node instanceof window.SVGSVGElement?this:c(this.node.ownerSVGElement)},d.tagName=function(){return this.node.tagName.toUpperCase()},d.defs=function(){var t=this.svg()||this,e=t.node.getElementsByTagName("defs")[0];return e?c(e):c("defs").appendTo(t)},d.clone=function(){var t=c(this.node.cloneNode(!0));return t.node.id=c.uniqueId(),t},d.findOne=function(t){var e=this.node.querySelector(t);return e?c(e):void 0},d.find=function(t){var e=[],i=this.node.querySelectorAll(t);if(i)for(var r=0;r<i.length;r++)e.push(c(i[r]));return e},d.children=function(){for(var t=this.node.childNodes,e=[],i=0;i<t.length;i++){1===t[i].nodeType&&e.push(c(t[i]))}return e},d.parent=function(){return c(this.node.parentNode)||null},d.index=function(){for(var t=0,e=this.node.previousSibling;e;)1===e.nodeType&&t++,e=e.previousSibling;return t},d.findParentByClass=function(t,e){for(var i=this.node.ownerSVGElement,r=this.node.parentNode;r&&r!==e&&r!==i;){var o=c(r);if(o.hasClass(t))return o;r=r.parentNode}return null},d.contains=function(t){var e=this.node,i=c.toNode(t),r=i&&i.parentNode;return e===r||!!(r&&1===r.nodeType&&16&e.compareDocumentPosition(r))},d.toLocalPoint=function(t,e){var i=this.svg().node,r=i.createSVGPoint();r.x=t,r.y=e;try{var o=r.matrixTransform(i.getScreenCTM().inverse()),n=this.getTransformToElement(i).inverse()}catch(t){return r}return o.matrixTransform(n)},d.translateCenterToPoint=function(t){var e=this.getBBox({target:this.svg()}).center();return this.translate(t.x-e.x,t.y-e.y),this},d.translateAndAutoOrient=function(t,e,i){t=new zd(t),e=new zd(e),i||(i=this.svg());var r=this.scale();this.attr("transform","");var o=this.getBBox({target:i}).scale(r.sx,r.sy),n=c.createSVGTransform();n.setTranslate(-o.x-o.width/2,-o.y-o.height/2);var s=c.createSVGTransform(),a=t.angleBetween(e,t.clone().offset(1,0));a&&s.setRotate(a,0,0);var l=c.createSVGTransform(),d=t.clone().move(e,o.width/2);l.setTranslate(2*t.x-d.x,2*t.y-d.y);var h=this.getTransformToElement(i),u=c.createSVGTransform();return u.setMatrix(l.matrix.multiply(s.matrix.multiply(n.matrix.multiply(h.scale(r.sx,r.sy))))),this.attr("transform",c.matrixToTransformString(u.matrix)),this},d.animateAlongPath=function(t,e){e=c.toNode(e);var i=c.ensureId(e),r=c("animateMotion",t),o=c("mpath",{"xlink:href":"#"+i});r.append(o),this.append(r);try{r.node.beginElement()}catch(t){if("fake"===document.documentElement.getAttribute("smiling")){var n=r.node;n.animators=[];var s=n.getAttribute("id");s&&(id2anim[s]=n);for(var a=getTargets(n),l=0,d=a.length;l<d;l++){var h=a[l],u=new Animator(n,h,l);animators.push(u),n.animators[l]=u,u.register()}}}return this};const f=/[^\x20\t\r\n\f]+/g;function m(t){return c.isString(t)&&t.trim().match(f)||[]}d.hasClass=function(t){return!!c.isString(t)&&this.node.classList.contains(t.trim())},d.addClass=function(t){return this.node.classList.add(...m(t)),this},d.removeClass=function(t){return this.node.classList.remove(...m(t)),this},d.toggleClass=function(t,e){const i=m(t);for(let t=0;t<i.length;t++)this.node.classList.toggle(i[t],e);return this},d.sample=function(t){t=t||1;for(var e,i=this.node,r=i.getTotalLength(),o=[],n=0;n<r;)e=i.getPointAtLength(n),o.push({x:e.x,y:e.y,distance:n}),n+=t;return o},d.convertToPath=function(){var t=c("path");t.attr(this.attr());var e=this.convertToPathData();return e&&t.attr("d",e),t},d.convertToPathData=function(){var t=this.tagName();switch(t){case"PATH":return this.attr("d");case"LINE":return c.convertLineToPathData(this.node);case"POLYGON":return c.convertPolygonToPathData(this.node);case"POLYLINE":return c.convertPolylineToPathData(this.node);case"ELLIPSE":return c.convertEllipseToPathData(this.node);case"CIRCLE":return c.convertCircleToPathData(this.node);case"RECT":return c.convertRectToPathData(this.node)}throw new Error(t+" cannot be converted to PATH.")},c.prototype.toGeometryShape=function(){var t,e,i,r,o,n,s,a,l,d,h,u,p,f,m;switch(this.tagName()){case"RECT":return t=parseFloat(this.attr("x"))||0,e=parseFloat(this.attr("y"))||0,i=parseFloat(this.attr("width"))||0,r=parseFloat(this.attr("height"))||0,new ih(t,e,i,r);case"CIRCLE":return o=parseFloat(this.attr("cx"))||0,n=parseFloat(this.attr("cy"))||0,s=parseFloat(this.attr("r"))||0,new Wd({x:o,y:n},s,s);case"ELLIPSE":return o=parseFloat(this.attr("cx"))||0,n=parseFloat(this.attr("cy"))||0,a=parseFloat(this.attr("rx"))||0,l=parseFloat(this.attr("ry"))||0,new Wd({x:o,y:n},a,l);case"POLYLINE":return d=c.getPointsFromSvgNode(this),new ah(d);case"POLYGON":return(d=c.getPointsFromSvgNode(this)).length>1&&d.push(d[0]),new ah(d);case"PATH":return h=this.attr("d"),mh.isDataSupported(h)||(h=c.normalizePathData(h)),new mh(h);case"LINE":return u=parseFloat(this.attr("x1"))||0,f=parseFloat(this.attr("y1"))||0,p=parseFloat(this.attr("x2"))||0,m=parseFloat(this.attr("y2"))||0,new Vd({x:u,y:f},{x:p,y:m})}return this.getBBox()},d.findIntersection=function(t,e){var i=this.svg().node;e=e||i;var r=this.getBBox({target:e}),o=r.center();if(r.intersectionWithLineFromCenterToPoint(t)){var n,s=this.tagName();if("RECT"===s){var a=new ih(parseFloat(this.attr("x")||0),parseFloat(this.attr("y")||0),parseFloat(this.attr("width")),parseFloat(this.attr("height"))),l=this.getTransformToElement(e),d=c.decomposeMatrix(l),h=i.createSVGTransform();h.setRotate(-d.rotation,o.x,o.y);var u=c.transformRect(a,h.matrix.multiply(l));n=new ih(u).intersectionWithLineFromCenterToPoint(t,d.rotation)}else if("PATH"===s||"POLYGON"===s||"POLYLINE"===s||"CIRCLE"===s||"ELLIPSE"===s){var p,f,m,g,v,b=("PATH"===s?this:this.convertToPath()).sample(),y=1/0,x=[];for(p=0;p<b.length;p++)f=b[p],m=(m=c.createSVGPoint(f.x,f.y)).matrixTransform(this.getTransformToElement(e)),(v=(f=new zd(m)).distance(o)+(g=1.1*f.distance(t)))<y?(y=v,x=[{sample:f,refDistance:g}]):v<y+1&&x.push({sample:f,refDistance:g});x.sort((function(t,e){return t.refDistance-e.refDistance})),x[0]&&(n=x[0].sample)}return n}},d.setAttribute=function(t,e){const i=this.node;if(null===e)return this.removeAttr(t),this;const r=v[t],{ns:o}=c.qualifyAttr(r);return o?i.setAttributeNS(o,r,e):"id"===r?i.id=e:i.setAttribute(r,e),this},c.createSvgDocument=function(e){if(e){const i=`<svg xmlns="${t.svg}" xmlns:xlink="${t.xlink}" version="1.1">${e}</svg>`,{documentElement:r}=c.parseXML(i,{async:!1});return r}const i=document.createElementNS(t.svg,"svg");return i.setAttributeNS(t.xmlns,"xmlns:xlink",t.xlink),i.setAttribute("version","1.1"),i},c.createSVGStyle=function(t){const{node:e}=c("style",{type:"text/css"},[c.createCDATASection(t)]);return e},c.createCDATASection=function(t=""){return document.implementation.createDocument(null,"xml",null).createCDATASection(t)},c.idCounter=0,c.uniqueId=function(){return"v-"+ ++c.idCounter},c.toNode=function(t){return c.isV(t)?t.node:t.nodeName&&t||t[0]},c.ensureId=function(t){return(t=c.toNode(t)).id||(t.id=c.uniqueId())},c.sanitizeText=function(t){return(t||"").replace(/ /g,"")},c.isUndefined=function(t){return void 0===t},c.isString=function(t){return"string"==typeof t},c.isObject=function(t){return t&&"object"==typeof t},c.isArray=Array.isArray,c.parseXML=function(t,e){var i;e=e||{};try{var r=new DOMParser;c.isUndefined(e.async)||(r.async=e.async),i=r.parseFromString(t,"text/xml")}catch(t){i=void 0}if(!i||i.getElementsByTagName("parsererror").length)throw new Error("Invalid XML: "+t);return i};const g=Object.create(null);["baseFrequency","baseProfile","clipPathUnits","contentScriptType","contentStyleType","diffuseConstant","edgeMode","externalResourcesRequired","filterRes","filterUnits","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].forEach((t=>g[t]=t)),g.xlinkShow="xlink:show",g.xlinkRole="xlink:role",g.xlinkActuate="xlink:actuate",g.xlinkHref="xlink:href",g.xlinkType="xlink:type",g.xlinkTitle="xlink:title",g.xmlBase="xml:base",g.xmlLang="xml:lang",g.xmlSpace="xml:space";const v=new Proxy(g,{get:(t,e)=>c.supportCamelCaseAttributes?e in t?t[e]:t[e]=e.replace(/[A-Z]/g,"-$&").toLowerCase():e});Object.defineProperty(c,"attributeNames",{enumerable:!0,value:v,writable:!1}),Object.defineProperty(c,"supportCamelCaseAttributes",{enumerable:!0,value:!0,writable:!0}),c.qualifyAttr=function(e){if(-1!==e.indexOf(":")){var i=e.split(":");return{ns:t[i[0]],local:i[1]}}return{ns:null,local:e}},c.transformSeparatorRegex=/[ ,]+/,c.transformRegex=/\b\w+\([^()]+\)/g,c.transformFunctionRegex=/\b(\w+)\(([^()]+)\)/,c.transformTranslateRegex=/\btranslate\(([^()]+)\)/,c.transformRotateRegex=/\brotate\(([^()]+)\)/,c.transformScaleRegex=/\bscale\(([^()]+)\)/,c.transformStringToMatrix=function(t){let e=c.createSVGMatrix();const i=t&&t.match(c.transformRegex);if(!i)return e;const r=i.length;for(let t=0;t<r;t++){const r=i[t].match(c.transformFunctionRegex);if(r){let t,i,o,n,s,a=c.createSVGMatrix();const l=r[1].toLowerCase(),d=r[2].split(c.transformSeparatorRegex);switch(l){case"scale":t=parseFloat(d[0]),i=void 0===d[1]?t:parseFloat(d[1]),a=a.scaleNonUniform(t,i);break;case"translate":o=parseFloat(d[0]),n=parseFloat(d[1]),a=a.translate(o,n);break;case"rotate":s=parseFloat(d[0]),o=parseFloat(d[1])||0,n=parseFloat(d[2])||0,a=0!==o||0!==n?a.translate(o,n).rotate(s).translate(-o,-n):a.rotate(s);break;case"skewx":s=parseFloat(d[0]),a=a.skewX(s);break;case"skewy":s=parseFloat(d[0]),a=a.skewY(s);break;case"matrix":a.a=parseFloat(d[0]),a.b=parseFloat(d[1]),a.c=parseFloat(d[2]),a.d=parseFloat(d[3]),a.e=parseFloat(d[4]),a.f=parseFloat(d[5]);break;default:continue}e=e.multiply(a)}}return e},c.matrixToTransformString=function(t){return t||(t=!0),"matrix("+(void 0!==t.a?t.a:1)+","+(void 0!==t.b?t.b:0)+","+(void 0!==t.c?t.c:0)+","+(void 0!==t.d?t.d:1)+","+(void 0!==t.e?t.e:0)+","+(void 0!==t.f?t.f:0)+")"},c.parseTransformString=function(t){var e,i,r;if(t){var o=c.transformSeparatorRegex;if(t.trim().indexOf("matrix")>=0){var n=c.transformStringToMatrix(t),s=c.decomposeMatrix(n);e=[s.translateX,s.translateY],r=[s.scaleX,s.scaleY],i=[s.rotation];var a=[];0===e[0]&&0===e[1]||a.push("translate("+e+")"),1===r[0]&&1===r[1]||a.push("scale("+r+")"),0!==i[0]&&a.push("rotate("+i+")"),t=a.join(" ")}else{const n=t.match(c.transformTranslateRegex);n&&(e=n[1].split(o));const s=t.match(c.transformRotateRegex);s&&(i=s[1].split(o));const a=t.match(c.transformScaleRegex);a&&(r=a[1].split(o))}}var l=r&&r[0]?parseFloat(r[0]):1;return{value:t,translate:{tx:e&&e[0]?parseInt(e[0],10):0,ty:e&&e[1]?parseInt(e[1],10):0},rotate:{angle:i&&i[0]?parseInt(i[0],10):0,cx:i&&i[1]?parseInt(i[1],10):void 0,cy:i&&i[2]?parseInt(i[2],10):void 0},scale:{sx:l,sy:r&&r[1]?parseFloat(r[1]):l}}},c.deltaTransformPoint=function(t,e){return{x:e.x*t.a+e.y*t.c+0,y:e.x*t.b+e.y*t.d+0}},c.decomposeMatrix=function(t){var e=c.deltaTransformPoint(t,{x:0,y:1}),n=c.deltaTransformPoint(t,{x:1,y:0}),s=180/i*r(e.y,e.x)-90,a=180/i*r(n.y,n.x);return{translateX:t.e,translateY:t.f,scaleX:o(t.a*t.a+t.b*t.b),scaleY:o(t.c*t.c+t.d*t.d),skewX:s,skewY:a,rotation:s}},c.matrixToScale=function(t){var e,i,r,n;return t?(e=c.isUndefined(t.a)?1:t.a,n=c.isUndefined(t.d)?1:t.d,i=t.b,r=t.c):e=n=1,{sx:i?o(e*e+i*i):e,sy:r?o(r*r+n*n):n}},c.matrixToRotate=function(t){var e={x:0,y:1};return t&&(e=c.deltaTransformPoint(t,e)),{angle:gd(bd(r(e.y,e.x))-90)}},c.matrixToTranslate=function(t){return{tx:t&&t.e||0,ty:t&&t.f||0}},c.isV=function(t){return t instanceof c},c.isVElement=c.isV,c.isSVGGraphicsElement=function(t){return!!t&&((t=c.toNode(t))instanceof SVGElement&&"function"==typeof t.getScreenCTM)};var b=c("svg").node;return c.createSVGMatrix=function(t){var e=b.createSVGMatrix();for(var i in t)e[i]=t[i];return e},c.createSVGTransform=function(t){return c.isUndefined(t)?b.createSVGTransform():(t instanceof SVGMatrix||(t=c.createSVGMatrix(t)),b.createSVGTransformFromMatrix(t))},c.createSVGPoint=function(t,e){var i=b.createSVGPoint();return i.x=t,i.y=e,i},c.transformRect=function(t,e){var i=b.createSVGPoint();i.x=t.x,i.y=t.y;var r=i.matrixTransform(e);i.x=t.x+t.width,i.y=t.y;var o=i.matrixTransform(e);i.x=t.x+t.width,i.y=t.y+t.height;var a=i.matrixTransform(e);i.x=t.x,i.y=t.y+t.height;var l=i.matrixTransform(e),c=n(r.x,o.x,a.x,l.x),d=s(r.x,o.x,a.x,l.x),h=n(r.y,o.y,a.y,l.y),u=s(r.y,o.y,a.y,l.y);return new ih(c,h,d-c,u-h)},c.transformPoint=function(t,e){return new zd(c.createSVGPoint(t.x,t.y).matrixTransform(e))},c.transformLine=function(t,e){return new Vd(c.transformPoint(t.start,e),c.transformPoint(t.end,e))},c.transformPolyline=function(t,e){var i=t instanceof ah?t.points:t;c.isArray(i)||(i=[]);for(var r=[],o=0,n=i.length;o<n;o++)r[o]=c.transformPoint(i[o],e);return new ah(r)},c.styleToObject=function(t){for(var e={},i=t.split(";"),r=0;r<i.length;r++){var o=i[r].split("=");e[o[0].trim()]=o[1].trim()}return e},c.createSlicePathData=function(t,e,r,o){var n=2*i-1e-6,s=t,c=e,d=r,h=o,u=(h<d&&(u=d,d=h,h=u),h-d),p=u<i?"0":"1",f=a(d),m=l(d),g=a(h),v=l(h);return u>=n?s?"M0,"+c+"A"+c+","+c+" 0 1,1 0,"+-c+"A"+c+","+c+" 0 1,1 0,"+c+"M0,"+s+"A"+s+","+s+" 0 1,0 0,"+-s+"A"+s+","+s+" 0 1,0 0,"+s+"Z":"M0,"+c+"A"+c+","+c+" 0 1,1 0,"+-c+"A"+c+","+c+" 0 1,1 0,"+c+"Z":s?"M"+c*f+","+c*m+"A"+c+","+c+" 0 "+p+",1 "+c*g+","+c*v+"L"+s*g+","+s*v+"A"+s+","+s+" 0 "+p+",0 "+s*f+","+s*m+"Z":"M"+c*f+","+c*m+"A"+c+","+c+" 0 "+p+",1 "+c*g+","+c*v+"L0,0Z"},c.mergeAttrs=function(t,e){for(var i in e)"class"===i?t[i]=t[i]?t[i]+" "+e[i]:e[i]:"style"===i?c.isObject(t[i])&&c.isObject(e[i])?t[i]=c.mergeAttrs(t[i],e[i]):c.isObject(t[i])?t[i]=c.mergeAttrs(t[i],c.styleToObject(e[i])):c.isObject(e[i])?t[i]=c.mergeAttrs(c.styleToObject(t[i]),e[i]):t[i]=c.mergeAttrs(c.styleToObject(t[i]),c.styleToObject(e[i])):t[i]=e[i];return t},c.annotateString=function(t,e,i){e=e||[];for(var r,o,n,s=(i=i||{}).offset||0,a=[],l=[],d=0;d<t.length;d++){o=l[d]=t[d];for(var h=0;h<e.length;h++){var u=e[h],p=u.start+s,f=u.end+s;d>=p&&d<f&&(c.isObject(o)?o.attrs=c.mergeAttrs(c.mergeAttrs({},o.attrs),u.attrs):o=l[d]={t:t[d],attrs:u.attrs},i.includeAnnotationIndices&&(o.annotations||(o.annotations=[])).push(h))}(n=l[d-1])?c.isObject(o)&&c.isObject(n)?JSON.stringify(o.attrs)===JSON.stringify(n.attrs)?r.t+=o.t:(a.push(r),r=o):c.isObject(o)||c.isObject(n)?(a.push(r),r=o):r=(r||"")+o:r=o}return r&&a.push(r),a},c.findAnnotationsAtIndex=function(t,e){var i=[];return t&&t.forEach((function(t){t.start<e&&e<=t.end&&i.push(t)})),i},c.findAnnotationsBetweenIndexes=function(t,e,i){var r=[];return t&&t.forEach((function(t){(e>=t.start&&e<t.end||i>t.start&&i<=t.end||t.start>=e&&t.end<i)&&r.push(t)})),r},c.shiftAnnotations=function(t,e,i){return t&&t.forEach((function(t){t.start<e&&t.end>=e?t.end+=i:t.start>=e&&(t.start+=i,t.end+=i)})),t},c.convertLineToPathData=function(t){return["M",(t=c(t)).attr("x1"),t.attr("y1"),"L",t.attr("x2"),t.attr("y2")].join(" ")},c.convertPolygonToPathData=function(t){var e=c.getPointsFromSvgNode(t);return 0===e.length?null:c.svgPointsToPath(e)+" Z"},c.convertPolylineToPathData=function(t){var e=c.getPointsFromSvgNode(t);return 0===e.length?null:c.svgPointsToPath(e)},c.svgPointsToPath=function(t){for(var e=0,i=t.length;e<i;e++)t[e]=t[e].x+" "+t[e].y;return"M "+t.join(" L")},c.getPointsFromSvgNode=function(t){var e=[],i=(t=c.toNode(t)).points;if(i)for(var r=0,o=i.numberOfItems;r<o;r++)e.push(i.getItem(r));return e},c.KAPPA=.551784,c.convertCircleToPathData=function(t){t=c(t);var e=parseFloat(t.attr("cx"))||0,i=parseFloat(t.attr("cy"))||0,r=parseFloat(t.attr("r")),o=r*c.KAPPA;return["M",e,i-r,"C",e+o,i-r,e+r,i-o,e+r,i,"C",e+r,i+o,e+o,i+r,e,i+r,"C",e-o,i+r,e-r,i+o,e-r,i,"C",e-r,i-o,e-o,i-r,e,i-r,"Z"].join(" ")},c.convertEllipseToPathData=function(t){t=c(t);var e=parseFloat(t.attr("cx"))||0,i=parseFloat(t.attr("cy"))||0,r=parseFloat(t.attr("rx")),o=parseFloat(t.attr("ry"))||r,n=r*c.KAPPA,s=o*c.KAPPA;return["M",e,i-o,"C",e+n,i-o,e+r,i-s,e+r,i,"C",e+r,i+s,e+n,i+o,e,i+o,"C",e-n,i+o,e-r,i+s,e-r,i,"C",e-r,i-s,e-n,i-o,e,i-o,"Z"].join(" ")},c.convertRectToPathData=function(t){return t=c(t),c.rectToPath({x:parseFloat(t.attr("x"))||0,y:parseFloat(t.attr("y"))||0,width:parseFloat(t.attr("width"))||0,height:parseFloat(t.attr("height"))||0,rx:parseFloat(t.attr("rx"))||0,ry:parseFloat(t.attr("ry"))||0})},c.rectToPath=function(t){var e=t.x,i=t.y,r=t.width,o=t.height,s=n(t.rx||t["top-rx"]||0,r/2),a=n(t.rx||t["bottom-rx"]||0,r/2),l=n(t.ry||t["top-ry"]||0,o/2),c=n(t.ry||t["bottom-ry"]||0,o/2);return(s||a||l||c?["M",e,i+l,"v",o-l-c,"a",a,c,0,0,0,a,c,"h",r-2*a,"a",a,c,0,0,0,a,-c,"v",-(o-c-l),"a",s,l,0,0,0,-s,-l,"h",-(r-2*s),"a",s,l,0,0,0,-s,l,"Z"]:["M",e,i,"H",e+r,"V",i+o,"H",e,"V",i,"Z"]).join(" ")},c.normalizePathData=function(){var t="\t\n\v\f\r \u2028\u2029",e=new RegExp("([a-z])["+t+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+t+"]*,?["+t+"]*)+)","ig"),i=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+t+"]*,?["+t+"]*","ig"),r=Math,o=r.PI,n=r.sin,s=r.cos,a=r.tan,l=r.asin,c=r.sqrt,d=r.abs;function h(t,e,i,r,o,n){var s=1/3,a=2/3;return[s*t+a*i,s*e+a*r,s*o+a*i,s*n+a*r,o,n]}function u(t,e,i){return{x:t*s(i)-e*n(i),y:t*n(i)+e*s(i)}}function p(t,e,i,r,h,f,m,g,v,b){var y,x=120*o/180,w=o/180*(+h||0),_=[];if(b)L=b[0],O=b[1],E=b[2],I=b[3];else{t=(y=u(t,e,-w)).x,e=y.y;var k=(t-(g=(y=u(g,v,-w)).x))/2,C=(e-(v=y.y))/2,A=k*k/(i*i)+C*C/(r*r);A>1&&(i*=A=c(A),r*=A);var S=i*i,T=r*r,P=(f==m?-1:1)*c(d((S*T-S*C*C-T*k*k)/(S*C*C+T*k*k)));if(!Number.isFinite(P))return[t,e,g,v,g,v];var E=P*i*C/r+(t+g)/2,I=P*-r*k/i+(e+v)/2,L=l(((e-I)/r).toFixed(9)),O=l(((v-I)/r).toFixed(9));(L=t<E?o-L:L)<0&&(L=2*o+L),(O=g<E?o-O:O)<0&&(O=2*o+O),m&&L>O&&(L-=2*o),!m&&O>L&&(O-=2*o)}var R=O-L;if(d(R)>x){var $=O,M=g,N=v;_=p(g=E+i*s(O=L+x*(m&&O>L?1:-1)),v=I+r*n(O),i,r,h,0,m,M,N,[O,$,E,I])}R=O-L;var D=s(L),z=n(L),F=s(O),B=n(O),U=a(R/4),V=4/3*(i*U),j=4/3*(r*U),G=[t,e],H=[t+V*z,e-j*D],q=[g+V*B,v-j*F],W=[g,v];if(H[0]=2*G[0]-H[0],H[1]=2*G[1]-H[1],b)return[H,q,W].concat(_);for(var Y=[],X=(_=[H,q,W].concat(_).join().split(",")).length,J=0;J<X;J++)Y[J]=J%2?u(_[J-1],_[J],w).y:u(_[J],_[J+1],w).x;return Y}function f(t){if(Array.isArray(t)&&Array.isArray(t&&t[0])||(t=function(t){if(!t)return null;var r={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},o=[];return String(t).replace(e,(function(t,e,n){var s=[],a=e.toLowerCase();for(n.replace(i,(function(t,e){e&&s.push(+e)})),"m"===a&&s.length>2&&(o.push([e].concat(s.splice(0,2))),a="l",e="m"===e?"l":"L");s.length>=r[a]&&(o.push([e].concat(s.splice(0,r[a]))),r[a]););})),o}(t)),!t||!t.length)return[["M",0,0]];for(var r,o=[],n=0,s=0,a=0,l=0,c=t.length,d=0;d<c;d++){var h=[];o.push(h);var u,p,f=t[d];if((r=f[0])!=r.toUpperCase())switch(h[0]=r.toUpperCase(),h[0]){case"A":h[1]=f[1],h[2]=f[2],h[3]=f[3],h[4]=f[4],h[5]=f[5],h[6]=+f[6]+n,h[7]=+f[7]+s;break;case"V":h[1]=+f[1]+s;break;case"H":h[1]=+f[1]+n;break;case"M":for(a=+f[1]+n,l=+f[2]+s,u=f.length,p=1;p<u;p++)h[p]=+f[p]+(p%2?n:s);break;default:for(u=f.length,p=1;p<u;p++)h[p]=+f[p]+(p%2?n:s)}else for(var m=f.length,g=0;g<m;g++)h[g]=f[g];switch(h[0]){case"Z":n=+a,s=+l;break;case"H":n=h[1];break;case"V":s=h[1];break;case"M":a=h[h.length-2],l=h[h.length-1],n=h[h.length-2],s=h[h.length-1];break;default:n=h[h.length-2],s=h[h.length-1]}}return o}function m(t){var e=f(t),i={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null};function r(t,e,i){var r,o;if(!t)return["C",e.x,e.y,e.x,e.y,e.x,e.y];switch(t[0]in{T:1,Q:1}||(e.qx=null,e.qy=null),t[0]){case"M":e.X=t[1],e.Y=t[2];break;case"A":t=0===parseFloat(t[1])||0===parseFloat(t[2])?["L",t[6],t[7]]:["C"].concat(p.apply(0,[e.x,e.y].concat(t.slice(1))));break;case"S":"C"===i||"S"===i?(r=2*e.x-e.bx,o=2*e.y-e.by):(r=e.x,o=e.y),t=["C",r,o].concat(t.slice(1));break;case"T":"Q"===i||"T"===i?(e.qx=2*e.x-e.qx,e.qy=2*e.y-e.qy):(e.qx=e.x,e.qy=e.y),t=["C"].concat(h(e.x,e.y,e.qx,e.qy,t[1],t[2]));break;case"Q":e.qx=t[1],e.qy=t[2],t=["C"].concat(h(e.x,e.y,t[1],t[2],t[3],t[4]));break;case"H":t=["L"].concat(t[1],e.y);break;case"V":t=["L"].concat(e.x,t[1])}return t}function o(t,i){if(t[i].length>7){t[i].shift();for(var r=t[i];r.length;)n[i]="A",t.splice(i++,0,["C"].concat(r.splice(0,6)));t.splice(i,1),l=e.length}}for(var n=[],s="",a="",l=e.length,c=0;c<l;c++){e[c]&&(s=e[c][0]),"C"!==s&&(n[c]=s,c>0&&(a=n[c-1])),e[c]=r(e[c],i,a),"A"!==n[c]&&"C"===s&&(n[c]="C"),o(e,c);var d=e[c],u=d.length;i.x=d[u-2],i.y=d[u-1],i.bx=parseFloat(d[u-4])||i.x,i.by=parseFloat(d[u-3])||i.y}return e[0][0]&&"M"===e[0][0]||e.unshift(["M",0,0]),e}return function(t){return m(t).join(",").split(",").join(" ")}}(),c.namespace=t,c.g=su,c}();var lu=au;const cu="[object Arguments]",du="[object Array]",hu="[object Boolean]",uu="[object Date]",pu="[object Error]",fu="[object Function]",mu="[object Map]",gu="[object Number]",vu="[object Object]",bu="[object RegExp]",yu="[object Set]",xu="[object String]",wu="[object Symbol]",_u="[object WeakMap]",ku="[object ArrayBuffer]",Cu="[object DataView]",Au="[object Float32Array]",Su="[object Float64Array]",Tu="[object Int8Array]",Pu="[object Int16Array]",Eu="[object Int32Array]",Iu="[object Uint8Array]",Lu="[object Uint8ClampedArray]",Ou="[object Uint16Array]",Ru="[object Uint32Array]",$u={[cu]:!0,[du]:!0,[ku]:!0,[Cu]:!0,[hu]:!0,[uu]:!0,[Au]:!0,[Su]:!0,[Tu]:!0,[Pu]:!0,[Eu]:!0,[mu]:!0,[gu]:!0,[vu]:!0,[bu]:!0,[yu]:!0,[xu]:!0,[wu]:!0,[Iu]:!0,[Lu]:!0,[Ou]:!0,[Ru]:!0,[pu]:!1,[fu]:!1,[_u]:!1},Mu="\\ud800-\\udfff",Nu="\\u2700-\\u27bf",Du="a-z\\xdf-\\xf6\\xf8-\\xff",zu="A-Z\\xc0-\\xd6\\xd8-\\xde",Fu="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Bu="[']",Uu=`[${Fu}]`,Vu="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\u1ab0-\\u1aff\\u1dc0-\\u1dff]",ju=`[${Nu}]`,Gu=`[${Du}]`,Hu=`[^${Mu}${Fu+"\\d"+Nu+Du+zu}]`,qu="\\ud83c[\\udffb-\\udfff]",Wu=`[^${Mu}]`,Yu="(?:\\ud83c[\\udde6-\\uddff]){2}",Xu="[\\ud800-\\udbff][\\udc00-\\udfff]",Ju=`[${zu}]`,Qu=`(?:${Gu}|${Hu})`,Ku=`(?:${Ju}|${Hu})`,Zu=`(?:${Bu}(?:d|ll|m|re|s|t|ve))?`,tp=`(?:${Bu}(?:D|LL|M|RE|S|T|VE))?`,ep=`${`(?:${Vu}|${qu})`}?`,ip="[\\ufe0e\\ufe0f]?",rp=ip+ep+`(?:\\u200d(?:${[Wu,Yu,Xu].join("|")})${ip+ep})*`,op=`(?:${[ju,Yu,Xu].join("|")})${rp}`,np=RegExp([`${Ju}?${Gu}+${Zu}(?=${[Uu,Ju,"$"].join("|")})`,`${Ku}+${tp}(?=${[Uu,Ju+Qu,"$"].join("|")})`,`${Ju}?${Qu}+${Zu}`,`${Ju}+${tp}`,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])","\\d+",op].join("|"),"g"),sp="__hash_undefined__",ap=/^\[object (?:Float(?:32|64)|(?:Int|Uint)(?:8|16|32)|Uint8Clamped)Array\]$/,lp=`(?:${[`${Wu}${Vu}?`,Vu,Yu,Xu,`[${Mu}]`].join("|")})`,cp=RegExp(`${qu}(?=${qu})|${lp+rp}`,"g"),dp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,hp=/^\w*$/,up=".".charCodeAt(0),pp=/\\(\\)?/g,fp=RegExp("[^.[\\]]+|\\[(?:([^\"'][^[]*)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))","g"),mp=/^(?:0|[1-9]\d*)$/,gp=RegExp.prototype.test.bind(/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/),vp=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,bp=t=>cp.test(t),yp=t=>bp(t)?(t=>t.match(cp)||[])(t):(t=>t.split(""))(t),xp=t=>null==t?[]:wp(t).map((e=>t[e])),wp=t=>Ip(t)?_p(t):Object.keys(Object(t)),_p=(t,e)=>{const i=Array.isArray(t),r=!i&&Ap(t)&&Rp(t)===cu,o=!i&&!r&&Fp(t),n=i||r||o,s=t.length,a=new Array(n?s:0);let l=n?-1:s;for(;++l<s;)a[l]=`${l}`;for(const i in t)!e&&!hasOwnProperty.call(t,i)||n&&("length"===i||df(i,s))||a.push(i);return a},kp=(t,e)=>{let{length:i}=t;for(;i--;)if(Cp(t[i][0],e))return i;return-1},Cp=(t,e)=>t===e||t!=t&&e!=e,Ap=t=>null!=t&&"object"==typeof t,Sp=(t,e,i)=>{if(!Wf(i))return!1;const r=typeof e;return!!("number"==r?Ip(i)&&e>-1&&e<i.length:"string"==r&&e in i)&&Cp(i[e],t)},Tp=t=>{const e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Object.prototype)},Pp=(t,e,i)=>{const r=t[e];hasOwnProperty.call(t,e)&&Cp(r,i)&&(void 0!==i||e in t)||(t[e]=i)},Ep=(t,e,i)=>{let r=-1;const o=e.length;for(;++r<o;){const o=e[r];Pp(i,o,t[o])}return i},Ip=t=>null!=t&&"function"!=typeof t&&"number"==typeof t.length&&t.length>-1&&t.length%1==0,Lp=t=>"symbol"==typeof t||Ap(t)&&Rp(t)===wu,Op=(t,e)=>{let i=-1;const r=t.length;for(e||(e=new Array(r));++i<r;)e[i]=t[i];return e},Rp=t=>null==t?void 0===t?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t),$p=t=>{const e=new t.constructor(t.byteLength);return new Uint8Array(e).set(new Uint8Array(t)),e},Mp=(t,e)=>{const i=e?$p(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.length)},Np=t=>"function"!=typeof t.constructor||Tp(t)?{}:Object.create(Object.getPrototypeOf(t)),Dp=t=>{if(null==t)return[];t=Object(t);return Object.getOwnPropertySymbols(t).filter((e=>propertyIsEnumerable.call(t,e)))};const zp=(t,e,i)=>{const r=t.constructor;switch(e){case ku:return $p(t);case hu:case uu:return new r(+t);case Cu:return function(t,e){const i=e?$p(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.byteLength)}(t,i);case Au:case Su:case Tu:case Pu:case Eu:case Iu:case Lu:case Ou:case Ru:return Mp(t,i);case mu:case gu:case xu:return new r(t);case bu:return(t=>{const e=new t.constructor(t.source,/\w*$/.exec(t));return e.lastIndex=t.lastIndex,e})(t);case yu:return new r;case wu:return Symbol.prototype.valueOf?Object(Symbol.prototype.valueOf.call(t)):{}}},Fp=t=>Ap(t)&&ap.test(Rp(t)),Bp=t=>{const e=Object.keys(t);return Array.isArray(t)||null==t||e.push(...Dp(Object(t))),e},Up=t=>{const e=[];for(;t;)e.push(...Dp(t)),t=Object.getPrototypeOf(Object(t));return e},Vp=t=>{const e=[];for(const i in t)e.push(i);return Array.isArray(t)||e.push(...Up(t)),e},jp=({__data__:t},e)=>{const i=t;return uf(e)?i["string"==typeof e?"string":"hash"]:i.map},Gp=(t,e,i)=>t===e||(null==t||null==e||!Ap(t)&&!Ap(e)?t!=t&&e!=e:Hp(t,e,Gp,i)),Hp=(t,e,i,r)=>{let o=Array.isArray(t);const n=Array.isArray(e);let s=o?du:Rp(t),a=n?du:Rp(e);s=s==cu?vu:s,a=a==cu?vu:a;let l=s==vu;const c=a==vu,d=s==a;if(d&&!l)return r||(r=new Vf),o||Fp(t)?qp(t,e,!1,i,r):Jp(t,e,s,i,r);const h=l&&hasOwnProperty.call(t,"__wrapped__"),u=c&&hasOwnProperty.call(e,"__wrapped__");if(h||u){const o=h?t.value():t,n=u?e.value():e;return r||(r=new Vf),i(o,n,r)}return!!d&&(r||(r=new Vf),((t,e,i,r)=>{const o=Bp(t),n=o.length;if(n!=Bp(e).length)return!1;let s,a=n;for(;a--;)if(s=o[a],!hasOwnProperty.call(e,s))return!1;const l=r.get(t),c=r.get(e);if(l&&c)return l==e&&c==t;let d,h=!0;for(r.set(t,e),r.set(e,t);++a<n;){s=o[a];const n=t[s],l=e[s];if(n!==l&&!i(n,l,r)){h=!1;break}d||(d="constructor"==s)}if(h&&!d){const i=t.constructor,r=e.constructor;i==r||!("constructor"in t)||!("constructor"in e)||"function"==typeof i&&i instanceof i&&"function"==typeof r&&r instanceof r||(h=!1)}return r.delete(t),r.delete(e),h})(t,e,i,r))},qp=(t,e,i,r,o)=>{const n=t.length;if(n!=e.length)return!1;const s=o.get(t),a=o.get(e);if(s&&a)return s==e&&a==t;let l=-1,c=!0;const d=i?new qf:void 0;for(o.set(t,e),o.set(e,t);++l<n;){const i=t[l],n=e[l];if(d){if(!Wp(e,((t,e)=>{if(!Yp(d,e)&&(i===t||r(i,t,o)))return d.push(e)}))){c=!1;break}}else if(i!==n&&!r(i,n,o)){c=!1;break}}return o.delete(t),o.delete(e),c},Wp=(t,e)=>{let i=-1;const r=null==t?0:t.length;for(;++i<r;)if(e(t[i],i,t))return!0;return!1},Yp=(t,e)=>t.has(e),Xp=(t,e,i,r)=>!(t.byteLength!=e.byteLength||!i(new Uint8Array(t),new Uint8Array(e),r)),Jp=(t,e,i,r,o)=>{switch(i){case Cu:return t.byteLength==e.byteLength&&t.byteOffset==e.byteOffset&&(t=t.buffer,e=e.buffer,Xp(t,e,r,o));case ku:return Xp(t,e,r,o);case hu:case uu:case gu:return Cp(+t,+e);case pu:return t.name==e.name&&t.message==e.message;case bu:case xu:return t==`${e}`;case mu:let i=Qp;case yu:if(i||(i=Kp),t.size!=e.size)return!1;const n=o.get(t);if(n)return n==e;o.set(t,e);const s=qp(i(t),i(e),!0,r,o);return o.delete(t),s;case wu:return Symbol.prototype.valueOf.call(t)==Symbol.prototype.valueOf.call(e)}return!1},Qp=t=>{let e=-1,i=Array(t.size);return t.forEach(((t,r)=>{i[++e]=[r,t]})),i},Kp=t=>{let e=-1;const i=new Array(t.size);return t.forEach((t=>{i[++e]=t})),i},Zp=(t,e)=>{if(Array.isArray(t))return!1;const i=typeof t;return!("number"!==i&&"boolean"!==i&&null!=t&&!Lp(t))||(hp.test(t)||!dp.test(t)||null!=e&&t in Object(e))},tf=(t,e)=>Array.isArray(t)?t:Zp(t,e)?[t]:(t=>{const e=[];return t.charCodeAt(0)===up&&e.push(""),t.replace(fp,((t,i,r,o)=>{let n=t;r?n=o.replace(pp,"$1"):i&&(n=i.trim()),e.push(n)})),e})(`${t}`),ef=(t,e)=>{let i=0;const r=(e=tf(e,t)).length;for(;null!=t&&i<r;)t=t[nf(e[i])],i++;return i&&i==r?t:void 0};function rf(t,e){if(t!==e){const i=void 0!==t,r=null===t,o=t==t,n=Lp(t),s=void 0!==e,a=null===e,l=e==e,c=Lp(e);if(!a&&!c&&!n&&t>e||n&&s&&l&&!a&&!c||r&&s&&l||!i&&l||!o)return 1;if(!r&&!n&&!c&&t<e||c&&i&&o&&!r&&!n||a&&i&&o||!s&&o||!l)return-1}return 0}const of=(t,e)=>{let i=(t,e)=>!!(null==t?0:t.length)&&t.indexOf(e)>-1,r=!0;const o=[],n=e.length;if(!t.length)return o;e.length>=200&&(i=(t,e)=>t.has(e),r=!1,e=new qf(e));t:for(let s in t){let a=t[s];const l=a;if(a=0!==a?a:0,r&&l==l){let t=n;for(;t--;)if(e[t]===l)continue t;o.push(a)}else i(e,l)||o.push(a)}return o},nf=t=>{if("string"==typeof t||Lp(t))return t;const e=`${t}`;return"0"==e&&1/t==-1/0?"-0":e},sf=(t,e=!1,i=!1,r=!0,o,n,s,a)=>{let l;if(o&&(l=s?o(t,n,s,a):o(t)),void 0!==l)return l;if(!Wf(t))return t;const c=Array.isArray(t),d=Rp(t);if(c){if(l=(t=>{const e=t.length;let i=new t.constructor(e);return e&&"string"==typeof t[0]&&hasOwnProperty.call(t,"index")&&(i.index=t.index,i.input=t.input),i})(t),!e)return Op(t,l)}else{const r="function"==typeof t;if(d===vu||d===cu||r&&!s){if(l=i||r?{}:Np(t),!e)return i?af(t,Ep(t,Object.keys(t),l)):((t,e)=>Ep(t,Dp(t),e))(t,Object.assign(l,t))}else{if(r||!$u[d])return s?t:{};l=zp(t,d,e)}}a||(a=new Vf);const h=a.get(t);if(h)return h;if(a.set(t,l),(t=>Ap(t)&&Rp(t)==mu)(t))return t.forEach(((n,s)=>{l.set(s,sf(n,e,i,r,o,s,t,a))})),l;if((t=>Ap(t)&&Rp(t)==yu)(t))return t.forEach((n=>{l.add(sf(n,e,i,r,o,n,t,a))})),l;if(Fp(t))return l;const u=c?void 0:(r?i?Vp:Bp:i?pf:wp)(t);return(u||t).forEach(((n,s)=>{u&&(n=t[s=n]),Pp(l,s,sf(n,e,i,r,o,s,t,a))})),l},af=(t,e)=>Ep(t,Up(t),e),lf=(t,e)=>e.length<2?t:ef(t,e.slice(0,-1)),cf=(t,e,i)=>{if(!Wf(t))return t;const r=(e=tf(e,t)).length,o=r-1;let n=-1,s=t;for(;null!=s&&++n<r;){const t=nf(e[n]);let r=i;if(n!=o){const i=s[t];r=void 0,void 0===r&&(r=Wf(i)?i:df(e[n+1])?[]:{})}Pp(s,t,r),s=s[t]}return t},df=(t,e)=>{const i=typeof t;return!!(e=null==e?Number.MAX_SAFE_INTEGER:e)&&("number"===i||"symbol"!==i&&mp.test(t))&&t>-1&&t%1==0&&t<e},hf=(t,e)=>{e=tf(e,t),t=lf(t,e);const i=e[e.length-1];return null==t||delete t[nf(i)]},uf=t=>{const e=typeof t;return"string"===e||"number"===e||"symbol"===e||"boolean"===e?"__proto__"!==t:null===t},pf=t=>{const e=[];for(const i in t)e.push(i);return e},ff=(t,e)=>{if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]};function mf(t,e=!1){return(i,...r)=>{let o=-1,n=r.length,s=n>1?r[n-1]:void 0;const a=n>2?r[2]:void 0;for(s=t.length>3&&"function"==typeof s?(n--,s):e?(t,e)=>{if(Array.isArray(t)&&!Array.isArray(e))return e}:void 0,a&&Sp(r[0],r[1],a)&&(s=n<3?void 0:s,n=1),i=Object(i);++o<n;){const e=r[o];e&&t(i,e,o,s)}return i}}const gf=(t,e,i,r,o)=>{t!==e&&wm(e,((n,s)=>{if(Wf(n))o||(o=new Vf),vf(t,e,s,i,gf,r,o);else{let i=r?r(t[s],n,`${s}`,t,e,o):void 0;void 0===i&&(i=n),bf(t,s,i)}}))},vf=(t,e,i,r,o,n,s)=>{const a=ff(t,i),l=ff(e,i),c=s.get(l);if(c)return void bf(t,i,c);let d=n?n(a,l,`${i}`,t,e,s):void 0,h=void 0===d;if(h){const t=Array.isArray(l),e=!t&&Fp(l);d=l,t||e?Array.isArray(a)?d=a:Ap(a)&&Ip(a)?d=Op(a):e?(h=!1,d=Mp(l,!0)):d=[]:cm(l)||Mf(l)?(d=a,Mf(a)?d=(t=>{t=Object(t);const e={};for(const i in t)e[i]=t[i];return e})(a):"function"!=typeof a&&Wf(a)||(d=Np(l))):h=!1}h&&(s.set(l,d),o(d,l,r,n,s),s.delete(l)),bf(t,i,d)},bf=(t,e,i)=>{(void 0!==i&&!Cp(t[e],i)||void 0===i&&!(e in t))&&Pp(t,e,i)};const yf=(t,e)=>t&&function(t,e,i){const r=Object(t),o=i(t);let{length:n}=o,s=-1;for(;n--;){const t=o[++s];if(!1===e(r[t],t,r))break}return t}(t,e,wp),xf=(t,e)=>{if(null==t)return t;if(!Ip(t))return yf(t,e);const i=t.length,r=Object(t);let o=-1;for(;++o<i&&!1!==e(r[o],o,r););return t};const wf=Set&&1/Kp(new Set([void 0,-0]))[1]==1/0?t=>new Set(t):()=>{};function _f(t,e,i,r,o,n){return Wf(t)&&Wf(e)&&(n.set(e,t),gf(t,e,void 0,_f,n),n.delete(e)),t}function kf(t,e,i){e=e.length?e.map((t=>Array.isArray(t)?e=>ef(e,1===t.length?t[0]:t):t)):[t=>t];let r=-1,o=-1;const n=Ip(t)?new Array(t.length):[];return xf(t,(t=>{const i=e.map((e=>e(t)));n[++o]={criteria:i,index:++r,value:t}})),function(t,e){let{length:i}=t;t.sort(e);for(;i--;)t[i]=t[i].value;return t}(n,((t,e)=>function(t,e,i){let r=-1;const o=t.criteria,n=e.criteria,s=o.length,a=i.length;for(;++r<s;){const t=r<a?i[r]:null,e=(t&&"function"==typeof t?t:rf)(o[r],n[r]);if(e)return t&&"function"!=typeof t?e*("desc"==t?-1:1):e}return t.index-e.index}(t,e,i)))}function Cf(t){return t==t&&!Wf(t)}function Af(t,e){return i=>null!=i&&(i[t]===e&&(void 0!==e||t in Object(i)))}function Sf(t,e){return null!=t&&zf(t,e,Df)}function Tf(t){const e=function(t){const e=wp(t);let i=e.length;for(;i--;){const r=e[i],o=t[r];e[i]=[r,o,Cf(o)]}return e}(t);return 1===e.length&&e[0][2]?Af(e[0][0],e[0][1]):i=>i===t||function(t,e,i,r){let o=i.length;const n=o,s=!r;if(null==t)return!n;let a,l;t=Object(t);for(;o--;)if(a=i[o],s&&a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1;for(;++o<n;){a=i[o];const n=a[0],c=t[n],d=a[1];if(s&&a[2]){if(void 0===c&&!(n in t))return!1}else{const i=new Vf;if(r&&(l=r(c,d,n,t,e,i)),!(void 0===l?Gp(d,c,i):l))return!1}}return!0}(i,t,e)}function Pf(t){return Zp(t)?(e=nf(t),t=>null==t?void 0:t[e]):function(t){return e=>ef(e,t)}(t);var e}function Ef(t){return"function"==typeof t?t:null==t?t=>t:"object"==typeof t?Array.isArray(t)?(e=t[0],i=t[1],Zp(e)&&Cf(i)?Af(nf(e),i):t=>{const r=ef(t,e);return void 0===r&&r===i?Sf(t,e):Gp(i,r)}):Tf(t):Pf(t);var e,i}function If(){const t=Ef;return arguments.length?t(arguments[0]):t}const Lf=(t,e,i,r)=>{let o=-1;const n=null==t?0:t.length;for(r&&n&&(i=t[++o]);++o<n;)i=e(i,t[o],o,t);return i},Of=(t,e,i,r,o)=>(o(t,((t,o,n)=>{i=r?(r=!1,t):e(i,t,o,n)})),i);const Rf=t=>Array.isArray(t)||Mf(t)||!(!t||!t[Symbol.isConcatSpreadable]);function $f(t,e,i,r,o){let n=-1;const s=t.length;for(i||(i=Rf),o||(o=[]);++n<s;){var a=t[n];e>0&&i(a)?e>1?$f(a,e-1,i,r,o):o.push(...a):r||(o[o.length]=a)}return o}const Mf=t=>Ap(t)&&"[object Arguments]"==Rp(t),Nf=(t,e,i)=>{let r=-1;const o=e.length,n={};for(;++r<o;){const o=e[r],s=ef(t,o);i(s,o)&&cf(n,tf(o,t),s)}return n},Df=(t,e)=>null!=t&&e in Object(t),zf=(t,e,i)=>{for(var r,o=-1,n=(e=tf(e,t)).length,s=!1;++o<n;){var a=nf(e[o]);if(!(s=null!=t&&i(t,a)))break;t=t[a]}return s||++o!=n?s:!!(n=null==t?0:t.length)&&("number"==typeof(r=n)&&r>-1&&r%1==0&&r<=Number.MAX_SAFE_INTEGER)&&df(a,n)&&(Array.isArray(t)||Mf(t))},Ff=(t,e)=>{if(void 0===e){const e=gp(t)?(t=>t.match(np))(t):(t=>t.match(vp))(t);return e||[]}return t.match(e)||[]},Bf=(Uf="toUpperCase",t=>{if(!t)return"";const e=bp(t)?yp(t):void 0,i=e?e[0]:t[0],r=e?((t,e,i)=>{const{length:r}=t;return i=void 0===i?r:i,!e&&i>=r?t:t.slice(e,i)})(e,1).join(""):t.slice(1);return i[Uf]()+r});var Uf;class Vf{constructor(t){const e=this.__data__=new jf(t);this.size=e.size}clear(){this.__data__=new jf,this.size=0}delete(t){const e=this.__data__,i=e.delete(t);return this.size=e.size,i}get(t){return this.__data__.get(t)}has(t){return this.__data__.has(t)}set(t,e){let i=this.__data__;if(i instanceof jf){const r=i.__data__;if(r.length<199)return r.push([t,e]),this.size=++i.size,this;i=this.__data__=new Gf(r)}return i.set(t,e),this.size=i.size,this}}class jf{constructor(t){let e=-1;const i=null==t?0:t.length;for(this.clear();++e<i;){const i=t[e];this.set(i[0],i[1])}}clear(){this.__data__=[],this.size=0}delete(t){const e=this.__data__,i=kp(e,t);if(i<0)return!1;return i==e.length-1?e.pop():e.splice(i,1),--this.size,!0}get(t){const e=this.__data__,i=kp(e,t);return i<0?void 0:e[i][1]}has(t){return kp(this.__data__,t)>-1}set(t,e){const i=this.__data__,r=kp(i,t);return r<0?(++this.size,i.push([t,e])):i[r][1]=e,this}}class Gf{constructor(t){let e=-1;const i=null==t?0:t.length;for(this.clear();++e<i;){const i=t[e];this.set(i[0],i[1])}}clear(){this.size=0,this.__data__={hash:new Hf,map:new Map,string:new Hf}}delete(t){const e=jp(this,t).delete(t);return this.size-=e?1:0,e}get(t){return jp(this,t).get(t)}has(t){return jp(this,t).has(t)}set(t,e){const i=jp(this,t),r=i.size;return i.set(t,e),this.size+=i.size==r?0:1,this}}class Hf{constructor(t){let e=-1;const i=null==t?0:t.length;for(this.clear();++e<i;){const i=t[e];this.set(i[0],i[1])}}clear(){this.__data__=Object.create(null),this.size=0}delete(t){const e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}get(t){const e=this.__data__[t];return e===sp?void 0:e}has(t){return void 0!==this.__data__[t]}set(t,e){const i=this.__data__;return this.size+=this.has(t)?0:1,i[t]=void 0===e?sp:e,this}}class qf{constructor(t){let e=-1;const i=null==t?0:t.length;for(this.__data__=new Gf;++e<i;)this.add(t[e])}add(t){return this.__data__.set(t,sp),this}has(t){return this.__data__.has(t)}}qf.prototype.push=qf.prototype.add;const Wf=function(t){return!!t&&("object"==typeof t||"function"==typeof t)},Yf=function(t){var e=Object.prototype.toString;return"number"==typeof t||!!t&&"object"==typeof t&&e.call(t)===gu},Xf=function(t){var e=Object.prototype.toString;return"string"==typeof t||!!t&&"object"==typeof t&&e.call(t)===xu},Jf=mf(((t,e)=>{if(Tp(e)||Ip(e))Ep(e,wp(e),t);else for(var i in e)hasOwnProperty.call(e,i)&&Pp(t,i,e[i])})),Qf=(t,...e)=>{let i=-1,r=e.length;const o=r>2?e[2]:void 0;for(o&&Sp(e[0],e[1],o)&&(r=1);++i<r;){const r=e[i];if(null==r)continue;const o=Object.keys(r),n=o.length;let s=-1;for(;++s<n;){const e=o[s],i=t[e];(void 0===i||Cp(i,Object.prototype[e])&&!hasOwnProperty.call(t,e))&&(t[e]=r[e])}}return t},Kf=function(...t){return t.push(void 0,_f),Am.apply(void 0,t)},Zf=Kf,tm=(t,e,...i)=>{let r=-1;const o="function"==typeof e,n=Ip(t)?new Array(t.length):[];return xf(t,(t=>{n[++r]=o?e.apply(t,i):em(t,e,...i)})),n},em=(t,e,...i)=>{e=tf(e,t);const r=null==(t=lf(t,e))?t:t[nf(function(t){const e=null==t?0:t.length;return e?t[e-1]:void 0}(e))];return null==r?void 0:r.apply(t,i)},im=(t,e,i)=>{let r=0,o=null==t?0:t.length;if(0==o)return 0;const n=(e=(i=If(i,2))(e))!=e,s=null===e,a=Lp(e),l=void 0===e;for(;r<o;){let c;const d=Math.floor((r+o)/2),h=i(t[d]),u=void 0!==h,p=null===h,f=h==h,m=Lp(h);c=n?f:l?f&&u:s?f&&u&&!p:a?f&&u&&!p&&!m:!p&&!m&&h<e,c?r=d+1:o=d}return Math.min(o,4294967294)},rm=(t,e)=>{let i=-1,r=(t,e)=>!!(null==t?0:t.length)&&t.indexOf(e)>-1;e=If(e,2);let o=!0;const{length:n}=t,s=[];let a=s;if(n>=200){const i=e?null:wf(t);if(i)return Kp(i);o=!1,r=(t,e)=>t.has(e),a=new qf}else a=e?[]:s;t:for(;++i<n;){let n=t[i];const l=e?e(n):n;if(n=0!==n?n:0,o&&l==l){let t=a.length;for(;t--;)if(a[t]===l)continue t;e&&a.push(l),s.push(n)}else r(a,l)||(a!==s&&a.push(l),s.push(n))}return s},om=t=>sf(t),nm=t=>sf(t,!0),sm=t=>{if(null==t)return!0;if(Ip(t)&&(Array.isArray(t)||"string"==typeof t||"function"==typeof t.splice||Fp(t)||Mf(t)))return!t.length;const e=Rp(t);if("[object Map]"==e||"[object Set]"==e)return!t.size;if(Tp(t))return!(t=>{if(!Tp(t))return Object.keys(t);var e=[];for(var i in Object(t))hasOwnProperty.call(t,i)&&"constructor"!=i&&e.push(i);return e})(t).length;for(const e in t)if(hasOwnProperty.call(t,e))return!1;return!0},am=(t,e)=>Gp(t,e),lm=t=>"function"==typeof t,cm=t=>{if(!Ap(t)||"[object Object]"!=Rp(t))return!1;if(null===Object.getPrototypeOf(t))return!0;let e=t;for(;null!==Object.getPrototypeOf(e);)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e},dm=t=>{if(!t)return[];if(Ip(t))return Xf(t)?yp(t):Op(t);if(Symbol.iterator&&Symbol.iterator in Object(t)){const e=t[Symbol.iterator]();let i;const r=[];for(;!(i=e.next()).done;)r.push(i.value);return r}const e=Rp(t);return(e==mu?Qp:e==yu?Kp:xp)(t)};const hm=(t,e)=>(e=If(e,2),function(t,e,i){return(Array.isArray(t)?Lf:Of)(t,e,i,arguments.length<3,xf)}(t,((t,i,r)=>(r=e(i),hasOwnProperty.call(t,r)?t[r].push(i):Pp(t,r,[i]),t)),{})),um=(t,e=[])=>{if(null==t)return[];const i=e.length;return i>1&&Sp(t,e[0],e[1])?e=[]:i>2&&Sp(e[0],e[1],e[2])&&(e=[e[0]]),Array.isArray(e)||(e=[If(e,2)]),kf(t,e.flat(1),[])},pm=t=>(null==t?0:t.length)?$f(t,1/0):[],fm=(t,...e)=>Ip(t)?of(t,e):[],mm=(t,...e)=>Ap(t)&&Ip(t)?of(t,e.flat(1)):[],gm=(...t)=>{const e=t.flat(1);return rm(e)},vm=(t,e)=>{if(null==t)return!1;"string"==typeof e&&(e=e.split("."));let i=-1,r=t;for(;++i<e.length;){if(!r||!hasOwnProperty.call(r,e[i]))return!1;r=r[e[i]]}return!0},bm=(t,e,i)=>{let r=-1,o=(e=tf(e,t)).length;for(o||(o=1,t=void 0);++r<o;){let n=null==t?void 0:t[nf(e[r])];void 0===n&&(r=o,n=i),t="function"==typeof n?n.call(t):n}return t},ym=(t,...e)=>{let i={};if(null==t)return i;let r=!1;e=e.flat(1).map((e=>(e=tf(e,t),r||(r=e.length>1),e))),Ep(t,Vp(t),i),r&&(i=sf(i,!0,!0,!0,(t=>cm(t)?void 0:t)));let o=e.length;for(;o--;)hf(i,e[o]);return i},xm=(t,...e)=>null==t?{}:((t,e)=>Nf(t,e,((e,i)=>Sf(t,i))))(t,e.flat(1/0)),wm=(t,e=(t=>t))=>{let i=-1;const r=Object(t),o=Ip(t)?_p(t,!0):pf(t);let n=o.length;for(;n--;){const t=o[++i];if(!1===e(r[t],t,r))break}},_m=(t="")=>Ff(`${t}`.replace(/['\u2019]/g,"")).reduce(((t,e,i)=>(e=e.toLowerCase(),t+(i?Bf(e):e))),"");let km=0;const Cm=(t="")=>`${t}`+ ++km,Am=mf(((t,e,i,r)=>{gf(t,e,i,r)}),!0);var Sm=class{constructor(){this.map=new WeakMap}has(t,e){return void 0===e?this.map.has(t):e in this.map.get(t)}create(t){return this.has(t)||this.map.set(t,Object.create(null)),this.get(t)}get(t,e){if(!this.has(t))return;const i=this.map.get(t);return void 0===e?i:i[e]}set(t,e,i){if(void 0===e)return;const r=this.create(t);"string"==typeof e?r[e]=i:Object.assign(r,e)}remove(t,e){if(this.has(t))if(void 0===e)this.map.delete(t);else{delete this.map.get(t)[e]}}};const Tm=new Sm,Pm=new Sm,Em=function(t,e){if(!(this instanceof Em))return new Em(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented?Im:Lm,this.target=t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget):this.type=t,e&&Object.assign(this,e),this.timeStamp=t&&t.timeStamp||Date.now(),this.envelope=!0};function Im(){return!0}function Lm(){return!1}
/*!
 * jQuery JavaScript Library v4.0.0-pre+c98597ea.dirty
 * https://jquery.com/
 *
 * Copyright OpenJS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2023-11-24T14:04Z
 */Em.prototype={constructor:Em,isDefaultPrevented:Lm,isPropagationStopped:Lm,isImmediatePropagationStopped:Lm,preventDefault:function(){const t=this.originalEvent;this.isDefaultPrevented=Im,t&&t.preventDefault()},stopPropagation:function(){const t=this.originalEvent;this.isPropagationStopped=Im,t&&t.stopPropagation()},stopImmediatePropagation:function(){const t=this.originalEvent;this.isImmediatePropagationStopped=Im,t&&t.stopImmediatePropagation(),this.stopPropagation()}},["altKey","bubbles","cancelable","changedTouches","ctrlKey","detail","eventPhase","metaKey","pageX","pageY","shiftKey","view","char","code","charCode","key","keyCode","button","buttons","clientX","clientY","offsetX","offsetY","pointerId","pointerType","screenX","screenY","targetTouches","toElement","touches","which"].forEach((t=>function(t){Object.defineProperty(Em.prototype,t,{enumerable:!0,configurable:!0,get:function(){return this.originalEvent?this.originalEvent[t]:void 0},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})}(t)));const Om="undefined"!=typeof window?window.document:null,Rm=Om&&Om.documentElement,$m=/^([^.]*)(?:\.(.+)|)/,Mm=/[^\x20\t\r\n\f]+/g,Nm=function(t){return new Nm.Dom(t)};Nm.fn=Nm.prototype={constructor:Nm,length:0},Nm.guid=1,Nm.data=Pm,Nm.merge=function(t,e){let i=+e.length,r=t.length;for(let o=0;o<i;o++)t[r++]=e[o];return t.length=r,t},Nm.parseHTML=function(t){const e=Om.implementation.createHTMLDocument(),i=e.createElement("base");i.href=Om.location.href,e.head.appendChild(i),e.body.innerHTML=t;const r=e.getElementsByTagName("script");for(let t=0;t<r.length;t++)r[t].remove();return Array.from(e.body.childNodes)},"function"==typeof Symbol&&(Nm.fn[Symbol.iterator]=Array.prototype[Symbol.iterator]),Nm.fn.toArray=function(){return Array.from(this)},Nm.fn.pushStack=function(t){const e=Nm.merge(this.constructor(),t);return e.prevObject=this,e},Nm.fn.find=function(t){const[e]=this,i=this.pushStack([]);if(!e)return i;const{nodeType:r}=e;return 1!==r&&9!==r&&11!==r||("string"!=typeof t?e!==t&&e.contains(t)&&Nm.merge(i,[t]):Nm.merge(i,e.querySelectorAll(t))),i},Nm.fn.add=function(t,e){const i=Nm(t).toArray(),r=this.toArray(),o=this.pushStack([]);return Nm.merge(o,rm(r.concat(i))),o},Nm.fn.addBack=function(){return this.add(this.prevObject)},Nm.fn.filter=function(t){const e=[];for(let i=0;i<this.length;i++){const r=this[i];r.matches(t)&&e.push(r)}return this.pushStack(e)};const Dm=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;const zm=function(t){if(!t)return this;if("function"==typeof t)throw new Error("function not supported");if(arguments.length>1)throw new Error("selector with context not supported");if(t.nodeType)return this[0]=t,this.length=1,this;let e;if("<"===(i=t+"")[0]&&">"===i[i.length-1]&&i.length>=3)e=[null,t,null];else{if("string"!=typeof t)return Nm.merge(this,t);e=Dm.exec(t)}var i;if(!e||!e[1])return Fm.find(t);if(e[1])return Nm.merge(this,Nm.parseHTML(e[1])),this;const r=Om.getElementById(e[2]);return r&&(this[0]=r,this.length=1),this};Nm.Dom=zm,zm.prototype=Nm.fn,Nm.Event=Em,Nm.event={special:Object.create(null)},Nm.event.has=function(t,e){const i=Tm.get(t,"events");return!!i&&(!e||Array.isArray(i[e])&&i[e].length>0)},Nm.event.on=function(t,e,i,r,o,n){if("object"==typeof e){"string"!=typeof i&&(r=r||i,i=void 0);for(let o in e)Nm.event.on(t,o,i,r,e[o],n);return t}if(null==r&&null==o?(o=i,r=i=void 0):null==o&&("string"==typeof i?(o=r,r=void 0):(o=r,r=i,i=void 0)),!o)return t;if(1===n){const t=o;o=function(e){return Nm().off(e),t.apply(this,arguments)},o.guid=t.guid||(t.guid=Nm.guid++)}for(let n=0;n<t.length;n++)Nm.event.add(t[n],e,o,r,i)},Nm.event.add=function(t,e,i,r,o){if("object"!=typeof t)return;const n=Tm.create(t);let s,a,l;i.handler&&(s=i,i=s.handler,o=s.selector),o&&Rm.matches(o),i.guid||(i.guid=Nm.guid++),(a=n.events)||(a=n.events=Object.create(null)),(l=n.handle)||(l=n.handle=function(e){return void 0!==Nm?Nm.event.dispatch.apply(t,arguments):void 0});const c=(e||"").match(Mm)||[""];let d=c.length;for(;d--;){const[,e,n=""]=$m.exec(c[d]);if(!e)continue;const h=n.split(".").sort();let u=Nm.event.special[e];const p=u&&(o?u.delegateType:u.bindType)||e;u=Nm.event.special[p];const f=Object.assign({type:p,origType:e,data:r,handler:i,guid:i.guid,selector:o,namespace:h.join(".")},s);let m;(m=a[p])||(m=a[p]=[],m.delegateCount=0,u&&u.setup&&!1!==u.setup.call(t,r,h,l)||t.addEventListener&&t.addEventListener(p,l)),u&&u.add&&(u.add.call(t,f),f.handler.guid||(f.handler.guid=i.guid)),o?m.splice(m.delegateCount++,0,f):m.push(f)}},Nm.event.remove=function(t,e,i,r,o){const n=Tm.get(t);if(!n||!n.events)return;const s=n.events,a=(e||"").match(Mm)||[""];let l=a.length;for(;l--;){const[,e,c=""]=$m.exec(a[l]);if(!e){for(const e in s)Nm.event.remove(t,e+a[l],i,r,!0);continue}const d=Nm.event.special[e],h=d&&(r?d.delegateType:d.bindType)||e,u=s[h];if(!u||0===u.length)continue;const p=c.split(".").sort(),f=c?new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,m=u.length;let g=m;for(;g--;){const n=u[g];!o&&e!==n.origType||i&&i.guid!==n.guid||f&&!f.test(n.namespace)||r&&r!==n.selector&&("**"!==r||!n.selector)||(u.splice(g,1),n.selector&&u.delegateCount--,d&&d.remove&&d.remove.call(t,n))}m&&0===u.length&&(d&&d.teardown&&!1!==d.teardown.call(t,p,n.handle)||t.removeEventListener&&t.removeEventListener(h,n.handle),delete s[h])}sm(s)&&(Tm.remove(t,"handle"),Tm.remove(t,"events"))},Nm.event.dispatch=function(t){const e=this,i=Nm.event.fix(t);i.delegateTarget=e;const r=Array.from(arguments);r[0]=i;const o=Tm.get(e,"events"),n=o&&o[i.type]||[],s=Nm.event.special[i.type];if(s&&s.preDispatch&&!1===s.preDispatch.call(e,i))return;const a=Nm.event.handlers.call(e,i,n);let l,c=0;for(;(l=a[c++])&&!i.isPropagationStopped();){i.currentTarget=l.elem;let t,e=0;for(;(t=l.handlers[e++])&&!i.isImmediatePropagationStopped();){i.handleObj=t,i.data=t.data;const e=Nm.event.special[t.origType];let o;o=e&&e.handle?e.handle:t.handler;const n=o.apply(l.elem,r);void 0!==n&&!1===(i.result=n)&&(i.preventDefault(),i.stopPropagation())}}return s&&s.postDispatch&&s.postDispatch.call(e,i),i.result},Nm.event.handlers=function(t,e){const i=e.delegateCount,r=[];if(i&&!("click"===t.type&&t.button>=1))for(let o=t.target;o!==this;o=o.parentNode||this)if(1===o.nodeType&&("click"!==t.type||!0!==o.disabled)){const t=[],n={};for(let r=0;r<i;r++){const i=e[r],s=i.selector+" ";void 0===n[s]&&(n[s]=o.matches(s)),n[s]&&t.push(i)}t.length&&r.push({elem:o,handlers:t})}return i<e.length&&r.push({elem:this,handlers:e.slice(i)}),r},Nm.event.fix=function(t){return t.envelope?t:new Em(t)};const Fm=Nm(Om);function Bm(t){let e=t.length;for(;e--;)Um(t[e])}function Um(t){Nm.event.remove(t),Tm.remove(t),Pm.remove(t)}function Vm(t){for(let e=0;e<t.length;e++){const i=t[e];i.parentNode&&i.parentNode.removeChild(i)}}const jm={};function Gm(t,e,i){"number"==typeof i&&jm[_m(e)]&&(i+="px"),t.style[e]=i}function Hm(t,e,i){for(let r=0;r<e.length;r++){const o=e[r];lu.prototype[t].apply({node:o},i)}}["width","height","top","bottom","left","right","padding","paddingTop","paddingBottom","paddingLeft","paddingRight","margin","marginTop","marginBottom","marginLeft","marginRight"].forEach((t=>{jm[t]=!0}));var qm=Object.freeze({__proto__:null,remove:function(){for(let t=0;t<this.length;t++){const e=this[t];Um(e),Bm(e.getElementsByTagName("*"))}return Vm(this),this},detach:function(){return Vm(this),this},empty:function(){for(let t=0;t<this.length;t++){const e=this[t];1===e.nodeType&&(Bm(e.getElementsByTagName("*")),e.textContent="")}return this},clone:function(){const t=[];for(let e=0;e<this.length;e++)t.push(this[e].cloneNode(!0));return this.pushStack(t)},html:function(t){const[e]=this;return e?0===arguments.length?e.innerHTML:void 0===t?this:(Bm(Tm,e.getElementsByTagName("*")),"string"!=typeof t&&"number"!=typeof t?(e.innerHTML="",this.append(t)):(e.innerHTML=t,this)):null},append:function(...t){const[e]=this;return e?(t.forEach((t=>{t&&("string"==typeof t?e.append(...Nm.parseHTML(t)):"[object Object]"===t.toString()?this.append(...Array.from(t)):Array.isArray(t)?this.append(...t):e.appendChild(t))})),this):this},prepend:function(...t){const[e]=this;return e?(t.forEach((t=>{t&&("string"==typeof t?e.prepend(...Nm.parseHTML(t)):"[object Object]"===t.toString()?this.prepend(...Array.from(t)):Array.isArray(t)?this.prepend(...t):e.insertBefore(t,e.firstChild))})),this):this},appendTo:function(t){return Nm(t).append(this),this},prependTo:function(t){return Nm(t).prepend(this),this},css:function(t,e){let i;if("string"==typeof t){if(void 0===e){const[e]=this;return e?e.style[t]:null}i={[t]:e}}else{if(!t)throw new Error("no styles provided");i=t}for(let t in i)if(i.hasOwnProperty(t))for(let e=0;e<this.length;e++)Gm(this[e],t,i[t]);return this},data:function(t,e){if(arguments.length<2){const[e]=this;return e?void 0===t?e.dataset:e.dataset[t]:null}for(let i=0;i<this.length;i++)this[i].dataset[t]=e;return this},removeClass:function(){return Hm("removeClass",this,arguments),this},addClass:function(){return Hm("addClass",this,arguments),this},toggleClass:function(){return Hm("toggleClass",this,arguments),this},hasClass:function(){const[t]=this;return!!t&&lu.prototype.hasClass.apply({node:t},arguments)},children:function(t){const e=[];for(let i=0;i<this.length;i++){const r=this[i];let o=Array.from(r.children);"string"==typeof t&&(o=o.filter((e=>e.matches(t)))),e.push(...o)}return this.pushStack(e)},closest:function(t){const e=[];for(let i=0;i<this.length;i++){const r=this[i];if("string"==typeof t){const i=r.closest(t);i&&e.push(i)}else{const[i]=Nm(t);i&&i.contains(r)&&e.push(i)}}return this.pushStack(e)},on:function(t,e,i,r){return Nm.event.on(this,t,e,i,r),this},one:function(t,e,i,r){return Nm.event.on(this,t,e,i,r,1),this},off:function(t,e,i){if(t&&t.preventDefault&&t.handleObj){const e=t.handleObj;return Nm(t.delegateTarget).off(e.namespace?e.origType+"."+e.namespace:e.origType,e.selector,e.handler),this}if("object"==typeof t){for(let i in t)this.off(i,e,t[i]);return this}!1!==e&&"function"!=typeof e||(i=e,e=void 0);for(let r=0;r<this.length;r++)Nm.event.remove(this[r],t,i,e);return this},width:function(){const[t]=this;if(t===window)return t.document.documentElement.clientWidth;if(!t)return;const e=window.getComputedStyle(t),i=t.offsetWidth,r=parseFloat(e.borderTopWidth);return i-parseFloat(e.borderBottomWidth)-r-parseFloat(e.paddingTop)-parseFloat(e.paddingBottom)},height:function(){const[t]=this;if(t===window)return t.document.documentElement.clientHeight;if(!t)return;const e=window.getComputedStyle(t);return t.offsetHeight-parseFloat(e.borderLeftWidth)-parseFloat(e.borderRightWidth)-parseFloat(e.paddingLeft)-parseFloat(e.paddingRight)},position:function(){const[t]=this;if(!t)return;let e,i,r,o=Nm(t),n={top:0,left:0};if("fixed"===o.css("position"))i=t.getBoundingClientRect();else{i=o.offset(),r=t.ownerDocument,e=t.offsetParent||r.documentElement;const s=Nm(e),a=s.css("position")||"static";for(;e&&(e===r.body||e===r.documentElement)&&"static"===a;)e=e.parentNode;if(e&&e!==t&&1===e.nodeType){const t=window.getComputedStyle(e),i=parseFloat(t.borderTopWidth)||0,r=parseFloat(t.borderLeftWidth)||0;n=s.offset(),n.top+=i,n.left+=r}}const s=parseFloat(window.getComputedStyle(t).marginTop)||0,a=parseFloat(window.getComputedStyle(t).marginLeft)||0;return{top:i.top-n.top-s,left:i.left-n.left-a}},offset:function(t){const[e]=this;if(void 0===t){if(!e)return null;if(!e.getClientRects().length)return{top:0,left:0};const t=e.getBoundingClientRect();return{top:t.top+window.scrollY,left:t.left+window.scrollX}}if(!e)return this;const i=window.getComputedStyle(e);"static"===i.position&&this.css("position","relative");const r=this.offset(),o=t.top-r.top,n=t.left-r.left;return this.css({top:(parseFloat(i.top)||0)+o+"px",left:(parseFloat(i.left)||0)+n+"px"}),this}});const Wm="animationFrameId",Ym={};function Xm(t,e,i={}){let{duration:r=400,easing:o="ease-in-out",delay:n=0,complete:s}=i;const a=setTimeout((function(){const i=Nm(t);let a=!1,l="transitionend";r/=1e3,n/=1e3;const c={};if("string"==typeof e)c["animation-name"]=e,c["animation-duration"]=r+"s",c["animation-delay"]=n+"s",c["animation-timing-function"]=o,l="animationend";else{const t=[];for(var d in e)e.hasOwnProperty(d)&&(c[d]=e[d],t.push(d));r>0&&(c["transition-property"]=t.join(", "),c["transition-duration"]=r+"s",c["transition-delay"]=n+"s",c["transition-timing-function"]=o)}const h=function(e){if(e){if(e.target!==e.currentTarget)return;e.target.removeEventListener(l,h)}else t.removeEventListener(l,h);a=!0,i.css(Ym),s&&s.call(t)};if(r>0){t.addEventListener(l,h);const e=setTimeout((function(){a||h(null)}),1e3*(r+n)+25);Tm.set(t,Wm,{id:e,stop:()=>{clearTimeout(e),t.removeEventListener(l,h)}})}i.css(c),r<=0&&h(null)}));Tm.set(t,Wm,{stop:()=>clearTimeout(a)})}Ym["transition-property"]=Ym["transition-duration"]=Ym["transition-delay"]=Ym["transition-timing-function"]=Ym["animation-name"]=Ym["animation-duration"]=Ym["animation-delay"]=Ym["animation-timing-function"]="";var Jm=Object.freeze({__proto__:null,animate:function(t,e={}){this.stop();for(let i=0;i<this.length;i++)Xm(this[i],t,e);return this},stop:function(){for(let t=0;t<this.length;t++){const e=this[t],i=Tm.get(e,Wm);i&&(i.stop(),Tm.remove(e,Wm))}return this.css(Ym),this}});const Qm={outerWidth:"offsetWidth",outerHeight:"offsetHeight",innerWidth:"clientWidth",innerHeight:"clientHeight",scrollLeft:"scrollLeft",scrollTop:"scrollTop",val:"value",text:"textContent"},Km={disabled:"disabled",value:"value",text:"textContent"};const Zm={prop:function(t,e){if(!t)throw new Error("no property provided");if(1===arguments.length){const[e]=this;return e?e[t]:null}if(void 0===e)return this;for(let i=0;i<this.length;i++)this[i][t]=e;return this},attr:function(t,e){let i;if("string"==typeof t){if(void 0===e){const[e]=this;return e?e.getAttribute(t):null}i={[t]:e}}else{if(!t)throw new Error("no attributes provided");i=t}for(let t in i)if(i.hasOwnProperty(t)){const e=i[t];if(Km[t]){this.prop(Km[t],e);continue}for(let i=0;i<this.length;i++)null===e?this[i].removeAttribute(t):this[i].setAttribute(t,e)}return this}};Object.keys(Qm).forEach((t=>{Zm[t]=function(...e){return this.prop(Qm[t],...e)}}));var tg=Zm;const eg=!1,ig="joint-",rg="default",og=300,ng=Object.create(null);var sg=ng;ng.load={noBubble:!0},[["mouseenter","mouseover"],["mouseleave","mouseout"],["pointerenter","pointerover"],["pointerleave","pointerout"]].forEach((([t,e])=>{ng[t]={delegateType:e,bindType:e,handle:function(t){const i=this,r=t.relatedTarget,o=t.handleObj;let n;return r&&i.contains(r)||(t.type=o.origType,n=o.handler.apply(i,arguments),t.type=e),n}}}));const ag=og;ng.dbltap={bindType:"touchend",delegateType:"touchend",handle:function(t,...e){const{handleObj:i,target:r}=t,o=Nm.data.create(r),n=(new Date).getTime(),s="lastTouch"in o?n-o.lastTouch:0;s<ag&&s>30?(o.lastTouch=null,t.type=i.origType,i.handler.call(this,t,...e)):o.lastTouch=n}},Object.assign(Nm.fn,qm),Object.assign(Nm.fn,Jm),Object.assign(Nm.fn,tg),Object.assign(Nm.event.special,sg);var lg=Nm;const cg=function(t){return t?t.toString().split(" ").map((function(t){return t.substr(0,ig.length)!==ig&&(t=ig+t),t})).join(" "):t},dg=function(t,e){const i={},r={},o=lu.namespace.svg,n=e||o,s=document.createDocumentFragment(),a=function(t,e,n){for(let s=0;s<t.length;s++){const l=t[s];if("string"==typeof l){const t=document.createTextNode(l);e.appendChild(t);continue}if(!l.hasOwnProperty("tagName"))throw new Error("json-dom-parser: missing tagName");const c=l.tagName;let d;l.hasOwnProperty("namespaceURI")&&(n=l.namespaceURI),d=document.createElementNS(n,c);const h=n===o,u=h?lu(d):lg(d),p=l.attributes;p&&u.attr(p);const f=l.style;if(f&&lg(d).css(f),l.hasOwnProperty("className")){const t=l.className;h?d.className.baseVal=t:d.className=t}if(l.hasOwnProperty("textContent")&&(d.textContent=l.textContent),l.hasOwnProperty("selector")){const t=l.selector;if(i[t])throw new Error("json-dom-parser: selector must be unique");i[t]=d,u.attr("joint-selector",t)}if(l.hasOwnProperty("groupSelector")){let t=l.groupSelector;Array.isArray(t)||(t=[t]);for(let e=0;e<t.length;e++){const i=t[e];let o=r[i];o||(o=r[i]=[]),o.push(d)}}e.appendChild(d);const m=l.children;Array.isArray(m)&&a(m,d,n)}};return a(t,s,n),{fragment:s,selectors:i,groupSelectors:r}},hg=function(t){let e=0;if(0===t.length)return e;for(let i=0;i<t.length;i++){e=(e<<5)-e+t.charCodeAt(i),e|=0}return e},ug=function(t,e,i){for(var r,o=Array.isArray(e)?e:e.split(i||"/"),n=0,s=o.length;n<s;){if(r=o[n++],Object(t)!==t||!(r in t))return;t=t[r]}return t},pg=function(t,e){return"string"!=typeof e&&"number"!=typeof e&&(e=String(e)),("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!==e},fg=function(t,e,i,r){const o=Array.isArray(e)?e:e.split(r||"/"),n=o.length-1;let s=t,a=0;for(;a<n;a++){const e=o[a];if(!pg(s,e))return t;s=s[e]||(s[e]={})}return s[o[n]]=i,t},mg=function(t,e,i){const r=Array.isArray(e)?e:e.split(i||"/"),o=r.length-1;let n=t,s=0;for(;s<o;s++){const e=r[s];if(!pg(n,e))return t;const i=n[e];if(!i)return t;n=i}return delete n[r[o]],t},gg=function(t){return gg.id=gg.id||1,void 0===t?"j_"+gg.id++:(t.id=void 0===t.id?"j_"+gg.id++:t.id,t.id)},vg=function(t){if(t.normalized)return t;const{originalEvent:e,target:i}=t,r=e&&e.changedTouches&&e.changedTouches[0];if(r)for(let e in r)void 0===t[e]&&(t[e]=r[e]);if(i){const e=i.correspondingUseElement;e&&(t.target=e)}return t.normalized=!0,t},bg=function(){var t;if("undefined"!=typeof window&&(t=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame),!t){var e=0;t=function(t){var i=(new Date).getTime(),r=Math.max(0,16-(i-e)),o=setTimeout((function(){t(i+r)}),r);return e=i+r,o}}return function(e,i,...r){return t(void 0!==i?e.bind(i,...r):e)}}(),yg=((wg="undefined"!=typeof window)&&(xg=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.msCancelAnimationFrame||window.msCancelRequestAnimationFrame||window.oCancelAnimationFrame||window.oCancelRequestAnimationFrame||window.mozCancelAnimationFrame||window.mozCancelRequestAnimationFrame),xg=xg||clearTimeout,wg?xg.bind(window):xg);var xg,wg;const _g=function(t){return Xf(t)&&"%"===t.slice(-1)},kg=function(t,e){var i=parseFloat(t);if(Number.isNaN(i))return null;var r,o={};if(o.value=i,null==e)r="[A-Za-z]*";else if(Array.isArray(e)){if(0===e.length)return null;r=e.join("|")}else Xf(e)&&(r=e);var n=function(e){var i=new RegExp("(?:\\d+(?:\\.\\d+)*)("+e+")$").exec(t);return i?i[1]:null}(r);return null===n?null:(o.unit=n,o)};function Cg(t,e){const i=t.split(e);let r=1;for(let t=0,o=i.length-1;t<o;t++){const n=[];(t>0||""!==i[0])&&n.push(0),n.push(e),(t<o-1||""!==i[o])&&n.push(0),i.splice(r,0,...n),r+=n.length+1}return i.filter((t=>""!==t))}function Ag(t,e){if(null===t)return e.getBBox().height;switch(t.unit){case"em":return e.getBBox().height*t.value;case"px":case"":return t.value}}const Sg=function(t,e,i={},r={}){var o=e.width,n=e.height,s=r.svgDocument||lu("svg").node,a=lu("tspan").node,l=lu("text").attr(i).append(a).node,c=document.createTextNode("");l.style.opacity=0,l.style.display="block",a.style.display="block",a.appendChild(c),s.appendChild(l),r.svgDocument||document.body.appendChild(s);const d=r.preserveSpaces,h=r.separator||""===r.separator?r.separator:" ",u="string"==typeof h?h:" ";var p=r.eol||"\n",f=r.hyphen?new RegExp(r.hyphen):/[^\w\d\u00C0-\u1FFF\u2800-\uFFFD]/,m=r.maxLineCount;Yf(m)||(m=1/0);var g,v,b,y=t.split(h),x=[],w=[];d&&lu(a).attr("xml:space","preserve");for(var _=0,k=0,C=y.length;_<C;_++){var A=y[_];if((A||d)&&"string"==typeof A){var S=!1;if(p&&A.indexOf(p)>=0){if(A.length>1){const t=Cg(y[_],p);y.splice(_,1,...t),_--,C=y.length;continue}if(d&&"string"==typeof y[_-1]){y.splice(_,0,"",0),C+=2,_--;continue}w[++k]=d&&"string"!=typeof y[_+1]?void 0:"",S=!0}if(!S){let t;if(t=d?void 0!==w[k]?w[k]+u+A:A:w[k]?w[k]+u+A:A,c.data=t,a.getComputedTextLength()<=o)w[k]=t,(g||v)&&(x[k++]=!0,g=0,v=0);else{if(!w[k]||g){var T=!!g;if(g=A.length-1,T||!g){if(!g){if(!w[k]){w=[];break}y.splice(_,2,A+y[_+1]),C--,x[k++]=!0,_--;continue}y[_]=A.substring(0,g);const t=y[_+1];y[_+1]=A.substring(g)+(void 0===t||0===t?"":t)}else{if(v)y.splice(_,2,y[_]+y[_+1]),v=0;else{var P=A.search(f);P>-1&&P!==A.length-1&&0!==P&&(v=P+1,g=0),y.splice(_,1,A.substring(0,v||g),A.substring(v||g)),C++}k&&!x[k-1]&&k--}d&&""===w[k]||_--;continue}k++,_--}}var E=null;if(w.length>m)E=m-1;else if(void 0!==n){if(void 0===b&&""!==c.data)if("auto"===i.lineHeight)b=Ag({value:1.5,unit:"em"},l);else{b=Ag(kg(i.lineHeight,["em","px",""]),l)}b*w.length>n&&(E=Math.floor(n/b)-1)}if(null!==E){w.splice(E+1);var I=r.ellipsis;if(!I||E<0)break;"string"!=typeof I&&(I="");var L=w[E];if(!L&&!S)break;var O,R,$=L.length;do{if(R=L[$],O=L.substring(0,$),R?R.match(h)&&(O+=R):O+=u,O+=I,c.data=O,a.getComputedTextLength()<=o){w[E]=O;break}$--}while($>=0);break}}}return r.svgDocument?s.removeChild(l):document.body.removeChild(s),w.join(p)},Tg=function(t){if(Object(t)!==t){var e=0;return isFinite(t)&&(e=+t),{top:e,right:e,bottom:e,left:e}}var i,r,o,n;return i=r=o=n=0,isFinite(t.vertical)&&(i=o=+t.vertical),isFinite(t.horizontal)&&(r=n=+t.horizontal),isFinite(t.top)&&(i=+t.top),isFinite(t.right)&&(r=+t.right),isFinite(t.bottom)&&(o=+t.bottom),isFinite(t.left)&&(n=+t.left),{top:i,right:r,bottom:o,left:n}},Pg={linear:function(t){return t},quad:function(t){return t*t},cubic:function(t){return t*t*t},inout:function(t){if(t<=0)return 0;if(t>=1)return 1;var e=t*t,i=e*t;return 4*(t<.5?i:3*(t-e)+i-.75)},exponential:function(t){return Math.pow(2,10*(t-1))},bounce:function(t){for(var e=0,i=1;;e+=i,i/=2)if(t>=(7-4*e)/11){var r=(11-6*e-11*t)/4;return-r*r+i*i}},reverse:function(t){return function(e){return 1-t(1-e)}},reflect:function(t){return function(e){return.5*(e<.5?t(2*e):2-t(2-2*e))}},clamp:function(t,e,i){return e=e||0,i=i||1,function(r){var o=t(r);return o<e?e:o>i?i:o}},back:function(t){return t||(t=1.70158),function(e){return e*e*((t+1)*e-t)}},elastic:function(t){return t||(t=1.5),function(e){return Math.pow(2,10*(e-1))*Math.cos(20*Math.PI*t/3*e)}}},Eg={number:function(t,e){var i=e-t;return function(e){return t+i*e}},object:function(t,e){var i=Object.keys(t);return function(r){var o,n,s={};for(o=i.length-1;-1!=o;o--)s[n=i[o]]=t[n]+(e[n]-t[n])*r;return s}},hexColor:function(t,e){var i=parseInt(t.slice(1),16),r=parseInt(e.slice(1),16),o=255&i,n=(255&r)-o,s=65280&i,a=(65280&r)-s,l=16711680&i,c=(16711680&r)-l;return function(t){return"#"+(1<<24|o+n*t&255|s+a*t&65280|l+c*t&16711680).toString(16).slice(1)}},unit:function(t,e){var i=/(-?[0-9]*.[0-9]*)(px|em|cm|mm|in|pt|pc|%)/,r=i.exec(t),o=i.exec(e),n=o[1].indexOf("."),s=n>0?o[1].length-n-1:0;t=+r[1];var a=+o[1]-t,l=r[2];return function(e){return(t+a*e).toFixed(s)+l}}},Ig={outline:function(t){var e=Number.isFinite(t.margin)?t.margin:2,i=Number.isFinite(t.width)?t.width:1;return Lg('<filter><feFlood flood-color="${color}" flood-opacity="${opacity}" result="colored"/><feMorphology in="SourceAlpha" result="morphedOuter" operator="dilate" radius="${outerRadius}" /><feMorphology in="SourceAlpha" result="morphedInner" operator="dilate" radius="${innerRadius}" /><feComposite result="morphedOuterColored" in="colored" in2="morphedOuter" operator="in"/><feComposite operator="xor" in="morphedOuterColored" in2="morphedInner" result="outline"/><feMerge><feMergeNode in="outline"/><feMergeNode in="SourceGraphic"/></feMerge></filter>')({color:t.color||"blue",opacity:Number.isFinite(t.opacity)?t.opacity:1,outerRadius:e+i,innerRadius:e})},highlight:function(t){return Lg('<filter><feFlood flood-color="${color}" flood-opacity="${opacity}" result="colored"/><feMorphology result="morphed" in="SourceGraphic" operator="dilate" radius="${width}"/><feComposite result="composed" in="colored" in2="morphed" operator="in"/><feGaussianBlur result="blured" in="composed" stdDeviation="${blur}"/><feBlend in="SourceGraphic" in2="blured" mode="normal"/></filter>')({color:t.color||"red",width:Number.isFinite(t.width)?t.width:1,blur:Number.isFinite(t.blur)?t.blur:0,opacity:Number.isFinite(t.opacity)?t.opacity:1})},blur:function(t){var e=Number.isFinite(t.x)?t.x:2;return Lg('<filter><feGaussianBlur stdDeviation="${stdDeviation}"/></filter>')({stdDeviation:Number.isFinite(t.y)?[e,t.y]:e})},dropShadow:function(t){var e="SVGFEDropShadowElement"in window?'<filter><feDropShadow stdDeviation="${blur}" dx="${dx}" dy="${dy}" flood-color="${color}" flood-opacity="${opacity}"/></filter>':'<filter><feGaussianBlur in="SourceAlpha" stdDeviation="${blur}"/><feOffset dx="${dx}" dy="${dy}" result="offsetblur"/><feFlood flood-color="${color}"/><feComposite in2="offsetblur" operator="in"/><feComponentTransfer><feFuncA type="linear" slope="${opacity}"/></feComponentTransfer><feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/></feMerge></filter>';return Lg(e)({dx:t.dx||0,dy:t.dy||0,opacity:Number.isFinite(t.opacity)?t.opacity:1,color:t.color||"black",blur:Number.isFinite(t.blur)?t.blur:4})},grayscale:function(t){var e=Number.isFinite(t.amount)?t.amount:1;return Lg('<filter><feColorMatrix type="matrix" values="${a} ${b} ${c} 0 0 ${d} ${e} ${f} 0 0 ${g} ${b} ${h} 0 0 0 0 0 1 0"/></filter>')({a:.2126+.7874*(1-e),b:.7152-.7152*(1-e),c:.0722-.0722*(1-e),d:.2126-.2126*(1-e),e:.7152+.2848*(1-e),f:.0722-.0722*(1-e),g:.2126-.2126*(1-e),h:.0722+.9278*(1-e)})},sepia:function(t){var e=Number.isFinite(t.amount)?t.amount:1;return Lg('<filter><feColorMatrix type="matrix" values="${a} ${b} ${c} 0 0 ${d} ${e} ${f} 0 0 ${g} ${h} ${i} 0 0 0 0 0 1 0"/></filter>')({a:.393+.607*(1-e),b:.769-.769*(1-e),c:.189-.189*(1-e),d:.349-.349*(1-e),e:.686+.314*(1-e),f:.168-.168*(1-e),g:.272-.272*(1-e),h:.534-.534*(1-e),i:.131+.869*(1-e)})},saturate:function(t){var e=Number.isFinite(t.amount)?t.amount:1;return Lg('<filter><feColorMatrix type="saturate" values="${amount}"/></filter>')({amount:1-e})},hueRotate:function(t){return Lg('<filter><feColorMatrix type="hueRotate" values="${angle}"/></filter>')({angle:t.angle||0})},invert:function(t){var e=Number.isFinite(t.amount)?t.amount:1;return Lg('<filter><feComponentTransfer><feFuncR type="table" tableValues="${amount} ${amount2}"/><feFuncG type="table" tableValues="${amount} ${amount2}"/><feFuncB type="table" tableValues="${amount} ${amount2}"/></feComponentTransfer></filter>')({amount:e,amount2:1-e})},brightness:function(t){return Lg('<filter><feComponentTransfer><feFuncR type="linear" slope="${amount}"/><feFuncG type="linear" slope="${amount}"/><feFuncB type="linear" slope="${amount}"/></feComponentTransfer></filter>')({amount:Number.isFinite(t.amount)?t.amount:1})},contrast:function(t){var e=Number.isFinite(t.amount)?t.amount:1;return Lg('<filter><feComponentTransfer><feFuncR type="linear" slope="${amount}" intercept="${amount2}"/><feFuncG type="linear" slope="${amount}" intercept="${amount2}"/><feFuncB type="linear" slope="${amount}" intercept="${amount2}"/></feComponentTransfer></filter>')({amount:e,amount2:.5-e/2})}},Lg=function(t){var e=/<%= ([^ ]+) %>|\$\{ ?([^{} ]+) ?\}|\{\{([^{} ]+)\}\}/g;return function(i){return i=i||{},t.replace(e,(function(t){for(var e=Array.from(arguments).slice(1,4).find((function(t){return!!t})).split("."),r=i[e.shift()];void 0!==r&&e.length;)r=r[e.shift()];return void 0!==r?r:""}))}};var Og,Rg={},$g=/\s+/,Mg=function(t,e,i,r,o){var n,s=0;if(i&&"object"==typeof i){void 0!==r&&"context"in o&&void 0===o.context&&(o.context=r);for(n=Object.keys(i);s<n.length;s++)e=Mg(t,e,n[s],i[n[s]],o)}else if(i&&$g.test(i))for(n=i.split($g);s<n.length;s++)e=t(e,n[s],r,o);else e=t(e,i,r,o);return e};Rg.on=function(t,e,i){(this._events=Mg(Ng,this._events||{},t,e,{context:i,ctx:this,listening:Og}),Og)&&((this._listeners||(this._listeners={}))[Og.id]=Og,Og.interop=!1);return this},Rg.listenTo=function(t,e,i){if(!t)return this;var r=t._listenId||(t._listenId=Cm("l")),o=this._listeningTo||(this._listeningTo={}),n=Og=o[r];n||(this._listenId||(this._listenId=Cm("l")),n=Og=o[r]=new jg(this,t));var s=Dg(t,e,i,this);if(Og=void 0,s)throw s;return n.interop&&n.on(e,i),this};var Ng=function(t,e,i,r){if(i){var o=t[e]||(t[e]=[]),n=r.context,s=r.ctx,a=r.listening;a&&a.count++,o.push({callback:i,context:n,ctx:n||s,listening:a})}return t},Dg=function(t,e,i,r){try{t.on(e,i,r)}catch(t){return t}};Rg.off=function(t,e,i){return this._events?(this._events=Mg(zg,this._events,t,e,{context:i,listeners:this._listeners}),this):this},Rg.stopListening=function(t,e,i){var r=this._listeningTo;if(!r)return this;for(var o=t?[t._listenId]:Object.keys(r),n=0;n<o.length;n++){var s=r[o[n]];if(!s)break;s.obj.off(e,i,this),s.interop&&s.off(e,i)}return sm(r)&&(this._listeningTo=void 0),this};var zg=function(t,e,i,r){if(t){var o,n=r.context,s=r.listeners,a=0;if(e||n||i){for(o=e?[e]:Object.keys(t);a<o.length;a++){var l=t[e=o[a]];if(!l)break;for(var c=[],d=0;d<l.length;d++){var h=l[d];if(i&&i!==h.callback&&i!==h.callback._callback||n&&n!==h.context)c.push(h);else{var u=h.listening;u&&u.off(e,i)}}c.length?t[e]=c:delete t[e]}return t}if(null!=s)for(o=Object.keys(s);a<o.length;a++)s[o[a]].cleanup()}};Rg.once=function(t,e,i){var r=Mg(Fg,{},t,e,this.off.bind(this));return"string"==typeof t&&null==i&&(e=void 0),this.on(r,e,i)},Rg.listenToOnce=function(t,e,i){var r=Mg(Fg,{},e,i,this.stopListening.bind(this,t));return this.listenTo(t,r)};var Fg=function(t,e,i,r){if(i){var o=t[e]=Bg((function(){r(e,o),i.apply(this,arguments)}));o._callback=i}return t},Bg=function(t){var e;if("function"!=typeof t)throw new TypeError("Expected a function");var i=2;return function(){return--i>0&&(e=t.apply(this,arguments)),i<=1&&(t=void 0),e}};Rg.trigger=function(t){if(!this._events)return this;for(var e=Math.max(0,arguments.length-1),i=Array(e),r=0;r<e;r++)i[r]=arguments[r+1];return Mg(Ug,this._events,t,void 0,i),this};var Ug=function(t,e,i,r){if(t){var o=t[e],n=t.all;o&&n&&(n=n.slice()),o&&Vg(o,r),n&&Vg(n,[e].concat(r))}return t},Vg=function(t,e){var i,r=-1,o=t.length,n=e[0],s=e[1],a=e[2];switch(e.length){case 0:for(;++r<o;)(i=t[r]).callback.call(i.ctx);return;case 1:for(;++r<o;)(i=t[r]).callback.call(i.ctx,n);return;case 2:for(;++r<o;)(i=t[r]).callback.call(i.ctx,n,s);return;case 3:for(;++r<o;)(i=t[r]).callback.call(i.ctx,n,s,a);return;default:for(;++r<o;)(i=t[r]).callback.apply(i.ctx,e);return}},jg=function(t,e){this.id=t._listenId,this.listener=t,this.obj=e,this.interop=!0,this.count=0,this._events=void 0};jg.prototype.on=Rg.on,jg.prototype.off=function(t,e){var i;this.interop?(this._events=Mg(zg,this._events,t,e,{context:void 0,listeners:void 0}),i=!this._events):(this.count--,i=0===this.count),i&&this.cleanup()},jg.prototype.cleanup=function(){delete this.listener._listeningTo[this.obj._listenId],this.interop||delete this.obj._listeners[this.id]},Rg.bind=Rg.on,Rg.unbind=Rg.off;var Gg=function(t,e){var i,r=this;return i=t&&vm(t,"constructor")?t.constructor:function(){return r.apply(this,arguments)},Jf(i,r,e),i.prototype=Object.assign(Object.create(r.prototype),t),i.prototype.constructor=i,i.__super__=r.prototype,i},Hg=function(t,e,i,r){wm(i,(function(i,o){e[o]&&(t.prototype[o]=function(t,e,i,r){switch(e){case 1:return function(){return t[i](this[r])};case 2:return function(e){return t[i](this[r],e)};case 3:return function(e,o){return t[i](this[r],qg(e,this),o)};case 4:return function(e,o,n){return t[i](this[r],qg(e,this),o,n)};default:return function(){var e=Array.prototype.slice.call(arguments);return e.unshift(this[r]),t[i].apply(t,e)}}}(e,i,o,r))}))},qg=function(t,e){return lm(t)?t:Wf(t)&&!e._isModel(t)?Wg(t):Xf(t)?function(e){return e.get(t)}:t},Wg=function(t){var e=Tf(sf(t,!0));return function(t){return e(t.attributes)}},Yg=function(t,e){var i=t||{};e||(e={}),this.preinitialize.apply(this,arguments),this.cid=Cm(this.cidPrefix),this.attributes={},e.collection&&(this.collection=e.collection);var r=bm(this,"defaults");i=Qf(Jf({},r,i),r),this.set(i,e),this.changed={},this.initialize.apply(this,arguments)};function Xg(t){t=rm(t);const e=dm(t).reduce((function(t,e){return t[e.id]=e.clone(),t}),{});return dm(t).forEach((function(t){const i=e[t.id];if(i.isLink()){const t=i.source(),r=i.target();t.id&&e[t.id]&&i.prop("source/id",e[t.id].id),r.id&&e[r.id]&&i.prop("target/id",e[r.id].id)}const r=t.get("parent");r&&e[r]&&i.set("parent",e[r].id);const o=dm(t.get("embeds")).reduce((function(t,i){return e[i]&&t.push(e[i].id),t}),[]);sm(o)||i.set("embeds",o)})),e}Jf(Yg.prototype,Rg,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",preinitialize:function(){},initialize:function(){},toJSON:function(t){return om(this.attributes)},get:function(t){return this.attributes[t]},has:function(t){return null!=this.get(t)},set:function(t,e,i){if(null==t)return this;var r;if("object"==typeof t?(r=t,i=e):(r={})[t]=e,i||(i={}),!this._validate(r,i))return!1;var o=i.unset,n=i.silent,s=[],a=this._changing;this._changing=!0,a||(this._previousAttributes=om(this.attributes),this.changed={});var l=this.attributes,c=this.changed,d=this._previousAttributes;for(var h in r)e=r[h],am(l[h],e)||s.push(h),am(d[h],e)?delete c[h]:c[h]=e,o?delete l[h]:l[h]=e;if(this.idAttribute in r){var u=this.id;this.id=this.get(this.idAttribute),this.trigger("changeId",this,u,i)}if(!n){s.length&&(this._pending=i);for(var p=0;p<s.length;p++)this.trigger("change:"+s[p],this,l[s[p]],i)}if(a)return this;if(!n)for(;this._pending;)i=this._pending,this._pending=!1,this.trigger("change",this,i);return this._pending=!1,this._changing=!1,this},unset:function(t,e){return this.set(t,void 0,Jf({},e,{unset:!0}))},clear:function(t){var e={};for(var i in this.attributes)e[i]=void 0;return this.set(e,Jf({},t,{unset:!0}))},hasChanged:function(t){return null==t?!sm(this.changed):vm(this.changed,t)},changedAttributes:function(t){if(!t)return!!this.hasChanged()&&om(this.changed);var e,i=this._changing?this._previousAttributes:this.attributes,r={};for(var o in t){var n=t[o];am(i[o],n)||(r[o]=n,e=!0)}return!!e&&r},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return om(this._previousAttributes)},clone:function(){return new this.constructor(this.attributes)},isValid:function(t){return this._validate({},Jf({},t,{validate:!0}))},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=Jf({},this.attributes,t);var i=this.validationError=this.validate(t,e)||null;return!i||(this.trigger("invalid",this,i,Jf(e,{validationError:i})),!1)}}),Yg.extend=Gg;const Jg=["checked","selected","disabled","readOnly","contentEditable","value","indeterminate"].reduce(((t,e)=>(t[e]=!0,t)),{});var Qg={qualify:function(t){return cm(t)},set:function(t,e,i){Object.keys(t).forEach((function(e){if(Jg[e]&&e in i){const r=t[e];"SELECT"===i.tagName&&Array.isArray(r)?Array.from(i.options).forEach((function(t,e){t.selected=r.includes(t.value)})):i[e]=r}}))}};function Kg(t,e,i){return function(r,o){var n,s=_g(r);if(r=parseFloat(r),s&&(r/=100),isFinite(r)){var a=o[i]();n=s||r>0&&r<1?a[t]+o[e]*r:a[t]+r}var l=zd();return l[t]=n||0,l}}function Zg(t,e){return function(i,r){var o=_g(i);i=parseFloat(i),o&&(i/=100);var n={};if(isFinite(i)){var s=o||i>=0&&i<=1?i*r[e]:Math.max(i+r[e],0);n[t]=s}return n}}const tv={"ref-x":{position:Kg("x","width","origin")},"ref-y":{position:Kg("y","height","origin")},"ref-dx":{position:Kg("x","width","corner")},"ref-dy":{position:Kg("y","height","corner")},"ref-width":{set:Zg("width","width")},"ref-height":{set:Zg("height","height")},"ref-rx":{set:Zg("rx","width")},"ref-ry":{set:Zg("ry","height")},"ref-cx":{set:Zg("cx","width")},"ref-cy":{set:Zg("cy","height")},"ref-r-inscribed":{set:(ev=Zg("r","width"),iv=Zg("r","height"),function(t,e){return(e.height>e.width?ev:iv)(t,e)})},"ref-r-circumscribed":{set:function(t,e){var i=_g(t);t=parseFloat(t),i&&(t/=100);var r,o=Math.sqrt(e.height*e.height+e.width*e.width);return isFinite(t)&&(r=i||t>=0&&t<=1?t*o:Math.max(t+o,0)),{r:r}}}};var ev,iv;tv.refX=tv["ref-x"],tv.refY=tv["ref-y"],tv["ref-x2"]=tv["ref-x"],tv["ref-y2"]=tv["ref-y"],tv["ref-width2"]=tv["ref-width"],tv["ref-height2"]=tv["ref-height"],tv["ref-r"]=tv["ref-r-inscribed"];var rv=tv;const ov={x:"x",y:"y",width:"w",height:"h",minimum:"s",maximum:"l",diagonal:"d"},nv=Object.keys(ov).map((t=>ov[t])).join(""),sv="[-+]?[0-9]*\\.?[0-9]+(?:[eE][-+]?[0-9]+)?",av=/\s/g,lv=new RegExp(`^(${sv}\\*)?([${nv}])(/${sv})?([-+]{1,2}${sv})?$`,"g");function cv(t){throw new Error(`Invalid calc() expression: ${t}`)}function dv(t,e){const i=lv.exec(t.replace(av,""));i||cv(t),lv.lastIndex=0;const[,r,o,n,s]=i,{x:a,y:l,width:c,height:d}=e;let h=0;switch(o){case ov.width:h=c;break;case ov.height:h=d;break;case ov.x:h=a;break;case ov.y:h=l;break;case ov.minimum:h=Math.min(d,c);break;case ov.maximum:h=Math.max(d,c);break;case ov.diagonal:h=Math.sqrt(d*d+c*c)}return r&&(h*=parseFloat(r)),n&&(h/=parseFloat(n.slice(1))),s&&(h+=function(t){if(!t)return 0;const[e]=t;switch(e){case"+":return parseFloat(t.substr(1));case"-":return-parseFloat(t.substr(1))}return parseFloat(t)}(s)),h}function hv(t){return"string"==typeof t&&t.includes("calc")}const uv="calc(",pv=uv.length;function fv(t,e){let i=t,r=0;for(;;){let t=i.indexOf(uv,r);if(-1===t)return i;let o=t+pv,n=1;t:for(;;){switch(i[o]){case"(":n++;break;case")":if(n--,0===n)break t;break;case void 0:cv(i)}o++}let s=i.slice(t+pv,o);hv(s)&&(s=fv(s,e));const a=String(dv(s,e));i=i.slice(0,t)+a+i.slice(o+1),r=t+a.length}}function mv(t,e,i){return void 0!==i.text}const gv=["font-weight","font-family","font-size","letter-spacing","text-transform"],vv={"line-height":{qualify:mv},"text-vertical-anchor":{qualify:mv},"text-path":{qualify:mv},annotations:{qualify:mv},eol:{qualify:mv},"display-empty":{qualify:mv},text:{qualify:function(t,e,i){const r=i["text-wrap"];return!r||!cm(r)},set:function(t,e,i,r){const o="joint-text",n=lg.data.get(i,o),s=r["line-height"],a=r["text-vertical-anchor"],l=r["display-empty"],c=r["font-size"],d=r.annotations,h=r.eol,u=r.x;let p=r["text-path"];const f=JSON.stringify([t,s,d,a,h,l,p,u,c]);if(void 0===n||n!==f){if(c&&i.setAttribute("font-size",c),Wf(p)){const t=p.selector;if("string"==typeof t){const e=this.findNode(t);e instanceof SVGPathElement&&(p=Jf({"xlink:href":"#"+e.id},p))}}lu(i).text(""+t,{lineHeight:s,annotations:d,textPath:p,x:u,textVerticalAnchor:a,eol:h,displayEmpty:l}),lg.data.set(i,o,f)}}},"text-wrap":{qualify:cm,set:function(t,e,i,r){var o={},n=t.width||0;_g(n)?o.width=e.width*parseFloat(n)/100:hv(n)?o.width=Number(fv(n,e)):null===t.width?o.width=1/0:o.width=n<=0?e.width+n:n;var s,a=t.height||0;_g(a)?o.height=e.height*parseFloat(a)/100:hv(a)?o.height=Number(fv(a,e)):null===t.height||(o.height=a<=0?e.height+a:a);var l=t.text;if(void 0===l&&(l=r.text),void 0!==l){const e=t.breakText||Sg,n=getComputedStyle(i),a={};for(let t=0;t<gv.length;t++){const e=gv[t];e in r&&i.setAttribute(e,r[e]),a[e]=n[e]}a.lineHeight=r["line-height"],s=e(""+l,o,a,{svgDocument:this.paper.svg,ellipsis:t.ellipsis,hyphen:t.hyphen,separator:t.separator,maxLineCount:t.maxLineCount,preserveSpaces:t.preserveSpaces})}else s="";vv.text.set.call(this,s,e,i,r)},FONT_ATTRIBUTES:gv},title:{qualify:function(t,e){return e instanceof SVGElement},set:function(t,e,i){var r="joint-title",o=lg.data.get(i,r);if(void 0===o||o!==t){if(lg.data.set(i,r,t),"title"===i.tagName)return void(i.textContent=t);var n=i.firstElementChild;if(n&&"title"===n.tagName)n.textContent=t;else{var s=document.createElementNS(i.namespaceURI,"title");s.textContent=t,i.insertBefore(s,n)}}}}};var bv=vv;function yv(t,e){var i=new zd(1,0);return function(r){var o,n,s=this[t](r);return s?(n=e.rotate?s.vector().vectorAngle(i):0,o=s.start):(o=this.path.start,n=0),0===n?{transform:"translate("+o.x+","+o.y+")"}:{transform:"translate("+o.x+","+o.y+") rotate("+n+")"}}}function xv(){return this.model.isLink()}const wv={connection:{qualify:xv,set:function({stubs:t=0}){let e;if(isFinite(t)&&0!==t){let i;i=t<0?(this.getConnectionLength()+t)/2:t;const r=this.getConnection(),o=this.getConnectionSubdivisions(),n=r.divideAtLength(i,{segmentSubdivisions:o}),s=r.divideAtLength(-i,{segmentSubdivisions:o});n&&s&&(e=`${n[0].serialize()} ${s[1].serialize()}`)}return{d:e||this.getSerializedConnection()}}},"at-connection-length-keep-gradient":{qualify:xv,set:yv("getTangentAtLength",{rotate:!0})},"at-connection-length-ignore-gradient":{qualify:xv,set:yv("getTangentAtLength",{rotate:!1})},"at-connection-ratio-keep-gradient":{qualify:xv,set:yv("getTangentAtRatio",{rotate:!0})},"at-connection-ratio-ignore-gradient":{qualify:xv,set:yv("getTangentAtRatio",{rotate:!1})}};wv["at-connection-length"]=wv["at-connection-length-keep-gradient"],wv["at-connection-ratio"]=wv["at-connection-ratio-keep-gradient"];var _v=wv;function kv(t,e){var i="joint-shape",r=e&&e.resetOffset;return function(e,o,n){var s=lg.data.get(n,i);if(!s||s.value!==e){var a=t(e);s={value:e,shape:a,shapeBBox:a.bbox()},lg.data.set(n,i,s)}var l=s.shape.clone(),c=s.shapeBBox.clone(),d=c.origin(),h=o.origin();c.x=h.x,c.y=h.y;var u=o.maxRectScaleToFit(c,h),p=0===c.width||0===o.width?1:u.sx,f=0===c.height||0===o.height?1:u.sy;return l.scale(p,f,d),r&&l.translate(-d.x,-d.y),l}}function Cv(t){var e=kv((function(t){return new mh(lu.normalizePathData(t))}),t);return function(t,i,r){return{d:e(t,i,r).serialize()}}}function Av(t){var e=kv(ah,t);return function(t,i,r){return{points:e(t,i,r).serialize()}}}const Sv={"ref-d-reset-offset":{set:Cv({resetOffset:!0})},"ref-d-keep-offset":{set:Cv({resetOffset:!1})},"ref-points-reset-offset":{set:Av({resetOffset:!0})},"ref-points-keep-offset":{set:Av({resetOffset:!1})}};Sv["ref-d"]=Sv["ref-d-reset-offset"],Sv["ref-points"]=Sv["ref-points-reset-offset"];var Tv=Sv;function Pv(t){var e={},i=t.stroke;"string"==typeof i&&(e.stroke=i,e.fill=i);var r=t["stroke-opacity"];return void 0===r&&(r=t.opacity),void 0!==r&&(e["stroke-opacity"]=r,e["fill-opacity"]=r),e}function Ev(t){const{paper:e}=this;return`url(#${"pattern"===t.type?e.definePattern(t):e.defineGradient(t)})`}const Iv={"source-marker":{qualify:cm,set:function(t,e,i,r){return t=Jf(Pv(r),t),{"marker-start":"url(#"+this.paper.defineMarker(t)+")"}}},"target-marker":{qualify:cm,set:function(t,e,i,r){return t=Jf(Pv(r),{transform:"rotate(180)"},t),{"marker-end":"url(#"+this.paper.defineMarker(t)+")"}}},"vertex-marker":{qualify:cm,set:function(t,e,i,r){return t=Jf(Pv(r),t),{"marker-mid":"url(#"+this.paper.defineMarker(t)+")"}}},fill:{qualify:cm,set:Ev},stroke:{qualify:cm,set:Ev},filter:{qualify:cm,set:function(t){return"url(#"+this.paper.defineFilter(t)+")"}}};var Lv=Iv;function Ov(t,e,i){return function(r,o){var n;n="middle"===r?o[e]/2:r===i?o[e]:isFinite(r)?r>-1&&r<1?-o[e]*r:-r:_g(r)?o[e]*parseFloat(r)/100:0;var s=new zd;return s[t]=-(o[t]+n),s}}var Rv={"x-alignment":{offset:Ov("x","width","right")},"y-alignment":{offset:Ov("y","height","bottom")},"reset-offset":{offset:function(t,e){return t?{x:-e.x,y:-e.y}:{x:0,y:0}}}};function $v(t){return function(e,i,r){const o=lu(r);o.attr(t)!==e&&o.attr(t,e)}}const Mv={ref:{},href:{set:$v("href")},"xlink:href":{set:$v("xlink:href")},port:{set:function(t){return null===t||void 0===t.id?t:t.id}},style:{qualify:cm,set:function(t,e,i){lg(i).css(t)}},html:{set:function(t,e,i){lg(i).html(t+"")}},props:Qg};Jf(Mv,rv),Jf(Mv,bv),Jf(Mv,_v),Jf(Mv,Tv),Jf(Mv,Lv),Jf(Mv,Rv);const Nv=Mv,Dv=function(t,e){if(Array.isArray(t))return e},zv=Yg.extend({constructor:function(t,e){var i,r=t||{};if("function"==typeof this.preinitialize&&this.preinitialize.apply(this,arguments),this.cid=Cm("c"),this.attributes={},e&&e.collection&&(this.collection=e.collection),e&&e.parse&&(r=this.parse(r,e)||{}),i=bm(this,"defaults")){const t=(!e||!0!==e.mergeArrays)&&Dv;r=Am({},i,r,t)}this.set(r,e),this.changed={},this.initialize.apply(this,arguments)},translate:function(t,e,i){throw new Error("Must define a translate() method.")},toJSON:function(){const t=bm(this.constructor.prototype,"defaults").attrs||{},e=this.attributes.attrs,i={};wm(e,(function(e,r){const o=t[r];wm(e,(function(t,e){Wf(t)&&!Array.isArray(t)?wm(t,(function(t,n){o&&o[e]&&am(o[e][n],t)||(i[r]=i[r]||{},(i[r][e]||(i[r][e]={}))[n]=t)})):o&&am(o[e],t)||(i[r]=i[r]||{},i[r][e]=t)}))}));const r=nm(ym(this.attributes,"attrs"));return r.attrs=i,r},initialize:function(t){const e=this.getIdAttribute();t&&void 0!==t[e]||this.set(e,this.generateId(),{silent:!0}),this._transitionIds={},this._scheduledTransitionIds={},this.processPorts(),this.on("change:attrs",this.processPorts,this)},getIdAttribute:function(){return this.idAttribute||"id"},generateId:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)}))},processPorts:function(){var t=this.ports,e={};wm(this.get("attrs"),(function(t,i){t&&t.port&&(void 0!==t.port.id?e[t.port.id]=t.port:e[t.port]={id:t.port})}));var i={};(wm(t,(function(t,r){e[r]||(i[r]=!0)})),this.graph&&!sm(i))&&(this.graph.getConnectedLinks(this,{inbound:!0}).forEach((function(t){i[t.get("target").port]&&t.remove()})),this.graph.getConnectedLinks(this,{outbound:!0}).forEach((function(t){i[t.get("source").port]&&t.remove()})));this.ports=e},remove:function(t={}){const{graph:e,collection:i}=this;if(!e)return i&&i.remove(this,t),this;e.startBatch("remove");const r=this.getParentCell();r&&r.unembed(this,t);const o=this.getEmbeddedCells();for(let e=0,i=o.length;e<i;e++){const i=o[e];i&&i.remove(t)}return this.trigger("remove",this,e.attributes.cells,t),e.stopBatch("remove"),this},toFront:function(t){var e=this.graph;if(e){let i;(t=Qf(t||{},{foregroundEmbeds:!0})).deep?(i=this.getEmbeddedCells({deep:!0,breadthFirst:!1!==t.breadthFirst,sortSiblings:t.foregroundEmbeds}),i.unshift(this)):i=[this];const r=t.foregroundEmbeds?i:um(i,(t=>t.z()));let o=e.maxZIndex()-i.length+1;const n=e.get("cells");let s=n.toArray().indexOf(r[0])!==n.length-i.length;s||(s=r.some((function(t,e){return t.z()!==o+e}))),s&&(this.startBatch("to-front"),o+=i.length,r.forEach((function(e,i){e.set("z",o+i,t)})),this.stopBatch("to-front"))}return this},toBack:function(t){var e=this.graph;if(e){let i;(t=Qf(t||{},{foregroundEmbeds:!0})).deep?(i=this.getEmbeddedCells({deep:!0,breadthFirst:!1!==t.breadthFirst,sortSiblings:t.foregroundEmbeds}),i.unshift(this)):i=[this];const r=t.foregroundEmbeds?i:um(i,(t=>t.z()));let o=e.minZIndex();let n=0!==e.get("cells").toArray().indexOf(r[0]);n||(n=r.some((function(t,e){return t.z()!==o+e}))),n&&(this.startBatch("to-back"),o-=i.length,r.forEach((function(e,i){e.set("z",o+i,t)})),this.stopBatch("to-back"))}return this},parent:function(t,e){return void 0===t?this.get("parent"):this.set("parent",t,e)},embed:function(t,e){const i=Array.isArray(t)?t:[t];if(!this.canEmbed(i))throw new Error("Recursive embedding not allowed.");if(i.some((t=>t.isEmbedded()&&this.id!==t.parent())))throw new Error("Embedding of already embedded cells is not allowed.");return this._embedCells(i,e),this},unembed:function(t,e){const i=Array.isArray(t)?t:[t];return this._unembedCells(i,e),this},canEmbed:function(t){return(Array.isArray(t)?t:[t]).every((t=>this!==t&&!this.isEmbeddedIn(t)))},_embedCells:function(t,e){const i="embed";this.startBatch(i);const r=Jf([],this.get("embeds"));t.forEach((t=>{r[t.isLink()?"unshift":"push"](t.id),t.parent(this.id,e)})),this.set("embeds",rm(r),e),this.stopBatch(i)},_unembedCells:function(t,e){const i="unembed";this.startBatch(i),t.forEach((t=>t.unset("parent",e))),this.set("embeds",fm(this.get("embeds"),...t.map((t=>t.id))),e),this.stopBatch(i)},getParentCell:function(){var t=this.parent(),e=this.graph;return t&&e&&e.getCell(t)||null},getAncestors:function(){var t=[];if(!this.graph)return t;for(var e=this.getParentCell();e;)t.push(e),e=e.getParentCell();return t},getEmbeddedCells:function(t){if(t=t||{},!this.graph)return[];if(t.deep)return t.breadthFirst?this._getEmbeddedCellsBfs(t.sortSiblings):this._getEmbeddedCellsDfs(t.sortSiblings);const e=this.get("embeds");if(sm(e))return[];let i=e.map(this.graph.getCell,this.graph);return t.sortSiblings&&(i=um(i,(t=>t.z()))),i},_getEmbeddedCellsBfs:function(t){const e=[],i=[];for(i.push(this);i.length>0;){const r=i.shift();e.push(r);const o=r.getEmbeddedCells({sortSiblings:t});i.push(...o)}return e.shift(),e},_getEmbeddedCellsDfs:function(t){const e=[],i=[];for(i.push(this);i.length>0;){const r=i.pop();e.push(r);const o=r.getEmbeddedCells({sortSiblings:t});for(let t=o.length-1;t>=0;--t)i.push(o[t])}return e.shift(),e},isEmbeddedIn:function(t,e){var i=Xf(t)?t:t.id,r=this.parent();if(e=Jf({deep:!0},e),this.graph&&e.deep){for(;r;){if(r===i)return!0;r=this.graph.getCell(r).parent()}return!1}return r===i},isEmbedded:function(){return!!this.parent()},clone:function(t){if((t=t||{}).deep)return dm(Xg([this].concat(this.getEmbeddedCells({deep:!0}))));var e=Yg.prototype.clone.apply(this,arguments);return e.set(this.getIdAttribute(),this.generateId()),e.unset("embeds"),e.unset("parent"),e},prop:function(t,e,i){var r=Xf(t);if(r||Array.isArray(t)){if(arguments.length>1){var o,n;r?n=(o=t).split("/"):(o=t.join("/"),n=t.slice());var s=n[0],a=n.length;const g=i||{};g.propertyPath=o,g.propertyValue=e,g.propertyPathArray=n,"rewrite"in g||(g.rewrite=!1);for(var l={},c=l,d=s,h=1;h<a;h++){var u=n[h],p=Number.isFinite(r?Number(u):u);c=c[d]=p?[]:{},d=u}l=fg(l,n,e,"/");var f=Am({},this.attributes);g.rewrite&&mg(f,o,"/");var m=Am(f,l);return this.set(s,m[s],g)}return ug(this.attributes,t,"/")}const g=e||{};g.propertyPath=null,g.propertyValue=t,g.propertyPathArray=[],"rewrite"in g||(g.rewrite=!1);const v={};for(const e in t){const{changedValue:i}=Am({},{changedValue:this.attributes[e]},{changedValue:t[e]});v[e]=i}return this.set(v,g)},removeProp:function(t,e){e=e||{};var i=Array.isArray(t)?t:t.split("/"),r=i[0];if("attrs"===r&&(e.dirty=!0),1===i.length)return this.unset(t,e);var o=i.slice(1),n=this.get(r);return null==n?this:(n=nm(n),mg(n,o,"/"),this.set(r,n,e))},attr:function(t,e,i){var r=Array.from(arguments);return 0===r.length?this.get("attrs"):(Array.isArray(t)?r[0]=["attrs"].concat(t):Xf(t)?r[0]="attrs/"+t:r[0]={attrs:t},this.prop.apply(this,r))},removeAttr:function(t,e){return Array.isArray(t)?this.removeProp(["attrs"].concat(t)):this.removeProp("attrs/"+t,e)},transition:function(t,e,i,r){r=r||"/",i=Jf({duration:100,delay:10,timingFunction:Pg.linear,valueFunction:Eg.number},i);var o,n=0,s=function(e){var r,a,l;(a=(e-=n=n||e)/i.duration)<1?this._transitionIds[t]=r=bg(s):(a=1,delete this._transitionIds[t]),l=o(i.timingFunction(a)),i.transitionId=r,this.prop(t,l,i),r||this.trigger("transition:end",this,t)}.bind(this);const{_scheduledTransitionIds:a}=this;let l;return l=setTimeout((n=>{a[t]&&(a[t]=fm(a[t],l),0===a[t].length&&delete a[t]),this.stopPendingTransitions(t,r),o=i.valueFunction(ug(this.attributes,t,r),e),this._transitionIds[t]=bg(n),this.trigger("transition:start",this,t)}),i.delay,s),a[t]||(a[t]=[]),a[t].push(l),l},getTransitions:function(){return gm(Object.keys(this._transitionIds),Object.keys(this._scheduledTransitionIds))},stopScheduledTransitions:function(t,e="/"){const{_scheduledTransitionIds:i={}}=this;let r=Object.keys(i);if(t){const i=t.split(e);r=r.filter((t=>am(i,t.split(e).slice(0,i.length))))}return r.forEach((t=>{i[t].forEach((t=>clearTimeout(t))),delete i[t]})),this},stopPendingTransitions(t,e="/"){const{_transitionIds:i={}}=this;let r=Object.keys(i);if(t){const i=t.split(e);r=r.filter((t=>am(i,t.split(e).slice(0,i.length))))}r.forEach((t=>{const e=i[t];yg(e),delete i[t],this.trigger("transition:end",this,t)}))},stopTransitions:function(t,e="/"){return this.stopScheduledTransitions(t,e),this.stopPendingTransitions(t,e),this},addTo:function(t,e){return t.addCell(this,e),this},findView:function(t){return t.findViewByModel(this)},isElement:function(){return!1},isLink:function(){return!1},startBatch:function(t,e){return this.graph&&this.graph.startBatch(t,Jf({},e,{cell:this})),this},stopBatch:function(t,e){return this.graph&&this.graph.stopBatch(t,Jf({},e,{cell:this})),this},getChangeFlag:function(t){var e=0;if(!t)return e;for(var i in t)t.hasOwnProperty(i)&&this.hasChanged(i)&&(e|=t[i]);return e},angle:function(){return 0},position:function(){return new zd(0,0)},z:function(){return this.get("z")||0},getPointFromConnectedLink:function(){return new zd},getBBox:function(){return new ih(0,0,0,0)},getPointRotatedAroundCenter(t,e,i){const r=new zd(e,i);return t&&r.rotate(this.getBBox().center(),t),r},getAbsolutePointFromRelative(t,e){return this.getPointRotatedAroundCenter(-this.angle(),this.position().offset(t,e))},getRelativePointFromAbsolute(t,e){return this.getPointRotatedAroundCenter(this.angle(),t,e).difference(this.position())}},{getAttributeDefinition:function(t){var e=this.attributes,i=Nv;return e&&e[t]||i[t]},define:function(t,e,i,r){i=Jf({defaults:Zf({type:t},e,this.prototype.defaults)},i);var o=this.extend(i,r);return"undefined"!=typeof joint&&vm(joint,"shapes")&&fg(joint.shapes,t,o,"."),o}}),Fv={cells:function(t){return function(){var e=Array.from(arguments),i=e.length,r=i>0&&e[0]||[],o=i>1&&e[i-1]||{};return Array.isArray(r)||(o instanceof zv?r=e:r instanceof zv&&(e.length>1&&e.pop(),r=e)),o instanceof zv&&(o={}),t.call(this,r,o)}}},Bv={TOP:"top",RIGHT:"right",BOTTOM:"bottom",LEFT:"left",TOP_LEFT:"top-left",TOP_RIGHT:"top-right",BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",CENTER:"center"};function Uv(t,e){const i=new ih(t);switch(e){case void 0:throw new Error("Position required");case Bv.LEFT:case"leftMiddle":return i.leftMiddle();case Bv.RIGHT:case"rightMiddle":return i.rightMiddle();case Bv.TOP:case"topMiddle":return i.topMiddle();case Bv.BOTTOM:case"bottomMiddle":return i.bottomMiddle();case Bv.TOP_LEFT:case"topLeft":case"origin":return i.topLeft();case Bv.TOP_RIGHT:case"topRight":return i.topRight();case Bv.BOTTOM_LEFT:case"bottomLeft":return i.bottomLeft();case Bv.BOTTOM_RIGHT:case"bottomRight":case"corner":return i.bottomRight();case Bv.CENTER:return i.center();default:throw new Error(`Unknown position: ${e}`)}}function Vv(t,e,i){var r=t.toJSON();return r.angle=e||0,Qf({},i,r)}function jv(t,e,i,r){return t.map((function(t,e,i){var o=this.pointAt((e+.5)/i.length);return(t.dx||t.dy)&&o.offset(t.dx||0,t.dy||0),Vv(o.round(),0,Hv(r,t))}),jd(e,i))}function Gv(t,e,i,r){var o=e.center(),n=e.width/e.height,s=e.topMiddle(),a=Wd.fromRect(e);return t.map((function(t,l,c){var d=i+r(l,c.length),h=s.clone().rotate(o,-d).scale(n,1,o),u=t.compensateRotation?-a.tangentTheta(h):0;return(t.dx||t.dy)&&h.offset(t.dx||0,t.dy||0),t.dr&&h.move(o,t.dr),Vv(h.round(),u,Hv(e,t))}))}function Hv(t,e){let{x:i,y:r,angle:o}=e;return _g(i)?i=parseFloat(i)/100*t.width:hv(i)&&(i=Number(fv(i,t))),_g(r)?r=parseFloat(r)/100*t.height:hv(r)&&(r=Number(fv(r,t))),{x:i,y:r,angle:o}}function qv(t,e){const{x:i,y:r}=Hv(t,e);return new zd(i||0,r||0)}var Wv=Object.freeze({__proto__:null,absolute:function(t,e){return t.map((t=>{const i=qv(e,t).round().toJSON();return i.angle=t.angle||0,i}))},fn:function(t,e,i){return i.fn(t,e,i)},line:function(t,e,i){return jv(t,qv(e,i.start||e.origin()),qv(e,i.end||e.corner()),e)},left:function(t,e,i){return jv(t,e.origin(),e.bottomLeft(),e)},right:function(t,e,i){return jv(t,e.topRight(),e.corner(),e)},top:function(t,e,i){return jv(t,e.origin(),e.topRight(),e)},bottom:function(t,e,i){return jv(t,e.bottomLeft(),e.corner(),e)},ellipseSpread:function(t,e,i){var r=i.startAngle||0,o=i.step||360/t.length;return Gv(t,e,r,(function(t){return t*o}))},ellipse:function(t,e,i){var r=i.startAngle||0,o=i.step||20;return Gv(t,e,r,(function(t,e){return(t+.5-e/2)*o}))}});function Yv(t,e){return Zf({},t,e,{x:0,y:0,angle:0,attrs:{}})}function Xv(t){var e=t.center(),i=e.theta(t.origin()),r=e.theta(t.bottomLeft()),o=e.theta(t.corner());return[i,e.theta(t.topRight()),o,r]}function Jv(t,e,i,r){r=Qf({},r,{offset:15});var o,n,s,a,l=e.center().theta(t),c=r.offset,d=0;const[h,u,p,f]=Xv(e);l<u||l>p?(s=".3em",o=c,n=0,a="start"):l<h?(o=0,n=-c,i?(d=-90,a="start",s=".3em"):(a="middle",s="0")):l<f?(s=".3em",o=-c,n=0,a="end"):(o=0,n=c,i?(d=90,a="start",s=".3em"):(a="middle",s=".6em"));var m=Math.round;return Yv(r,{x:m(o),y:m(n),angle:d,attrs:{labelText:{y:s,textAnchor:a}}})}function Qv(t,e,i,r){r=Qf({},r,{offset:15});var o,n,s,a,l=e.center().theta(t),c=r.offset,d=0;const[h,u,p,f]=Xv(e);l<u||l>p?(s=".3em",o=-c,n=0,a="end"):l<h?(o=0,n=c,i?(d=90,a="start",s=".3em"):(a="middle",s=".6em")):l<f?(s=".3em",o=c,n=0,a="start"):(o=0,n=-c,i?(d=-90,a="start",s=".3em"):(a="middle",s="0"));var m=Math.round;return Yv(r,{x:m(o),y:m(n),angle:d,attrs:{labelText:{y:s,textAnchor:a}}})}function Kv(t,e,i){i=Qf({},i,{offset:20});var r,o=Fd(0,0),n=-t.theta(o),s=n,a=t.clone().move(o,i.offset).difference(t).round(),l=".3em";(n+90)%180==0?(r=e?"end":"middle",e||-270!==n||(l="0em")):n>-270&&n<-90?(r="start",s=n-180):r="end";var c=Math.round;return Yv(i,{x:c(a.x),y:c(a.y),angle:e?s:0,attrs:{labelText:{y:l,textAnchor:r}}})}var Zv=Object.freeze({__proto__:null,manual:function(t,e,i){return Yv(i)},left:function(t,e,i){return Yv(i,{x:-15,attrs:{labelText:{y:".3em",textAnchor:"end"}}})},right:function(t,e,i){return Yv(i,{x:15,attrs:{labelText:{y:".3em",textAnchor:"start"}}})},top:function(t,e,i){return Yv(i,{y:-15,attrs:{labelText:{y:"0",textAnchor:"middle"}}})},bottom:function(t,e,i){return Yv(i,{y:15,attrs:{labelText:{y:".6em",textAnchor:"middle"}}})},outsideOriented:function(t,e,i){return Jv(t,e,!0,i)},outside:function(t,e,i){return Jv(t,e,!1,i)},insideOriented:function(t,e,i){return Qv(t,e,!0,i)},inside:function(t,e,i){return Qv(t,e,!1,i)},radial:function(t,e,i){return Kv(t.difference(e.center()),!1,i)},radialOriented:function(t,e,i){return Kv(t.difference(e.center()),!0,i)}}),tb=function(t){var e=nm(t)||{};this.ports=[],this.groups={},this.portLayoutNamespace=Wv,this.portLabelLayoutNamespace=Zv,this._init(e)};tb.prototype={getPorts:function(){return this.ports},getGroup:function(t){return this.groups[t]||{}},getPortsByGroup:function(t){return this.ports.filter((function(e){return e.group===t}))},getGroupPortsMetrics:function(t,e){var i=this.getGroup(t),r=this.getPortsByGroup(t),o=i.position||{},n=o.name,s=this.portLayoutNamespace;s[n]||(n="left");var a=o.args||{},l=r.map((function(t){return t&&t.position&&t.position.args})),c=s[n](l,e,a),d={ports:r,result:[]};return dm(c).reduce(function(t,i,r){var o=t.ports[r];return t.result.push({portId:o.id,portTransformation:i,labelTransformation:this._getPortLabelLayout(o,zd(i),e),portAttrs:o.attrs,portSize:o.size,labelSize:o.label.size}),t}.bind(this),d),d.result},_getPortLabelLayout:function(t,e,i){var r=this.portLabelLayoutNamespace,o=t.label.position.name||"left";return r[o]?r[o](e,i,t.label.position.args):null},_init:function(t){if(Wf(t.groups))for(var e=Object.keys(t.groups),i=0,r=e.length;i<r;i++){var o=e[i];this.groups[o]=this._evaluateGroup(t.groups[o])}for(var n=dm(t.items),s=0,a=n.length;s<a;s++)this.ports.push(this._evaluatePort(n[s]))},_evaluateGroup:function(t){return Am(t,{position:this._getPosition(t.position,!0),label:this._getLabel(t,!0)})},_evaluatePort:function(t){var e=Jf({},t),i=this.getGroup(t.group);return e.markup=e.markup||i.markup,e.attrs=Am({},i.attrs,e.attrs),e.position=this._createPositionNode(i,e),e.label=Am({},i.label,this._getLabel(e)),e.z=this._getZIndex(i,e),e.size=Jf({},i.size,e.size),e},_getZIndex:function(t,e){return Yf(e.z)?e.z:Yf(t.z)||"auto"===t.z?t.z:"auto"},_createPositionNode:function(t,e){return Am({name:"left",args:{}},t.position,{args:e.args})},_getPosition:function(t,e){var i,r={};lm(t)?(i="fn",r.fn=t):Xf(t)?i=t:void 0===t?i=e?"left":null:Array.isArray(t)?(i="absolute",r.x=t[0],r.y=t[1]):Wf(t)&&(i=t.name,Jf(r,t.args));var o={args:r};return i&&(o.name=i),o},_getLabel:function(t,e){var i=t.label||{},r=i;return r.position=this._getPosition(i.position,e),r}};const eb={_initializePorts:function(){this._createPortData(),this.on("change:ports",(function(){this._processRemovedPort(),this._createPortData()}),this)},_processRemovedPort:function(){var t=this.get("ports")||{},e={};dm(t.items).forEach((function(t){e[t.id]=!0}));var i=this.previous("ports")||{},r={};dm(i.items).forEach((function(t){e[t.id]||(r[t.id]=!0)}));var o=this.graph;o&&!sm(r)&&(o.getConnectedLinks(this,{inbound:!0}).forEach((function(t){r[t.get("target").port]&&t.remove()})),o.getConnectedLinks(this,{outbound:!0}).forEach((function(t){r[t.get("source").port]&&t.remove()})))},hasPorts:function(){var t=this.prop("ports/items");return Array.isArray(t)&&t.length>0},hasPort:function(t){return-1!==this.getPortIndex(t)},getPorts:function(){return nm(this.prop("ports/items"))||[]},getGroupPorts:function(t){const e=dm(this.prop(["ports","items"])).filter((e=>e.group===t));return nm(e)},getPort:function(t){return nm(dm(this.prop("ports/items")).find((function(e){return e.id&&e.id===t})))},getPortsPositions:function(t){return this._portSettingsData.getGroupPortsMetrics(t,ih(this.size())).reduce((function(t,e){var i=e.portTransformation;return t[e.portId]={x:i.x,y:i.y,angle:i.angle},t}),{})},getPortIndex:function(t){var e=Wf(t)?t.id:t;return this._isValidPortId(e)?dm(this.prop("ports/items")).findIndex((function(t){return t.id===e})):-1},addPort:function(t,e){if(!Wf(t)||Array.isArray(t))throw new Error("Element: addPort requires an object.");var i=Jf([],this.prop("ports/items"));return i.push(t),this.prop("ports/items",i,e),this},insertPort:function(t,e,i){const r="number"==typeof t?t:this.getPortIndex(t);if(!Wf(e)||Array.isArray(e))throw new Error("dia.Element: insertPort requires an object.");const o=Jf([],this.prop("ports/items"));return o.splice(r,0,e),this.prop("ports/items",o,i),this},portProp:function(t,e,i,r){var o=this.getPortIndex(t);if(-1===o)throw new Error("Element: unable to find port with id "+t);var n=Array.prototype.slice.call(arguments,1);return Array.isArray(e)?n[0]=["ports","items",o].concat(e):Xf(e)?n[0]=["ports/items/",o,"/",e].join(""):(n=["ports/items/"+o],cm(e)&&(n.push(e),n.push(i))),this.prop.apply(this,n)},_validatePorts:function(){var t=this.get("ports")||{},e=[],i=dm((t=t||{}).items);return i.forEach((function(t){"object"!=typeof t&&e.push("Element: invalid port ",t),this._isValidPortId(t.id)||(t.id=this.generatePortId())}),this),rm(i,"id").length!==i.length&&e.push("Element: found id duplicities in ports."),e},generatePortId:function(){return this.generateId()},_isValidPortId:function(t){return null!=t&&!Wf(t)},addPorts:function(t,e){return t.length&&this.prop("ports/items",Jf([],this.prop("ports/items")).concat(t),e),this},removePort:function(t,e){const i=e||{},r=this.getPortIndex(t);if(-1!==r){const t=Jf([],this.prop(["ports","items"]));t.splice(r,1),i.rewrite=!0,this.startBatch("port-remove"),this.prop(["ports","items"],t,i),this.stopBatch("port-remove")}return this},removePorts:function(t,e){let i,r;if(Array.isArray(t)){if(i=e||{},0===t.length)return this.this;r=Jf([],this.prop(["ports","items"])).filter((function(e){return!t.some((function(t){const i=Wf(t)?t.id:t;return e.id===i}))}))}else i=t||{},r=[];return this.startBatch("port-remove"),i.rewrite=!0,this.prop(["ports","items"],r,i),this.stopBatch("port-remove"),this},_createPortData:function(){var t,e=this._validatePorts();if(e.length>0)throw this.set("ports",this.previous("ports")),new Error(e.join(" "));this._portSettingsData&&(t=this._portSettingsData.getPorts()),this._portSettingsData=new tb(this.get("ports"));var i=this._portSettingsData.getPorts();if(t){var r=i.filter((function(e){if(!t.find((function(t){return t.id===e.id})))return e})),o=t.filter((function(t){if(!i.find((function(e){return e.id===t.id})))return t}));o.length>0&&this.trigger("ports:remove",this,o),r.length>0&&this.trigger("ports:add",this,r)}}},ib={portContainerMarkup:"g",portMarkup:[{tagName:"circle",selector:"circle",attributes:{r:10,fill:"#FFFFFF",stroke:"#000000"}}],portLabelMarkup:[{tagName:"text",selector:"text",attributes:{fill:"#000000"}}],_portElementsCache:null,_initializePorts:function(){this._cleanPortsCache()},_refreshPorts:function(){this._removePorts(),this._cleanPortsCache(),this._renderPorts()},_cleanPortsCache:function(){this._portElementsCache={}},_renderPorts:function(){for(var t=[],e=this._getContainerElement(),i=0,r=e.node.childNodes.length;i<r;i++)t.push(e.node.childNodes[i]);var o=hm(this.model._portSettingsData.getPorts(),"z"),n="auto";dm(o[n]).forEach((function(i){var r=this._getPortElement(i);e.append(r),t.push(r)}),this);for(var s=Object.keys(o),a=0;a<s.length;a++){var l=s[a];if(l!==n){var c=parseInt(l,10);this._appendPorts(o[l],c,t)}}this._updatePorts()},_getContainerElement:function(){return this.rotatableNode||this.vel},_appendPorts:function(t,e,i){var r=this._getContainerElement(),o=dm(t).map(this._getPortElement,this);i[e]||e<0?lu(i[Math.max(e,0)]).before(o):r.append(o)},_getPortElement:function(t){return this._portElementsCache[t.id]?this._portElementsCache[t.id].portElement:this._createPortElement(t)},findPortNodes:function(t,e){const i=this._portElementsCache[t];if(!i)return[];if(!e)return[i.portContentElement.node];const r=i.portElement.node,o=i.portSelectors;return this.findBySelector(e,r,o)},findPortNode:function(t,e){const[i=null]=this.findPortNodes(t,e);return i},_updatePorts:function(){this._updatePortGroup(void 0),Object.keys(this.model._portSettingsData.groups).forEach(this._updatePortGroup,this)},_removePorts:function(){tm(this._portElementsCache,"portElement.remove")},_createPortElement:function(t){let e,i,r,o;var n=lu(this.portContainerMarkup).addClass("joint-port"),s=this._getPortMarkup(t);if(Array.isArray(s)){var a=this.parseDOMJSON(s,n.node),l=a.fragment;e=l.childNodes.length>1?lu("g").append(l):lu(l.firstChild),o=a.selectors}else e=lu(s),Array.isArray(e)&&(e=lu("g").append(e));if(!e)throw new Error("ElementView: Invalid port markup.");e.attr({port:t.id,"port-group":t.group}),Yf(t.id)&&e.attr("port-id-type","number");const c=this._getPortLabelMarkup(t.label);if(Array.isArray(c)){const{fragment:t,selectors:e}=this.parseDOMJSON(c,n.node),o=t.childNodes.length;o>0&&(r=e,i=1===o?lu(t.firstChild):lu("g").append(t))}else i=lu(c),Array.isArray(i)&&(i=lu("g").append(i));var d;if(o&&r){for(var h in r)if(o[h]&&h!==this.selector)throw new Error("ElementView: selectors within port must be unique.");d=Jf({},o,r)}else d=o||r||{};const u="portRoot",p="labelRoot",f="labelText";if(u in d||(d[u]=e.node),i){const t=i.node;if(p in d||(d[p]=t),!(f in d)){const e="TEXT"===i.tagName()?t:Array.from(t.querySelectorAll("text"));d[f]=e,r||(r={}),r[f]=e}}return n.append(e.addClass("joint-port-body")),i&&n.append(i.addClass("joint-port-label")),this._portElementsCache[t.id]={portElement:n,portLabelElement:i,portSelectors:d,portLabelSelectors:r,portContentElement:e,portContentSelectors:o},n},_updatePortGroup:function(t){for(var e=ih(this.model.size()),i=this.model._portSettingsData.getGroupPortsMetrics(t,e),r=0,o=i.length;r<o;r++){var n=i[r],s=n.portId,a=this._portElementsCache[s]||{},l=n.portTransformation,c=n.labelTransformation;c&&a.portLabelElement&&(this.updateDOMSubtreeAttributes(a.portLabelElement.node,c.attrs,{rootBBox:new ih(n.labelSize),selectors:a.portLabelSelectors}),this.applyPortTransform(a.portLabelElement,c,-l.angle||0)),this.updateDOMSubtreeAttributes(a.portElement.node,n.portAttrs,{rootBBox:new ih(n.portSize),selectors:a.portSelectors}),this.applyPortTransform(a.portElement,l)}},applyPortTransform:function(t,e,i){var r=lu.createSVGMatrix().rotate(i||0).translate(e.x||0,e.y||0).rotate(e.angle||0);t.transform(r,{absolute:!0})},_getPortMarkup:function(t){return t.markup||this.model.get("portMarkup")||this.model.portMarkup||this.portMarkup},_getPortLabelMarkup:function(t){return t.markup||this.model.get("portLabelMarkup")||this.model.portLabelMarkup||this.portLabelMarkup}},rb=zv.extend({defaults:{position:{x:0,y:0},size:{width:1,height:1},angle:0},initialize:function(){this._initializePorts(),zv.prototype.initialize.apply(this,arguments)},_initializePorts:function(){},_refreshPorts:function(){},isElement:function(){return!0},position:function(t,e,i){const r=Yf(e);i=(r?i:t)||{};const{parentRelative:o,deep:n,restrictedArea:s}=i;let a;if(o){if(!this.graph)throw new Error("Element must be part of a graph.");const t=this.getParentCell();t&&!t.isLink()&&(a=t.get("position"))}if(r){if(a&&(t+=a.x,e+=a.y),n||s){const{x:r,y:o}=this.get("position");this.translate(t-r,e-o,i)}else this.set("position",{x:t,y:e},i);return this}{const t=zd(this.get("position"));return o?t.difference(a):t}},translate:function(t,e,i){if(e=e||0,0===(t=t||0)&&0===e)return this;(i=i||{}).translateBy=i.translateBy||this.id;var r=this.get("position")||{x:0,y:0},o=i.restrictedArea;if(o&&i.translateBy===this.id)if("function"==typeof o){var n=o.call(this,r.x+t,r.y+e,i);t=n.x-r.x,e=n.y-r.y}else{var s=this.getBBox({deep:!0}),a=r.x-s.x,l=r.y-s.y,c=Math.max(o.x+a,Math.min(o.x+o.width+a-s.width,r.x+t)),d=Math.max(o.y+l,Math.min(o.y+o.height+l-s.height,r.y+e));t=c-r.x,e=d-r.y}var h={x:r.x+t,y:r.y+e};return i.tx=t,i.ty=e,i.transition?(Wf(i.transition)||(i.transition={}),this.transition("position",h,Jf({},i.transition,{valueFunction:Eg.object})),tm(this.getEmbeddedCells(),"translate",t,e,i)):(this.startBatch("translate",i),this.set("position",h,i),tm(this.getEmbeddedCells(),"translate",t,e,i),this.stopBatch("translate",i)),this},size:function(t,e,i){var r=this.get("size");return void 0===t?{width:r.width,height:r.height}:(Wf(t)&&(i=e,e=Yf(t.height)?t.height:r.height,t=Yf(t.width)?t.width:r.width),this.resize(t,e,i))},resize:function(t,e,i){if(i=i||{},this.startBatch("resize",i),i.direction){var r=this.get("size");switch(i.direction){case"left":case"right":e=r.height;break;case"top":case"bottom":t=r.width}var o,n=gd(this.get("angle")||0),s=this.getBBox();if(n){var a={"top-right":0,right:0,"top-left":1,top:1,"bottom-left":2,left:2,"bottom-right":3,bottom:3}[i.direction];i.absolute&&(a+=Math.floor((n+45)/90),a%=4);var l=s[["bottomLeft","corner","topRight","origin"][a]](),c=zd(l).rotate(s.center(),-n),d=Math.sqrt(t*t+e*e)/2,h=a*Math.PI/2;h+=Math.atan(a%2==0?e/t:t/e),h-=yd(n);var u=zd.fromPolar(d,h,c);o=zd(u).offset(t/-2,e/-2)}else switch(o=s.topLeft(),i.direction){case"top":case"top-right":o.offset(0,s.height-e);break;case"left":case"bottom-left":o.offset(s.width-t,0);break;case"top-left":o.offset(s.width-t,s.height-e)}this.set("size",{width:t,height:e},i),this.position(o.x,o.y,i)}else this.set("size",{width:t,height:e},i);return this.stopBatch("resize",i),this},scale:function(t,e,i,r){var o=this.getBBox().scale(t,e,i);return this.startBatch("scale",r),this.position(o.x,o.y,r),this.resize(o.width,o.height,r),this.stopBatch("scale"),this},fitEmbeds:function(t){return this.fitToChildren(t)},fitToChildren:function(t={}){const{graph:e}=this;if(!e)throw new Error("Element must be part of a graph.");const i=this.getEmbeddedCells().filter((t=>t.isElement()));return 0===i.length||(this.startBatch("fit-embeds",t),t.deep&&tm(i,"fitToChildren",t),this._fitToElements(Object.assign({elements:i},t)),this.stopBatch("fit-embeds")),this},fitParent:function(t={}){const{graph:e}=this;if(!e)throw new Error("Element must be part of a graph.");if(t.deep&&t.terminator&&(t.terminator===this||t.terminator===this.id))return this;const i=this.getParentCell();if(!i||!i.isElement())return this;const r=i.getEmbeddedCells().filter((t=>t.isElement()));return 0===r.length||(this.startBatch("fit-parent",t),i._fitToElements(Object.assign({elements:r},t)),t.deep&&i.fitParent(t),this.stopBatch("fit-parent")),this},_fitToElements:function(t={}){const e=this.graph.getCellsBBox(t.elements);if(!e)return;const{expandOnly:i,shrinkOnly:r}=t;if(i&&r)return;let{x:o,y:n,width:s,height:a}=e;const{left:l,right:c,top:d,bottom:h}=Tg(t.padding);o-=l,n-=d,s+=l+c,a+=h+d;let u=new ih(o,n,s,a);if(i)u=this.getBBox().union(u);else if(r){const t=this.getBBox().intersect(u);if(!t)return;u=t}this.set({position:{x:u.x,y:u.y},size:{width:u.width,height:u.height}},t)},rotate:function(t,e,i,r){if(i){var o=this.getBBox().center(),n=this.get("size"),s=this.get("position");o.rotate(i,this.get("angle")-t);var a=o.x-n.width/2-s.x,l=o.y-n.height/2-s.y;this.startBatch("rotate",{angle:t,absolute:e,origin:i}),this.position(s.x+a,s.y+l,r),this.rotate(t,e,null,r),this.stopBatch("rotate")}else this.set("angle",e?t:(this.get("angle")+t)%360,r);return this},angle:function(){return gd(this.get("angle")||0)},getBBox:function(t={}){const{graph:e,attributes:i}=this,{deep:r,rotate:o}=t;if(r&&e){const i=this.getEmbeddedCells({deep:!0,breadthFirst:!0});return i.push(this),e.getCellsBBox(i,t)}const{angle:n=0,position:{x:s,y:a},size:{width:l,height:c}}=i,d=new ih(s,a,l,c);return o&&d.rotateAroundCenter(n),d},getPointFromConnectedLink:function(t,e){var i=this.getBBox(),r=i.center(),o=t.get(e);if(!o)return r;var n=o.port;if(!n||!this.hasPort(n))return r;var s=this.portProp(n,["group"]),a=this.getPortsPositions(s),l=new zd(a[n]).offset(i.origin()),c=this.angle();return c&&l.rotate(r,-c),l}});Jf(rb.prototype,eb);const ob=zv.extend({defaultLabel:void 0,labelMarkup:void 0,_builtins:{defaultLabel:{markup:[{tagName:"rect",selector:"rect"},{tagName:"text",selector:"text"}],attrs:{text:{fill:"#000000",fontSize:14,textAnchor:"middle",textVerticalAnchor:"middle",pointerEvents:"none"},rect:{ref:"text",fill:"#ffffff",rx:3,ry:3,x:"calc(x)",y:"calc(y)",width:"calc(w)",height:"calc(h)"}},position:{distance:.5}}},defaults:{source:{},target:{}},isLink:function(){return!0},disconnect:function(t){return this.set({source:{x:0,y:0},target:{x:0,y:0}},t)},source:function(t,e,i){return void 0===t?om(this.get("source")):t instanceof zv?((r=om(e)||{}).id=t.id,o=i,this.set("source",r,o)):cm(t)?(r=t,o=e,this.set("source",r,o)):((r=om(e)||{}).x=t.x,r.y=t.y,o=i,this.set("source",r,o));var r,o},target:function(t,e,i){return void 0===t?om(this.get("target")):t instanceof zv?((r=om(e)||{}).id=t.id,o=i,this.set("target",r,o)):cm(t)?(r=t,o=e,this.set("target",r,o)):((r=om(e)||{}).x=t.x,r.y=t.y,o=i,this.set("target",r,o));var r,o},router:function(t,e,i){if(void 0===t){var r=this.get("router");return r?"object"==typeof r?om(r):r:null}var o="object"==typeof t||"function"==typeof t,n=o?t:{name:t,args:e},s=o?e:i;return this.set("router",n,s)},connector:function(t,e,i){if(void 0===t){var r=this.get("connector");return r?"object"==typeof r?om(r):r:null}var o="object"==typeof t||"function"==typeof t,n=o?t:{name:t,args:e},s=o?e:i;return this.set("connector",n,s)},label:function(t,e,i){var r=this.labels();return(t=isFinite(t)&&null!==t?0|t:0)<0&&(t=r.length+t),arguments.length<=1?this.prop(["labels",t]):this.prop(["labels",t],e,i)},labels:function(t,e){return 0===arguments.length?(t=this.get("labels"),Array.isArray(t)?t.slice():[]):(Array.isArray(t)||(t=[]),this.set("labels",t,e))},hasLabels:function(){const{labels:t}=this.attributes;return Array.isArray(t)&&t.length>0},insertLabel:function(t,e,i){if(!e)throw new Error("dia.Link: no label provided");var r=this.labels(),o=r.length;return(t=isFinite(t)&&null!==t?0|t:o)<0&&(t=o+t+1),r.splice(t,0,e),this.labels(r,i)},appendLabel:function(t,e){return this.insertLabel(-1,t,e)},removeLabel:function(t,e){var i=this.labels();return t=isFinite(t)&&null!==t?0|t:-1,i.splice(t,1),this.labels(i,e)},vertex:function(t,e,i){var r=this.vertices();if((t=isFinite(t)&&null!==t?0|t:0)<0&&(t=r.length+t),arguments.length<=1)return this.prop(["vertices",t]);var o=this._normalizeVertex(e);return this.prop(["vertices",t],o,i)},vertices:function(t,e){if(0===arguments.length)return t=this.get("vertices"),Array.isArray(t)?t.slice():[];Array.isArray(t)||(t=[]);for(var i=[],r=0;r<t.length;r++){var o=t[r],n=this._normalizeVertex(o);i.push(n)}return this.set("vertices",i,e)},insertVertex:function(t,e,i){if(!e)throw new Error("dia.Link: no vertex provided");var r=this.vertices(),o=r.length;(t=isFinite(t)&&null!==t?0|t:o)<0&&(t=o+t+1);var n=this._normalizeVertex(e);return r.splice(t,0,n),this.vertices(r,i)},removeVertex:function(t,e){var i=this.vertices();return t=isFinite(t)&&null!==t?0|t:-1,i.splice(t,1),this.vertices(i,e)},_normalizeVertex:function(t){return!cm(t)?{x:t.x,y:t.y}:t},translate:function(t,e,i){return(i=i||{}).translateBy=i.translateBy||this.id,i.tx=t,i.ty=e,this.applyToPoints((function(i){return{x:(i.x||0)+t,y:(i.y||0)+e}}),i)},scale:function(t,e,i,r){return this.applyToPoints((function(r){return zd(r).scale(t,e,i).toJSON()}),r)},applyToPoints:function(t,e){if(!lm(t))throw new TypeError("dia.Link: applyToPoints expects its first parameter to be a function.");var i={},{source:r,target:o}=this.attributes;r.id||(i.source=t(r)),o.id||(i.target=t(o));var n=this.vertices();return n.length>0&&(i.vertices=n.map(t)),this.set(i,e)},getSourcePoint:function(){var t=this.getSourceCell();return t?t.getPointFromConnectedLink(this,"source"):new zd(this.source())},getTargetPoint:function(){var t=this.getTargetCell();return t?t.getPointFromConnectedLink(this,"target"):new zd(this.target())},getPointFromConnectedLink:function(){return this.getPolyline().pointAt(.5)},getPolyline:function(){const t=[this.getSourcePoint(),...this.vertices().map(zd),this.getTargetPoint()];return new ah(t)},getBBox:function(){return this.getPolyline().bbox()},reparent:function(t){var e;if(this.graph){var i=this.getSourceElement(),r=this.getTargetElement(),o=this.getParentCell();i&&r&&(e=i===r||i.isEmbeddedIn(r)?r:r.isEmbeddedIn(i)?i:this.graph.getCommonAncestor(i,r)),!o||e&&e.id===o.id||o.unembed(this,t),e&&e.embed(this,t)}return e},hasLoop:function(t){t=t||{};var{source:e,target:i}=this.attributes,r=e.id,o=i.id;if(!r||!o)return!1;var n=r===o;if(!n&&t.deep&&this.graph){var s=this.getSourceCell(),a=this.getTargetCell();n=s.isEmbeddedIn(a)||a.isEmbeddedIn(s)}return n},getSourceCell:function(){const{graph:t,attributes:e}=this;var i=e.source;return i&&i.id&&t&&t.getCell(i.id)||null},getSourceElement:function(){var t=this,e={};do{if(e[t.id])return null;e[t.id]=!0,t=t.getSourceCell()}while(t&&t.isLink());return t},getTargetCell:function(){const{graph:t,attributes:e}=this;var i=e.target;return i&&i.id&&t&&t.getCell(i.id)||null},getTargetElement:function(){var t=this,e={};do{if(e[t.id])return null;e[t.id]=!0,t=t.getTargetCell()}while(t&&t.isLink());return t},getRelationshipAncestor:function(){var t;if(this.graph){var e=[this,this.getSourceElement(),this.getTargetElement()].filter((function(t){return!!t}));t=this.graph.getCommonAncestor.apply(this.graph,e)}return t||null},isRelationshipEmbeddedIn:function(t){var e=Xf(t)||Yf(t)?t:t.id,i=this.getRelationshipAncestor();return!!i&&(i.id===e||i.isEmbeddedIn(e))},_getDefaultLabel:function(){var t=this.get("defaultLabel")||this.defaultLabel||{},e={};return e.markup=t.markup||this.get("labelMarkup")||this.labelMarkup,e.position=t.position,e.attrs=t.attrs,e.size=t.size,e}},{endsEqual:function(t,e){var i=t.port===e.port||!t.port&&!e.port;return t.id===e.id&&i}}),nb={_results:{},_tests:{svgforeignobject:function(){return!!document.createElementNS&&/SVGForeignObject/.test({}.toString.call(document.createElementNS("http://www.w3.org/2000/svg","foreignObject")))},isSafari:function(){return/Safari/.test(navigator.userAgent)&&/Apple Computer/.test(navigator.vendor)}},addTest:function(t,e){return this._tests[t]=e},test:function(t){var e=this._tests[t];if(!e)throw new Error('Test not defined ("'+t+'"). Use `joint.env.addTest(name, fn) to add a new test.`');var i=this._results[t];if(void 0!==i)return i;try{i=e()}catch(t){i=!1}return this._results[t]=i,i}},sb=rb.define("standard.Rectangle",{attrs:{root:{cursor:"move"},body:{width:"calc(w)",height:"calc(h)",strokeWidth:2,stroke:"#000000",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",x:"calc(w/2)",y:"calc(h/2)",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"body"},{tagName:"text",selector:"label"}]});rb.define("standard.Circle",{attrs:{root:{cursor:"move"},body:{cx:"calc(s/2)",cy:"calc(s/2)",r:"calc(s/2)",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",x:"calc(w/2)",y:"calc(h/2)",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"circle",selector:"body"},{tagName:"text",selector:"label"}]}),rb.define("standard.Ellipse",{attrs:{root:{cursor:"move"},body:{cx:"calc(w/2)",cy:"calc(h/2)",rx:"calc(w/2)",ry:"calc(h/2)",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",x:"calc(w/2)",y:"calc(h/2)",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"ellipse",selector:"body"},{tagName:"text",selector:"label"}]}),rb.define("standard.Path",{attrs:{root:{cursor:"move"},body:{d:"M 0 0 H calc(w) V calc(h) H 0 Z",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",x:"calc(w/2)",y:"calc(h/2)",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"path",selector:"body"},{tagName:"text",selector:"label"}]}),rb.define("standard.Polygon",{attrs:{root:{cursor:"move"},body:{points:"0 0 calc(w) 0 calc(w) calc(h) 0 calc(h)",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",x:"calc(w/2)",y:"calc(h/2)",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"polygon",selector:"body"},{tagName:"text",selector:"label"}]}),rb.define("standard.Polyline",{attrs:{root:{cursor:"move"},body:{points:"0 0 calc(w) 0 calc(w) calc(h) 0 calc(h)",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",x:"calc(w/2)",y:"calc(h/2)",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"polyline",selector:"body"},{tagName:"text",selector:"label"}]}),rb.define("standard.Image",{attrs:{root:{cursor:"move"},image:{width:"calc(w)",height:"calc(h)"},label:{textVerticalAnchor:"top",textAnchor:"middle",x:"calc(w/2)",y:"calc(h+10)",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"image",selector:"image"},{tagName:"text",selector:"label"}]}),rb.define("standard.BorderedImage",{attrs:{root:{cursor:"move"},border:{width:"calc(w)",height:"calc(h)",stroke:"#333333",strokeWidth:2},background:{width:"calc(w-1)",height:"calc(h-1)",x:.5,y:.5,fill:"#FFFFFF"},image:{width:"calc(w-1)",height:"calc(h-1)",x:.5,y:.5},label:{textVerticalAnchor:"top",textAnchor:"middle",x:"calc(w/2)",y:"calc(h+10)",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"background",attributes:{stroke:"none"}},{tagName:"image",selector:"image"},{tagName:"rect",selector:"border",attributes:{fill:"none"}},{tagName:"text",selector:"label"}]}),rb.define("standard.EmbeddedImage",{attrs:{root:{cursor:"move"},body:{width:"calc(w)",height:"calc(h)",stroke:"#333333",fill:"#FFFFFF",strokeWidth:2},image:{width:"calc(0.3*w)",height:"calc(h-20)",x:10,y:10,preserveAspectRatio:"xMidYMin"},label:{textVerticalAnchor:"top",textAnchor:"left",x:"calc(0.3*w+20)",y:10,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"body"},{tagName:"image",selector:"image"},{tagName:"text",selector:"label"}]}),rb.define("standard.InscribedImage",{attrs:{root:{cursor:"move"},border:{rx:"calc(w/2)",ry:"calc(h/2)",cx:"calc(w/2)",cy:"calc(h/2)",stroke:"#333333",strokeWidth:2},background:{rx:"calc(w/2)",ry:"calc(h/2)",cx:"calc(w/2)",cy:"calc(h/2)",fill:"#FFFFFF"},image:{width:"calc(0.68*w)",height:"calc(0.68*h)",x:"calc(0.16*w)",y:"calc(0.16*h)",preserveAspectRatio:"xMidYMid"},label:{textVerticalAnchor:"top",textAnchor:"middle",x:"calc(w/2)",y:"calc(h+10)",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"ellipse",selector:"background"},{tagName:"image",selector:"image"},{tagName:"ellipse",selector:"border",attributes:{fill:"none"}},{tagName:"text",selector:"label"}]}),rb.define("standard.HeaderedRectangle",{attrs:{root:{cursor:"move"},body:{width:"calc(w)",height:"calc(h)",strokeWidth:2,stroke:"#000000",fill:"#FFFFFF"},header:{width:"calc(w)",height:30,strokeWidth:2,stroke:"#000000",fill:"#FFFFFF"},headerText:{textVerticalAnchor:"middle",textAnchor:"middle",x:"calc(w/2)",y:15,fontSize:16,fill:"#333333"},bodyText:{textVerticalAnchor:"middle",textAnchor:"middle",x:"calc(w/2)",y:"calc(h/2+15)",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"body"},{tagName:"rect",selector:"header"},{tagName:"text",selector:"headerText"},{tagName:"text",selector:"bodyText"}]});rb.define("standard.Cylinder",{attrs:{root:{cursor:"move"},body:{lateralArea:10,fill:"#FFFFFF",stroke:"#333333",strokeWidth:2},top:{cx:"calc(w/2)",cy:10,rx:"calc(w/2)",ry:10,fill:"#FFFFFF",stroke:"#333333",strokeWidth:2},label:{textVerticalAnchor:"middle",textAnchor:"middle",x:"calc(w/2)",y:"calc(h+15)",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"path",selector:"body"},{tagName:"ellipse",selector:"top"},{tagName:"text",selector:"label"}],topRy:function(t,e){if(void 0===t)return this.attr("body/lateralArea");var i={lateralArea:t},r=_g(t)?`calc(${parseFloat(t)/100}*h)`:t,o={cy:r,ry:r};return this.attr({body:i,top:o},e)}},{attributes:{"lateral-area":{set:function(t,e){var i=_g(t);i&&(t=parseFloat(t)/100);var r=e.x,o=e.y,n=e.width,s=e.height,a=n/2,l=i?s*t:t,c=lu.KAPPA,d=c*a,h=c*(i?s*t:t),u=r+n/2,p=r+n,f=o+l,m=f-l,g=o+s-l,v=o+s;return{d:["M",r,f,"L",r,g,"C",r,g+h,u-d,v,u,v,"C",u+d,v,p,g+h,p,g,"L",p,f,"C",p,f-h,u+d,m,u,m,"C",u-d,m,r,f-h,r,f,"Z"].join(" ")}}}}});var ab=nb.test("svgforeignobject")?{tagName:"foreignObject",selector:"foreignObject",attributes:{overflow:"hidden"},children:[{tagName:"div",namespaceURI:"http://www.w3.org/1999/xhtml",selector:"label",style:{width:"100%",height:"100%",position:"static",backgroundColor:"transparent",textAlign:"center",margin:0,padding:"0px 5px",boxSizing:"border-box",display:"flex",alignItems:"center",justifyContent:"center"}}]}:{tagName:"text",selector:"label",attributes:{"text-anchor":"middle"}};rb.define("standard.TextBlock",{attrs:{root:{cursor:"move"},body:{width:"calc(w)",height:"calc(h)",stroke:"#333333",fill:"#ffffff",strokeWidth:2},foreignObject:{width:"calc(w)",height:"calc(h)"},label:{style:{fontSize:14}}}},{markup:[{tagName:"rect",selector:"body"},ab]},{attributes:{text:{set:function(t,e,i,r){if(!(i instanceof HTMLElement)){var o=r.style||{},n={text:t,width:-5,height:"100%"},s=Jf({"text-vertical-anchor":"middle"},o);return Nv["text-wrap"].set.call(this,n,e,i,s),{fill:o.color||null}}i.textContent=t},position:function(t,e,i){if(i instanceof SVGElement)return e.center()}}}});const lb=ob.define("standard.Link",{attrs:{line:{connection:!0,stroke:"#333333",strokeWidth:2,strokeLinejoin:"round",targetMarker:{type:"path",d:"M 10 -5 0 0 10 5 z"}},wrapper:{connection:!0,strokeWidth:10,strokeLinejoin:"round"}}},{markup:[{tagName:"path",selector:"wrapper",attributes:{fill:"none",cursor:"pointer",stroke:"transparent","stroke-linecap":"round"}},{tagName:"path",selector:"line",attributes:{fill:"none","pointer-events":"none"}}]});ob.define("standard.DoubleLink",{attrs:{line:{connection:!0,stroke:"#DDDDDD",strokeWidth:4,strokeLinejoin:"round",targetMarker:{type:"path",stroke:"#000000",d:"M 10 -3 10 -10 -2 0 10 10 10 3"}},outline:{connection:!0,stroke:"#000000",strokeWidth:6,strokeLinejoin:"round"}}},{markup:[{tagName:"path",selector:"outline",attributes:{fill:"none",cursor:"pointer"}},{tagName:"path",selector:"line",attributes:{fill:"none","pointer-events":"none"}}]}),ob.define("standard.ShadowLink",{attrs:{line:{connection:!0,stroke:"#FF0000",strokeWidth:20,strokeLinejoin:"round",targetMarker:{type:"path",stroke:"none",d:"M 0 -10 -10 0 0 10 z"},sourceMarker:{type:"path",stroke:"none",d:"M -10 -10 0 0 -10 10 0 10 0 -10 z"}},shadow:{connection:!0,transform:"translate(3,6)",stroke:"#000000",strokeOpacity:.2,strokeWidth:20,strokeLinejoin:"round",targetMarker:{type:"path",d:"M 0 -10 -10 0 0 10 z",stroke:"none"},sourceMarker:{type:"path",stroke:"none",d:"M -10 -10 0 0 -10 10 0 10 0 -10 z"}}}},{markup:[{tagName:"path",selector:"shadow",attributes:{fill:"none","pointer-events":"none"}},{tagName:"path",selector:"line",attributes:{fill:"none",cursor:"pointer"}}]});const cb={POINT:"point",CUBIC:"cubic",LINE:"line",GAP:"gap"},db=Object.values(cb),hb=10,ub=1,pb=function(t,e,i=[],r={}){const{cornerType:o=cb.POINT,cornerRadius:n=hb,cornerPreserveAspectRatio:s=!1,precision:a=ub,raw:l=!1}=r;if(-1===db.indexOf(o))throw new Error("Invalid `cornerType` provided to `straight` connector.");let c;if(o!==cb.POINT&&n){let r;c=new mh,c.appendSegment(mh.createSegment("M",t));const l=i.length;for(let d=0;d<l;d++){const l=new zd(i[d]),h=i[d-1]||t,u=i[d+1]||e,p=r||l.distance(h)/2;let f,m;r=l.distance(u)/2,s?f=m=-Math.min(n,p,r):(f=-Math.min(n,p),m=-Math.min(n,r));const g=l.clone().move(h,f).round(a),v=l.clone().move(u,m).round(a);switch(c.appendSegment(mh.createSegment("L",g)),o){case cb.CUBIC:{const t=1/3,e=2/3,i=new zd(t*g.x+e*l.x,e*l.y+t*g.y),r=new zd(t*v.x+e*l.x,e*l.y+t*v.y);c.appendSegment(mh.createSegment("C",i,r,v));break}case cb.LINE:c.appendSegment(mh.createSegment("L",v));break;case cb.GAP:c.appendSegment(mh.createSegment("M",v))}}c.appendSegment(mh.createSegment("L",e))}else{const r=[t].concat(i).concat([e]),o=new ah(r);c=new mh(o)}return l?c:c.serialize()};var fb=["arc","gap","cubic"],mb=["smooth"],gb=1/3,vb=2/3;function bb(t,e){let{x:i,y:r}=t,{x:o,y:n}=e;if(i>o){let t=i;i=o,o=t,t=r,r=n,n=t}if(r>n){let t=i;i=o,o=t,t=r,r=n,n=t}return[new zd(i,r),new zd(o,n)]}function yb(t,e,i){var r=[].concat(t,i,e);return r.reduce((function(t,e,i){var o=r[i+1];return null!=o&&(t[i]=jd(e,o)),t}),[])}function xb(t,e){return jd(t,e).squaredLength()}function wb(t,e,i,r){var o,n=new mh;return o=mh.createSegment("M",t[0].start),n.appendSegment(o),dm(t).forEach((function(s,a){if(s.isJump){var l,c,d,h;if("arc"===i){l=-90,c=s.start.difference(s.end);var u=Number(c.x<0||0===c.x&&c.y<0);u&&(l+=180);var p,f=s.midpoint(),m=new Vd(f,s.end).rotate(f,l);d=(p=new Vd(s.start,f)).pointAt(2/3).rotate(s.start,l),h=m.pointAt(1/3).rotate(m.end,-l),o=mh.createSegment("C",d,h,m.end),n.appendSegment(o),p=new Vd(f,s.end),d=m.pointAt(1/3).rotate(m.end,l),h=p.pointAt(1/3).rotate(s.end,-l),o=mh.createSegment("C",d,h,s.end),n.appendSegment(o)}else if("gap"===i)o=mh.createSegment("M",s.end),n.appendSegment(o);else if("cubic"===i){l=s.start.theta(s.end);var g=.6*e,v=1.35*e;c=s.start.difference(s.end),(u=Number(c.x<0||0===c.x&&c.y<0))&&(v*=-1),d=zd(s.start.x+g,s.start.y+v).rotate(s.start,l),h=zd(s.end.x-g,s.end.y+v).rotate(s.end,l),o=mh.createSegment("C",d,h,s.end),n.appendSegment(o)}}else{var b=t[a+1];0==r||!b||b.isJump?(o=mh.createSegment("L",s.end),n.appendSegment(o)):function(t,e,i,r,o){var n,s=i.distance(r)/2,a=i.distance(o)/2,l=-Math.min(t,s),c=-Math.min(t,a),d=i.clone().move(r,l).round(),h=i.clone().move(o,c).round(),u=new zd(gb*d.x+vb*i.x,vb*i.y+gb*d.y),p=new zd(gb*h.x+vb*i.x,vb*i.y+gb*h.y);n=mh.createSegment("L",d),e.appendSegment(n),n=mh.createSegment("C",u,p,h),e.appendSegment(n)}(r,n,s.end,s.start,b.end)}})),n}const _b=10,kb={AUTO:"auto",HORIZONTAL:"horizontal",VERTICAL:"vertical",CLOSEST_POINT:"closest-point",OUTWARDS:"outwards"},Cb={UP:"up",DOWN:"down",LEFT:"left",RIGHT:"right",AUTO:"auto",CLOSEST_POINT:"closest-point",OUTWARDS:"outwards"},Ab=function(t,e,i=[],r={},o){const n=Boolean(r.raw),{direction:s=kb.AUTO,precision:a=3}=r,l={coeff:r.distanceCoefficient||.6,angleTangentCoefficient:r.angleTangentCoefficient||80,tau:r.tension||.5,sourceTangent:r.sourceTangent?new zd(r.sourceTangent):null,targetTangent:r.targetTangent?new zd(r.targetTangent):null,rotate:Boolean(r.rotate)};"string"==typeof r.sourceDirection?l.sourceDirection=r.sourceDirection:"number"==typeof r.sourceDirection?l.sourceDirection=new zd(1,0).rotate(null,r.sourceDirection):l.sourceDirection=r.sourceDirection?new zd(r.sourceDirection).normalize():null,"string"==typeof r.targetDirection?l.targetDirection=r.targetDirection:"number"==typeof r.targetDirection?l.targetDirection=new zd(1,0).rotate(null,r.targetDirection):l.targetDirection=r.targetDirection?new zd(r.targetDirection).normalize():null;const c=[t,...i,e].map((t=>new zd(t)));let d,h;if(l.sourceTangent)d=l.sourceTangent;else{const t=function(t,e,i,r){if(r.sourceDirection)switch(r.sourceDirection){case Cb.UP:return new zd(0,-1);case Cb.DOWN:return new zd(0,1);case Cb.LEFT:return new zd(-1,0);case Cb.RIGHT:return new zd(1,0);case Cb.AUTO:return Sb(t,e,r);case Cb.CLOSEST_POINT:return Pb(t,e);case Cb.OUTWARDS:return Ib(t,e);default:return r.sourceDirection}switch(i){case kb.HORIZONTAL:return function(t,e,i){const{sourceBBox:r}=t;let o,n,s;if(t.sourceView)if(n=t.sourceView.model.angle(),i.rotate&&n){const i=t.sourceView.getNodeUnrotatedBBox(t.sourceView.el),s=e[0].clone();s.rotate(r.center(),n),o=i.sideNearestToPoint(s)}else o=r.sideNearestToPoint(e[0]);else o=r.x>e[1].x?"right":"left";if("left"===o)s=new zd(-1,0);else s=new zd(1,0);i.rotate&&n&&s.rotate(null,-n);return s}(t,e,r);case kb.VERTICAL:return function(t,e,i){const{sourceBBox:r}=t;let o,n,s;if(t.sourceView)if(n=t.sourceView.model.angle(),i.rotate&&n){const i=t.sourceView.getNodeUnrotatedBBox(t.sourceView.el),s=e[0].clone();s.rotate(r.center(),n),o=i.sideNearestToPoint(s)}else o=r.sideNearestToPoint(e[0]);else o=r.y>e[1].y?"bottom":"top";if("top"===o)s=new zd(0,-1);else s=new zd(0,1);i.rotate&&n&&s.rotate(null,-n);return s}(t,e,r);case kb.CLOSEST_POINT:return Pb(t,e);case kb.OUTWARDS:return Ib(t,e);case kb.AUTO:default:return Sb(t,e,r)}}(o,c,s,l),e=c[0].distance(c[1])*l.coeff,i=Rb(t,c[1].difference(c[0]).normalize());if(i>Math.PI/4){const r=e+(i-Math.PI/4)*l.angleTangentCoefficient;d=t.clone().scale(r,r)}else d=t.clone().scale(e,e)}if(l.targetTangent)h=l.targetTangent;else{const t=function(t,e,i,r){if(r.targetDirection)switch(r.targetDirection){case Cb.UP:return new zd(0,-1);case Cb.DOWN:return new zd(0,1);case Cb.LEFT:return new zd(-1,0);case Cb.RIGHT:return new zd(1,0);case Cb.AUTO:return Tb(t,e,r);case Cb.CLOSEST_POINT:return Eb(t,e);case Cb.OUTWARDS:return Lb(t,e);default:return r.targetDirection}switch(i){case kb.HORIZONTAL:return function(t,e,i){const{targetBBox:r}=t;let o,n,s;if(t.targetView)if(n=t.targetView.model.angle(),i.rotate&&n){const i=t.targetView.getNodeUnrotatedBBox(t.targetView.el),s=e[e.length-1].clone();s.rotate(r.center(),n),o=i.sideNearestToPoint(s)}else o=r.sideNearestToPoint(e[e.length-1]);else o=r.x>e[e.length-2].x?"left":"right";if("left"===o)s=new zd(-1,0);else s=new zd(1,0);i.rotate&&n&&s.rotate(null,-n);return s}(t,e,r);case kb.VERTICAL:return function(t,e,i){const{targetBBox:r}=t;let o,n,s;if(t.targetView)if(n=t.targetView.model.angle(),i.rotate&&n){const i=t.targetView.getNodeUnrotatedBBox(t.targetView.el),s=e[e.length-1].clone();s.rotate(r.center(),n),o=i.sideNearestToPoint(s)}else o=r.sideNearestToPoint(e[e.length-1]);else o=r.y>e[e.length-2].y?"top":"bottom";if("top"===o)s=new zd(0,-1);else s=new zd(0,1);i.rotate&&n&&s.rotate(null,-n);return s}(t,e,r);case kb.CLOSEST_POINT:return Eb(t,e);case kb.OUTWARDS:return Lb(t,e);case kb.AUTO:default:return Tb(t,e,r)}}(o,c,s,l),e=c.length-1,i=c[e-1].distance(c[e])*l.coeff,r=Rb(t,c[e-1].difference(c[e]).normalize());if(r>Math.PI/4){const e=i+(r-Math.PI/4)*l.angleTangentCoefficient;h=t.clone().scale(e,e)}else h=t.clone().scale(i,i)}const u=function(t,e,i,r){const{tau:o,coeff:n}=r,s=[],a=[],l=[],c=t.length-1;for(let e=0;e<c;e++)s[e]=t[e].distance(t[e+1]);a[0]=e,a[c]=i;for(let e=1;e<c;e++){let i,r;i=1===e?t[e-1].clone().offset(a[e-1].x,a[e-1].y):t[e-1].clone(),r=e===c-1?t[e+1].clone().offset(a[e+1].x,a[e+1].y):t[e+1].clone();const o=i.difference(t[e]).normalize(),l=r.difference(t[e]).normalize(),d=Rb(o,l);let h,u=(Math.PI-d)/2;const p=$b(o,l);let f;f=$b(t[e].difference(t[e+1]),t[e].difference(t[e-1])),p<0&&(u=-u),d<Math.PI/2&&(u<0&&f<0||u>0&&f>0)&&(u-=Math.PI),h=l.clone(),Ob(h,u);const m=h.clone(),g=h.clone(),v=s[e-1]*n,b=s[e]*n;m.scale(v,v),g.scale(b,b),a[e]=[m,g]}for(let e=0;e<c;e++){let i,r;i=0===e?t[e+1].difference(a[e].x/o,a[e].y/o):t[e+1].difference(a[e][1].x/o,a[e][1].y/o),r=e===c-1?t[e].clone().offset(a[e+1].x/o,a[e+1].y/o):t[e].difference(a[e+1][0].x/o,a[e+1][0].y/o),l[e]=[i,t[e],t[e+1],r]}return l}(c,d,h,l),p=u.map((t=>function(t,e){const{tau:i}=e,r=new zd;r.x=t[1].x+(t[2].x-t[0].x)/(6*i),r.y=t[1].y+(t[2].y-t[0].y)/(6*i);const o=new zd;return o.x=t[2].x+(t[3].x-t[1].x)/(6*i),o.y=t[2].y+(t[3].y-t[1].y)/(6*i),new ph(t[1],r,o,t[2])}(t,l))),f=new mh(p).round(a);return n?f:f.serialize()};function Sb(t,e,i){const{sourceBBox:r}=t;let o,n,s;if(t.sourceView)if(n=t.sourceView.model.angle(),i.rotate&&n){const i=t.sourceView.getNodeUnrotatedBBox(t.sourceView.el),s=e[0].clone();s.rotate(r.center(),n),o=i.sideNearestToPoint(s)}else o=r.sideNearestToPoint(e[0]);else o=r.sideNearestToPoint(e[1]);switch(o){case"top":s=new zd(0,-1);break;case"bottom":s=new zd(0,1);break;case"right":s=new zd(1,0);break;case"left":s=new zd(-1,0)}return i.rotate&&n&&s.rotate(null,-n),s}function Tb(t,e,i){const{targetBBox:r}=t;let o,n,s;if(t.targetView)if(n=t.targetView.model.angle(),i.rotate&&n){const i=t.targetView.getNodeUnrotatedBBox(t.targetView.el),s=e[e.length-1].clone();s.rotate(r.center(),n),o=i.sideNearestToPoint(s)}else o=r.sideNearestToPoint(e[e.length-1]);else o=r.sideNearestToPoint(e[e.length-2]);switch(o){case"top":s=new zd(0,-1);break;case"bottom":s=new zd(0,1);break;case"right":s=new zd(1,0);break;case"left":s=new zd(-1,0)}return i.rotate&&n&&s.rotate(null,-n),s}function Pb(t,e,i){return e[1].difference(e[0]).normalize()}function Eb(t,e,i){const r=e.length-1;return e[r-1].difference(e[r]).normalize()}function Ib(t,e,i){const{sourceBBox:r}=t,o=r.center();return e[0].difference(o).normalize()}function Lb(t,e,i){const{targetBBox:r}=t,o=r.center();return e[e.length-1].difference(o).normalize()}function Ob(t,e){const i=Math.cos(e),r=Math.sin(e),o=i*t.x-r*t.y,n=r*t.x+i*t.y;t.x=o,t.y=n}function Rb(t,e){let i=t.dot(e)/(t.magnitude()*e.magnitude());return i<-1&&(i=-1),i>1&&(i=1),Math.acos(i)}function $b(t,e){return t.x*e.y-t.y*e.x}Ab.Directions=kb,Ab.TangentDirections=Cb;var Mb=Object.freeze({__proto__:null,straight:pb,jumpover:function(t,e,i,r){!function(t){var e=t.paper,i=e._jumpOverUpdateList;if(null==i){i=e._jumpOverUpdateList=[];var r=e.model;r.on("batch:stop",(function(){this.hasActiveBatch()||function(t){for(var e=t._jumpOverUpdateList,i=0;i<e.length;i++){const t=e[i],r=t.getFlag(t.constructor.Flags.CONNECTOR);t.requestUpdate(r)}}(e)})),r.on("reset",(function(){i=e._jumpOverUpdateList=[]}))}i.indexOf(t)<0&&(i.push(t),t.listenToOnce(t.model,"change:connector remove",(function(){i.splice(i.indexOf(t),1)})))}(this);var o=r.raw,n=r.size||5,s=r.jump&&(""+r.jump).toLowerCase(),a=r.radius||0,l=r.ignoreConnectors||mb;-1===fb.indexOf(s)&&(s=fb[0]);var c=this.paper,d=c.model.getLinks();if(1===d.length)return wb(yb(t,e,i),n,s,a);var h=this.model,u=d.indexOf(h),p=c.options.defaultConnector||{},f=d.filter((function(t,e){var i=t.get("connector")||p;return!dm(l).includes(i.name)&&(!(e>u)||"jumpover"!==i.name)})),m=f.map((function(t){return c.findViewByModel(t)})),g=yb(t,e,i),v=m.map((function(t){return null==t?[]:t===this?g:yb(t.sourcePoint,t.targetPoint,t.route)}),this),b=g.reduce((function(t,e){var i=f.reduce((function(t,i,r){if(i!==h){const i=v[r].slice(),o=i.findIndex((t=>function(t,e){const[{x:i,y:r},{x:o,y:n}]=bb(t.start,t.end),[{x:s,y:a},{x:l,y:c}]=bb(e.start,e.end);return i<=l&&s<=o&&r<=c&&a<=n}(e,t)));o>-1&&e.containsPoint(i[o].end)&&i.splice(o+1,1);const n=function(t,e){return dm(e).reduce((function(e,i){var r=t.intersection(i);return r&&e.push(r),e}),[])}(e,i);t.push.apply(t,n)}return t}),[]).sort((function(t,i){return xb(e.start,t)-xb(e.start,i)}));return i.length>0?t.push.apply(t,function(t,e,i){return e.reduce((function(r,o,n){if(!0===o.skip)return r;var s=r.pop()||t,a=Fd(o).move(s.start,-i),l=Fd(o).move(s.start,+i),c=e[n+1];if(null!=c){var d=l.distance(c);d<=i&&(l=c.move(s.start,d),c.skip=!0)}else if(a.distance(s.end)<2*i+1)return r.push(s),r;if(l.distance(s.start)<2*i+1)return r.push(s),r;var h=jd(a,l);return h.isJump=!0,r.push(jd(s.start,a),h,jd(l,s.end)),r}),[])}(e,i,n)):t.push(e),t}),[]),y=wb(b,n,s,a);return o?y:y.serialize()},normal:function(t,e,i=[],r={}){const{raw:o}=r;return pb(t,e,i,{cornerType:"point",raw:o})},rounded:function(t,e,i=[],r={}){const{radius:o=_b,raw:n}=r;return pb(t,e,i,{cornerType:"cubic",cornerRadius:o,precision:0,raw:n})},smooth:function(t,e,i,r){var o,n=r&&r.raw;if(i&&0!==i.length){var s=[t].concat(i).concat([e]),a=ph.throughPoints(s);o=new mh(a)}else{var l;if(o=new mh,l=mh.createSegment("M",t),o.appendSegment(l),Math.abs(t.x-e.x)>=Math.abs(t.y-e.y)){var c=(t.x+e.x)/2;l=mh.createSegment("C",c,t.y,c,e.y,e.x,e.y),o.appendSegment(l)}else{var d=(t.y+e.y)/2;l=mh.createSegment("C",t.x,d,e.x,d,e.x,e.y),o.appendSegment(l)}}return n?o:o.serialize()},curve:Ab}),Nb=function(t){this.cid=Cm("view"),this.preinitialize.apply(this,arguments),Jf(this,xm(t,zb)),this._ensureElement(),this.initialize.apply(this,arguments)},Db=/^(\S+)\s*(.*)$/,zb=["model","collection","el","id","attributes","className","tagName","events"];Jf(Nb.prototype,Rg,{tagName:"div",$:function(t){return this.$el.find(t)},preinitialize:function(){},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(t){return this.undelegateEvents(),this._setElement(t),this.delegateEvents(),this},_setElement:function(t){this.$el=t instanceof lg?t:lg(t),this.el=this.$el[0]},delegateEvents:function(t){if(t||(t=bm(this,"events")),!t)return this;for(var e in this.undelegateEvents(),t){var i=t[e];if(lm(i)||(i=this[i]),i){var r=e.match(Db);this.delegate(r[1],r[2],i.bind(this))}}return this},delegate:function(t,e,i){return this.$el.on(t+".delegateEvents"+this.cid,e,i),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(t,e,i){return this.$el.off(t+".delegateEvents"+this.cid,e,i),this},_createElement:function(t){return document.createElement(t)},_ensureElement:function(){if(this.el)this.setElement(bm(this,"el"));else{var t=Jf({},bm(this,"attributes"));this.id&&(t.id=bm(this,"id")),this.className&&(t.class=bm(this,"className")),this.setElement(this._createElement(bm(this,"tagName"))),this._setAttributes(t)}},_setAttributes:function(t){this.$el.attr(t)}}),Nb.extend=Gg;const Fb={},Bb=Nb.extend({options:{},theme:null,themeClassNamePrefix:cg("theme-"),requireSetThemeOverride:!1,defaultTheme:rg,children:null,childNodes:null,DETACHABLE:!0,UPDATE_PRIORITY:2,FLAG_INSERT:1<<30,FLAG_REMOVE:1<<29,FLAG_INIT:1<<28,constructor:function(t){this.requireSetThemeOverride=t&&!!t.theme,this.options=Jf({},this.options,t),Nb.call(this,t)},initialize:function(){Fb[this.cid]=this,this.setTheme(this.options.theme||this.defaultTheme),this.init()},unmount:function(){this.svgElement?this.vel.remove():this.$el.remove()},isMounted:function(){return null!==this.el.parentNode},renderChildren:function(t){if(t||(t=bm(this,"children")),t){var e=this.svgElement,i=lu.namespace[e?"svg":"xhtml"],r=dg(t,i);(e?this.vel:this.$el).empty().append(r.fragment),this.childNodes=r.selectors}return this},findAttributeNode:function(t,e){let i=e;for(;i&&1===i.nodeType;){if(i.getAttribute(t))return i;if(i===this.el)return null;i=i.parentNode}return null},findAttribute:function(t,e){const i=this.findAttributeNode(t,e);return i&&i.getAttribute(t)},_ensureElement:function(){if(this.el)this.setElement(bm(this,"el"));else{var t=bm(this,"tagName"),e=Jf({},bm(this,"attributes")),i=Jf({},bm(this,"style"));this.id&&(e.id=bm(this,"id")),this.setElement(this._createElement(t)),this._setAttributes(e),this._setStyle(i)}this._ensureElClassName()},_setAttributes:function(t){this.svgElement?this.vel.attr(t):this.$el.attr(t)},_setStyle:function(t){this.$el.css(t)},_createElement:function(t){return this.svgElement?document.createElementNS(lu.namespace.svg,t):document.createElement(t)},_setElement:function(t){this.$el=t instanceof lg?t:lg(t),this.el=this.$el[0],this.svgElement&&(this.vel=lu(this.el))},_ensureElClassName:function(){var t=bm(this,"className");if(t){var e=cg(t);this.svgElement?this.vel.removeClass(t).addClass(e):this.$el.removeClass(t).addClass(e)}},init:function(){},onRender:function(){},confirmUpdate:function(){return 0},setTheme:function(t,e){return e=e||{},this.theme&&this.requireSetThemeOverride&&!e.override||(this.removeThemeClassName(),this.addThemeClassName(t),this.onSetTheme(this.theme,t),this.theme=t),this},addThemeClassName:function(t){if(!(t=t||this.theme))return this;var e=this.themeClassNamePrefix+t;return this.svgElement?this.vel.addClass(e):this.$el.addClass(e),this},removeThemeClassName:function(t){t=t||this.theme;var e=this.themeClassNamePrefix+t;return this.svgElement?this.vel.removeClass(e):this.$el.removeClass(e),this},onSetTheme:function(t,e){},remove:function(){return this.onRemove(),this.undelegateDocumentEvents(),Fb[this.cid]=null,Nb.prototype.remove.apply(this,arguments),this},onRemove:function(){},getEventNamespace:function(){return".joint-event-ns-"+this.cid},delegateElementEvents:function(t,e,i){if(!e)return this;i||(i={});var r=this.getEventNamespace();for(var o in e){var n=e[o];"function"!=typeof n&&(n=this[n]),n&&lg(t).on(o+r,i,n.bind(this))}return this},undelegateElementEvents:function(t){return lg(t).off(this.getEventNamespace()),this},delegateDocumentEvents:function(t,e){return t||(t=bm(this,"documentEvents")),this.delegateElementEvents(document,t,e)},undelegateDocumentEvents:function(){return this.undelegateElementEvents(document)},eventData:function(t,e){if(!t)throw new Error("eventData(): event object required.");var i=t.data,r="__"+this.cid+"__";return void 0===e?i&&i[r]||{}:(i||(i=t.data={}),i[r]||(i[r]={}),Jf(i[r],e),this)},stopPropagation:function(t){return this.eventData(t,{propagationStopped:!0}),this},isPropagationStopped:function(t){return!!this.eventData(t).propagationStopped}},{extend:function(){var t=Array.from(arguments),e=t[0]&&Jf({},t[0])||{},i=t[1]&&Jf({},t[1])||{},r=e.render||this.prototype&&this.prototype.render||null;return e.render=function(){return"function"==typeof r&&r.apply(this,arguments),this.render.__render__===r&&this.onRender(),this},e.render.__render__=r,Nb.extend.call(this,e,i)}});var Ub=function(t,e){e||(e={}),this.preinitialize.apply(this,arguments),e.model&&(this.model=e.model),void 0!==e.comparator&&(this.comparator=e.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,Jf({silent:!0},e))},Vb={add:!0,remove:!0,merge:!0},jb={add:!0,remove:!1},Gb=function(t,e,i){i=Math.min(Math.max(i,0),t.length);var r,o=Array(t.length-i),n=e.length;for(r=0;r<o.length;r++)o[r]=t[r+i];for(r=0;r<n;r++)t[r+i]=e[r];for(r=0;r<o.length;r++)t[r+n+i]=o[r]};Jf(Ub.prototype,Rg,{model:Yg,preinitialize:function(){},initialize:function(){},toJSON:function(t){return this.map((function(e){return e.toJSON(t)}))},add:function(t,e){return this.set(t,Jf({merge:!1},e,jb))},remove:function(t,e){e=Jf({},e);var i=!Array.isArray(t);t=i?[t]:t.slice();var r=this._removeModels(t,e);return!e.silent&&r.length&&(e.changes={added:[],merged:[],removed:r},this.trigger("update",this,e)),i?r[0]:r},set:function(t,e){if(null!=t){e=Jf({},Vb,e);var i=!Array.isArray(t);t=i?[t]:t.slice();var r=e.at;null!=r&&(r=+r),r>this.length&&(r=this.length),r<0&&(r+=this.length+1);var o,n,s=[],a=[],l=[],c=[],d={},h=e.add,u=e.merge,p=e.remove,f=!1,m=this.comparator&&null==r&&!1!==e.sort,g=Xf(this.comparator)?this.comparator:null;for(n=0;n<t.length;n++){o=t[n];var v=this.get(o);if(v){if(u&&o!==v){var b=this._isModel(o)?o.attributes:o;v.set(b,e),l.push(v),m&&!f&&(f=v.hasChanged(g))}d[v.cid]||(d[v.cid]=!0,s.push(v)),t[n]=v}else h&&(o=t[n]=this._prepareModel(o,e))&&(a.push(o),this._addReference(o,e),d[o.cid]=!0,s.push(o))}if(p){for(n=0;n<this.length;n++)d[(o=this.models[n]).cid]||c.push(o);c.length&&this._removeModels(c,e)}var y=!1,x=!m&&h&&p;if(s.length&&x?(y=this.length!==s.length||this.models.some((function(t,e){return t!==s[e]})),this.models.length=0,Gb(this.models,s,0),this.length=this.models.length):a.length&&(m&&(f=!0),Gb(this.models,a,null==r?this.length:r),this.length=this.models.length),f&&this.sort({silent:!0}),!e.silent){for(n=0;n<a.length;n++)null!=r&&(e.index=r+n),(o=a[n]).trigger("add",o,this,e);(f||y)&&this.trigger("sort",this,e),(a.length||c.length||l.length)&&(e.changes={added:a,removed:c,merged:l},this.trigger("update",this,e))}return i?t[0]:t}},reset:function(t,e){e=e?om(e):{};for(var i=0;i<this.models.length;i++)this._removeReference(this.models[i],e);return e.previousModels=this.models,this._reset(),t=this.add(t,Jf({silent:!0},e)),e.silent||this.trigger("reset",this,e),t},push:function(t,e){return this.add(t,Jf({at:this.length},e))},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t)},unshift:function(t,e){return this.add(t,Jf({at:0},e))},shift:function(t){var e=this.at(0);return this.remove(e,t)},slice:function(){return Array.prototype.slice.apply(this.models,arguments)},get:function(t){if(null!=t)return this._byId[t]||this._byId[this.modelId(this._isModel(t)?t.attributes:t,t.idAttribute)]||t.cid&&this._byId[t.cid]},has:function(t){return null!=this.get(t)},at:function(t){return t<0&&(t+=this.length),this.models[t]},sort:function(t){var e=this.comparator;if(!e)throw new Error("Cannot sort a set without a comparator");t||(t={});var i=e.length;return lm(e)&&(e=e.bind(this)),1===i||Xf(e)?this.models=this.sortBy(e):this.models.sort(e),t.silent||this.trigger("sort",this,t),this},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(t,e){return t[e||this.model.prototype.idAttribute||"id"]},values:function(){return new qb(this,Wb)},keys:function(){return new qb(this,Yb)},entries:function(){return new qb(this,Xb)},each:function(t,e){this.models.forEach(t,e)},filter:function(t,e){return this.models.filter(t,e)},find:function(t,e){return this.models.find(t,e)},findIndex:function(t,e){return this.models.findIndex(t,e)},first:function(){return this.models[0]},includes:function(t){return this.models.includes(t)},last:function(){return this.models[this.models.length-1]},isEmpty:function(){return!this.models.length},map:function(t,e){return this.models.map(t,e)},reduce:function(t,e=this.first()){return this.models.reduce(t,e)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(t,e){return this._isModel(t)?(t.collection||(t.collection=this),t):((e=e?om(e):{}).collection=this,(i=this.model.prototype?new this.model(t,e):this.model(t,e)).validationError?(this.trigger("invalid",this,i.validationError,e),!1):i);var i},_removeModels:function(t,e){for(var i=[],r=0;r<t.length;r++){var o=this.get(t[r]);if(o){var n=this.models.indexOf(o);this.models.splice(n,1),this.length--,delete this._byId[o.cid];var s=this.modelId(o.attributes,o.idAttribute);null!=s&&delete this._byId[s],e.silent||(e.index=n,o.trigger("remove",o,this,e)),i.push(o),this._removeReference(o,e)}}return t.length>0&&!e.silent&&delete e.index,i},_isModel:function(t){return t instanceof Yg},_addReference:function(t,e){this._byId[t.cid]=t;var i=this.modelId(t.attributes,t.idAttribute);null!=i&&(this._byId[i]=t),t.on("all",this._onModelEvent,this)},_removeReference:function(t,e){delete this._byId[t.cid];var i=this.modelId(t.attributes,t.idAttribute);null!=i&&delete this._byId[i],this===t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,i,r){if(e){if(("add"===t||"remove"===t)&&i!==this)return;if("changeId"===t){var o=this.modelId(e.previousAttributes(),e.idAttribute),n=this.modelId(e.attributes,e.idAttribute);null!=o&&delete this._byId[o],null!=n&&(this._byId[n]=e)}}this.trigger.apply(this,arguments)}});var Hb="function"==typeof Symbol&&Symbol.iterator;Hb&&(Ub.prototype[Hb]=Ub.prototype.values);var qb=function(t,e){this._collection=t,this._kind=e,this._index=0},Wb=1,Yb=2,Xb=3;Hb&&(qb.prototype[Hb]=function(){return this}),qb.prototype.next=function(){if(this._collection){if(this._index<this._collection.length){var t,e=this._collection.at(this._index);if(this._index++,this._kind===Wb)t=e;else{var i=this._collection.modelId(e.attributes,e.idAttribute);t=this._kind===Yb?i:[i,e]}return{value:t,done:!1}}this._collection=void 0}return{value:void 0,done:!0}};function Jb(t){return t?Array.isArray(t)?t:[t]:[]}!function(t){var e=t[0],i=t[1],r=t[2];Hg(e,{sortBy:um,toArray:dm},i,r)}([Ub,{toArray:1,sortBy:3},"models"]),Ub.extend=Gg;const Qb=Bb.extend({tagName:"g",svgElement:!0,className:"highlight",HIGHLIGHT_FLAG:1,UPDATE_PRIORITY:3,DETACHABLE:!1,UPDATABLE:!0,MOUNTABLE:!0,cellView:null,nodeSelector:null,node:null,updateRequested:!1,postponedUpdate:!1,transformGroup:null,detachedTransformGroup:null,requestUpdate(t,e){const{paper:i}=t;this.cellView=t,this.nodeSelector=e,i&&(this.updateRequested=!0,i.requestViewUpdate(this,this.HIGHLIGHT_FLAG,this.UPDATE_PRIORITY))},confirmUpdate(){this.updateRequested=!1;const{cellView:t,nodeSelector:e}=this;return t.isMounted()?(this.update(t,e),this.mount(),this.transform(),0):(this.postponedUpdate=!0,0)},findNode(t,e=null){let i;if("string"==typeof e)i=t.findNode(e);else if(cm(e)){const r=t.model.isLink(),{label:o=null,port:n,selector:s}=e;i=r&&null!==o?t.findLabelNode(o,s):!r&&n?t.findPortNode(n,s):t.findNode(s)}else e&&(i=lu.toNode(e),i instanceof SVGElement||(i=null));return i||null},getNodeMatrix(t,e){const{options:i}=this,{layer:r}=i,{rotatableNode:o}=t,n=t.getNodeMatrix(e);return o?r?o.contains(e)?n:t.getRootRotateMatrix().inverse().multiply(n):t.getNodeRotateMatrix(e).multiply(n):n},mount(){const{MOUNTABLE:t,cellView:e,el:i,options:r,transformGroup:o,detachedTransformGroup:n,postponedUpdate:s,nodeSelector:a}=this;if(!t||o)return;if(s)return this.update(e,a),void this.transform();const{vel:l,paper:c}=e,{layer:d}=r;if(d){let t;n?(t=n,this.detachedTransformGroup=null):t=lu("g").addClass("highlight-transform").append(i),this.transformGroup=t,c.getLayerView(d).insertSortedNode(t.node,r.z)}else i.parentNode&&!i.nextSibling||l.append(i)},unmount(){const{MOUNTABLE:t,transformGroup:e,vel:i}=this;t&&(e?(this.transformGroup=null,this.detachedTransformGroup=e,e.remove()):i.remove())},transform(){const{transformGroup:t,cellView:e,updateRequested:i}=this;if(!t||e.model.isLink()||i)return;const r=e.getRootTranslateMatrix(),o=e.getRootRotateMatrix(),n=r.multiply(o);t.attr("transform",lu.matrixToTransformString(n))},update(){const{node:t,cellView:e,nodeSelector:i,updateRequested:r,id:o}=this;if(r)return;this.postponedUpdate=!1;const n=this.node=this.findNode(e,i);t&&this.unhighlight(e,t),n?(this.highlight(e,n),this.mount()):(this.unmount(),e.notify("cell:highlight:invalid",o,this))},onRemove(){const{node:t,cellView:e,id:i,constructor:r}=this;t&&this.unhighlight(e,t),this.unmount(),r._removeRef(e,i)},highlight(t,e){},unhighlight(t,e){},listenToUpdateAttributes(t){const e=bm(this,"UPDATE_ATTRIBUTES");Array.isArray(e)&&0!==e.length&&this.listenTo(t.model,"change",this.onCellAttributeChange)},onCellAttributeChange(){const{cellView:t}=this;if(!t)return;const{model:e,paper:i}=t;bm(this,"UPDATE_ATTRIBUTES").some((t=>e.hasChanged(t)))&&i.requestViewUpdate(this,this.HIGHLIGHT_FLAG,this.UPDATE_PRIORITY)}},{_views:{},highlight:function(t,e,i){const r=this.uniqueId(e,i);this.add(t,e,r,i)},unhighlight:function(t,e,i){const r=this.uniqueId(e,i);this.remove(t,r)},get(t,e=null){const{cid:i}=t,{_views:r}=this,o=r[i];if(null===e){const t=[];if(!o)return t;for(let e in o){const i=o[e];i instanceof this&&t.push(i)}return t}if(!o)return null;if(e in o){const t=o[e];if(t instanceof this)return t}return null},add(t,e,i,r={}){if(!i)throw new Error("dia.HighlighterView: An ID required.");const o=Qb.get(t,i);o&&o.remove();const n=new this(r);return n.id=i,this._addRef(t,i,n),n.requestUpdate(t,e),n.listenToUpdateAttributes(t),n},_addRef(t,e,i){const{cid:r}=t,{_views:o}=this;let n=o[r];n||(n=o[r]={}),n[e]=i},_removeRef(t,e){const{cid:i}=t,{_views:r}=this,o=r[i];if(o){e&&delete o[e];for(let t in o)return;delete r[i]}},remove(t,e=null){Jb(this.get(t,e)).forEach((t=>{t.remove()}))},removeAll(t,e=null){const{_views:i}=this;for(let r in i)for(let o in i[r]){const n=i[r][o];n.cellView.paper===t&&n instanceof this&&(null===e||o===e)&&n.remove()}},update(t,e=null,i=!1){Jb(this.get(t,e)).forEach((t=>{(i||t.UPDATABLE)&&t.update()}))},transform(t,e=null){Jb(this.get(t,e)).forEach((t=>{t.UPDATABLE&&t.transform()}))},unmount(t,e=null){Jb(this.get(t,e)).forEach((t=>t.unmount()))},mount(t,e=null){Jb(this.get(t,e)).forEach((t=>t.mount()))},uniqueId:(t,e="")=>lu.ensureId(t)+JSON.stringify(e)}),Kb=Qb.extend({tagName:"path",className:"highlight-stroke",attributes:{"pointer-events":"none",fill:"none"},options:{padding:3,rx:0,ry:0,useFirstSubpath:!1,attrs:{"stroke-width":3,stroke:"#FEB663"}},getPathData(t,e){const{options:i}=this,{useFirstSubpath:r}=i;let o;try{const t=lu(e);if(o=t.convertToPathData().trim(),"PATH"===t.tagName()&&r){const t=o.search(/.M/i)+1;t>0&&(o=o.substr(0,t))}}catch(r){const n=t.getNodeBoundingRect(e);o=lu.rectToPath(Jf({},i,n.toJSON()))}return o},highlightConnection(t){this.vel.attr("d",t.getSerializedConnection())},highlightNode(t,e){const{vel:i,options:r}=this,{padding:o,layer:n}=r;let s=this.getNodeMatrix(t,e);if(o){n||e!==t.el||i.remove();let r=t.getNodeBoundingRect(e);const a=r.x+r.width/2,l=r.y+r.height/2;r=lu.transformRect(r,s);const c=Math.max(r.width,1),d=Math.max(r.height,1),h=(c+o)/c,u=(d+o)/d,p=lu.createSVGMatrix({a:h,b:0,c:0,d:u,e:a-h*a,f:l-u*l});s=s.multiply(p)}i.attr({d:this.getPathData(t,e),transform:lu.matrixToTransformString(s)})},highlight(t,e){const{vel:i,options:r}=this;i.attr(r.attrs),r.nonScalingStroke&&i.attr("vector-effect","non-scaling-stroke"),t.isNodeConnection(e)?this.highlightConnection(t):this.highlightNode(t,e)}}),Zb=20;const ty=Qb.extend({tagName:"rect",className:"highlight-mask",attributes:{"pointer-events":"none"},options:{padding:3,maskClip:Zb,deep:!1,attrs:{stroke:"#FEB663","stroke-width":3,"stroke-linecap":"butt","stroke-linejoin":"miter"}},VISIBLE:"white",INVISIBLE:"black",MASK_ROOT_ATTRIBUTE_BLACKLIST:["marker-start","marker-end","marker-mid","transform","stroke-dasharray","class"],MASK_CHILD_ATTRIBUTE_BLACKLIST:["stroke","fill","stroke-width","stroke-opacity","stroke-dasharray","fill-opacity","marker-start","marker-end","marker-mid","class"],MASK_REPLACE_TAGS:["FOREIGNOBJECT","IMAGE","USE","TEXT","TSPAN","TEXTPATH"],MASK_REMOVE_TAGS:["TEXT","TSPAN","TEXTPATH"],transformMaskChild(t,e){const{MASK_CHILD_ATTRIBUTE_BLACKLIST:i,MASK_REPLACE_TAGS:r,MASK_REMOVE_TAGS:o}=this,n=e.tagName();if(!lu.isSVGGraphicsElement(e)||o.includes(n))return e.remove(),!1;if(r.includes(n)){const i=t.vel.findOne(`#${e.id}`);if(i){const{node:r}=i;let o=t.getNodeBoundingRect(r);t.model.isElement()&&(o=lu.transformRect(o,t.getNodeMatrix(r)));const n=lu("rect",o.toJSON()),{x:s,y:a}=o.center(),{angle:l,cx:c=s,cy:d=a}=i.rotate();l&&n.rotate(l,c,d),e.parent().append(n)}return e.remove(),!1}return i.forEach((t=>{"fill"===t&&"none"===e.attr("fill")||e.removeAttr(t)})),!0},transformMaskRoot(t,e){const{MASK_ROOT_ATTRIBUTE_BLACKLIST:i}=this;i.forEach((t=>{e.removeAttr(t)}))},getMaskShape(t,e){const{options:i,MASK_REPLACE_TAGS:r}=this,{deep:o}=i,n=e.tagName();let s;if("G"===n){if(!o)return null;s=e.clone(),function(t,e){const i=t.children();for(;i.length>0;){const t=i.shift();e(t)&&i.push(...t.children())}}(s,(e=>this.transformMaskChild(t,e)))}else{if(r.includes(n))return null;s=e.clone()}return this.transformMaskRoot(t,s),s},getMaskId(){return`highlight-mask-${this.cid}`},getMask(t,e){const{VISIBLE:i,INVISIBLE:r,options:o}=this,{padding:n,attrs:s}=o,a=parseFloat(lu("g").attr(s).attr("stroke-width")),l="none"!==e.attr("fill");let c=parseFloat(e.attr("stroke-width"));isNaN(c)&&(c=1);const d=c+2*n,h=d+2*a;let u=this.getMaskShape(t,e);if(!u){const i=t.getNodeBoundingRect(e.node);i.inflate(i.width?0:.5,i.height?0:.5),u=lu("rect",i.toJSON())}return u.attr(s),lu("mask",{id:this.getMaskId()}).append([u.clone().attr({fill:l?i:"none",stroke:i,"stroke-width":h}),u.clone().attr({fill:l?r:"none",stroke:r,"stroke-width":d})])},removeMask(t){const e=t.svg.getElementById(this.getMaskId());e&&t.defs.removeChild(e)},addMask(t,e){t.defs.appendChild(e.node)},highlight(t,e){const{options:i,vel:r}=this,{padding:o,attrs:n,maskClip:s=Zb,layer:a}=i,l="stroke"in n?n.stroke:"#000000";a||e!==t.el||r.remove();const c=t.getNodeBoundingRect(e).inflate(o+s),d=this.getNodeMatrix(t,e),h=this.getMask(t,lu(e));this.addMask(t.paper,h),r.attr(c.toJSON()),r.attr({transform:lu.matrixToTransformString(d),mask:`url(#${h.id})`,fill:l})},unhighlight(t){this.removeMask(t.paper)}}),ey=Qb.extend({UPDATABLE:!1,MOUNTABLE:!1,highlight:function(t,e){const{alphaValue:i=.3}=this.options;e.style.opacity=i},unhighlight:function(t,e){e.style.opacity=""}}),iy=cg("highlighted"),ry=Qb.extend({UPDATABLE:!1,MOUNTABLE:!1,options:{className:iy},highlight:function(t,e){lu(e).addClass(this.options.className)},unhighlight:function(t,e){lu(e).removeClass(this.options.className)}},{className:iy}),oy={ROW:"row",COLUMN:"column"},ny=Qb.extend({tagName:"g",MOUNTABLE:!0,UPDATE_ATTRIBUTES:function(){return[this.options.attribute]},_prevItems:null,highlight(t,e){const i=t.model,{attribute:r,size:o=20,gap:n=5,direction:s=oy.ROW}=this.options;if(!r)throw new Error("List: attribute is required");const a="number"==typeof o?{width:o,height:o}:o,l=s===oy.ROW,c=l?a.width:a.height;let d=i.get(r);Array.isArray(d)||(d=[]);const h=this._prevItems||[],u=d.map(((t,e)=>am(h[e],d[e])));if(h.length!==d.length||u.some((t=>!t))){const t=this.vel.children(),e=d.map(((e,i)=>{const o=i in t?t[i].node:null;if(u[i])return o;const s=this.createListItem(e,a,o);if(!s)return null;if(!(s instanceof SVGElement))throw new Error("List: item must be an SVGElement");s.dataset.index=i,s.dataset.attribute=r;const d=i*(c+n);return s.setAttribute("transform",l?`translate(${d}, 0)`:`translate(0, ${d})`),s}));this.vel.empty().append(e),this._prevItems=d}const p=d.length,f=0===p?0:p*c+(p-1)*n,m=l?{width:f,height:a.height}:{width:a.width,height:f};this.position(i,m)},position(t,e){const{vel:i,options:r}=this,{margin:o=5,position:n="top-left"}=r,{width:s,height:a}=t.size(),{left:l,right:c,top:d,bottom:h}=Tg(o),u=new ih(l,d,s-(l+c),a-(d+h));let{x:p,y:f}=Uv(u,n);switch(n){case Bv.CENTER:case Bv.TOP:case Bv.BOTTOM:p-=e.width/2;break;case Bv.RIGHT:case Bv.BOTTOM_RIGHT:case Bv.TOP_RIGHT:p-=e.width}switch(n){case Bv.CENTER:case Bv.RIGHT:case Bv.LEFT:f-=e.height/2;break;case Bv.BOTTOM:case Bv.BOTTOM_RIGHT:case Bv.BOTTOM_LEFT:f-=e.height}i.attr("transform",`translate(${p}, ${f})`)}},{Directions:oy,Positions:Bv});var sy=Object.freeze({__proto__:null,stroke:Kb,mask:ty,opacity:ey,addClass:ry,list:ny});function ay(t,e,i){if(cm(i)){const{x:r,y:o}=i;if(isFinite(o)){const i=new Vd(e,t),{start:r,end:n}=i.parallel(o);e=r,t=n}i=r}if(!isFinite(i))return t;var r=t.distance(e);return 0===i&&r>0?t:t.move(e,-Math.min(i,r-1))}function ly(t){var e=t.getAttribute("stroke-width");return null===e?0:parseFloat(e)||0}function cy(t,e,i,r){var o=e.getNodeBBox(i);r.stroke&&o.inflate(ly(i)/2);var n=t.intersect(o);return ay(n?t.start.chooseClosest(n):t.end,t.start,r.offset)}var dy="segmentSubdivisons",hy="shapeBBox";const uy=function(t,e,i,r){let{offset:o,alignOffset:n,align:s}=r;return s&&function(t,e,i=0){let r,o,n,s;const{start:a,end:l}=t;switch(e){case"left":r="x",o=l,n=a,s=-1;break;case"right":r="x",o=a,n=l,s=1;break;case"top":r="y",o=l,n=a,s=-1;break;case"bottom":r="y",o=a,n=l,s=1;break;default:return}a[r]<l[r]?o[r]=n[r]:n[r]=o[r],isFinite(i)&&(o[r]+=s*i,n[r]+=s*i)}(t,s,n),ay(t.end,t.start,o)},py=cy,fy=function(t,e,i,r){var o=e.model.angle();if(0===o)return cy(t,e,i,r);var n=e.getNodeUnrotatedBBox(i);r.stroke&&n.inflate(ly(i)/2);var s=n.center(),a=t.clone().rotate(s,o),l=a.setLength(1e6).intersect(n);return ay(l?a.start.chooseClosest(l).rotate(s,-o):t.end,t.start,r.offset)},my=function(t,e,i,r){var o,n,s=r.selector,a=t.end;if(o="string"==typeof s?e.findNode(s):!1===s?i:Array.isArray(s)?ug(i,s):function(t){if(!t)return null;var e=t;do{var i=e.tagName;if("string"!=typeof i)return null;if("G"===(i=i.toUpperCase()))e=e.firstElementChild;else{if("TITLE"!==i)break;e=e.nextElementSibling}}while(e);return e}(i),!lu.isSVGGraphicsElement(o)){if(o===i||!lu.isSVGGraphicsElement(i))return a;o=i}var l,c=e.getNodeShape(o),d=e.getNodeMatrix(o),h=e.getRootTranslateMatrix(),u=e.getRootRotateMatrix(),p=h.multiply(u).multiply(d),f=p.inverse(),m=lu.transformLine(t,f),g=m.start.clone(),v=e.getNodeData(o);if(!1===r.insideout&&(v[hy]||(v[hy]=c.bbox()),v[hy].containsPoint(g)))return a;if(c instanceof mh){var b=r.precision||2;v[dy]||(v[dy]=c.getSegmentSubdivisions({precision:b})),l={precision:b,segmentSubdivisions:v[dy]}}!0===r.extrapolate&&m.setLength(1e6),(n=m.intersect(c,l))?lu.isArray(n)&&(n=g.chooseClosest(n)):!0===r.sticky&&(n=c instanceof ih?c.pointNearestToPoint(g):c instanceof Wd?c.intersectionWithLineFromCenterToPoint(g):c.closestPoint(g,l));var y=n?lu.transformPoint(n,p):a,x=r.offset||0;return r.stroke&&(x+=ly(o)/2),ay(y,t.start,x)};var gy=Object.freeze({__proto__:null,anchor:uy,bbox:py,rectangle:fy,boundary:my});var vy={N:"S",S:"N",E:"W",W:"E"},by={N:-Math.PI/2*3,S:-Math.PI/2,E:0,W:Math.PI};function yy(t,e,i){var r=new zd(t.x,e.y);return i.containsPoint(r)&&(r=new zd(e.x,t.y)),r}function xy(t,e){return t["W"===e||"E"===e?"width":"height"]}function wy(t,e){return t.x===e.x?t.y>e.y?"N":"S":t.y===e.y?t.x>e.x?"W":"E":null}function _y(t){return new ih(t.x,t.y,0,0)}function ky(t){var e=Tg(t.padding||t.elementPadding||20);return{x:-e.left,y:-e.top,width:e.left+e.right,height:e.top+e.bottom}}function Cy(t,e){return t.sourceBBox.clone().moveAndExpand(ky(e))}function Ay(t,e){return t.targetBBox.clone().moveAndExpand(ky(e))}function Sy(t,e,i){var r=new zd(t.x,e.y),o=new zd(e.x,t.y),n=wy(t,r),s=wy(t,o),a=vy[i],l=n===i||n!==a&&(s===a||s!==i)?r:o;return{points:[l],direction:wy(l,e)}}function Ty(t,e,i){var r=yy(t,e,i);return{points:[r],direction:wy(r,e)}}function Py(t,e,i,r){var o,n={},s=[new zd(t.x,e.y),new zd(e.x,t.y)],a=s.filter((function(t){return!i.containsPoint(t)})),l=a.filter((function(e){return wy(e,t)!==r}));if(l.length>0)o=(o=l.filter((function(e){return wy(t,e)===r})).pop())||l[0],n.points=[o],n.direction=wy(o,e);else{o=mm(s,a)[0];var c=new zd(e).move(o,-xy(i,r)/2),d=yy(c,t,i);n.points=[d,c],n.direction=wy(c,e)}return n}function Ey(t,e,i,r){var o=Ty(e,t,r),n=o.points[0];if(i.containsPoint(n)){var s=(o=Ty(t,e,i)).points[0];if(r.containsPoint(s)){var a=new zd(t).move(s,-xy(i,wy(t,s))/2),l=new zd(e).move(n,-xy(r,wy(e,n))/2),c=new Vd(a,l).midpoint(),d=Ty(t,c,i),h=Sy(c,e,d.direction);o.points=[d.points[0],h.points[0]],o.direction=h.direction}}return o}function Iy(t,e,i,r,o){var n,s,a,l={},c=i.union(r).inflate(1),d=c.center().distance(e)>c.center().distance(t),h=d?e:t,u=d?t:e;return o?(n=zd.fromPolar(c.width+c.height,by[o],h),n=c.pointNearestToPoint(n).move(n,-1)):n=c.pointNearestToPoint(h).move(h,1),s=yy(n,u,c),n.round().equals(s.round())?(s=zd.fromPolar(c.width+c.height,yd(n.theta(h))+Math.PI/2,u),a=yy(n,s=c.pointNearestToPoint(s).move(u,1).round(),c),l.points=d?[s,a,n]:[n,a,s]):l.points=d?[s,n]:[n,s],l.direction=wy(d?n:s,e),l}function Ly(t,e,i){var r,o=Cy(i,e),n=Ay(i,e),s=function(t,e){return t.sourceAnchor?t.sourceAnchor:Cy(t,e).center()}(i,e),a=function(t,e){return t.targetAnchor?t.targetAnchor:Ay(t,e).center()}(i,e);o=o.union(_y(s)),n=n.union(_y(a)),(t=dm(t).map(zd)).unshift(s),t.push(a);for(var l=[],c=0,d=t.length-1;c<d;c++){var h=null,u=t[c],p=t[c+1],f=!!wy(u,p);if(0===c)c+1===d?o.intersect(n.clone().inflate(1))?h=Iy(u,p,o,n):f||(h=Ey(u,p,o,n)):o.containsPoint(p)?h=Iy(u,p,o,_y(p).moveAndExpand(ky(e))):f||(h=Ty(u,p,o));else if(c+1===d){var m=f&&wy(p,u)===r;n.containsPoint(u)||m?h=Iy(u,p,_y(u).moveAndExpand(ky(e)),n,r):f||(h=Py(u,p,n,r))}else f||(h=Sy(u,p,r));h?(Array.prototype.push.apply(l,h.points),r=h.direction):r=wy(u,p),c+1<d&&l.push(p)}return l}var Oy={step:10,maximumLoops:2e3,precision:1,maxAllowedDirectionChange:90,perpendicular:!0,excludeEnds:[],excludeTypes:[],startDirections:["top","right","bottom","left"],endDirections:["top","right","bottom","left"],directionMap:{top:{x:0,y:-1},right:{x:1,y:0},bottom:{x:0,y:1},left:{x:-1,y:0}},cost:function(){return this.step},directions:function(){var t=this.step,e=this.cost();return[{offsetX:t,offsetY:0,cost:e},{offsetX:-t,offsetY:0,cost:e},{offsetX:0,offsetY:t,cost:e},{offsetX:0,offsetY:-t,cost:e}]},penalties:function(){return{0:0,45:this.step/2,90:this.step/2}},paddingBox:function(){var t=this.step;return{x:-t,y:-t,width:2*t,height:2*t}},isPointObstacle:null,fallbackRouter:function(t,e,i){if(!lm(Ly))throw new Error("Manhattan requires the orthogonal router as default fallback.");return Ly(t,Jf({},Oy,e),i)},fallbackRoute:function(t,e,i){return null},draggingRoute:null};function Ry(t){this.map={},this.options=t,this.mapGridSize=100}function $y(){this.items=[],this.hash={},this.values={},this.OPEN=1,this.CLOSE=2}function My(t,e){return e&&e.paddingBox?t.sourceBBox.clone().moveAndExpand(e.paddingBox):t.sourceBBox.clone()}function Ny(t,e){return e&&e.paddingBox?t.targetBBox.clone().moveAndExpand(e.paddingBox):t.targetBBox.clone()}function Dy(t,e){return t.sourceAnchor?t.sourceAnchor:My(t,e).center()}function zy(t,e,i,r,o){var n=360/i,s=t.theta(function(t,e,i,r){var o=r.step,n=e.x-t.x,s=e.y-t.y,a=n/i.x,l=s/i.y,c=a*o,d=l*o;return new zd(t.x+c,t.y+d)}(t,e,r,o)),a=gd(s+n/2);return n*Math.floor(a/n)}function Fy(t,e){var i=Math.abs(t-e);return i>180?360-i:i}function By(t,e){if(!t)return e;var i=Math.abs(t),r=Math.round(i/e);return r?e+(i-r*e)/r:i}function Uy(t,e){return t.round(e)}function Vy(t,e,i){return Uy(function(t,e){var i=e.source,r=vd(t.x-i.x,e.x)+i.x,o=vd(t.y-i.y,e.y)+i.y;return new zd(r,o)}(t.clone(),e),i)}function jy(t){return t.clone().toString()}function Gy(t){return new zd(0===t.x?0:Math.abs(t.x)/t.x,0===t.y?0:Math.abs(t.y)/t.y)}function Hy(t,e,i,r,o,n,s){for(var a,l=[],c=Gy(o.difference(i)),d=jy(i),h=t[d];h;){var u=Gy((a=e[d]).difference(h));u.equals(c)||(l.unshift(a),c=u),h=t[d=jy(h)]}var p=e[d];return Gy(p.difference(r)).equals(c)||l.unshift(p),l}function qy(t,e){for(var i=1/0,r=0,o=e.length;r<o;r++){var n=t.manhattanDistance(e[r]);n<i&&(i=n)}return i}function Wy(t,e,i,r,o){var n=o.precision,s=o.directionMap,a=t.difference(e.center()),l=Wf(s)?Object.keys(s):[],c=dm(i),d=l.reduce((function(i,o){if(c.includes(o)){for(var l,d=s[o],h=new zd(t.x+d.x*(Math.abs(a.x)+e.width),t.y+d.y*(Math.abs(a.y)+e.height)),u=new Vd(t,h).intersect(e)||[],p=u.length,f=null,m=0;m<p;m++){var g=u[m],v=t.squaredDistance(g);(void 0===l||v>l)&&(l=v,f=g)}if(f){var b=Vy(f,r,n);e.containsPoint(b)&&(b=Vy(b.offset(d.x*r.x,d.y*r.y),r,n)),i.push(b)}}return i}),[]);return e.containsPoint(t)||d.push(Vy(t,r,n)),d}function Yy(t,e,i,r){var o,n,s=r.precision;o=Uy(t instanceof ih?Dy(this,r).clone():t.clone(),s),n=Uy(e instanceof ih?function(t,e){return t.targetAnchor?t.targetAnchor:Ny(t,e).center()}(this,r).clone():e.clone(),s);var a,l,c,d,h,u,p,f=(a=r.step,c=n,{source:(l=o).clone(),x:By(c.x-l.x,a),y:By(c.y-l.y,a)});if(u=t instanceof ih?Wy(d=o,t,r.startDirections,f,r):[d=o],e instanceof ih?(h=n,p=Wy(n,e,r.endDirections,f,r)):p=[h=n],u=u.filter((t=>!i(t))),p=p.filter((t=>!i(t))),u.length>0&&p.length>0){for(var m=new $y,g={},v={},b={},y=0,x=u.length;y<x;y++){var w=u[y],_=jy(w);m.add(_,qy(w,p)),g[_]=w,b[_]=0}var k,C,A=r.previousDirectionAngle,S=void 0===A,T=r.directions;!function(t,e,i){var r=i.step;dm(i.directions).forEach((function(t){t.gridOffsetX=t.offsetX/r*e.x,t.gridOffsetY=t.offsetY/r*e.y}))}(0,f,r);for(var P=T.length,E=dm(p).reduce((function(t,e){var i=jy(e);return t.push(i),t}),[]),I=r.maximumLoops;!m.isEmpty()&&I>0;){var L,O=m.pop(),R=g[O],$=v[O],M=b[O],N=void 0===$,D=R.equals(d);L=N?S?D?null:zy(d,R,P,f,r):A:zy($,R,P,f,r);var z=u.length===p.length;if(z)for(var F=0;F<u.length;F++)if(!u[F].equals(p[F])){z=!1;break}if(!(N&&z)&&E.indexOf(O)>=0)return r.previousDirectionAngle=L,Hy(v,g,R,d,h);for(y=0;y<P;y++){var B=(k=T[y]).angle;if(C=Fy(L,B),S&&D||!(C>r.maxAllowedDirectionChange)){var U=Vy(R.clone().offset(k.gridOffsetX,k.gridOffsetY),f,s),V=jy(U);if(!m.isClose(V)&&!i(U)){if(E.indexOf(V)>=0)if(!U.equals(h))if(Fy(B,zy(U,h,P,f,r))>r.maxAllowedDirectionChange)continue;var j=M+k.cost+(D?0:r.penalties[C]);(!m.isOpen(V)||j<b[V])&&(g[V]=U,v[V]=R,b[V]=j,m.add(V,j+qy(U,p)))}}}I--}}return r.fallbackRoute.call(this,d,h,r)}function Xy(t,e,i){!function(t){if(t.directions=bm(t,"directions"),t.penalties=bm(t,"penalties"),t.paddingBox=bm(t,"paddingBox"),t.padding=bm(t,"padding"),t.padding){var e=Tg(t.padding);t.paddingBox={x:-e.left,y:-e.top,width:e.left+e.right,height:e.top+e.bottom}}dm(t.directions).forEach((function(t){var e=new zd(0,0),i=new zd(t.offsetX,t.offsetY);t.angle=gd(e.theta(i))}))}(e),i.options.perpendicular=!!e.perpendicular;var r=My(i,e),o=Ny(i,e),n=Dy(i,e);let s;if("function"==typeof e.isPointObstacle)s=e.isPointObstacle;else{const t=new Ry(e);t.build(i.paper.model,i.model),s=e=>!t.isPointAccessible(e)}for(var a,l,c=dm(t).map(zd),d=[],h=n,u=0,p=c.length;u<=p;u++){var f=null;if(l=a||r,!(a=c[u]))if(a=o,(!i.model.get("source").id||!i.model.get("target").id)&&lm(e.draggingRoute)){var m=l===r?n:l,g=a.origin();f=e.draggingRoute.call(i,m,g,e)}if(null===(f=f||Yy.call(i,l,a,s,e)))return e.fallbackRouter(t,e,i);var v=f[0];v&&v.equals(h)&&f.shift(),h=f[f.length-1]||h,Array.prototype.push.apply(d,f)}return d}Ry.prototype.build=function(t,e){var i=this.options,r=dm(i.excludeEnds).reduce((function(i,r){var o=e.get(r);if(o){var n=t.getCell(o.id);n&&i.push(n)}return i}),[]),o=[],n=t.getCell(e.get("source").id);n&&(o=gm(o,n.getAncestors().map((function(t){return t.id}))));var s=t.getCell(e.get("target").id);s&&(o=gm(o,s.getAncestors().map((function(t){return t.id}))));var a=this.mapGridSize;return t.getElements().reduce((function(t,e){var n=dm(i.excludeTypes).includes(e.get("type")),s=r.find((function(t){return t.id===e.id})),l=o.includes(e.id);if(!(n||s||l))for(var c=e.getBBox().moveAndExpand(i.paddingBox),d=c.origin().snapToGrid(a),h=c.corner().snapToGrid(a),u=d.x;u<=h.x;u+=a)for(var p=d.y;p<=h.y;p+=a){var f=u+"@"+p;t[f]=t[f]||[],t[f].push(c)}return t}),this.map),this},Ry.prototype.isPointAccessible=function(t){var e=t.clone().snapToGrid(this.mapGridSize).toString();return dm(this.map[e]).every((function(e){return!e.containsPoint(t)}))},$y.prototype.add=function(t,e){this.hash[t]?this.items.splice(this.items.indexOf(t),1):this.hash[t]=this.OPEN,this.values[t]=e;var i=im(this.items,t,function(t){return this.values[t]}.bind(this));this.items.splice(i,0,t)},$y.prototype.remove=function(t){this.hash[t]=this.CLOSE},$y.prototype.isOpen=function(t){return this.hash[t]===this.OPEN},$y.prototype.isClose=function(t){return this.hash[t]===this.CLOSE},$y.prototype.isEmpty=function(){return 0===this.items.length},$y.prototype.pop=function(){var t=this.items.shift();return this.remove(t),t};const Jy=function(t,e,i){return Xy(t,Jf({},Oy,e),i)};var Qy={maxAllowedDirectionChange:45,diagonalCost:function(){var t=this.step;return Math.ceil(Math.sqrt(t*t<<1))},directions:function(){var t=this.step,e=this.cost(),i=this.diagonalCost();return[{offsetX:t,offsetY:0,cost:e},{offsetX:t,offsetY:t,cost:i},{offsetX:0,offsetY:t,cost:e},{offsetX:-t,offsetY:t,cost:i},{offsetX:-t,offsetY:0,cost:e},{offsetX:-t,offsetY:-t,cost:i},{offsetX:0,offsetY:-t,cost:e},{offsetX:t,offsetY:-t,cost:i}]},fallbackRoute:function(t,e,i){var r=t.theta(e),o=[],n={x:e.x,y:t.y},s={x:t.x,y:e.y};if(r%180>90){var a=n;n=s,s=a}var l=r%90<45?n:s,c=new Vd(t,l),d=90*Math.ceil(r/90),h=zd.fromPolar(c.squaredLength(),yd(d+135),l),u=new Vd(e,h),p=c.intersection(u),f=p||e,m=p?f:t,g=360/i.directions.length,v=m.theta(e),b=gd(v+g/2),y=g*Math.floor(b/g);return i.previousDirectionAngle=y,f&&o.push(f.round()),o.push(e),o}};const Ky={AUTO:"auto",LEFT:"left",RIGHT:"right",TOP:"top",BOTTOM:"bottom",ANCHOR_SIDE:"anchor-side",MAGNET_SIDE:"magnet-side"},Zy=[Ky.LEFT,Ky.RIGHT,Ky.TOP,Ky.BOTTOM],tx={[Ky.LEFT]:Ky.RIGHT,[Ky.RIGHT]:Ky.LEFT,[Ky.TOP]:Ky.BOTTOM,[Ky.BOTTOM]:Ky.TOP},ex=[Ky.TOP,Ky.BOTTOM],ix={0:Ky.RIGHT,180:Ky.LEFT,270:Ky.TOP,90:Ky.BOTTOM};function rx(t){return t.angle()}function ox(t){return new ah(t).simplify({threshold:1}).points}function nx(t,e){const{point:i,x0:r,y0:o,view:n,bbox:s,direction:a}=t,{point:l,x0:c,y0:d,view:h,bbox:u,direction:p}=e;let f,m;if(n)f=n.model.isLink()?ax(l,i,n):a===Ky.ANCHOR_SIDE?s.sideNearestToPoint(i):a===Ky.MAGNET_SIDE?n.model.getBBox().sideNearestToPoint(i):a;else{const t=new ih(r,o,0,0);f=Zy.includes(a)?a:t.sideNearestToPoint(l)}if(h)m=h.model.isLink()?ax(i,l,h):p===Ky.ANCHOR_SIDE?u.sideNearestToPoint(l):p===Ky.MAGNET_SIDE?h.model.getBBox().sideNearestToPoint(l):p;else{const t=new ih(c,d,0,0);m=Zy.includes(p)?p:t.sideNearestToPoint(i)}return[f,m]}function sx(t,e,i){const[r]=nx(t,e);switch(r){case Ky.TOP:return function(t,e,i){const{x0:r,y0:o,width:n,height:s,point:a,margin:l}=t,c=o+s,d=r-l,h=r+n+l,u=o-l,{x:p}=a,{x0:f,y0:m}=e;return f===p&&m<o?Ky.BOTTOM:f<p&&m<u?i.point.x===p?Ky.BOTTOM:Ky.RIGHT:f>p&&m<u?i.point.x===p?Ky.BOTTOM:Ky.LEFT:f<d&&m>=o||f>h&&m>=o?Ky.TOP:f>=d&&f<=p&&m>c||f<=h&&f>=p&&m>c?i.point.x<f?Ky.RIGHT:Ky.LEFT:Ky.TOP}(t,e,i);case Ky.RIGHT:return function(t,e,i){const{y0:r,x0:o,width:n,height:s,point:a,margin:l}=t,c=o+n,d=c+l,h=r-l,u=r+s+l,{x:p,y:f}=a,{x0:m,y0:g}=e;return m>p&&g===f?Ky.LEFT:m>=d&&g<f?Ky.BOTTOM:m>=d&&g>f?Ky.TOP:m<=c&&g<=h||m<=c&&g>=u?Ky.RIGHT:m<o&&g>=h&&g<=f||m<o&&g<=u&&g>=f?i.point.y<g?Ky.BOTTOM:Ky.TOP:Ky.RIGHT}(t,e,i);case Ky.BOTTOM:return function(t,e,i){const{x0:r,y0:o,width:n,height:s,point:a,margin:l}=t,c=o+s,d=r-l,h=r+n+l,u=c+l,{x:p}=a,{x0:f,y0:m}=e;return f===p&&m>c?Ky.TOP:f<p&&m>u?i.point.x===p?Ky.TOP:Ky.RIGHT:f>p&&m>u?i.point.x===p?Ky.TOP:Ky.LEFT:f<d&&m<=c||f>h&&m<=c?Ky.BOTTOM:f>=d&&f<=p&&m<o||f<=h&&f>=p&&m<o?i.point.x<f?Ky.RIGHT:Ky.LEFT:Ky.BOTTOM}(t,e,i);case Ky.LEFT:return function(t,e,i){const{y0:r,x0:o,width:n,height:s,point:a,margin:l}=t,c=o+n,d=o-l,h=r-l,u=r+s+l,{x:p,y:f}=a,{x0:m,y0:g}=e;return m<p&&g===f?Ky.RIGHT:m<=d&&g<f?Ky.BOTTOM:m<=d&&g>f?Ky.TOP:m>=o&&g<=h||m>=o&&g>=u?Ky.LEFT:m>c&&g>=h&&g<=f||m>c&&g<=u&&g>=f?i.point.y<g?Ky.BOTTOM:Ky.TOP:Ky.LEFT}(t,e,i)}}function ax(t,e,i){const r=i.getTangentAtLength(i.getClosestPointLength(e)),o=90*Math.round(rx(r)/90);if(o%180==0&&t.y===e.y)return t.x<e.x?Ky.LEFT:Ky.RIGHT;if(t.x===e.x)return t.y<e.y?Ky.TOP:Ky.BOTTOM;switch(o){case 0:case 180:case 360:return t.y<e.y?Ky.TOP:Ky.BOTTOM;case 90:case 270:return t.x<e.x?Ky.LEFT:Ky.RIGHT}}function lx(t,e,i,r,o,n,s){r===Ky.AUTO&&(r=o?Ky.MAGNET_SIDE:Ky.ANCHOR_SIDE);const a=t&&t.model.isElement(),{x:l,y:c,width:d=0,height:h=0}=a?ih.fromRectUnion(i,t.model.getBBox()):n;return{point:e,x0:l,y0:c,view:t,bbox:i,width:d,height:h,direction:r,margin:a?s:0}}function cx({x:t,y:e}){const i=new zd(t,e);return{point:i,x0:i.x,y0:i.y,view:null,bbox:new ih(t,e,0,0),width:0,height:0,direction:null,margin:0}}function dx(t,e,i){const r=e.point.clone(),{x0:o,y0:n,width:s,height:a}=e;switch(t){case"left":r.x=o-i;break;case"right":r.x=o+s+i;break;case"top":r.y=n-i;break;case"bottom":r.y=n+a+i}return r}function hx(t,e,i={}){const{point:r,x0:o,y0:n,width:s,height:a,margin:l}=t,{point:c,x0:d,y0:h,width:u,height:p,margin:f}=e,{targetInSourceBBox:m=!1}=i,g=d+u,v=h+p,b=o+s,y=n+a,x=o-l,w=b+l,_=n-l,k=y+l,C=d-f,A=g+f,S=h-f,T=v+f,[P,E]=nx(t,e),I=dx(P,{point:r,x0:o,y0:n,width:s,height:a},l),L=dx(E,{point:c,x0:d,y0:h,width:u,height:p},f),{x:O,y:R}=I,{x:$,y:M}=L,N=((o+b)/2<(d+g)/2?b+d:g+o)/2,D=((n+y)/2<(h+v)/2?y+h:v+n)/2,z=new ih(o,n,s,a),F=new ih(d,h,u,p),B=z.clone().inflate(l),U=F.clone().inflate(f);if("left"===P&&"right"===E){if(x<=A){let t=D;return O<=C&&(v>=_&&M<R?t=Math.min(S,_):h<=k&&M>=R&&(t=Math.max(T,k))),[{x:O,y:R},{x:O,y:t},{x:$,y:t},{x:$,y:M}]}const t=(O+$)/2;return[{x:t,y:R},{x:t,y:M}]}if("right"===P&&"left"===E){if(O>=C){let t=D;return O>g&&(v>=_&&M<R?t=Math.min(S,_):h<=k&&M>=R&&(t=Math.max(T,k))),[{x:O,y:R},{x:O,y:t},{x:$,y:t},{x:$,y:M}]}const t=(O+$)/2;return[{x:t,y:R},{x:t,y:M}]}if("top"===P&&"bottom"===E){const t=nu.rectWithRect(B,F);if(R<M){let e=N,i=R;return t&&(i=Math.min(i,S)),g>=x&&$<O?e=Math.min(C,x):d<=w&&$>=O&&(e=Math.max(A,w)),[{x:O,y:i},{x:e,y:i},{x:e,y:M},{x:$,y:M}]}const e=(R+M)/2;return[{x:O,y:e},{x:$,y:e}]}if("bottom"===P&&"top"===E){const t=nu.rectWithRect(B,F);if(R>M){let e=N,i=R;return t&&(i=Math.max(i,T)),g>=x&&$<O?e=Math.min(C,x):d<=w&&$>=O&&(e=Math.max(A,w)),[{x:O,y:i},{x:e,y:i},{x:e,y:M},{x:$,y:M}]}const e=(R+M)/2;return[{x:O,y:e},{x:$,y:e}]}if("top"===P&&"top"===E){if(m||nu.rectWithRect(B,F)||R<=h&&(B.bottomRight().x<=$||B.bottomLeft().x>=$)||R>=h&&(U.bottomRight().x<=O||U.bottomLeft().x>=O))return[{x:O,y:Math.min(R,M)},{x:$,y:Math.min(R,M)}];let t,e=Math.min((y+h)/2,M),i=Math.min((n+v)/2,R);return t=M<R?$>O?Math.min(O,C):Math.max(O,A):$>=O?Math.max($,w):Math.min($,x),[{x:O,y:i},{x:t,y:i},{x:t,y:e},{x:$,y:e}]}if("bottom"===P&&"bottom"===E){if(m||nu.rectWithRect(B,F)||R>=M&&(B.topRight().x<=$||B.topLeft().x>=$)||R<=M&&(U.topRight().x<=O||U.topLeft().x>=O))return[{x:O,y:Math.max(R,M)},{x:$,y:Math.max(R,M)}];let t,e=Math.max((n+v)/2,M),i=Math.max((y+h)/2,R);return t=M>R?$>O?Math.min(O,C):Math.max(O,A):$>=O?Math.max($,w):Math.min($,x),[{x:O,y:i},{x:t,y:i},{x:t,y:e},{x:$,y:e}]}if("left"===P&&"left"===E){if(m||nu.rectWithRect(B,F)||O<=$&&(B.bottomRight().y<=M||B.topRight().y>=M)||O>=$&&(U.bottomRight().y<=R||U.topRight().y>=R))return[{x:Math.min(O,$),y:R},{x:Math.min(O,$),y:M}];let t,e=Math.min((b+d)/2,$),i=Math.min((o+g)/2,O);return t=$>O?M<=R?Math.min(_,M):Math.max(k,M):M>=R?Math.min(S,R):Math.max(T,R),[{x:i,y:R},{x:i,y:t},{x:e,y:t},{x:e,y:M}]}if("right"===P&&"right"===E){if(m||nu.rectWithRect(B,F)||O>=$&&(B.bottomLeft().y<=M||B.topLeft().y>=M)||O<=$&&(U.bottomLeft().y<=R||U.topLeft().y>=R))return[{x:Math.max(O,$),y:R},{x:Math.max(O,$),y:M}];let t,e=Math.max((o+g)/2,$),i=Math.max((b+d)/2,O);return t=$<=O?M<=R?Math.min(_,M):Math.max(k,M):M>=R?Math.min(S,R):Math.max(T,R),[{x:i,y:R},{x:i,y:t},{x:e,y:t},{x:e,y:M}]}if("top"===P&&"right"===E){if(B.containsPoint(c)){if(O<=A){const t=Math.max(O+l,$),e=Math.min(_,S);return[{x:O,y:e},{x:t,y:e},{x:t,y:M}]}const t=(O-l+$)/2;return[{x:O,y:R},{x:t,y:R},{x:t,y:M}]}if(_>M){if(O<$){let t=S;return T<=_&&A>=O&&(t=D),[{x:O,y:t},{x:$,y:t},{x:$,y:M}]}return[{x:O,y:M}]}const t=Math.max(N,A);if(O>$&&y>=M)return[{x:O,y:R},{x:t,y:R},{x:t,y:M}];if(t>x&&R<v){const t=Math.min(_,S),e=Math.max(w,A);return[{x:O,y:t},{x:e,y:t},{x:e,y:M}]}return[{x:O,y:R},{x:t,y:R},{x:t,y:M}]}if("top"===P&&"left"===E){if(B.containsPoint(c)){if(O>=C){const t=Math.min(O-l,$),e=Math.min(_,S);return[{x:O,y:e},{x:t,y:e},{x:t,y:M}]}const t=(O+l+$)/2;return[{x:O,y:R},{x:t,y:R},{x:t,y:M}]}if(_>M){if(O>$){let t=S;return T<=_&&C<=O&&(t=D),[{x:O,y:t},{x:$,y:t},{x:$,y:M}]}return[{x:O,y:M}]}const t=Math.min(C,N);if(O<$&&y>=M)return[{x:O,y:R},{x:t,y:R},{x:t,y:M}];if(t<w&&R<v){const t=Math.min(_,S),e=Math.min(x,C);return[{x:O,y:t},{x:e,y:t},{x:e,y:M}]}return[{x:O,y:R},{x:t,y:R},{x:t,y:M}]}if("bottom"===P&&"right"===E){if(B.containsPoint(c)){if(O<=A){const t=Math.max(O+l,$),e=Math.max(k,T);return[{x:O,y:e},{x:t,y:e},{x:t,y:M}]}const t=(O-l+$)/2;return[{x:O,y:R},{x:t,y:R},{x:t,y:M}]}if(k<M){if(O<$){let t=T;return S>=k&&A>=O&&(t=D),[{x:O,y:t},{x:$,y:t},{x:$,y:M}]}return[{x:O,y:M}]}const t=Math.max(N,A);if(O>$&&n<=M)return[{x:O,y:R},{x:t,y:R},{x:t,y:M}];if(t>x&&R>h){const t=Math.max(k,T),e=Math.max(w,A);return[{x:O,y:t},{x:e,y:t},{x:e,y:M}]}return[{x:O,y:R},{x:t,y:R},{x:t,y:M}]}if("bottom"===P&&"left"===E){if(B.containsPoint(c)){if(O>=C){const t=Math.min(O-l,$),e=Math.max(k,T);return[{x:O,y:e},{x:t,y:e},{x:t,y:M}]}const t=(O+l+$)/2;return[{x:O,y:R},{x:t,y:R},{x:t,y:M}]}if(k<M){if(O>$){let t=T;return S>=k&&C<=O&&(t=D),[{x:O,y:t},{x:$,y:t},{x:$,y:M}]}return[{x:O,y:M}]}const t=Math.min(C,N);if(O<$&&n<=M)return[{x:O,y:R},{x:t,y:R},{x:t,y:M}];if(t<w&&R>h){const t=Math.max(k,T),e=Math.min(x,C);return[{x:O,y:t},{x:e,y:t},{x:e,y:M}]}return[{x:O,y:R},{x:t,y:R},{x:t,y:M}]}if("left"===P&&"bottom"===E){if(B.containsPoint(c)){if(R<=T){const t=Math.min(x,C),e=Math.max(R+l,M);return[{x:t,y:R},{x:t,y:e},{x:$,y:e}]}const t=(R-l+M)/2;return[{x:O,y:R},{x:O,y:t},{x:$,y:t}]}if(x>$){if(R<M){let t=C;return A<=x&&T>=R&&(t=N),[{x:t,y:R},{x:t,y:M},{x:$,y:M}]}return[{x:$,y:R}]}const t=Math.max(T,D);if(R>M&&b>=$)return[{x:O,y:R},{x:O,y:t},{x:$,y:t}];if(t>_&&O<g){const t=Math.min(x,C),e=Math.max(k,T);return[{x:t,y:R},{x:t,y:e},{x:$,y:e}]}return[{x:O,y:R},{x:O,y:t},{x:$,y:t}]}if("left"===P&&"top"===E){if(B.containsPoint(c)){if(R>=S){const t=Math.min(R-l,M),e=Math.min(x,C);return[{x:e,y:R},{x:e,y:t},{x:$,y:t}]}const t=(R+l+M)/2;return[{x:O,y:R},{x:O,y:t},{x:$,y:t}]}if(x>$){if(R>M){let t=C;return A<=x&&S<=R&&(t=N),[{x:t,y:R},{x:t,y:M},{x:$,y:M}]}return[{x:$,y:R}]}const t=Math.min(S,D);if(R<M&&b>=$)return[{x:O,y:R},{x:O,y:t},{x:$,y:t}];if(t<k&&O<g){const t=Math.min(x,C),e=Math.min(_,S);return[{x:t,y:R},{x:t,y:e},{x:$,y:e}]}return[{x:O,y:R},{x:O,y:t},{x:$,y:t}]}if("right"===P&&"top"===E){if(B.containsPoint(c)){if(R>=S){const t=Math.max(w,A),e=Math.min(R-l,M);return[{x:t,y:R},{x:t,y:e},{x:$,y:e}]}const t=(R+l+M)/2;return[{x:O,y:R},{x:O,y:t},{x:$,y:t}]}if(w<$){if(R>M){let t=A;return C>=w&&S<=R&&(t=N),[{x:t,y:R},{x:t,y:M},{x:$,y:M}]}return[{x:$,y:R}]}const t=Math.min(S,D);if(R<M&&o<=$)return[{x:O,y:R},{x:O,y:t},{x:$,y:t}];if(t<k&&O>d){const t=Math.max(w,A),e=Math.min(_,S);return[{x:t,y:R},{x:t,y:e},{x:$,y:e}]}return[{x:O,y:R},{x:O,y:t},{x:$,y:t}]}if("right"===P&&"bottom"===E){if(B.containsPoint(c)){if(R<=T){const t=Math.max(w,A),e=Math.max(R+l,M);return[{x:t,y:R},{x:t,y:e},{x:$,y:e}]}const t=(R-l+M)/2;return[{x:O,y:R},{x:O,y:t},{x:$,y:t}]}if(w<$){if(R<M){let t=A;return C>=w&&T>=R&&(t=N),[{x:t,y:R},{x:t,y:M},{x:$,y:M}]}return[{x:$,y:R}]}const t=Math.max(T,D);if(R>M&&o<=$)return[{x:O,y:R},{x:O,y:t},{x:$,y:t}];if(t>_&&O>d){const t=Math.max(w,A),e=Math.max(k,T);return[{x:t,y:R},{x:t,y:e},{x:$,y:e}]}return[{x:O,y:R},{x:O,y:t},{x:$,y:t}]}}function ux(t,e,i){const{sourceDirection:r=Ky.AUTO,targetDirection:o=Ky.AUTO}=e,n=e.margin||20,s=e.useVertices||!1,a=!!i.model.source().port,l=lx(i.sourceView,i.sourceAnchor,i.sourceBBox,r,a,i.sourceAnchor,n),c=!!i.model.target().port,d=lx(i.targetView,i.targetAnchor,i.targetBBox,o,c,i.targetAnchor,n);let h=[];if(!s||0===t.length)return ox(hx(l,d));const u=t.map((t=>cx(t))),[p]=u;if(l.view&&l.view.model.isElement()&&l.view.model.getBBox().inflate(n).containsPoint(p.point)){const[t]=nx(l,p),e=t,i=cx(l.point);i.margin=n,i.direction=t,p.direction=e,h.push(...hx(i,p,{targetInSourceBBox:!0}),p.point)}else{const t=sx(l,p,u[1]||d);p.direction=t,h.push(...hx(l,p),p.point)}for(let t=0;t<u.length-1;t++){const e=u[t],i=u[t+1],r=rx(new Vd(e.point,i.point));if(r%90==0){const t=ix[r],o=tx[t];if(t!==e.direction)h.push(e.point,i.point),i.direction=o;else{const t=gd(r-90);let o=0,s=0;90===t?s=-n:180===t?o=-n:270===t?s=n:0===t&&(o=n);const a={x:e.point.x+o,y:e.point.y+s},l={x:i.point.x+o,y:i.point.y+s},c=new Vd(i.point,l);i.direction=ix[rx(c)],h.push(e.point,a,l,i.point)}continue}const[o,s]=px(e,i);e.direction=o,i.direction=s,h.push(...hx(e,i),i.point)}const f=u[u.length-1];if(d.view&&d.view.model.isElement())if(d.view.model.getBBox().inflate(n).containsPoint(f.point)){const[t]=px(f,d),e=cx(d.point),[,i]=nx(f,d);e.margin=n,e.direction=i,f.direction=t,h.push(...hx(f,e))}else{const t=ox(h),e=new Vd(t[t.length-2],f.point),i=ix[Math.round(rx(e))];f.direction=i;let r=hx(f,d);const[o,s]=ox([...r,d.point]),a=new Vd(o,s),l=Math.round(rx(a)),c=ix[l];c!==i&&i===tx[c]&&(f.margin=n,r=hx(f,d)),h.push(...r)}else{const[t]=px(f,d);f.direction=t,h.push(...hx(f,d))}return ox(h)}function px(t,e){const i=t.direction,r=ex.includes(i);let o=t.direction,n=e.direction;if(r){const r=t.point.y>e.point.y,s=e.point.x-t.point.x;i===Ky.BOTTOM?(o=r?tx[i]:s>=0?Ky.RIGHT:Ky.LEFT,s>0?n=r?Ky.LEFT:Ky.TOP:s<0&&(n=r?Ky.RIGHT:Ky.TOP)):(o=r?s>=0?Ky.RIGHT:Ky.LEFT:tx[i],s>0?n=r?Ky.BOTTOM:Ky.LEFT:s<0&&(n=r?Ky.BOTTOM:Ky.RIGHT))}else{const r=t.point.x>e.point.x,s=e.point.y-t.point.y;i===Ky.RIGHT?(o=r?tx[i]:s>=0?Ky.BOTTOM:Ky.TOP,s>0?n=r?Ky.TOP:Ky.LEFT:s<0&&(n=r?Ky.BOTTOM:Ky.LEFT)):(o=r?s>=0?Ky.BOTTOM:Ky.TOP:tx[i],s>0?n=r?Ky.RIGHT:Ky.TOP:s<0&&(n=r?Ky.RIGHT:Ky.BOTTOM))}return[o,n]}ux.Directions=Ky;const fx=ux;var mx=Object.freeze({__proto__:null,normal:function(t,e,i){return t},oneSide:function(t,e,i){var r,o,n,s=e.side||"bottom",a=Tg(e.padding||40),l=i.sourceBBox,c=i.targetBBox,d=l.center(),h=c.center();switch(s){case"bottom":n=1,r="y",o="height";break;case"top":n=-1,r="y",o="height";break;case"left":n=-1,r="x",o="width";break;case"right":n=1,r="x",o="width";break;default:throw new Error("Router: invalid side")}return d[r]+=n*(l[o]/2+a[s]),h[r]+=n*(c[o]/2+a[s]),n*(d[r]-h[r])>0?h[r]=d[r]:d[r]=h[r],[d].concat(t,h)},orthogonal:Ly,manhattan:Jy,metro:function(t,e,i){if(!lm(Jy))throw new Error("Metro requires the manhattan router.");return Jy(t,Jf({},Qy,e),i)},rightAngle:fx});function gx(t){return function(e,i,r,o){if(r instanceof Element){var n,s=this.paper.findView(r);if(s)if(s.isNodeConnection(r))n=vx(s,"fixedAt"in o?o.fixedAt:"50%");else n=s.getNodeBBox(r).center();else n=new zd;return t.call(this,e,i,n,o)}return t.apply(this,arguments)}}function vx(t,e){var i=parseFloat(e);return _g(e)?t.getPointAtRatio(i/100):t.getPointAtLength(i)}const bx=gx((function(t,e,i,r){var o=1e6,n=t.getConnection(),s=t.getConnectionSubdivisions(),a=new Vd(i.clone().offset(0,o),i.clone().offset(0,-o)),l=new Vd(i.clone().offset(o,0),i.clone().offset(-o,0)),c=a.intersect(n,{segmentSubdivisions:s}),d=l.intersect(n,{segmentSubdivisions:s}),h=[];return c&&Array.prototype.push.apply(h,c),d&&Array.prototype.push.apply(h,d),h.length>0?i.chooseClosest(h):"fallbackAt"in r?vx(t,r.fallbackAt):yx(t,e,i,r)})),yx=gx((function(t,e,i,r){var o=t.getClosestPoint(i);return o||new zd}));var xx=Object.freeze({__proto__:null,resolveRef:gx,connectionRatio:function(t,e,i,r){var o="ratio"in r?r.ratio:.5;return t.getPointAtRatio(o)},connectionLength:function(t,e,i,r){var o="length"in r?r.length:20;return t.getPointAtLength(o)},connectionPerpendicular:bx,connectionClosest:yx});function wx(t){return function(e,i,r,o){var n=!!o.rotate,s=n?e.getNodeUnrotatedBBox(i):e.getNodeBBox(i),a=s[t](),l=o.dx;if(l){var c=_g(l);l=parseFloat(l),isFinite(l)&&(c&&(l/=100,l*=s.width),a.x+=l)}var d=o.dy;if(d){var h=_g(d);d=parseFloat(d),isFinite(d)&&(h&&(d/=100,d*=s.height),a.y+=d)}return n?a.rotate(e.model.getBBox().center(),-e.model.angle()):a}}const _x=wx("center"),kx=wx("topMiddle"),Cx=wx("bottomMiddle"),Ax=wx("leftMiddle"),Sx=wx("rightMiddle"),Tx=wx("origin"),Px=wx("topRight"),Ex=wx("bottomLeft"),Ix=wx("corner"),Lx=gx((function(t,e,i,r){var o=t.model.angle(),n=t.getNodeBBox(e),s=n.center(),a=n.origin(),l=n.corner(),c=r.padding;if(isFinite(c)||(c=0),a.y+c<=i.y&&i.y<=l.y-c){var d=i.y-s.y;s.x+=0===o||180===o?0:1*d/Math.tan(yd(o)),s.y+=d}else if(a.x+c<=i.x&&i.x<=l.x-c){var h=i.x-s.x;s.y+=90===o||270===o?0:h*Math.tan(yd(o)),s.x+=h}return s})),Ox=gx((function(t,e,i,r){var o,n,s,a=!!r.rotate;a?(o=t.getNodeUnrotatedBBox(e),s=t.model.getBBox().center(),n=t.model.angle()):o=t.getNodeBBox(e);var l,c=r.padding;switch(isFinite(c)&&o.inflate(c),a&&i.rotate(s,n),o.sideNearestToPoint(i)){case"left":l=o.leftMiddle();break;case"right":l=o.rightMiddle();break;case"top":l=o.topMiddle();break;case"bottom":l=o.bottomMiddle()}return a?l.rotate(s,-n):l})),Rx=function(t,e,i,r,o){return t.model.getPointFromConnectedLink(this.model,o).offset(r.dx,r.dy)};var $x=Object.freeze({__proto__:null,center:_x,top:kx,bottom:Cx,left:Ax,right:Sx,topLeft:Tx,topRight:Px,bottomLeft:Ex,bottomRight:Ix,perpendicular:Lx,midSide:Ox,modelCenter:Rx});const Mx=Ub.extend({initialize:function(t,e){e.cellNamespace?this.cellNamespace=e.cellNamespace:this.cellNamespace="undefined"!=typeof joint&&vm(joint,"shapes")?joint.shapes:null,this.graph=e.graph},model:function(t,e){const i=e.collection,r=i.cellNamespace,{type:o}=t,n=ug(r,o,".");if(!n)throw new Error(`dia.Graph: Could not find cell constructor for type: '${o}'. Make sure to add the constructor to 'cellNamespace'.`);const s=new n(t,e);return e.dry||(s.graph=i.graph),s},comparator:function(t){return t.get("z")||0}}),Nx=Yg.extend({initialize:function(t,e){var i=new Mx([],{model:(e=e||{}).cellModel,cellNamespace:e.cellNamespace,graph:this});Yg.prototype.set.call(this,"cells",i),i.on("all",this.trigger,this),this.on("change:z",this._sortOnChangeZ,this),this._out={},this._in={},this._nodes={},this._edges={},this._batches={},i.on("add",this._restructureOnAdd,this),i.on("remove",this._restructureOnRemove,this),i.on("reset",this._restructureOnReset,this),i.on("change:source",this._restructureOnChangeSource,this),i.on("change:target",this._restructureOnChangeTarget,this),i.on("remove",this._removeCell,this)},_sortOnChangeZ:function(){this.get("cells").sort()},_restructureOnAdd:function(t){if(t.isLink()){this._edges[t.id]=!0;var{source:e,target:i}=t.attributes;e.id&&((this._out[e.id]||(this._out[e.id]={}))[t.id]=!0),i.id&&((this._in[i.id]||(this._in[i.id]={}))[t.id]=!0)}else this._nodes[t.id]=!0},_restructureOnRemove:function(t){if(t.isLink()){delete this._edges[t.id];var{source:e,target:i}=t.attributes;e.id&&this._out[e.id]&&this._out[e.id][t.id]&&delete this._out[e.id][t.id],i.id&&this._in[i.id]&&this._in[i.id][t.id]&&delete this._in[i.id][t.id]}else delete this._nodes[t.id]},_restructureOnReset:function(t){t=t.models,this._out={},this._in={},this._nodes={},this._edges={},t.forEach(this._restructureOnAdd,this)},_restructureOnChangeSource:function(t){var e=t.previous("source");e.id&&this._out[e.id]&&delete this._out[e.id][t.id];var i=t.attributes.source;i.id&&((this._out[i.id]||(this._out[i.id]={}))[t.id]=!0)},_restructureOnChangeTarget:function(t){var e=t.previous("target");e.id&&this._in[e.id]&&delete this._in[e.id][t.id];var i=t.get("target");i.id&&((this._in[i.id]||(this._in[i.id]={}))[t.id]=!0)},getOutboundEdges:function(t){return this._out&&this._out[t]||{}},getInboundEdges:function(t){return this._in&&this._in[t]||{}},toJSON:function(){var t=Yg.prototype.toJSON.apply(this,arguments);return t.cells=this.get("cells").toJSON(),t},fromJSON:function(t,e){if(!t.cells)throw new Error("Graph JSON must contain cells array.");return this.set(t,e)},set:function(t,e,i){var r;return"object"==typeof t?(r=t,i=e):(r={})[t]=e,r.hasOwnProperty("cells")&&(this.resetCells(r.cells,i),r=ym(r,"cells")),Yg.prototype.set.call(this,r,i)},clear:function(t){t=Jf({},t,{clear:!0});var e=this.get("cells");if(0===e.length)return this;this.startBatch("clear",t);var i=e.sortBy((function(t){return t.isLink()?1:2}));do{i.shift().remove(t)}while(i.length>0);return this.stopBatch("clear"),this},_prepareCell:function(t,e){var i;if(t instanceof Yg?(i=t.attributes,t.graph||e&&e.dry||(t.graph=this)):i=t,!Xf(i.type))throw new TypeError("dia.Graph: cell type must be a string.");return t},minZIndex:function(){var t=this.get("cells").first();return t&&t.get("z")||0},maxZIndex:function(){var t=this.get("cells").last();return t&&t.get("z")||0},addCell:function(t,e){return Array.isArray(t)?this.addCells(t,e):(t instanceof Yg?t.has("z")||t.set("z",this.maxZIndex()+1):void 0===t.z&&(t.z=this.maxZIndex()+1),this.get("cells").add(this._prepareCell(t,e),e||{}),this)},addCells:function(t,e){return 0===t.length||(t=pm(t),e.maxPosition=e.position=t.length-1,this.startBatch("add",e),t.forEach((function(t){this.addCell(t,e),e.position--}),this),this.stopBatch("add",e)),this},resetCells:function(t,e){var i=dm(t).map((function(t){return this._prepareCell(t,e)}),this);return this.get("cells").reset(i,e),this},removeCells:function(t,e){return t.length&&(this.startBatch("remove"),tm(t,"remove",e),this.stopBatch("remove")),this},_removeCell:function(t,e,i){(i=i||{}).clear||(i.disconnectLinks?this.disconnectLinks(t,i):this.removeLinks(t,i)),this.get("cells").remove(t,{silent:!0}),t.graph===this&&(t.graph=null)},getCell:function(t){return this.get("cells").get(t)},getCells:function(){return this.get("cells").toArray()},getElements:function(){return this.get("cells").toArray().filter((t=>t.isElement()))},getLinks:function(){return this.get("cells").toArray().filter((t=>t.isLink()))},getFirstCell:function(){return this.get("cells").first()},getLastCell:function(){return this.get("cells").last()},getConnectedLinks:function(t,e){var i=(e=e||{}).indirect,r=e.inbound,o=e.outbound;void 0===r&&void 0===o&&(r=o=!0);var n=[],s={};function a(t,e){if(wm(t.getOutboundEdges(e.id),function(e,c){if(!s[c]){var d=t.getCell(c);n.push(d),s[c]=!0,i&&(r&&l(t,d),o&&a(t,d))}}.bind(t)),i&&e.isLink()){var c=e.getTargetCell();c&&c.isLink()&&(s[c.id]||(n.push(c),a(t,c)))}}function l(t,e){if(wm(t.getInboundEdges(e.id),function(e,c){if(!s[c]){var d=t.getCell(c);n.push(d),s[c]=!0,i&&(r&&l(t,d),o&&a(t,d))}}.bind(t)),i&&e.isLink()){var c=e.getSourceCell();c&&c.isLink()&&(s[c.id]||(n.push(c),l(t,c)))}}if(o&&a(this,t),r&&l(this,t),e.deep){var c=t.getEmbeddedCells({deep:!0}),d={};c.forEach((function(t){t.isElement()&&(d[t.id]=!0)})),c.forEach((function(t){t.isLink()||(o&&wm(this.getOutboundEdges(t.id),function(t,i){if(!s[i]){var r=this.getCell(i),{source:o,target:a}=r.attributes,l=o.id,c=a.id;if(!e.includeEnclosed&&l&&d[l]&&c&&d[c])return;n.push(this.getCell(i)),s[i]=!0}}.bind(this)),r&&wm(this.getInboundEdges(t.id),function(t,i){if(!s[i]){var r=this.getCell(i),{source:o,target:a}=r.attributes,l=o.id,c=a.id;if(!e.includeEnclosed&&l&&d[l]&&c&&d[c])return;n.push(this.getCell(i)),s[i]=!0}}.bind(this)))}),this)}return n},getNeighbors:function(t,e){e||(e={});var i=e.inbound,r=e.outbound;void 0===i&&void 0===r&&(i=r=!0);var o=this.getConnectedLinks(t,e).reduce(function(o,n){var{source:s,target:a}=n.attributes,l=n.hasLoop(e);if(i&&vm(s,"id")&&!o[s.id]){var c=this.getCell(s.id);c.isElement()&&(!l&&(!c||c===t||e.deep&&c.isEmbeddedIn(t))||(o[s.id]=c))}if(r&&vm(a,"id")&&!o[a.id]){var d=this.getCell(a.id);d.isElement()&&(!l&&(!d||d===t||e.deep&&d.isEmbeddedIn(t))||(o[a.id]=d))}return o}.bind(this),{});if(t.isLink()){if(i){var n=t.getSourceCell();n&&n.isElement()&&!o[n.id]&&(o[n.id]=n)}if(r){var s=t.getTargetCell();s&&s.isElement()&&!o[s.id]&&(o[s.id]=s)}}return dm(o)},getCommonAncestor:function(){var t=Array.from(arguments).map((function(t){for(var e=[],i=t.get("parent");i;)e.push(i),i=this.getCell(i).get("parent");return e}),this);t=t.sort((function(t,e){return t.length-e.length}));var e=dm(t.shift()).find((function(e){return t.every((function(t){return t.includes(e)}))}));return this.getCell(e)},getSuccessors:function(t,e){e=e||{};var i=[];return this.search(t,(function(e){e!==t&&i.push(e)}),Jf({},e,{outbound:!0})),i},cloneCells:Xg,cloneSubgraph:function(t,e){var i=this.getSubgraph(t,e);return this.cloneCells(i)},getSubgraph:function(t,e){e=e||{};var i=[],r={},o=[],n=[];return dm(t).forEach((function(t){(r[t.id]||(i.push(t),r[t.id]=t,t.isLink()?n.push(t):o.push(t)),e.deep)&&t.getEmbeddedCells({deep:!0}).forEach((function(t){r[t.id]||(i.push(t),r[t.id]=t,t.isLink()?n.push(t):o.push(t))}))})),n.forEach((function(t){var{source:e,target:n}=t.attributes;if(e.id&&!r[e.id]){var s=this.getCell(e.id);i.push(s),r[s.id]=s,o.push(s)}if(n.id&&!r[n.id]){var a=this.getCell(n.id);i.push(this.getCell(n.id)),r[a.id]=a,o.push(a)}}),this),o.forEach((function(t){this.getConnectedLinks(t,e).forEach((function(t){var{source:e,target:o}=t.attributes;!r[t.id]&&e.id&&r[e.id]&&o.id&&r[o.id]&&(i.push(t),r[t.id]=t)}))}),this),i},getPredecessors:function(t,e){e=e||{};var i=[];return this.search(t,(function(e){e!==t&&i.push(e)}),Jf({},e,{inbound:!0})),i},search:function(t,e,i){(i=i||{}).breadthFirst?this.bfs(t,e,i):this.dfs(t,e,i)},bfs:function(t,e,i={}){const r={},o={},n=[];for(n.push(t),o[t.id]=0;n.length>0;){var s=n.shift();if(r[s.id])continue;if(r[s.id]=!0,!1===e.call(this,s,o[s.id]))continue;const t=this.getNeighbors(s,i);for(let e=0,i=t.length;e<i;e++){const i=t[e];o[i.id]=o[s.id]+1,n.push(i)}}},dfs:function(t,e,i={}){const r={},o={},n=[];for(n.push(t),o[t.id]=0;n.length>0;){const t=n.pop();if(r[t.id])continue;if(r[t.id]=!0,!1===e.call(this,t,o[t.id]))continue;const s=this.getNeighbors(t,i),a=n.length;for(let e=0,i=s.length;e<i;e++){const i=s[e];o[i.id]=o[t.id]+1,n.splice(a,0,i)}}},getSources:function(){var t=[];return wm(this._nodes,function(e,i){this._in[i]&&!sm(this._in[i])||t.push(this.getCell(i))}.bind(this)),t},getSinks:function(){var t=[];return wm(this._nodes,function(e,i){this._out[i]&&!sm(this._out[i])||t.push(this.getCell(i))}.bind(this)),t},isSource:function(t){return!this._in[t.id]||sm(this._in[t.id])},isSink:function(t){return!this._out[t.id]||sm(this._out[t.id])},isSuccessor:function(t,e){var i=!1;return this.search(t,(function(r){if(r===e&&r!==t)return i=!0,!1}),{outbound:!0}),i},isPredecessor:function(t,e){var i=!1;return this.search(t,(function(r){if(r===e&&r!==t)return i=!0,!1}),{inbound:!0}),i},isNeighbor:function(t,e,i){var r=(i=i||{}).inbound,o=i.outbound;void 0===r&&void 0===o&&(r=o=!0);var n=!1;return this.getConnectedLinks(t,i).forEach((function(t){var{source:i,target:s}=t.attributes;return r&&vm(i,"id")&&i.id===e.id||o&&vm(s,"id")&&s.id===e.id?(n=!0,!1):void 0})),n},disconnectLinks:function(t,e){this.getConnectedLinks(t).forEach((function(i){i.set(i.attributes.source.id===t.id?"source":"target",{x:0,y:0},e)}))},removeLinks:function(t,e){tm(this.getConnectedLinks(t),"remove",e)},findModelsFromPoint:function(t){return this.getElements().filter((e=>e.getBBox({rotate:!0}).containsPoint(t)))},findModelsInArea:function(t,e={}){const i=new ih(t),{strict:r=!1}=e,o=r?"containsRect":"intersect";return this.getElements().filter((t=>i[o](t.getBBox({rotate:!0}))))},findModelsUnderElement:function(t,e={}){const{searchBy:i="bbox"}=e,r=t.getBBox().rotateAroundCenter(t.angle());return("bbox"===i?this.findModelsInArea(r):this.findModelsFromPoint(Uv(r,i))).filter((e=>t.id!==e.id&&!e.isEmbeddedIn(t)))},getBBox:function(){return this.getCellsBBox(this.getCells())},getCellsBBox:function(t,e={}){const{rotate:i=!0}=e;return dm(t).reduce((function(t,e){const r=e.getBBox({rotate:i});return r?t?t.union(r):r:t}),null)},translate:function(t,e,i){var r=this.getCells().filter((function(t){return!t.isEmbedded()}));return tm(r,"translate",t,e,i),this},resize:function(t,e,i){return this.resizeCells(t,e,this.getCells(),i)},resizeCells:function(t,e,i,r){var o=this.getCellsBBox(i);if(o){var n=Math.max(t/o.width,0),s=Math.max(e/o.height,0);tm(i,"scale",n,s,o.origin(),r)}return this},startBatch:function(t,e){return e=e||{},this._batches[t]=(this._batches[t]||0)+1,this.trigger("batch:start",Jf({},e,{batchName:t}))},stopBatch:function(t,e){return e=e||{},this._batches[t]=(this._batches[t]||0)-1,this.trigger("batch:stop",Jf({},e,{batchName:t}))},hasActiveBatch:function(t){const e=this._batches;let i;return i=0===arguments.length?Object.keys(e):Array.isArray(t)?t:[t],i.some((t=>e[t]>0))}},{validations:{multiLinks:function(t,e){var{source:i,target:r}=e.attributes;if(i.id&&r.id){var o=e.getSourceCell();if(o)if(t.getConnectedLinks(o,{outbound:!0}).filter((function(t){var{source:e,target:o}=t.attributes;return e&&e.id===i.id&&(!e.port||e.port===i.port)&&o&&o.id===r.id&&(!o.port||o.port===r.port)})).length>1)return!1}return!0},linkPinning:function(t,e){var{source:i,target:r}=e.attributes;return i.id&&r.id}}});!function(t,e,i){if(Xf(i)){if(!Fv[i])throw new Error('Unknown wrapper: "'+i+'"');i=Fv[i]}if(!lm(i))throw new Error("Wrapper must be a function.");dm(e).forEach((function(e){t[e]=i(t[e])}))}(Nx.prototype,["resetCells","addCells","removeCells"],Fv.cells);const Dx={GRID:"grid",CELLS:"cells",BACK:"back",FRONT:"front",TOOLS:"tools",LABELS:"labels"},zx=Bb.extend({tagName:"g",svgElement:!0,pivotNodes:null,defaultTheme:null,options:{name:""},className:function(){return cg(`${this.options.name}-layer`)},init:function(){this.pivotNodes={}},insertSortedNode:function(t,e){this.el.insertBefore(t,this.insertPivot(e))},insertNode:function(t){const{el:e}=this;t.parentNode!==e&&e.appendChild(t)},insertPivot:function(t){const{el:e,pivotNodes:i}=this;(t=+t)||(t=0);let r=i[t];if(r)return r;r=i[t]=document.createComment("z-index:"+(t+1));let o=-1/0;for(let e in i)e=+e,e<t&&e>o&&(o=e);if(o!==-1/0){const t=i[o];e.insertBefore(r,t.nextSibling)}else e.insertBefore(r,e.firstChild);return r},removePivots:function(){const{el:t,pivotNodes:e}=this;for(let i in e)t.removeChild(e[i]);this.pivotNodes={}}}),Fx=["transform","x","y","cx","cy","dx","dy","x1","y1","x2","y2","points","d","r","rx","ry","width","height","stroke-width","font-size"].reduce(((t,e)=>(t[e]=!0,t)),{}),Bx=["r","rx","ry","width","height","stroke-width","font-size"].reduce(((t,e)=>(t[e]=!0,t)),{});function Ux(t,e){const i={};for(let r in t)t.hasOwnProperty(r)&&(i[r]=Vx(r,t[r],e));return i}function Vx(t,e,i){if(t in Fx&&hv(e)){let r=fv(e,i);return t in Bx&&(r=Math.max(0,r)),r}return e}const jx={DEFAULT:"default",EMBEDDING:"embedding",CONNECTING:"connecting",MAGNET_AVAILABILITY:"magnetAvailability",ELEMENT_AVAILABILITY:"elementAvailability"},Gx=Bb.extend({tagName:"g",svgElement:!0,selector:"root",metrics:null,className:function(){var t=["cell"],e=this.model.get("type");return e&&e.toLowerCase().split(".").forEach((function(e,i,r){t.push("type-"+r.slice(0,i+1).join("-"))})),t.join(" ")},_presentationAttributes:null,_flags:null,setFlags:function(){var t,e,i,r={},o={},n=0,s=bm(this,"presentationAttributes");for(var a in s)if(s.hasOwnProperty(a)){var l=s[a];for(Array.isArray(l)||(l=[l]),t=0,e=l.length;t<e;t++){var c=r[i=l[t]];c||(c=r[i]=1<<n++),o[a]|=c}}var d=bm(this,"initFlag");for(Array.isArray(d)||(d=[d]),t=0,e=d.length;t<e;t++)r[i=d[t]]||(r[i]=1<<n++);if(n>25)throw new Error("dia.CellView: Maximum number of flags exceeded.");this._flags=r,this._presentationAttributes=o},hasFlag:function(t,e){return t&this.getFlag(e)},removeFlag:function(t,e){return t^t&this.getFlag(e)},getFlag:function(t){var e=this._flags;if(!e)return 0;var i=0;if(Array.isArray(t))for(var r=0,o=t.length;r<o;r++)i|=e[t[r]];else i|=e[t];return i},attributes:function(){var t=this.model;return{"model-id":t.id,"data-type":t.attributes.type}},constructor:function(t){t.id=t.id||gg(this),Bb.call(this,t)},initialize:function(){this.setFlags(),Bb.prototype.initialize.apply(this,arguments),this.cleanNodesCache(),this.startListening()},startListening:function(){this.listenTo(this.model,"change",this.onAttributesChange)},onAttributesChange:function(t,e){var i=t.getChangeFlag(this._presentationAttributes);!e.updateHandled&&i&&(e.dirty&&this.hasFlag(i,"UPDATE")&&(i|=this.getFlag("RENDER")),e.tool&&(e.async=!1),this.requestUpdate(i,e))},requestUpdate:function(t,e){const{paper:i}=this;i&&t>0&&i.requestViewUpdate(this,t,this.UPDATE_PRIORITY,e)},parseDOMJSON:function(t,e){var i=dg(t),r=i.selectors,o=i.groupSelectors;for(var n in o){if(r[n])throw new Error("dia.CellView: ambiguous group selector");r[n]=o[n]}if(e){var s=this.selector;if(r[s])throw new Error("dia.CellView: ambiguous root selector.");r[s]=e}return{fragment:i.fragment,selectors:r}},can:function(t){var e,i,r=lm(this.options.interactive)?this.options.interactive(this):this.options.interactive;return Wf(r)&&!1!==r[t]||(e=r,i=Object.prototype.toString,(!0===e||!1===e||!!e&&"object"==typeof e&&i.call(e)===hu)&&!1!==r)},findBySelector:function(t,e,i){if(!t||"."===t)return[e];if(i){var r=i[t];if(r)return Array.isArray(r)?r:[r]}return this.useCSSSelectors?lg(e).find(t).toArray():[]},findNodes:function(t){return this.findBySelector(t,this.el,this.selectors)},findNode:function(t){const[e=null]=this.findNodes(t);return e},notify:function(t){if(this.paper){var e=Array.prototype.slice.call(arguments,1);this.trigger.apply(this,[t].concat(e)),this.paper.trigger.apply(this.paper,[t,this].concat(e))}},getBBox:function(t){var e;if(t&&t.useModelGeometry){var i=this.model;e=i.getBBox().bbox(i.angle())}else e=this.getNodeBBox(this.el);return this.paper.localToPaperRect(e)},getNodeBBox:function(t){const e=this.getNodeBoundingRect(t),i=this.getRootTranslateMatrix().multiply(this.getNodeRotateMatrix(t)),r=this.getNodeMatrix(t);return lu.transformRect(e,i.multiply(r))},getNodeRotateMatrix(t){return!this.rotatableNode||this.rotatableNode.contains(t)?this.getRootRotateMatrix():lu.createSVGMatrix()},getNodeUnrotatedBBox:function(t){var e=this.getNodeBoundingRect(t),i=this.getNodeMatrix(t),r=this.getRootTranslateMatrix();return lu.transformRect(e,r.multiply(i))},getRootTranslateMatrix:function(){var t=this.model.position();return lu.createSVGMatrix().translate(t.x,t.y)},getRootRotateMatrix:function(){var t=lu.createSVGMatrix(),e=this.model,i=e.angle();if(i){var r=e.getBBox(),o=r.width/2,n=r.height/2;t=t.translate(o,n).rotate(i).translate(-o,-n)}return t},_notifyHighlight:function(t,e,i={}){const{el:r}=this;let o;if("string"==typeof e?o=this.findNode(e)||r:[o=r]=this.$(e),i.partial=o!==r,void 0===i.type){let t;switch(!0){case i.embedding:t=jx.EMBEDDING;break;case i.connecting:t=jx.CONNECTING;break;case i.magnetAvailability:t=jx.MAGNET_AVAILABILITY;break;case i.elementAvailability:t=jx.ELEMENT_AVAILABILITY;break;default:t=jx.DEFAULT}i.type=t}return this.notify(t,o,i),this},highlight:function(t,e){return this._notifyHighlight("cell:highlight",t,e)},unhighlight:function(t,e={}){return this._notifyHighlight("cell:unhighlight",t,e)},findMagnet:function(t){const e=this.el;let i=this.$(t)[0];i||(i=e);do{const t=i.getAttribute("magnet"),r=i===e;if((t||r)&&"false"!==t)return i;if(r)return;i=i.parentNode}while(i)},findProxyNode:function(t,e){t||(t=this.el);const i=t.getAttribute(`${e}-selector`);if(i){const t=this.findNode(i);if(t)return t}return t},getSelector:function(t,e){var i;if(t===this.el)return"string"==typeof e&&(i=":scope > "+e),i;if(t){var r=lu(t).index()+1;i=t.tagName+":nth-child("+r+")",e&&(i+=" > "+e),i=this.getSelector(t.parentNode,i)}return i},addLinkFromMagnet:function(t,e,i){var r=this.paper,o=r.model,n=r.getDefaultLink(this,t);return n.set({source:this.getLinkEnd(t,e,i,n,"source"),target:{x:e,y:i}}).addTo(o,{async:!1,ui:!0}),n.findView(r)},getLinkEnd:function(t,...e){const i=this.model,r=i.id,o=this.findAttributeNode("port",t),n=t.getAttribute("joint-selector"),s={id:r};if(null!=n&&(s.magnet=n),null!=o){let e=o.getAttribute("port");"number"===o.getAttribute("port-id-type")&&(e=parseInt(e,10)),s.port=e,i.hasPort(e)||n||(s.selector=this.getSelector(t))}else null==n&&this.el!==t&&(s.selector=this.getSelector(t));return this.customizeLinkEnd(s,t,...e)},customizeLinkEnd:function(t,e,i,r,o,n){const{paper:s}=this,{connectionStrategy:a}=s.options;if("function"==typeof a){var l=a.call(s,t,this,e,new zd(i,r),o,n,s);if(l)return l}return t},getMagnetFromLinkEnd:function(t){var e,i=t.port,r=t.magnet,o=this.model;return null!=i&&o.isElement()&&o.hasPort(i)?e=this.findPortNode(i,r)||this.el:(r||(r=t.selector),r||null==i||(r='[port="'+i+'"]'),e=this.findNode(r)),this.findProxyNode(e,"magnet")},dragLinkStart:function(t,e,i,r){this.model.startBatch("add-link");const o=this.addLinkFromMagnet(e,i,r);o.notifyPointerdown(t,i,r),o.eventData(t,o.startArrowheadMove("target",{whenNotAllowed:"remove"})),this.eventData(t,{linkView:o})},dragLink:function(t,e,i){var r=this.eventData(t),o=r.linkView;if(o)o.pointermove(t,e,i);else{var n=this.paper,s=n.options.magnetThreshold,a=this.getEventTarget(t),l=r.targetMagnet;if("onleave"===s){if(l===a||lu(l).contains(a))return}else if(n.eventData(t).mousemoved<=s)return;this.dragLinkStart(t,l,e,i)}},dragLinkEnd:function(t,e,i){var r=this.eventData(t).linkView;r&&(r.pointerup(t,e,i),this.model.stopBatch("add-link"))},getAttributeDefinition:function(t){return this.model.constructor.getAttributeDefinition(t)},setNodeAttributes:function(t,e){sm(e)||(t instanceof SVGElement?lu(t).attr(e):lg(t).attr(e))},processNodeAttributes:function(t,e){var i,r,o,n,s,a,l,c,d,h=[];const u={};for(i in e)e.hasOwnProperty(i)&&(u[lu.attributeNames[i]]=e[i]);for(i in u)u.hasOwnProperty(i)&&(r=u[i],!(o=this.getAttributeDefinition(i))||lm(o.qualify)&&!o.qualify.call(this,r,t,u,this)?(a||(a={}),a[i]=r):(Xf(o.set)&&(a||(a={}),a[o.set]=r),null!==r&&h.push(i,o)));for(n=0,s=h.length;n<s;n+=2)i=h[n],o=h[n+1],r=e[i],lm(o.set)&&(l||(l={}),l[i]=r),lm(o.position)&&(c||(c={}),c[i]=r),lm(o.offset)&&(d||(d={}),d[i]=r);return{raw:u,normal:a,set:l,position:c,offset:d}},updateRelativeAttributes:function(t,e,i,r){var o,n;r||(r={});var s=Ux(e.raw||{},i),a=e.normal||{};for(const t in a)a[t]=s[t];var l=e.set,c=e.position,d=e.offset;for(o in l){n=s[o];var h=this.getAttributeDefinition(o).set.call(this,n,i.clone(),t,s,this);Wf(h)?Jf(a,h):void 0!==h&&(a[o]=h)}if(t instanceof HTMLElement)this.setNodeAttributes(t,a);else{var u,p,f,m=a.transform,g=lu.transformStringToMatrix(m),v=zd(g.e,g.f);if(m&&(a=ym(a,"transform"),g.e=g.f=0),c||d){var b=this.getNodeScale(t,r.scalableNode);u=b.sx,p=b.sy}var y=!1;for(o in c)n=s[o],(f=this.getAttributeDefinition(o).position.call(this,n,i.clone(),t,s,this))&&(v.offset(zd(f).scale(u,p)),y||(y=!0));this.setNodeAttributes(t,a);var x=!1;if(d){var w=this.getNodeBoundingRect(t);if(w.width>0&&w.height>0){var _=lu.transformRect(w,g).scale(1/u,1/p);for(o in d)n=s[o],(f=this.getAttributeDefinition(o).offset.call(this,n,_,t,s,this))&&(v.offset(zd(f).scale(u,p)),x||(x=!0))}}(void 0!==m||y||x)&&(v.round(1),g.e=v.x,g.f=v.y,t.setAttribute("transform",lu.matrixToTransformString(g)))}},getNodeScale:function(t,e){var i,r;if(e&&e.contains(t)){var o=e.scale();i=1/o.sx,r=1/o.sy}else i=1,r=1;return{sx:i,sy:r}},cleanNodesCache:function(){this.metrics={}},nodeCache:function(t){var e=this.metrics;if(!e)return{};var i=lu.ensureId(t),r=e[i];return r||(r=e[i]={}),r},getNodeData:function(t){var e=this.nodeCache(t);return e.data||(e.data={}),e.data},getNodeBoundingRect:function(t){var e=this.nodeCache(t);return void 0===e.boundingRect&&(e.boundingRect=lu(t).getBBox()),new ih(e.boundingRect)},getNodeMatrix:function(t){const e=this.nodeCache(t);if(void 0===e.magnetMatrix){const{rotatableNode:i,el:r}=this;let o;o=i&&i.contains(t)?i:r,e.magnetMatrix=lu(t).getTransformToElement(o)}return lu.createSVGMatrix(e.magnetMatrix)},getNodeShape:function(t){var e=this.nodeCache(t);return void 0===e.geometryShape&&(e.geometryShape=lu(t).toGeometryShape()),e.geometryShape.clone()},isNodeConnection:function(t){return this.model.isLink()&&(!t||t===this.el)},findNodesAttributes:function(t,e,i,r){var o,n,s,a,l={},c=[];for(var d in t)if(t.hasOwnProperty(d)&&(s=t[d],cm(s))){var h=i[d]=this.findBySelector(d,e,r);for(o=0,n=h.length;o<n;o++){var u=h[o];a=lu.ensureId(u);var p=r&&r[d]===u,f=l[a];if(f){f.array||(c.push(a),f.array=!0,f.attributes=[f.attributes],f.selectedLength=[f.selectedLength]);var m=f.attributes,g=f.selectedLength;if(p)m.unshift(s),g.unshift(-1);else{var v=im(g,n);m.splice(v,0,s),g.splice(v,0,n)}}else l[a]={attributes:s,selectedLength:p?-1:n,node:u,array:!1}}}for(o=0,n=c.length;o<n;o++)(s=l[a=c[o]]).attributes=Am({},...s.attributes.reverse());return l},getEventTarget:function(t,e={}){const{target:i,type:r,clientX:o=0,clientY:n=0}=t;return e.fromPoint||"touchmove"===r||"touchend"===r||"pointerId"in t&&i.hasPointerCapture(t.pointerId)?document.elementFromPoint(o,n):i},updateDOMSubtreeAttributes:function(t,e,i){i||(i={}),i.rootBBox||(i.rootBBox=ih()),i.selectors||(i.selectors=this.selectors);var r,o,n,s,a,l={},c={},d=[],h=[],u=i.roAttributes,p=this.findNodesAttributes(u||e,t,l,i.selectors),f=u?this.findNodesAttributes(e,t,l,i.selectors):p;for(var m in p)if(n=(s=p[m]).attributes,o=s.node,(a=this.processNodeAttributes(o,n)).set||a.position||a.offset||a.raw.ref){var g,v=f[m]&&f[m].attributes,b=v&&void 0===n.ref?v.ref:n.ref;if(b){if(!(g=(l[b]||this.findBySelector(b,t,i.selectors))[0]))throw new Error('dia.CellView: "'+b+'" reference does not exist.')}else g=null;if(r={node:o,refNode:g,processedAttributes:a,allAttributes:v},g){var y=h.findIndex((function(t){return t.refNode===o}));y>-1?h.splice(y,0,r):h.push(r)}else d.push(r)}else this.setNodeAttributes(o,Ux(a.normal,i.rootBBox));d.push(...h);for(let t=0,e=d.length;t<e;t++){r=d[t],o=r.node;const e=(g=r.refNode)?lu.ensureId(g):"";let n=c[e];n||(n=c[e]=g?lu(g).getBBox({target:Hx(o,g)}):i.rootBBox),u?(a=this.processNodeAttributes(o,r.allAttributes),this.mergeProcessedAttributes(a,r.processedAttributes)):a=r.processedAttributes,this.updateRelativeAttributes(o,a,n,i)}},mergeProcessedAttributes:function(t,e){t.set||(t.set={}),t.position||(t.position={}),t.offset||(t.offset={}),Jf(t.set,e.set),Jf(t.position,e.position),Jf(t.offset,e.offset);var i=t.normal&&t.normal.transform;void 0!==i&&e.normal&&(e.normal.transform=i),t.normal=e.normal},onMount(t){t||(this.mountTools(),Qb.mount(this))},onDetach(){this.unmountTools(),Qb.unmount(this)},onRemove:function(){this.removeTools(),this.removeHighlighters()},_toolsView:null,hasTools:function(t){var e=this._toolsView;return!!e&&(!t||e.getName()===t)},addTools:function(t){return this.removeTools(),t&&(this._toolsView=t,t.configure({relatedView:this}),t.listenTo(this.paper,"tools:event",this.onToolEvent.bind(this))),this},unmountTools(){const t=this._toolsView;return t&&t.unmount(),this},mountTools(){const t=this._toolsView;return t&&!t.isMounted()&&t.mount(),this},updateTools:function(t){var e=this._toolsView;return e&&e.update(t),this},removeTools:function(){var t=this._toolsView;return t&&(t.remove(),this._toolsView=null),this},hideTools:function(){var t=this._toolsView;return t&&t.hide(),this},showTools:function(){var t=this._toolsView;return t&&t.show(),this},onToolEvent:function(t){switch(t){case"remove":this.removeTools();break;case"hide":this.hideTools();break;case"show":this.showTools()}},removeHighlighters:function(){Qb.remove(this)},updateHighlighters:function(t=!1){Qb.update(this,null,t)},transformHighlighters:function(){Qb.transform(this)},preventDefaultInteraction(t){this.eventData(t,{defaultInteractionPrevented:!0})},isDefaultInteractionPrevented(t){const{defaultInteractionPrevented:e=!1}=this.eventData(t);return e},pointerdblclick:function(t,e,i){this.notify("cell:pointerdblclick",t,e,i)},pointerclick:function(t,e,i){this.notify("cell:pointerclick",t,e,i)},contextmenu:function(t,e,i){this.notify("cell:contextmenu",t,e,i)},pointerdown:function(t,e,i){const{model:r}=this,{graph:o}=r;o&&(r.startBatch("pointer"),this.eventData(t,{graph:o})),this.notify("cell:pointerdown",t,e,i)},pointermove:function(t,e,i){this.notify("cell:pointermove",t,e,i)},pointerup:function(t,e,i){const{graph:r}=this.eventData(t);this.notify("cell:pointerup",t,e,i),r&&r.stopBatch("pointer",{cell:this.model})},mouseover:function(t){this.notify("cell:mouseover",t)},mouseout:function(t){this.notify("cell:mouseout",t)},mouseenter:function(t){this.notify("cell:mouseenter",t)},mouseleave:function(t){this.notify("cell:mouseleave",t)},mousewheel:function(t,e,i,r){this.notify("cell:mousewheel",t,e,i,r)},onevent:function(t,e,i,r){this.notify(e,t,i,r)},onmagnet:function(){},magnetpointerdblclick:function(){},magnetcontextmenu:function(){},checkMouseleave(t){const{paper:e,model:i}=this;if(e.isAsync()){if(i.isLink()){const t=i.getSourceElement();if(t){const i=e.findViewByModel(t);i&&(e.dumpView(i),e.checkViewVisibility(i))}const r=i.getTargetElement();if(r){const t=e.findViewByModel(r);t&&(e.dumpView(t),e.checkViewVisibility(t))}}e.dumpView(this),e.checkViewVisibility(this)}const r=this.getEventTarget(t,{fromPoint:!0}),o=e.findView(r);o!==this&&(this.mouseleave(t),o&&o.mouseenter(t))},setInteractivity:function(t){this.options.interactive=t}},{Flags:{TOOLS:"TOOLS"},Highlighting:jx,addPresentationAttributes:function(t){return Am({},bm(this.prototype,"presentationAttributes"),t,(function(t,e){if(t&&e)return"string"==typeof t&&(t=[t]),"string"==typeof e&&(e=[e]),Array.isArray(t)&&Array.isArray(e)?rm(t.concat(e)):void 0}))},evalAttribute:Vx});function Hx(t,e){let i=t;do{if(i.contains(e))return i;i=i.parentNode}while(i);return null}Object.defineProperty(Gx.prototype,"useCSSSelectors",{get(){const t=this.model.useCSSSelectors;return void 0!==t?t:eg}});const qx={TOOLS:Gx.Flags.TOOLS,UPDATE:"UPDATE",TRANSLATE:"TRANSLATE",RESIZE:"RESIZE",PORTS:"PORTS",ROTATE:"ROTATE",RENDER:"RENDER"},Wx="move",Yx="magnet",Xx=Gx.extend({_removePorts:function(){},_renderPorts:function(){},className:function(){var t=Gx.prototype.className.apply(this).split(" ");return t.push("element"),t.join(" ")},initialize:function(){Gx.prototype.initialize.apply(this,arguments),this._initializePorts()},presentationAttributes:{attrs:[qx.UPDATE],position:[qx.TRANSLATE,qx.TOOLS],size:[qx.RESIZE,qx.PORTS,qx.TOOLS],angle:[qx.ROTATE,qx.TOOLS],markup:[qx.RENDER],ports:[qx.PORTS]},initFlag:[qx.RENDER],UPDATE_PRIORITY:0,confirmUpdate:function(t,e){const{useCSSSelectors:i}=this;this.hasFlag(t,qx.PORTS)&&(this._removePorts(),this._cleanPortsCache());let r=!1;if(this.hasFlag(t,qx.RENDER))this.render(),this.updateTools(e),this.updateHighlighters(!0),r=!0,t=this.removeFlag(t,[qx.RENDER,qx.UPDATE,qx.RESIZE,qx.TRANSLATE,qx.ROTATE,qx.PORTS,qx.TOOLS]);else{let o=!1;this.hasFlag(t,qx.RESIZE)&&(this.resize(e),o=!0,t=this.removeFlag(t,[qx.RESIZE,qx.UPDATE]),i&&(t=this.removeFlag(t,qx.PORTS))),this.hasFlag(t,qx.UPDATE)&&(this.update(this.model,null,e),t=this.removeFlag(t,qx.UPDATE),o=!0,i&&(t=this.removeFlag(t,qx.PORTS))),this.hasFlag(t,qx.TRANSLATE)&&(this.translate(),t=this.removeFlag(t,qx.TRANSLATE),r=!0),this.hasFlag(t,qx.ROTATE)&&(this.rotate(),t=this.removeFlag(t,qx.ROTATE),r=!0),this.hasFlag(t,qx.PORTS)&&(this._renderPorts(),o=!0,t=this.removeFlag(t,qx.PORTS)),o&&this.updateHighlighters(!1)}return r&&this.transformHighlighters(),this.hasFlag(t,qx.TOOLS)&&(this.updateTools(e),t=this.removeFlag(t,qx.TOOLS)),t},_initializePorts:function(){},update:function(t,e){this.cleanNodesCache();const{useCSSSelectors:i}=this;i&&this._removePorts();var r=this.model,o=r.attr();this.updateDOMSubtreeAttributes(this.el,o,{rootBBox:new ih(r.size()),selectors:this.selectors,scalableNode:this.scalableNode,rotatableNode:this.rotatableNode,roAttributes:e===o?null:e}),i&&this._renderPorts()},rotatableSelector:"rotatable",scalableSelector:"scalable",scalableNode:null,rotatableNode:null,renderMarkup:function(){var t=this.model,e=t.get("markup")||t.markup;if(!e)throw new Error("dia.ElementView: markup required");if(Array.isArray(e))return this.renderJSONMarkup(e);if("string"==typeof e)return this.renderStringMarkup(e);throw new Error("dia.ElementView: invalid markup")},renderJSONMarkup:function(t){var e=this.parseDOMJSON(t,this.el),i=this.selectors=e.selectors;this.rotatableNode=lu(i[this.rotatableSelector])||null,this.scalableNode=lu(i[this.scalableSelector])||null,this.vel.append(e.fragment)},renderStringMarkup:function(t){var e=this.vel;e.append(lu(t)),this.rotatableNode=e.findOne(".rotatable"),this.scalableNode=e.findOne(".scalable"),(this.selectors={})[this.selector]=this.el},render:function(){return this.vel.empty(),this.renderMarkup(),this.scalableNode&&this.update(),this.resize(),this.rotatableNode?(this.rotate(),this.translate()):this.updateTransformation(),this.useCSSSelectors||this._renderPorts(),this},resize:function(t){if(this.scalableNode)return this.sgResize(t);this.model.attributes.angle&&this.rotate(),this.update()},translate:function(){if(this.rotatableNode)return this.rgTranslate();this.updateTransformation()},rotate:function(){if(this.rotatableNode)return this.rgRotate(),void this.update();this.updateTransformation()},updateTransformation:function(){var t=this.getTranslateString(),e=this.getRotateString();e&&(t+=" "+e),this.vel.attr("transform",t)},getTranslateString:function(){var t=this.model.attributes.position;return"translate("+t.x+","+t.y+")"},getRotateString:function(){var t=this.model.attributes,e=t.angle;if(!e)return null;var i=t.size;return"rotate("+e+","+i.width/2+","+i.height/2+")"},rgRotate:function(){this.rotatableNode.attr("transform",this.getRotateString())},rgTranslate:function(){this.vel.attr("transform",this.getTranslateString())},sgResize:function(t){var e=this.model,i=e.angle(),r=e.size(),o=this.scalableNode,n=!1;o.node.getElementsByTagName("path").length>0&&(n=!0);var s=o.getBBox({recursive:n}),a=r.width/(s.width||1),l=r.height/(s.height||1);o.attr("transform","scale("+a+","+l+")");var c=this.rotatableNode,d=c&&c.attr("transform");if(d){c.attr("transform",d+" rotate("+-i+","+r.width/2+","+r.height/2+")");var h=o.getBBox({target:this.paper.cells});e.set("position",{x:h.x,y:h.y},Jf({updateHandled:!0},t)),this.translate(),this.rotate()}this.update()},prepareEmbedding:function(t={}){const e=t.model||this.model,i=(t.paper||this.paper).model,r=t.initialZIndices={},o=e.getEmbeddedCells({deep:!0}),n=i.getConnectedLinks(e,{deep:!0,includeEnclosed:!0});[e,...o,...n].forEach((t=>r[t.id]=t.attributes.z)),e.startBatch("to-front"),e.toFront({deep:!0,ui:!0});const s=i.getElements().reduce(((t,e)=>Math.max(t,e.attributes.z||0)),0);n.forEach((t=>{t.attributes.z<=s&&t.set("z",s+1,{ui:!0})})),e.stopBatch("to-front");const a=e.parent();if(a){i.getCell(a).unembed(e,{ui:!0}),t.initialParentId=a}else t.initialParentId=null},processEmbedding:function(t={},e,i,r){const o=t.model||this.model,n=t.paper||this.paper,s=n.model,{findParentBy:a,frontParentOnly:l,validateEmbedding:c}=n.options;let d;d=lm(a)?dm(a.call(s,this,e,i,r)):"pointer"===a?dm(s.findModelsFromPoint({x:i,y:r})):s.findModelsUnderElement(o,{searchBy:a}),d=d.filter((t=>t instanceof zv&&o.id!==t.id&&!t.isEmbeddedIn(o))),l&&(d=d.slice(-1));let h=null;const u=t.candidateEmbedView;for(let t=d.length-1;t>=0;t--){const e=d[t];if(u&&u.model.id==e.id){h=u;break}{const t=e.findView(n);if(!lm(c)||c.call(n,this,t)){h=t;break}}}h&&h!=u&&(this.clearEmbedding(t),t.candidateEmbedView=h.highlight(h.findProxyNode(null,"container"),{embedding:!0})),!h&&u&&this.clearEmbedding(t)},clearEmbedding:function(t){t||(t={});var e=t.candidateEmbedView;e&&(e.unhighlight(e.findProxyNode(null,"container"),{embedding:!0}),t.candidateEmbedView=null)},finalizeEmbedding:function(t={}){const e=t.candidateEmbedView,i=t.model||this.model,r=t.paper||this.paper;if(e)e.model.embed(i,{ui:!0}),e.unhighlight(e.findProxyNode(null,"container"),{embedding:!0}),t.candidateEmbedView=null;else{const{validateUnembedding:e}=r.options,{initialParentId:i}=t;if(i&&"function"==typeof e&&!e.call(r,this))return void this._disallowUnembed(t)}r.model.getConnectedLinks(i,{deep:!0}).forEach((t=>{t.reparent({ui:!0})}))},_disallowUnembed:function(t){const{model:e,whenNotAllowed:i="revert"}=t,r=e||this.model,o=(t.paper||this.paper).model;switch(i){case"remove":r.remove({ui:!0});break;case"revert":{const{initialParentId:e,initialPosition:i,initialZIndices:n}=t;if(i){const{x:t,y:e}=i;r.position(t,e,{deep:!0,ui:!0})}n&&Object.keys(n).forEach((t=>{const e=o.getCell(t);e&&e.set("z",n[t],{ui:!0})}));const s=o.getCell(e);s&&s.embed(r,{ui:!0});break}}},getDelegatedView:function(){for(var t=this,e=t.model,i=t.paper;t&&!e.isLink();){if(!e.isEmbedded()||t.can("stopDelegation"))return t;e=e.getParentCell(),t=i.findViewByModel(e)}return null},findProxyNode:function(t,e){t||(t=this.el);const i=t.getAttribute(`${e}-selector`);if(i){const e=this.findAttribute("port",t);if(e){const t=this.findPortNode(e,i);if(t)return t}else{const t=this.findNode(i);if(t)return t}}return t},notifyPointerdown(t,e,i){Gx.prototype.pointerdown.call(this,t,e,i),this.notify("element:pointerdown",t,e,i)},notifyPointermove(t,e,i){Gx.prototype.pointermove.call(this,t,e,i),this.notify("element:pointermove",t,e,i)},notifyPointerup(t,e,i){this.notify("element:pointerup",t,e,i),Gx.prototype.pointerup.call(this,t,e,i)},pointerdblclick:function(t,e,i){Gx.prototype.pointerdblclick.apply(this,arguments),this.notify("element:pointerdblclick",t,e,i)},pointerclick:function(t,e,i){Gx.prototype.pointerclick.apply(this,arguments),this.notify("element:pointerclick",t,e,i)},contextmenu:function(t,e,i){Gx.prototype.contextmenu.apply(this,arguments),this.notify("element:contextmenu",t,e,i)},pointerdown:function(t,e,i){this.notifyPointerdown(t,e,i),this.dragStart(t,e,i)},pointermove:function(t,e,i){const r=this.eventData(t),{targetMagnet:o,action:n,delegatedView:s}=r;switch(o&&this.magnetpointermove(t,o,e,i),n){case Yx:this.dragMagnet(t,e,i);break;case Wx:(s||this).drag(t,e,i);default:if(r.preventPointerEvents)break;this.notifyPointermove(t,e,i)}this.eventData(t,r)},pointerup:function(t,e,i){const r=this.eventData(t),{targetMagnet:o,action:n,delegatedView:s}=r;switch(o&&this.magnetpointerup(t,o,e,i),n){case Yx:this.dragMagnetEnd(t,e,i);break;case Wx:(s||this).dragEnd(t,e,i);default:if(r.preventPointerEvents)break;this.notifyPointerup(t,e,i)}o&&this.magnetpointerclick(t,o,e,i),this.checkMouseleave(t)},mouseover:function(t){Gx.prototype.mouseover.apply(this,arguments),this.notify("element:mouseover",t)},mouseout:function(t){Gx.prototype.mouseout.apply(this,arguments),this.notify("element:mouseout",t)},mouseenter:function(t){Gx.prototype.mouseenter.apply(this,arguments),this.notify("element:mouseenter",t)},mouseleave:function(t){Gx.prototype.mouseleave.apply(this,arguments),this.notify("element:mouseleave",t)},mousewheel:function(t,e,i,r){Gx.prototype.mousewheel.apply(this,arguments),this.notify("element:mousewheel",t,e,i,r)},onmagnet:function(t,e,i){const{currentTarget:r}=t;this.magnetpointerdown(t,r,e,i),this.eventData(t,{targetMagnet:r}),this.dragMagnetStart(t,e,i)},magnetpointerdown:function(t,e,i,r){this.notify("element:magnet:pointerdown",t,e,i,r)},magnetpointermove:function(t,e,i,r){this.notify("element:magnet:pointermove",t,e,i,r)},magnetpointerup:function(t,e,i,r){this.notify("element:magnet:pointerup",t,e,i,r)},magnetpointerdblclick:function(t,e,i,r){this.notify("element:magnet:pointerdblclick",t,e,i,r)},magnetcontextmenu:function(t,e,i,r){this.notify("element:magnet:contextmenu",t,e,i,r)},dragStart:function(t,e,i){if(this.isDefaultInteractionPrevented(t))return;var r=this.getDelegatedView();if(!r||!r.can("elementMove"))return;this.eventData(t,{action:Wx,delegatedView:r});const o=r.model.position();r.eventData(t,{initialPosition:o,pointerOffset:o.difference(e,i),restrictedArea:this.paper.getRestrictedArea(r,e,i)})},dragMagnetStart:function(t,e,i){const{paper:r}=this,o=t.isPropagationStopped();if(o&&this.eventData(t,{preventPointerEvents:!0}),this.isDefaultInteractionPrevented(t)||!this.can("addLinkFromMagnet"))return;const{targetMagnet:n=t.currentTarget}=this.eventData(t);t.stopPropagation(),r.options.validateMagnet.call(r,this,n,t)?(r.options.magnetThreshold<=0&&this.dragLinkStart(t,n,e,i),this.eventData(t,{action:Yx})):o?this.dragStart(t,e,i):this.pointerdown(t,e,i)},drag:function(t,e,i){var r=this.paper,o=r.options.gridSize,n=this.model,s=this.eventData(t),{pointerOffset:a,restrictedArea:l,embedding:c}=s,d=vd(e+a.x,o),h=vd(i+a.y,o);n.position(d,h,{restrictedArea:l,deep:!0,ui:!0}),r.options.embeddingMode&&(c||(this.prepareEmbedding(s),c=!0),this.processEmbedding(s,t,e,i)),this.eventData(t,{embedding:c})},dragMagnet:function(t,e,i){this.dragLink(t,e,i)},dragEnd:function(t,e,i){var r=this.eventData(t);r.embedding&&this.finalizeEmbedding(r)},dragMagnetEnd:function(t,e,i){this.dragLinkEnd(t,e,i)},magnetpointerclick:function(t,e,i,r){var o=this.paper;o.eventData(t).mousemoved>o.options.clickThreshold||this.notify("element:magnet:pointerclick",t,e,i,r)}},{Flags:qx});Jf(Xx.prototype,ib);const Jx={TOOLS:Gx.Flags.TOOLS,RENDER:"RENDER",UPDATE:"UPDATE",LABELS:"LABELS",SOURCE:"SOURCE",TARGET:"TARGET",CONNECTOR:"CONNECTOR"},Qx=Gx.extend({className:function(){var t=Gx.prototype.className.apply(this).split(" ");return t.push("link"),t.join(" ")},_labelCache:null,_labelSelectors:null,_V:null,_dragData:null,metrics:null,decimalsRounding:2,initialize:function(){Gx.prototype.initialize.apply(this,arguments),this._labelCache={},this._labelSelectors={},this._V={},this.cleanNodesCache()},presentationAttributes:{markup:[Jx.RENDER],attrs:[Jx.UPDATE],router:[Jx.UPDATE],connector:[Jx.CONNECTOR],labels:[Jx.LABELS],labelMarkup:[Jx.LABELS],vertices:[Jx.UPDATE],source:[Jx.SOURCE,Jx.UPDATE],target:[Jx.TARGET,Jx.UPDATE]},initFlag:[Jx.RENDER,Jx.SOURCE,Jx.TARGET,Jx.TOOLS],UPDATE_PRIORITY:1,confirmUpdate:function(t,e){if(e||(e={}),this.hasFlag(t,Jx.SOURCE)){if(!this.updateEndProperties("source"))return t;t=this.removeFlag(t,Jx.SOURCE)}if(this.hasFlag(t,Jx.TARGET)){if(!this.updateEndProperties("target"))return t;t=this.removeFlag(t,Jx.TARGET)}const{paper:i,sourceView:r,targetView:o}=this;if(i&&(r&&!i.isViewMounted(r)||o&&!i.isViewMounted(o)))return t;if(this.hasFlag(t,Jx.RENDER))return this.render(),this.updateHighlighters(!0),this.updateTools(e),t=this.removeFlag(t,[Jx.RENDER,Jx.UPDATE,Jx.LABELS,Jx.TOOLS,Jx.CONNECTOR]),nb.test("isSafari")&&this.__fixSafariBug268376(),t;let n=!1;const{model:s}=this,{attributes:a}=s;let l=this.hasFlag(t,Jx.LABELS);l&&(this.onLabelsChange(s,a.labels,e),t=this.removeFlag(t,Jx.LABELS),n=!0);const c=this.hasFlag(t,Jx.UPDATE),d=this.hasFlag(t,Jx.CONNECTOR);return(c||d)&&(c?e.translateBy&&s.isRelationshipEmbeddedIn(e.translateBy)?this.translate(e.tx,e.ty):this.update():(this.updatePath(),this.updateDOM()),this.updateTools(e),t=this.removeFlag(t,[Jx.UPDATE,Jx.TOOLS,Jx.CONNECTOR]),l=!1,n=!0),l&&this.updateLabelPositions(),n&&this.updateHighlighters(),this.hasFlag(t,Jx.TOOLS)&&(this.updateTools(e),t=this.removeFlag(t,Jx.TOOLS)),t},__fixSafariBug268376:function(){const{el:t}=this,e=Array.from(t.childNodes),i=document.createDocumentFragment();for(let r=0,o=e.length;r<o;r++)t.removeChild(e[r]),i.appendChild(e[r]);t.appendChild(i)},requestConnectionUpdate:function(t){this.requestUpdate(this.getFlag(Jx.UPDATE),t)},isLabelsRenderRequired:function(t={}){const e=this.model.previous("labels");if(!e)return!0;if("propertyPathArray"in t&&"propertyValue"in t){var i=t.propertyPathArray||[],r=i.length;if(r>1)if(!!e[i[1]]){if(2===r)return"markup"in Object(t.propertyValue);if("markup"!==i[2])return!1}}return!0},onLabelsChange:function(t,e,i){this.isLabelsRenderRequired(i)?this.renderLabels():this.updateLabels()},render:function(){return this.vel.empty(),this.unmountLabels(),this._V={},this.renderMarkup(),this.renderLabels(),this.update(),this},renderMarkup:function(){var t=this.model,e=t.get("markup")||t.markup;if(!e)throw new Error("dia.LinkView: markup required");if(Array.isArray(e))return this.renderJSONMarkup(e);if("string"==typeof e)return this.renderStringMarkup(e);throw new Error("dia.LinkView: invalid markup")},renderJSONMarkup:function(t){var e=this.parseDOMJSON(t,this.el);this.selectors=e.selectors,this.vel.append(e.fragment)},renderStringMarkup:function(t){var e=lu(t);Array.isArray(e)||(e=[e]),this.vel.append(e)},_getLabelMarkup:function(t){if(t){if(Array.isArray(t))return this.parseDOMJSON(t,null);if("string"==typeof t)return this._getLabelStringMarkup(t);throw new Error("dia.linkView: invalid label markup")}},_getLabelStringMarkup:function(t){var e=lu(t),i=document.createDocumentFragment();if(Array.isArray(e))for(var r=0,o=e.length;r<o;r++){var n=e[r].node;i.appendChild(n)}else i.appendChild(e.node);return{fragment:i,selectors:{}}},_normalizeLabelMarkup:function(t){if(t){var e,i=t.fragment;if(!(t.fragment instanceof DocumentFragment&&t.fragment.hasChildNodes()))throw new Error("dia.LinkView: invalid label markup.");var r=i.childNodes;return(e=r.length>1||"G"!==r[0].nodeName.toUpperCase()?lu("g").append(i):lu(r[0])).addClass("label"),{node:e.node,selectors:t.selectors}}},renderLabels:function(){var t=this._V,e=t.labels,i=this._labelCache={},r=this._labelSelectors={},o=this.model,n=o.attributes.labels||[],s=n.length;if(0===s)return e&&e.remove(),this;e?e.empty():(e=t.labels=lu("g").addClass("labels"),this.options.labelsLayer&&(e.addClass(cg(bm(this,"className"))),e.attr("model-id",o.id)));for(var a=0;a<s;a++){var l,c,d=n[a],h=this._normalizeLabelMarkup(this._getLabelMarkup(d.markup));if(h)l=h.node,c=h.selectors;else{var u=o._builtins.defaultLabel,p=this._normalizeLabelMarkup(this._getLabelMarkup(u.markup)),f=o._getDefaultLabel(),m=this._normalizeLabelMarkup(this._getLabelMarkup(f.markup))||p;l=m.node,c=m.selectors}l.setAttribute("label-idx",a),e.append(l),i[a]=l;var g=this.selector;if(c[g])throw new Error("dia.LinkView: ambiguous label root selector.");c[g]=l,r[a]=c}return e.parent()||this.mountLabels(),this.updateLabels(),this},mountLabels:function(){const{el:t,paper:e,model:i,_V:r,options:o}=this,{labels:n}=r;if(!n||!i.hasLabels())return;const{node:s}=n;o.labelsLayer?e.getLayerView(o.labelsLayer).insertSortedNode(s,i.get("z")):s.parentNode!==t&&t.appendChild(s)},unmountLabels:function(){const{options:t,_V:e}=this;if(!e)return;const{labels:i}=e;i&&t.labelsLayer&&i.remove()},findLabelNodes:function(t,e){const i=this._labelCache[t];if(!i)return[];const r=this._labelSelectors[t];return this.findBySelector(e,i,r)},findLabelNode:function(t,e){const[i=null]=this.findLabelNodes(t,e);return i},_mergeLabelAttrs:function(t,e,i,r){if(null===e)return null;if(void 0===e){if(null===i)return null;if(void 0===i){if(t)return;return r}return t?i:Am({},r,i)}return t?Am({},i,e):Am({},r,i,e)},_mergeLabelSize:function(t,e){if(null===t)return null;if(void 0===t){if(null===e)return null;if(void 0===e)return;return e}return Am({},e,t)},updateLabels:function(){if(!this._V.labels)return this;for(var t=this.model,e=t.get("labels")||[],i=this.can("labelMove"),r=t._builtins.defaultLabel.attrs,o=t._getDefaultLabel(),n=o.markup,s=o.attrs,a=o.size,l=0,c=e.length;l<c;l++){var d=this._labelCache[l];d.setAttribute("cursor",i?"move":"default");var h=this._labelSelectors[l],u=e[l],p=u.markup,f=u.attrs,m=u.size,g=this._mergeLabelAttrs(p||n,f,s,r),v=this._mergeLabelSize(m,a);this.updateDOMSubtreeAttributes(d,g,{rootBBox:new ih(v),selectors:h})}return this},removeRedundantLinearVertices:function(t){const e=this.model,i=e.vertices(),r=[this.sourceAnchor,...i,this.targetAnchor],o=r.length,n=new ah(r);n.simplify({threshold:.001});const s=n.points.map((t=>t.toJSON())),a=s.length;return o===a?0:(e.vertices(s.slice(1,a-1),t),o-a)},getEndView:function(t){switch(t){case"source":return this.sourceView||null;case"target":return this.targetView||null;default:throw new Error("dia.LinkView: type parameter required.")}},getEndAnchor:function(t){switch(t){case"source":return new zd(this.sourceAnchor);case"target":return new zd(this.targetAnchor);default:throw new Error("dia.LinkView: type parameter required.")}},getEndConnectionPoint:function(t){switch(t){case"source":return new zd(this.sourcePoint);case"target":return new zd(this.targetPoint);default:throw new Error("dia.LinkView: type parameter required.")}},getEndMagnet:function(t){switch(t){case"source":var e=this.sourceView;if(!e)break;return this.sourceMagnet||e.el;case"target":var i=this.targetView;if(!i)break;return this.targetMagnet||i.el;default:throw new Error("dia.LinkView: type parameter required.")}},update:function(){return this.updateRoute(),this.updatePath(),this.updateDOM(),this},translate:function(t=0,e=0){const{route:i,path:r}=this;if(!i||!r)return;const o=new ah(i);o.translate(t,e),this.route=o.points,this.sourcePoint.offset(t,e),this.targetPoint.offset(t,e),this.sourceAnchor.offset(t,e),this.targetAnchor.offset(t,e),r.translate(t,e),this.updateDOM()},updateDOM(){const{el:t,model:e,selectors:i}=this;this.cleanNodesCache(),this.updateDOMSubtreeAttributes(t,e.attr(),{selectors:i}),this.updateLabelPositions(),this.options.perpendicular=null},updateRoute:function(){const{model:t}=this,e=t.vertices(),i=this.findAnchors(e),r=this.sourceAnchor=i.source,o=this.targetAnchor=i.target,n=this.findRoute(e);this.route=n;var s=this.findConnectionPoints(n,r,o);this.sourcePoint=s.source,this.targetPoint=s.target},updatePath:function(){const{route:t,sourcePoint:e,targetPoint:i}=this,r=this.findPath(t,e.clone(),i.clone());this.path=r},findAnchorsOrdered:function(t,e,i,r){var o,n,s,a,l=this.model,c=l.get(t),d=l.get(i),h=this.getEndView(t),u=this.getEndView(i),p=this.getEndMagnet(t),f=this.getEndMagnet(i);h?(s=e?new zd(e):u?f:new zd(d),o=this.getAnchor(c.anchor,h,p,s,t)):o=new zd(c),u?(a=new zd(r||o),n=this.getAnchor(d.anchor,u,f,a,i)):n=new zd(d);var m={};return m[t]=o,m[i]=n,m},findAnchors:function(t){var e=this.model,i=t[0],r=t[t.length-1];return e.target().priority&&!e.source().priority?this.findAnchorsOrdered("target",r,"source",i):this.findAnchorsOrdered("source",i,"target",r)},findConnectionPoints:function(t,e,i){var r,o,n,s,a=t[0],l=t[t.length-1],c=this.model,d=c.get("source"),h=c.get("target"),u=this.sourceView,p=this.targetView,f=this.paper.options;if(u&&!u.isNodeConnection(this.sourceMagnet)){r=this.sourceMagnet||u.el;var m=d.connectionPoint||f.defaultConnectionPoint,g=new Vd(a||i,e);n=this.getConnectionPoint(m,u,r,g,"source")}else n=e;if(p&&!p.isNodeConnection(this.targetMagnet)){o=this.targetMagnet||p.el;var v=h.connectionPoint||f.defaultConnectionPoint,b=new Vd(l||e,i);s=this.getConnectionPoint(v,p,o,b,"target")}else s=i;return{source:n,target:s}},getAnchor:function(t,e,i,r,o){var n,s=e.isNodeConnection(i),a=this.paper.options;if(t||(t=s?a.defaultLinkAnchor:this.options.perpendicular?{name:"perpendicular"}:a.defaultAnchor),!t)throw new Error("Anchor required.");if("function"==typeof t)n=t;else{var l=t.name;if("function"!=typeof(n=a[s?"linkAnchorNamespace":"anchorNamespace"][l]))throw new Error("Unknown anchor: "+l)}var c=n.call(this,e,i,r,t.args||{},o,this);return c?c.round(this.decimalsRounding):new zd},getConnectionPoint:function(t,e,i,r,o){var n,s,a=r.end,l=this.paper.options;if(!t)return a;if("function"==typeof t)s=t;else{var c=t.name;if("function"!=typeof(s=l.connectionPointNamespace[c]))throw new Error("Unknown connection point: "+c)}return(n=s.call(this,r,e,i,t.args||{},o,this))?n.round(this.decimalsRounding):a},_getDefaultLabelPositionProperty:function(){var t=this.model,e=t._builtins.defaultLabel.position,i=t._getDefaultLabel(),r=this._normalizeLabelPosition(i.position);return Am({},e,r)},_normalizeLabelPosition:function(t){return"number"==typeof t?{distance:t,offset:null,angle:0,args:null}:t},_mergeLabelPositionProperty:function(t,e){return null===t?null:void 0===t?null===e?null:e:Am({},e,t)},updateLabelPositions:function(){if(!this._V.labels)return this;if(!this.path)return this;var t=this.model.get("labels")||[];if(!t.length)return this;for(var e=this._getDefaultLabelPositionProperty(),i=0,r=t.length;i<r;i++){var o=this._labelCache[i];if(o){var n=t[i],s=this._normalizeLabelPosition(n.position),a=this._mergeLabelPositionProperty(s,e),l=this._getLabelTransformationMatrix(a);o.setAttribute("transform",lu.matrixToTransformString(l)),this._cleanLabelMatrices(i)}}return this},_cleanLabelMatrices:function(t){const{metrics:e,_labelSelectors:i}=this,r=i[t];if(r)for(let t in r){const{id:i}=r[t];i&&i in e&&delete e[i].magnetMatrix}},updateEndProperties:function(t){const{model:e,paper:i}=this,r=`${t}View`,o=e.get(t),n=o&&o.id;if(!n)return this[r]=null,this.updateEndMagnet(t),!0;const s=i.getModelById(n);if(!s)throw new Error("LinkView: invalid "+t+" cell.");const a=s.findView(i);return!!a&&(this[r]=a,this.updateEndMagnet(t),!0)},updateEndMagnet:function(t){const e=`${t}Magnet`,i=this.getEndView(t);if(i){let r=i.getMagnetFromLinkEnd(this.model.get(t));r===i.el&&(r=null),this[e]=r}else this[e]=null},_getLabelPositionProperty:function(t){return this.model.label(t).position||{}},_getLabelPositionAngle:function(t){return this._getLabelPositionProperty(t).angle||0},_getLabelPositionArgs:function(t){return this._getLabelPositionProperty(t).args},_getDefaultLabelPositionArgs:function(){return(this.model._getDefaultLabel().position||{}).args},_mergeLabelPositionArgs:function(t,e){return null===t?null:void 0===t?null===e?null:e:Am({},e,t)},addLabel:function(t,e,i,r){var o,n,s,a=0;"number"!=typeof t?(o=t.x,n=t.y,"number"==typeof e?(a=e,s=i):s=e):(o=t,n=e,"number"==typeof i?(a=i,s=r):s=i);var l=this._getDefaultLabelPositionArgs(),c=s,d=this._mergeLabelPositionArgs(c,l),h={position:this.getLabelPosition(o,n,a,d)};return this.model.insertLabel(-1,h,s),-1},addVertex:function(t,e,i){var r="number"!=typeof t,o=r?t.x:t,n=r?t.y:e,s=r?e:i,a={x:o,y:n},l=this.getVertexIndex(o,n);return this.model.insertVertex(l,a,s),l},sendToken:function(t,e,i){var r,o,n;Wf(e)?(r=e.duration,o="reverse"===e.direction,n=e.connection):(r=e,o=!1,n=null);var s={dur:(r=r||1e3)+"ms",repeatCount:1,calcMode:"linear",fill:"freeze"};o&&(s.keyPoints="1;0",s.keyTimes="0;1");var a,l=lu(t);if("string"==typeof n)a=this.findNode(n);else{var c=this._V;a=c.connection?c.connection.node:this.el.querySelector("path")}if(!(a instanceof SVGPathElement))throw new Error("dia.LinkView: token animation requires a valid connection path.");l.appendTo(this.paper.cells).animateAlongPath(s,a),setTimeout(function(t,e){return function(){t.remove(),"function"==typeof e&&e()}}(l,i),r)},findRoute:function(t){t||(t=[]);var e=this.paper.options.routerNamespace||mx,i=this.model.router(),r=this.paper.options.defaultRouter;if(!i){if(!r)return t.map(zd);i=r}var o=lm(i)?i:e[i.name];if(!lm(o))throw new Error('dia.LinkView: unknown router: "'+i.name+'".');var n=i.args||{},s=o.call(this,t,n,this);return s||t.map(zd)},findPath:function(t,e,i){var r=this.paper.options.connectorNamespace||Mb,o=this.model.connector(),n=this.paper.options.defaultConnector;o||(o=n||{});var s=lm(o)?o:r[o.name];if(!lm(s))throw new Error('dia.LinkView: unknown connector: "'+o.name+'".');var a=om(o.args||{});a.raw=!0;var l=s.call(this,e,i,t,a,this);return"string"==typeof l&&(l=new mh(lu.normalizePathData(l))),l},getConnection:function(){var t=this.path;return t?t.clone():null},getSerializedConnection:function(){var t=this.path;if(!t)return null;var e=this.metrics;if(e.hasOwnProperty("data"))return e.data;var i=t.serialize();return e.data=i,i},getConnectionSubdivisions:function(){var t=this.path;if(!t)return null;var e=this.metrics;if(e.hasOwnProperty("segmentSubdivisions"))return e.segmentSubdivisions;var i=t.getSegmentSubdivisions();return e.segmentSubdivisions=i,i},getConnectionLength:function(){var t=this.path;if(!t)return 0;var e=this.metrics;if(e.hasOwnProperty("length"))return e.length;var i=t.length({segmentSubdivisions:this.getConnectionSubdivisions()});return e.length=i,i},getPointAtLength:function(t){var e=this.path;return e?e.pointAtLength(t,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getPointAtRatio:function(t){var e=this.path;return e?(_g(t)&&(t=parseFloat(t)/100),e.pointAt(t,{segmentSubdivisions:this.getConnectionSubdivisions()})):null},getTangentAtLength:function(t){var e=this.path;return e?e.tangentAtLength(t,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getTangentAtRatio:function(t){var e=this.path;return e?e.tangentAt(t,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getClosestPoint:function(t){var e=this.path;return e?e.closestPoint(t,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getClosestPointLength:function(t){var e=this.path;return e?e.closestPointLength(t,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getClosestPointRatio:function(t){var e=this.path;return e?e.closestPointNormalizedLength(t,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getLabelPosition:function(t,e,i,r){var o,n={},s=0;"number"==typeof i?(s=i,o=r):o=i,o&&(n.args=o);var a,l,c=!(o&&o.absoluteDistance),d=o&&o.absoluteDistance&&o.reverseDistance,h=o&&o.absoluteOffset,u=this.path,p={segmentSubdivisions:this.getConnectionSubdivisions()},f=new zd(t,e),m=u.closestPointT(f,p),g=u.lengthAtT(m,p);if(c&&(g=g/this.getConnectionLength()||0),d&&(g=-1*(this.getConnectionLength()-g)||1),n.distance=g,h||(a=u.tangentAtT(m)),a)l=a.pointOffset(f);else{var v=u.pointAtT(m),b=f.difference(v);l={x:b.x,y:b.y}}return n.offset=l,n.angle=s,n},_getLabelTransformationMatrix:function(t){var e,i=0,r={};if("number"==typeof t)e=t;else{if("number"!=typeof t.distance)throw new Error("dia.LinkView: invalid label position distance.");r=t.args||{},e=t.distance,i=t.angle||0}var o=e>0&&e<=1,n=0,s={x:0,y:0};if(t.offset){var a=t.offset;"number"==typeof a&&(n=a),a.x&&(s.x=a.x),a.y&&(s.y=a.y)}var l,c=0!==s.x||0!==s.y||0===n,d=r.keepGradient,h=r.ensureLegibility,u=this.path,p={segmentSubdivisions:this.getConnectionSubdivisions()},f=o?e*this.getConnectionLength():e,m=u.tangentAtLength(f,p),g=i;if(m){if(c)(l=m.start.clone()).offset(s);else{var v=m.clone();v.rotate(m.start,-90),v.setLength(n),l=v.end}d&&(g=m.angle()+i,h&&(g=gd((g+90)%180-90)))}else l=u.start.clone(),c&&l.offset(s);return lu.createSVGMatrix().translate(l.x,l.y).rotate(g)},getLabelCoordinates:function(t){var e=this._getLabelTransformationMatrix(t);return new zd(e.e,e.f)},getVertexIndex:function(t,e){for(var i=this.model.vertices(),r=this.getClosestPointLength(new zd(t,e)),o=0,n=i.length;o<n;o++){var s=i[o];if(r<this.getClosestPointLength(s))break}return o},notifyPointerdown(t,e,i){Gx.prototype.pointerdown.call(this,t,e,i),this.notify("link:pointerdown",t,e,i)},notifyPointermove(t,e,i){Gx.prototype.pointermove.call(this,t,e,i),this.notify("link:pointermove",t,e,i)},notifyPointerup(t,e,i){this.notify("link:pointerup",t,e,i),Gx.prototype.pointerup.call(this,t,e,i)},pointerdblclick:function(t,e,i){Gx.prototype.pointerdblclick.apply(this,arguments),this.notify("link:pointerdblclick",t,e,i)},pointerclick:function(t,e,i){Gx.prototype.pointerclick.apply(this,arguments),this.notify("link:pointerclick",t,e,i)},contextmenu:function(t,e,i){Gx.prototype.contextmenu.apply(this,arguments),this.notify("link:contextmenu",t,e,i)},pointerdown:function(t,e,i){this.notifyPointerdown(t,e,i),this.dragStart(t,e,i)},pointermove:function(t,e,i){var r=this._dragData;switch(r&&this.eventData(t,r),this.eventData(t).action){case"label-move":this.dragLabel(t,e,i);break;case"arrowhead-move":this.dragArrowhead(t,e,i);break;case"move":this.drag(t,e,i)}r&&Jf(r,this.eventData(t)),this.notifyPointermove(t,e,i)},pointerup:function(t,e,i){var r=this._dragData;switch(r&&(this.eventData(t,r),this._dragData=null),this.eventData(t).action){case"label-move":this.dragLabelEnd(t,e,i);break;case"arrowhead-move":this.dragArrowheadEnd(t,e,i);break;case"move":this.dragEnd(t,e,i)}this.notifyPointerup(t,e,i),this.checkMouseleave(t)},mouseover:function(t){Gx.prototype.mouseover.apply(this,arguments),this.notify("link:mouseover",t)},mouseout:function(t){Gx.prototype.mouseout.apply(this,arguments),this.notify("link:mouseout",t)},mouseenter:function(t){Gx.prototype.mouseenter.apply(this,arguments),this.notify("link:mouseenter",t)},mouseleave:function(t){Gx.prototype.mouseleave.apply(this,arguments),this.notify("link:mouseleave",t)},mousewheel:function(t,e,i,r){Gx.prototype.mousewheel.apply(this,arguments),this.notify("link:mousewheel",t,e,i,r)},onlabel:function(t,e,i){this.notifyPointerdown(t,e,i),this.dragLabelStart(t,e,i),this.eventData(t).stopPropagation&&t.stopPropagation()},dragLabelStart:function(t,e,i){if(this.can("labelMove")){if(this.isDefaultInteractionPrevented(t))return;var r=t.currentTarget,o=parseInt(r.getAttribute("label-idx"),10),n=this._getDefaultLabelPositionProperty(),s=this._normalizeLabelPosition(this._getLabelPositionProperty(o)),a=this._mergeLabelPositionProperty(s,n),l=this.getLabelCoordinates(a),c=l.x-e,d=l.y-i,h=this._getLabelPositionAngle(o),u=this._getLabelPositionArgs(o),p=this._getDefaultLabelPositionArgs(),f=this._mergeLabelPositionArgs(u,p);this.eventData(t,{action:"label-move",labelIdx:o,dx:c,dy:d,positionAngle:h,positionArgs:f,stopPropagation:!0})}else this.eventData(t,{stopPropagation:!0});this.paper.delegateDragEvents(this,t.data)},dragArrowheadStart:function(t,e,i){if(this.can("arrowheadMove")){var r=t.target.getAttribute("end"),o=this.startArrowheadMove(r,{ignoreBackwardsCompatibility:!0});this.eventData(t,o)}},dragStart:function(t,e,i){this.isDefaultInteractionPrevented(t)||this.can("linkMove")&&this.eventData(t,{action:"move",dx:e,dy:i})},dragLabel:function(t,e,i){var r=this.eventData(t),o={position:this.getLabelPosition(e+r.dx,i+r.dy,r.positionAngle,r.positionArgs)};this.paper.options.snapLabels&&delete o.position.offset;const n={ui:!0};this.paper.isAsync()&&"touchmove"===t.type&&(n.async=!1),this.model.label(r.labelIdx,o,n)},dragArrowhead:function(t,e,i){if(this.paper.options.snapLinks){!this._snapArrowhead(t,e,i)&&this.paper.options.snapLinksSelf&&this._snapArrowheadSelf(t,e,i)}else this.paper.options.snapLinksSelf?this._snapArrowheadSelf(t,e,i):this._connectArrowhead(this.getEventTarget(t),e,i,this.eventData(t))},drag:function(t,e,i){var r=this.eventData(t);this.model.translate(e-r.dx,i-r.dy,{ui:!0}),this.eventData(t,{dx:e,dy:i})},dragLabelEnd:function(){},dragArrowheadEnd:function(t,e,i){var r=this.eventData(t),o=this.paper;o.options.snapLinks?this._snapArrowheadEnd(r):this._connectArrowheadEnd(r,e,i),o.linkAllowed(this)?(this._finishEmbedding(r),this._notifyConnectEvent(r,t)):this._disallow(r),this._afterArrowheadMove(r)},dragEnd:function(){},_disallow:function(t){if("remove"===t.whenNotAllowed)this.model.remove({ui:!0});else this.model.set(t.arrowhead,t.initialEnd,{ui:!0})},_finishEmbedding:function(t){this.paper.options.embeddingMode&&this.model.reparent()&&(t.z=null)},_notifyConnectEvent:function(t,e){var i=t.arrowhead,r=t.initialEnd,o=this.model.prop(i);if(o&&!ob.endsEqual(r,o)){var n=this.paper;r.id&&this.notify("link:disconnect",e,n.findViewByModel(r.id),t.initialMagnet,i),o.id&&this.notify("link:connect",e,n.findViewByModel(o.id),t.magnetUnderPointer,i)}},_snapToPoints:function(t,e,i){let r=null,o=1/0,n=null,s=1/0,a=t.x,l=t.y;for(let i=0;i<e.length;i++){const a=Math.abs(e[i].x-t.x);a<o&&(o=a,r=e[i]);const l=Math.abs(e[i].y-t.y);l<s&&(s=l,n=e[i])}return o<i&&(a=r.x),s<i&&(l=n.y),{x:a,y:l}},_snapArrowheadSelf:function(t,e,i){const{paper:r,model:o}=this,{snapLinksSelf:n}=r.options,s=this.eventData(t),a=n.radius||20,l=[this.getEndAnchor("source"===s.arrowhead?"target":"source"),...o.vertices()],c=this._snapToPoints({x:e,y:i},l,a),d=r.localToClientPoint(c);this._connectArrowhead(document.elementFromPoint(d.x,d.y),c.x,c.y,this.eventData(t))},_snapArrowhead:function(t,e,i){const{paper:r}=this,{snapLinks:o,connectionStrategy:n}=r.options,s=this.eventData(t);let a=!1;var l=o.radius||50,c=r.findViewsInArea({x:e-l,y:i-l,width:2*l,height:2*l}),d=s.closestView||null,h=s.closestMagnet||null,u=s.magnetProxy||null;s.closestView=s.closestMagnet=s.magnetProxy=null;var p,f=Number.MAX_VALUE,m=new zd(e,i);c.forEach((function(t){const e=[];"false"!==t.el.getAttribute("magnet")&&e.push({bbox:t.model.getBBox(),magnet:t.el}),t.$("[magnet]").toArray().forEach((i=>{e.push({bbox:t.getNodeBBox(i),magnet:i})})),e.forEach((e=>{const{magnet:i,bbox:o}=e,n=o.center().squaredDistance(m);if(n<f){(h===i||r.options.validateConnection.apply(r,s.validateConnectionArgs(t,t.el===i?null:i)))&&(f=n,s.closestView=t,s.closestMagnet=i)}}))}),this);var g=null,v=s.closestView,b=s.closestMagnet;b&&(g=s.magnetProxy=v.findProxyNode(b,"highlighter"));var y=s.arrowhead,x=h!==b;if(d&&x&&d.unhighlight(u,{connecting:!0,snapping:!0}),v){const{prevEnd:t,prevX:r,prevY:o}=s;if(s.prevX=e,s.prevY=i,a=!0,!x&&("function"!=typeof n||r===e&&o===i))return a;if(p=v.getLinkEnd(b,e,i,this.model,y),!x&&am(t,p))return a;s.prevEnd=p,x&&v.highlight(g,{connecting:!0,snapping:!0})}else p={x:e,y:i};return this.model.set(y,p||{x:e,y:i},{ui:!0}),d&&this.notify("link:snap:disconnect",t,d,h,y),v&&this.notify("link:snap:connect",t,v,b,y),a},_snapArrowheadEnd:function(t){var e=t.closestView,i=t.closestMagnet;e&&i&&(e.unhighlight(t.magnetProxy,{connecting:!0,snapping:!0}),t.magnetUnderPointer=e.findMagnet(i)),t.closestView=t.closestMagnet=null},_connectArrowhead:function(t,e,i,r){const{paper:o,model:n}=this;if(r.eventTarget!==t){r.magnetProxy&&r.viewUnderPointer.unhighlight(r.magnetProxy,{connecting:!0});const e=r.viewUnderPointer=o.findView(t);if(e){const i=r.magnetUnderPointer=e.findMagnet(t),n=r.magnetProxy=e.findProxyNode(i,"highlighter");i&&this.paper.options.validateConnection.apply(o,r.validateConnectionArgs(e,i))?n&&e.highlight(n,{connecting:!0}):(r.magnetUnderPointer=null,r.magnetProxy=null)}else r.magnetUnderPointer=null,r.magnetProxy=null}r.eventTarget=t,n.set(r.arrowhead,{x:e,y:i},{ui:!0})},_connectArrowheadEnd:function(t={},e,i){const{model:r}=this,{viewUnderPointer:o,magnetUnderPointer:n,magnetProxy:s,arrowhead:a}=t;if(!n||!s||!o)return;o.unhighlight(s,{connecting:!0});const l=o.getLinkEnd(n,e,i,r,a);r.set(a,l,{ui:!0})},_beforeArrowheadMove:function(t){t.z=this.model.get("z"),this.model.toFront();var e=this.el.style;t.pointerEvents=e.pointerEvents,e.pointerEvents="none",this.paper.options.markAvailable&&this._markAvailableMagnets(t)},_afterArrowheadMove:function(t){null!==t.z&&(this.model.set("z",t.z,{ui:!0}),t.z=null),this.el.style.pointerEvents=t.pointerEvents,this.paper.options.markAvailable&&this._unmarkAvailableMagnets(t)},_createValidateConnectionArgs:function(t){var e,i=[];i[4]=t,i[5]=this;var r=0,o=0;"source"===t?(r=2,e="target"):(o=2,e="source");var n=this.model.get(e);if(n.id){var s=i[r]=this.paper.findViewByModel(n.id),a=s.getMagnetFromLinkEnd(n);a===s.el&&(a=void 0),i[r+1]=a}return function(t,e){return i[o]=t,i[o+1]=t.el===e?void 0:e,i}},_markAvailableMagnets:function(t){function e(t,e){var i=t.paper;return i.options.validateConnection.apply(i,this.validateConnectionArgs(t,e))}var i=this.paper,r=i.model.getCells();t.marked={};for(var o=0,n=r.length;o<n;o++){var s=r[o].findView(i);if(s){var a=Array.prototype.slice.call(s.el.querySelectorAll("[magnet]"));"false"!==s.el.getAttribute("magnet")&&a.push(s.el);var l=a.filter(e.bind(t,s));if(l.length>0){for(var c=0,d=l.length;c<d;c++)s.highlight(l[c],{magnetAvailability:!0});s.highlight(null,{elementAvailability:!0}),t.marked[s.model.id]=l}}}},_unmarkAvailableMagnets:function(t){for(var e,i,r=Object.keys(t.marked),o=0,n=r.length;o<n;o++){e=r[o],i=t.marked[e];var s=this.paper.findViewByModel(e);if(s){for(var a=0,l=i.length;a<l;a++)s.unhighlight(i[a],{magnetAvailability:!0});s.unhighlight(null,{elementAvailability:!0})}}t.marked=null},startArrowheadMove:function(t,e){e||(e={});var i={action:"arrowhead-move",arrowhead:t,whenNotAllowed:e.whenNotAllowed||"revert",initialMagnet:this[t+"Magnet"]||(this[t+"View"]?this[t+"View"].el:null),initialEnd:om(this.model.get(t)),validateConnectionArgs:this._createValidateConnectionArgs(t)};return this._beforeArrowheadMove(i),!0!==e.ignoreBackwardsCompatibility&&(this._dragData=i),i},onMount:function(){Gx.prototype.onMount.apply(this,arguments),this.mountLabels()},onDetach:function(){Gx.prototype.onDetach.apply(this,arguments),this.unmountLabels()},onRemove:function(){Gx.prototype.onRemove.apply(this,arguments),this.unmountLabels()}},{Flags:Jx});Object.defineProperty(Qx.prototype,"sourceBBox",{enumerable:!0,get:function(){var t=this.sourceView;if(!t){var e=this.model.source();return new ih(e.x,e.y)}var i=this.sourceMagnet;return t.isNodeConnection(i)?new ih(this.sourceAnchor):t.getNodeBBox(i||t.el)}}),Object.defineProperty(Qx.prototype,"targetBBox",{enumerable:!0,get:function(){var t=this.targetView;if(!t){var e=this.model.target();return new ih(e.x,e.y)}var i=this.targetMagnet;return t.isNodeConnection(i)?new ih(this.targetAnchor):t.getNodeBBox(i||t.el)}});const Kx=zx.extend({style:{"pointer-events":"none"},_gridCache:null,_gridSettings:null,init(){zx.prototype.init.apply(this,arguments);const{options:{paper:t}}=this;this._gridCache=null,this._gridSettings=[],this.listenTo(t,"transform resize",this.updateGrid)},setGrid(t){this._gridSettings=this.getGridSettings(t),this.renderGrid()},getGridSettings(t){const e=[];if(t){(Array.isArray(t)?t:[t||{}]).forEach((t=>{e.push(...this._resolveDrawGridOption(t))}))}return e},removeGrid(){const{_gridCache:t}=this;t&&(t.root.remove(),this._gridCache=null)},renderGrid(){const{options:{paper:t}}=this,{_gridSettings:e}=this;if(this.removeGrid(),0===e.length)return;const i=t.options.drawGridSize||t.options.gridSize;if(i<=1)return;const r=this._getGridRefs();e.forEach(((e,o)=>{const n=this._getPatternId(o),s=Am({},e),{scaleFactor:a=1}=s;let l;s.width=i*a||1,s.height=i*a||1,r.exist(n)?l=r.get(n):(l=lu("pattern",{id:n,patternUnits:"userSpaceOnUse"},lu(s.markup)),r.add(n,l)),lm(s.render)&&s.render(l.node.firstChild,s,t),l.attr({width:s.width,height:s.height})})),r.root.appendTo(this.el),this.updateGrid()},updateGrid(){const{_gridCache:t,_gridSettings:e,options:{paper:i}}=this;if(!t)return;const{root:r,patterns:o}=t,{x:n,y:s,width:a,height:l}=i.getArea();r.attr({x:n,y:s,width:a,height:l});for(const t in o){o[t].attr({x:-n,y:-s})}e.forEach(((t,e)=>{if(lm(t.update)){const r=o[this._getPatternId(e)];t.update(r.node.firstChild,t,i)}}))},_getPatternId(t){return`pattern_${this.options.paper.cid}_${t}`},_getGridRefs(){let{_gridCache:t}=this;if(t)return t;const e=lu("defs"),i=lu("svg",{width:"100%",height:"100%"},[e]);return t=this._gridCache={root:i,patterns:{},add:function(t,r){const o=lu("rect",{width:"100%",height:"100%",fill:`url(#${t})`});e.append(r),i.append(o),this.patterns[t]=r},get:function(t){return this.patterns[t]},exist:function(t){return void 0!==this.patterns[t]}},t},_resolveDrawGridOption(t){var e=this.options.patterns;if(Xf(t)&&Array.isArray(e[t]))return e[t].map((function(t){return Jf({},t)}));var i=t||{args:[{}]},r=Array.isArray(i),o=i.name;if(r||o||i.markup||(o="dot"),o&&Array.isArray(e[o])){var n=e[o].map((function(t){return Jf({},t)})),s=Array.isArray(i.args)?i.args:[i.args||{}];Qf(s[0],ym(t,"args"));for(var a=0;a<s.length;a++)n[a]&&Jf(n[a],s[a]);return n}return r?i:[i]}}),Zx={NONE:"sorting-none",APPROX:"sorting-approximate",EXACT:"sorting-exact"},tw=1/0,ew=9007199254740991,iw=Gx.Highlighting,rw={[iw.DEFAULT]:{name:"stroke",options:{padding:3}},[iw.MAGNET_AVAILABILITY]:{name:"addClass",options:{className:"available-magnet"}},[iw.ELEMENT_AVAILABILITY]:{name:"addClass",options:{className:"available-cell"}}},ow=[{name:Dx.GRID},{name:Dx.BACK},{name:Dx.CELLS},{name:Dx.LABELS},{name:Dx.FRONT},{name:Dx.TOOLS}],nw=Bb.extend({className:"paper",options:{width:800,height:600,gridSize:1,drawGrid:!1,drawGridSize:null,background:!1,elementView:Xx,linkView:Qx,snapLabels:!1,snapLinks:!1,snapLinksSelf:!1,labelsLayer:!1,multiLinks:!0,guard:function(t,e){return!1},highlighting:rw,preventContextMenu:!0,preventDefaultBlankAction:!0,preventDefaultViewAction:!0,restrictTranslate:!1,markAvailable:!1,defaultLink:function(){const{cellNamespace:t}=this.model.get("cells"),e=ug(t,["standard","Link"]);if(!e)throw new Error("dia.Paper: no default link model found. Use `options.defaultLink` to specify a default link model.");return new e},defaultConnector:{name:"normal"},defaultRouter:{name:"normal"},defaultAnchor:{name:"center"},defaultLinkAnchor:{name:"connectionRatio"},defaultConnectionPoint:{name:"boundary"},connectionStrategy:null,validateMagnet:function(t,e,i){return"passive"!==e.getAttribute("magnet")},validateConnection:function(t,e,i,r,o,n){return("target"===o?i:t)instanceof Xx},embeddingMode:!1,validateEmbedding:function(t,e){return!0},validateUnembedding:function(t){return!0},findParentBy:"bbox",frontParentOnly:!0,interactive:{labelMove:!1},linkPinning:!0,allowLink:null,clickThreshold:0,moveThreshold:0,magnetThreshold:0,sorting:Zx.APPROX,frozen:!1,autoFreeze:!1,onViewUpdate:function(t,e,i,r,o){e&(t.FLAG_INSERT|t.FLAG_REMOVE)||r.mounting||r.isolate||o.requestConnectedLinksUpdate(t,i,r)},onViewPostponed:function(t,e,i){return i.forcePostponedViewUpdate(t,e)},beforeRender:null,afterRender:null,viewport:null,cellViewNamespace:null,routerNamespace:null,connectorNamespace:null,highlighterNamespace:sy,anchorNamespace:$x,linkAnchorNamespace:xx,connectionPointNamespace:gy,overflow:!1},events:{dblclick:"pointerdblclick",dbltap:"pointerdblclick",contextmenu:"contextmenu",mousedown:"pointerdown",touchstart:"pointerdown",mouseover:"mouseover",mouseout:"mouseout",mouseenter:"mouseenter",mouseleave:"mouseleave",wheel:"mousewheel","mouseenter .joint-cell":"mouseenter","mouseleave .joint-cell":"mouseleave","mouseenter .joint-tools":"mouseenter","mouseleave .joint-tools":"mouseleave","dblclick .joint-cell [magnet]":"magnetpointerdblclick","contextmenu .joint-cell [magnet]":"magnetcontextmenu","mousedown .joint-link .label":"onlabel","touchstart .joint-link .label":"onlabel","dragstart .joint-cell image":"onImageDragStart"},documentEvents:{mousemove:"pointermove",touchmove:"pointermove",mouseup:"pointerup",touchend:"pointerup",touchcancel:"pointerup"},stylesheet:"\n        .joint-element .scalable * {\n            vector-effect: non-scaling-stroke;\n        }\n    ",svg:null,viewport:null,defs:null,tools:null,layers:null,_viewportMatrix:null,_viewportTransformString:null,_updates:null,_layers:null,SORT_DELAYING_BATCHES:["add","to-front","to-back"],UPDATE_DELAYING_BATCHES:["translate"],FORM_CONTROL_TAG_NAMES:["TEXTAREA","INPUT","BUTTON","SELECT","OPTION"],GUARDED_TAG_NAMES:["SELECT"],MIN_SCALE:1e-6,init:function(){const{options:t}=this;t.cellViewNamespace||(t.cellViewNamespace="undefined"!=typeof joint&&vm(joint,"shapes")?joint.shapes:null);const e=this.model=t.model||new Nx;this._layers={},this.cloneOptions(),this.render(),this._setDimensions(),this.startListening(),this._views={},this._mw_evt_buffer={event:null,deltas:[]},this.resetViews(e.attributes.cells.models),!this.isFrozen()&&this.isAsync()&&this.updateViewsAsync()},_resetUpdates:function(){return this._updates&&this._updates.id&&yg(this._updates.id),this._updates={id:null,priorities:[{},{},{}],unmountedCids:[],mountedCids:[],unmounted:{},mounted:{},count:0,keyFrozen:!1,freezeKey:null,sort:!1,disabled:!1,idle:!1}},startListening:function(){var t=this.model;this.listenTo(t,"add",this.onCellAdded).listenTo(t,"remove",this.onCellRemoved).listenTo(t,"change",this.onCellChange).listenTo(t,"reset",this.onGraphReset).listenTo(t,"sort",this.onGraphSort).listenTo(t,"batch:stop",this.onGraphBatchStop),this.on("cell:highlight",this.onCellHighlight).on("cell:unhighlight",this.onCellUnhighlight).on("transform",this.update)},onCellAdded:function(t,e,i){var r=i.position;this.isAsync()||!Yf(r)?this.renderView(t,i):(i.maxPosition===r&&this.freeze({key:"addCells"}),this.renderView(t,i),0===r&&this.unfreeze({key:"addCells"}))},onCellRemoved:function(t,e,i){const r=this.findViewByModel(t);r&&this.requestViewUpdate(r,r.FLAG_REMOVE,r.UPDATE_PRIORITY,i)},onCellChange:function(t,e){if(t!==this.model.attributes.cells&&t.hasChanged("z")&&this.options.sorting===Zx.APPROX){const i=this.findViewByModel(t);i&&this.requestViewUpdate(i,i.FLAG_INSERT,i.UPDATE_PRIORITY,e)}},onGraphReset:function(t,e){this.resetLayers(),this.resetViews(t.models,e)},onGraphSort:function(){this.model.hasActiveBatch(this.SORT_DELAYING_BATCHES)||this.sortViews()},onGraphBatchStop:function(t){if(!this.isFrozen()){var e=t&&t.batchName,i=this.model;if(!this.isAsync()){var r=this.UPDATE_DELAYING_BATCHES;r.includes(e)&&!i.hasActiveBatch(r)&&this.updateViews(t)}var o=this.SORT_DELAYING_BATCHES;o.includes(e)&&!i.hasActiveBatch(o)&&this.sortViews()}},cloneOptions:function(){const{options:t}=this,{defaultConnector:e,defaultRouter:i,defaultConnectionPoint:r,defaultAnchor:o,defaultLinkAnchor:n,highlighting:s,cellViewNamespace:a,interactive:l}=t;!a&&"undefined"!=typeof joint&&vm(joint,"shapes")&&(t.cellViewNamespace=joint.shapes),lm(e)||(t.defaultConnector=nm(e)),lm(i)||(t.defaultRouter=nm(i)),lm(r)||(t.defaultConnectionPoint=nm(r)),lm(o)||(t.defaultAnchor=nm(o)),lm(n)||(t.defaultLinkAnchor=nm(n)),cm(l)&&(t.interactive=Jf({},l)),cm(s)&&(t.highlighting=Zf({},s,rw))},children:function(){var t=lu.namespace;return[{namespaceURI:t.xhtml,tagName:"div",className:cg("paper-background"),selector:"background",style:{position:"absolute",inset:0}},{namespaceURI:t.svg,tagName:"svg",attributes:{width:"100%",height:"100%","xmlns:xlink":t.xlink},selector:"svg",style:{position:"absolute",inset:0},children:[{tagName:"defs",selector:"defs"},{tagName:"g",className:cg("layers"),selector:"layers"}]}]},hasLayerView(t){return t in this._layers},getLayerView(t){const{_layers:e}=this;if(t in e)return e[t];throw new Error(`dia.Paper: Unknown layer "${t}"`)},getLayerNode(t){return this.getLayerView(t).el},render:function(){this.renderChildren();const{el:t,childNodes:e,options:i,stylesheet:r}=this,{svg:o,defs:n,layers:s}=e;return t.style.position="relative",o.style.overflow=i.overflow?"visible":"hidden",this.svg=o,this.defs=n,this.layers=s,this.renderLayers(),lu.ensureId(o),this.addStylesheet(r),i.background&&this.drawBackground(i.background),i.drawGrid&&this.setGrid(i.drawGrid),this},addStylesheet:function(t){t&&lu(this.svg).prepend(lu.createSVGStyle(t))},createLayer(t){return t===Dx.GRID?new Kx({name:t,paper:this,patterns:this.constructor.gridPatterns}):new zx({name:t})},renderLayers:function(t=ow){this.removeLayers(),t.forEach((({name:t,sorted:e})=>{const i=this.createLayer(t);this.layers.appendChild(i.el),this._layers[t]=i}));const e=this.getLayerView(Dx.CELLS),i=this.getLayerView(Dx.TOOLS),r=this.getLayerView(Dx.LABELS);this.tools=i.el,this.cells=this.viewport=e.el,e.vel.addClass(cg("viewport")),r.vel.addClass(cg("viewport")),e.el.style.webkitUserSelect="none",e.el.style.userSelect="none",r.el.style.webkitUserSelect="none",r.el.style.userSelect="none"},removeLayers:function(){const{_layers:t}=this;Object.keys(t).forEach((e=>{t[e].remove(),delete t[e]}))},resetLayers:function(){const{_layers:t}=this;Object.keys(t).forEach((e=>{t[e].removePivots()}))},update:function(){return this._background&&this.updateBackgroundImage(this._background),this},scale:function(t,e,i){const r=this.matrix();return void 0===t?lu.matrixToScale(r):(void 0===e&&(e=t),t=Math.max(t||0,this.MIN_SCALE),e=Math.max(e||0,this.MIN_SCALE),r.a=t,r.d=e,this.matrix(r,i),this)},scaleUniformAtPoint:function(t,e,i){const{a:r,d:o,e:n,f:s}=this.matrix();if((t=Math.max(t||0,this.MIN_SCALE))===r&&t===o)return this;const a=lu.createSVGMatrix().translate(n-e.x*(t-r),s-e.y*(t-o)).scale(t,t);return this.matrix(a,i),this},translate:function(t,e,i){const r=this.matrix();return void 0===t?lu.matrixToTranslate(r):(t||(t=0),e||(e=0),r.e===t&&r.f===e||(r.e=t,r.f=e,this.matrix(r,i)),this)},matrix:function(t,e={}){var i=this.layers;if(void 0===t){var r=i.getAttribute("transform");return(this._viewportTransformString||null)===r?t=this._viewportMatrix:(t=i.getCTM(),this._viewportMatrix=t,this._viewportTransformString=r),lu.createSVGMatrix(t)}const o=this.matrix(),n=lu.createSVGMatrix(t),s=this._viewportTransformString,a=lu.matrixToTransformString(n);if(a===s)return this;if(!s&&lu.matrixToTransformString()===a)return this;const{a:l,d:c,e:d,f:h}=n;return i.setAttribute("transform",a),this._viewportMatrix=n,this._viewportTransformString=i.getAttribute("transform"),l===o.a&&c===o.d||this.trigger("scale",l,c,e),d===o.e&&h===o.f||this.trigger("translate",d,h,e),this.trigger("transform",n,e),this},clientMatrix:function(){return lu.createSVGMatrix(this.cells.getScreenCTM())},requestConnectedLinksUpdate:function(t,e,i){if(t instanceof Gx)for(var r=t.model,o=this.model.getConnectedLinks(r),n=0,s=o.length;n<s;n++){var a=o[n],l=this.findViewByModel(a);if(l){var c=["UPDATE"];a.getTargetCell()===r&&c.push("TARGET"),a.getSourceCell()===r&&c.push("SOURCE");var d=Math.max(e+1,l.UPDATE_PRIORITY);this.scheduleViewUpdate(l,l.getFlag(c),d,i)}}},forcePostponedViewUpdate:function(t,e){if(!(t&&t instanceof Gx))return!1;var i=t.model;if(i.isElement())return!1;if(!(e&t.getFlag(["SOURCE","TARGET"]))){var r={silent:!0},o=0,n=this.findViewByModel(i.getSourceCell());n&&!this.isViewMounted(n)&&(o=this.dumpView(n,r),t.updateEndMagnet("source"));var s=0,a=this.findViewByModel(i.getTargetCell());if(a&&!this.isViewMounted(a)&&(s=this.dumpView(a,r),t.updateEndMagnet("target")),0===o&&0===s)return!this.dumpView(t,r)}return!1},requestViewUpdate:function(t,e,i,r){r||(r={}),this.scheduleViewUpdate(t,e,i,r);var o=this.isAsync();if(!(this.isFrozen()||o&&!1!==r.async||this.model.hasActiveBatch(this.UPDATE_DELAYING_BATCHES))){var n=this.updateViews(r);o&&this.notifyAfterRender(n,r)}},scheduleViewUpdate:function(t,e,i,r){const{_updates:o,options:n}=this;o.idle&&n.autoFreeze&&(o.idle=!1,this.unfreeze());const{FLAG_REMOVE:s,FLAG_INSERT:a,UPDATE_PRIORITY:l,cid:c}=t;let d=o.priorities[i];if(d||(d=o.priorities[i]={}),i>l)for(let t=i-1;t>=l;t--){const e=o.priorities[t];e&&c in e&&(d[c]|=e[c],delete e[c])}let h=d[c]||0;if((h&e)===e)return;h||o.count++,e&s&&h&a?d[c]^=a:e&a&&h&s&&(d[c]^=s),d[c]|=e;const u=n.onViewUpdate;"function"==typeof u&&u.call(this,t,e,i,r||{},this)},dumpViewUpdate:function(t){if(!t)return 0;var e=this._updates,i=t.cid,r=e.priorities[t.UPDATE_PRIORITY],o=this.registerMountedView(t)|r[i];return delete r[i],o},dumpView:function(t,e={}){const i=this.dumpViewUpdate(t);if(!i)return 0;const r=!e.silent;r&&this.notifyBeforeRender(e);const o=this.updateView(t,i,e);if(r){const i={updated:1,priority:t.UPDATE_PRIORITY};this.notifyAfterRender(i,e)}return o},updateView:function(t,e,i){if(!t)return 0;const{FLAG_REMOVE:r,FLAG_INSERT:o,FLAG_INIT:n,model:s}=t;if(t instanceof Gx){if(e&r)return this.removeView(s),0;if(e&o){const i=!!(e&n);i&&(e^=n),this.insertView(t,i),e^=o}}return e?t.confirmUpdate(e,i||{}):0},requireView:function(t,e){var i=this.findViewByModel(t);return i?(this.dumpView(i,e),i):null},registerUnmountedView:function(t){var e=t.cid,i=this._updates;if(e in i.unmounted)return 0;var r=i.unmounted[e]|=t.FLAG_INSERT;return i.unmountedCids.push(e),delete i.mounted[e],r},registerMountedView:function(t){var e=t.cid,i=this._updates;if(e in i.mounted)return 0;i.mounted[e]=!0,i.mountedCids.push(e);var r=i.unmounted[e]||0;return delete i.unmounted[e],r},isViewMounted:function(t){return!!t&&t.cid in this._updates.mounted},dumpViews:function(t){var e=Qf({},t,{viewport:null});this.checkViewport(e),this.updateViews(e)},updateViews:function(t){let e;this.notifyBeforeRender(t);let i=0,r=0,o=ew;do{r++,e=this.updateViewsBatch(t),i+=e.updated,o=Math.min(e.priority,o)}while(!e.empty);const n={updated:i,batches:r,priority:o};return this.notifyAfterRender(n,t),n},hasScheduledUpdates:function(){const t=this._updates.priorities,e=Object.keys(t);let i=e.length;for(;i>0&&i--;)for(let r in t[e[i]])return!0;return!1},updateViewsAsync:function(t,e){t||(t={}),e||(e={processed:0,priority:ew});const{_updates:i,options:r}=this,o=i.id;if(o){yg(o),0===e.processed&&this.hasScheduledUpdates()&&this.notifyBeforeRender(t);const n=this.updateViewsBatch(t),s=Qf({},t,{mountBatchSize:1e3-n.mounted,unmountBatchSize:1e3-n.unmounted}),a=this.checkViewport(s),l=a.unmounted,c=a.mounted;let d=e.processed;const h=i.count;n.updated>0?(d+=n.updated+n.unmounted,n.processed=d,e.priority=Math.min(n.priority,e.priority),n.empty&&0===c?(n.unmounted+=l,n.mounted+=c,n.priority=e.priority,this.notifyAfterRender(n,t),e.processed=0,e.priority=ew,i.count=0):e.processed=d):i.idle||r.autoFreeze&&(this.freeze(),i.idle=!0,this.trigger("render:idle",t));const u=t.progress;if(h&&"function"==typeof u&&u.call(this,n.empty,d,h,n,this),i.id!==o)return}if(i.disabled)throw new Error("dia.Paper: can not unfreeze the paper after it was removed");i.id=bg(this.updateViewsAsync,this,t,e)},notifyBeforeRender:function(t={}){let e=t.beforeRender;"function"!=typeof e&&(e=this.options.beforeRender,"function"!=typeof e)||e.call(this,t,this)},notifyAfterRender:function(t,e={}){let i=e.afterRender;"function"!=typeof i&&(i=this.options.afterRender),"function"==typeof i&&i.call(this,t,e,this),this.trigger("render:done",t,e)},updateViewsBatch:function(t){t||(t={});var e=t.batchSize||tw,i=this._updates,r=0,o=0,n=0,s=0,a=ew,l=!0,c=this.options,d=i.priorities,h="viewport"in t?t.viewport:c.viewport;"function"!=typeof h&&(h=null);var u=c.onViewPostponed;"function"!=typeof u&&(u=null);var p=Object.keys(d);t:for(var f=0,m=p.length;f<m;f++){var g=+p[f],v=d[g];for(var b in v){if(r>=e){l=!1;break t}var y=Fb[b];if(y){var x=v[b];if(!(x&y.FLAG_REMOVE)){var w=b in i.unmounted;if(y.DETACHABLE&&h&&!h.call(this,y,!w,this)){w||(this.registerUnmountedView(y),this.detachView(y)),i.unmounted[b]|=x,delete v[b],n++;continue}w&&(x|=y.FLAG_INSERT,s++),x|=this.registerMountedView(y)}var _=this.updateView(y,x,t);_>0&&(v[b]=_,!u||!u.call(this,y,_,this)||v[b])?(o++,l=!1):(a>g&&(a=g),r++,delete v[b])}else delete v[b]}}return{priority:a,updated:r,postponed:o,unmounted:n,mounted:s,empty:l}},getUnmountedViews:function(){const t=this._updates,e=Object.keys(t.unmounted),i=e.length,r=new Array(i);for(var o=0;o<i;o++)r[o]=Fb[e[o]];return r},getMountedViews:function(){const t=this._updates,e=Object.keys(t.mounted),i=e.length,r=new Array(i);for(var o=0;o<i;o++)r[o]=Fb[e[o]];return r},checkUnmountedViews:function(t,e){e||(e={});var i=0;"function"!=typeof t&&(t=null);for(var r=("mountBatchSize"in e?e.mountBatchSize:1/0),o=this._updates,n=o.unmountedCids,s=o.unmounted,a=0,l=Math.min(n.length,r);a<l;a++){var c=n[a];if(c in s){var d=Fb[c];if(d)if(d.DETACHABLE&&t&&!t.call(this,d,!1,this))n.push(c);else{i++;var h=this.registerMountedView(d);h&&this.scheduleViewUpdate(d,h,d.UPDATE_PRIORITY,{mounting:!0})}}}return n.splice(0,a),i},checkMountedViews:function(t,e){e||(e={});var i=0;if("function"!=typeof t)return i;for(var r=("unmountBatchSize"in e?e.unmountBatchSize:1/0),o=this._updates,n=o.mountedCids,s=o.mounted,a=0,l=Math.min(n.length,r);a<l;a++){var c=n[a];if(c in s){var d=Fb[c];if(d)if(d.DETACHABLE&&!t.call(this,d,!0,this))i++,this.registerUnmountedView(d)&&this.detachView(d);else n.push(c)}}return n.splice(0,a),i},checkViewVisibility:function(t,e={}){let i="viewport"in e?e.viewport:this.options.viewport;"function"!=typeof i&&(i=null);const r=this._updates,{mounted:o,unmounted:n}=r,s=!t.DETACHABLE||!i||i.call(this,t,!1,this);let a=!1,l=!1;if(t.cid in o&&!s){this.registerUnmountedView(t)&&this.detachView(t);const e=r.mountedCids.indexOf(t.cid);r.mountedCids.splice(e,1),a=!0}if(!a&&t.cid in n&&s){const e=r.unmountedCids.indexOf(t.cid);r.unmountedCids.splice(e,1);var c=this.registerMountedView(t);c&&this.scheduleViewUpdate(t,c,t.UPDATE_PRIORITY,{mounting:!0}),l=!0}return{mounted:l?1:0,unmounted:a?1:0}},checkViewport:function(t){var e=Qf({},t,{mountBatchSize:1/0,unmountBatchSize:1/0}),i="viewport"in e?e.viewport:this.options.viewport,r=this.checkMountedViews(i,e);if(r>0){var o=this._updates.unmountedCids;e.mountBatchSize=Math.min(o.length-r,e.mountBatchSize)}return{mounted:this.checkUnmountedViews(i,e),unmounted:r}},freeze:function(t){t||(t={});var e=this._updates,i=t.key,r=this.options.frozen,o=e.freezeKey;if(i&&i!==o){if(r&&o)return;e.freezeKey=i,e.keyFrozen=r}this.options.frozen=!0;var n=e.id;e.id=null,this.isAsync()&&n&&yg(n)},unfreeze:function(t){t||(t={});var e=this._updates,i=t.key,r=e.freezeKey;i&&r&&i!==r||(e.freezeKey=null,i&&i===r&&e.keyFrozen||(this.isAsync()?(this.freeze(),this.updateViewsAsync(t)):this.updateViews(t),this.options.frozen=e.keyFrozen=!1,e.sort&&(this.sortViews(),e.sort=!1)))},isAsync:function(){return!!this.options.async},isFrozen:function(){return!!this.options.frozen},isExactSorting:function(){return this.options.sorting===Zx.EXACT},onRemove:function(){this.freeze(),this._updates.disabled=!0,this.removeLayers(),this.removeViews()},getComputedSize:function(){var t=this.options,e=t.width,i=t.height;return Yf(e)||(e=this.el.clientWidth),Yf(i)||(i=this.el.clientHeight),{width:e,height:i}},setDimensions:function(t,e,i={}){const{options:r}=this,{width:o,height:n}=r;let s=void 0===t?o:t,a=void 0===e?n:e;if(o===s&&n===a)return;r.width=s,r.height=a,this._setDimensions();const l=this.getComputedSize();this.trigger("resize",l.width,l.height,i)},_setDimensions:function(){const{options:t}=this;let e=t.width,i=t.height;Yf(e)&&(e=`${Math.round(e)}px`),Yf(i)&&(i=`${Math.round(i)}px`),this.$el.css({width:null===e?"":e,height:null===i?"":i})},fitToContent:function(t,e,i,r){r=Wf(t)?t:Jf({gridWidth:t,gridHeight:e,padding:i},r);const{x:o,y:n,width:s,height:a}=this.getFitToContentArea(r),{sx:l,sy:c}=this.scale();return this.translate(-o*l,-n*c,r),this.setDimensions(s*l,a*c,r),new ih(o,n,s,a)},getFitToContentArea:function(t={}){const e=t.gridWidth||1,i=t.gridHeight||1,r=Tg(t.padding||0),o=Math.max(t.minWidth||0,e),n=Math.max(t.minHeight||0,i),s=t.maxWidth||Number.MAX_VALUE,a=t.maxHeight||Number.MAX_VALUE,l=t.allowNewOrigin,c="contentArea"in t?new ih(t.contentArea):this.getContentArea(t),{sx:d,sy:h}=this.scale();c.x*=d,c.y*=h,c.width*=d,c.height*=h;let u=Math.ceil((c.width+c.x)/e),p=Math.ceil((c.height+c.y)/i);t.allowNegativeBottomRight||(u=Math.max(u,1),p=Math.max(p,1)),u*=e,p*=i;let f=0;("negative"===l&&c.x<0||"positive"===l&&c.x>=0||"any"===l)&&(f=Math.ceil(-c.x/e)*e,f+=r.left,u+=f);let m=0;return("negative"===l&&c.y<0||"positive"===l&&c.y>=0||"any"===l)&&(m=Math.ceil(-c.y/i)*i,m+=r.top,p+=m),u+=r.right,p+=r.bottom,u=Math.max(u,o),p=Math.max(p,n),u=Math.min(u,s),p=Math.min(p,a),new ih(-f/d,-m/h,u/d,p/h)},transformToFitContent:function(t){let e,i;if(t||(t={}),"contentArea"in t){const r=t.contentArea;e=this.localToPaperRect(r),i=new zd(r)}else e=this.getContentBBox(t),i=this.paperToLocalPoint(e);if(!e.width||!e.height)return;Qf(t,{padding:0,preserveAspectRatio:!0,scaleGrid:null,minScale:0,maxScale:Number.MAX_VALUE,verticalAlign:"top",horizontalAlign:"left"});const r=Tg(t.padding),o=t.minScaleX||t.minScale,n=t.maxScaleX||t.maxScale,s=t.minScaleY||t.minScale,a=t.maxScaleY||t.maxScale;let l;if(t.fittingBBox)l=t.fittingBBox;else{const t=this.translate(),e=this.getComputedSize();l={x:t.tx,y:t.ty,width:e.width,height:e.height}}l=new ih(l).moveAndExpand({x:r.left,y:r.top,width:-r.left-r.right,height:-r.top-r.bottom});const c=this.matrix(),{a:d,d:h,e:u,f:p}=c;let f=l.width/e.width*d,m=l.height/e.height*h;if(t.preserveAspectRatio&&(f=m=Math.min(f,m)),t.scaleGrid){const e=t.scaleGrid;f=e*Math.floor(f/e),m=e*Math.floor(m/e)}f=Math.min(n,Math.max(o,f)),m=Math.min(a,Math.max(s,m));const g=f/d,v=m/h;let b=l.x-i.x*f-u,y=l.y-i.y*m-p;switch(t.verticalAlign){case"middle":y+=(l.height-e.height*v)/2;break;case"bottom":y+=l.height-e.height*v}switch(t.horizontalAlign){case"middle":b+=(l.width-e.width*g)/2;break;case"right":b+=l.width-e.width*g}c.a=f,c.d=m,c.e=b,c.f=y,this.matrix(c,t)},scaleContentToFit:function(t){this.transformToFitContent(t)},getContentArea:function(t){return t&&t.useModelGeometry?this.model.getBBox()||new ih:lu(this.cells).getBBox()},getContentBBox:function(t){return this.localToPaperRect(this.getContentArea(t))},getArea:function(){return this.paperToLocalRect(this.getComputedSize())},getRestrictedArea:function(...t){const{restrictTranslate:e}=this.options;let i;return i=lm(e)?e.apply(this,t):!0===e?this.getArea():e?new ih(e):null,i},createViewForModel:function(t){const{options:e}=this;var i,r,o=e.cellViewNamespace,n=t.get("type")+"View",s=ug(o,n,".");return t.isLink()?(i=e.linkView,r=Qx):(i=e.elementView,r=Xx),new(i.prototype instanceof Nb?s||i:i.call(this,t)||s||r)({model:t,interactive:e.interactive,labelsLayer:!0===e.labelsLayer?Dx.LABELS:e.labelsLayer})},removeView:function(t){const{id:e}=t,{_views:i,_updates:r}=this,o=i[e];if(o){var{cid:n}=o;const{mounted:t,unmounted:s}=r;o.remove(),delete i[e],delete t[n],delete s[n]}return o},renderView:function(t,e){const{id:i}=t,r=this._views;let o,n,s=!0;return i in r&&(o=r[i],o.model===t?(n=o.FLAG_INSERT,s=!1):this.removeView(t)),s&&(o=r[i]=this.createViewForModel(t),o.paper=this,n=this.registerUnmountedView(o)|this.FLAG_INIT|o.getFlag(bm(o,"initFlag"))),this.requestViewUpdate(o,n,o.UPDATE_PRIORITY,e),o},onImageDragStart:function(){return!1},resetViews:function(t,e){e||(e={}),t||(t=[]),this._resetUpdates(),this.removeViews();const i=this.options.autoFreeze?null:"reset";this.freeze({key:i});for(var r=0,o=t.length;r<o;r++)this.renderView(t[r],e);this.unfreeze({key:i}),this.sortViews()},removeViews:function(){tm(this._views,"remove"),this._views={}},sortViews:function(){this.isExactSorting()&&(this.isFrozen()?this._updates.sort=!0:this.sortViewsExact())},sortViewsExact:function(){var t=Array.from(this.cells.childNodes).filter((t=>t.getAttribute("model-id"))),e=this.model.get("cells");!function(t,e){var i=(t=lg(t).toArray()).map((function(t){var e=t.parentNode,i=e.insertBefore(document.createTextNode(""),t.nextSibling);return function(){if(e===this)throw new Error("You can't sort elements if any one is a descendant of another.");e.insertBefore(this,i),e.removeChild(i)}}));t.sort(e);for(var r=0;r<i.length;r++)i[r].call(t[r])}(t,(function(t,i){var r=e.get(t.getAttribute("model-id")),o=e.get(i.getAttribute("model-id")),n=r.attributes.z||0,s=o.attributes.z||0;return n===s?0:n<s?-1:1}))},insertView:function(t,e){const i=this.getLayerView(Dx.CELLS),{el:r,model:o}=t;if(this.options.sorting===Zx.APPROX)i.insertSortedNode(r,o.get("z"));else i.insertNode(r);t.onMount(e)},detachView(t){t.unmount(),t.onDetach()},findView:function(t){var e=Xf(t)?this.cells.querySelector(t):t instanceof lg?t[0]:t,i=this.findAttribute("model-id",e);if(i)return this._views[i]},findViewByModel:function(t){var e=Xf(t)||Yf(t)?t:t&&t.id;return this._views[e]},findViewsFromPoint:function(t){return t=new zd(t),this.model.getElements().map(this.findViewByModel,this).filter((function(e){return e&&e.vel.getBBox({target:this.cells}).containsPoint(t)}),this)},findViewsInArea:function(t,e){e=Qf(e||{},{strict:!1}),t=new ih(t);var i=this.model.getElements().map(this.findViewByModel,this),r=e.strict?"containsRect":"intersect";return i.filter((function(e){return e&&t[r](e.vel.getBBox({target:this.cells}))}),this)},removeTools:function(){return this.dispatchToolsEvent("remove"),this},hideTools:function(){return this.dispatchToolsEvent("hide"),this},showTools:function(){return this.dispatchToolsEvent("show"),this},dispatchToolsEvent:function(t,...e){"string"==typeof t&&this.trigger("tools:event",t,...e)},getModelById:function(t){return this.model.getCell(t)},snapToGrid:function(t,e){return this.clientToLocalPoint(t,e).snapToGrid(this.options.gridSize)},localToPaperPoint:function(t,e){var i=new zd(t,e);return lu.transformPoint(i,this.matrix())},localToPaperRect:function(t,e,i,r){var o=new ih(t,e,i,r);return lu.transformRect(o,this.matrix())},paperToLocalPoint:function(t,e){var i=new zd(t,e);return lu.transformPoint(i,this.matrix().inverse())},paperToLocalRect:function(t,e,i,r){var o=new ih(t,e,i,r);return lu.transformRect(o,this.matrix().inverse())},localToClientPoint:function(t,e){var i=new zd(t,e);return lu.transformPoint(i,this.clientMatrix())},localToClientRect:function(t,e,i,r){var o=new ih(t,e,i,r);return lu.transformRect(o,this.clientMatrix())},clientToLocalPoint:function(t,e){var i=new zd(t,e);return lu.transformPoint(i,this.clientMatrix().inverse())},clientToLocalRect:function(t,e,i,r){var o=new ih(t,e,i,r);return lu.transformRect(o,this.clientMatrix().inverse())},localToPagePoint:function(t,e){return this.localToPaperPoint(t,e).offset(this.pageOffset())},localToPageRect:function(t,e,i,r){return this.localToPaperRect(t,e,i,r).offset(this.pageOffset())},pageToLocalPoint:function(t,e){var i=new zd(t,e).difference(this.pageOffset());return this.paperToLocalPoint(i)},pageToLocalRect:function(t,e,i,r){var o=this.pageOffset(),n=new ih(t,e,i,r);return n.x-=o.x,n.y-=o.y,this.paperToLocalRect(n)},clientOffset:function(){var t=this.svg.getBoundingClientRect();return new zd(t.left,t.top)},pageOffset:function(){return this.clientOffset().offset(window.scrollX,window.scrollY)},linkAllowed:function(t){if(!(t instanceof Qx))throw new Error("Must provide a linkView.");var e=t.model,i=this.options,r=this.model,o=r.constructor.validations;return!(!i.multiLinks&&!o.multiLinks.call(this,r,e))&&(!(!i.linkPinning&&!o.linkPinning.call(this,r,e))&&!("function"==typeof i.allowLink&&!i.allowLink.call(this,t,this)))},getDefaultLink:function(t,e){return lm(this.options.defaultLink)?this.options.defaultLink.call(this,t,e):this.options.defaultLink.clone()},resolveHighlighter:function(t={}){let{highlighter:e,type:i}=t;const{highlighting:r,highlighterNamespace:o}=this.options;if(void 0===e){if(!r)return!1;if(i&&(e=r[i],!1===e))return!1;e||(e=r.default)}if(!e)return!1;Xf(e)&&(e={name:e});const n=e.name,s=o[n];if(!s)throw new Error('Unknown highlighter ("'+n+'")');if("function"!=typeof s.highlight)throw new Error('Highlighter ("'+n+'") is missing required highlight() method');if("function"!=typeof s.unhighlight)throw new Error('Highlighter ("'+n+'") is missing required unhighlight() method');return{highlighter:s,options:e.options||{},name:n}},onCellHighlight:function(t,e,i){const r=this.resolveHighlighter(i);if(!r)return;const{highlighter:o,options:n}=r;o.highlight(t,e,n)},onCellUnhighlight:function(t,e,i){const r=this.resolveHighlighter(i);if(!r)return;const{highlighter:o,options:n}=r;o.unhighlight(t,e,n)},pointerdblclick:function(t){t.preventDefault(),t=vg(t);var e=this.findView(t.target);if(!this.guard(t,e)){var i=this.snapToGrid(t.clientX,t.clientY);e?e.pointerdblclick(t,i.x,i.y):this.trigger("blank:pointerdblclick",t,i.x,i.y)}},pointerclick:function(t){if(this.eventData(t).mousemoved<=this.options.clickThreshold){t=vg(t);var e=this.findView(t.target);if(this.guard(t,e))return;var i=this.snapToGrid(t.clientX,t.clientY);e?e.pointerclick(t,i.x,i.y):this.trigger("blank:pointerclick",t,i.x,i.y)}},contextmenu:function(t){this.options.preventContextMenu&&t.preventDefault(),this.contextMenuFired?this.contextMenuFired=!1:(t=vg(t),this.contextMenuTrigger(t))},contextMenuTrigger:function(t){var e=this.findView(t.target);if(!this.guard(t,e)){var i=this.snapToGrid(t.clientX,t.clientY);e?e.contextmenu(t,i.x,i.y):this.trigger("blank:contextmenu",t,i.x,i.y)}},pointerdown:function(t){t=vg(t);const{target:e,button:i}=t,r=this.findView(e),o=2===i;if(r){if(!o&&this.guard(t,r))return;const i=this.FORM_CONTROL_TAG_NAMES.includes(e.tagName);this.options.preventDefaultViewAction&&!i&&t.preventDefault(),i&&r.preventDefaultInteraction(t);const n=this.customEventTrigger(t,r);if(n){if(n.isPropagationStopped())return;t.data=n.data}const s=e.closest("[magnet]");if(s&&r.el!==s&&r.el.contains(s)){const e=vg(new lg.Event(t.originalEvent,{data:t.data,currentTarget:s}));if(this.onmagnet(e),e.isDefaultPrevented()&&t.preventDefault(),e.isPropagationStopped()){if(o)return;return void this.delegateDragEvents(r,e.data)}t.data=e.data}}if(o){this.contextMenuFired=!0;const e=new lg.Event(t.originalEvent,{type:"contextmenu",data:t.data});this.contextMenuTrigger(e)}else{const e=this.snapToGrid(t.clientX,t.clientY);r?r.pointerdown(t,e.x,e.y):(this.options.preventDefaultBlankAction&&t.preventDefault(),this.trigger("blank:pointerdown",t,e.x,e.y)),this.delegateDragEvents(r,t.data)}},pointermove:function(t){var e=this.eventData(t);if(e.mousemoved||(e.mousemoved=0,this.undelegateEvents()),!(++e.mousemoved<=this.options.moveThreshold)){t=vg(t);var i=this.snapToGrid(t.clientX,t.clientY),r=e.sourceView;r?r.pointermove(t,i.x,i.y):this.trigger("blank:pointermove",t,i.x,i.y),this.eventData(t,e)}},pointerup:function(t){this.undelegateDocumentEvents();var e=vg(t),i=this.snapToGrid(e.clientX,e.clientY),r=this.eventData(t).sourceView;r?r.pointerup(e,i.x,i.y):this.trigger("blank:pointerup",e,i.x,i.y),e.isPropagationStopped()||this.pointerclick(new lg.Event(t.originalEvent,{type:"click",data:t.data})),this.delegateEvents()},mouseover:function(t){t=vg(t);var e=this.findView(t.target);if(!this.guard(t,e))if(e)e.mouseover(t);else{if(this.el===t.target)return;this.trigger("blank:mouseover",t)}},mouseout:function(t){t=vg(t);var e=this.findView(t.target);if(!this.guard(t,e))if(e)e.mouseout(t);else{if(this.el===t.target)return;this.trigger("blank:mouseout",t)}},mouseenter:function(t){t=vg(t);const{target:e,relatedTarget:i,currentTarget:r}=t,o=this.findView(e);if(this.guard(t,o))return;const n=this.findView(i);if(o){if(n===o)return;if(o.mouseenter(t),this.el.contains(i))return}n||r===this.el&&this.trigger("paper:mouseenter",t)},mouseleave:function(t){t=vg(t);const{target:e,relatedTarget:i,currentTarget:r}=t,o=this.findView(e);if(this.guard(t,o))return;const n=this.findView(i);if(o){if(n===o)return;if(o.mouseleave(t),this.el.contains(i))return}n||r===this.el&&this.trigger("paper:mouseleave",t)},_processMouseWheelEvtBuf:function(t,e,i){if("function"!=typeof t)throw new TypeError("Expected a function");let r,o,n,s,a,l,c=0,d=!1,h=!1,u=!0;const p=!e&&0!==e&&window&&"function"==typeof window.requestAnimationFrame;function f(e){const i=r,n=o;return r=o=void 0,c=e,s=t.apply(n,i),s}function m(t,e){return p?(window.cancelAnimationFrame(a),window.requestAnimationFrame(t)):setTimeout(t,e)}function g(t){const i=t-l;return void 0===l||i>=e||i<0||h&&t-c>=n}function v(){const t=Date.now();if(g(t))return b(t);a=m(v,function(t){const i=t-c,r=e-(t-l);return h?Math.min(r,n-i):r}(t))}function b(t){return a=void 0,u&&r?f(t):(r=o=void 0,s)}function y(...t){const i=Date.now(),n=g(i);if(r=t,o=this,l=i,n){if(void 0===a)return function(t){return c=t,a=m(v,e),d?f(t):s}(l);if(h)return a=m(v,e),f(l)}return void 0===a&&(a=m(v,e)),s}return e=+e||0,Wf(i)&&(d=!!i.leading,h="maxWait"in i,n=h?Math.max(+i.maxWait||0,e):n,u="trailing"in i?!!i.trailing:u),y.cancel=()=>{void 0!==a&&function(t){if(p)return window.cancelAnimationFrame(t);clearTimeout(t)}(a),c=0,r=l=o=a=void 0},y.flush=()=>void 0===a?s:b(Date.now()),y.pending=()=>void 0!==a,y}((function(){const{event:t,deltas:e}=this._mw_evt_buffer,i=e.reduce(((t,e)=>t+function(t,e){return t>e?e:t<-e?-e:t}(e,50)),0),r=Math.pow(.995,i),{x:o,y:n}=this.clientToLocalPoint(t.clientX,t.clientY);this.trigger("paper:pinch",t,o,n,r),this._mw_evt_buffer={event:null,deltas:[]}}),20,{maxWait:20}),mousewheel:function(t){t=vg(t);const e=this.findView(t.target);if(this.guard(t,e))return;const i=t.originalEvent,r=this.snapToGrid(i.clientX,i.clientY),{deltaX:o,deltaY:n}=function(t){let e=0,i=0,r=0,o=0;return"detail"in t&&(i=t.detail),"wheelDelta"in t&&(i=-t.wheelDelta/120),"wheelDeltaY"in t&&(i=-t.wheelDeltaY/120),"wheelDeltaX"in t&&(e=-t.wheelDeltaX/120),"axis"in t&&t.axis===t.HORIZONTAL_AXIS&&(e=i,i=0),r="deltaX"in t?t.deltaX:10*e,o="deltaY"in t?t.deltaY:10*i,(r||o)&&t.deltaMode&&(1==t.deltaMode?(r*=40,o*=40):(r*=800,o*=800)),0===t.deltaX&&0!==t.deltaY&&t.shiftKey&&(r=o,o=0,e=i,i=0),r&&!e&&(e=r<1?-1:1),o&&!i&&(i=o<1?-1:1),{spinX:e,spinY:i,deltaX:r,deltaY:o}}(i),s=this._events["paper:pinch"];if(t.ctrlKey&&s&&s.length>0)i.preventDefault(),this._mw_evt_buffer.event=t,this._mw_evt_buffer.deltas.push(n),this._processMouseWheelEvtBuf();else{const s=Math.max(-1,Math.min(1,i.wheelDelta));e?e.mousewheel(t,r.x,r.y,s):this.trigger("blank:mousewheel",t,r.x,r.y,s),this.trigger("paper:pan",t,o,n)}},onevent:function(t){var e=t.currentTarget,i=e.getAttribute("event");if(i){var r=this.findView(e);if(r){if(t=vg(t),this.guard(t,r))return;var o=this.snapToGrid(t.clientX,t.clientY);r.onevent(t,i,o.x,o.y)}}},magnetEvent:function(t,e){var i=t.currentTarget;if(i.getAttribute("magnet")){var r=this.findView(i);if(r){if(t=vg(t),this.guard(t,r))return;var o=this.snapToGrid(t.clientX,t.clientY);e.call(this,r,t,i,o.x,o.y)}}},onmagnet:function(t){if(2===t.button){this.contextMenuFired=!0,this.magnetContextMenuFired=!0;const e=new lg.Event(t.originalEvent,{type:"contextmenu",data:t.data,currentTarget:t.currentTarget});this.magnetContextMenuTrigger(e),e.isPropagationStopped()&&t.stopPropagation()}else this.magnetEvent(t,(function(t,e,i,r,o){t.onmagnet(e,r,o)}))},magnetpointerdblclick:function(t){this.magnetEvent(t,(function(t,e,i,r,o){t.magnetpointerdblclick(e,i,r,o)}))},magnetcontextmenu:function(t){this.options.preventContextMenu&&t.preventDefault(),this.magnetContextMenuFired?this.magnetContextMenuFired=!1:this.magnetContextMenuTrigger(t)},magnetContextMenuTrigger:function(t){this.magnetEvent(t,(function(t,e,i,r,o){t.magnetcontextmenu(e,i,r,o)}))},onlabel:function(t){var e=t.currentTarget,i=this.findView(e);if(!i)return;if(t=vg(t),this.guard(t,i))return;const r=this.customEventTrigger(t,i,e);if(r){if(r.isPropagationStopped())return;t.data=r.data}var o=this.snapToGrid(t.clientX,t.clientY);i.onlabel(t,o.x,o.y)},getPointerArgs(t){const e=vg(t),{x:i,y:r}=this.snapToGrid(e.clientX,e.clientY);return[e,i,r]},delegateDragEvents:function(t,e){e||(e={}),this.eventData({data:e},{sourceView:t||null,mousemoved:0}),this.delegateDocumentEvents(null,e)},guard:function(t,e){if("mousedown"===t.type&&2===t.button)return!0;if(this.options.guard&&this.options.guard(t,e))return!0;if(t.data&&void 0!==t.data.guarded)return t.data.guarded;const{target:i}=t;return!!this.GUARDED_TAG_NAMES.includes(i.tagName)||!(e&&e.model&&e.model instanceof zv)&&(this.el!==i&&!this.svg.contains(i))},setGridSize:function(t){const{options:e}=this;return e.gridSize=t,e.drawGrid&&!e.drawGridSize&&this.getLayerView(Dx.GRID).renderGrid(),this},setGrid:function(t){return this.getLayerView(Dx.GRID).setGrid(t),this},updateBackgroundImage:function(t){var e=(t=t||{}).position||"center",i=t.size||"auto auto",r=this.scale(),o=this.translate();Wf(e)&&(e=o.tx+r.sx*(e.x||0)+"px "+(o.ty+r.sy*(e.y||0))+"px");Wf(i)&&(i=(i=new ih(i).scale(r.sx,r.sy)).width+"px "+i.height+"px");const{background:n}=this.childNodes;n.style.backgroundSize=i,n.style.backgroundPosition=e},drawBackgroundImage:function(t,e){if(t instanceof HTMLImageElement){if(this._background&&this._background.id===e.id){var i,r=(e=e||{}).size,o=e.repeat||"no-repeat",n=e.opacity||1,s=Math.abs(e.quality)||1,a=this.constructor.backgroundPatterns[_m(o)];if(lm(a)){t.width*=s,t.height*=s;var l=a(t,e);if(!(l instanceof HTMLCanvasElement))throw new Error("dia.Paper: background pattern must return an HTML Canvas instance");i=l.toDataURL("image/png"),o="repeat",Wf(r)?(r.width*=l.width/t.width,r.height*=l.height/t.height):void 0===r&&(e.size={width:l.width/s,height:l.height/s})}else i=t.src,void 0===r&&(e.size={width:t.width,height:t.height});this.childNodes.background.style.opacity=n,this.childNodes.background.style.backgroundRepeat=o,this.childNodes.background.style.backgroundImage=`url(${i})`,this.updateBackgroundImage(e)}}else this.childNodes.background.style.backgroundImage=""},updateBackgroundColor:function(t){this.$el.css("backgroundColor",t||"")},drawBackground:function(t){if(t=t||{},this.updateBackgroundColor(t.color),t.image){t=this._background=nm(t),gg(t);var e=document.createElement("img");e.onload=this.drawBackgroundImage.bind(this,e,t),e.src=t.image}else this.drawBackgroundImage(null),this._background=null;return this},setInteractivity:function(t){this.options.interactive=t,tm(this._views,"setInteractivity",t)},isDefined:function(t){return!!this.svg.getElementById(t)},defineFilter:function(t){if(!Wf(t))throw new TypeError("dia.Paper: defineFilter() requires 1. argument to be an object.");var e=t.id,i=t.name;if(e||(e=i+this.svg.id+hg(JSON.stringify(t))),!this.isDefined(e)){var r=Ig,o=r[i]&&r[i](t.args||{});if(!o)throw new Error("Non-existing filter "+i);var n=Jf({filterUnits:"userSpaceOnUse"},t.attrs,{id:e});lu(o,n).appendTo(this.defs)}return e},defineGradient:function(t){if(!Wf(t))throw new TypeError("dia.Paper: defineGradient() requires 1. argument to be an object.");const{svg:e,defs:i}=this,{type:r,id:o=r+e.id+hg(JSON.stringify(t)),stops:n,attrs:s={}}=t;if(this.isDefined(o))return o;const a=dm(n).map((({offset:t,color:e,opacity:i})=>lu("stop").attr({offset:t,"stop-color":e,"stop-opacity":Number.isFinite(i)?i:1}))),l=lu(r,s,a);return l.id=o,l.appendTo(i),o},definePattern:function(t){if(!Wf(t))throw new TypeError("dia.Paper: definePattern() requires 1. argument to be an object.");const{svg:e,defs:i}=this,{id:r=e.id+hg(JSON.stringify(t)),markup:o,attrs:n={}}=t;if(!o)throw new TypeError("dia.Paper: definePattern() requires markup.");if(this.isDefined(r))return r;const s=lu("pattern",{patternUnits:"userSpaceOnUse"});if(s.id=r,s.attr(n),"string"==typeof o)s.append(lu(o));else{const{fragment:t}=dg(o);s.append(t)}return s.appendTo(i),r},defineMarker:function(t){if(!Wf(t))throw new TypeError("dia.Paper: defineMarker() requires the first argument to be an object.");const{svg:e,defs:i}=this,{id:r=e.id+hg(JSON.stringify(t)),markup:o,attrs:n={},markerUnits:s="userSpaceOnUse"}=t;if(this.isDefined(r))return r;const a=lu("marker",{orient:"auto",overflow:"visible",markerUnits:s});let l;if(a.id=r,a.attr(n),o){let t;if("string"==typeof o)t=lu(o),t=Array.isArray(t)?t:[t];else{const{fragment:e}=dg(o);t=lu(e).children()}l=t.length>1?lu("g").append(t):t[0]}else{const{type:e="path"}=t;l=lu(e)}const c=ym(t,"type","id","markup","attrs","markerUnits");return Object.keys(c).forEach((t=>{const e=c[t],i=l.attr(t);if(null==i)l.attr(t,e);else if("transform"===t)l.attr(t,e+" "+i)})),l.appendTo(a),a.appendTo(i),r},customEventTrigger:function(t,e,i=e.el){const r=t.target.closest("[event]");if(r&&i!==r&&e.el.contains(r)){const e=vg(new lg.Event(t.originalEvent,{data:t.data,currentTarget:r}));return this.onevent(e),e.isDefaultPrevented()&&t.preventDefault(),e}return null}},{sorting:Zx,Layers:Dx,backgroundPatterns:{flipXy:function(t){var e=document.createElement("canvas"),i=t.width,r=t.height;e.width=2*i,e.height=2*r;var o=e.getContext("2d");return o.drawImage(t,0,0,i,r),o.setTransform(-1,0,0,-1,e.width,e.height),o.drawImage(t,0,0,i,r),o.setTransform(-1,0,0,1,e.width,0),o.drawImage(t,0,0,i,r),o.setTransform(1,0,0,-1,0,e.height),o.drawImage(t,0,0,i,r),e},flipX:function(t){var e=document.createElement("canvas"),i=t.width,r=t.height;e.width=2*i,e.height=r;var o=e.getContext("2d");return o.drawImage(t,0,0,i,r),o.translate(2*i,0),o.scale(-1,1),o.drawImage(t,0,0,i,r),e},flipY:function(t){var e=document.createElement("canvas"),i=t.width,r=t.height;e.width=i,e.height=2*r;var o=e.getContext("2d");return o.drawImage(t,0,0,i,r),o.translate(0,2*r),o.scale(1,-1),o.drawImage(t,0,0,i,r),e},watermark:function(t,e){e=e||{};var i=t.width,r=t.height,o=document.createElement("canvas");o.width=3*i,o.height=3*r;for(var n=o.getContext("2d"),s=Yf(e.watermarkAngle)?-e.watermarkAngle:-20,a=yd(s),l=o.width/4,c=o.height/4,d=0;d<4;d++)for(var h=0;h<4;h++)(d+h)%2>0&&(n.setTransform(1,0,0,1,(2*d-1)*l,(2*h-1)*c),n.rotate(a),n.drawImage(t,-i/2,-r/2,i,r));return o}},gridPatterns:{dot:[{color:"#AAAAAA",thickness:1,markup:"rect",render:function(t,e){lu(t).attr({width:e.thickness,height:e.thickness,fill:e.color})}}],fixedDot:[{color:"#AAAAAA",thickness:1,markup:"rect",render:function(t,e){lu(t).attr({fill:e.color})},update:function(t,e,i){const{sx:r,sy:o}=i.scale(),n=r<=1?e.thickness:e.thickness/r,s=o<=1?e.thickness:e.thickness/o;lu(t).attr({width:n,height:s})}}],mesh:[{color:"#AAAAAA",thickness:1,markup:"path",render:function(t,e){var i,r=e.width,o=e.height,n=e.thickness;i=r-n>=0&&o-n>=0?["M",r,0,"H0 M0 0 V0",o].join(" "):"M 0 0 0 0",lu(t).attr({d:i,stroke:e.color,"stroke-width":e.thickness})}}],doubleMesh:[{color:"#AAAAAA",thickness:1,markup:"path",render:function(t,e){var i,r=e.width,o=e.height,n=e.thickness;i=r-n>=0&&o-n>=0?["M",r,0,"H0 M0 0 V0",o].join(" "):"M 0 0 0 0",lu(t).attr({d:i,stroke:e.color,"stroke-width":e.thickness})}},{color:"#000000",thickness:3,scaleFactor:4,markup:"path",render:function(t,e){var i,r=e.width,o=e.height,n=e.thickness;i=r-n>=0&&o-n>=0?["M",r,0,"H0 M0 0 V0",o].join(" "):"M 0 0 0 0",lu(t).attr({d:i,stroke:e.color,"stroke-width":e.thickness})}}]}}),sw=n`:host{--_container-color:var(--md-filled-icon-button-container-color, var(--md-sys-color-primary, #6750a4));--_container-height:var(--md-filled-icon-button-container-height, 40px);--_container-width:var(--md-filled-icon-button-container-width, 40px);--_disabled-container-color:var(--md-filled-icon-button-disabled-container-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-container-opacity:var(--md-filled-icon-button-disabled-container-opacity, 0.12);--_disabled-icon-color:var(--md-filled-icon-button-disabled-icon-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-icon-opacity:var(--md-filled-icon-button-disabled-icon-opacity, 0.38);--_focus-icon-color:var(--md-filled-icon-button-focus-icon-color, var(--md-sys-color-on-primary, #fff));--_hover-icon-color:var(--md-filled-icon-button-hover-icon-color, var(--md-sys-color-on-primary, #fff));--_hover-state-layer-color:var(--md-filled-icon-button-hover-state-layer-color, var(--md-sys-color-on-primary, #fff));--_hover-state-layer-opacity:var(--md-filled-icon-button-hover-state-layer-opacity, 0.08);--_icon-color:var(--md-filled-icon-button-icon-color, var(--md-sys-color-on-primary, #fff));--_icon-size:var(--md-filled-icon-button-icon-size, 24px);--_pressed-icon-color:var(--md-filled-icon-button-pressed-icon-color, var(--md-sys-color-on-primary, #fff));--_pressed-state-layer-color:var(--md-filled-icon-button-pressed-state-layer-color, var(--md-sys-color-on-primary, #fff));--_pressed-state-layer-opacity:var(--md-filled-icon-button-pressed-state-layer-opacity, 0.12);--_selected-container-color:var(--md-filled-icon-button-selected-container-color, var(--md-sys-color-primary, #6750a4));--_toggle-selected-focus-icon-color:var(--md-filled-icon-button-toggle-selected-focus-icon-color, var(--md-sys-color-on-primary, #fff));--_toggle-selected-hover-icon-color:var(--md-filled-icon-button-toggle-selected-hover-icon-color, var(--md-sys-color-on-primary, #fff));--_toggle-selected-hover-state-layer-color:var(--md-filled-icon-button-toggle-selected-hover-state-layer-color, var(--md-sys-color-on-primary, #fff));--_toggle-selected-icon-color:var(--md-filled-icon-button-toggle-selected-icon-color, var(--md-sys-color-on-primary, #fff));--_toggle-selected-pressed-icon-color:var(--md-filled-icon-button-toggle-selected-pressed-icon-color, var(--md-sys-color-on-primary, #fff));--_toggle-selected-pressed-state-layer-color:var(--md-filled-icon-button-toggle-selected-pressed-state-layer-color, var(--md-sys-color-on-primary, #fff));--_unselected-container-color:var(--md-filled-icon-button-unselected-container-color, var(--md-sys-color-surface-container-highest, #e6e0e9));--_toggle-focus-icon-color:var(--md-filled-icon-button-toggle-focus-icon-color, var(--md-sys-color-primary, #6750a4));--_toggle-hover-icon-color:var(--md-filled-icon-button-toggle-hover-icon-color, var(--md-sys-color-primary, #6750a4));--_toggle-hover-state-layer-color:var(--md-filled-icon-button-toggle-hover-state-layer-color, var(--md-sys-color-primary, #6750a4));--_toggle-icon-color:var(--md-filled-icon-button-toggle-icon-color, var(--md-sys-color-primary, #6750a4));--_toggle-pressed-icon-color:var(--md-filled-icon-button-toggle-pressed-icon-color, var(--md-sys-color-primary, #6750a4));--_toggle-pressed-state-layer-color:var(--md-filled-icon-button-toggle-pressed-state-layer-color, var(--md-sys-color-primary, #6750a4));--_container-shape-start-start:var(--md-filled-icon-button-container-shape-start-start, var(--md-filled-icon-button-container-shape, var(--md-sys-shape-corner-full, 9999px)));--_container-shape-start-end:var(--md-filled-icon-button-container-shape-start-end, var(--md-filled-icon-button-container-shape, var(--md-sys-shape-corner-full, 9999px)));--_container-shape-end-end:var(--md-filled-icon-button-container-shape-end-end, var(--md-filled-icon-button-container-shape, var(--md-sys-shape-corner-full, 9999px)));--_container-shape-end-start:var(--md-filled-icon-button-container-shape-end-start, var(--md-filled-icon-button-container-shape, var(--md-sys-shape-corner-full, 9999px)))}.icon-button{color:var(--_icon-color);--md-ripple-hover-color:var(--_hover-state-layer-color);--md-ripple-hover-opacity:var(--_hover-state-layer-opacity);--md-ripple-pressed-color:var(--_pressed-state-layer-color);--md-ripple-pressed-opacity:var(--_pressed-state-layer-opacity)}.icon-button:hover{color:var(--_hover-icon-color)}.icon-button:focus{color:var(--_focus-icon-color)}.icon-button:active{color:var(--_pressed-icon-color)}.icon-button:disabled{color:var(--_disabled-icon-color)}.icon-button::before{background-color:var(--_container-color);border-radius:inherit;content:"";inset:0;position:absolute;z-index:-1}.icon-button:disabled::before{background-color:var(--_disabled-container-color);opacity:var(--_disabled-container-opacity)}.icon-button:disabled .icon{opacity:var(--_disabled-icon-opacity)}.toggle-filled{--md-ripple-hover-color:var(--_toggle-hover-state-layer-color);--md-ripple-pressed-color:var(--_toggle-pressed-state-layer-color)}.toggle-filled:not(:disabled){color:var(--_toggle-icon-color)}.toggle-filled:not(:disabled):hover{color:var(--_toggle-hover-icon-color)}.toggle-filled:not(:disabled):focus{color:var(--_toggle-focus-icon-color)}.toggle-filled:not(:disabled):active{color:var(--_toggle-pressed-icon-color)}.toggle-filled:not(:disabled)::before{background-color:var(--_unselected-container-color)}.selected{--md-ripple-hover-color:var(--_toggle-selected-hover-state-layer-color);--md-ripple-pressed-color:var(--_toggle-selected-pressed-state-layer-color)}.selected:not(:disabled){color:var(--_toggle-selected-icon-color)}.selected:not(:disabled):hover{color:var(--_toggle-selected-hover-icon-color)}.selected:not(:disabled):focus{color:var(--_toggle-selected-focus-icon-color)}.selected:not(:disabled):active{color:var(--_toggle-selected-pressed-icon-color)}.selected:not(:disabled)::before{background-color:var(--_selected-container-color)}`
/**
 * @license
 * Copyright 2022 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */;let aw=class extends qe{getRenderClasses(){return{...super.getRenderClasses(),filled:!0,"toggle-filled":this.toggle}}};aw.styles=[We,sw],aw=bt([at("md-filled-icon-button")],aw);
/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
const lw=n`:host{--_container-color:var(--md-filled-tonal-icon-button-container-color, var(--md-sys-color-secondary-container, #e8def8));--_container-height:var(--md-filled-tonal-icon-button-container-height, 40px);--_container-width:var(--md-filled-tonal-icon-button-container-width, 40px);--_disabled-container-color:var(--md-filled-tonal-icon-button-disabled-container-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-container-opacity:var(--md-filled-tonal-icon-button-disabled-container-opacity, 0.12);--_disabled-icon-color:var(--md-filled-tonal-icon-button-disabled-icon-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-icon-opacity:var(--md-filled-tonal-icon-button-disabled-icon-opacity, 0.38);--_focus-icon-color:var(--md-filled-tonal-icon-button-focus-icon-color, var(--md-sys-color-on-secondary-container, #1d192b));--_hover-icon-color:var(--md-filled-tonal-icon-button-hover-icon-color, var(--md-sys-color-on-secondary-container, #1d192b));--_hover-state-layer-color:var(--md-filled-tonal-icon-button-hover-state-layer-color, var(--md-sys-color-on-secondary-container, #1d192b));--_hover-state-layer-opacity:var(--md-filled-tonal-icon-button-hover-state-layer-opacity, 0.08);--_icon-color:var(--md-filled-tonal-icon-button-icon-color, var(--md-sys-color-on-secondary-container, #1d192b));--_icon-size:var(--md-filled-tonal-icon-button-icon-size, 24px);--_pressed-icon-color:var(--md-filled-tonal-icon-button-pressed-icon-color, var(--md-sys-color-on-secondary-container, #1d192b));--_pressed-state-layer-color:var(--md-filled-tonal-icon-button-pressed-state-layer-color, var(--md-sys-color-on-secondary-container, #1d192b));--_pressed-state-layer-opacity:var(--md-filled-tonal-icon-button-pressed-state-layer-opacity, 0.12);--_selected-container-color:var(--md-filled-tonal-icon-button-selected-container-color, var(--md-sys-color-secondary-container, #e8def8));--_toggle-selected-focus-icon-color:var(--md-filled-tonal-icon-button-toggle-selected-focus-icon-color, var(--md-sys-color-on-secondary-container, #1d192b));--_toggle-selected-hover-icon-color:var(--md-filled-tonal-icon-button-toggle-selected-hover-icon-color, var(--md-sys-color-on-secondary-container, #1d192b));--_toggle-selected-hover-state-layer-color:var(--md-filled-tonal-icon-button-toggle-selected-hover-state-layer-color, var(--md-sys-color-on-secondary-container, #1d192b));--_toggle-selected-icon-color:var(--md-filled-tonal-icon-button-toggle-selected-icon-color, var(--md-sys-color-on-secondary-container, #1d192b));--_toggle-selected-pressed-icon-color:var(--md-filled-tonal-icon-button-toggle-selected-pressed-icon-color, var(--md-sys-color-on-secondary-container, #1d192b));--_toggle-selected-pressed-state-layer-color:var(--md-filled-tonal-icon-button-toggle-selected-pressed-state-layer-color, var(--md-sys-color-on-secondary-container, #1d192b));--_unselected-container-color:var(--md-filled-tonal-icon-button-unselected-container-color, var(--md-sys-color-surface-container-highest, #e6e0e9));--_toggle-focus-icon-color:var(--md-filled-tonal-icon-button-toggle-focus-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_toggle-hover-icon-color:var(--md-filled-tonal-icon-button-toggle-hover-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_toggle-hover-state-layer-color:var(--md-filled-tonal-icon-button-toggle-hover-state-layer-color, var(--md-sys-color-on-surface-variant, #49454f));--_toggle-icon-color:var(--md-filled-tonal-icon-button-toggle-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_toggle-pressed-icon-color:var(--md-filled-tonal-icon-button-toggle-pressed-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_toggle-pressed-state-layer-color:var(--md-filled-tonal-icon-button-toggle-pressed-state-layer-color, var(--md-sys-color-on-surface-variant, #49454f));--_container-shape-start-start:var(--md-filled-tonal-icon-button-container-shape-start-start, var(--md-filled-tonal-icon-button-container-shape, var(--md-sys-shape-corner-full, 9999px)));--_container-shape-start-end:var(--md-filled-tonal-icon-button-container-shape-start-end, var(--md-filled-tonal-icon-button-container-shape, var(--md-sys-shape-corner-full, 9999px)));--_container-shape-end-end:var(--md-filled-tonal-icon-button-container-shape-end-end, var(--md-filled-tonal-icon-button-container-shape, var(--md-sys-shape-corner-full, 9999px)));--_container-shape-end-start:var(--md-filled-tonal-icon-button-container-shape-end-start, var(--md-filled-tonal-icon-button-container-shape, var(--md-sys-shape-corner-full, 9999px)))}.icon-button{color:var(--_icon-color);--md-ripple-hover-color:var(--_hover-state-layer-color);--md-ripple-hover-opacity:var(--_hover-state-layer-opacity);--md-ripple-pressed-color:var(--_pressed-state-layer-color);--md-ripple-pressed-opacity:var(--_pressed-state-layer-opacity)}.icon-button:hover{color:var(--_hover-icon-color)}.icon-button:focus{color:var(--_focus-icon-color)}.icon-button:active{color:var(--_pressed-icon-color)}.icon-button:disabled{color:var(--_disabled-icon-color)}.icon-button::before{background-color:var(--_container-color);border-radius:inherit;content:"";inset:0;position:absolute;z-index:-1}.icon-button:disabled::before{background-color:var(--_disabled-container-color);opacity:var(--_disabled-container-opacity)}.icon-button:disabled .icon{opacity:var(--_disabled-icon-opacity)}.toggle-filled-tonal{--md-ripple-hover-color:var(--_toggle-hover-state-layer-color);--md-ripple-pressed-color:var(--_toggle-pressed-state-layer-color)}.toggle-filled-tonal:not(:disabled){color:var(--_toggle-icon-color)}.toggle-filled-tonal:not(:disabled):hover{color:var(--_toggle-hover-icon-color)}.toggle-filled-tonal:not(:disabled):focus{color:var(--_toggle-focus-icon-color)}.toggle-filled-tonal:not(:disabled):active{color:var(--_toggle-pressed-icon-color)}.toggle-filled-tonal:not(:disabled)::before{background-color:var(--_unselected-container-color)}.selected{--md-ripple-hover-color:var(--_toggle-selected-hover-state-layer-color);--md-ripple-pressed-color:var(--_toggle-selected-pressed-state-layer-color)}.selected:not(:disabled){color:var(--_toggle-selected-icon-color)}.selected:not(:disabled):hover{color:var(--_toggle-selected-hover-icon-color)}.selected:not(:disabled):focus{color:var(--_toggle-selected-focus-icon-color)}.selected:not(:disabled):active{color:var(--_toggle-selected-pressed-icon-color)}.selected:not(:disabled)::before{background-color:var(--_selected-container-color)}`
/**
 * @license
 * Copyright 2022 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */;let cw=class extends qe{getRenderClasses(){return{...super.getRenderClasses(),"filled-tonal":!0,"toggle-filled-tonal":this.toggle}}};cw.styles=[We,lw],cw=bt([at("md-filled-tonal-icon-button")],cw);
/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
class dw{constructor(t,e){this.host=t,this.internalTypeaheadText=null,this.onClick=()=>{this.host.keepOpen||this.host.dispatchEvent(xr(this.host,{kind:_r}))},this.onKeydown=t=>{if(this.host.href&&"Enter"===t.code){const t=this.getInteractiveElement();t instanceof HTMLAnchorElement&&t.click()}if(t.defaultPrevented)return;const e=t.code;this.host.keepOpen&&"Escape"!==e||Ar(e)&&(t.preventDefault(),this.host.dispatchEvent(xr(this.host,{kind:kr,key:e})))},this.getHeadlineElements=e.getHeadlineElements,this.getSupportingTextElements=e.getSupportingTextElements,this.getDefaultElements=e.getDefaultElements,this.getInteractiveElement=e.getInteractiveElement,this.host.addController(this)}get typeaheadText(){if(null!==this.internalTypeaheadText)return this.internalTypeaheadText;const t=this.getHeadlineElements(),e=[];return t.forEach((t=>{t.textContent&&t.textContent.trim()&&e.push(t.textContent.trim())})),0===e.length&&this.getDefaultElements().forEach((t=>{t.textContent&&t.textContent.trim()&&e.push(t.textContent.trim())})),0===e.length&&this.getSupportingTextElements().forEach((t=>{t.textContent&&t.textContent.trim()&&e.push(t.textContent.trim())})),e.join(" ")}get tagName(){switch(this.host.type){case"link":return"a";case"button":return"button";default:return"li"}}get role(){return"option"===this.host.type?"option":"menuitem"}hostConnected(){this.host.toggleAttribute("md-menu-item",!0)}hostUpdate(){this.host.href&&(this.host.type="link")}setTypeaheadText(t){this.internalTypeaheadText=t}}
/**
 * @license
 * Copyright 2022 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class hw extends nt{constructor(){super(...arguments),this.disabled=!1,this.type="menuitem",this.href="",this.target="",this.keepOpen=!1,this.selected=!1,this.menuItemController=new dw(this,{getHeadlineElements:()=>this.headlineElements,getSupportingTextElements:()=>this.supportingTextElements,getDefaultElements:()=>this.defaultElements,getInteractiveElement:()=>this.listItemRoot})}get typeaheadText(){return this.menuItemController.typeaheadText}set typeaheadText(t){this.menuItemController.setTypeaheadText(t)}render(){return this.renderListItem(U` <md-item> <div slot="container"> ${this.renderRipple()} ${this.renderFocusRing()} </div> <slot name="start" slot="start"></slot> <slot name="end" slot="end"></slot> ${this.renderBody()} </md-item> `)}renderListItem(t){const e="link"===this.type;let i;switch(this.menuItemController.tagName){case"a":i=be`a`;break;case"button":i=be`button`;break;default:i=be`li`}const r=e&&this.target?this.target:j;return xe`
      <${i}
        id="item"
        tabindex=${this.disabled&&!e?-1:0}
        role=${this.menuItemController.role}
        aria-label=${this.ariaLabel||j}
        aria-selected=${this.ariaSelected||j}
        aria-checked=${this.ariaChecked||j}
        aria-expanded=${this.ariaExpanded||j}
        aria-haspopup=${this.ariaHasPopup||j}
        class="list-item ${qt(this.getRenderClasses())}"
        href=${this.href||j}
        target=${r}
        @click=${this.menuItemController.onClick}
        @keydown=${this.menuItemController.onKeydown}
      >${t}</${i}>
    `}renderRipple(){return U` <md-ripple part="ripple" for="item" ?disabled="${this.disabled}"></md-ripple>`}renderFocusRing(){return U` <md-focus-ring part="focus-ring" for="item" inward></md-focus-ring>`}getRenderClasses(){return{disabled:this.disabled,selected:this.selected}}renderBody(){return U` <slot></slot> <slot name="overline" slot="overline"></slot> <slot name="headline" slot="headline"></slot> <slot name="supporting-text" slot="supporting-text"></slot> <slot name="trailing-supporting-text" slot="trailing-supporting-text"></slot> `}focus(){this.listItemRoot?.focus()}}Tt(hw),hw.shadowRootOptions={...nt.shadowRootOptions,delegatesFocus:!0},bt([dt({type:Boolean,reflect:!0})],hw.prototype,"disabled",void 0),bt([dt()],hw.prototype,"type",void 0),bt([dt()],hw.prototype,"href",void 0),bt([dt()],hw.prototype,"target",void 0),bt([dt({type:Boolean,attribute:"keep-open"})],hw.prototype,"keepOpen",void 0),bt([dt({type:Boolean})],hw.prototype,"selected",void 0),bt([pt(".list-item")],hw.prototype,"listItemRoot",void 0),bt([mt({slot:"headline"})],hw.prototype,"headlineElements",void 0),bt([mt({slot:"supporting-text"})],hw.prototype,"supportingTextElements",void 0),bt([gt({slot:""})],hw.prototype,"defaultElements",void 0),bt([dt({attribute:"typeahead-text"})],hw.prototype,"typeaheadText",null);
/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
const uw=n`:host{display:flex;--md-ripple-hover-color:var(--md-menu-item-hover-state-layer-color, var(--md-sys-color-on-surface, #1d1b20));--md-ripple-hover-opacity:var(--md-menu-item-hover-state-layer-opacity, 0.08);--md-ripple-pressed-color:var(--md-menu-item-pressed-state-layer-color, var(--md-sys-color-on-surface, #1d1b20));--md-ripple-pressed-opacity:var(--md-menu-item-pressed-state-layer-opacity, 0.12)}:host([disabled]){opacity:var(--md-menu-item-disabled-opacity,.3);pointer-events:none}md-focus-ring{z-index:1;--md-focus-ring-shape:8px}a,button,li{background:0 0;border:none;padding:0;margin:0;text-align:unset;text-decoration:none}.list-item{border-radius:inherit;display:flex;flex:1;max-width:inherit;min-width:inherit;outline:0;-webkit-tap-highlight-color:transparent}.list-item:not(.disabled){cursor:pointer}[slot=container]{pointer-events:none}md-ripple{border-radius:inherit}md-item{border-radius:inherit;flex:1;color:var(--md-menu-item-label-text-color,var(--md-sys-color-on-surface,#1d1b20));font-family:var(--md-menu-item-label-text-font,var(--md-sys-typescale-body-large-font,var(--md-ref-typeface-plain,Roboto)));font-size:var(--md-menu-item-label-text-size,var(--md-sys-typescale-body-large-size,1rem));line-height:var(--md-menu-item-label-text-line-height,var(--md-sys-typescale-body-large-line-height,1.5rem));font-weight:var(--md-menu-item-label-text-weight,var(--md-sys-typescale-body-large-weight,var(--md-ref-typeface-weight-regular,400)));min-height:var(--md-menu-item-one-line-container-height,56px);padding-top:var(--md-menu-item-top-space,12px);padding-bottom:var(--md-menu-item-bottom-space,12px);padding-inline-start:var(--md-menu-item-leading-space,16px);padding-inline-end:var(--md-menu-item-trailing-space,16px)}md-item[multiline]{min-height:var(--md-menu-item-two-line-container-height,72px)}[slot=supporting-text]{color:var(--md-menu-item-supporting-text-color,var(--md-sys-color-on-surface-variant,#49454f));font-family:var(--md-menu-item-supporting-text-font,var(--md-sys-typescale-body-medium-font,var(--md-ref-typeface-plain,Roboto)));font-size:var(--md-menu-item-supporting-text-size,var(--md-sys-typescale-body-medium-size,.875rem));line-height:var(--md-menu-item-supporting-text-line-height,var(--md-sys-typescale-body-medium-line-height,1.25rem));font-weight:var(--md-menu-item-supporting-text-weight,var(--md-sys-typescale-body-medium-weight,var(--md-ref-typeface-weight-regular,400)))}[slot=trailing-supporting-text]{color:var(--md-menu-item-trailing-supporting-text-color,var(--md-sys-color-on-surface-variant,#49454f));font-family:var(--md-menu-item-trailing-supporting-text-font,var(--md-sys-typescale-label-small-font,var(--md-ref-typeface-plain,Roboto)));font-size:var(--md-menu-item-trailing-supporting-text-size,var(--md-sys-typescale-label-small-size,.6875rem));line-height:var(--md-menu-item-trailing-supporting-text-line-height,var(--md-sys-typescale-label-small-line-height,1rem));font-weight:var(--md-menu-item-trailing-supporting-text-weight,var(--md-sys-typescale-label-small-weight,var(--md-ref-typeface-weight-medium,500)))}:is([slot=start],[slot=end])::slotted(*){fill:currentColor}[slot=start]{color:var(--md-menu-item-leading-icon-color,var(--md-sys-color-on-surface-variant,#49454f))}[slot=end]{color:var(--md-menu-item-trailing-icon-color,var(--md-sys-color-on-surface-variant,#49454f))}.list-item{background-color:var(--md-menu-item-container-color,transparent)}.list-item.selected{background-color:var(--md-menu-item-selected-container-color,var(--md-sys-color-secondary-container,#e8def8))}.selected:not(.disabled) ::slotted(*){color:var(--md-menu-item-selected-label-text-color,var(--md-sys-color-on-secondary-container,#1d192b))}@media(forced-colors:active){:host([disabled]),:host([disabled]) slot{color:GrayText;opacity:1}.list-item{position:relative}.list-item.selected::before{content:"";position:absolute;inset:0;box-sizing:border-box;border-radius:inherit;pointer-events:none;border:3px double CanvasText}}`
/**
 * @license
 * Copyright 2022 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */;let pw=class extends hw{};pw.styles=[uw],pw=bt([at("md-menu-item")],pw);class fw extends Ds{constructor(t="/api"){super(),this.baseLtpPath="/ltp/crt/",this.baseUrlPath=t}}class mw extends fw{constructor(t="/api"){super(),this.baseAgentsPath="/agents/",this.baseUrlPath=t}async getAgent(t){return await this.fetchWrapper(this.baseUrlPath+`${this.baseAgentsPath}${t}`,{},!1)}async getCrt(t){return await this.fetchWrapper(this.baseUrlPath+`${this.baseAgentsPath}${t}`,{},!1)}async createAgent(t,e,i,r){return this.fetchWrapper(this.baseUrlPath+this.baseAgentsPath,{method:"POST",body:JSON.stringify({name:t,agentClassId:e,aiModelId:i,groupId:r})},!1)}async createConnector(t,e,i){return this.fetchWrapper(this.baseUrlPath+`${this.baseAgentsPath}${t}/connectors`,{method:"POST",body:JSON.stringify({connectorClassId:e,name:i})},!1)}async getActiveAiModels(){return this.fetchWrapper(this.baseUrlPath+`${this.baseAgentsPath}registry/aiModels`,{method:"GET"},!1)}async getActiveAgentClasses(){return this.fetchWrapper(this.baseUrlPath+`${this.baseAgentsPath}registry/agentClasses`,{method:"GET"},!1)}async getActiveConnectorClasses(){return this.fetchWrapper(this.baseUrlPath+`${this.baseAgentsPath}registry/connectorClasses`,{method:"GET"},!1)}createTree(t){return this.fetchWrapper(this.baseUrlPath+"/crt",{method:"POST",body:JSON.stringify(t)},!1)}updateNodeChildren(t,e,i){return this.fetchWrapper(this.baseUrlPath+`${this.baseAgentsPath}${t}/updateChildren`,{method:"PUT",body:JSON.stringify({nodeId:e,childrenIds:i})},!1)}reviewConfiguration(t,e){return this.fetchWrapper(this.baseUrlPath+`${this.baseAgentsPath}/reviewConfiguration`,{method:"PUT",body:JSON.stringify({context:e.context,undesirableEffects:e.undesirableEffects,wsClientId:t})},!1,void 0)}createDirectCauses(t,e){return this.fetchWrapper(this.baseUrlPath+`${this.baseAgentsPath}${t}/createDirectCauses`,{method:"POST",body:JSON.stringify({parentNodeId:e})},!1)}addDirectCauses(t,e,i,r){return this.fetchWrapper(this.baseUrlPath+`${this.baseAgentsPath}${t}/addDirectCauses`,{method:"POST",body:JSON.stringify({parentNodeId:e,causes:i,type:r})},!1)}async getAgentCosts(t){const e=await this.fetchWrapper(this.baseUrlPath+`${this.baseAgentsPath}${t}/costs`,{method:"GET"},!1);return parseFloat(e.totalCost)}sendGetRefinedCauseQuery(t,e,i,r,o,n,s){const a=(i=i.filter((t=>"thinking"!=t.type&&"noStreaming"!=t.type))).map((t=>({sender:"bot"==t.sender?"assistant":"user",message:t.rawMessage?t.rawMessage:t.message})));return this.fetchWrapper(this.baseUrlPath+`${this.baseAgentsPath}${t}/getRefinedCauses`,{method:"POST",body:JSON.stringify({wsClientId:r,crtNodeId:e,chatLog:a,effect:o,causes:n,validationErrors:s})},!1)}runValidationChain(t,e,i,r,o,n){const s=(i=i.filter((t=>"thinking"!=t.type&&"noStreaming"!=t.type))).map((t=>({sender:"bot"==t.sender?"assistant":"user",message:t.rawMessage?t.rawMessage:t.message})));return this.fetchWrapper(this.baseUrlPath+`${this.baseAgentsPath}${t}/runValidationChain`,{method:"POST",body:JSON.stringify({wsClientId:r,crtNodeId:e,chatLog:s,effect:o,causes:n})},!1)}updateNode(t,e){return this.fetchWrapper(this.baseUrlPath+`${this.baseAgentsPath}${t}`,{method:"PUT",body:JSON.stringify(e)},!1)}updateNodeConfiguration(t,e,i,r){return this.fetchWrapper(this.baseUrlPath+`${this.baseAgentsPath}${t}/${i}/${e}/configuration`,{method:"PUT",body:JSON.stringify(r)},!1)}async getAgentStatus(t){return this.fetchWrapper(this.baseUrlPath+`${this.baseAgentsPath}${t}/status`,{method:"GET"},!1)}async controlAgent(t,e){return this.fetchWrapper(`/api/agents/${t}/control`,{method:"POST",body:JSON.stringify({action:e})})}async startAgent(t){return this.controlAgent(t,"start")}async pauseAgent(t){return this.controlAgent(t,"pause")}async stopAgent(t){return this.controlAgent(t,"stop")}deleteNode(t,e){return this.fetchWrapper(this.baseUrlPath+`${this.baseAgentsPath}${t}`,{method:"DELETE",body:JSON.stringify({nodeId:e})},!1)}}var gw=function(t,e,i,r){var o,n=arguments.length,s=n<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(n<3?o(s):n>3?o(e,i,s):o(e,i))||s);return n>3&&s&&Object.defineProperty(e,i,s),s};class vw extends Cs{constructor(){super(...arguments),this.currentRunningAgentId=window.psAppGlobals.currentRunningAgentId}connectedCallback(){super.connectedCallback(),window.psAppGlobals.addCurrentAgentListener(this.handleAgentChange.bind(this))}disconnectedCallback(){window.psAppGlobals.removeCurrentAgentListener(this.handleAgentChange.bind(this)),super.disconnectedCallback()}handleAgentChange(t){this.currentRunningAgentId=t}}gw([dt({type:Number})],vw.prototype,"currentRunningAgentId",void 0);var bw=function(t,e,i,r){var o,n=arguments.length,s=n<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(n<3?o(s):n>3?o(e,i,s):o(e,i))||s);return n>3&&s&&Object.defineProperty(e,i,s),s};let yw=class extends vw{constructor(){super(),this.api=new mw}static get styles(){return[super.styles,n`.editButton{position:absolute;bottom:0;right:0;z-index:1500}.typeIconCore{position:absolute;bottom:8px;left:8px}.typeIcon{color:var(--md-sys-color-primary)}.typeIconUde{color:var(--md-sys-color-tertiary)}.typeIconRoot{color:var(--md-sys-color-on-primary)}md-icon-button[root-cause]{--md-icon-button-icon-color:var(--md-sys-color-on-primary)}md-circular-progress{--md-circular-progress-size:28px;margin-bottom:6px}md-menu{--md-menu-z-index:1000;z-index:1000}[hidden]{display:none!important}`]}editNode(){this.fire("edit-node",{nodeId:this.nodeId,element:this})}};bw([dt({type:String})],yw.prototype,"nodeId",void 0),bw([dt({type:Number})],yw.prototype,"posX",void 0),bw([dt({type:Number})],yw.prototype,"posY",void 0),yw=bw([at("ps-operations-base-node")],yw);var xw=function(t,e,i,r){var o,n=arguments.length,s=n<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(n<3?o(s):n>3?o(e,i,s):o(e,i))||s);return n>3&&s&&Object.defineProperty(e,i,s),s};let ww=class extends yw{constructor(){super(),this.isWorking=!1,this.latestMessage="",this.menuOpen=!1,this.api=new mw}connectedCallback(){super.connectedCallback(),this.agent=window.psAppGlobals.getAgentInstance(this.agentId),this.startStatusUpdates()}disconnectedCallback(){super.disconnectedCallback(),this.stopStatusUpdates()}toggleMenu(t){t.stopPropagation(),this.menuOpen=!this.menuOpen,this.requestUpdate()}addConnector(){this.fire("add-connector",{agentId:this.agent.id}),this.menuOpen=!1}startStatusUpdates(){this.updateAgentStatus(),this.statusInterval=window.setInterval((()=>this.updateAgentStatus()),5e3)}stopStatusUpdates(){this.statusInterval&&clearInterval(this.statusInterval)}async updateAgentStatus(){try{const t=await this.api.getAgentStatus(this.agent.id);t&&(this.isWorking="running"===t.state,this.progress=t.progress,this.latestMessage=t.messages[t.messages.length-1]||"",this.latestMessage.indexOf("Agent completed")>-1&&(this.isWorking=!1,this.stopAgent(),this.requestUpdate()),this.requestUpdate(),this.fire("get-costs"))}catch(t){console.error("Failed to get agent status:",t)}}static get styles(){return[super.styles,n`:host{display:block}md-menu{position:absolute;left:0;top:100%;z-index:1000}md-linear-progress{margin:16px;margin-bottom:8px;margin-top:8px}.mainContainer{height:300px;border-radius:16px;display:flex;flex-direction:column;overflow:hidden;position:relative}.image{width:100%;height:113px;object-fit:cover;border-radius:16px 16px 0 0}.contentContainer{flex-grow:1;display:flex;flex-direction:column;padding:8px}.agentClassName{font-size:9px;text-align:center;margin:8px}.agentName{font-size:14px;text-align:center}.statusMessage{font-size:11px;text-align:center;margin-top:8px;border-radius:16px;flex-grow:1;color:var(--md-sys-color-on-surface-variant)}.buttonContainer{display:flex;justify-content:space-between;align-items:center;padding:8px;position:absolute;bottom:0;left:0;right:0}md-circular-progress{--md-circular-progress-size:28px}md-menu{--md-menu-z-index:1000;z-index:1000}[hidden]{display:none!important}`]}async startAgent(){try{await this.api.startAgent(this.agent.id),this.isWorking=!0,window.psAppGlobals.setCurrentRunningAgentId(this.agent.id),this.startStatusUpdates(),this.requestUpdate()}catch(t){console.error("Failed to start agent:",t)}}async pauseAgent(){try{await this.api.pauseAgent(this.agent.id),this.isWorking=!1,window.psAppGlobals.setCurrentRunningAgentId(void 0),this.stopStatusUpdates(),this.requestUpdate()}catch(t){console.error("Failed to pause agent:",t)}}async stopAgent(){try{await this.api.stopAgent(this.agent.id),this.isWorking=!1,window.psAppGlobals.setCurrentRunningAgentId(void 0),this.stopStatusUpdates(),this.requestUpdate()}catch(t){console.error("Failed to stop agent:",t)}}editNode(){this.fire("edit-node",{nodeId:this.nodeId,element:this.agent})}clickPlayPause(){this.agent.id==this.currentRunningAgentId?(this.fireGlobal("pause-agent",{agentId:this.agent.id}),this.pauseAgent(),window.psAppGlobals.setCurrentRunningAgentId(void 0)):(this.startAgent(),this.fireGlobal("run-agent",{agentId:this.agent.id}),window.psAppGlobals.setCurrentRunningAgentId(this.agent.id)),this.requestUpdate()}renderProgress(){if(void 0===this.progress)return U`<md-linear-progress indeterminate></md-linear-progress>`;{const t=Math.min(1,Math.max(0,this.progress/100));return U`<md-linear-progress value="${t}"></md-linear-progress>`}}render(){return this.agent?(this.agent.id==this.currentRunningAgentId?this.parentElement.className="agentContainer agentContainerRunning":this.parentElement.className="agentContainer",U` <div class="mainContainer"> <img class="image" src="${this.agent.Class.configuration.imageUrl}" alt="${this.agent.Class.name}"> <div class="contentContainer"> <div class="agentName">${this.agent.configuration.name}</div> <div class="agentClassName">${this.agent.Class.name}</div> ${this.isWorking?this.renderProgress():j} <div class="statusMessage">${this.latestMessage}</div> </div> <div class="buttonContainer"> <md-icon-button @click="${this.toggleMenu}"> <md-icon>more_vert</md-icon> </md-icon-button> <md-icon-button ?disabled="${window.psAppGlobals.currentRunningAgentId&&this.agent.id!=window.psAppGlobals.currentRunningAgentId}" @click="${this.clickPlayPause}"> <md-icon> ${this.agent.id==window.psAppGlobals.currentRunningAgentId?"pause":"play_arrow"} </md-icon> </md-icon-button> <md-icon-button @click="${this.editNode}"> <md-icon>settings</md-icon> </md-icon-button> </div> ${this.menuOpen?U` <md-menu id="menu" .open="${this.menuOpen}" @closed="${()=>this.menuOpen=!1}"> <md-menu-item @click="${this.stopAgent}">Stop Agent</md-menu-item> <md-menu-item @click="${this.addConnector}">Add Connector</md-menu-item> </md-menu> `:j} </div> `):j}};xw([dt({type:Object})],ww.prototype,"agent",void 0),xw([dt({type:Number})],ww.prototype,"agentId",void 0),xw([dt({type:Boolean})],ww.prototype,"isWorking",void 0),xw([ht()],ww.prototype,"latestMessage",void 0),xw([ht()],ww.prototype,"progress",void 0),xw([ht()],ww.prototype,"menuOpen",void 0),ww=xw([at("ps-agent-node")],ww);var _w=function(t,e,i,r){var o,n=arguments.length,s=n<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(n<3?o(s):n>3?o(e,i,s):o(e,i))||s);return n>3&&s&&Object.defineProperty(e,i,s),s};let kw=class extends yw{connectedCallback(){super.connectedCallback(),this.connector=window.psAppGlobals.getConnectorInstance(this.connectorId)}static get styles(){return[super.styles,n`.image{width:140px;height:79px;border-radius:16px 16px 0 0}.name{height:20px;margin-top:4px;font-size:14px;text-align:center;align-items:center}.mainContainer{border-radius:16px;height:100%}.instanceName{font-size:12px;height:72px}.connectorType{font-size:15px;text-transform:uppercase;padding:8px;padding-top:8px;margin-left:10px}md-icon-button[root-cause]{--md-icon-button-icon-color:var(--md-sys-color-on-primary)}md-circular-progress{--md-circular-progress-size:28px;margin-bottom:6px}md-menu{--md-menu-z-index:1000;z-index:1000}`]}editNode(){this.fire("edit-node",{nodeId:this.nodeId,element:this.connector})}toggleMenu(){const t=this.shadowRoot?.getElementById("menu");t.open=!t.open}renderImage(){return U` <div class="layout horizontal center-center"> <img class="image" src="${this.connector.Class.configuration.imageUrl}"> </div> `}render(){return this.connector?U` <div class="layout vertical mainContainer"> ${this.renderImage()} <div class="name">${this.connector.Class.name}</div> ${this.connector.configuration.name?U`<div class="name instanceName"> ${this.connector.configuration.name} </div>`:j} <md-icon class="typeIconCore">checklist</md-icon> <md-icon-button class="editButton" @click="${this.editNode}"><md-icon>settings</md-icon></md-icon-button> </div> `:j}};_w([dt({type:Object})],kw.prototype,"connector",void 0),_w([dt({type:Number})],kw.prototype,"connectorId",void 0),kw=_w([at("ps-connector-node")],kw);class Cw extends Xx{render(){super.render(),this.model.get("markup");const t=this.model.attributes.nodeType;let e=200,i=230;"connector"===t&&(e=140,i=180);const r=lu("foreignObject",{width:e,height:i,style:"overflow: visible; display: block;"}).node;return lu(this.el).append(r),setTimeout((()=>{const e=document.createElement("div");e.setAttribute("class","html-element"),e.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),"agent"===t?(e.innerHTML=`<ps-agent-node\n          agentId="${this.model.attributes.agentId}"\n        >\n     </ps-agent-node>`,e.className="agentContainer"):(e.innerHTML=`<ps-connector-node\n          connectorId="${this.model.attributes.connectorId}"\n        >\n      </ps-connector-node>`,e.className="connectorContainer"),r.appendChild(e),r.getBoundingClientRect()}),0),this.update(),this}}class Aw extends sb{constructor(){super(...arguments),this.view=Cw}defaults(){return Kf({type:"html.AgentShape",attrs:{},markup:"<div></div>"},sb.prototype.defaults)}}class Sw extends sb{constructor(){super(...arguments),this.view=Cw}defaults(){return Kf({type:"html.Connectorshape",attrs:{},markup:"<div></div>"},sb.prototype.defaults)}}var Tw=function(t,e,i,r){var o,n=arguments.length,s=n<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(n<3?o(s):n>3?o(e,i,s):o(e,i))||s);return n>3&&s&&Object.defineProperty(e,i,s),s};let Pw=class extends vw{constructor(){super(),this.elements={},this.selection=null,this.panning=!1,this.lastClientX=0,this.lastClientY=0,this.jointNamespace={},this.api=new mw}async connectedCallback(){super.connectedCallback(),window.psAppGlobals.activity("Agent Ops - open"),this.addEventListener("add-nodes",this.addNodesEvent),this.addGlobalListener("add-nodes",this.addNodesEvent.bind(this)),window.addEventListener("resize",(()=>{this.updatePaperSize()}))}zoom(t,e,i){const r=this.paper.scale().sx*t,o=this.paper.getComputedSize(),n=t-1,s=(e-o.width/2)*n/t,a=(i-o.height/2)*n/t;this.paper.translate(this.paper.translate().tx-s,this.paper.translate().ty-a),this.paper.scale(r,r)}zoomIn(){const t=this.paper.getComputedSize();this.zoom(1.1,t.width/2,t.height/2)}zoomOut(){const t=this.paper.getComputedSize();this.zoom(.9,t.width/2,t.height/2)}resetZoom(){this.paper.scale(1,1)}firstUpdated(t){this.initializeJointJS(),this.paper.el.addEventListener("wheel",(t=>{t.shiftKey&&(t.preventDefault(),this.debounce&&clearTimeout(this.debounce),this.debounce=window.setTimeout((()=>{const e=this.paper.clientToLocalPoint({x:t.offsetX,y:t.offsetY}),i=t.deltaY<0?1.05:.95;this.zoom(i,e.x,e.y)}),5))}))}addNodesEvent(t){this.addNodes(t.detail.parentNodeId,t.detail.nodes)}updated(t){super.updated(t),t.has("currentAgent")&&this.currentAgent&&(this.paper.freeze(),this.updateGraphWithAgentData(),this.paper.unfreeze())}disconnectedCallback(){super.disconnectedCallback(),window.psAppGlobals.activity("Agent Ops - close")}handleNodeDoubleClick(t,e=!1){const i=t.getBBox();if(e){const t=(i.x+i.width/2)*this.paper.scale().sx,e=(i.y+i.height/2)*this.paper.scale().sy,r=this.paper.scale().sx,o=1/4,n=Math.max(this.paper.options.zoom.min,r*o);this.zoom(n,t,e)}else{const t=i.x+i.width/2,e=i.y+i.height/2;this.zoom(2,t,e)}}createLink(t,e){if(!t||!e)return console.error(`source or target is null ${t} ${e}`),null;return new lb({source:{id:t.id},target:{id:e.id},attrs:{line:{stroke:"var(--md-sys-color-on-surface)",strokeWidth:2,targetMarker:{type:"path",d:"M 10 -5 L 0 0 L 10 5 z",fill:"var(--md-sys-color-on-surface)"}}},z:1,router:{name:"manhattan",args:{step:20}},connector:{name:"rounded"}})}async initializeJointJS(){const t=this.shadowRoot?.getElementById("paper-container");if(!t)return void console.error("Paper container not found");this.graph=new Nx({},{cellNamespace:this.jointNamespace}),this.paper=new nw({elementView:()=>Cw,el:t,model:this.graph,cellViewNamespace:this.jointNamespace,width:"100%",height:"100%",gridSize:20,panning:{enabled:!1,modifiers:"mouseMiddle"},zoom:{enabled:!0,mousewheel:!1,wheelEnabled:!0,max:2,min:.2,step:.2},async:!0,frozen:!0,sorting:nw.sorting.APPROX,background:{color:"var(--md-sys-color-surface)"},clickThreshold:10,defaultConnector:{name:"rounded"},defaultRouter:{name:"manhattan",args:{step:15}}}),this.paper.on("element:pointerclick",(t=>{})),this.paper.on("element:pointerdblclick",((t,e)=>{const i=t.model;e.shiftKey&&this.handleNodeDoubleClick(i,!0),e.shiftKey&&e.ctrlKey&&this.handleNodeDoubleClick(i)})),this.paper.on("blank:pointerclick",((t,e)=>{})),lu(t).prepend(lu("style",{type:"text/css"}).text("\n      .joint-element .selection {\n          stroke: var(--md-sys-color-surface);\n      }\n      .joint-link .selection {\n          stroke: var(--md-sys-color-surface);\n          stroke-dasharray: 5;\n          stroke-dashoffset: 10;\n          animation: dash 0.5s infinite linear;\n      }\n      @keyframes dash {\n          to {\n              stroke-dashoffset: 0;\n          }\n      }\n    ")),Object.assign(this.jointNamespace,{myShapeGroup:{AgentsShapeView:Cw,AgentShape:Aw,ConnectorShape:Sw},standard:{Rectangle:sb}}),this.paper.unfreeze(),this.updatePaperSize(),await this.updateComplete;const e=this.paper.el;e.addEventListener("mousedown",(t=>{1===t.button&&(this.panning=!0,this.lastClientX=t.clientX,this.lastClientY=t.clientY,e.style.cursor="move",t.preventDefault())})),e.addEventListener("mousemove",(t=>{if(this.panning){const e=t.clientX-this.lastClientX,i=t.clientY-this.lastClientY;this.lastClientX=t.clientX,this.lastClientY=t.clientY;const r=this.paper.translate();this.paper.translate(r.tx+e,r.ty+i)}})),e.addEventListener("mouseup",(t=>{this.panning&&1===t.button&&(this.panning=!1,e.style.cursor="default")})),e.addEventListener("mouseleave",(t=>{this.panning&&(this.panning=!1,e.style.cursor="default")}))}applyDirectedGraphLayout(){this.graph.getElements().forEach((t=>{}));const t=this.graph.getBBox(),e=100-t.x-t.width/2,i=100-t.y-t.height/2;this.graph.translate(e,i)}centerParentNodeOnScreen(t){const e=this.elements[t];if(!e)return void console.error(`Parent node with ID ${t} not found.`);const i=this.paper.scale().sx,r=e.getBBox(),o=this.paper.getComputedSize(),n=r.x+r.width/2,s=r.y+r.height/2,a=o.width/2-n*i,l=o.height/2-s*i;this.paper.translate(a-53.5,l-92.5)}updatePaperSize(){this.paper?this.paper.transformToFitContent({padding:78,minScaleX:.2,minScaleY:.2,maxScaleX:1.1,maxScaleY:1.1,preserveAspectRatio:!0,contentArea:this.graph.getBBox(),verticalAlign:"top",horizontalAlign:"middle"}):console.warn("Paper not initialized")}createAgentElement(t){if(this.elements[this.getUniqueAgentId(t)])return this.elements[this.getUniqueAgentId(t)];window.psAppGlobals.addToAgentsRegistry(t);const e=new Aw({position:{x:t.configuration.graphPosX||600*Math.random(),y:t.configuration.graphPosY||400*Math.random()},label:t.Class.configuration.description,text:t.Class.configuration.description,agentId:t.id,nodeType:"agent",attrs:{},type:"html.Element"});return e.addTo(this.graph),e}createConnectorElement(t,e){let i,r,o=this.elements[this.getUniqueAgentId(e)];if(this.elements[this.getUniqueConnectorId(t)]?i=this.elements[this.getUniqueConnectorId(t)]:(window.psAppGlobals.addToConnectorsRegistry(t),r=new Sw({position:{x:t.configuration.graphPosX||600*Math.random(),y:t.configuration.graphPosY||400*Math.random()},label:t.Class.configuration.description,text:t.Class.configuration.description,connectorId:t.id,nodeType:"connector",attrs:{},type:"html.Element"}),r.addTo(this.graph),i=r),o&&i){this.createLink(o,i).addTo(this.graph)}else console.warn("Source or target element not found");return r}getUniqueConnectorId(t){return`connector-${t.id}`}getUniqueAgentId(t){return`agent-${t.id}`}updateGraphWithAgentData(){this.graph.clear(),this.elements={};const t=new Set;this.currentAgent.SubAgents&&this.currentAgent.SubAgents.length>0&&this.currentAgent.SubAgents.forEach((e=>{const i=this.createAgentElement(e);this.elements[this.getUniqueAgentId(e)]=i,t.add(this.getUniqueAgentId(e)),e.Connectors&&e.Connectors.length>0&&e.Connectors.forEach((i=>{const r=this.createConnectorElement(i,e);this.elements[this.getUniqueConnectorId(i)]=r,t.add(this.getUniqueConnectorId(i))}))})),this.currentAgent.Connectors&&this.currentAgent.Connectors.length>0&&this.currentAgent.Connectors.forEach((e=>{const i=this.createConnectorElement(e,this.currentAgent);this.elements[this.getUniqueConnectorId(e)]=i,t.add(this.getUniqueConnectorId(e))})),setTimeout((()=>{this.applyDirectedGraphLayout(),this.updatePaperSize()}))}selectElement(t){this.selection&&(this.unhighlightCell(this.selection),this.graph.getLinks().forEach((t=>this.unhighlightCell(t)))),t?(this.highlightCell(t),this.selection=t):this.selection=null}highlightCell(t){const e=t.findView(this.paper);e&&ry.add(e,t.isElement()?"body":"line","selection",{className:"selection"})}unhighlightCell(t){const e=t.findView(this.paper);e&&ry.remove(e,"selection")}addNodes(t,e){}static get styles(){return[super.styles,n`.agentHeaderImage{max-width:72px;border-radius:16px}.agentHeaderText{font-size:18px;padding:8px;margin-left:16px;margin-right:16px}.agentHeader{margin-left:16px}.mainAgentPlayButton{margin-right:10px}.mainAgentStopButton{--md-filled-icon-button-selected-container-color:var(
            --md-sys-color-error
          );margin-right:10px}.navControls{margin-left:16px}.masterPlayConfigButtons{margin-right:16px}.agentContainer{color:var(--md-sys-color-on-primary-container);background-color:var(--md-sys-color-primary-container);border-radius:16px;padding:0}.agentContainerRunning{color:var(--md-sys-color-on-tertiary-container);background-color:var(--md-sys-color-tertiary-container);border-radius:16px;padding:0}.connectorContainer{color:var(--md-sys-color-on-secondary-container);background-color:var(--md-sys-color-secondary-container);border-radius:16px;padding:0}.jointJSCanvas{width:100vw!important;height:calc(500vh - 90px)!important;overflow-x:auto!important;overflow-y:auto!important}.controlPanel{display:flex;flex-direction:row;justify-content:center;align-items:center;margin:0 0;width:100%;position:absolute;top:64px;left:0;width:100%;height:56px;padding:0;padding-top:4px;opacity:1;background:0 0;color:var(--md-sys-color-on-surface-variant)}.controlPanelContainer{margin:0 0;position:absolute;top:64px;left:0;width:100%;height:62px;padding:0;opacity:.65;background:var(--md-sys-color-surface-variant)}md-filled-tonal-icon-button{margin-left:8px;margin-right:8px}.firstButton{margin-left:16px}.lastButton{margin-right:16px}@keyframes fadeAwayAnimation{0%{opacity:1}8%{opacity:.1}100%{opacity:1}}.fadeAway{animation:fadeAwayAnimation 60.5s}.downloadButton{margin-right:28px}`]}pan(t){const e=this.paper.translate();let i=0,r=0;switch(t){case"left":i=25;break;case"right":i=-25;break;case"up":r=25;break;case"down":r=-25}this.paper.translate(e.tx+i,e.ty+r)}renderHeader(){return U` <div class="layout horizontal center-center agentHeader"> <img src="${this.currentAgent?.Class.configuration.imageUrl}" class="agentHeaderImage"> <div class="layout vertical agentHeaderText"> ${this.currentAgent?.Class.name} </div> </div> `}stop(){this.fireGlobal("pause-agent",{agentId:this.currentAgent.id}),window.psAppGlobals.setCurrentRunningAgentId(void 0)}start(){this.fireGlobal("run-agent",{agentId:this.currentAgent.id}),window.psAppGlobals.setCurrentRunningAgentId(this.currentAgent.id)}render(){return U` <div class="controlPanelContainer"></div> <div class="controlPanel"> <div class="navControls"> <md-icon-button @click="${this.zoomIn}" class="firstButton"><md-icon>zoom_in</md-icon></md-icon-button> <md-icon-button @click="${this.zoomOut}"><md-icon>zoom_out</md-icon></md-icon-button> <md-icon-button @click="${this.resetZoom}"><md-icon>center_focus_strong</md-icon></md-icon-button> <md-icon-button @click="${this.updatePaperSize}"><md-icon>zoom_out_map</md-icon></md-icon-button> </div> <div class="flex"></div> ${this.renderHeader()} <div class="flex"></div> <div class="masterPlayConfigButtons"> ${this.currentRunningAgentId?U`<md-filled-icon-button class="mainAgentStopButton" @click="${this.stop}"><md-icon>stop</md-icon></md-filled-icon-button>`:U`<md-outlined-icon-button class="mainAgentPlayButton" @click="${this.start}"><md-icon>play_arrow</md-icon></md-outlined-icon-button>`} <md-icon-button @click="${()=>this.pan("left")}"><md-icon>settings</md-icon></md-icon-button> </div> <div hidden> <md-icon-button @click="${()=>this.pan("left")}"><md-icon>arrow_back</md-icon></md-icon-button> <md-icon-button @click="${()=>this.pan("up")}"><md-icon>arrow_upward</md-icon></md-icon-button> <md-icon-button @click="${()=>this.pan("down")}"><md-icon>arrow_downward</md-icon></md-icon-button> <md-icon-button @click="${()=>this.pan("right")}" class="lastButton"><md-icon>arrow_forward</md-icon></md-icon-button> </div> </div> <div class="jointJSCanvas" id="paper-container"></div> `}};Tw([dt({type:Object})],Pw.prototype,"currentAgent",void 0),Pw=Tw([at("ps-operations-view")],Pw);
/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
const Ew={dialog:[[[{transform:"translateY(-50px)"},{transform:"translateY(0)"}],{duration:500,easing:Yt}]],scrim:[[[{opacity:0},{opacity:.32}],{duration:500,easing:"linear"}]],container:[[[{opacity:0},{opacity:1}],{duration:50,easing:"linear",pseudoElement:"::before"}],[[{height:"35%"},{height:"100%"}],{duration:500,easing:Yt,pseudoElement:"::before"}]],headline:[[[{opacity:0},{opacity:0,offset:.2},{opacity:1}],{duration:250,easing:"linear",fill:"forwards"}]],content:[[[{opacity:0},{opacity:0,offset:.2},{opacity:1}],{duration:250,easing:"linear",fill:"forwards"}]],actions:[[[{opacity:0},{opacity:0,offset:.5},{opacity:1}],{duration:300,easing:"linear",fill:"forwards"}]]},Iw={dialog:[[[{transform:"translateY(0)"},{transform:"translateY(-50px)"}],{duration:150,easing:Xt}]],scrim:[[[{opacity:.32},{opacity:0}],{duration:150,easing:"linear"}]],container:[[[{height:"100%"},{height:"35%"}],{duration:150,easing:Xt,pseudoElement:"::before"}],[[{opacity:"1"},{opacity:"0"}],{delay:100,duration:50,easing:"linear",pseudoElement:"::before"}]],headline:[[[{opacity:1},{opacity:0}],{duration:100,easing:"linear",fill:"forwards"}]],content:[[[{opacity:1},{opacity:0}],{duration:100,easing:"linear",fill:"forwards"}]],actions:[[[{opacity:1},{opacity:0}],{duration:100,easing:"linear",fill:"forwards"}]]};
/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
class Lw extends nt{get open(){return this.isOpen}set open(t){t!==this.isOpen&&(this.isOpen=t,t?(this.setAttribute("open",""),this.show()):(this.removeAttribute("open"),this.close()))}constructor(){super(),this.quick=!1,this.returnValue="",this.noFocusTrap=!1,this.getOpenAnimation=()=>Ew,this.getCloseAnimation=()=>Iw,this.isOpen=!1,this.isOpening=!1,this.isConnectedPromise=this.getIsConnectedPromise(),this.isAtScrollTop=!1,this.isAtScrollBottom=!1,this.nextClickIsFromContent=!1,this.hasHeadline=!1,this.hasActions=!1,this.hasIcon=!1,this.escapePressedWithoutCancel=!1,this.treewalker=document.createTreeWalker(this,NodeFilter.SHOW_ELEMENT),this.addEventListener("submit",this.handleSubmit)}async show(){this.isOpening=!0,await this.isConnectedPromise,await this.updateComplete;const t=this.dialog;if(t.open||!this.isOpening)return void(this.isOpening=!1);if(!this.dispatchEvent(new Event("open",{cancelable:!0})))return this.open=!1,void(this.isOpening=!1);t.showModal(),this.open=!0,this.scroller&&(this.scroller.scrollTop=0),this.querySelector("[autofocus]")?.focus(),await this.animateDialog(this.getOpenAnimation()),this.dispatchEvent(new Event("opened")),this.isOpening=!1}async close(t=this.returnValue){if(this.isOpening=!1,!this.isConnected)return void(this.open=!1);await this.updateComplete;const e=this.dialog;if(!e.open||this.isOpening)return void(this.open=!1);const i=this.returnValue;this.returnValue=t;this.dispatchEvent(new Event("close",{cancelable:!0}))?(await this.animateDialog(this.getCloseAnimation()),e.close(t),this.open=!1,this.dispatchEvent(new Event("closed"))):this.returnValue=i}connectedCallback(){super.connectedCallback(),this.isConnectedPromiseResolve()}disconnectedCallback(){super.disconnectedCallback(),this.isConnectedPromise=this.getIsConnectedPromise()}render(){const t=this.open&&!(this.isAtScrollTop&&this.isAtScrollBottom),e={"has-headline":this.hasHeadline,"has-actions":this.hasActions,"has-icon":this.hasIcon,scrollable:t,"show-top-divider":t&&!this.isAtScrollTop,"show-bottom-divider":t&&!this.isAtScrollBottom},i=this.open&&!this.noFocusTrap,r=U` <div class="focus-trap" tabindex="0" aria-hidden="true" @focus="${this.handleFocusTrapFocus}"></div> `,{ariaLabel:o}=this;return U` <div class="scrim"></div> <dialog class="${qt(e)}" aria-label="${o||j}" aria-labelledby="${this.hasHeadline?"headline":j}" role="${"alert"===this.type?"alertdialog":j}" @cancel="${this.handleCancel}" @click="${this.handleDialogClick}" @close="${this.handleClose}" @keydown="${this.handleKeydown}" .returnValue="${this.returnValue||j}"> ${i?r:j} <div class="container" @click="${this.handleContentClick}"> <div class="headline"> <div class="icon" aria-hidden="true"> <slot name="icon" @slotchange="${this.handleIconChange}"></slot> </div> <h2 id="headline" aria-hidden="${!this.hasHeadline||j}"> <slot name="headline" @slotchange="${this.handleHeadlineChange}"></slot> </h2> <md-divider></md-divider> </div> <div class="scroller"> <div class="content"> <div class="top anchor"></div> <slot name="content"></slot> <div class="bottom anchor"></div> </div> </div> <div class="actions"> <md-divider></md-divider> <slot name="actions" @slotchange="${this.handleActionsChange}"></slot> </div> </div> ${i?r:j} </dialog> `}firstUpdated(){this.intersectionObserver=new IntersectionObserver((t=>{for(const e of t)this.handleAnchorIntersection(e)}),{root:this.scroller}),this.intersectionObserver.observe(this.topAnchor),this.intersectionObserver.observe(this.bottomAnchor)}handleDialogClick(){if(this.nextClickIsFromContent)return void(this.nextClickIsFromContent=!1);!this.dispatchEvent(new Event("cancel",{cancelable:!0}))||this.close()}handleContentClick(){this.nextClickIsFromContent=!0}handleSubmit(t){const e=t.target,{submitter:i}=t;"dialog"===e.method&&i&&this.close(i.getAttribute("value")??this.returnValue)}handleCancel(t){if(t.target!==this.dialog)return;this.escapePressedWithoutCancel=!1;const e=!Jo(this,t);t.preventDefault(),e||this.close()}handleClose(){this.escapePressedWithoutCancel&&(this.escapePressedWithoutCancel=!1,this.dialog?.dispatchEvent(new Event("cancel",{cancelable:!0})))}handleKeydown(t){"Escape"===t.key&&(this.escapePressedWithoutCancel=!0,setTimeout((()=>{this.escapePressedWithoutCancel=!1})))}async animateDialog(t){if(this.cancelAnimations?.abort(),this.cancelAnimations=new AbortController,this.quick)return;const{dialog:e,scrim:i,container:r,headline:o,content:n,actions:s}=this;if(!(e&&i&&r&&o&&n&&s))return;const{container:a,dialog:l,scrim:c,headline:d,content:h,actions:u}=t,p=[[e,l??[]],[i,c??[]],[r,a??[]],[o,d??[]],[n,h??[]],[s,u??[]]],f=[];for(const[t,e]of p)for(const i of e){const e=t.animate(...i);this.cancelAnimations.signal.addEventListener("abort",(()=>{e.cancel()})),f.push(e)}await Promise.all(f.map((t=>t.finished.catch((()=>{})))))}handleHeadlineChange(t){const e=t.target;this.hasHeadline=e.assignedElements().length>0}handleActionsChange(t){const e=t.target;this.hasActions=e.assignedElements().length>0}handleIconChange(t){const e=t.target;this.hasIcon=e.assignedElements().length>0}handleAnchorIntersection(t){const{target:e,isIntersecting:i}=t;e===this.topAnchor&&(this.isAtScrollTop=i),e===this.bottomAnchor&&(this.isAtScrollBottom=i)}getIsConnectedPromise(){return new Promise((t=>{this.isConnectedPromiseResolve=t}))}handleFocusTrapFocus(t){const[e,i]=this.getFirstAndLastFocusableChildren();if(!e||!i)return void this.dialog?.focus();const r=t.target===this.firstFocusTrap,o=!r,n=t.relatedTarget===e,s=t.relatedTarget===i,a=!n&&!s;if(o&&s||r&&a)return void e.focus();(r&&n||o&&a)&&i.focus()}getFirstAndLastFocusableChildren(){let t=null,e=null;for(this.treewalker.currentNode=this.treewalker.root;this.treewalker.nextNode();){const i=this.treewalker.currentNode;Ow(i)&&(t||(t=i),e=i)}return[t,e]}}function Ow(t){const e=":not(:disabled,[disabled])";if(t.matches(":is(button,input,select,textarea,object,:is(a,area)[href],[tabindex],[contenteditable=true])"+e+':not([tabindex^="-"])'))return!0;return!!t.localName.includes("-")&&(!!t.matches(e)&&(t.shadowRoot?.delegatesFocus??!1))}
/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */Tt(Lw),bt([dt({type:Boolean})],Lw.prototype,"open",null),bt([dt({type:Boolean})],Lw.prototype,"quick",void 0),bt([dt({attribute:!1})],Lw.prototype,"returnValue",void 0),bt([dt()],Lw.prototype,"type",void 0),bt([dt({type:Boolean,attribute:"no-focus-trap"})],Lw.prototype,"noFocusTrap",void 0),bt([pt("dialog")],Lw.prototype,"dialog",void 0),bt([pt(".scrim")],Lw.prototype,"scrim",void 0),bt([pt(".container")],Lw.prototype,"container",void 0),bt([pt(".headline")],Lw.prototype,"headline",void 0),bt([pt(".content")],Lw.prototype,"content",void 0),bt([pt(".actions")],Lw.prototype,"actions",void 0),bt([ht()],Lw.prototype,"isAtScrollTop",void 0),bt([ht()],Lw.prototype,"isAtScrollBottom",void 0),bt([pt(".scroller")],Lw.prototype,"scroller",void 0),bt([pt(".top.anchor")],Lw.prototype,"topAnchor",void 0),bt([pt(".bottom.anchor")],Lw.prototype,"bottomAnchor",void 0),bt([pt(".focus-trap")],Lw.prototype,"firstFocusTrap",void 0),bt([ht()],Lw.prototype,"hasHeadline",void 0),bt([ht()],Lw.prototype,"hasActions",void 0),bt([ht()],Lw.prototype,"hasIcon",void 0);const Rw=n`:host{border-start-start-radius:var(--md-dialog-container-shape-start-start,var(--md-dialog-container-shape,var(--md-sys-shape-corner-extra-large,28px)));border-start-end-radius:var(--md-dialog-container-shape-start-end,var(--md-dialog-container-shape,var(--md-sys-shape-corner-extra-large,28px)));border-end-end-radius:var(--md-dialog-container-shape-end-end,var(--md-dialog-container-shape,var(--md-sys-shape-corner-extra-large,28px)));border-end-start-radius:var(--md-dialog-container-shape-end-start,var(--md-dialog-container-shape,var(--md-sys-shape-corner-extra-large,28px)));display:contents;margin:auto;max-height:min(560px,100% - 48px);max-width:min(560px,100% - 48px);min-height:140px;min-width:280px;position:fixed;height:fit-content;width:fit-content}dialog{background:rgba(0,0,0,0);border:none;border-radius:inherit;flex-direction:column;height:inherit;margin:inherit;max-height:inherit;max-width:inherit;min-height:inherit;min-width:inherit;outline:0;overflow:visible;padding:0;width:inherit}dialog[open]{display:flex}::backdrop{background:0 0}.scrim{background:var(--md-sys-color-scrim,#000);display:none;inset:0;opacity:32%;pointer-events:none;position:fixed;z-index:1}:host([open]) .scrim{display:flex}h2{all:unset;align-self:stretch}.headline{align-items:center;color:var(--md-dialog-headline-color,var(--md-sys-color-on-surface,#1d1b20));display:flex;flex-direction:column;font-family:var(--md-dialog-headline-font,var(--md-sys-typescale-headline-small-font,var(--md-ref-typeface-brand,Roboto)));font-size:var(--md-dialog-headline-size,var(--md-sys-typescale-headline-small-size,1.5rem));line-height:var(--md-dialog-headline-line-height,var(--md-sys-typescale-headline-small-line-height,2rem));font-weight:var(--md-dialog-headline-weight,var(--md-sys-typescale-headline-small-weight,var(--md-ref-typeface-weight-regular,400)));position:relative}slot[name=headline]::slotted(*){align-items:center;align-self:stretch;box-sizing:border-box;display:flex;gap:8px;padding:24px 24px 0}.icon{display:flex}slot[name=icon]::slotted(*){color:var(--md-dialog-icon-color,var(--md-sys-color-secondary,#625b71));fill:currentColor;font-size:var(--md-dialog-icon-size,24px);margin-top:24px;height:var(--md-dialog-icon-size,24px);width:var(--md-dialog-icon-size,24px)}.has-icon slot[name=headline]::slotted(*){justify-content:center;padding-top:16px}.scrollable slot[name=headline]::slotted(*){padding-bottom:16px}.scrollable.has-headline slot[name=content]::slotted(*){padding-top:8px}.container{border-radius:inherit;display:flex;flex-direction:column;flex-grow:1;overflow:hidden;position:relative;transform-origin:top}.container::before{background:var(--md-dialog-container-color,var(--md-sys-color-surface-container-high,#ece6f0));border-radius:inherit;content:"";inset:0;position:absolute}.scroller{display:flex;flex:1;flex-direction:column;overflow:hidden;z-index:1}.scrollable .scroller{overflow-y:scroll}.content{color:var(--md-dialog-supporting-text-color,var(--md-sys-color-on-surface-variant,#49454f));font-family:var(--md-dialog-supporting-text-font,var(--md-sys-typescale-body-medium-font,var(--md-ref-typeface-plain,Roboto)));font-size:var(--md-dialog-supporting-text-size,var(--md-sys-typescale-body-medium-size,.875rem));line-height:var(--md-dialog-supporting-text-line-height,var(--md-sys-typescale-body-medium-line-height,1.25rem));font-weight:var(--md-dialog-supporting-text-weight,var(--md-sys-typescale-body-medium-weight,var(--md-ref-typeface-weight-regular,400)));height:min-content;position:relative}slot[name=content]::slotted(*){box-sizing:border-box;padding:24px}.anchor{position:absolute}.top.anchor{top:0}.bottom.anchor{bottom:0}.actions{position:relative}slot[name=actions]::slotted(*){box-sizing:border-box;display:flex;gap:8px;justify-content:flex-end;padding:16px 24px 24px}.has-actions slot[name=content]::slotted(*){padding-bottom:8px}md-divider{display:none;position:absolute}.has-actions.show-bottom-divider .actions md-divider,.has-headline.show-top-divider .headline md-divider{display:flex}.headline md-divider{bottom:0}.actions md-divider{top:0}@media(forced-colors:active){dialog{outline:2px solid WindowText}}`
/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */;let $w=class extends Lw{};$w.styles=[Rw],$w=bt([at("md-dialog")],$w);
/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
class Mw extends fn{}
/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Nw=n`:host{--_container-height:var(--md-text-button-container-height, 40px);--_disabled-label-text-color:var(--md-text-button-disabled-label-text-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-label-text-opacity:var(--md-text-button-disabled-label-text-opacity, 0.38);--_focus-label-text-color:var(--md-text-button-focus-label-text-color, var(--md-sys-color-primary, #6750a4));--_hover-label-text-color:var(--md-text-button-hover-label-text-color, var(--md-sys-color-primary, #6750a4));--_hover-state-layer-color:var(--md-text-button-hover-state-layer-color, var(--md-sys-color-primary, #6750a4));--_hover-state-layer-opacity:var(--md-text-button-hover-state-layer-opacity, 0.08);--_label-text-color:var(--md-text-button-label-text-color, var(--md-sys-color-primary, #6750a4));--_label-text-font:var(--md-text-button-label-text-font, var(--md-sys-typescale-label-large-font, var(--md-ref-typeface-plain, Roboto)));--_label-text-line-height:var(--md-text-button-label-text-line-height, var(--md-sys-typescale-label-large-line-height, 1.25rem));--_label-text-size:var(--md-text-button-label-text-size, var(--md-sys-typescale-label-large-size, 0.875rem));--_label-text-weight:var(--md-text-button-label-text-weight, var(--md-sys-typescale-label-large-weight, var(--md-ref-typeface-weight-medium, 500)));--_pressed-label-text-color:var(--md-text-button-pressed-label-text-color, var(--md-sys-color-primary, #6750a4));--_pressed-state-layer-color:var(--md-text-button-pressed-state-layer-color, var(--md-sys-color-primary, #6750a4));--_pressed-state-layer-opacity:var(--md-text-button-pressed-state-layer-opacity, 0.12);--_disabled-icon-color:var(--md-text-button-disabled-icon-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-icon-opacity:var(--md-text-button-disabled-icon-opacity, 0.38);--_focus-icon-color:var(--md-text-button-focus-icon-color, var(--md-sys-color-primary, #6750a4));--_hover-icon-color:var(--md-text-button-hover-icon-color, var(--md-sys-color-primary, #6750a4));--_icon-color:var(--md-text-button-icon-color, var(--md-sys-color-primary, #6750a4));--_icon-size:var(--md-text-button-icon-size, 18px);--_pressed-icon-color:var(--md-text-button-pressed-icon-color, var(--md-sys-color-primary, #6750a4));--_container-shape-start-start:var(--md-text-button-container-shape-start-start, var(--md-text-button-container-shape, var(--md-sys-shape-corner-full, 9999px)));--_container-shape-start-end:var(--md-text-button-container-shape-start-end, var(--md-text-button-container-shape, var(--md-sys-shape-corner-full, 9999px)));--_container-shape-end-end:var(--md-text-button-container-shape-end-end, var(--md-text-button-container-shape, var(--md-sys-shape-corner-full, 9999px)));--_container-shape-end-start:var(--md-text-button-container-shape-end-start, var(--md-text-button-container-shape, var(--md-sys-shape-corner-full, 9999px)));--_leading-space:var(--md-text-button-leading-space, 12px);--_trailing-space:var(--md-text-button-trailing-space, 12px);--_with-leading-icon-leading-space:var(--md-text-button-with-leading-icon-leading-space, 12px);--_with-leading-icon-trailing-space:var(--md-text-button-with-leading-icon-trailing-space, 16px);--_with-trailing-icon-leading-space:var(--md-text-button-with-trailing-icon-leading-space, 16px);--_with-trailing-icon-trailing-space:var(--md-text-button-with-trailing-icon-trailing-space, 12px);--_container-color:none;--_disabled-container-color:none;--_disabled-container-opacity:0}`
/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */;let Dw=class extends Mw{};Dw.styles=[vn,Nw],Dw=bt([at("md-text-button")],Dw);
/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
class zw extends fn{renderElevationOrOutline(){return U`<md-elevation part="elevation"></md-elevation>`}}
/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Fw=n`:host{--_container-color:var(--md-filled-button-container-color, var(--md-sys-color-primary, #6750a4));--_container-elevation:var(--md-filled-button-container-elevation, 0);--_container-height:var(--md-filled-button-container-height, 40px);--_container-shadow-color:var(--md-filled-button-container-shadow-color, var(--md-sys-color-shadow, #000));--_disabled-container-color:var(--md-filled-button-disabled-container-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-container-elevation:var(--md-filled-button-disabled-container-elevation, 0);--_disabled-container-opacity:var(--md-filled-button-disabled-container-opacity, 0.12);--_disabled-label-text-color:var(--md-filled-button-disabled-label-text-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-label-text-opacity:var(--md-filled-button-disabled-label-text-opacity, 0.38);--_focus-container-elevation:var(--md-filled-button-focus-container-elevation, 0);--_focus-label-text-color:var(--md-filled-button-focus-label-text-color, var(--md-sys-color-on-primary, #fff));--_hover-container-elevation:var(--md-filled-button-hover-container-elevation, 1);--_hover-label-text-color:var(--md-filled-button-hover-label-text-color, var(--md-sys-color-on-primary, #fff));--_hover-state-layer-color:var(--md-filled-button-hover-state-layer-color, var(--md-sys-color-on-primary, #fff));--_hover-state-layer-opacity:var(--md-filled-button-hover-state-layer-opacity, 0.08);--_label-text-color:var(--md-filled-button-label-text-color, var(--md-sys-color-on-primary, #fff));--_label-text-font:var(--md-filled-button-label-text-font, var(--md-sys-typescale-label-large-font, var(--md-ref-typeface-plain, Roboto)));--_label-text-line-height:var(--md-filled-button-label-text-line-height, var(--md-sys-typescale-label-large-line-height, 1.25rem));--_label-text-size:var(--md-filled-button-label-text-size, var(--md-sys-typescale-label-large-size, 0.875rem));--_label-text-weight:var(--md-filled-button-label-text-weight, var(--md-sys-typescale-label-large-weight, var(--md-ref-typeface-weight-medium, 500)));--_pressed-container-elevation:var(--md-filled-button-pressed-container-elevation, 0);--_pressed-label-text-color:var(--md-filled-button-pressed-label-text-color, var(--md-sys-color-on-primary, #fff));--_pressed-state-layer-color:var(--md-filled-button-pressed-state-layer-color, var(--md-sys-color-on-primary, #fff));--_pressed-state-layer-opacity:var(--md-filled-button-pressed-state-layer-opacity, 0.12);--_disabled-icon-color:var(--md-filled-button-disabled-icon-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-icon-opacity:var(--md-filled-button-disabled-icon-opacity, 0.38);--_focus-icon-color:var(--md-filled-button-focus-icon-color, var(--md-sys-color-on-primary, #fff));--_hover-icon-color:var(--md-filled-button-hover-icon-color, var(--md-sys-color-on-primary, #fff));--_icon-color:var(--md-filled-button-icon-color, var(--md-sys-color-on-primary, #fff));--_icon-size:var(--md-filled-button-icon-size, 18px);--_pressed-icon-color:var(--md-filled-button-pressed-icon-color, var(--md-sys-color-on-primary, #fff));--_container-shape-start-start:var(--md-filled-button-container-shape-start-start, var(--md-filled-button-container-shape, var(--md-sys-shape-corner-full, 9999px)));--_container-shape-start-end:var(--md-filled-button-container-shape-start-end, var(--md-filled-button-container-shape, var(--md-sys-shape-corner-full, 9999px)));--_container-shape-end-end:var(--md-filled-button-container-shape-end-end, var(--md-filled-button-container-shape, var(--md-sys-shape-corner-full, 9999px)));--_container-shape-end-start:var(--md-filled-button-container-shape-end-start, var(--md-filled-button-container-shape, var(--md-sys-shape-corner-full, 9999px)));--_leading-space:var(--md-filled-button-leading-space, 24px);--_trailing-space:var(--md-filled-button-trailing-space, 24px);--_with-leading-icon-leading-space:var(--md-filled-button-with-leading-icon-leading-space, 16px);--_with-leading-icon-trailing-space:var(--md-filled-button-with-leading-icon-trailing-space, 24px);--_with-trailing-icon-leading-space:var(--md-filled-button-with-trailing-icon-leading-space, 24px);--_with-trailing-icon-trailing-space:var(--md-filled-button-with-trailing-icon-trailing-space, 16px)}`
/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */;let Bw=class extends zw{};Bw.styles=[vn,hd,Fw],Bw=bt([at("md-filled-button")],Bw);const Uw="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4vianca6w0s2x0a2z0ure5ba0by2idu3namex3narepublic11d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2ntley5rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0cast4mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dabur3d1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0ardian6cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6logistics9properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3ncaster6d0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2psy3ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2tura4vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9dnavy5lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0america6xi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0a1b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp2w2ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4finity6ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",Vw="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",jw=(t,e)=>{for(const i in e)t[i]=e[i];return t},Gw="numeric",Hw="ascii",qw="alpha",Ww="asciinumeric",Yw="alphanumeric",Xw="domain",Jw="emoji",Qw="scheme",Kw="slashscheme",Zw="whitespace";function t_(t,e){return t in e||(e[t]=[]),e[t]}function e_(t,e,i){e[Gw]&&(e[Ww]=!0,e[Yw]=!0),e[Hw]&&(e[Ww]=!0,e[qw]=!0),e[Ww]&&(e[Yw]=!0),e[qw]&&(e[Yw]=!0),e[Yw]&&(e[Xw]=!0),e[Jw]&&(e[Xw]=!0);for(const r in e){const e=t_(r,i);e.indexOf(t)<0&&e.push(t)}}function i_(t){void 0===t&&(t=null),this.j={},this.jr=[],this.jd=null,this.t=t}i_.groups={},i_.prototype={accepts(){return!!this.t},go(t){const e=this,i=e.j[t];if(i)return i;for(let i=0;i<e.jr.length;i++){const r=e.jr[i][0],o=e.jr[i][1];if(o&&r.test(t))return o}return e.jd},has(t,e){return void 0===e&&(e=!1),e?t in this.j:!!this.go(t)},ta(t,e,i,r){for(let o=0;o<t.length;o++)this.tt(t[o],e,i,r)},tr(t,e,i,r){let o;return r=r||i_.groups,e&&e.j?o=e:(o=new i_(e),i&&r&&e_(e,i,r)),this.jr.push([t,o]),o},ts(t,e,i,r){let o=this;const n=t.length;if(!n)return o;for(let e=0;e<n-1;e++)o=o.tt(t[e]);return o.tt(t[n-1],e,i,r)},tt(t,e,i,r){r=r||i_.groups;const o=this;if(e&&e.j)return o.j[t]=e,e;const n=e;let s,a=o.go(t);if(a?(s=new i_,jw(s.j,a.j),s.jr.push.apply(s.jr,a.jr),s.jd=a.jd,s.t=a.t):s=new i_,n){if(r)if(s.t&&"string"==typeof s.t){const t=jw(function(t,e){const i={};for(const r in e)e[r].indexOf(t)>=0&&(i[r]=!0);return i}(s.t,r),i);e_(n,t,r)}else i&&e_(n,i,r);s.t=n}return o.j[t]=s,s}};const r_=(t,e,i,r,o)=>t.ta(e,i,r,o),o_=(t,e,i,r,o)=>t.tr(e,i,r,o),n_=(t,e,i,r,o)=>t.ts(e,i,r,o),s_=(t,e,i,r,o)=>t.tt(e,i,r,o),a_="WORD",l_="UWORD",c_="LOCALHOST",d_="TLD",h_="UTLD",u_="SCHEME",p_="SLASH_SCHEME",f_="NUM",m_="WS",g_="NL",v_="OPENBRACE",b_="CLOSEBRACE",y_="OPENBRACKET",x_="CLOSEBRACKET",w_="OPENPAREN",__="CLOSEPAREN",k_="OPENANGLEBRACKET",C_="CLOSEANGLEBRACKET",A_="FULLWIDTHLEFTPAREN",S_="FULLWIDTHRIGHTPAREN",T_="LEFTCORNERBRACKET",P_="RIGHTCORNERBRACKET",E_="LEFTWHITECORNERBRACKET",I_="RIGHTWHITECORNERBRACKET",L_="FULLWIDTHLESSTHAN",O_="FULLWIDTHGREATERTHAN",R_="AMPERSAND",$_="APOSTROPHE",M_="ASTERISK",N_="AT",D_="BACKSLASH",z_="BACKTICK",F_="CARET",B_="COLON",U_="COMMA",V_="DOLLAR",j_="DOT",G_="EQUALS",H_="EXCLAMATION",q_="HYPHEN",W_="PERCENT",Y_="PIPE",X_="PLUS",J_="POUND",Q_="QUERY",K_="QUOTE",Z_="SEMI",tk="SLASH",ek="TILDE",ik="UNDERSCORE",rk="EMOJI",ok="SYM";var nk=Object.freeze({__proto__:null,WORD:a_,UWORD:l_,LOCALHOST:c_,TLD:d_,UTLD:h_,SCHEME:u_,SLASH_SCHEME:p_,NUM:f_,WS:m_,NL:g_,OPENBRACE:v_,CLOSEBRACE:b_,OPENBRACKET:y_,CLOSEBRACKET:x_,OPENPAREN:w_,CLOSEPAREN:__,OPENANGLEBRACKET:k_,CLOSEANGLEBRACKET:C_,FULLWIDTHLEFTPAREN:A_,FULLWIDTHRIGHTPAREN:S_,LEFTCORNERBRACKET:T_,RIGHTCORNERBRACKET:P_,LEFTWHITECORNERBRACKET:E_,RIGHTWHITECORNERBRACKET:I_,FULLWIDTHLESSTHAN:L_,FULLWIDTHGREATERTHAN:O_,AMPERSAND:R_,APOSTROPHE:$_,ASTERISK:M_,AT:N_,BACKSLASH:D_,BACKTICK:z_,CARET:F_,COLON:B_,COMMA:U_,DOLLAR:V_,DOT:j_,EQUALS:G_,EXCLAMATION:H_,HYPHEN:q_,PERCENT:W_,PIPE:Y_,PLUS:X_,POUND:J_,QUERY:Q_,QUOTE:K_,SEMI:Z_,SLASH:tk,TILDE:ek,UNDERSCORE:ik,EMOJI:rk,SYM:ok});const sk=/[a-z]/,ak=/\p{L}/u,lk=/\p{Emoji}/u,ck=/\d/,dk=/\s/,hk="\n",uk="",pk="";let fk=null,mk=null;function gk(t,e,i,r,o){let n;const s=e.length;for(let i=0;i<s-1;i++){const s=e[i];t.j[s]?n=t.j[s]:(n=new i_(r),n.jr=o.slice(),t.j[s]=n),t=n}return n=new i_(i),n.jr=o.slice(),t.j[e[s-1]]=n,n}function vk(t){const e=[],i=[];let r=0;for(;r<t.length;){let o=0;for(;"0123456789".indexOf(t[r+o])>=0;)o++;if(o>0){e.push(i.join(""));for(let e=parseInt(t.substring(r,r+o),10);e>0;e--)i.pop();r+=o}else i.push(t[r]),r++}return e}const bk={defaultProtocol:"http",events:null,format:xk,formatHref:xk,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function yk(t,e){void 0===e&&(e=null);let i=jw({},bk);t&&(i=jw(i,t instanceof yk?t.o:t));const r=i.ignoreTags,o=[];for(let t=0;t<r.length;t++)o.push(r[t].toUpperCase());this.o=i,e&&(this.defaultRender=e),this.ignoreTags=o}function xk(t){return t}function wk(t,e){this.t="token",this.v=t,this.tk=e}function _k(t,e){class i extends wk{constructor(e,i){super(e,i),this.t=t}}for(const t in e)i.prototype[t]=e[t];return i.t=t,i}yk.prototype={o:bk,ignoreTags:[],defaultRender:t=>t,check(t){return this.get("validate",t.toString(),t)},get(t,e,i){const r=null!=e;let o=this.o[t];return o?("object"==typeof o?(o=i.t in o?o[i.t]:bk[t],"function"==typeof o&&r&&(o=o(e,i))):"function"==typeof o&&r&&(o=o(e,i.t,i)),o):o},getObj(t,e,i){let r=this.o[t];return"function"==typeof r&&null!=e&&(r=r(e,i.t,i)),r},render(t){const e=t.render(this);return(this.get("render",null,t)||this.defaultRender)(e,t.t,t)}},wk.prototype={isLink:!1,toString(){return this.v},toHref(t){return this.toString()},toFormattedString(t){const e=this.toString(),i=t.get("truncate",e,this),r=t.get("format",e,this);return i&&r.length>i?r.substring(0,i)+"":r},toFormattedHref(t){return t.get("formatHref",this.toHref(t.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(t){return void 0===t&&(t=bk.defaultProtocol),{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(t),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(t){return{type:this.t,value:this.toFormattedString(t),isLink:this.isLink,href:this.toFormattedHref(t),start:this.startIndex(),end:this.endIndex()}},validate(t){return t.get("validate",this.toString(),this)},render(t){const e=this,i=this.toHref(t.get("defaultProtocol")),r=t.get("formatHref",i,this),o=t.get("tagName",i,e),n=this.toFormattedString(t),s={},a=t.get("className",i,e),l=t.get("target",i,e),c=t.get("rel",i,e),d=t.getObj("attributes",i,e),h=t.getObj("events",i,e);return s.href=r,a&&(s.class=a),l&&(s.target=l),c&&(s.rel=c),d&&jw(s,d),{tagName:o,attributes:s,content:n,eventListeners:h}}};const kk=_k("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),Ck=_k("text"),Ak=_k("nl"),Sk=_k("url",{isLink:!0,toHref(t){return void 0===t&&(t=bk.defaultProtocol),this.hasProtocol()?this.v:`${t}://${this.v}`},hasProtocol(){const t=this.tk;return t.length>=2&&t[0].t!==c_&&t[1].t===B_}}),Tk=t=>new i_(t);function Pk(t,e,i){const r=i[0].s,o=i[i.length-1].e;return new t(e.slice(r,o),i)}const Ek={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function Ik(){Ek.scanner=function(t){void 0===t&&(t=[]);const e={};i_.groups=e;const i=new i_;null==fk&&(fk=vk(Uw)),null==mk&&(mk=vk(Vw)),s_(i,"'",$_),s_(i,"{",v_),s_(i,"}",b_),s_(i,"[",y_),s_(i,"]",x_),s_(i,"(",w_),s_(i,")",__),s_(i,"<",k_),s_(i,">",C_),s_(i,"",A_),s_(i,"",S_),s_(i,"",T_),s_(i,"",P_),s_(i,"",E_),s_(i,"",I_),s_(i,"",L_),s_(i,"",O_),s_(i,"&",R_),s_(i,"*",M_),s_(i,"@",N_),s_(i,"`",z_),s_(i,"^",F_),s_(i,":",B_),s_(i,",",U_),s_(i,"$",V_),s_(i,".",j_),s_(i,"=",G_),s_(i,"!",H_),s_(i,"-",q_),s_(i,"%",W_),s_(i,"|",Y_),s_(i,"+",X_),s_(i,"#",J_),s_(i,"?",Q_),s_(i,'"',K_),s_(i,"/",tk),s_(i,";",Z_),s_(i,"~",ek),s_(i,"_",ik),s_(i,"\\",D_);const r=o_(i,ck,f_,{[Gw]:!0});o_(r,ck,r);const o=o_(i,sk,a_,{[Hw]:!0});o_(o,sk,o);const n=o_(i,ak,l_,{[qw]:!0});o_(n,sk),o_(n,ak,n);const s=o_(i,dk,m_,{[Zw]:!0});s_(i,hk,g_,{[Zw]:!0}),s_(s,hk),o_(s,dk,s);const a=o_(i,lk,rk,{[Jw]:!0});o_(a,lk,a),s_(a,uk,a);const l=s_(a,pk);o_(l,lk,a);const c=[[sk,o]],d=[[sk,null],[ak,n]];for(let t=0;t<fk.length;t++)gk(i,fk[t],d_,a_,c);for(let t=0;t<mk.length;t++)gk(i,mk[t],h_,l_,d);e_(d_,{tld:!0,ascii:!0},e),e_(h_,{utld:!0,alpha:!0},e),gk(i,"file",u_,a_,c),gk(i,"mailto",u_,a_,c),gk(i,"http",p_,a_,c),gk(i,"https",p_,a_,c),gk(i,"ftp",p_,a_,c),gk(i,"ftps",p_,a_,c),e_(u_,{scheme:!0,ascii:!0},e),e_(p_,{slashscheme:!0,ascii:!0},e),t=t.sort(((t,e)=>t[0]>e[0]?1:-1));for(let e=0;e<t.length;e++){const r=t[e][0],o=t[e][1]?{[Qw]:!0}:{[Kw]:!0};r.indexOf("-")>=0?o[Xw]=!0:sk.test(r)?ck.test(r)?o[Ww]=!0:o[Hw]=!0:o[Gw]=!0,n_(i,r,r,o)}return n_(i,"localhost",c_,{ascii:!0}),i.jd=new i_(ok),{start:i,tokens:jw({groups:e},nk)}}(Ek.customSchemes);for(let t=0;t<Ek.tokenQueue.length;t++)Ek.tokenQueue[t][1]({scanner:Ek.scanner});Ek.parser=function(t){let{groups:e}=t;const i=e.domain.concat([R_,M_,N_,D_,z_,F_,V_,G_,q_,f_,W_,Y_,X_,J_,tk,ok,ek,ik]),r=[$_,B_,U_,j_,H_,Q_,K_,Z_,k_,C_,v_,b_,x_,y_,w_,__,A_,S_,T_,P_,E_,I_,L_,O_],o=[R_,$_,M_,D_,z_,F_,V_,G_,q_,v_,b_,W_,Y_,X_,J_,Q_,tk,ok,ek,ik],n=Tk(),s=s_(n,ek);r_(s,o,s),r_(s,e.domain,s);const a=Tk(),l=Tk(),c=Tk();r_(n,e.domain,a),r_(n,e.scheme,l),r_(n,e.slashscheme,c),r_(a,o,s),r_(a,e.domain,a);const d=s_(a,N_);s_(s,N_,d),s_(l,N_,d),s_(c,N_,d);const h=s_(s,j_);r_(h,o,s),r_(h,e.domain,s);const u=Tk();r_(d,e.domain,u),r_(u,e.domain,u);const p=s_(u,j_);r_(p,e.domain,u);const f=Tk(kk);r_(p,e.tld,f),r_(p,e.utld,f),s_(d,c_,f);const m=s_(u,q_);r_(m,e.domain,u),r_(f,e.domain,u),s_(f,j_,p),s_(f,q_,m);const g=s_(f,B_);r_(g,e.numeric,kk);const v=s_(a,q_),b=s_(a,j_);r_(v,e.domain,a),r_(b,o,s),r_(b,e.domain,a);const y=Tk(Sk);r_(b,e.tld,y),r_(b,e.utld,y),r_(y,e.domain,a),r_(y,o,s),s_(y,j_,b),s_(y,q_,v),s_(y,N_,d);const x=s_(y,B_),w=Tk(Sk);r_(x,e.numeric,w);const _=Tk(Sk),k=Tk();r_(_,i,_),r_(_,r,k),r_(k,i,_),r_(k,r,k),s_(y,tk,_),s_(w,tk,_);const C=s_(l,B_),A=s_(c,B_),S=s_(A,tk),T=s_(S,tk);r_(l,e.domain,a),s_(l,j_,b),s_(l,q_,v),r_(c,e.domain,a),s_(c,j_,b),s_(c,q_,v),r_(C,e.domain,_),s_(C,tk,_),r_(T,e.domain,_),r_(T,i,_),s_(T,tk,_);const P=[[v_,b_],[y_,x_],[w_,__],[k_,C_],[A_,S_],[T_,P_],[E_,I_],[L_,O_]];for(let t=0;t<P.length;t++){const[e,o]=P[t],n=s_(_,e);s_(k,e,n),s_(n,o,_);const s=Tk(Sk);r_(n,i,s);const a=Tk();r_(n,r),r_(s,i,s),r_(s,r,a),r_(a,i,s),r_(a,r,a),s_(s,o,_),s_(a,o,_)}return s_(n,c_,y),s_(n,g_,Ak),{start:n,tokens:nk}}(Ek.scanner.tokens);for(let t=0;t<Ek.pluginQueue.length;t++)Ek.pluginQueue[t][1]({scanner:Ek.scanner,parser:Ek.parser});Ek.initialized=!0}function Lk(t){return Ek.initialized||Ik(),function(t,e,i){let r=i.length,o=0,n=[],s=[];for(;o<r;){let a=t,l=null,c=null,d=0,h=null,u=-1;for(;o<r&&!(l=a.go(i[o].t));)s.push(i[o++]);for(;o<r&&(c=l||a.go(i[o].t));)l=null,a=c,a.accepts()?(u=0,h=a):u>=0&&u++,o++,d++;if(u<0)o-=d,o<r&&(s.push(i[o]),o++);else{s.length>0&&(n.push(Pk(Ck,e,s)),s=[]),o-=u,d-=u;const t=h.t,r=i.slice(o-d,o);n.push(Pk(t,e,r))}}return s.length>0&&n.push(Pk(Ck,e,s)),n}(Ek.parser.start,t,function(t,e){const i=function(t){const e=[],i=t.length;let r=0;for(;r<i;){let o,n=t.charCodeAt(r),s=n<55296||n>56319||r+1===i||(o=t.charCodeAt(r+1))<56320||o>57343?t[r]:t.slice(r,r+2);e.push(s),r+=s.length}return e}(e.replace(/[A-Z]/g,(t=>t.toLowerCase()))),r=i.length,o=[];let n=0,s=0;for(;s<r;){let a=t,l=null,c=0,d=null,h=-1,u=-1;for(;s<r&&(l=a.go(i[s]));)a=l,a.accepts()?(h=0,u=0,d=a):h>=0&&(h+=i[s].length,u++),c+=i[s].length,n+=i[s].length,s++;n-=h,s-=u,c-=h,o.push({t:d.t,v:e.slice(n-c,n),s:n-c,e:n})}return o}(Ek.scanner.start,t))}var Ok={amp:"&",gt:">",lt:"<",nbsp:"",quot:'"'},Rk=/^#[xX]([A-Fa-f0-9]+)$/,$k=/^#([0-9]+)$/,Mk=/^([A-Za-z0-9]+)$/,Nk=function(){function t(t){this.named=t}return t.prototype.parse=function(t){if(t){var e=t.match(Rk);return e?String.fromCharCode(parseInt(e[1],16)):(e=t.match($k))?String.fromCharCode(parseInt(e[1],10)):(e=t.match(Mk))?this.named[e[1]]||"&"+e[1]+";":void 0}},t}(),Dk=/[\t\n\f ]/,zk=/[A-Za-z]/,Fk=/\r\n?/g;function Bk(t){return Dk.test(t)}function Uk(t){return zk.test(t)}var Vk=function(){function t(t,e,i){void 0===i&&(i="precompile"),this.delegate=t,this.entityParser=e,this.mode=i,this.state="beforeData",this.line=-1,this.column=-1,this.input="",this.index=-1,this.tagNameBuffer="",this.states={beforeData:function(){var t=this.peek();if("<"!==t||this.isIgnoredEndTag()){if("precompile"===this.mode&&"\n"===t){var e=this.tagNameBuffer.toLowerCase();"pre"!==e&&"textarea"!==e||this.consume()}this.transitionTo("data"),this.delegate.beginData()}else this.transitionTo("tagOpen"),this.markTagStart(),this.consume()},data:function(){var t=this.peek(),e=this.tagNameBuffer;"<"!==t||this.isIgnoredEndTag()?"&"===t&&"script"!==e&&"style"!==e?(this.consume(),this.delegate.appendToData(this.consumeCharRef()||"&")):(this.consume(),this.delegate.appendToData(t)):(this.delegate.finishData(),this.transitionTo("tagOpen"),this.markTagStart(),this.consume())},tagOpen:function(){var t=this.consume();"!"===t?this.transitionTo("markupDeclarationOpen"):"/"===t?this.transitionTo("endTagOpen"):("@"===t||":"===t||Uk(t))&&(this.transitionTo("tagName"),this.tagNameBuffer="",this.delegate.beginStartTag(),this.appendToTagName(t))},markupDeclarationOpen:function(){var t=this.consume();"-"===t&&"-"===this.peek()?(this.consume(),this.transitionTo("commentStart"),this.delegate.beginComment()):"DOCTYPE"===t.toUpperCase()+this.input.substring(this.index,this.index+6).toUpperCase()&&(this.consume(),this.consume(),this.consume(),this.consume(),this.consume(),this.consume(),this.transitionTo("doctype"),this.delegate.beginDoctype&&this.delegate.beginDoctype())},doctype:function(){Bk(this.consume())&&this.transitionTo("beforeDoctypeName")},beforeDoctypeName:function(){var t=this.consume();Bk(t)||(this.transitionTo("doctypeName"),this.delegate.appendToDoctypeName&&this.delegate.appendToDoctypeName(t.toLowerCase()))},doctypeName:function(){var t=this.consume();Bk(t)?this.transitionTo("afterDoctypeName"):">"===t?(this.delegate.endDoctype&&this.delegate.endDoctype(),this.transitionTo("beforeData")):this.delegate.appendToDoctypeName&&this.delegate.appendToDoctypeName(t.toLowerCase())},afterDoctypeName:function(){var t=this.consume();if(!Bk(t))if(">"===t)this.delegate.endDoctype&&this.delegate.endDoctype(),this.transitionTo("beforeData");else{var e=t.toUpperCase()+this.input.substring(this.index,this.index+5).toUpperCase(),i="PUBLIC"===e.toUpperCase(),r="SYSTEM"===e.toUpperCase();(i||r)&&(this.consume(),this.consume(),this.consume(),this.consume(),this.consume(),this.consume()),i?this.transitionTo("afterDoctypePublicKeyword"):r&&this.transitionTo("afterDoctypeSystemKeyword")}},afterDoctypePublicKeyword:function(){var t=this.peek();Bk(t)?(this.transitionTo("beforeDoctypePublicIdentifier"),this.consume()):'"'===t?(this.transitionTo("doctypePublicIdentifierDoubleQuoted"),this.consume()):"'"===t?(this.transitionTo("doctypePublicIdentifierSingleQuoted"),this.consume()):">"===t&&(this.consume(),this.delegate.endDoctype&&this.delegate.endDoctype(),this.transitionTo("beforeData"))},doctypePublicIdentifierDoubleQuoted:function(){var t=this.consume();'"'===t?this.transitionTo("afterDoctypePublicIdentifier"):">"===t?(this.delegate.endDoctype&&this.delegate.endDoctype(),this.transitionTo("beforeData")):this.delegate.appendToDoctypePublicIdentifier&&this.delegate.appendToDoctypePublicIdentifier(t)},doctypePublicIdentifierSingleQuoted:function(){var t=this.consume();"'"===t?this.transitionTo("afterDoctypePublicIdentifier"):">"===t?(this.delegate.endDoctype&&this.delegate.endDoctype(),this.transitionTo("beforeData")):this.delegate.appendToDoctypePublicIdentifier&&this.delegate.appendToDoctypePublicIdentifier(t)},afterDoctypePublicIdentifier:function(){var t=this.consume();Bk(t)?this.transitionTo("betweenDoctypePublicAndSystemIdentifiers"):">"===t?(this.delegate.endDoctype&&this.delegate.endDoctype(),this.transitionTo("beforeData")):'"'===t?this.transitionTo("doctypeSystemIdentifierDoubleQuoted"):"'"===t&&this.transitionTo("doctypeSystemIdentifierSingleQuoted")},betweenDoctypePublicAndSystemIdentifiers:function(){var t=this.consume();Bk(t)||(">"===t?(this.delegate.endDoctype&&this.delegate.endDoctype(),this.transitionTo("beforeData")):'"'===t?this.transitionTo("doctypeSystemIdentifierDoubleQuoted"):"'"===t&&this.transitionTo("doctypeSystemIdentifierSingleQuoted"))},doctypeSystemIdentifierDoubleQuoted:function(){var t=this.consume();'"'===t?this.transitionTo("afterDoctypeSystemIdentifier"):">"===t?(this.delegate.endDoctype&&this.delegate.endDoctype(),this.transitionTo("beforeData")):this.delegate.appendToDoctypeSystemIdentifier&&this.delegate.appendToDoctypeSystemIdentifier(t)},doctypeSystemIdentifierSingleQuoted:function(){var t=this.consume();"'"===t?this.transitionTo("afterDoctypeSystemIdentifier"):">"===t?(this.delegate.endDoctype&&this.delegate.endDoctype(),this.transitionTo("beforeData")):this.delegate.appendToDoctypeSystemIdentifier&&this.delegate.appendToDoctypeSystemIdentifier(t)},afterDoctypeSystemIdentifier:function(){var t=this.consume();Bk(t)||">"===t&&(this.delegate.endDoctype&&this.delegate.endDoctype(),this.transitionTo("beforeData"))},commentStart:function(){var t=this.consume();"-"===t?this.transitionTo("commentStartDash"):">"===t?(this.delegate.finishComment(),this.transitionTo("beforeData")):(this.delegate.appendToCommentData(t),this.transitionTo("comment"))},commentStartDash:function(){var t=this.consume();"-"===t?this.transitionTo("commentEnd"):">"===t?(this.delegate.finishComment(),this.transitionTo("beforeData")):(this.delegate.appendToCommentData("-"),this.transitionTo("comment"))},comment:function(){var t=this.consume();"-"===t?this.transitionTo("commentEndDash"):this.delegate.appendToCommentData(t)},commentEndDash:function(){var t=this.consume();"-"===t?this.transitionTo("commentEnd"):(this.delegate.appendToCommentData("-"+t),this.transitionTo("comment"))},commentEnd:function(){var t=this.consume();">"===t?(this.delegate.finishComment(),this.transitionTo("beforeData")):(this.delegate.appendToCommentData("--"+t),this.transitionTo("comment"))},tagName:function(){var t=this.consume();Bk(t)?this.transitionTo("beforeAttributeName"):"/"===t?this.transitionTo("selfClosingStartTag"):">"===t?(this.delegate.finishTag(),this.transitionTo("beforeData")):this.appendToTagName(t)},endTagName:function(){var t=this.consume();Bk(t)?(this.transitionTo("beforeAttributeName"),this.tagNameBuffer=""):"/"===t?(this.transitionTo("selfClosingStartTag"),this.tagNameBuffer=""):">"===t?(this.delegate.finishTag(),this.transitionTo("beforeData"),this.tagNameBuffer=""):this.appendToTagName(t)},beforeAttributeName:function(){var t=this.peek();Bk(t)?this.consume():"/"===t?(this.transitionTo("selfClosingStartTag"),this.consume()):">"===t?(this.consume(),this.delegate.finishTag(),this.transitionTo("beforeData")):"="===t?(this.delegate.reportSyntaxError("attribute name cannot start with equals sign"),this.transitionTo("attributeName"),this.delegate.beginAttribute(),this.consume(),this.delegate.appendToAttributeName(t)):(this.transitionTo("attributeName"),this.delegate.beginAttribute())},attributeName:function(){var t=this.peek();Bk(t)?(this.transitionTo("afterAttributeName"),this.consume()):"/"===t?(this.delegate.beginAttributeValue(!1),this.delegate.finishAttributeValue(),this.consume(),this.transitionTo("selfClosingStartTag")):"="===t?(this.transitionTo("beforeAttributeValue"),this.consume()):">"===t?(this.delegate.beginAttributeValue(!1),this.delegate.finishAttributeValue(),this.consume(),this.delegate.finishTag(),this.transitionTo("beforeData")):'"'===t||"'"===t||"<"===t?(this.delegate.reportSyntaxError(t+" is not a valid character within attribute names"),this.consume(),this.delegate.appendToAttributeName(t)):(this.consume(),this.delegate.appendToAttributeName(t))},afterAttributeName:function(){var t=this.peek();Bk(t)?this.consume():"/"===t?(this.delegate.beginAttributeValue(!1),this.delegate.finishAttributeValue(),this.consume(),this.transitionTo("selfClosingStartTag")):"="===t?(this.consume(),this.transitionTo("beforeAttributeValue")):">"===t?(this.delegate.beginAttributeValue(!1),this.delegate.finishAttributeValue(),this.consume(),this.delegate.finishTag(),this.transitionTo("beforeData")):(this.delegate.beginAttributeValue(!1),this.delegate.finishAttributeValue(),this.transitionTo("attributeName"),this.delegate.beginAttribute(),this.consume(),this.delegate.appendToAttributeName(t))},beforeAttributeValue:function(){var t=this.peek();Bk(t)?this.consume():'"'===t?(this.transitionTo("attributeValueDoubleQuoted"),this.delegate.beginAttributeValue(!0),this.consume()):"'"===t?(this.transitionTo("attributeValueSingleQuoted"),this.delegate.beginAttributeValue(!0),this.consume()):">"===t?(this.delegate.beginAttributeValue(!1),this.delegate.finishAttributeValue(),this.consume(),this.delegate.finishTag(),this.transitionTo("beforeData")):(this.transitionTo("attributeValueUnquoted"),this.delegate.beginAttributeValue(!1),this.consume(),this.delegate.appendToAttributeValue(t))},attributeValueDoubleQuoted:function(){var t=this.consume();'"'===t?(this.delegate.finishAttributeValue(),this.transitionTo("afterAttributeValueQuoted")):"&"===t?this.delegate.appendToAttributeValue(this.consumeCharRef()||"&"):this.delegate.appendToAttributeValue(t)},attributeValueSingleQuoted:function(){var t=this.consume();"'"===t?(this.delegate.finishAttributeValue(),this.transitionTo("afterAttributeValueQuoted")):"&"===t?this.delegate.appendToAttributeValue(this.consumeCharRef()||"&"):this.delegate.appendToAttributeValue(t)},attributeValueUnquoted:function(){var t=this.peek();Bk(t)?(this.delegate.finishAttributeValue(),this.consume(),this.transitionTo("beforeAttributeName")):"/"===t?(this.delegate.finishAttributeValue(),this.consume(),this.transitionTo("selfClosingStartTag")):"&"===t?(this.consume(),this.delegate.appendToAttributeValue(this.consumeCharRef()||"&")):">"===t?(this.delegate.finishAttributeValue(),this.consume(),this.delegate.finishTag(),this.transitionTo("beforeData")):(this.consume(),this.delegate.appendToAttributeValue(t))},afterAttributeValueQuoted:function(){var t=this.peek();Bk(t)?(this.consume(),this.transitionTo("beforeAttributeName")):"/"===t?(this.consume(),this.transitionTo("selfClosingStartTag")):">"===t?(this.consume(),this.delegate.finishTag(),this.transitionTo("beforeData")):this.transitionTo("beforeAttributeName")},selfClosingStartTag:function(){">"===this.peek()?(this.consume(),this.delegate.markTagAsSelfClosing(),this.delegate.finishTag(),this.transitionTo("beforeData")):this.transitionTo("beforeAttributeName")},endTagOpen:function(){var t=this.consume();("@"===t||":"===t||Uk(t))&&(this.transitionTo("endTagName"),this.tagNameBuffer="",this.delegate.beginEndTag(),this.appendToTagName(t))}},this.reset()}return t.prototype.reset=function(){this.transitionTo("beforeData"),this.input="",this.tagNameBuffer="",this.index=0,this.line=1,this.column=0,this.delegate.reset()},t.prototype.transitionTo=function(t){this.state=t},t.prototype.tokenize=function(t){this.reset(),this.tokenizePart(t),this.tokenizeEOF()},t.prototype.tokenizePart=function(t){for(this.input+=function(t){return t.replace(Fk,"\n")}(t);this.index<this.input.length;){var e=this.states[this.state];if(void 0===e)throw new Error("unhandled state "+this.state);e.call(this)}},t.prototype.tokenizeEOF=function(){this.flushData()},t.prototype.flushData=function(){"data"===this.state&&(this.delegate.finishData(),this.transitionTo("beforeData"))},t.prototype.peek=function(){return this.input.charAt(this.index)},t.prototype.consume=function(){var t=this.peek();return this.index++,"\n"===t?(this.line++,this.column=0):this.column++,t},t.prototype.consumeCharRef=function(){var t=this.input.indexOf(";",this.index);if(-1!==t){var e=this.input.slice(this.index,t),i=this.entityParser.parse(e);if(i){for(var r=e.length;r;)this.consume(),r--;return this.consume(),i}}},t.prototype.markTagStart=function(){this.delegate.tagOpen()},t.prototype.appendToTagName=function(t){this.tagNameBuffer+=t,this.delegate.appendToTagName(t)},t.prototype.isIgnoredEndTag=function(){var t=this.tagNameBuffer;return"title"===t&&"</title>"!==this.input.substring(this.index,this.index+8)||"style"===t&&"</style>"!==this.input.substring(this.index,this.index+8)||"script"===t&&"<\/script>"!==this.input.substring(this.index,this.index+9)},t}(),jk=function(){function t(t,e){void 0===e&&(e={}),this.options=e,this.token=null,this.startLine=1,this.startColumn=0,this.tokens=[],this.tokenizer=new Vk(this,t,e.mode),this._currentAttribute=void 0}return t.prototype.tokenize=function(t){return this.tokens=[],this.tokenizer.tokenize(t),this.tokens},t.prototype.tokenizePart=function(t){return this.tokens=[],this.tokenizer.tokenizePart(t),this.tokens},t.prototype.tokenizeEOF=function(){return this.tokens=[],this.tokenizer.tokenizeEOF(),this.tokens[0]},t.prototype.reset=function(){this.token=null,this.startLine=1,this.startColumn=0},t.prototype.current=function(){var t=this.token;if(null===t)throw new Error("token was unexpectedly null");if(0===arguments.length)return t;for(var e=0;e<arguments.length;e++)if(t.type===arguments[e])return t;throw new Error("token type was unexpectedly "+t.type)},t.prototype.push=function(t){this.token=t,this.tokens.push(t)},t.prototype.currentAttribute=function(){return this._currentAttribute},t.prototype.addLocInfo=function(){this.options.loc&&(this.current().loc={start:{line:this.startLine,column:this.startColumn},end:{line:this.tokenizer.line,column:this.tokenizer.column}}),this.startLine=this.tokenizer.line,this.startColumn=this.tokenizer.column},t.prototype.beginDoctype=function(){this.push({type:"Doctype",name:""})},t.prototype.appendToDoctypeName=function(t){this.current("Doctype").name+=t},t.prototype.appendToDoctypePublicIdentifier=function(t){var e=this.current("Doctype");void 0===e.publicIdentifier?e.publicIdentifier=t:e.publicIdentifier+=t},t.prototype.appendToDoctypeSystemIdentifier=function(t){var e=this.current("Doctype");void 0===e.systemIdentifier?e.systemIdentifier=t:e.systemIdentifier+=t},t.prototype.endDoctype=function(){this.addLocInfo()},t.prototype.beginData=function(){this.push({type:"Chars",chars:""})},t.prototype.appendToData=function(t){this.current("Chars").chars+=t},t.prototype.finishData=function(){this.addLocInfo()},t.prototype.beginComment=function(){this.push({type:"Comment",chars:""})},t.prototype.appendToCommentData=function(t){this.current("Comment").chars+=t},t.prototype.finishComment=function(){this.addLocInfo()},t.prototype.tagOpen=function(){},t.prototype.beginStartTag=function(){this.push({type:"StartTag",tagName:"",attributes:[],selfClosing:!1})},t.prototype.beginEndTag=function(){this.push({type:"EndTag",tagName:""})},t.prototype.finishTag=function(){this.addLocInfo()},t.prototype.markTagAsSelfClosing=function(){this.current("StartTag").selfClosing=!0},t.prototype.appendToTagName=function(t){this.current("StartTag","EndTag").tagName+=t},t.prototype.beginAttribute=function(){this._currentAttribute=["","",!1]},t.prototype.appendToAttributeName=function(t){this.currentAttribute()[0]+=t},t.prototype.beginAttributeValue=function(t){this.currentAttribute()[2]=t},t.prototype.appendToAttributeValue=function(t){this.currentAttribute()[1]+=t},t.prototype.finishAttributeValue=function(){this.current("StartTag").attributes.push(this._currentAttribute)},t.prototype.reportSyntaxError=function(t){this.current().syntaxError=t},t}();const Gk="LinkifyResult",Hk="StartTag",qk="EndTag",Wk="Chars";function Yk(t,e){void 0===e&&(e={});const i=function(t,e){return new jk(new Nk(Ok),e).tokenize(t)}(t),r=[],o=[],n=new yk(e,Qk);for(let t=0;t<i.length;t++){const e=i[t];if(e.type===Hk){r.push(e);const o=e.tagName.toUpperCase();if(!("A"===o||n.ignoreTags.indexOf(o)>=0))continue;let s=r.length;Jk(o,i,++t,r),t+=r.length-s-1}else if(e.type!==Wk)r.push(e);else{const t=Xk(e.chars,n);r.push.apply(r,t)}}for(let t=0;t<r.length;t++){const e=r[t];switch(e.type){case Gk:o.push(e.rendered);break;case Hk:{let t="<"+e.tagName;e.attributes.length>0&&(t+=" "+tC(e.attributes).join(" ")),e.selfClosing&&(t+=" /"),t+=">",o.push(t);break}case qk:o.push(`</${e.tagName}>`);break;case Wk:o.push(Kk(e.chars));break;case"Comment":o.push(`\x3c!--${Kk(e.chars)}--\x3e`);break;case"Doctype":{let t=`<!DOCTYPE ${e.name}`;e.publicIdentifier&&(t+=` PUBLIC "${e.publicIdentifier}"`),e.systemIdentifier&&(t+=` "${e.systemIdentifier}"`),t+=">",o.push(t);break}}}return o.join("")}function Xk(t,e){const i=Lk(t),r=[];for(let t=0;t<i.length;t++){const o=i[t];"nl"===o.t&&e.get("nl2br")?r.push({type:Hk,tagName:"br",attributes:[],selfClosing:!0}):o.isLink&&e.check(o)?r.push({type:Gk,rendered:e.render(o)}):r.push({type:Wk,chars:o.toString()})}return r}function Jk(t,e,i,r){let o=1;for(;i<e.length&&o>0;){let n=e[i];n.type===Hk&&n.tagName.toUpperCase()===t?o++:n.type===qk&&n.tagName.toUpperCase()===t&&o--,r.push(n),i++}return r}function Qk(t){let{tagName:e,attributes:i,content:r}=t;return`<${e} ${function(t){const e=[];for(const i in t){const r=t[i]+"";e.push(`${i}="${Zk(r)}"`)}return e.join(" ")}(i)}>${Kk(r)}</${e}>`}function Kk(t){return t.replace(/</g,"&lt;").replace(/>/g,"&gt;")}function Zk(t){return t.replace(/"/g,"&quot;")}function tC(t){const e=[];for(let i=0;i<t.length;i++){const r=t[i][0],o=t[i][1]+"";e.push(`${r}="${Zk(o)}"`)}return e}
/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class eC extends an{computeValidity(t){return this.selectControl||(this.selectControl=document.createElement("select")),ot(U`<option value="${t.value}"></option>`,this.selectControl),this.selectControl.value=t.value,this.selectControl.required=t.required,{validity:this.selectControl.validity,validationMessage:this.selectControl.validationMessage}}equals(t,e){return t.value===e.value&&t.required===e.required}copy({value:t,required:e}){return{value:t,required:e}}}
/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
var iC;const rC=Symbol("value"),oC=td(rn(sn(je(nt))));class nC extends oC{get value(){return this[rC]}set value(t){this.lastUserSetValue=t,this.select(t)}get options(){return this.menu?.items??[]}get selectedIndex(){const[t,e]=(this.getSelectedOptions()??[])[0]??[];return e??-1}set selectedIndex(t){this.lastUserSetSelectedIndex=t,this.selectIndex(t)}get selectedOptions(){return(this.getSelectedOptions()??[]).map((([t])=>t))}get hasError(){return this.error||this.nativeError}constructor(){super(),this.quick=!1,this.required=!1,this.errorText="",this.label="",this.noAsterisk=!1,this.supportingText="",this.error=!1,this.menuPositioning="popover",this.clampMenuWidth=!1,this.typeaheadDelay=200,this.hasLeadingIcon=!1,this.displayText="",this.menuAlign="start",this[iC]="",this.lastUserSetValue=null,this.lastUserSetSelectedIndex=null,this.lastSelectedOption=null,this.lastSelectedOptionRecords=[],this.nativeError=!1,this.nativeErrorText="",this.focused=!1,this.open=!1,this.defaultFocus=Tr,this.prevOpen=this.open,this.selectWidth=0,this.addEventListener("focus",this.handleFocus.bind(this)),this.addEventListener("blur",this.handleBlur.bind(this))}select(t){const e=this.options.find((e=>e.value===t));e&&this.selectItem(e)}selectIndex(t){const e=this.options[t];e&&this.selectItem(e)}reset(){for(const t of this.options)t.selected=t.hasAttribute("selected");this.updateValueAndDisplayText(),this.nativeError=!1,this.nativeErrorText=""}[(iC=rC,Xc)](t){t?.preventDefault();const e=this.getErrorText();this.nativeError=!!t,this.nativeErrorText=this.validationMessage,e===this.getErrorText()&&this.field?.reannounceError()}update(t){if(this.hasUpdated||this.initUserSelection(),this.prevOpen!==this.open&&this.open){const t=this.getBoundingClientRect();this.selectWidth=t.width}this.prevOpen=this.open,super.update(t)}render(){return U` <span class="select ${qt(this.getRenderClasses())}" @focusout="${this.handleFocusout}"> ${this.renderField()} ${this.renderMenu()} </span> `}async firstUpdated(t){await(this.menu?.updateComplete),this.lastSelectedOptionRecords.length||this.initUserSelection(),this.lastSelectedOptionRecords.length||this.options.length||setTimeout((()=>{this.updateValueAndDisplayText()})),super.firstUpdated(t)}getRenderClasses(){return{disabled:this.disabled,error:this.error,open:this.open}}renderField(){return xe`
      <${this.fieldTag}
          aria-haspopup="listbox"
          role="combobox"
          part="field"
          id="field"
          tabindex=${this.disabled?"-1":"0"}
          aria-label=${this.ariaLabel||j}
          aria-describedby="description"
          aria-expanded=${this.open?"true":"false"}
          aria-controls="listbox"
          class="field"
          label=${this.label}
          ?no-asterisk=${this.noAsterisk}
          .focused=${this.focused||this.open}
          .populated=${!!this.displayText}
          .disabled=${this.disabled}
          .required=${this.required}
          .error=${this.hasError}
          ?has-start=${this.hasLeadingIcon}
          has-end
          supporting-text=${this.supportingText}
          error-text=${this.getErrorText()}
          @keydown=${this.handleKeydown}
          @click=${this.handleClick}>
         ${this.renderFieldContent()}
         <div id="description" slot="aria-describedby"></div>
      </${this.fieldTag}>`}renderFieldContent(){return[this.renderLeadingIcon(),this.renderLabel(),this.renderTrailingIcon()]}renderLeadingIcon(){return U` <span class="icon leading" slot="start"> <slot name="leading-icon" @slotchange="${this.handleIconChange}"></slot> </span> `}renderTrailingIcon(){return U` <span class="icon trailing" slot="end"> <slot name="trailing-icon" @slotchange="${this.handleIconChange}"> <svg height="5" viewBox="7 10 10 5" focusable="false"> <polygon class="down" stroke="none" fill-rule="evenodd" points="7 10 12 15 17 10"></polygon> <polygon class="up" stroke="none" fill-rule="evenodd" points="7 15 12 10 17 15"></polygon> </svg> </slot> </span> `}renderLabel(){return U`<div id="label">${this.displayText||U`&nbsp;`}</div>`}renderMenu(){const t=this.label||this.ariaLabel;return U`<div class="menu-wrapper"> <md-menu id="listbox" .defaultFocus="${this.defaultFocus}" role="listbox" tabindex="-1" aria-label="${t||j}" stay-open-on-focusout part="menu" exportparts="focus-ring: menu-focus-ring" anchor="field" style="${yr({"--__menu-min-width":`${this.selectWidth}px`,"--__menu-max-width":this.clampMenuWidth?`${this.selectWidth}px`:void 0})}" no-navigation-wrap .open="${this.open}" .quick="${this.quick}" .positioning="${this.menuPositioning}" .typeaheadDelay="${this.typeaheadDelay}" .anchorCorner="${"start"===this.menuAlign?"end-start":"end-end"}" .menuCorner="${"start"===this.menuAlign?"start-start":"start-end"}" @opening="${this.handleOpening}" @opened="${this.redispatchEvent}" @closing="${this.redispatchEvent}" @closed="${this.handleClosed}" @close-menu="${this.handleCloseMenu}" @request-selection="${this.handleRequestSelection}" @request-deselection="${this.handleRequestDeselection}"> ${this.renderMenuContent()} </md-menu> </div>`}renderMenuContent(){return U`<slot></slot>`}handleKeydown(t){if(this.open||this.disabled||!this.menu)return;const e=this.menu.typeaheadController,i="Space"===t.code||"ArrowDown"===t.code||"ArrowUp"===t.code||"End"===t.code||"Home"===t.code||"Enter"===t.code;if(!e.isTypingAhead&&i){switch(t.preventDefault(),this.open=!0,t.code){case"Space":case"ArrowDown":case"Enter":this.defaultFocus=Tr;break;case"End":this.defaultFocus=Ir;break;case"ArrowUp":case"Home":this.defaultFocus=Er}return}if(1===t.key.length){e.onKeydown(t),t.preventDefault();const{lastActiveRecord:i}=e;if(!i)return;this.labelEl?.setAttribute?.("aria-live","polite");this.selectItem(i[Mr])&&this.dispatchInteractionEvents()}}handleClick(){this.open=!this.open}handleFocus(){this.focused=!0}handleBlur(){this.focused=!1}handleFocusout(t){t.relatedTarget&&Sr(t.relatedTarget,this)||(this.open=!1)}getSelectedOptions(){if(!this.menu)return this.lastSelectedOptionRecords=[],null;const t=this.menu.items;return this.lastSelectedOptionRecords=function(t){const e=[];for(let i=0;i<t.length;i++){const r=t[i];r.selected&&e.push([r,i])}return e}(t),this.lastSelectedOptionRecords}async getUpdateComplete(){return await(this.menu?.updateComplete),super.getUpdateComplete()}updateValueAndDisplayText(){const t=this.getSelectedOptions()??[];let e=!1;if(t.length){const[i]=t[0];e=this.lastSelectedOption!==i,this.lastSelectedOption=i,this[rC]=i.value,this.displayText=i.displayText}else e=null!==this.lastSelectedOption,this.lastSelectedOption=null,this[rC]="",this.displayText="";return e}async handleOpening(t){if(this.labelEl?.removeAttribute?.("aria-live"),this.redispatchEvent(t),this.defaultFocus!==Tr)return;const e=this.menu.items,i=ke(e)?.item;let[r]=this.lastSelectedOptionRecords[0]??[null];i&&i!==r&&(i.tabIndex=-1),r=r??e[0],r&&(r.tabIndex=0,r.focus())}redispatchEvent(t){Jo(this,t)}handleClosed(t){this.open=!1,this.redispatchEvent(t)}handleCloseMenu(t){const e=t.detail.reason,i=t.detail.itemPath[0];this.open=!1;let r=!1;var o;"click-selection"===e.kind||"keydown"===e.kind&&(o=e.key,Object.values(wr).some((t=>t===o)))?r=this.selectItem(i):(i.tabIndex=-1,i.blur()),r&&this.dispatchInteractionEvents()}selectItem(t){return(this.getSelectedOptions()??[]).forEach((([e])=>{t!==e&&(e.selected=!1)})),t.selected=!0,this.updateValueAndDisplayText()}handleRequestSelection(t){const e=t.target;this.lastSelectedOptionRecords.some((([t])=>t===e))||this.selectItem(e)}handleRequestDeselection(t){const e=t.target;this.lastSelectedOptionRecords.some((([t])=>t===e))&&this.updateValueAndDisplayText()}initUserSelection(){this.lastUserSetValue&&!this.lastSelectedOptionRecords.length?this.select(this.lastUserSetValue):null===this.lastUserSetSelectedIndex||this.lastSelectedOptionRecords.length?this.updateValueAndDisplayText():this.selectIndex(this.lastUserSetSelectedIndex)}handleIconChange(){this.hasLeadingIcon=this.leadingIcons.length>0}dispatchInteractionEvents(){this.dispatchEvent(new Event("input",{bubbles:!0,composed:!0})),this.dispatchEvent(new Event("change",{bubbles:!0}))}getErrorText(){return this.error?this.errorText:this.nativeErrorText}[on](){return this.value}formResetCallback(){this.reset()}formStateRestoreCallback(t){this.value=t}click(){this.field?.click()}[Qo](){return new eC((()=>this))}[Ko](){return this.field}}Tt(nC),nC.shadowRootOptions={...nt.shadowRootOptions,delegatesFocus:!0},bt([dt({type:Boolean})],nC.prototype,"quick",void 0),bt([dt({type:Boolean})],nC.prototype,"required",void 0),bt([dt({type:String,attribute:"error-text"})],nC.prototype,"errorText",void 0),bt([dt()],nC.prototype,"label",void 0),bt([dt({type:Boolean,attribute:"no-asterisk"})],nC.prototype,"noAsterisk",void 0),bt([dt({type:String,attribute:"supporting-text"})],nC.prototype,"supportingText",void 0),bt([dt({type:Boolean,reflect:!0})],nC.prototype,"error",void 0),bt([dt({attribute:"menu-positioning"})],nC.prototype,"menuPositioning",void 0),bt([dt({type:Boolean,attribute:"clamp-menu-width"})],nC.prototype,"clampMenuWidth",void 0),bt([dt({type:Number,attribute:"typeahead-delay"})],nC.prototype,"typeaheadDelay",void 0),bt([dt({type:Boolean,attribute:"has-leading-icon"})],nC.prototype,"hasLeadingIcon",void 0),bt([dt({attribute:"display-text"})],nC.prototype,"displayText",void 0),bt([dt({attribute:"menu-align"})],nC.prototype,"menuAlign",void 0),bt([dt()],nC.prototype,"value",null),bt([dt({type:Number,attribute:"selected-index"})],nC.prototype,"selectedIndex",null),bt([ht()],nC.prototype,"nativeError",void 0),bt([ht()],nC.prototype,"nativeErrorText",void 0),bt([ht()],nC.prototype,"focused",void 0),bt([ht()],nC.prototype,"open",void 0),bt([ht()],nC.prototype,"defaultFocus",void 0),bt([pt(".field")],nC.prototype,"field",void 0),bt([pt("md-menu")],nC.prototype,"menu",void 0),bt([pt("#label")],nC.prototype,"labelEl",void 0),bt([mt({slot:"leading-icon",flatten:!0})],nC.prototype,"leadingIcons",void 0);
/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
class sC extends nC{constructor(){super(...arguments),this.fieldTag=be`md-outlined-field`}}
/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const aC=n`:host{--_text-field-disabled-input-text-color:var(--md-outlined-select-text-field-disabled-input-text-color, var(--md-sys-color-on-surface, #1d1b20));--_text-field-disabled-input-text-opacity:var(--md-outlined-select-text-field-disabled-input-text-opacity, 0.38);--_text-field-disabled-label-text-color:var(--md-outlined-select-text-field-disabled-label-text-color, var(--md-sys-color-on-surface, #1d1b20));--_text-field-disabled-label-text-opacity:var(--md-outlined-select-text-field-disabled-label-text-opacity, 0.38);--_text-field-disabled-leading-icon-color:var(--md-outlined-select-text-field-disabled-leading-icon-color, var(--md-sys-color-on-surface, #1d1b20));--_text-field-disabled-leading-icon-opacity:var(--md-outlined-select-text-field-disabled-leading-icon-opacity, 0.38);--_text-field-disabled-outline-color:var(--md-outlined-select-text-field-disabled-outline-color, var(--md-sys-color-on-surface, #1d1b20));--_text-field-disabled-outline-opacity:var(--md-outlined-select-text-field-disabled-outline-opacity, 0.12);--_text-field-disabled-outline-width:var(--md-outlined-select-text-field-disabled-outline-width, 1px);--_text-field-disabled-supporting-text-color:var(--md-outlined-select-text-field-disabled-supporting-text-color, var(--md-sys-color-on-surface, #1d1b20));--_text-field-disabled-supporting-text-opacity:var(--md-outlined-select-text-field-disabled-supporting-text-opacity, 0.38);--_text-field-disabled-trailing-icon-color:var(--md-outlined-select-text-field-disabled-trailing-icon-color, var(--md-sys-color-on-surface, #1d1b20));--_text-field-disabled-trailing-icon-opacity:var(--md-outlined-select-text-field-disabled-trailing-icon-opacity, 0.38);--_text-field-error-focus-input-text-color:var(--md-outlined-select-text-field-error-focus-input-text-color, var(--md-sys-color-on-surface, #1d1b20));--_text-field-error-focus-label-text-color:var(--md-outlined-select-text-field-error-focus-label-text-color, var(--md-sys-color-error, #b3261e));--_text-field-error-focus-leading-icon-color:var(--md-outlined-select-text-field-error-focus-leading-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_text-field-error-focus-outline-color:var(--md-outlined-select-text-field-error-focus-outline-color, var(--md-sys-color-error, #b3261e));--_text-field-error-focus-supporting-text-color:var(--md-outlined-select-text-field-error-focus-supporting-text-color, var(--md-sys-color-error, #b3261e));--_text-field-error-focus-trailing-icon-color:var(--md-outlined-select-text-field-error-focus-trailing-icon-color, var(--md-sys-color-error, #b3261e));--_text-field-error-hover-input-text-color:var(--md-outlined-select-text-field-error-hover-input-text-color, var(--md-sys-color-on-surface, #1d1b20));--_text-field-error-hover-label-text-color:var(--md-outlined-select-text-field-error-hover-label-text-color, var(--md-sys-color-on-error-container, #410e0b));--_text-field-error-hover-leading-icon-color:var(--md-outlined-select-text-field-error-hover-leading-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_text-field-error-hover-outline-color:var(--md-outlined-select-text-field-error-hover-outline-color, var(--md-sys-color-on-error-container, #410e0b));--_text-field-error-hover-supporting-text-color:var(--md-outlined-select-text-field-error-hover-supporting-text-color, var(--md-sys-color-error, #b3261e));--_text-field-error-hover-trailing-icon-color:var(--md-outlined-select-text-field-error-hover-trailing-icon-color, var(--md-sys-color-on-error-container, #410e0b));--_text-field-error-input-text-color:var(--md-outlined-select-text-field-error-input-text-color, var(--md-sys-color-on-surface, #1d1b20));--_text-field-error-label-text-color:var(--md-outlined-select-text-field-error-label-text-color, var(--md-sys-color-error, #b3261e));--_text-field-error-leading-icon-color:var(--md-outlined-select-text-field-error-leading-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_text-field-error-outline-color:var(--md-outlined-select-text-field-error-outline-color, var(--md-sys-color-error, #b3261e));--_text-field-error-supporting-text-color:var(--md-outlined-select-text-field-error-supporting-text-color, var(--md-sys-color-error, #b3261e));--_text-field-error-trailing-icon-color:var(--md-outlined-select-text-field-error-trailing-icon-color, var(--md-sys-color-error, #b3261e));--_text-field-focus-input-text-color:var(--md-outlined-select-text-field-focus-input-text-color, var(--md-sys-color-on-surface, #1d1b20));--_text-field-focus-label-text-color:var(--md-outlined-select-text-field-focus-label-text-color, var(--md-sys-color-primary, #6750a4));--_text-field-focus-leading-icon-color:var(--md-outlined-select-text-field-focus-leading-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_text-field-focus-outline-color:var(--md-outlined-select-text-field-focus-outline-color, var(--md-sys-color-primary, #6750a4));--_text-field-focus-outline-width:var(--md-outlined-select-text-field-focus-outline-width, 3px);--_text-field-focus-supporting-text-color:var(--md-outlined-select-text-field-focus-supporting-text-color, var(--md-sys-color-on-surface-variant, #49454f));--_text-field-focus-trailing-icon-color:var(--md-outlined-select-text-field-focus-trailing-icon-color, var(--md-sys-color-primary, #6750a4));--_text-field-hover-input-text-color:var(--md-outlined-select-text-field-hover-input-text-color, var(--md-sys-color-on-surface, #1d1b20));--_text-field-hover-label-text-color:var(--md-outlined-select-text-field-hover-label-text-color, var(--md-sys-color-on-surface, #1d1b20));--_text-field-hover-leading-icon-color:var(--md-outlined-select-text-field-hover-leading-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_text-field-hover-outline-color:var(--md-outlined-select-text-field-hover-outline-color, var(--md-sys-color-on-surface, #1d1b20));--_text-field-hover-outline-width:var(--md-outlined-select-text-field-hover-outline-width, 1px);--_text-field-hover-supporting-text-color:var(--md-outlined-select-text-field-hover-supporting-text-color, var(--md-sys-color-on-surface-variant, #49454f));--_text-field-hover-trailing-icon-color:var(--md-outlined-select-text-field-hover-trailing-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_text-field-input-text-color:var(--md-outlined-select-text-field-input-text-color, var(--md-sys-color-on-surface, #1d1b20));--_text-field-input-text-font:var(--md-outlined-select-text-field-input-text-font, var(--md-sys-typescale-body-large-font, var(--md-ref-typeface-plain, Roboto)));--_text-field-input-text-line-height:var(--md-outlined-select-text-field-input-text-line-height, var(--md-sys-typescale-body-large-line-height, 1.5rem));--_text-field-input-text-size:var(--md-outlined-select-text-field-input-text-size, var(--md-sys-typescale-body-large-size, 1rem));--_text-field-input-text-weight:var(--md-outlined-select-text-field-input-text-weight, var(--md-sys-typescale-body-large-weight, var(--md-ref-typeface-weight-regular, 400)));--_text-field-label-text-color:var(--md-outlined-select-text-field-label-text-color, var(--md-sys-color-on-surface-variant, #49454f));--_text-field-label-text-font:var(--md-outlined-select-text-field-label-text-font, var(--md-sys-typescale-body-large-font, var(--md-ref-typeface-plain, Roboto)));--_text-field-label-text-line-height:var(--md-outlined-select-text-field-label-text-line-height, var(--md-sys-typescale-body-large-line-height, 1.5rem));--_text-field-label-text-populated-line-height:var(--md-outlined-select-text-field-label-text-populated-line-height, var(--md-sys-typescale-body-small-line-height, 1rem));--_text-field-label-text-populated-size:var(--md-outlined-select-text-field-label-text-populated-size, var(--md-sys-typescale-body-small-size, 0.75rem));--_text-field-label-text-size:var(--md-outlined-select-text-field-label-text-size, var(--md-sys-typescale-body-large-size, 1rem));--_text-field-label-text-weight:var(--md-outlined-select-text-field-label-text-weight, var(--md-sys-typescale-body-large-weight, var(--md-ref-typeface-weight-regular, 400)));--_text-field-leading-icon-color:var(--md-outlined-select-text-field-leading-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_text-field-leading-icon-size:var(--md-outlined-select-text-field-leading-icon-size, 24px);--_text-field-outline-color:var(--md-outlined-select-text-field-outline-color, var(--md-sys-color-outline, #79747e));--_text-field-outline-width:var(--md-outlined-select-text-field-outline-width, 1px);--_text-field-supporting-text-color:var(--md-outlined-select-text-field-supporting-text-color, var(--md-sys-color-on-surface-variant, #49454f));--_text-field-supporting-text-font:var(--md-outlined-select-text-field-supporting-text-font, var(--md-sys-typescale-body-small-font, var(--md-ref-typeface-plain, Roboto)));--_text-field-supporting-text-line-height:var(--md-outlined-select-text-field-supporting-text-line-height, var(--md-sys-typescale-body-small-line-height, 1rem));--_text-field-supporting-text-size:var(--md-outlined-select-text-field-supporting-text-size, var(--md-sys-typescale-body-small-size, 0.75rem));--_text-field-supporting-text-weight:var(--md-outlined-select-text-field-supporting-text-weight, var(--md-sys-typescale-body-small-weight, var(--md-ref-typeface-weight-regular, 400)));--_text-field-trailing-icon-color:var(--md-outlined-select-text-field-trailing-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_text-field-trailing-icon-size:var(--md-outlined-select-text-field-trailing-icon-size, 24px);--_text-field-container-shape-start-start:var(--md-outlined-select-text-field-container-shape-start-start, var(--md-outlined-select-text-field-container-shape, var(--md-sys-shape-corner-extra-small, 4px)));--_text-field-container-shape-start-end:var(--md-outlined-select-text-field-container-shape-start-end, var(--md-outlined-select-text-field-container-shape, var(--md-sys-shape-corner-extra-small, 4px)));--_text-field-container-shape-end-end:var(--md-outlined-select-text-field-container-shape-end-end, var(--md-outlined-select-text-field-container-shape, var(--md-sys-shape-corner-extra-small, 4px)));--_text-field-container-shape-end-start:var(--md-outlined-select-text-field-container-shape-end-start, var(--md-outlined-select-text-field-container-shape, var(--md-sys-shape-corner-extra-small, 4px)));--md-outlined-field-container-shape-end-end:var(--_text-field-container-shape-end-end);--md-outlined-field-container-shape-end-start:var(--_text-field-container-shape-end-start);--md-outlined-field-container-shape-start-end:var(--_text-field-container-shape-start-end);--md-outlined-field-container-shape-start-start:var(--_text-field-container-shape-start-start);--md-outlined-field-content-color:var(--_text-field-input-text-color);--md-outlined-field-content-font:var(--_text-field-input-text-font);--md-outlined-field-content-line-height:var(--_text-field-input-text-line-height);--md-outlined-field-content-size:var(--_text-field-input-text-size);--md-outlined-field-content-weight:var(--_text-field-input-text-weight);--md-outlined-field-disabled-content-color:var(--_text-field-disabled-input-text-color);--md-outlined-field-disabled-content-opacity:var(--_text-field-disabled-input-text-opacity);--md-outlined-field-disabled-label-text-color:var(--_text-field-disabled-label-text-color);--md-outlined-field-disabled-label-text-opacity:var(--_text-field-disabled-label-text-opacity);--md-outlined-field-disabled-leading-content-color:var(--_text-field-disabled-leading-icon-color);--md-outlined-field-disabled-leading-content-opacity:var(--_text-field-disabled-leading-icon-opacity);--md-outlined-field-disabled-outline-color:var(--_text-field-disabled-outline-color);--md-outlined-field-disabled-outline-opacity:var(--_text-field-disabled-outline-opacity);--md-outlined-field-disabled-outline-width:var(--_text-field-disabled-outline-width);--md-outlined-field-disabled-supporting-text-color:var(--_text-field-disabled-supporting-text-color);--md-outlined-field-disabled-supporting-text-opacity:var(--_text-field-disabled-supporting-text-opacity);--md-outlined-field-disabled-trailing-content-color:var(--_text-field-disabled-trailing-icon-color);--md-outlined-field-disabled-trailing-content-opacity:var(--_text-field-disabled-trailing-icon-opacity);--md-outlined-field-error-content-color:var(--_text-field-error-input-text-color);--md-outlined-field-error-focus-content-color:var(--_text-field-error-focus-input-text-color);--md-outlined-field-error-focus-label-text-color:var(--_text-field-error-focus-label-text-color);--md-outlined-field-error-focus-leading-content-color:var(--_text-field-error-focus-leading-icon-color);--md-outlined-field-error-focus-outline-color:var(--_text-field-error-focus-outline-color);--md-outlined-field-error-focus-supporting-text-color:var(--_text-field-error-focus-supporting-text-color);--md-outlined-field-error-focus-trailing-content-color:var(--_text-field-error-focus-trailing-icon-color);--md-outlined-field-error-hover-content-color:var(--_text-field-error-hover-input-text-color);--md-outlined-field-error-hover-label-text-color:var(--_text-field-error-hover-label-text-color);--md-outlined-field-error-hover-leading-content-color:var(--_text-field-error-hover-leading-icon-color);--md-outlined-field-error-hover-outline-color:var(--_text-field-error-hover-outline-color);--md-outlined-field-error-hover-supporting-text-color:var(--_text-field-error-hover-supporting-text-color);--md-outlined-field-error-hover-trailing-content-color:var(--_text-field-error-hover-trailing-icon-color);--md-outlined-field-error-label-text-color:var(--_text-field-error-label-text-color);--md-outlined-field-error-leading-content-color:var(--_text-field-error-leading-icon-color);--md-outlined-field-error-outline-color:var(--_text-field-error-outline-color);--md-outlined-field-error-supporting-text-color:var(--_text-field-error-supporting-text-color);--md-outlined-field-error-trailing-content-color:var(--_text-field-error-trailing-icon-color);--md-outlined-field-focus-content-color:var(--_text-field-focus-input-text-color);--md-outlined-field-focus-label-text-color:var(--_text-field-focus-label-text-color);--md-outlined-field-focus-leading-content-color:var(--_text-field-focus-leading-icon-color);--md-outlined-field-focus-outline-color:var(--_text-field-focus-outline-color);--md-outlined-field-focus-outline-width:var(--_text-field-focus-outline-width);--md-outlined-field-focus-supporting-text-color:var(--_text-field-focus-supporting-text-color);--md-outlined-field-focus-trailing-content-color:var(--_text-field-focus-trailing-icon-color);--md-outlined-field-hover-content-color:var(--_text-field-hover-input-text-color);--md-outlined-field-hover-label-text-color:var(--_text-field-hover-label-text-color);--md-outlined-field-hover-leading-content-color:var(--_text-field-hover-leading-icon-color);--md-outlined-field-hover-outline-color:var(--_text-field-hover-outline-color);--md-outlined-field-hover-outline-width:var(--_text-field-hover-outline-width);--md-outlined-field-hover-supporting-text-color:var(--_text-field-hover-supporting-text-color);--md-outlined-field-hover-trailing-content-color:var(--_text-field-hover-trailing-icon-color);--md-outlined-field-label-text-color:var(--_text-field-label-text-color);--md-outlined-field-label-text-font:var(--_text-field-label-text-font);--md-outlined-field-label-text-line-height:var(--_text-field-label-text-line-height);--md-outlined-field-label-text-populated-line-height:var(--_text-field-label-text-populated-line-height);--md-outlined-field-label-text-populated-size:var(--_text-field-label-text-populated-size);--md-outlined-field-label-text-size:var(--_text-field-label-text-size);--md-outlined-field-label-text-weight:var(--_text-field-label-text-weight);--md-outlined-field-leading-content-color:var(--_text-field-leading-icon-color);--md-outlined-field-outline-color:var(--_text-field-outline-color);--md-outlined-field-outline-width:var(--_text-field-outline-width);--md-outlined-field-supporting-text-color:var(--_text-field-supporting-text-color);--md-outlined-field-supporting-text-font:var(--_text-field-supporting-text-font);--md-outlined-field-supporting-text-line-height:var(--_text-field-supporting-text-line-height);--md-outlined-field-supporting-text-size:var(--_text-field-supporting-text-size);--md-outlined-field-supporting-text-weight:var(--_text-field-supporting-text-weight);--md-outlined-field-trailing-content-color:var(--_text-field-trailing-icon-color)}[has-start] .icon.leading{font-size:var(--_text-field-leading-icon-size);height:var(--_text-field-leading-icon-size);width:var(--_text-field-leading-icon-size)}.icon.trailing{font-size:var(--_text-field-trailing-icon-size);height:var(--_text-field-trailing-icon-size);width:var(--_text-field-trailing-icon-size)}`
/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */,lC=n`:host{color:unset;min-width:210px;display:flex}.field{cursor:default;outline:0}.select{position:relative;flex-direction:column}.icon ::slotted(*),.icon.trailing svg{fill:currentColor}.icon ::slotted(*){width:inherit;height:inherit;font-size:inherit}.icon slot{display:flex;height:100%;width:100%;align-items:center;justify-content:center}.icon.trailing :is(.up,.down){opacity:0;transition:opacity 75ms linear 75ms}.select.open .up,.select:not(.open) .down{opacity:1}.field,.select,md-menu{min-width:inherit;width:inherit;max-width:inherit;display:flex}md-menu{min-width:var(--__menu-min-width);max-width:var(--__menu-max-width,inherit)}.menu-wrapper{width:0;height:0;max-width:inherit}md-menu ::slotted(:not[disabled]){cursor:pointer}.field,.select{width:100%}:host{display:inline-flex}:host([disabled]){pointer-events:none}`
/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */;let cC=class extends sC{};cC.styles=[lC,aC],cC=bt([at("md-outlined-select")],cC);class dC{get role(){return this.menuItemController.role}get typeaheadText(){return this.menuItemController.typeaheadText}setTypeaheadText(t){this.menuItemController.setTypeaheadText(t)}get displayText(){return null!==this.internalDisplayText?this.internalDisplayText:this.menuItemController.typeaheadText}setDisplayText(t){this.internalDisplayText=t}constructor(t,e){this.host=t,this.internalDisplayText=null,this.lastSelected=this.host.selected,this.firstUpdate=!0,this.onClick=()=>{this.menuItemController.onClick()},this.onKeydown=t=>{this.menuItemController.onKeydown(t)},this.menuItemController=new dw(t,e),t.addController(this)}hostUpdate(){this.lastSelected!==this.host.selected&&(this.host.ariaSelected=this.host.selected?"true":"false")}hostUpdated(){this.lastSelected===this.host.selected||this.firstUpdate||(this.host.selected?this.host.dispatchEvent(new Event("request-selection",{bubbles:!0,composed:!0})):this.host.dispatchEvent(new Event("request-deselection",{bubbles:!0,composed:!0}))),this.lastSelected=this.host.selected,this.firstUpdate=!1}}
/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class hC extends nt{constructor(){super(...arguments),this.disabled=!1,this.isMenuItem=!0,this.selected=!1,this.value="",this.type="option",this.selectOptionController=new dC(this,{getHeadlineElements:()=>this.headlineElements,getSupportingTextElements:()=>this.supportingTextElements,getDefaultElements:()=>this.defaultElements,getInteractiveElement:()=>this.listItemRoot})}get typeaheadText(){return this.selectOptionController.typeaheadText}set typeaheadText(t){this.selectOptionController.setTypeaheadText(t)}get displayText(){return this.selectOptionController.displayText}set displayText(t){this.selectOptionController.setDisplayText(t)}render(){return this.renderListItem(U` <md-item> <div slot="container"> ${this.renderRipple()} ${this.renderFocusRing()} </div> <slot name="start" slot="start"></slot> <slot name="end" slot="end"></slot> ${this.renderBody()} </md-item> `)}renderListItem(t){return U` <li id="item" tabindex="${this.disabled?-1:0}" role="${this.selectOptionController.role}" aria-label="${this.ariaLabel||j}" aria-selected="${this.ariaSelected||j}" aria-checked="${this.ariaChecked||j}" aria-expanded="${this.ariaExpanded||j}" aria-haspopup="${this.ariaHasPopup||j}" class="list-item ${qt(this.getRenderClasses())}" @click="${this.selectOptionController.onClick}" @keydown="${this.selectOptionController.onKeydown}">${t}</li> `}renderRipple(){return U` <md-ripple part="ripple" for="item" ?disabled="${this.disabled}"></md-ripple>`}renderFocusRing(){return U` <md-focus-ring part="focus-ring" for="item" inward></md-focus-ring>`}getRenderClasses(){return{disabled:this.disabled,selected:this.selected}}renderBody(){return U` <slot></slot> <slot name="overline" slot="overline"></slot> <slot name="headline" slot="headline"></slot> <slot name="supporting-text" slot="supporting-text"></slot> <slot name="trailing-supporting-text" slot="trailing-supporting-text"></slot> `}focus(){this.listItemRoot?.focus()}}Tt(hC),hC.shadowRootOptions={...nt.shadowRootOptions,delegatesFocus:!0},bt([dt({type:Boolean,reflect:!0})],hC.prototype,"disabled",void 0),bt([dt({type:Boolean,attribute:"md-menu-item",reflect:!0})],hC.prototype,"isMenuItem",void 0),bt([dt({type:Boolean})],hC.prototype,"selected",void 0),bt([dt()],hC.prototype,"value",void 0),bt([pt(".list-item")],hC.prototype,"listItemRoot",void 0),bt([mt({slot:"headline"})],hC.prototype,"headlineElements",void 0),bt([mt({slot:"supporting-text"})],hC.prototype,"supportingTextElements",void 0),bt([gt({slot:""})],hC.prototype,"defaultElements",void 0),bt([dt({attribute:"typeahead-text"})],hC.prototype,"typeaheadText",null),bt([dt({attribute:"display-text"})],hC.prototype,"displayText",null);
/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
let uC=class extends hC{};uC.styles=[uw],uC=bt([at("md-select-option")],uC);
/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
class pC extends Bc{renderBackground(){return U` <div class="background"></div> <div class="state-layer"></div> `}renderIndicator(){return U`<div class="active-indicator"></div>`}}
/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const fC=n`@layer styles{:host{--_active-indicator-color: var(--md-filled-field-active-indicator-color, var(--md-sys-color-on-surface-variant, #49454f));--_active-indicator-height: var(--md-filled-field-active-indicator-height, 1px);--_bottom-space: var(--md-filled-field-bottom-space, 16px);--_container-color: var(--md-filled-field-container-color, var(--md-sys-color-surface-container-highest, #e6e0e9));--_content-color: var(--md-filled-field-content-color, var(--md-sys-color-on-surface, #1d1b20));--_content-font: var(--md-filled-field-content-font, var(--md-sys-typescale-body-large-font, var(--md-ref-typeface-plain, Roboto)));--_content-line-height: var(--md-filled-field-content-line-height, var(--md-sys-typescale-body-large-line-height, 1.5rem));--_content-size: var(--md-filled-field-content-size, var(--md-sys-typescale-body-large-size, 1rem));--_content-weight: var(--md-filled-field-content-weight, var(--md-sys-typescale-body-large-weight, var(--md-ref-typeface-weight-regular, 400)));--_disabled-active-indicator-color: var(--md-filled-field-disabled-active-indicator-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-active-indicator-height: var(--md-filled-field-disabled-active-indicator-height, 1px);--_disabled-active-indicator-opacity: var(--md-filled-field-disabled-active-indicator-opacity, 0.38);--_disabled-container-color: var(--md-filled-field-disabled-container-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-container-opacity: var(--md-filled-field-disabled-container-opacity, 0.04);--_disabled-content-color: var(--md-filled-field-disabled-content-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-content-opacity: var(--md-filled-field-disabled-content-opacity, 0.38);--_disabled-label-text-color: var(--md-filled-field-disabled-label-text-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-label-text-opacity: var(--md-filled-field-disabled-label-text-opacity, 0.38);--_disabled-leading-content-color: var(--md-filled-field-disabled-leading-content-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-leading-content-opacity: var(--md-filled-field-disabled-leading-content-opacity, 0.38);--_disabled-supporting-text-color: var(--md-filled-field-disabled-supporting-text-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-supporting-text-opacity: var(--md-filled-field-disabled-supporting-text-opacity, 0.38);--_disabled-trailing-content-color: var(--md-filled-field-disabled-trailing-content-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-trailing-content-opacity: var(--md-filled-field-disabled-trailing-content-opacity, 0.38);--_error-active-indicator-color: var(--md-filled-field-error-active-indicator-color, var(--md-sys-color-error, #b3261e));--_error-content-color: var(--md-filled-field-error-content-color, var(--md-sys-color-on-surface, #1d1b20));--_error-focus-active-indicator-color: var(--md-filled-field-error-focus-active-indicator-color, var(--md-sys-color-error, #b3261e));--_error-focus-content-color: var(--md-filled-field-error-focus-content-color, var(--md-sys-color-on-surface-variant, #49454f));--_error-focus-label-text-color: var(--md-filled-field-error-focus-label-text-color, var(--md-sys-color-error, #b3261e));--_error-focus-leading-content-color: var(--md-filled-field-error-focus-leading-content-color, var(--md-sys-color-on-surface-variant, #49454f));--_error-focus-supporting-text-color: var(--md-filled-field-error-focus-supporting-text-color, var(--md-sys-color-error, #b3261e));--_error-focus-trailing-content-color: var(--md-filled-field-error-focus-trailing-content-color, var(--md-sys-color-error, #b3261e));--_error-hover-active-indicator-color: var(--md-filled-field-error-hover-active-indicator-color, var(--md-sys-color-on-error-container, #410e0b));--_error-hover-content-color: var(--md-filled-field-error-hover-content-color, var(--md-sys-color-on-surface, #1d1b20));--_error-hover-label-text-color: var(--md-filled-field-error-hover-label-text-color, var(--md-sys-color-on-error-container, #410e0b));--_error-hover-leading-content-color: var(--md-filled-field-error-hover-leading-content-color, var(--md-sys-color-on-surface-variant, #49454f));--_error-hover-state-layer-color: var(--md-filled-field-error-hover-state-layer-color, var(--md-sys-color-on-surface, #1d1b20));--_error-hover-state-layer-opacity: var(--md-filled-field-error-hover-state-layer-opacity, 0.08);--_error-hover-supporting-text-color: var(--md-filled-field-error-hover-supporting-text-color, var(--md-sys-color-error, #b3261e));--_error-hover-trailing-content-color: var(--md-filled-field-error-hover-trailing-content-color, var(--md-sys-color-on-error-container, #410e0b));--_error-label-text-color: var(--md-filled-field-error-label-text-color, var(--md-sys-color-error, #b3261e));--_error-leading-content-color: var(--md-filled-field-error-leading-content-color, var(--md-sys-color-on-surface-variant, #49454f));--_error-supporting-text-color: var(--md-filled-field-error-supporting-text-color, var(--md-sys-color-error, #b3261e));--_error-trailing-content-color: var(--md-filled-field-error-trailing-content-color, var(--md-sys-color-error, #b3261e));--_focus-active-indicator-color: var(--md-filled-field-focus-active-indicator-color, var(--md-sys-color-primary, #6750a4));--_focus-active-indicator-height: var(--md-filled-field-focus-active-indicator-height, 3px);--_focus-content-color: var(--md-filled-field-focus-content-color, var(--md-sys-color-on-surface, #1d1b20));--_focus-label-text-color: var(--md-filled-field-focus-label-text-color, var(--md-sys-color-primary, #6750a4));--_focus-leading-content-color: var(--md-filled-field-focus-leading-content-color, var(--md-sys-color-on-surface-variant, #49454f));--_focus-supporting-text-color: var(--md-filled-field-focus-supporting-text-color, var(--md-sys-color-on-surface-variant, #49454f));--_focus-trailing-content-color: var(--md-filled-field-focus-trailing-content-color, var(--md-sys-color-on-surface-variant, #49454f));--_hover-active-indicator-color: var(--md-filled-field-hover-active-indicator-color, var(--md-sys-color-on-surface, #1d1b20));--_hover-active-indicator-height: var(--md-filled-field-hover-active-indicator-height, 1px);--_hover-content-color: var(--md-filled-field-hover-content-color, var(--md-sys-color-on-surface, #1d1b20));--_hover-label-text-color: var(--md-filled-field-hover-label-text-color, var(--md-sys-color-on-surface-variant, #49454f));--_hover-leading-content-color: var(--md-filled-field-hover-leading-content-color, var(--md-sys-color-on-surface-variant, #49454f));--_hover-state-layer-color: var(--md-filled-field-hover-state-layer-color, var(--md-sys-color-on-surface, #1d1b20));--_hover-state-layer-opacity: var(--md-filled-field-hover-state-layer-opacity, 0.08);--_hover-supporting-text-color: var(--md-filled-field-hover-supporting-text-color, var(--md-sys-color-on-surface-variant, #49454f));--_hover-trailing-content-color: var(--md-filled-field-hover-trailing-content-color, var(--md-sys-color-on-surface-variant, #49454f));--_label-text-color: var(--md-filled-field-label-text-color, var(--md-sys-color-on-surface-variant, #49454f));--_label-text-font: var(--md-filled-field-label-text-font, var(--md-sys-typescale-body-large-font, var(--md-ref-typeface-plain, Roboto)));--_label-text-line-height: var(--md-filled-field-label-text-line-height, var(--md-sys-typescale-body-large-line-height, 1.5rem));--_label-text-populated-line-height: var(--md-filled-field-label-text-populated-line-height, var(--md-sys-typescale-body-small-line-height, 1rem));--_label-text-populated-size: var(--md-filled-field-label-text-populated-size, var(--md-sys-typescale-body-small-size, 0.75rem));--_label-text-size: var(--md-filled-field-label-text-size, var(--md-sys-typescale-body-large-size, 1rem));--_label-text-weight: var(--md-filled-field-label-text-weight, var(--md-sys-typescale-body-large-weight, var(--md-ref-typeface-weight-regular, 400)));--_leading-content-color: var(--md-filled-field-leading-content-color, var(--md-sys-color-on-surface-variant, #49454f));--_leading-space: var(--md-filled-field-leading-space, 16px);--_supporting-text-color: var(--md-filled-field-supporting-text-color, var(--md-sys-color-on-surface-variant, #49454f));--_supporting-text-font: var(--md-filled-field-supporting-text-font, var(--md-sys-typescale-body-small-font, var(--md-ref-typeface-plain, Roboto)));--_supporting-text-leading-space: var(--md-filled-field-supporting-text-leading-space, 16px);--_supporting-text-line-height: var(--md-filled-field-supporting-text-line-height, var(--md-sys-typescale-body-small-line-height, 1rem));--_supporting-text-size: var(--md-filled-field-supporting-text-size, var(--md-sys-typescale-body-small-size, 0.75rem));--_supporting-text-top-space: var(--md-filled-field-supporting-text-top-space, 4px);--_supporting-text-trailing-space: var(--md-filled-field-supporting-text-trailing-space, 16px);--_supporting-text-weight: var(--md-filled-field-supporting-text-weight, var(--md-sys-typescale-body-small-weight, var(--md-ref-typeface-weight-regular, 400)));--_top-space: var(--md-filled-field-top-space, 16px);--_trailing-content-color: var(--md-filled-field-trailing-content-color, var(--md-sys-color-on-surface-variant, #49454f));--_trailing-space: var(--md-filled-field-trailing-space, 16px);--_with-label-bottom-space: var(--md-filled-field-with-label-bottom-space, 8px);--_with-label-top-space: var(--md-filled-field-with-label-top-space, 8px);--_container-shape-start-start: var(--md-filled-field-container-shape-start-start, var(--md-filled-field-container-shape, var(--md-sys-shape-corner-extra-small, 4px)));--_container-shape-start-end: var(--md-filled-field-container-shape-start-end, var(--md-filled-field-container-shape, var(--md-sys-shape-corner-extra-small, 4px)));--_container-shape-end-end: var(--md-filled-field-container-shape-end-end, var(--md-filled-field-container-shape, var(--md-sys-shape-corner-none, 0px)));--_container-shape-end-start: var(--md-filled-field-container-shape-end-start, var(--md-filled-field-container-shape, var(--md-sys-shape-corner-none, 0px)))}.background,.state-layer{border-radius:inherit;inset:0;pointer-events:none;position:absolute}.background{background:var(--_container-color)}.state-layer{visibility:hidden}.field:not(.disabled):hover .state-layer{visibility:visible}.label.floating{position:absolute;top:var(--_with-label-top-space)}.field:not(.with-start) .label-wrapper{margin-inline-start:var(--_leading-space)}.field:not(.with-end) .label-wrapper{margin-inline-end:var(--_trailing-space)}.active-indicator{inset:auto 0 0 0;pointer-events:none;position:absolute;width:100%;z-index:1}.active-indicator::before,.active-indicator::after{border-bottom:var(--_active-indicator-height) solid var(--_active-indicator-color);inset:auto 0 0 0;content:"";position:absolute;width:100%}.active-indicator::after{opacity:0;transition:opacity 150ms cubic-bezier(0.2, 0, 0, 1)}.focused .active-indicator::after{opacity:1}.field:not(.with-start) .content ::slotted(*){padding-inline-start:var(--_leading-space)}.field:not(.with-end) .content ::slotted(*){padding-inline-end:var(--_trailing-space)}.field:not(.no-label) .content ::slotted(:not(textarea)){padding-bottom:var(--_with-label-bottom-space);padding-top:calc(var(--_with-label-top-space) + var(--_label-text-populated-line-height))}.field:not(.no-label) .content ::slotted(textarea){margin-bottom:var(--_with-label-bottom-space);margin-top:calc(var(--_with-label-top-space) + var(--_label-text-populated-line-height))}:hover .active-indicator::before{border-bottom-color:var(--_hover-active-indicator-color);border-bottom-width:var(--_hover-active-indicator-height)}.active-indicator::after{border-bottom-color:var(--_focus-active-indicator-color);border-bottom-width:var(--_focus-active-indicator-height)}:hover .state-layer{background:var(--_hover-state-layer-color);opacity:var(--_hover-state-layer-opacity)}.disabled .active-indicator::before{border-bottom-color:var(--_disabled-active-indicator-color);border-bottom-width:var(--_disabled-active-indicator-height);opacity:var(--_disabled-active-indicator-opacity)}.disabled .background{background:var(--_disabled-container-color);opacity:var(--_disabled-container-opacity)}.error .active-indicator::before{border-bottom-color:var(--_error-active-indicator-color)}.error:hover .active-indicator::before{border-bottom-color:var(--_error-hover-active-indicator-color)}.error:hover .state-layer{background:var(--_error-hover-state-layer-color);opacity:var(--_error-hover-state-layer-opacity)}.error .active-indicator::after{border-bottom-color:var(--_error-focus-active-indicator-color)}.resizable .container{bottom:var(--_focus-active-indicator-height);clip-path:inset(var(--_focus-active-indicator-height) 0 0 0)}.resizable .container>*{top:var(--_focus-active-indicator-height)}}@layer hcm{@media(forced-colors: active){.disabled .active-indicator::before{border-color:GrayText;opacity:1}}}
`
/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */;let mC=class extends pC{};mC.styles=[jc,fC],mC=bt([at("md-filled-field")],mC);
/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
const gC=n`:host{--_active-indicator-color:var(--md-filled-text-field-active-indicator-color, var(--md-sys-color-on-surface-variant, #49454f));--_active-indicator-height:var(--md-filled-text-field-active-indicator-height, 1px);--_caret-color:var(--md-filled-text-field-caret-color, var(--md-sys-color-primary, #6750a4));--_container-color:var(--md-filled-text-field-container-color, var(--md-sys-color-surface-container-highest, #e6e0e9));--_disabled-active-indicator-color:var(--md-filled-text-field-disabled-active-indicator-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-active-indicator-height:var(--md-filled-text-field-disabled-active-indicator-height, 1px);--_disabled-active-indicator-opacity:var(--md-filled-text-field-disabled-active-indicator-opacity, 0.38);--_disabled-container-color:var(--md-filled-text-field-disabled-container-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-container-opacity:var(--md-filled-text-field-disabled-container-opacity, 0.04);--_disabled-input-text-color:var(--md-filled-text-field-disabled-input-text-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-input-text-opacity:var(--md-filled-text-field-disabled-input-text-opacity, 0.38);--_disabled-label-text-color:var(--md-filled-text-field-disabled-label-text-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-label-text-opacity:var(--md-filled-text-field-disabled-label-text-opacity, 0.38);--_disabled-leading-icon-color:var(--md-filled-text-field-disabled-leading-icon-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-leading-icon-opacity:var(--md-filled-text-field-disabled-leading-icon-opacity, 0.38);--_disabled-supporting-text-color:var(--md-filled-text-field-disabled-supporting-text-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-supporting-text-opacity:var(--md-filled-text-field-disabled-supporting-text-opacity, 0.38);--_disabled-trailing-icon-color:var(--md-filled-text-field-disabled-trailing-icon-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-trailing-icon-opacity:var(--md-filled-text-field-disabled-trailing-icon-opacity, 0.38);--_error-active-indicator-color:var(--md-filled-text-field-error-active-indicator-color, var(--md-sys-color-error, #b3261e));--_error-focus-active-indicator-color:var(--md-filled-text-field-error-focus-active-indicator-color, var(--md-sys-color-error, #b3261e));--_error-focus-caret-color:var(--md-filled-text-field-error-focus-caret-color, var(--md-sys-color-error, #b3261e));--_error-focus-input-text-color:var(--md-filled-text-field-error-focus-input-text-color, var(--md-sys-color-on-surface, #1d1b20));--_error-focus-label-text-color:var(--md-filled-text-field-error-focus-label-text-color, var(--md-sys-color-error, #b3261e));--_error-focus-leading-icon-color:var(--md-filled-text-field-error-focus-leading-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_error-focus-supporting-text-color:var(--md-filled-text-field-error-focus-supporting-text-color, var(--md-sys-color-error, #b3261e));--_error-focus-trailing-icon-color:var(--md-filled-text-field-error-focus-trailing-icon-color, var(--md-sys-color-error, #b3261e));--_error-hover-active-indicator-color:var(--md-filled-text-field-error-hover-active-indicator-color, var(--md-sys-color-on-error-container, #410e0b));--_error-hover-input-text-color:var(--md-filled-text-field-error-hover-input-text-color, var(--md-sys-color-on-surface, #1d1b20));--_error-hover-label-text-color:var(--md-filled-text-field-error-hover-label-text-color, var(--md-sys-color-on-error-container, #410e0b));--_error-hover-leading-icon-color:var(--md-filled-text-field-error-hover-leading-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_error-hover-state-layer-color:var(--md-filled-text-field-error-hover-state-layer-color, var(--md-sys-color-on-surface, #1d1b20));--_error-hover-state-layer-opacity:var(--md-filled-text-field-error-hover-state-layer-opacity, 0.08);--_error-hover-supporting-text-color:var(--md-filled-text-field-error-hover-supporting-text-color, var(--md-sys-color-error, #b3261e));--_error-hover-trailing-icon-color:var(--md-filled-text-field-error-hover-trailing-icon-color, var(--md-sys-color-on-error-container, #410e0b));--_error-input-text-color:var(--md-filled-text-field-error-input-text-color, var(--md-sys-color-on-surface, #1d1b20));--_error-label-text-color:var(--md-filled-text-field-error-label-text-color, var(--md-sys-color-error, #b3261e));--_error-leading-icon-color:var(--md-filled-text-field-error-leading-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_error-supporting-text-color:var(--md-filled-text-field-error-supporting-text-color, var(--md-sys-color-error, #b3261e));--_error-trailing-icon-color:var(--md-filled-text-field-error-trailing-icon-color, var(--md-sys-color-error, #b3261e));--_focus-active-indicator-color:var(--md-filled-text-field-focus-active-indicator-color, var(--md-sys-color-primary, #6750a4));--_focus-active-indicator-height:var(--md-filled-text-field-focus-active-indicator-height, 3px);--_focus-input-text-color:var(--md-filled-text-field-focus-input-text-color, var(--md-sys-color-on-surface, #1d1b20));--_focus-label-text-color:var(--md-filled-text-field-focus-label-text-color, var(--md-sys-color-primary, #6750a4));--_focus-leading-icon-color:var(--md-filled-text-field-focus-leading-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_focus-supporting-text-color:var(--md-filled-text-field-focus-supporting-text-color, var(--md-sys-color-on-surface-variant, #49454f));--_focus-trailing-icon-color:var(--md-filled-text-field-focus-trailing-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_hover-active-indicator-color:var(--md-filled-text-field-hover-active-indicator-color, var(--md-sys-color-on-surface, #1d1b20));--_hover-active-indicator-height:var(--md-filled-text-field-hover-active-indicator-height, 1px);--_hover-input-text-color:var(--md-filled-text-field-hover-input-text-color, var(--md-sys-color-on-surface, #1d1b20));--_hover-label-text-color:var(--md-filled-text-field-hover-label-text-color, var(--md-sys-color-on-surface-variant, #49454f));--_hover-leading-icon-color:var(--md-filled-text-field-hover-leading-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_hover-state-layer-color:var(--md-filled-text-field-hover-state-layer-color, var(--md-sys-color-on-surface, #1d1b20));--_hover-state-layer-opacity:var(--md-filled-text-field-hover-state-layer-opacity, 0.08);--_hover-supporting-text-color:var(--md-filled-text-field-hover-supporting-text-color, var(--md-sys-color-on-surface-variant, #49454f));--_hover-trailing-icon-color:var(--md-filled-text-field-hover-trailing-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_input-text-color:var(--md-filled-text-field-input-text-color, var(--md-sys-color-on-surface, #1d1b20));--_input-text-font:var(--md-filled-text-field-input-text-font, var(--md-sys-typescale-body-large-font, var(--md-ref-typeface-plain, Roboto)));--_input-text-line-height:var(--md-filled-text-field-input-text-line-height, var(--md-sys-typescale-body-large-line-height, 1.5rem));--_input-text-placeholder-color:var(--md-filled-text-field-input-text-placeholder-color, var(--md-sys-color-on-surface-variant, #49454f));--_input-text-prefix-color:var(--md-filled-text-field-input-text-prefix-color, var(--md-sys-color-on-surface-variant, #49454f));--_input-text-size:var(--md-filled-text-field-input-text-size, var(--md-sys-typescale-body-large-size, 1rem));--_input-text-suffix-color:var(--md-filled-text-field-input-text-suffix-color, var(--md-sys-color-on-surface-variant, #49454f));--_input-text-weight:var(--md-filled-text-field-input-text-weight, var(--md-sys-typescale-body-large-weight, var(--md-ref-typeface-weight-regular, 400)));--_label-text-color:var(--md-filled-text-field-label-text-color, var(--md-sys-color-on-surface-variant, #49454f));--_label-text-font:var(--md-filled-text-field-label-text-font, var(--md-sys-typescale-body-large-font, var(--md-ref-typeface-plain, Roboto)));--_label-text-line-height:var(--md-filled-text-field-label-text-line-height, var(--md-sys-typescale-body-large-line-height, 1.5rem));--_label-text-populated-line-height:var(--md-filled-text-field-label-text-populated-line-height, var(--md-sys-typescale-body-small-line-height, 1rem));--_label-text-populated-size:var(--md-filled-text-field-label-text-populated-size, var(--md-sys-typescale-body-small-size, 0.75rem));--_label-text-size:var(--md-filled-text-field-label-text-size, var(--md-sys-typescale-body-large-size, 1rem));--_label-text-weight:var(--md-filled-text-field-label-text-weight, var(--md-sys-typescale-body-large-weight, var(--md-ref-typeface-weight-regular, 400)));--_leading-icon-color:var(--md-filled-text-field-leading-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_leading-icon-size:var(--md-filled-text-field-leading-icon-size, 24px);--_supporting-text-color:var(--md-filled-text-field-supporting-text-color, var(--md-sys-color-on-surface-variant, #49454f));--_supporting-text-font:var(--md-filled-text-field-supporting-text-font, var(--md-sys-typescale-body-small-font, var(--md-ref-typeface-plain, Roboto)));--_supporting-text-line-height:var(--md-filled-text-field-supporting-text-line-height, var(--md-sys-typescale-body-small-line-height, 1rem));--_supporting-text-size:var(--md-filled-text-field-supporting-text-size, var(--md-sys-typescale-body-small-size, 0.75rem));--_supporting-text-weight:var(--md-filled-text-field-supporting-text-weight, var(--md-sys-typescale-body-small-weight, var(--md-ref-typeface-weight-regular, 400)));--_trailing-icon-color:var(--md-filled-text-field-trailing-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_trailing-icon-size:var(--md-filled-text-field-trailing-icon-size, 24px);--_container-shape-start-start:var(--md-filled-text-field-container-shape-start-start, var(--md-filled-text-field-container-shape, var(--md-sys-shape-corner-extra-small, 4px)));--_container-shape-start-end:var(--md-filled-text-field-container-shape-start-end, var(--md-filled-text-field-container-shape, var(--md-sys-shape-corner-extra-small, 4px)));--_container-shape-end-end:var(--md-filled-text-field-container-shape-end-end, var(--md-filled-text-field-container-shape, var(--md-sys-shape-corner-none, 0px)));--_container-shape-end-start:var(--md-filled-text-field-container-shape-end-start, var(--md-filled-text-field-container-shape, var(--md-sys-shape-corner-none, 0px)));--_leading-space:var(--md-filled-text-field-leading-space, 16px);--_trailing-space:var(--md-filled-text-field-trailing-space, 16px);--_top-space:var(--md-filled-text-field-top-space, 16px);--_bottom-space:var(--md-filled-text-field-bottom-space, 16px);--_input-text-prefix-trailing-space:var(--md-filled-text-field-input-text-prefix-trailing-space, 2px);--_input-text-suffix-leading-space:var(--md-filled-text-field-input-text-suffix-leading-space, 2px);--_with-label-top-space:var(--md-filled-text-field-with-label-top-space, 8px);--_with-label-bottom-space:var(--md-filled-text-field-with-label-bottom-space, 8px);--_focus-caret-color:var(--md-filled-text-field-focus-caret-color, var(--md-sys-color-primary, #6750a4));--md-filled-field-active-indicator-color:var(--_active-indicator-color);--md-filled-field-active-indicator-height:var(--_active-indicator-height);--md-filled-field-bottom-space:var(--_bottom-space);--md-filled-field-container-color:var(--_container-color);--md-filled-field-container-shape-end-end:var(--_container-shape-end-end);--md-filled-field-container-shape-end-start:var(--_container-shape-end-start);--md-filled-field-container-shape-start-end:var(--_container-shape-start-end);--md-filled-field-container-shape-start-start:var(--_container-shape-start-start);--md-filled-field-content-color:var(--_input-text-color);--md-filled-field-content-font:var(--_input-text-font);--md-filled-field-content-line-height:var(--_input-text-line-height);--md-filled-field-content-size:var(--_input-text-size);--md-filled-field-content-weight:var(--_input-text-weight);--md-filled-field-disabled-active-indicator-color:var(--_disabled-active-indicator-color);--md-filled-field-disabled-active-indicator-height:var(--_disabled-active-indicator-height);--md-filled-field-disabled-active-indicator-opacity:var(--_disabled-active-indicator-opacity);--md-filled-field-disabled-container-color:var(--_disabled-container-color);--md-filled-field-disabled-container-opacity:var(--_disabled-container-opacity);--md-filled-field-disabled-content-color:var(--_disabled-input-text-color);--md-filled-field-disabled-content-opacity:var(--_disabled-input-text-opacity);--md-filled-field-disabled-label-text-color:var(--_disabled-label-text-color);--md-filled-field-disabled-label-text-opacity:var(--_disabled-label-text-opacity);--md-filled-field-disabled-leading-content-color:var(--_disabled-leading-icon-color);--md-filled-field-disabled-leading-content-opacity:var(--_disabled-leading-icon-opacity);--md-filled-field-disabled-supporting-text-color:var(--_disabled-supporting-text-color);--md-filled-field-disabled-supporting-text-opacity:var(--_disabled-supporting-text-opacity);--md-filled-field-disabled-trailing-content-color:var(--_disabled-trailing-icon-color);--md-filled-field-disabled-trailing-content-opacity:var(--_disabled-trailing-icon-opacity);--md-filled-field-error-active-indicator-color:var(--_error-active-indicator-color);--md-filled-field-error-content-color:var(--_error-input-text-color);--md-filled-field-error-focus-active-indicator-color:var(--_error-focus-active-indicator-color);--md-filled-field-error-focus-content-color:var(--_error-focus-input-text-color);--md-filled-field-error-focus-label-text-color:var(--_error-focus-label-text-color);--md-filled-field-error-focus-leading-content-color:var(--_error-focus-leading-icon-color);--md-filled-field-error-focus-supporting-text-color:var(--_error-focus-supporting-text-color);--md-filled-field-error-focus-trailing-content-color:var(--_error-focus-trailing-icon-color);--md-filled-field-error-hover-active-indicator-color:var(--_error-hover-active-indicator-color);--md-filled-field-error-hover-content-color:var(--_error-hover-input-text-color);--md-filled-field-error-hover-label-text-color:var(--_error-hover-label-text-color);--md-filled-field-error-hover-leading-content-color:var(--_error-hover-leading-icon-color);--md-filled-field-error-hover-state-layer-color:var(--_error-hover-state-layer-color);--md-filled-field-error-hover-state-layer-opacity:var(--_error-hover-state-layer-opacity);--md-filled-field-error-hover-supporting-text-color:var(--_error-hover-supporting-text-color);--md-filled-field-error-hover-trailing-content-color:var(--_error-hover-trailing-icon-color);--md-filled-field-error-label-text-color:var(--_error-label-text-color);--md-filled-field-error-leading-content-color:var(--_error-leading-icon-color);--md-filled-field-error-supporting-text-color:var(--_error-supporting-text-color);--md-filled-field-error-trailing-content-color:var(--_error-trailing-icon-color);--md-filled-field-focus-active-indicator-color:var(--_focus-active-indicator-color);--md-filled-field-focus-active-indicator-height:var(--_focus-active-indicator-height);--md-filled-field-focus-content-color:var(--_focus-input-text-color);--md-filled-field-focus-label-text-color:var(--_focus-label-text-color);--md-filled-field-focus-leading-content-color:var(--_focus-leading-icon-color);--md-filled-field-focus-supporting-text-color:var(--_focus-supporting-text-color);--md-filled-field-focus-trailing-content-color:var(--_focus-trailing-icon-color);--md-filled-field-hover-active-indicator-color:var(--_hover-active-indicator-color);--md-filled-field-hover-active-indicator-height:var(--_hover-active-indicator-height);--md-filled-field-hover-content-color:var(--_hover-input-text-color);--md-filled-field-hover-label-text-color:var(--_hover-label-text-color);--md-filled-field-hover-leading-content-color:var(--_hover-leading-icon-color);--md-filled-field-hover-state-layer-color:var(--_hover-state-layer-color);--md-filled-field-hover-state-layer-opacity:var(--_hover-state-layer-opacity);--md-filled-field-hover-supporting-text-color:var(--_hover-supporting-text-color);--md-filled-field-hover-trailing-content-color:var(--_hover-trailing-icon-color);--md-filled-field-label-text-color:var(--_label-text-color);--md-filled-field-label-text-font:var(--_label-text-font);--md-filled-field-label-text-line-height:var(--_label-text-line-height);--md-filled-field-label-text-populated-line-height:var(--_label-text-populated-line-height);--md-filled-field-label-text-populated-size:var(--_label-text-populated-size);--md-filled-field-label-text-size:var(--_label-text-size);--md-filled-field-label-text-weight:var(--_label-text-weight);--md-filled-field-leading-content-color:var(--_leading-icon-color);--md-filled-field-leading-space:var(--_leading-space);--md-filled-field-supporting-text-color:var(--_supporting-text-color);--md-filled-field-supporting-text-font:var(--_supporting-text-font);--md-filled-field-supporting-text-line-height:var(--_supporting-text-line-height);--md-filled-field-supporting-text-size:var(--_supporting-text-size);--md-filled-field-supporting-text-weight:var(--_supporting-text-weight);--md-filled-field-top-space:var(--_top-space);--md-filled-field-trailing-content-color:var(--_trailing-icon-color);--md-filled-field-trailing-space:var(--_trailing-space);--md-filled-field-with-label-bottom-space:var(--_with-label-bottom-space);--md-filled-field-with-label-top-space:var(--_with-label-top-space)}`
/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */;class vC extends nd{constructor(){super(...arguments),this.fieldTag=be`md-filled-field`}}
/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let bC=class extends vC{constructor(){super(...arguments),this.fieldTag=be`md-filled-field`}};bC.styles=[ad,gC],bC=bt([at("md-filled-text-field")],bC);
/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
class yC extends an{computeValidity(t){this.radioElement||(this.radioElement=document.createElement("input"),this.radioElement.type="radio",this.radioElement.name="group");let e=!1,i=!1;for(const{checked:r,required:o}of t)o&&(e=!0),r&&(i=!0);return this.radioElement.checked=i,this.radioElement.required=e,{validity:{valueMissing:e&&!i},validationMessage:this.radioElement.validationMessage}}equals(t,e){if(t.length!==e.length)return!1;for(let i=0;i<t.length;i++){const r=t[i],o=e[i];if(r.checked!==o.checked||r.required!==o.required)return!1}return!0}copy(t){return t.map((({checked:t,required:e})=>({checked:t,required:e})))}}
/**
 * @license
 * Copyright 2022 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class xC{get controls(){const t=this.host.getAttribute("name");return t&&this.root&&this.host.isConnected?Array.from(this.root.querySelectorAll(`[name="${t}"]`)):[this.host]}constructor(t){this.host=t,this.focused=!1,this.root=null,this.handleFocusIn=()=>{this.focused=!0,this.updateTabIndices()},this.handleFocusOut=()=>{this.focused=!1,this.updateTabIndices()},this.handleKeyDown=t=>{const e="ArrowDown"===t.key,i="ArrowUp"===t.key,r="ArrowLeft"===t.key,o="ArrowRight"===t.key;if(!(r||o||e||i))return;const n=this.controls;if(!n.length)return;t.preventDefault();const s="rtl"===getComputedStyle(this.host).direction?r||e:o||e,a=n.indexOf(this.host);let l=s?a+1:a-1;for(;l!==a;){l>=n.length?l=0:l<0&&(l=n.length-1);const t=n[l];if(!t.hasAttribute("disabled")){for(const e of n)e!==t&&(e.checked=!1,e.tabIndex=-1,e.blur());t.checked=!0,t.tabIndex=0,t.focus(),t.dispatchEvent(new Event("change",{bubbles:!0}));break}s?l++:l--}}}hostConnected(){this.root=this.host.getRootNode(),this.host.addEventListener("keydown",this.handleKeyDown),this.host.addEventListener("focusin",this.handleFocusIn),this.host.addEventListener("focusout",this.handleFocusOut),this.host.checked&&this.uncheckSiblings(),this.updateTabIndices()}hostDisconnected(){this.host.removeEventListener("keydown",this.handleKeyDown),this.host.removeEventListener("focusin",this.handleFocusIn),this.host.removeEventListener("focusout",this.handleFocusOut),this.updateTabIndices(),this.root=null}handleCheckedChange(){this.host.checked&&(this.uncheckSiblings(),this.updateTabIndices())}uncheckSiblings(){for(const t of this.controls)t!==this.host&&(t.checked=!1)}updateTabIndices(){const t=this.controls,e=t.find((t=>t.checked));if(e||this.focused){const i=e||this.host;i.tabIndex=0;for(const e of t)e!==i&&(e.tabIndex=-1)}else for(const e of t)e.tabIndex=0}}
/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var wC;const _C=Symbol("checked");let kC=0;const CC=rn(sn(je(Tc(nt))));class AC extends CC{get checked(){return this[_C]}set checked(t){const e=this.checked;e!==t&&(this[_C]=t,this.requestUpdate("checked",e),this.selectionController.handleCheckedChange())}constructor(){super(),this.maskId="cutout"+ ++kC,this[wC]=!1,this.required=!1,this.value="on",this.selectionController=new xC(this),this.addController(this.selectionController),this[Ue].role="radio",this.addEventListener("click",this.handleClick.bind(this)),this.addEventListener("keydown",this.handleKeydown.bind(this))}render(){const t={checked:this.checked};return U` <div class="container ${qt(t)}" aria-hidden="true"> <md-ripple part="ripple" .control="${this}" ?disabled="${this.disabled}"></md-ripple> <md-focus-ring part="focus-ring" .control="${this}"></md-focus-ring> <svg class="icon" viewBox="0 0 20 20"> <mask id="${this.maskId}"> <rect width="100%" height="100%" fill="white"/> <circle cx="10" cy="10" r="8" fill="black"/> </mask> <circle class="outer circle" cx="10" cy="10" r="10" mask="url(#${this.maskId})"/> <circle class="inner circle" cx="10" cy="10" r="5"/> </svg> <input id="input" type="radio" tabindex="-1" .checked="${this.checked}" .value="${this.value}" ?disabled="${this.disabled}"> </div> `}updated(){this[Ue].ariaChecked=String(this.checked)}async handleClick(t){this.disabled||(await 0,t.defaultPrevented||(Yo(t)&&this.focus(),this.checked=!0,this.dispatchEvent(new Event("change",{bubbles:!0})),this.dispatchEvent(new InputEvent("input",{bubbles:!0,composed:!0}))))}async handleKeydown(t){await 0," "!==t.key||t.defaultPrevented||this.click()}[(wC=_C,on)](){return this.checked?this.value:null}[nn](){return String(this.checked)}formResetCallback(){this.checked=this.hasAttribute("checked")}formStateRestoreCallback(t){this.checked="true"===t}[Qo](){return new yC((()=>this.selectionController?this.selectionController.controls:[this]))}[Ko](){return this.container}}bt([dt({type:Boolean})],AC.prototype,"checked",null),bt([dt({type:Boolean})],AC.prototype,"required",void 0),bt([dt()],AC.prototype,"value",void 0),bt([pt(".container")],AC.prototype,"container",void 0);
/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
const SC=n`@layer{:host{display:inline-flex;height:var(--md-radio-icon-size, 20px);outline:none;position:relative;vertical-align:top;width:var(--md-radio-icon-size, 20px);-webkit-tap-highlight-color:rgba(0,0,0,0);cursor:pointer;--md-ripple-hover-color: var(--md-radio-hover-state-layer-color, var(--md-sys-color-on-surface, #1d1b20));--md-ripple-hover-opacity: var(--md-radio-hover-state-layer-opacity, 0.08);--md-ripple-pressed-color: var(--md-radio-pressed-state-layer-color, var(--md-sys-color-primary, #6750a4));--md-ripple-pressed-opacity: var(--md-radio-pressed-state-layer-opacity, 0.12)}:host([disabled]){cursor:default}:host([touch-target=wrapper]){margin:max(0px,(48px - var(--md-radio-icon-size, 20px))/2)}.container{display:flex;height:100%;place-content:center;place-items:center;width:100%}md-focus-ring{height:44px;inset:unset;width:44px}.checked{--md-ripple-hover-color: var(--md-radio-selected-hover-state-layer-color, var(--md-sys-color-primary, #6750a4));--md-ripple-hover-opacity: var(--md-radio-selected-hover-state-layer-opacity, 0.08);--md-ripple-pressed-color: var(--md-radio-selected-pressed-state-layer-color, var(--md-sys-color-on-surface, #1d1b20));--md-ripple-pressed-opacity: var(--md-radio-selected-pressed-state-layer-opacity, 0.12)}input{appearance:none;height:48px;margin:0;position:absolute;width:48px;cursor:inherit}:host([touch-target=none]) input{width:100%;height:100%}md-ripple{border-radius:50%;height:var(--md-radio-state-layer-size, 40px);inset:unset;width:var(--md-radio-state-layer-size, 40px)}.icon{fill:var(--md-radio-icon-color, var(--md-sys-color-on-surface-variant, #49454f));inset:0;position:absolute}.outer.circle{transition:fill 50ms linear}.inner.circle{opacity:0;transform-origin:center;transition:opacity 50ms linear}.checked .icon{fill:var(--md-radio-selected-icon-color, var(--md-sys-color-primary, #6750a4))}.checked .inner.circle{animation:inner-circle-grow 300ms cubic-bezier(0.05, 0.7, 0.1, 1);opacity:1}@keyframes inner-circle-grow{from{transform:scale(0)}to{transform:scale(1)}}:host([disabled]) .circle{animation-duration:0s;transition-duration:0s}:host(:hover) .icon{fill:var(--md-radio-hover-icon-color, var(--md-sys-color-on-surface, #1d1b20))}:host(:focus-within) .icon{fill:var(--md-radio-focus-icon-color, var(--md-sys-color-on-surface, #1d1b20))}:host(:active) .icon{fill:var(--md-radio-pressed-icon-color, var(--md-sys-color-on-surface, #1d1b20))}:host([disabled]) .icon{fill:var(--md-radio-disabled-unselected-icon-color, var(--md-sys-color-on-surface, #1d1b20));opacity:var(--md-radio-disabled-unselected-icon-opacity, 0.38)}:host(:hover) .checked .icon{fill:var(--md-radio-selected-hover-icon-color, var(--md-sys-color-primary, #6750a4))}:host(:focus-within) .checked .icon{fill:var(--md-radio-selected-focus-icon-color, var(--md-sys-color-primary, #6750a4))}:host(:active) .checked .icon{fill:var(--md-radio-selected-pressed-icon-color, var(--md-sys-color-primary, #6750a4))}:host([disabled]) .checked .icon{fill:var(--md-radio-disabled-selected-icon-color, var(--md-sys-color-on-surface, #1d1b20));opacity:var(--md-radio-disabled-selected-icon-opacity, 0.38)}}@layer hcm{@media(forced-colors: active){.icon{fill:CanvasText}:host([disabled]) .icon{fill:GrayText;opacity:1}}}
`
/**
 * @license
 * Copyright 2022 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */;let TC=class extends AC{};TC.styles=[SC],TC=bt([at("md-radio")],TC);
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
class PC extends Ht{constructor(t){if(super(t),this.it=j,t.type!==Ut)throw Error(this.constructor.directiveName+"() can only be used in child bindings")}render(t){if(t===j||null==t)return this._t=void 0,this.it=t;if(t===V)return t;if("string"!=typeof t)throw Error(this.constructor.directiveName+"() called with a non-string value");if(t===this.it)return this._t;this.it=t;const e=[t];return e.raw=e,this._t={_$litType$:this.constructor.resultType,strings:e,values:[]}}}PC.directiveName="unsafeHTML",PC.resultType=1;const EC=Gt(PC);var IC=function(t,e,i,r){var o,n=arguments.length,s=n<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(n<3?o(s):n>3?o(e,i,s):o(e,i))||s);return n>3&&s&&Object.defineProperty(e,i,s),s};let LC=class extends Cs{constructor(){super(...arguments),this.question={maxLength:0,text:""},this.useSmallFont=!1,this.value="",this.characterCount=0,this.hasFocus=!1,this.allowFirefoxFocusHack=!0,this.showErrorLine=!1}static get styles(){return[super.styles,n`:host{display:inline-block;margin-top:8px;width:100%;height:300px}md-filled-text-field{margin-top:8px}#htmlEditor{background-color:var(--md-sys-color-surface);color:var(--md-sys-color-on-surface);width:100%;border-top:1px solid var(--md-sys-color-primary);border-bottom:1px solid var(--md-sys-color-primary);outline:0;overflow:auto;padding-top:8px;padding-bottom:8px;transition:border-bottom-color .1s}#htmlEditor:focus{border-bottom:2px solid var(--md-sys-color-primary)}#htmlEditor[has-error]{border-bottom:2px solid #dd2c00!important}.characterCounter{font-size:12px;text-align:right;width:100%;transition:color .1s;margin-top:1px}.characterCounter[has-focus]{margin-top:0}.characterCounter[has-error]{color:var(--md-sys-color-error)}md-icon-button{margin-left:4px;margin-right:4px;margin-bottom:4px}.mainContainer{max-width:920px}@media (max-width:800px){#htmlEditor{height:220px}}`]}_onWidthInput(t){const e=/^(\d+px|\d+%|auto)$/.test(t.target.value);t.target.setCustomValidity(e?"":this.t("Enter a valid width (e.g., 100px or 100%)"))}_onHeightInput(t){const e=/^(\d+px|\d+%|auto)$/.test(t.target.value);t.target.setCustomValidity(e?"":this.t("Enter a valid height (e.g., 100px or 100%)"))}_onMarginInput(t){const e=/^\d*px$/.test(t.target.value);t.target.setCustomValidity(e?"":this.t("Enter a valid pixel value (e.g., 20px)"))}closeImageDialog(){const t=this.$$("#resizeDialog");t&&(t.open=!1)}applyImageSize(){const t=this.$$("#widthInput").value,e=this.$$("#heightInput").value,i=this.$$("#marginInput").value;this.selectedImage&&(this.selectedImage.style.width=t,this.selectedImage.style.height=e,this.selectedImage.style.margin=i);const r=this.$$("#resizeDialog");r&&(r.open=!1)}selectImage(t){this.selectedImage=t;const e=this.$$("#resizeDialog");e&&(e.open=!0)}renderImageEditDialog(){return this.selectedImage?U`<md-dialog id="resizeDialog" aria-label="${this.t("resizeImage")}"> <form class="layout vertical" slot="content"> <md-filled-text-field id="widthInput" label="${this.t("Width (e.g., 100px or 100%)")}" .value="${this.selectedImage.style.width}" @input="${this._onWidthInput}"></md-filled-text-field> <md-filled-text-field id="heightInput" label="${this.t("Height (e.g., 100px or 100%)")}" .value="${this.selectedImage.style.height}" @input="${this._onHeightInput}"></md-filled-text-field> <md-filled-text-field id="marginInput" .value="${this.selectedImage.style.margin}" label="${this.t("Margin (px)")}" @input="${this._onMarginInput}"></md-filled-text-field> </form> <div slot="actions"> <md-outlined-button slot="actions" @click="${this.closeImageDialog}"> ${this.t("Close")} </md-outlined-button> <md-outlined-button dialogAction="apply" @click="${this.applyImageSize}"> ${this.t("apply")} </md-outlined-button> </div> </md-dialog>`:j}render(){return U` <div class="layout horizontal wrap mainContainer"> <div class="layout horizontal"> <md-icon-button aria-label="${this.t("formatBold")}" @mousedown="${this._toggleBold}"><md-icon>format_bold</md-icon></md-icon-button> <md-icon-button aria-label="${this.t("formatItalic")}" @mousedown="${this._toggleItalic}"><md-icon>format_italic</md-icon></md-icon-button> <md-icon-button aria-label="${this.t("formatUnderline")}" @mousedown="${this._toggleUnderline}"><md-icon>format_underlined</md-icon></md-icon-button> <md-icon-button aria-label="${this.t("formatListBullets")}" @mousedown="${this._toggleListBullets}"><md-icon>format_list_bulleted</md-icon></md-icon-button> <md-icon-button aria-label="${this.t("formatListNumbered")}" @mousedown="${this._toggleListNumbers}"><md-icon>format_list_numbered</md-icon></md-icon-button> </div> <div class="layout horizontal"> <md-icon-button aria-label="${this.t("formatLeft")}" @mousedown="${this._toggleAlignLeft}"><md-icon>format_align_left</md-icon></md-icon-button> <md-icon-button aria-label="${this.t("formatCenter")}" @mousedown="${this._toggleAlignCenter}"><md-icon>format_align_center</md-icon></md-icon-button> <md-icon-button aria-label="${this.t("formatRight")}" @mousedown="${this._toggleAlignRight}"><md-icon>format_align_right</md-icon></md-icon-button> </div> <div class="layout horizontal"> <md-icon-button aria-label="${this.t("formatH1")}" @mousedown="${this._toggleH1}"><md-icon>format_h1</md-icon></md-icon-button> <md-icon-button aria-label="${this.t("formatH2")}" @mousedown="${this._toggleH2}"><md-icon>format_h2</md-icon></md-icon-button> <md-icon-button aria-label="${this.t("formatH3")}" @mousedown="${this._toggleH3}"><md-icon>format_h3</md-icon></md-icon-button> <md-icon-button aria-label="${this.t("formatH4")}" @mousedown="${this._toggleH4}"><md-icon>format_h4</md-icon></md-icon-button> <md-icon-button aria-label="${this.t("formatH5")}" @mousedown="${this._toggleH5}"><md-icon>format_h5</md-icon></md-icon-button> <md-icon-button aria-label="${this.t("formatH6")}" @mousedown="${this._toggleH6}"><md-icon>format_h6</md-icon></md-icon-button> <md-icon-button aria-label="${this.t("formatP")}" @mousedown="${this._toggleP}"><md-icon>format_paragraph</md-icon></md-icon-button> <md-icon-button aria-label="${this.t("formatClear")}" @mousedown="${this._clearFormat}"><md-icon>format_clear</md-icon></md-icon-button> </div> </div> <div id="htmlEditor" ?has-error="${this.showErrorLine}" @focus="${this._setFocus}" @blur="${this._setBlur}" contenteditable="true" spellcheck="false" @keydown="${this._keydown}" @paste="${this._paste}" @click="${this._changed}" @keyup="${this._changed}" @changed="${this._changed}"></div> <div ?has-focus="${this.hasFocus}" ?has-error="${this.showErrorLine}" class="layout end characterCounter"> ${this.characterCount}<span ?hidden="${!this.question.maxLength}">/${this.question.maxLength}</span> </div> ${this.renderImageEditDialog()} `}deselectImage(){this.selectedImage=void 0;const t=this.$$("#resizeDialog");t&&(t.open=!1)}_setFocus(){this.hasFocus=!0,this._isFirefox()&&this.allowFirefoxFocusHack&&setTimeout((()=>{this.allowFirefoxFocusHack=!1,this.shadowRoot.querySelector("#htmlEditor").blur(),this.shadowRoot.querySelector("#htmlEditor").focus(),setTimeout((()=>{this.allowFirefoxFocusHack=!0}),150)}))}connectedCallback(){super.connectedCallback()}update(t){super.update(t),t.has("value")&&this.setRichValue(this.value)}firstUpdated(t){super.firstUpdated(t),this.setRichValue(this.value),this.shadowRoot.querySelector("#htmlEditor").addEventListener("click",(t=>{t.target&&"IMG"===t.target.tagName?this.selectImage(t.target):this.deselectImage()}))}_setBlur(t){this.hasFocus=!1}setRichValue(t){this.value=t,this.shadowRoot.querySelector("#htmlEditor").innerHTML=this.value}_updateCharacterCounter(){const t=this.shadowRoot.querySelector("#htmlEditor").textContent;this.characterCount=t?t.length:0}_keydown(t){if(this._updateCharacterCounter(),this.showErrorLine=!1,this.question.maxLength){const e=[65,90,86,67,88,8],i=[8,37,38,39,40].includes(t.keyCode),r=t.ctrlKey&&e.includes(t.keyCode);if(i||r)return;this.characterCount>=this.question.maxLength&&t.preventDefault()}}_paste(t){if(this.question.maxLength){const e=(t.clipboardData||window.clipboardData).getData("text/plain"),i=t.target.textContent.length,r=window.getSelection().toString(),o=this.question.maxLength-i+r.length,n=e.substring(0,o);t.preventDefault(),this._masterCommand("insertHTML",!1,n)}setTimeout((()=>{this._updateCharacterCounter()}))}_changed(){this.value=this.shadowRoot.querySelector("#htmlEditor").innerHTML,this._updateCharacterCounter(),this.fire("change",{value:this.value,index:this.index})}validate(){return this.question.required?this.value&&this.value.length>0?(this.showErrorLine=!1,!0):(this.showErrorLine=!0,!1):(this.showErrorLine=!1,!0)}_isSafariOrIe11(){return navigator.userAgent.indexOf("Safari")>-1&&-1===navigator.userAgent.indexOf("Chrome")&&-1===navigator.userAgent.indexOf("iPhone")&&-1===navigator.userAgent.indexOf("iPad")||/Trident.*rv[ :]*11\./.test(navigator.userAgent)}_isFirefox(){return navigator.userAgent.indexOf("Firefox")>-1}_clearFormat(){this._masterCommand("removeFormat"),this._masterCommand("formatBlock",!1,"p")}_clearFormatM(){this._isSafariOrIe11()&&this._clearFormat()}_toggleH1(){this._masterCommand("formatBlock",!1,"h1")}_toggleH1M(){this._isSafariOrIe11()&&this._toggleH1()}_toggleH2(){this._masterCommand("formatBlock",!1,"h2")}_toggleH2M(){this._isSafariOrIe11()&&this._toggleH2()}_toggleH3(){this._masterCommand("formatBlock",!1,"h3")}_toggleH3M(){this._isSafariOrIe11()&&this._toggleH3()}_toggleH4(){this._masterCommand("formatBlock",!1,"h4")}_toggleH4M(){this._isSafariOrIe11()&&this._toggleH4()}_toggleH5(){this._masterCommand("formatBlock",!1,"h5")}_toggleH5M(){this._isSafariOrIe11()&&this._toggleH5()}_toggleH6(){this._masterCommand("formatBlock",!1,"h6")}_toggleH6M(){this._isSafariOrIe11()&&this._toggleH6()}_toggleP(){this._masterCommand("formatBlock",!1,"p")}_togglePM(){this._isSafariOrIe11()&&this._toggleP()}_toggleAlignLeft(){this._masterCommand("JustifyLeft",!1,"")}_toggleAlignLeftM(){this._isSafariOrIe11()&&this._toggleAlignLeft()}_toggleAlignRight(){this._masterCommand("JustifyRight",!1,"")}_toggleAlignRightM(){this._isSafariOrIe11()&&this._toggleAlignRight()}_toggleAlignCenter(){this._masterCommand("JustifyCenter",!1,"")}_toggleAlignCenterM(){this._isSafariOrIe11()&&this._toggleAlignCenter()}_toggleAlignJustify(){this._masterCommand("JustifyFull",!1,"")}_toggleAlignJustifyM(){this._isSafariOrIe11()&&this._toggleAlignJustify()}_toggleBold(){this._masterCommand("bold")}_toggleBoldM(){this._isSafariOrIe11()&&this._toggleBold()}_toggleItalic(){this._masterCommand("italic")}_toggleItalicM(){this._isSafariOrIe11()&&this._toggleItalic()}_toggleUnderline(){this._masterCommand("underline")}_toggleUnderlineM(){this._isSafariOrIe11()&&this._toggleUnderline()}_toggleListBullets(){this._masterCommand("insertUnorderedList")}_toggleListBulletsM(){this._isSafariOrIe11()&&this._toggleListBullets()}_toggleListNumbers(){this._masterCommand("insertOrderedList")}_toggleListNumbersM(){this._isSafariOrIe11()&&this._toggleListNumbers()}_masterCommand(t,e=!1,i=""){document.execCommand(t,e,i),this._changed()}};IC([dt({type:Object})],LC.prototype,"question",void 0),IC([dt({type:Number})],LC.prototype,"index",void 0),IC([dt({type:Boolean})],LC.prototype,"useSmallFont",void 0),IC([dt({type:String})],LC.prototype,"value",void 0),IC([dt({type:Number})],LC.prototype,"characterCount",void 0),IC([dt({type:Boolean})],LC.prototype,"hasFocus",void 0),IC([dt({type:Boolean})],LC.prototype,"allowFirefoxFocusHack",void 0),IC([dt({type:Boolean})],LC.prototype,"showErrorLine",void 0),IC([dt({type:Object})],LC.prototype,"selectedImage",void 0),LC=IC([at("yp-simple-html-editor")],LC);var OC=function(t,e,i,r){var o,n=arguments.length,s=n<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(n<3?o(s):n>3?o(e,i,s):o(e,i))||s);return n>3&&s&&Object.defineProperty(e,i,s),s};let RC=class extends Cs{constructor(){super(...arguments),this.hideQuestionIndex=!1,this.dontFocusFirstQuestion=!1,this.useSmallFont=!1,this.longFocus=!1,this.isLastRating=!1,this.isFirstRating=!1,this.isFromNewPost=!1,this.debounceTimeMs=2e3,this.disabled=!1,this.radioKeypress=!1}updated(t){super.updated(t),t.has("structuredAnswers")&&this._structuredAnsweredChanged()}static get styles(){return[super.styles,n`:host{display:block;font-size:16px}md-filled-text-field{--md-filled-field-container-color:var(
            --md-sys-color-surface
          )!important}.question{margin-top:32px;margin-bottom:8px;font-size:18px;line-height:1.5}.question[use-small-font]{font-size:16px}.subTitle{font-size:16px;margin-top:8px;margin-bottom:8px}.subTitle [use-small-font]{font-size:14px}hr{border-top:2px dashed var(--accent-color);margin-top:48px;margin-bottom:32px}.noBottomMargin{margin-bottom:0}.header[is-not-first]{margin-top:54px}md-menu{margin-top:16px}md-checkbox{margin-bottom:16px}md-filled-text-field{width:100%}md-filled-text-field[use-small-font]{--md-filled-text-field-container-label:{font-size:16px};}md-filled-text-field{margin-bottom:32px}.radioGroup{margin-top:16px;margin-bottom:16px;font-size:16px}.radioLabel{width:100%;margin:16px;margin-bottom:8px}md-checkbox{margin-left:8px}.checkboxLabel{width:100%;align-self:start;margin-left:12px}md-radio{width:40px}.checkBoxesLabel{margin-bottom:36px}.radiosLabel{margin-bottom:0;margin-top:42px}.radiosLabel[is-first-rating]{margin-top:42px}md-filled-text-field.textAreaLong{--md-filled-text-field-container:{margin:0;padding:0};}md-filled-text-field.textAreaLong{--md-filled-text-field-container:{margin:0;padding:0};}.longQuestion{font-size:18px;padding-bottom:0;margin-bottom:0}.longQuestion[use-small-font]{font-size:16px}.longQuestion[has-content]{font-size:12px}[hidden]{display:none!important}.header{font-size:26px;font-weight:700;line-height:1.5}.header[is-first]{background-color:var(--md-sys-color-primary-container);color:var(--md-sys-color-on-primary-container);font-size:32px;padding:24px}@media (min-width:800px){md-filled-text-field[half-width-desktop]{width:50%}:host{padding:0;margin:0}}.specifyInput{max-width:220px;margin-left:48px;margin-top:0;margin-bottom:0}.specifyCheckBox{margin-left:42px;margin-bottom:12px}.error{border:2px solid var(--md-sys-color-error);padding:6px;margin:6px}@media (max-width:600px){.header{font-size:22px}.header[is-first]{font-size:24px}}`]}get value(){const t=this.getAnswer(!0);return t?t.value:null}set value(t){this.setAnswerAfterUpdate(t)}async setAnswerAfterUpdate(t){await this.updateComplete,this.setAnswer(t)}renderTextField(t=!1){return U` <md-filled-text-field id="structuredQuestion_${this.index}" .value="${this.question.value||""}" .label="${t?"":this.textWithIndex}" name="${this.formName||""}" ?use-small-font="${this.useSmallFont}" .title="${this.question.text}" @keypress="${this._keyPressed}" .pattern="${this.question.pattern||""}" type="text" .allowedPattern="${this.isNumberSubType?"[0-9]":""}" ?half-width-desktop="${this.question.halfWidthDesktop}" @change="${t=>{t.detail={value:t.currentTarget.value},this._debounceChangeEvent(t)}}" ?required="${this.question.required}" maxlength="${jr(this.question.maxLength||void 0)}"> </md-filled-text-field> ${this.question.subTitle?U`<div class="subTitle" ?use-small-font="${this.useSmallFont}">${this.question.subTitle}</div>`:j} `}renderTextFieldLong(){return U` <div class="question general longQuestion" ?is-from-new-post="${this.isFromNewPost}" ?has-focus="${this.longFocus}" id="structuredQuestionIntro_${this.index}"> ${EC(this.textWithIndex)} </div> ${this.renderTextField(!0)} `}renderTextArea(t=!1){return this.question.richTextAllowed?U` <yp-simple-html-editor id="structuredQuestion_${this.index}" .question="${this.question}" @focus="${this.setLongFocus}" @blur="${this.setLongUnFocus}"> </yp-simple-html-editor>`:U` <md-filled-text-field id="structuredQuestion_${this.index}" data-type="text" type="textarea" .label="${t?"":this.textWithIndex}" .value="${this.question.value||""}" minlength="2" ?charCounter="${null==this.question.charCounter||this.question.charCounter}" .pattern="${this.question.pattern||""}" @focus="${this.setLongFocus}" @blur="${this.setLongUnFocus}" ?use-small-font="${this.useSmallFont}" @change="${t=>{t.detail={value:t.currentTarget.value},this._debounceChangeEvent(t)}}" name="${this.formName||""}" rows="${jr(this.question.rows||3)}" max-rows="5" maxrows="5" ?required="${this.question.required}" maxlength="${jr(this.question.maxLength||void 0)}"> </md-filled-text-field> `}renderTextAreaLong(){return U` <div class="question general longQuestion" ?is-from-new-post="${this.isFromNewPost}" ?has-focus="${this.longFocus}" ?is-from-new-post="${this.isFromNewPost}" ?has-content="${this.question.value}" ?use-small-font="${this.useSmallFont}" id="structuredQuestionIntro_${this.index}"> ${EC(this.textWithLinks)} </div> ${this.renderTextArea(!0)} `}renderTextHeader(){return U` <div class="header" ?is-not-first="${this.index}" ?is-first="${!this.index}"> ${this.question.text} </div> `}renderTextDescription(){return U` <div class="question general" id="structuredQuestionQuestion_${this.index}" ?is-from-new-post="${this.isFromNewPost}" ?use-small-font="${this.useSmallFont}" ?extra-top-margin="${this.question.extraTopMargin}" ?less-bottom-margin="${this.question.lessBottomMargin}"> ${EC(this.textWithLinks)} </div> `}renderSeperator(){return U` <hr> `}renderRadioButton(t,e){return U` <label class="layout horizontal center-center"> <md-radio ?use-small-font="${this.useSmallFont}" @keypress="${this.setRadioEventType}" @change="${this._radioChanged}" .value="${t.text}" id="structuredQuestionRadioGroup_${this.index}_${e}" .name="radioButtons${this.index}"> </md-radio> <div class="radioLabel">${t.text}</div> </label> `}renderRadios(){return this.question.radioButtons?U` <div class="question general radiosLabel" ?use-small-font="${this.useSmallFont}" ?is-from-new-post="${this.isFromNewPost}" ?is-first-rating="${this.isFirstRating}" id="structuredQuestionIntro_${this.index}"> ${EC(this.textWithLinks)} </div> <div ?required="${this.question.required}" id="structuredQuestion_${this.index}" .name="structuredQuestionRadioGroup_${this.index}" class="${this._getRadioClass()} radioGroup"> ${this.question.radioButtons.map(((t,e)=>U` ${t.isSpecify?U` ${this.renderRadioButton(t,e)} <md-filled-text-field class="specifyInput" hidden @change="${this._debounceChangeEvent}" .maxlength="${this.question.maxLength||5e3}" .pattern="${"number"===t.subType?"[0-9]":""}" type="text" id="structuredQuestion_${this.index}_${e}__radioOther"></md-filled-text-field> `:U` ${this.renderRadioButton(t,e)} `} `))} </div> `:j}renderCheckbox(t,e,i=!1){const r=i?`structuredQuestion_${this.index}`:`structuredQuestionCheckbox_${this.index}_${e}`;return U` <label class="layout horizontal center-center"> <md-checkbox id="${r}" .name="${this.formName||""}" ?disabled="${this.disabled}" ?checked="${this.question.value||!1}" @change="${this._checkboxChanged}"> </md-checkbox> <div class="checkboxLabel">${t}</div> </label> `}renderCheckboxes(){return this.question.checkboxes?U` <div id="structuredQuestionIntro_${this.index}" class="question general checkBoxesLabel" ?is-from-new-post="${this.isFromNewPost}" ?use-small-font="${this.useSmallFont}"> ${EC(this.textWithLinks)} </div> <div id="structuredQuestion_${this.index}" data-type="checkboxes" class="layout vertical"> ${this.question.checkboxes.map(((t,e)=>U` ${t.isSpecify?U` ${this.renderCheckbox(t.text,e)} <md-filled-text-field class="specifyInput specifyCheckBox" hidden @change="${this._debounceChangeEvent}" .type="${t.subType||"text"}" id="structuredQuestion_${this.index}_${e}_checkboxOther"></md-filled-text-field> `:U` ${this.renderCheckbox(t.text,e)} `} `))} </div> `:j}renderDropdown(){return U` <md-outlined-select .label="${this.textWithIndex}" @change="${this._dropDownChanged}"> ${this.question.dropdownOptions?.map((t=>U` <md-select-option name="${t.text}">${t.text}</md-select-option> `))} </md-outlined-select> `}_dropDownChanged(){}render(){let t,e=this.question.type;switch(e||(e="textarea"),e=e.toLowerCase(),e){case"textarea":t=this.renderTextArea();break;case"textarealong":t=this.renderTextAreaLong();break;case"textfield":t=this.renderTextField();break;case"textfieldlong":t=this.renderTextFieldLong();break;case"textheader":t=this.renderTextHeader();break;case"textdescription":t=this.renderTextDescription();break;case"checkboxes":t=this.renderCheckboxes();break;case"checkbox":t=this.renderCheckbox(this.question.text,0,!0);break;case"radios":t=this.renderRadios();break;case"seperator":t=this.renderSeperator()}return U`<div class="${this.classList.contains("error")?"error":""}"> ${t} </div>`}setLongUnFocus(){this.longFocus=!1}setLongFocus(){this.longFocus=!0}get isNumberSubType(){return this.question&&"number"===this.question.subType}_keyPressed(t){13!=t.which&&13!=t.keyCode||this.fire("yp-goto-next-index",{currentIndex:this.index})}setRadioEventType(){this.radioKeypress=!0}_sendDebouncedChange(t){this.fire("yp-answer-content-changed",t.detail),this.debunceChangeEventTimer||(this.debunceChangeEventTimer=setTimeout((()=>{this.debunceChangeEventTimer=void 0,this.fire("yp-answer-content-changed-debounced",t.detail),this._resizeScrollerIfNeeded()}),this.debounceTimeMs))}_debounceChangeEvent(t){t.stopPropagation(),this._sendDebouncedChange(t)}get textWithIndex(){return this.question.text}_getRadioClass(){return this.question.subType&&"rating"===this.question.subType&&!this.isLastRating?"layout vertical wrap lessBottomMargin":this.question.subType&&"rating"===this.question.subType?"layout vertical wrap":"layout vertical"}get textWithLinks(){let t=Yk(this.question.text);return t=t.replace(/\n/g,"<br>"),t}_resizeScrollerIfNeeded(){this.fire("resize-scroller")}checkValidity(){const t=this.$$("#structuredQuestion_"+this.index);return console.log(`liveQuestion: ${t}`),!t||("dropdown"===t.dataset.type||(t.name&&t.name.indexOf("RadioGroup")>-1?this.checkRadioButtonValidity():"checkboxes"===t.dataset.type||(t.value&&t.value.length>0?(console.log("liveQuestion: textfield has length"),!0):(console.log("liveQuestion: textfield has no length"),!1))))}get isInputField(){return this.question.type&&("textfield"===this.question.type.toLowerCase()||"textfieldlong"===this.question.type.toLowerCase()||"textarea"===this.question.type.toLowerCase()||"textarealong"===this.question.type.toLowerCase()||"numberfield"===this.question.type.toLowerCase())}focus(){if(this.isInputField){const t=this.$$("#structuredQuestion_"+this.index);t&&setTimeout((()=>{t.focus()}),250)}}cleanValue(t){return t?t.replace(/,/g,"").replace(/:/g,""):(console.warn("No value for cleanValue"),"")}checkRadioButtonValidity(){if(!this.question.required)return!0;if(this.$$("#structuredQuestion_"+this.index).checked)return!0;let t=!1;return this.question.radioButtons?.forEach(((e,i)=>{const r=this.$$("#structuredQuestionRadioGroup_"+this.index+"_"+i);r&&r.checked&&(t=!0)})),t}getAnswer(t=!1){const e=this.$$("#structuredQuestion_"+this.index);if(e){let t;if(this.isInputField)t=e.value;else if("radios"===this.question.type.toLowerCase()){let e;this.question.radioButtons?.forEach(((i,r)=>{const o=this.$$("#structuredQuestionRadioGroup_"+this.index+"_"+r);if(o&&i.text===o.value&&o.checked)if(e=o,i.isSpecify){const i=this.$$("#structuredQuestion_"+this.index+"_"+r+"__radioOther");t=i?e.value+":"+this.cleanValue(i.value):e.value}else t=e.value}))}else if("checkboxes"===this.question.type.toLowerCase()){let i="";for(let t=0;t<e.children.length;t++){const r=e.children[t].children[0];if(r&&r.checked){const t=r.id.split("_")[2],e=this.question.checkboxes[parseInt(t)];if(e.isSpecify){const r=this.$$("#structuredQuestion_"+this.index+"_"+t+"_checkboxOther");r&&""!==r.value?i+=e.text+":"+this.cleanValue(r.value)+",":i+=e.text+","}else i+=e.text+","}}""!==i&&(t=i.substring(0,i.length-1))}else"checkbox"===this.question.type.toLowerCase()&&(t=e.checked);if(null!=t&&this.question.uniqueId&&"number"===this.question.subType){let e;try{e=parseFloat(t),Number.isInteger(e)&&(e=parseInt(t,10))}catch(t){console.error(`Can't parse value as number: ${t}`)}return void 0===e||isNaN(e)?{uniqueId:this.question.uniqueId,value:t}:{uniqueId:this.question.uniqueId,value:e}}return null!=t&&this.question.uniqueId?{uniqueId:this.question.uniqueId,value:t}:void console.error(`Can't find answer for question: ${this.question.text}`)}t||console.error("Can't find question item for "+this.question.text)}setAnswer(t){if(null!=t){const e=this.$$("#structuredQuestion_"+this.index);if(e&&this.question.type)if(this.isInputField)this.question.richTextAllowed?e.setRichValue(t):e.value=t;else if(this.question.type&&"radios"===this.question.type.toLowerCase()){let e;if(t.indexOf(":")>-1){const i=t.split(":");t=i[0],e=i[1]}this.question.radioButtons?.forEach(((i,r)=>{if(i.text===t){const t=this.$$("#structuredQuestionRadioGroup_"+this.index+"_"+r);if(t&&(t.checked=!0,e)){const t=this.$$("#structuredQuestion_"+this.index+"_"+r+"__radioOther");t?(t.hidden=!1,t.value=e):console.error("Can't find checkbox specify value")}}}))}else if("checkboxes"===this.question.type.toLowerCase()&&this.question.checkboxes){const i=t.split(","),r={};let o=!1;for(let t=0;t<i.length;t++)if(i[t].indexOf(":")>-1){const e=i[t].split(":");i[t]=e[0],r[e[0]]=e[1],o=!0}for(let t=0;t<e.children.length;t++)if(e.children[t]){const n=e.children[t].id.split("_")[2],s=this.question.checkboxes[parseInt(n)];if(s){if(i.indexOf(s.text)>-1&&(e.children[t].checked=!0,o)){const t=this.$$("#structuredQuestion_"+this.index+"_"+n+"_checkboxOther");t&&r[s.text]?(t.hidden=!1,t.value=r[s.text]):console.error("Can't find checkbox specify value")}}else console.debug("No selectedCheckbox")}}else"checkbox"===this.question.type.toLowerCase()&&t&&(e.checked=!0);else console.error("cant find answer for item index "+this.index)}}hide(){const t=this.$$("#structuredQuestion_"+this.index);if(t){t.hidden=!0;const e=this.$$("#structuredQuestionIntro_"+this.index);e&&(e.hidden=!0)}else console.error("Can't find question index: "+this.index)}show(){const t=this.$$("#structuredQuestion_"+this.index);if(t){t.hidden=!1;const e=this.$$("#structuredQuestionIntro_"+this.index);e&&(e.hidden=!1)}else console.error("Can't find question index: "+this.index)}_checkboxChanged(t){if(this.question.checkboxes&&t.target.checked){const e=t.target.id.split("_")[2];if(this.question.checkboxes[parseInt(e)].isSpecify){const t=this.$$("#structuredQuestion_"+this.index+"_"+e+"_checkboxOther");t?(t.hidden=!1,t.value||(t.value=""),t.focus()):console.error("Can't find checkbox input")}}if(this.question.maxLength){let t=0;const e=this.$$("#structuredQuestion_"+this.index);for(let i=0;i<e.children.length;i++)"md-checkbox"===e.children[i].tagName.toLowerCase()&&e.children[i].checked&&(t+=1);if(t>=this.question.maxLength)for(let t=0;t<e.children.length;t++)"md-checkbox"!==e.children[t].tagName.toLowerCase()||e.children[t].checked||(e.children[t].disabled=!0);else for(let t=0;t<e.children.length;t++)"md-checkbox"===e.children[t].tagName.toLowerCase()&&e.children[t].disabled&&(e.children[t].disabled=!1)}t.stopPropagation(),this._sendDebouncedChange({detail:{value:t.target.checked}})}_radioChanged(t){if(t.stopPropagation(),this.question.radioButtons){let e;this.question.radioButtons.forEach(((i,r)=>{if(i.text===t.target.value)if(e=i,this._sendDebouncedChange({detail:{value:i.text}}),e.skipTo)this.fire("yp-skip-to-unique-id",{fromId:this.question.uniqueId,toId:e.skipTo});else if(e.isSpecify){const t=this.$$("#structuredQuestion_"+this.index+"_"+r+"__radioOther");t?(t.hidden=!1,t.focus()):console.error("Can't find radio specify value")}else{let t;setTimeout((()=>{this.radioKeypress||this.fire("yp-goto-next-index",{currentIndex:this.index})})),this.question.radioButtons?.forEach((e=>{e.skipTo&&(t=e.skipTo)})),t&&this.fire("yp-open-to-unique-id",{fromId:this.question.uniqueId,toId:t})}}))}}_structuredAnsweredChanged(){if(this.structuredAnswers&&this.question.uniqueId){const t={};try{this.structuredAnswers.forEach((e=>{if(this.question.uniqueId===e.uniqueId&&e.value)throw setTimeout((()=>{this.setAnswer(e.value)}),100),t}))}catch(e){if(e!==t)throw e}}}connectedCallback(){super.connectedCallback(),this.question&&"numberField"===this.question.type&&(this.question.type="textField",this.question.subType="number"),setTimeout((()=>{1!==this.question.questionIndex||this.dontFocusFirstQuestion||this.focus()}),500)}};OC([dt({type:Object})],RC.prototype,"question",void 0),OC([dt({type:Number})],RC.prototype,"index",void 0),OC([dt({type:Boolean})],RC.prototype,"hideQuestionIndex",void 0),OC([dt({type:String})],RC.prototype,"formName",void 0),OC([dt({type:Boolean})],RC.prototype,"dontFocusFirstQuestion",void 0),OC([dt({type:Boolean})],RC.prototype,"useSmallFont",void 0),OC([dt({type:Boolean})],RC.prototype,"longFocus",void 0),OC([dt({type:Boolean})],RC.prototype,"isLastRating",void 0),OC([dt({type:Boolean})],RC.prototype,"isFirstRating",void 0),OC([dt({type:Boolean})],RC.prototype,"isFromNewPost",void 0),OC([dt({type:Array})],RC.prototype,"structuredAnswers",void 0),OC([dt({type:Number})],RC.prototype,"debounceTimeMs",void 0),OC([dt({type:Boolean})],RC.prototype,"disabled",void 0),RC=OC([at("yp-structured-question-edit")],RC);var $C=function(t,e,i,r){var o,n=arguments.length,s=n<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(n<3?o(s):n>3?o(e,i,s):o(e,i))||s);return n>3&&s&&Object.defineProperty(e,i,s),s};let MC=class extends Cs{constructor(){super(...arguments),this.open=!1}render(){return U` <md-dialog ?open="${this.open}" @closed="${this._handleClose}"> <div slot="headline"> ${this.nodeToEditInfo?this._renderNodeEditHeadline():""} </div> <div slot="content"> ${this.nodeToEditInfo?this._renderEditForm():""} </div> <div slot="actions"> <md-text-button @click="${this._handleClose}">Cancel</md-text-button> <md-filled-button @click="${this._handleSave}">Save</md-filled-button> </div> </md-dialog> `}_renderNodeEditHeadline(){return U` <div class="layout horizontal"> <div> <img src="${this.nodeToEditInfo.Class.configuration.imageUrl}" class="nodeEditHeadlineImage"> </div> <div class="nodeEditHeadlineTitle"> ${this.nodeToEditInfo.Class.name} </div> </div> `}_renderEditForm(){return U` <div id="surveyContainer"> ${this.nodeToEditInfo.Class.configuration.questions.map(((t,e)=>U` <yp-structured-question-edit index="${e}" id="structuredQuestion_${t.uniqueId?e:`noId_${e}`}" .structuredAnswers="${this._getInitialAnswers()}" .question="${t}"> </yp-structured-question-edit> `))} </div> `}_getInitialAnswers(){return Object.entries(this.nodeToEditInfo.configuration).map((([t,e])=>({uniqueId:t,value:e})))}_handleClose(){this.dispatchEvent(new CustomEvent("close"))}_handleSave(){const t={};this.nodeToEditInfo.Class.configuration.questions.forEach(((e,i)=>{const r=this.shadowRoot?.querySelector(`#structuredQuestion_${e.uniqueId?i:`noId_${i}`}`);if(r&&e.uniqueId){const i=r.getAnswer();i&&(t[e.uniqueId]=i.value)}})),this.dispatchEvent(new CustomEvent("save",{detail:{updatedConfig:t}})),this._handleClose()}};MC.styles=n`.nodeEditHeadlineImage{max-width:100px;margin-right:16px}.nodeEditHeadlineTitle{display:flex;align-items:center;justify-content:center;height:55px}`,$C([dt({type:Boolean})],MC.prototype,"open",void 0),$C([dt({type:Object})],MC.prototype,"nodeToEditInfo",void 0),MC=$C([at("ps-edit-node-dialog")],MC);
/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
class NC extends nC{constructor(){super(...arguments),this.fieldTag=be`md-filled-field`}}
/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const DC=n`:host{--_text-field-active-indicator-color:var(--md-filled-select-text-field-active-indicator-color, var(--md-sys-color-on-surface-variant, #49454f));--_text-field-active-indicator-height:var(--md-filled-select-text-field-active-indicator-height, 1px);--_text-field-container-color:var(--md-filled-select-text-field-container-color, var(--md-sys-color-surface-container-highest, #e6e0e9));--_text-field-disabled-active-indicator-color:var(--md-filled-select-text-field-disabled-active-indicator-color, var(--md-sys-color-on-surface, #1d1b20));--_text-field-disabled-active-indicator-height:var(--md-filled-select-text-field-disabled-active-indicator-height, 1px);--_text-field-disabled-active-indicator-opacity:var(--md-filled-select-text-field-disabled-active-indicator-opacity, 0.38);--_text-field-disabled-container-color:var(--md-filled-select-text-field-disabled-container-color, var(--md-sys-color-on-surface, #1d1b20));--_text-field-disabled-container-opacity:var(--md-filled-select-text-field-disabled-container-opacity, 0.04);--_text-field-disabled-input-text-color:var(--md-filled-select-text-field-disabled-input-text-color, var(--md-sys-color-on-surface, #1d1b20));--_text-field-disabled-input-text-opacity:var(--md-filled-select-text-field-disabled-input-text-opacity, 0.38);--_text-field-disabled-label-text-color:var(--md-filled-select-text-field-disabled-label-text-color, var(--md-sys-color-on-surface, #1d1b20));--_text-field-disabled-label-text-opacity:var(--md-filled-select-text-field-disabled-label-text-opacity, 0.38);--_text-field-disabled-leading-icon-color:var(--md-filled-select-text-field-disabled-leading-icon-color, var(--md-sys-color-on-surface, #1d1b20));--_text-field-disabled-leading-icon-opacity:var(--md-filled-select-text-field-disabled-leading-icon-opacity, 0.38);--_text-field-disabled-supporting-text-color:var(--md-filled-select-text-field-disabled-supporting-text-color, var(--md-sys-color-on-surface, #1d1b20));--_text-field-disabled-supporting-text-opacity:var(--md-filled-select-text-field-disabled-supporting-text-opacity, 0.38);--_text-field-disabled-trailing-icon-color:var(--md-filled-select-text-field-disabled-trailing-icon-color, var(--md-sys-color-on-surface, #1d1b20));--_text-field-disabled-trailing-icon-opacity:var(--md-filled-select-text-field-disabled-trailing-icon-opacity, 0.38);--_text-field-error-active-indicator-color:var(--md-filled-select-text-field-error-active-indicator-color, var(--md-sys-color-error, #b3261e));--_text-field-error-focus-active-indicator-color:var(--md-filled-select-text-field-error-focus-active-indicator-color, var(--md-sys-color-error, #b3261e));--_text-field-error-focus-input-text-color:var(--md-filled-select-text-field-error-focus-input-text-color, var(--md-sys-color-on-surface, #1d1b20));--_text-field-error-focus-label-text-color:var(--md-filled-select-text-field-error-focus-label-text-color, var(--md-sys-color-error, #b3261e));--_text-field-error-focus-leading-icon-color:var(--md-filled-select-text-field-error-focus-leading-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_text-field-error-focus-supporting-text-color:var(--md-filled-select-text-field-error-focus-supporting-text-color, var(--md-sys-color-error, #b3261e));--_text-field-error-focus-trailing-icon-color:var(--md-filled-select-text-field-error-focus-trailing-icon-color, var(--md-sys-color-error, #b3261e));--_text-field-error-hover-active-indicator-color:var(--md-filled-select-text-field-error-hover-active-indicator-color, var(--md-sys-color-on-error-container, #410e0b));--_text-field-error-hover-input-text-color:var(--md-filled-select-text-field-error-hover-input-text-color, var(--md-sys-color-on-surface, #1d1b20));--_text-field-error-hover-label-text-color:var(--md-filled-select-text-field-error-hover-label-text-color, var(--md-sys-color-on-error-container, #410e0b));--_text-field-error-hover-leading-icon-color:var(--md-filled-select-text-field-error-hover-leading-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_text-field-error-hover-state-layer-color:var(--md-filled-select-text-field-error-hover-state-layer-color, var(--md-sys-color-on-surface, #1d1b20));--_text-field-error-hover-state-layer-opacity:var(--md-filled-select-text-field-error-hover-state-layer-opacity, 0.08);--_text-field-error-hover-supporting-text-color:var(--md-filled-select-text-field-error-hover-supporting-text-color, var(--md-sys-color-error, #b3261e));--_text-field-error-hover-trailing-icon-color:var(--md-filled-select-text-field-error-hover-trailing-icon-color, var(--md-sys-color-on-error-container, #410e0b));--_text-field-error-input-text-color:var(--md-filled-select-text-field-error-input-text-color, var(--md-sys-color-on-surface, #1d1b20));--_text-field-error-label-text-color:var(--md-filled-select-text-field-error-label-text-color, var(--md-sys-color-error, #b3261e));--_text-field-error-leading-icon-color:var(--md-filled-select-text-field-error-leading-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_text-field-error-supporting-text-color:var(--md-filled-select-text-field-error-supporting-text-color, var(--md-sys-color-error, #b3261e));--_text-field-error-trailing-icon-color:var(--md-filled-select-text-field-error-trailing-icon-color, var(--md-sys-color-error, #b3261e));--_text-field-focus-active-indicator-color:var(--md-filled-select-text-field-focus-active-indicator-color, var(--md-sys-color-primary, #6750a4));--_text-field-focus-active-indicator-height:var(--md-filled-select-text-field-focus-active-indicator-height, 3px);--_text-field-focus-input-text-color:var(--md-filled-select-text-field-focus-input-text-color, var(--md-sys-color-on-surface, #1d1b20));--_text-field-focus-label-text-color:var(--md-filled-select-text-field-focus-label-text-color, var(--md-sys-color-primary, #6750a4));--_text-field-focus-leading-icon-color:var(--md-filled-select-text-field-focus-leading-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_text-field-focus-supporting-text-color:var(--md-filled-select-text-field-focus-supporting-text-color, var(--md-sys-color-on-surface-variant, #49454f));--_text-field-focus-trailing-icon-color:var(--md-filled-select-text-field-focus-trailing-icon-color, var(--md-sys-color-primary, #6750a4));--_text-field-hover-active-indicator-color:var(--md-filled-select-text-field-hover-active-indicator-color, var(--md-sys-color-on-surface, #1d1b20));--_text-field-hover-active-indicator-height:var(--md-filled-select-text-field-hover-active-indicator-height, 1px);--_text-field-hover-input-text-color:var(--md-filled-select-text-field-hover-input-text-color, var(--md-sys-color-on-surface, #1d1b20));--_text-field-hover-label-text-color:var(--md-filled-select-text-field-hover-label-text-color, var(--md-sys-color-on-surface, #1d1b20));--_text-field-hover-leading-icon-color:var(--md-filled-select-text-field-hover-leading-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_text-field-hover-state-layer-color:var(--md-filled-select-text-field-hover-state-layer-color, var(--md-sys-color-on-surface, #1d1b20));--_text-field-hover-state-layer-opacity:var(--md-filled-select-text-field-hover-state-layer-opacity, 0.08);--_text-field-hover-supporting-text-color:var(--md-filled-select-text-field-hover-supporting-text-color, var(--md-sys-color-on-surface-variant, #49454f));--_text-field-hover-trailing-icon-color:var(--md-filled-select-text-field-hover-trailing-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_text-field-input-text-color:var(--md-filled-select-text-field-input-text-color, var(--md-sys-color-on-surface, #1d1b20));--_text-field-input-text-font:var(--md-filled-select-text-field-input-text-font, var(--md-sys-typescale-body-large-font, var(--md-ref-typeface-plain, Roboto)));--_text-field-input-text-line-height:var(--md-filled-select-text-field-input-text-line-height, var(--md-sys-typescale-body-large-line-height, 1.5rem));--_text-field-input-text-size:var(--md-filled-select-text-field-input-text-size, var(--md-sys-typescale-body-large-size, 1rem));--_text-field-input-text-weight:var(--md-filled-select-text-field-input-text-weight, var(--md-sys-typescale-body-large-weight, var(--md-ref-typeface-weight-regular, 400)));--_text-field-label-text-color:var(--md-filled-select-text-field-label-text-color, var(--md-sys-color-on-surface-variant, #49454f));--_text-field-label-text-font:var(--md-filled-select-text-field-label-text-font, var(--md-sys-typescale-body-large-font, var(--md-ref-typeface-plain, Roboto)));--_text-field-label-text-line-height:var(--md-filled-select-text-field-label-text-line-height, var(--md-sys-typescale-body-large-line-height, 1.5rem));--_text-field-label-text-populated-line-height:var(--md-filled-select-text-field-label-text-populated-line-height, var(--md-sys-typescale-body-small-line-height, 1rem));--_text-field-label-text-populated-size:var(--md-filled-select-text-field-label-text-populated-size, var(--md-sys-typescale-body-small-size, 0.75rem));--_text-field-label-text-size:var(--md-filled-select-text-field-label-text-size, var(--md-sys-typescale-body-large-size, 1rem));--_text-field-label-text-weight:var(--md-filled-select-text-field-label-text-weight, var(--md-sys-typescale-body-large-weight, var(--md-ref-typeface-weight-regular, 400)));--_text-field-leading-icon-color:var(--md-filled-select-text-field-leading-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_text-field-leading-icon-size:var(--md-filled-select-text-field-leading-icon-size, 24px);--_text-field-supporting-text-color:var(--md-filled-select-text-field-supporting-text-color, var(--md-sys-color-on-surface-variant, #49454f));--_text-field-supporting-text-font:var(--md-filled-select-text-field-supporting-text-font, var(--md-sys-typescale-body-small-font, var(--md-ref-typeface-plain, Roboto)));--_text-field-supporting-text-line-height:var(--md-filled-select-text-field-supporting-text-line-height, var(--md-sys-typescale-body-small-line-height, 1rem));--_text-field-supporting-text-size:var(--md-filled-select-text-field-supporting-text-size, var(--md-sys-typescale-body-small-size, 0.75rem));--_text-field-supporting-text-weight:var(--md-filled-select-text-field-supporting-text-weight, var(--md-sys-typescale-body-small-weight, var(--md-ref-typeface-weight-regular, 400)));--_text-field-trailing-icon-color:var(--md-filled-select-text-field-trailing-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_text-field-trailing-icon-size:var(--md-filled-select-text-field-trailing-icon-size, 24px);--_text-field-container-shape-start-start:var(--md-filled-select-text-field-container-shape-start-start, var(--md-filled-select-text-field-container-shape, var(--md-sys-shape-corner-extra-small, 4px)));--_text-field-container-shape-start-end:var(--md-filled-select-text-field-container-shape-start-end, var(--md-filled-select-text-field-container-shape, var(--md-sys-shape-corner-extra-small, 4px)));--_text-field-container-shape-end-end:var(--md-filled-select-text-field-container-shape-end-end, var(--md-filled-select-text-field-container-shape, var(--md-sys-shape-corner-none, 0px)));--_text-field-container-shape-end-start:var(--md-filled-select-text-field-container-shape-end-start, var(--md-filled-select-text-field-container-shape, var(--md-sys-shape-corner-none, 0px)));--md-filled-field-active-indicator-color:var(--_text-field-active-indicator-color);--md-filled-field-active-indicator-height:var(--_text-field-active-indicator-height);--md-filled-field-container-color:var(--_text-field-container-color);--md-filled-field-container-shape-end-end:var(--_text-field-container-shape-end-end);--md-filled-field-container-shape-end-start:var(--_text-field-container-shape-end-start);--md-filled-field-container-shape-start-end:var(--_text-field-container-shape-start-end);--md-filled-field-container-shape-start-start:var(--_text-field-container-shape-start-start);--md-filled-field-content-color:var(--_text-field-input-text-color);--md-filled-field-content-font:var(--_text-field-input-text-font);--md-filled-field-content-line-height:var(--_text-field-input-text-line-height);--md-filled-field-content-size:var(--_text-field-input-text-size);--md-filled-field-content-weight:var(--_text-field-input-text-weight);--md-filled-field-disabled-active-indicator-color:var(--_text-field-disabled-active-indicator-color);--md-filled-field-disabled-active-indicator-height:var(--_text-field-disabled-active-indicator-height);--md-filled-field-disabled-active-indicator-opacity:var(--_text-field-disabled-active-indicator-opacity);--md-filled-field-disabled-container-color:var(--_text-field-disabled-container-color);--md-filled-field-disabled-container-opacity:var(--_text-field-disabled-container-opacity);--md-filled-field-disabled-content-color:var(--_text-field-disabled-input-text-color);--md-filled-field-disabled-content-opacity:var(--_text-field-disabled-input-text-opacity);--md-filled-field-disabled-label-text-color:var(--_text-field-disabled-label-text-color);--md-filled-field-disabled-label-text-opacity:var(--_text-field-disabled-label-text-opacity);--md-filled-field-disabled-leading-content-color:var(--_text-field-disabled-leading-icon-color);--md-filled-field-disabled-leading-content-opacity:var(--_text-field-disabled-leading-icon-opacity);--md-filled-field-disabled-supporting-text-color:var(--_text-field-disabled-supporting-text-color);--md-filled-field-disabled-supporting-text-opacity:var(--_text-field-disabled-supporting-text-opacity);--md-filled-field-disabled-trailing-content-color:var(--_text-field-disabled-trailing-icon-color);--md-filled-field-disabled-trailing-content-opacity:var(--_text-field-disabled-trailing-icon-opacity);--md-filled-field-error-active-indicator-color:var(--_text-field-error-active-indicator-color);--md-filled-field-error-content-color:var(--_text-field-error-input-text-color);--md-filled-field-error-focus-active-indicator-color:var(--_text-field-error-focus-active-indicator-color);--md-filled-field-error-focus-content-color:var(--_text-field-error-focus-input-text-color);--md-filled-field-error-focus-label-text-color:var(--_text-field-error-focus-label-text-color);--md-filled-field-error-focus-leading-content-color:var(--_text-field-error-focus-leading-icon-color);--md-filled-field-error-focus-supporting-text-color:var(--_text-field-error-focus-supporting-text-color);--md-filled-field-error-focus-trailing-content-color:var(--_text-field-error-focus-trailing-icon-color);--md-filled-field-error-hover-active-indicator-color:var(--_text-field-error-hover-active-indicator-color);--md-filled-field-error-hover-content-color:var(--_text-field-error-hover-input-text-color);--md-filled-field-error-hover-label-text-color:var(--_text-field-error-hover-label-text-color);--md-filled-field-error-hover-leading-content-color:var(--_text-field-error-hover-leading-icon-color);--md-filled-field-error-hover-state-layer-color:var(--_text-field-error-hover-state-layer-color);--md-filled-field-error-hover-state-layer-opacity:var(--_text-field-error-hover-state-layer-opacity);--md-filled-field-error-hover-supporting-text-color:var(--_text-field-error-hover-supporting-text-color);--md-filled-field-error-hover-trailing-content-color:var(--_text-field-error-hover-trailing-icon-color);--md-filled-field-error-label-text-color:var(--_text-field-error-label-text-color);--md-filled-field-error-leading-content-color:var(--_text-field-error-leading-icon-color);--md-filled-field-error-supporting-text-color:var(--_text-field-error-supporting-text-color);--md-filled-field-error-trailing-content-color:var(--_text-field-error-trailing-icon-color);--md-filled-field-focus-active-indicator-color:var(--_text-field-focus-active-indicator-color);--md-filled-field-focus-active-indicator-height:var(--_text-field-focus-active-indicator-height);--md-filled-field-focus-content-color:var(--_text-field-focus-input-text-color);--md-filled-field-focus-label-text-color:var(--_text-field-focus-label-text-color);--md-filled-field-focus-leading-content-color:var(--_text-field-focus-leading-icon-color);--md-filled-field-focus-supporting-text-color:var(--_text-field-focus-supporting-text-color);--md-filled-field-focus-trailing-content-color:var(--_text-field-focus-trailing-icon-color);--md-filled-field-hover-active-indicator-color:var(--_text-field-hover-active-indicator-color);--md-filled-field-hover-active-indicator-height:var(--_text-field-hover-active-indicator-height);--md-filled-field-hover-content-color:var(--_text-field-hover-input-text-color);--md-filled-field-hover-label-text-color:var(--_text-field-hover-label-text-color);--md-filled-field-hover-leading-content-color:var(--_text-field-hover-leading-icon-color);--md-filled-field-hover-state-layer-color:var(--_text-field-hover-state-layer-color);--md-filled-field-hover-state-layer-opacity:var(--_text-field-hover-state-layer-opacity);--md-filled-field-hover-supporting-text-color:var(--_text-field-hover-supporting-text-color);--md-filled-field-hover-trailing-content-color:var(--_text-field-hover-trailing-icon-color);--md-filled-field-label-text-color:var(--_text-field-label-text-color);--md-filled-field-label-text-font:var(--_text-field-label-text-font);--md-filled-field-label-text-line-height:var(--_text-field-label-text-line-height);--md-filled-field-label-text-populated-line-height:var(--_text-field-label-text-populated-line-height);--md-filled-field-label-text-populated-size:var(--_text-field-label-text-populated-size);--md-filled-field-label-text-size:var(--_text-field-label-text-size);--md-filled-field-label-text-weight:var(--_text-field-label-text-weight);--md-filled-field-leading-content-color:var(--_text-field-leading-icon-color);--md-filled-field-supporting-text-color:var(--_text-field-supporting-text-color);--md-filled-field-supporting-text-font:var(--_text-field-supporting-text-font);--md-filled-field-supporting-text-line-height:var(--_text-field-supporting-text-line-height);--md-filled-field-supporting-text-size:var(--_text-field-supporting-text-size);--md-filled-field-supporting-text-weight:var(--_text-field-supporting-text-weight);--md-filled-field-trailing-content-color:var(--_text-field-trailing-icon-color)}[has-start] .icon.leading{font-size:var(--_text-field-leading-icon-size);height:var(--_text-field-leading-icon-size);width:var(--_text-field-leading-icon-size)}.icon.trailing{font-size:var(--_text-field-trailing-icon-size);height:var(--_text-field-trailing-icon-size);width:var(--_text-field-trailing-icon-size)}`
/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */;let zC=class extends NC{};zC.styles=[lC,DC],zC=bt([at("md-filled-select")],zC);var FC=function(t,e,i,r){var o,n=arguments.length,s=n<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(n<3?o(s):n>3?o(e,i,s):o(e,i))||s);return n>3&&s&&Object.defineProperty(e,i,s),s};let BC=class extends Cs{constructor(){super(...arguments),this.open=!1,this.activeAgentClasses=[],this.activeAiModels=[],this.selectedAgentClassId=null,this.selectedAiModelId=null,this.agentName="",this.api=new mw}async connectedCallback(){super.connectedCallback(),await this.fetchActiveAgentClasses(),await this.fetchActiveAiModels()}async fetchActiveAgentClasses(){try{this.activeAgentClasses=await this.api.getActiveAgentClasses()}catch(t){console.error("Error fetching active agent classes:",t)}}async fetchActiveAiModels(){try{this.activeAiModels=await this.api.getActiveAiModels()}catch(t){console.error("Error fetching active AI models:",t)}}render(){return U` <md-dialog ?open="${this.open}" @closed="${this._handleClose}"> <div slot="headline">Add New Agent</div> <div slot="content"> <md-filled-text-field label="Agent Name" @input="${this._handleNameInput}" value="${this.agentName}"></md-filled-text-field> <md-filled-select label="Select Agent Class" @change="${this._handleAgentClassSelection}"> ${this.activeAgentClasses.map((t=>U` <md-select-option value="${t.id}"> <div slot="headline">${t.name}</div> </md-select-option> `))} </md-filled-select> <md-filled-select label="Select AI Model" @change="${this._handleAiModelSelection}"> ${this.activeAiModels.map((t=>U` <md-select-option value="${t.id}"> <div slot="headline">${t.name}</div> </md-select-option> `))} </md-filled-select> </div> <div slot="actions"> <md-text-button @click="${this._handleClose}">Cancel</md-text-button> <md-filled-button @click="${this._handleAddAgent}">Add Agent</md-filled-button> </div> </md-dialog> `}_handleNameInput(t){const e=t.target;this.agentName=e.value}_handleAgentClassSelection(t){const e=t.target;this.selectedAgentClassId=Number(e.value)}_handleAiModelSelection(t){const e=t.target;this.selectedAiModelId=Number(e.value)}_handleClose(){this.dispatchEvent(new CustomEvent("close"))}async _handleAddAgent(){if(this.agentName&&this.selectedAgentClassId&&this.selectedAiModelId)try{const t=await this.api.createAgent(this.agentName,this.selectedAgentClassId,this.selectedAiModelId);this.dispatchEvent(new CustomEvent("agent-added",{detail:{agent:t}})),this._handleClose()}catch(t){console.error("Error creating new agent:",t)}else console.error("Agent name, class, or AI model not selected")}};BC.styles=n`md-filled-select,md-filled-text-field{width:100%;margin-bottom:16px}`,FC([dt({type:Boolean})],BC.prototype,"open",void 0),FC([ht()],BC.prototype,"activeAgentClasses",void 0),FC([ht()],BC.prototype,"activeAiModels",void 0),FC([ht()],BC.prototype,"selectedAgentClassId",void 0),FC([ht()],BC.prototype,"selectedAiModelId",void 0),FC([ht()],BC.prototype,"agentName",void 0),BC=FC([at("ps-add-agent-dialog")],BC);var UC=function(t,e,i,r){var o,n=arguments.length,s=n<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(n<3?o(s):n>3?o(e,i,s):o(e,i))||s);return n>3&&s&&Object.defineProperty(e,i,s),s};let VC=class extends nt{constructor(){super(...arguments),this.open=!1,this.selectedAgentId=null,this.activeConnectorClasses=[],this.selectedConnectorClassId=null,this.connectorName="",this.api=new mw}async connectedCallback(){super.connectedCallback(),await this.fetchActiveConnectorClasses()}async fetchActiveConnectorClasses(){try{this.activeConnectorClasses=await this.api.getActiveConnectorClasses()}catch(t){console.error("Error fetching active connector classes:",t)}}render(){return U` <md-dialog ?open="${this.open}" @closed="${this._handleClose}"> <div slot="headline">Add New Connector</div> <div slot="content"> <md-filled-text-field label="Connector Name" @input="${this._handleNameInput}" value="${this.connectorName}"></md-filled-text-field> <md-filled-select label="Select Connector Class" @change="${this._handleConnectorClassSelection}"> ${this.activeConnectorClasses.map((t=>U` <md-select-option value="${t.id}"> <div slot="headline">${t.name}</div> </md-select-option> `))} </md-filled-select> </div> <div slot="actions"> <md-text-button @click="${this._handleClose}">Cancel</md-text-button> <md-filled-button @click="${this._handleAddConnector}">Add Connector</md-filled-button> </div> </md-dialog> `}_handleNameInput(t){const e=t.target;this.connectorName=e.value}_handleConnectorClassSelection(t){const e=t.target;this.selectedConnectorClassId=Number(e.value)}_handleClose(){this.dispatchEvent(new CustomEvent("close"))}async _handleAddConnector(){if(this.connectorName&&this.selectedAgentId&&this.selectedConnectorClassId)try{const t=await this.api.createConnector(this.selectedAgentId,this.selectedConnectorClassId,this.connectorName);this.dispatchEvent(new CustomEvent("connector-added",{detail:{connector:t}})),this._handleClose()}catch(t){console.error("Error creating new connector:",t)}else console.error("Connector name, agent, or connector class not selected")}};VC.styles=n`md-filled-select,md-filled-text-field{width:100%;margin-bottom:16px}`,UC([dt({type:Boolean})],VC.prototype,"open",void 0),UC([dt({type:Number})],VC.prototype,"selectedAgentId",void 0),UC([ht()],VC.prototype,"activeConnectorClasses",void 0),UC([ht()],VC.prototype,"selectedConnectorClassId",void 0),UC([ht()],VC.prototype,"connectorName",void 0),VC=UC([at("ps-add-connector-dialog")],VC);var jC=function(t,e,i,r){var o,n=arguments.length,s=n<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(n<3?o(s):n>3?o(e,i,s):o(e,i))||s);return n>3&&s&&Object.defineProperty(e,i,s),s};let GC=class extends vw{constructor(){super(),this.currentAgentId=1,this.isFetchingAgent=!1,this.activeTabIndex=0,this.showEditNodeDialog=!1,this.showAddAgentDialog=!1,this.showAddConnectorDialog=!1,this.selectedAgentIdForConnector=null,this.groupId=1,this.api=new mw,this.getAgent()}async getAgent(){this.isFetchingAgent=!0;try{if(!this.groupId)throw new Error("Current group ID is not set");const t=await this.api.getAgent(this.groupId);this.currentAgent=t}catch(t){console.error("Error fetching agent:",t)}finally{this.isFetchingAgent=!1}}async connectedCallback(){super.connectedCallback(),this.addEventListener("edit-node",this.openEditNodeDialog),this.addEventListener("add-connector",this.openAddConnectorDialog),this.addEventListener("get-costs",this.fetchAgentCosts),this.addEventListener("add-agent",this.openAddAgentDialog)}async fetchAgentCosts(){if(this.currentAgentId)try{this.totalCosts=await this.api.getAgentCosts(this.currentAgentId)}catch(t){console.error("Error fetching agent costs:",t)}}openEditNodeDialog(t){this.nodeToEditInfo=t.detail.element,this.showEditNodeDialog=!0}openAddConnectorDialog(t){this.selectedAgentIdForConnector=t.detail.agentId,this.showAddConnectorDialog=!0}openAddAgentDialog(t){this.showAddAgentDialog=!0}tabChanged(){this.activeTabIndex=this.$$("#tabBar").activeTabIndex}toggleDarkMode(){this.fire("yp-theme-dark-mode",!this.themeDarkMode),window.psAppGlobals.activity("Agent - toggle darkmode"),this.themeDarkMode?(window.psAppGlobals.activity("Settings - dark mode"),localStorage.setItem("md3-ps-dark-mode","true")):(window.psAppGlobals.activity("Settings - light mode"),localStorage.removeItem("md3-ps-dark-mode"))}randomizeTheme(){const t=Math.floor(16777215*Math.random()).toString(16);this.fire("yp-theme-color",`#${t}`)}renderThemeToggle(){return U` <div class="layout horizontal center-center themeToggle"> ${this.themeDarkMode?U` <md-outlined-icon-button class="darkModeButton" @click="${this.toggleDarkMode}"><md-icon>light_mode</md-icon></md-outlined-icon-button> `:U` <md-outlined-icon-button class="darkModeButton" @click="${this.toggleDarkMode}"><md-icon>dark_mode</md-icon></md-outlined-icon-button> `} <md-outlined-icon-button class="darkModeButton" @click="${this.randomizeTheme}"><md-icon>shuffle</md-icon></md-outlined-icon-button> </div> `}renderTotalCosts(){return U`${this.t("Costs")} ${void 0!==this.totalCosts?`($${this.totalCosts.toFixed(2)})`:""}`}render(){return this.isFetchingAgent?U`<md-linear-progress indeterminate></md-linear-progress>`:U` <ps-edit-node-dialog ?open="${this.showEditNodeDialog}" .nodeToEditInfo="${this.nodeToEditInfo}" @close="${()=>this.showEditNodeDialog=!1}"></ps-edit-node-dialog> <ps-add-agent-dialog ?open="${this.showAddAgentDialog}" @close="${()=>this.showAddAgentDialog=!1}"></ps-add-agent-dialog> <ps-add-connector-dialog ?open="${this.showAddConnectorDialog}" .selectedAgentId="${this.selectedAgentIdForConnector}" @close="${()=>this.showAddConnectorDialog=!1}"></ps-add-connector-dialog> ${this.renderThemeToggle()} <md-tabs id="tabBar" @change="${this.tabChanged}"> <md-primary-tab id="configure-tab" aria-controls="configure-panel"> <md-icon slot="icon">support_agent</md-icon> ${this.t("Agents Operations")} </md-primary-tab> <md-primary-tab id="crt-tab" aria-controls="crt-panel"> <md-icon slot="icon">checklist</md-icon> ${this.t("Audit Log")} </md-primary-tab> <md-primary-tab id="crt-tab" aria-controls="crt-panel"> <md-icon slot="icon">account_balance</md-icon> ${this.renderTotalCosts()} </md-primary-tab> </md-tabs> <ps-operations-view .currentAgent="${this.currentAgent}"></ps-operations-view> <md-filled-tonal-button @click="${()=>this.showAddAgentDialog=!0}"> <md-icon slot="icon">add</md-icon> ${this.t("Add Agent")} </md-filled-tonal-button> `}static get styles(){return[super.styles,n`md-tabs{margin-bottom:64px}md-filled-select{width:100%;margin-bottom:16px}.nodeEditHeadlineImage{max-width:100px;margin-right:16px}.nodeEditHeadlineTitle{display:flex;align-items:center;justify-content:center;height:55px}.childEditing{color:var(--md-sys-color-on-surface-variant);background-color:var(--md-sys-color-surface-variant);padding:16px;border-radius:8px}.childrenList{height:100px;overflow-y:auto}md-icon-button{margin-top:32px}.createOptionsButtons{display:flex;justify-content:center;position:absolute;bottom:0;left:0;right:0;padding-left:8px;padding-right:8px}.deleteButton{--md-sys-color-primary:var(--md-sys-color-error)}md-circular-progress{margin-bottom:6px}md-filled-text-field,md-outlined-text-field{width:600px;margin-bottom:16px}[type=textarea]{min-height:150px}[type=textarea][supporting-text]{min-height:76px}.formContainer{margin-top:32px}md-filled-button,md-outlined-button{margin-top:8px;margin-left:8px;margin-right:8px;margin-bottom:8px}.aiConfigReview{margin-left:8px;margin-right:8px;padding:16px;margin-top:8px;margin-bottom:8px;border-radius:12px;max-width:560px;font-size:14px;background-color:var(--md-sys-color-primary-container);color:var(--md-sys-color-on-primary-container)}.agentUDEDescription{font-size:18px;margin:32px;margin-bottom:0;padding:24px;border-radius:12px;background-color:var(--md-sys-color-primary);color:var(--md-sys-color-on-primary)}agent-tab,configure-tab,md-tabs{width:100%}.themeToggle{margin-top:32px}ltp-chat-assistant{height:100%;max-height:100%;width:100%;height:100%}md-linear-progress{width:600px}.darkModeButton{margin-right:8px;margin-left:8px}.topDiv{margin-bottom:256px}md-outlined-select{z-index:1500px;margin:16px;margin-left:0;max-width:250px}.automaticCreateButton{max-width:300px}[hidden]{display:none!important}`]}};jC([dt({type:Number})],GC.prototype,"currentAgentId",void 0),jC([dt({type:Number})],GC.prototype,"totalCosts",void 0),jC([dt({type:Object})],GC.prototype,"currentAgent",void 0),jC([dt({type:Boolean})],GC.prototype,"isFetchingAgent",void 0),jC([dt({type:Object})],GC.prototype,"nodeToEditInfo",void 0),jC([dt({type:Number})],GC.prototype,"activeTabIndex",void 0),jC([dt({type:Boolean})],GC.prototype,"showEditNodeDialog",void 0),jC([dt({type:Boolean})],GC.prototype,"showAddAgentDialog",void 0),jC([dt({type:Boolean})],GC.prototype,"showAddConnectorDialog",void 0),jC([dt({type:Number})],GC.prototype,"selectedAgentIdForConnector",void 0),jC([pt("ps-operations-view")],GC.prototype,"agentElement",void 0),jC([dt({type:Number})],GC.prototype,"groupId",void 0),GC=jC([at("ps-operations-manager")],GC);
/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
class HC extends fn{renderElevationOrOutline(){return U`<md-elevation part="elevation"></md-elevation>`}}
/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const qC=n`:host{--_container-color:var(--md-elevated-button-container-color, var(--md-sys-color-surface-container-low, #f7f2fa));--_container-elevation:var(--md-elevated-button-container-elevation, 1);--_container-height:var(--md-elevated-button-container-height, 40px);--_container-shadow-color:var(--md-elevated-button-container-shadow-color, var(--md-sys-color-shadow, #000));--_disabled-container-color:var(--md-elevated-button-disabled-container-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-container-elevation:var(--md-elevated-button-disabled-container-elevation, 0);--_disabled-container-opacity:var(--md-elevated-button-disabled-container-opacity, 0.12);--_disabled-label-text-color:var(--md-elevated-button-disabled-label-text-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-label-text-opacity:var(--md-elevated-button-disabled-label-text-opacity, 0.38);--_focus-container-elevation:var(--md-elevated-button-focus-container-elevation, 1);--_focus-label-text-color:var(--md-elevated-button-focus-label-text-color, var(--md-sys-color-primary, #6750a4));--_hover-container-elevation:var(--md-elevated-button-hover-container-elevation, 2);--_hover-label-text-color:var(--md-elevated-button-hover-label-text-color, var(--md-sys-color-primary, #6750a4));--_hover-state-layer-color:var(--md-elevated-button-hover-state-layer-color, var(--md-sys-color-primary, #6750a4));--_hover-state-layer-opacity:var(--md-elevated-button-hover-state-layer-opacity, 0.08);--_label-text-color:var(--md-elevated-button-label-text-color, var(--md-sys-color-primary, #6750a4));--_label-text-font:var(--md-elevated-button-label-text-font, var(--md-sys-typescale-label-large-font, var(--md-ref-typeface-plain, Roboto)));--_label-text-line-height:var(--md-elevated-button-label-text-line-height, var(--md-sys-typescale-label-large-line-height, 1.25rem));--_label-text-size:var(--md-elevated-button-label-text-size, var(--md-sys-typescale-label-large-size, 0.875rem));--_label-text-weight:var(--md-elevated-button-label-text-weight, var(--md-sys-typescale-label-large-weight, var(--md-ref-typeface-weight-medium, 500)));--_pressed-container-elevation:var(--md-elevated-button-pressed-container-elevation, 1);--_pressed-label-text-color:var(--md-elevated-button-pressed-label-text-color, var(--md-sys-color-primary, #6750a4));--_pressed-state-layer-color:var(--md-elevated-button-pressed-state-layer-color, var(--md-sys-color-primary, #6750a4));--_pressed-state-layer-opacity:var(--md-elevated-button-pressed-state-layer-opacity, 0.12);--_disabled-icon-color:var(--md-elevated-button-disabled-icon-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-icon-opacity:var(--md-elevated-button-disabled-icon-opacity, 0.38);--_focus-icon-color:var(--md-elevated-button-focus-icon-color, var(--md-sys-color-primary, #6750a4));--_hover-icon-color:var(--md-elevated-button-hover-icon-color, var(--md-sys-color-primary, #6750a4));--_icon-color:var(--md-elevated-button-icon-color, var(--md-sys-color-primary, #6750a4));--_icon-size:var(--md-elevated-button-icon-size, 18px);--_pressed-icon-color:var(--md-elevated-button-pressed-icon-color, var(--md-sys-color-primary, #6750a4));--_container-shape-start-start:var(--md-elevated-button-container-shape-start-start, var(--md-elevated-button-container-shape, var(--md-sys-shape-corner-full, 9999px)));--_container-shape-start-end:var(--md-elevated-button-container-shape-start-end, var(--md-elevated-button-container-shape, var(--md-sys-shape-corner-full, 9999px)));--_container-shape-end-end:var(--md-elevated-button-container-shape-end-end, var(--md-elevated-button-container-shape, var(--md-sys-shape-corner-full, 9999px)));--_container-shape-end-start:var(--md-elevated-button-container-shape-end-start, var(--md-elevated-button-container-shape, var(--md-sys-shape-corner-full, 9999px)));--_leading-space:var(--md-elevated-button-leading-space, 24px);--_trailing-space:var(--md-elevated-button-trailing-space, 24px);--_with-leading-icon-leading-space:var(--md-elevated-button-with-leading-icon-leading-space, 16px);--_with-leading-icon-trailing-space:var(--md-elevated-button-with-leading-icon-trailing-space, 24px);--_with-trailing-icon-leading-space:var(--md-elevated-button-with-trailing-icon-leading-space, 24px);--_with-trailing-icon-trailing-space:var(--md-elevated-button-with-trailing-icon-trailing-space, 16px)}`
/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */;let WC=class extends HC{};WC.styles=[vn,hd,qC],WC=bt([at("md-elevated-button")],WC);
/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const YC=new WeakMap,XC=t=>{if((t=>void 0!==t.pattern)(t))return t.pattern;let e=YC.get(t);return void 0===e&&YC.set(t,e=new URLPattern({pathname:t.path})),e};class JC{constructor(t,e,i){this.routes=[],this._childRoutes=[],this._currentParams={},this._onRoutesConnected=t=>{if(t.routes===this)return;const e=t.routes;this._childRoutes.push(e),e._parentRoutes=this,t.stopImmediatePropagation(),t.onDisconnect=()=>{this._childRoutes?.splice(this._childRoutes.indexOf(e)>>>0,1)};const i=QC(this._currentParams);void 0!==i&&e.goto(i)},(this._host=t).addController(this),this.routes=[...e],this.fallback=i?.fallback}link(t){if(t?.startsWith("/"))return t;if(t?.startsWith("."))throw new Error("Not implemented");return t??=this._currentPathname,(this._parentRoutes?.link()??"")+t}async goto(t){let e;if(0===this.routes.length&&void 0===this.fallback)e=t,this._currentPathname="",this._currentParams={0:e};else{const i=this._getRoute(t);if(void 0===i)throw new Error(`No route found for ${t}`);const r=XC(i).exec({pathname:t}),o=r?.pathname.groups??{};if(e=QC(o),"function"==typeof i.enter){if(!1===await i.enter(o))return}this._currentRoute=i,this._currentParams=o,this._currentPathname=void 0===e?t:t.substring(0,t.length-e.length)}if(void 0!==e)for(const t of this._childRoutes)t.goto(e);this._host.requestUpdate()}outlet(){return this._currentRoute?.render?.(this._currentParams)}get params(){return this._currentParams}_getRoute(t){const e=this.routes.find((e=>XC(e).test({pathname:t})));return e||void 0===this.fallback?e:this.fallback?{...this.fallback,path:"/*"}:void 0}hostConnected(){this._host.addEventListener(KC.eventName,this._onRoutesConnected);const t=new KC(this);this._host.dispatchEvent(t),this._onDisconnect=t.onDisconnect}hostDisconnected(){this._onDisconnect?.(),this._parentRoutes=void 0}}const QC=t=>{let e;for(const i of Object.keys(t))/\d+/.test(i)&&(void 0===e||i>e)&&(e=i);return e&&t[e]};class KC extends Event{constructor(t){super(KC.eventName,{bubbles:!0,composed:!0,cancelable:!1}),this.routes=t}}KC.eventName="lit-routes-connected";
/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const ZC=location.origin||location.protocol+"//"+location.host;class tA extends JC{constructor(){super(...arguments),this._onClick=t=>{const e=0!==t.button||t.metaKey||t.ctrlKey||t.shiftKey;if(t.defaultPrevented||e)return;const i=t.composedPath().find((t=>"A"===t.tagName));if(void 0===i||""!==i.target||i.hasAttribute("download")||"external"===i.getAttribute("rel"))return;const r=i.href;if(""===r||r.startsWith("mailto:"))return;const o=window.location;i.origin===ZC&&(t.preventDefault(),r!==o.href&&(window.history.pushState({},"",r),this.goto(i.pathname)))},this._onPopState=t=>{this.goto(window.location.pathname)}}hostConnected(){super.hostConnected(),window.addEventListener("click",this._onClick),window.addEventListener("popstate",this._onPopState),this.goto(window.location.pathname)}hostDisconnected(){super.hostDisconnected(),window.removeEventListener("click",this._onClick),window.removeEventListener("popstate",this._onPopState)}}var eA=function(t,e,i,r){var o,n=arguments.length,s=n<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(n<3?o(s):n>3?o(e,i,s):o(e,i))||s);return n>3&&s&&Object.defineProperty(e,i,s),s};const iA=1;let rA=class extends Cs{constructor(){super(),this.currentProjectId=void 0,this.pageIndex=iA,this.totalNumberOfVotes=0,this.showAllCosts=!1,this.collectionType="domain",this.localStorageThemeColorKey="md3-agents-ops-theme-color-v28",this.themeColor="#1051ca",this.themePrimaryColor="#000000",this.themeSecondaryColor="#000000",this.themeTertiaryColor="#000000",this.themeNeutralColor="#000000",this.themeNeutralVariantColor="#000000",this.themeScheme="tonal",this.themeHighContrast=!1,this.isAdmin=!1,this.surveyClosed=!1,this.numberOfSolutionsGenerations=0,this.numberOfPoliciesIdeasGeneration=0,this.totalSolutions=0,this.totalPros=0,this.totalCons=0,this.router=new tA(this,[{path:"/",render:()=>U`<ps-home .memory="${this.currentMemory}"></ps-home>`},{path:"/agent/:agentId/",render:t=>this.renderAgentPage(t.agentId)},{path:"/agent/:agentId",render:t=>this.renderAgentPage(t.agentId)},{path:"/agent",render:t=>this.renderAgentPage()},{path:"/agent/",render:t=>this.renderAgentPage()}],{fallback:{render:()=>U`<h2>Page not found</h2>`}}),window.psServerApi=new zs,window.appGlobals=window.psAppGlobals=new al(window.psServerApi),window.appGlobals.theme={},window.appUser=new uc(window.psServerApi);const t=localStorage.getItem("md3-ps-dark-mode");this.themeDarkMode=!!t;const e=localStorage.getItem("md3-ps-high-contrast-mode");this.themeHighContrast=!!e,window.psAppGlobals.activity("pageview"),this.setupDebugScroll()}setupDebugScroll(){let t,e=!1;window.addEventListener("keydown",(i=>{"s"!==i.key||e||e||(e=!0,t=setInterval((()=>{window.scrollBy(0,1)}),4))})),window.addEventListener("keyup",(i=>{"s"===i.key&&e&&(clearInterval(t),e=!1)}))}renderAgentPage(t=void 0){return U`
      <ps-operations-manager
        .currentAgentId="${t}"
        ="${t}"
      ></ps-operations-manager>
    `}getServerUrlFromClusterId(t){return 1==t?"https://betrireykjavik.is/api":3==t?"https://ypus.org/api":"https://yrpri.org/api"}connectedCallback(){super.connectedCallback(),this._setupEventListeners();const t=localStorage.getItem(this.localStorageThemeColorKey);t&&this.fireGlobal("yp-theme-color",t),this.setupTheme(),setTimeout((()=>{this.themeDarkMode=!0}),1e3)}async boot(){window.psAppGlobals.activity("Boot - fetch start");const t=await window.psServerApi.getProject(this.currentProjectId,this.tempPassword,location.pathname.indexOf("refresh827cDb")>-1?"999":void 0);if(t&&"needsTrm"in t)this.tempPassword&&await new Promise((t=>setTimeout(t,2e3))),window.psAppGlobals.activity("Boot - needs trm");else{const e=t;this.currentMemory=e.currentMemory,document.title=e.name,!0===e.isAdmin?this.isAdmin=!0:this.isAdmin=!1,this.themeColor=e.configuration.theme_color?e.configuration.theme_color:"#df2302",this.themePrimaryColor=e.configuration.theme_primary_color,this.themeSecondaryColor=e.configuration.theme_secondary_color,this.themeTertiaryColor=e.configuration.theme_tertiary_color,this.themeNeutralColor=e.configuration.theme_neutral_color,this.themeScheme=e.configuration.theme_scheme?e.configuration.theme_scheme.toLowerCase():"tonal",this.themeChanged(),window.psAppGlobals.activity("Boot - fetch end")}}disconnectedCallback(){super.disconnectedCallback(),this._removeEventListeners()}getHexColor(t){return t&&6===(t=t.replace(/#/g,"")).length?`#${t}`:void 0}themeChanged(t=void 0){let e={};localStorage.setItem(this.localStorageThemeColorKey,this.themeColor);const i=void 0===this.themeDarkMode?window.matchMedia("(prefers-color-scheme: dark)").matches:this.themeDarkMode;if(this.isAppleDevice){!function(t,e){const i=e?.target||document.body;if(gr(i,e?.dark?t.schemes.dark:t.schemes.light),e?.brightnessSuffix&&(gr(i,t.schemes.dark,"-dark"),gr(i,t.schemes.light,"-light")),e?.paletteTones){const r=e?.paletteTones??[];for(const[e,o]of Object.entries(t.palettes)){const t=e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();for(const e of r){const r=`--md-ref-palette-${t}-${t}${e}`,n=ur(o.tone(e));i.style.setProperty(r,n)}}}}(mr(pr(this.themeColor||this.themePrimaryColor||"#000000"),[{name:"up-vote",value:pr("#0F0"),blend:!0},{name:"down-vote",value:pr("#F00"),blend:!0}]),{target:document.body,dark:i})}else e=this.getHexColor(this.themeColor)?rl(this.getHexColor(this.themeColor),this.themeVariant,i,this.themeScheme,this.themeHighContrast?2:0):rl({primary:this.getHexColor(this.themePrimaryColor||"#000000"),secondary:this.getHexColor(this.themeSecondaryColor||"#000000"),tertiary:this.getHexColor(this.themeTertiaryColor||"#000000"),neutral:this.getHexColor(this.themeNeutralColor||"#000000"),neutralVariant:this.getHexColor(this.themeNeutralVariantColor||"#000000")},this.themeVariant,i,"dynamic",this.themeHighContrast?2:0),ol(document,e)}snackbarclosed(){this.lastSnackbarText=void 0}async _displaySnackbar(t){this.lastSnackbarText=t.detail,await this.updateComplete}_setupEventListeners(){this.addListener("app-error",this._appError),this.addListener("display-snackbar",this._displaySnackbar),this.addListener("toggle-dark-mode",this.toggleDarkMode.bind(this)),this.addListener("toggle-high-contrast-mode",this.toggleHighContrastMode.bind(this)),window.addEventListener("popstate",(()=>{this.router.goto(window.location.pathname),this.requestUpdate()}))}_removeEventListeners(){this.removeListener("display-snackbar",this._displaySnackbar),this.removeListener("app-error",this._appError),this.removeListener("toggle-dark-mode",this.toggleDarkMode.bind(this)),this.removeListener("toggle-high-contrast-mode",this.toggleHighContrastMode.bind(this))}updated(t){super.updated(t),(t.has("themeColor")||t.has("themeDarkMode"))&&this.themeChanged()}_appError(t){console.error(t.detail.message),this.currentError=t.detail.message}get adminConfirmed(){return!0}_settingsColorChanged(t){this.fireGlobal("yp-theme-color",t.detail.value)}static get styles(){return[qo,n``]}updateThemeColor(t){this.themeColor=t.detail}toggleDarkMode(){this.themeDarkMode=!this.themeDarkMode,this.themeDarkMode?(window.psAppGlobals.activity("Settings - dark mode"),localStorage.setItem("md3-ps-dark-mode","true")):(window.psAppGlobals.activity("Settings - light mode"),localStorage.removeItem("md3-ps-dark-mode")),this.themeChanged()}toggleHighContrastMode(){this.themeHighContrast=!this.themeHighContrast,this.themeHighContrast?(window.psAppGlobals.activity("Settings - high contrast mode"),localStorage.setItem("md3-ps-high-contrast-mode","true")):(window.psAppGlobals.activity("Settings - non high contrast mode"),localStorage.removeItem("md3-ps-high-contrast-mode")),this.themeChanged()}setupTheme(){const t=localStorage.getItem("md3-ps-dark-mode");this.themeDarkMode=!!t;const e=localStorage.getItem("md3-ps-high-contrast-mode");this.themeHighContrast=!!e;const i=localStorage.getItem(this.localStorageThemeColorKey);i&&(this.themeColor=i),this.fire("yp-theme-dark-mode",this.themeDarkMode),this.themeChanged()}toCamelCase(t){return t.replace(/-([a-z])/g,(function(t){return t[1].toUpperCase()}))}renderContentOrLoader(t){return this.currentMemory?t:U` <div class="loading"> <md-circular-progress indeterminate></md-circular-progress> </div> `}handleShowMore(t){t.preventDefault(),this.showAllCosts=!0}renderThemeToggle(t=!1){return U`<div class="layout vertical center-center lightDarkContainer"> ${this.themeDarkMode?U` <md-outlined-icon-button class="darkModeButton" @click="${this.toggleDarkMode}"><md-icon>light_mode</md-icon></md-outlined-icon-button> `:U` <md-outlined-icon-button class="darkModeButton" @click="${this.toggleDarkMode}"><md-icon>dark_mode</md-icon></md-outlined-icon-button> `} <div ?hidden="${t}">${this.t("Light/Dark")}</div> </div> <div class="layout vertical center-center lightDarkContainer" ?hidden="${this.isAppleDevice}"> ${this.themeHighContrast?U` <md-outlined-icon-button class="darkModeButton" @click="${this.toggleHighContrastMode}"><md-icon>contrast_rtl_off</md-icon></md-outlined-icon-button> `:U` <md-outlined-icon-button class="darkModeButton" @click="${this.toggleHighContrastMode}"><md-icon>contrast</md-icon></md-outlined-icon-button> `} <div ?hidden="${t}">${this.t("Contrast")}</div> </div>`}render(){return U` ${this.router.outlet()}  ${this.lastSnackbarText?U` <mwc-snackbar id="snackbar" @MDCSnackbar:closed="${this.snackbarclosed}" style="text-align:center" .labelText="${this.lastSnackbarText}"></mwc-snackbar> `:j} `}};eA([dt({type:Number})],rA.prototype,"currentProjectId",void 0),eA([dt({type:Number})],rA.prototype,"activeSubProblemIndex",void 0),eA([dt({type:Number})],rA.prototype,"activePopulationIndex",void 0),eA([dt({type:Number})],rA.prototype,"activeSolutionIndex",void 0),eA([dt({type:Number})],rA.prototype,"activePolicyIndex",void 0),eA([dt({type:Number})],rA.prototype,"pageIndex",void 0),eA([dt({type:Object})],rA.prototype,"currentMemory",void 0),eA([dt({type:Number})],rA.prototype,"totalNumberOfVotes",void 0),eA([dt({type:Boolean})],rA.prototype,"showAllCosts",void 0),eA([dt({type:String})],rA.prototype,"lastSnackbarText",void 0),eA([dt({type:String})],rA.prototype,"collectionType",void 0),eA([dt({type:String})],rA.prototype,"earlName",void 0),eA([dt({type:String})],rA.prototype,"currentError",void 0),eA([dt({type:String})],rA.prototype,"forceGetBackupForProject",void 0),eA([dt({type:String})],rA.prototype,"tempPassword",void 0),eA([dt({type:String})],rA.prototype,"localStorageThemeColorKey",void 0),eA([dt({type:String})],rA.prototype,"themeColor",void 0),eA([dt({type:String})],rA.prototype,"themePrimaryColor",void 0),eA([dt({type:String})],rA.prototype,"themeSecondaryColor",void 0),eA([dt({type:String})],rA.prototype,"themeTertiaryColor",void 0),eA([dt({type:String})],rA.prototype,"themeNeutralColor",void 0),eA([dt({type:String})],rA.prototype,"themeNeutralVariantColor",void 0),eA([dt({type:String})],rA.prototype,"themeScheme",void 0),eA([dt({type:String})],rA.prototype,"themeVariant",void 0),eA([dt({type:Boolean})],rA.prototype,"themeHighContrast",void 0),eA([dt({type:Boolean})],rA.prototype,"isAdmin",void 0),eA([dt({type:Boolean})],rA.prototype,"surveyClosed",void 0),eA([dt({type:String})],rA.prototype,"appearanceLookup",void 0),eA([dt({type:String})],rA.prototype,"currentLeftAnswer",void 0),eA([dt({type:String})],rA.prototype,"currentRightAnswer",void 0),eA([dt({type:Number})],rA.prototype,"numberOfSolutionsGenerations",void 0),eA([dt({type:Number})],rA.prototype,"numberOfPoliciesIdeasGeneration",void 0),eA([dt({type:Number})],rA.prototype,"totalSolutions",void 0),eA([dt({type:Number})],rA.prototype,"totalPros",void 0),eA([dt({type:Number})],rA.prototype,"totalCons",void 0),rA=eA([at("ps-agents-operations-app")],rA);
