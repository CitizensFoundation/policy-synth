import"./5cadb358.js";
/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const e=globalThis,t=e.ShadowRoot&&(void 0===e.ShadyCSS||e.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,r=Symbol(),i=new WeakMap;class n{constructor(e,t,i){if(this._$cssResult$=!0,i!==r)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=t}get styleSheet(){let e=this.o;const r=this.t;if(t&&void 0===e){const t=void 0!==r&&1===r.length;t&&(e=i.get(r)),void 0===e&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),t&&i.set(r,e))}return e}toString(){return this.cssText}}const o=(e,...t)=>{const i=1===e.length?e[0]:t.reduce(((t,r,i)=>t+(e=>{if(!0===e._$cssResult$)return e.cssText;if("number"==typeof e)return e;throw Error("Value passed to 'css' function must be a 'css' function result: "+e+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(r)+e[i+1]),e[0]);return new n(i,e,r)},s=t?e=>e:e=>e instanceof CSSStyleSheet?(e=>{let t="";for(const r of e.cssRules)t+=r.cssText;return(e=>new n("string"==typeof e?e:e+"",void 0,r))(t)})(e):e
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */,{is:a,defineProperty:l,getOwnPropertyDescriptor:c,getOwnPropertyNames:d,getOwnPropertySymbols:h,getPrototypeOf:u}=Object,p=globalThis,f=p.trustedTypes,m=f?f.emptyScript:"",g=p.reactiveElementPolyfillSupport,v=(e,t)=>e,b={toAttribute(e,t){switch(t){case Boolean:e=e?m:null;break;case Object:case Array:e=null==e?e:JSON.stringify(e)}return e},fromAttribute(e,t){let r=e;switch(t){case Boolean:r=null!==e;break;case Number:r=null===e?null:Number(e);break;case Object:case Array:try{r=JSON.parse(e)}catch(e){r=null}}return r}},y=(e,t)=>!a(e,t),x={attribute:!0,type:String,converter:b,reflect:!1,hasChanged:y};Symbol.metadata??=Symbol("metadata"),p.litPropertyMetadata??=new WeakMap;class w extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??=[]).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,t=x){if(t.state&&(t.attribute=!1),this._$Ei(),this.elementProperties.set(e,t),!t.noAccessor){const r=Symbol(),i=this.getPropertyDescriptor(e,r,t);void 0!==i&&l(this.prototype,e,i)}}static getPropertyDescriptor(e,t,r){const{get:i,set:n}=c(this.prototype,e)??{get(){return this[t]},set(e){this[t]=e}};return{get(){return i?.call(this)},set(t){const o=i?.call(this);n.call(this,t),this.requestUpdate(e,o,r)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??x}static _$Ei(){if(this.hasOwnProperty(v("elementProperties")))return;const e=u(this);e.finalize(),void 0!==e.l&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(v("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(v("properties"))){const e=this.properties,t=[...d(e),...h(e)];for(const r of t)this.createProperty(r,e[r])}const e=this[Symbol.metadata];if(null!==e){const t=litPropertyMetadata.get(e);if(void 0!==t)for(const[e,r]of t)this.elementProperties.set(e,r)}this._$Eh=new Map;for(const[e,t]of this.elementProperties){const r=this._$Eu(e,t);void 0!==r&&this._$Eh.set(r,e)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){const t=[];if(Array.isArray(e)){const r=new Set(e.flat(1/0).reverse());for(const e of r)t.unshift(s(e))}else void 0!==e&&t.push(s(e));return t}static _$Eu(e,t){const r=t.attribute;return!1===r?void 0:"string"==typeof r?r:"string"==typeof e?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){this._$ES=new Promise((e=>this.enableUpdating=e)),this._$AL=new Map,this._$E_(),this.requestUpdate(),this.constructor.l?.forEach((e=>e(this)))}addController(e){(this._$EO??=new Set).add(e),void 0!==this.renderRoot&&this.isConnected&&e.hostConnected?.()}removeController(e){this._$EO?.delete(e)}_$E_(){const e=new Map,t=this.constructor.elementProperties;for(const r of t.keys())this.hasOwnProperty(r)&&(e.set(r,this[r]),delete this[r]);e.size>0&&(this._$Ep=e)}createRenderRoot(){const r=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return((r,i)=>{if(t)r.adoptedStyleSheets=i.map((e=>e instanceof CSSStyleSheet?e:e.styleSheet));else for(const t of i){const i=document.createElement("style"),n=e.litNonce;void 0!==n&&i.setAttribute("nonce",n),i.textContent=t.cssText,r.appendChild(i)}})(r,this.constructor.elementStyles),r}connectedCallback(){this.renderRoot??=this.createRenderRoot(),this.enableUpdating(!0),this._$EO?.forEach((e=>e.hostConnected?.()))}enableUpdating(e){}disconnectedCallback(){this._$EO?.forEach((e=>e.hostDisconnected?.()))}attributeChangedCallback(e,t,r){this._$AK(e,r)}_$EC(e,t){const r=this.constructor.elementProperties.get(e),i=this.constructor._$Eu(e,r);if(void 0!==i&&!0===r.reflect){const n=(void 0!==r.converter?.toAttribute?r.converter:b).toAttribute(t,r.type);this._$Em=e,null==n?this.removeAttribute(i):this.setAttribute(i,n),this._$Em=null}}_$AK(e,t){const r=this.constructor,i=r._$Eh.get(e);if(void 0!==i&&this._$Em!==i){const e=r.getPropertyOptions(i),n="function"==typeof e.converter?{fromAttribute:e.converter}:void 0!==e.converter?.fromAttribute?e.converter:b;this._$Em=i,this[i]=n.fromAttribute(t,e.type),this._$Em=null}}requestUpdate(e,t,r){if(void 0!==e){if(r??=this.constructor.getPropertyOptions(e),!(r.hasChanged??y)(this[e],t))return;this.P(e,t,r)}!1===this.isUpdatePending&&(this._$ES=this._$ET())}P(e,t,r){this._$AL.has(e)||this._$AL.set(e,t),!0===r.reflect&&this._$Em!==e&&(this._$Ej??=new Set).add(e)}async _$ET(){this.isUpdatePending=!0;try{await this._$ES}catch(e){Promise.reject(e)}const e=this.scheduleUpdate();return null!=e&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??=this.createRenderRoot(),this._$Ep){for(const[e,t]of this._$Ep)this[e]=t;this._$Ep=void 0}const e=this.constructor.elementProperties;if(e.size>0)for(const[t,r]of e)!0!==r.wrapped||this._$AL.has(t)||void 0===this[t]||this.P(t,this[t],r)}let e=!1;const t=this._$AL;try{e=this.shouldUpdate(t),e?(this.willUpdate(t),this._$EO?.forEach((e=>e.hostUpdate?.())),this.update(t)):this._$EU()}catch(t){throw e=!1,this._$EU(),t}e&&this._$AE(t)}willUpdate(e){}_$AE(e){this._$EO?.forEach((e=>e.hostUpdated?.())),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EU(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Ej&&=this._$Ej.forEach((e=>this._$EC(e,this[e]))),this._$EU()}updated(e){}firstUpdated(e){}}w.elementStyles=[],w.shadowRootOptions={mode:"open"},w[v("elementProperties")]=new Map,w[v("finalized")]=new Map,g?.({ReactiveElement:w}),(p.reactiveElementVersions??=[]).push("2.0.4");
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const _=globalThis,k=_.trustedTypes,C=k?k.createPolicy("lit-html",{createHTML:e=>e}):void 0,S="$lit$",A=`lit$${Math.random().toFixed(9).slice(2)}$`,P="?"+A,T=`<${P}>`,E=document,I=()=>E.createComment(""),L=e=>null===e||"object"!=typeof e&&"function"!=typeof e,O=Array.isArray,M=e=>O(e)||"function"==typeof e?.[Symbol.iterator],R="[ \t\n\f\r]",$=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,N=/-->/g,D=/>/g,z=RegExp(`>|${R}(?:([^\\s"'>=/]+)(${R}*=${R}*(?:[^ \t\n\f\r"'\`<>=]|("|')|))|$)`,"g"),B=/'/g,F=/"/g,U=/^(?:script|style|textarea|title)$/i,V=(e=>(t,...r)=>({_$litType$:e,strings:t,values:r}))(1),j=Symbol.for("lit-noChange"),G=Symbol.for("lit-nothing"),H=new WeakMap,W=E.createTreeWalker(E,129);function q(e,t){if(!Array.isArray(e)||!e.hasOwnProperty("raw"))throw Error("invalid template strings array");return void 0!==C?C.createHTML(t):t}const Y=(e,t)=>{const r=e.length-1,i=[];let n,o=2===t?"<svg>":"",s=$;for(let t=0;t<r;t++){const r=e[t];let a,l,c=-1,d=0;for(;d<r.length&&(s.lastIndex=d,l=s.exec(r),null!==l);)d=s.lastIndex,s===$?"!--"===l[1]?s=N:void 0!==l[1]?s=D:void 0!==l[2]?(U.test(l[2])&&(n=RegExp("</"+l[2],"g")),s=z):void 0!==l[3]&&(s=z):s===z?">"===l[0]?(s=n??$,c=-1):void 0===l[1]?c=-2:(c=s.lastIndex-l[2].length,a=l[1],s=void 0===l[3]?z:'"'===l[3]?F:B):s===F||s===B?s=z:s===N||s===D?s=$:(s=z,n=void 0);const h=s===z&&e[t+1].startsWith("/>")?" ":"";o+=s===$?r+T:c>=0?(i.push(a),r.slice(0,c)+S+r.slice(c)+A+h):r+A+(-2===c?t:h)}return[q(e,o+(e[r]||"<?>")+(2===t?"</svg>":"")),i]};class J{constructor({strings:e,_$litType$:t},r){let i;this.parts=[];let n=0,o=0;const s=e.length-1,a=this.parts,[l,c]=Y(e,t);if(this.el=J.createElement(l,r),W.currentNode=this.el.content,2===t){const e=this.el.content.firstChild;e.replaceWith(...e.childNodes)}for(;null!==(i=W.nextNode())&&a.length<s;){if(1===i.nodeType){if(i.hasAttributes())for(const e of i.getAttributeNames())if(e.endsWith(S)){const t=c[o++],r=i.getAttribute(e).split(A),s=/([.?@])?(.*)/.exec(t);a.push({type:1,index:n,name:s[2],strings:r,ctor:"."===s[1]?ee:"?"===s[1]?te:"@"===s[1]?re:K}),i.removeAttribute(e)}else e.startsWith(A)&&(a.push({type:6,index:n}),i.removeAttribute(e));if(U.test(i.tagName)){const e=i.textContent.split(A),t=e.length-1;if(t>0){i.textContent=k?k.emptyScript:"";for(let r=0;r<t;r++)i.append(e[r],I()),W.nextNode(),a.push({type:2,index:++n});i.append(e[t],I())}}}else if(8===i.nodeType)if(i.data===P)a.push({type:2,index:n});else{let e=-1;for(;-1!==(e=i.data.indexOf(A,e+1));)a.push({type:7,index:n}),e+=A.length-1}n++}}static createElement(e,t){const r=E.createElement("template");return r.innerHTML=e,r}}function X(e,t,r=e,i){if(t===j)return t;let n=void 0!==i?r._$Co?.[i]:r._$Cl;const o=L(t)?void 0:t._$litDirective$;return n?.constructor!==o&&(n?._$AO?.(!1),void 0===o?n=void 0:(n=new o(e),n._$AT(e,r,i)),void 0!==i?(r._$Co??=[])[i]=n:r._$Cl=n),void 0!==n&&(t=X(e,n._$AS(e,t.values),n,i)),t}class Z{constructor(e,t){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=t}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){const{el:{content:t},parts:r}=this._$AD,i=(e?.creationScope??E).importNode(t,!0);W.currentNode=i;let n=W.nextNode(),o=0,s=0,a=r[0];for(;void 0!==a;){if(o===a.index){let t;2===a.type?t=new Q(n,n.nextSibling,this,e):1===a.type?t=new a.ctor(n,a.name,a.strings,this,e):6===a.type&&(t=new ie(n,this,e)),this._$AV.push(t),a=r[++s]}o!==a?.index&&(n=W.nextNode(),o++)}return W.currentNode=E,i}p(e){let t=0;for(const r of this._$AV)void 0!==r&&(void 0!==r.strings?(r._$AI(e,r,t),t+=r.strings.length-2):r._$AI(e[t])),t++}}class Q{get _$AU(){return this._$AM?._$AU??this._$Cv}constructor(e,t,r,i){this.type=2,this._$AH=G,this._$AN=void 0,this._$AA=e,this._$AB=t,this._$AM=r,this.options=i,this._$Cv=i?.isConnected??!0}get parentNode(){let e=this._$AA.parentNode;const t=this._$AM;return void 0!==t&&11===e?.nodeType&&(e=t.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,t=this){e=X(this,e,t),L(e)?e===G||null==e||""===e?(this._$AH!==G&&this._$AR(),this._$AH=G):e!==this._$AH&&e!==j&&this._(e):void 0!==e._$litType$?this.$(e):void 0!==e.nodeType?this.T(e):M(e)?this.k(e):this._(e)}S(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.S(e))}_(e){this._$AH!==G&&L(this._$AH)?this._$AA.nextSibling.data=e:this.T(E.createTextNode(e)),this._$AH=e}$(e){const{values:t,_$litType$:r}=e,i="number"==typeof r?this._$AC(e):(void 0===r.el&&(r.el=J.createElement(q(r.h,r.h[0]),this.options)),r);if(this._$AH?._$AD===i)this._$AH.p(t);else{const e=new Z(i,this),r=e.u(this.options);e.p(t),this.T(r),this._$AH=e}}_$AC(e){let t=H.get(e.strings);return void 0===t&&H.set(e.strings,t=new J(e)),t}k(e){O(this._$AH)||(this._$AH=[],this._$AR());const t=this._$AH;let r,i=0;for(const n of e)i===t.length?t.push(r=new Q(this.S(I()),this.S(I()),this,this.options)):r=t[i],r._$AI(n),i++;i<t.length&&(this._$AR(r&&r._$AB.nextSibling,i),t.length=i)}_$AR(e=this._$AA.nextSibling,t){for(this._$AP?.(!1,!0,t);e&&e!==this._$AB;){const t=e.nextSibling;e.remove(),e=t}}setConnected(e){void 0===this._$AM&&(this._$Cv=e,this._$AP?.(e))}}class K{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,t,r,i,n){this.type=1,this._$AH=G,this._$AN=void 0,this.element=e,this.name=t,this._$AM=i,this.options=n,r.length>2||""!==r[0]||""!==r[1]?(this._$AH=Array(r.length-1).fill(new String),this.strings=r):this._$AH=G}_$AI(e,t=this,r,i){const n=this.strings;let o=!1;if(void 0===n)e=X(this,e,t,0),o=!L(e)||e!==this._$AH&&e!==j,o&&(this._$AH=e);else{const i=e;let s,a;for(e=n[0],s=0;s<n.length-1;s++)a=X(this,i[r+s],t,s),a===j&&(a=this._$AH[s]),o||=!L(a)||a!==this._$AH[s],a===G?e=G:e!==G&&(e+=(a??"")+n[s+1]),this._$AH[s]=a}o&&!i&&this.j(e)}j(e){e===G?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class ee extends K{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===G?void 0:e}}class te extends K{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==G)}}class re extends K{constructor(e,t,r,i,n){super(e,t,r,i,n),this.type=5}_$AI(e,t=this){if((e=X(this,e,t,0)??G)===j)return;const r=this._$AH,i=e===G&&r!==G||e.capture!==r.capture||e.once!==r.once||e.passive!==r.passive,n=e!==G&&(r===G||i);i&&this.element.removeEventListener(this.name,this,r),n&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){"function"==typeof this._$AH?this._$AH.call(this.options?.host??this.element,e):this._$AH.handleEvent(e)}}class ie{constructor(e,t,r){this.element=e,this.type=6,this._$AN=void 0,this._$AM=t,this.options=r}get _$AU(){return this._$AM._$AU}_$AI(e){X(this,e)}}const ne={P:S,A:A,C:P,M:1,L:Y,R:Z,D:M,V:X,I:Q,H:K,N:te,U:re,B:ee,F:ie},oe=_.litHtmlPolyfillSupport;oe?.(J,Q),(_.litHtmlVersions??=[]).push("3.1.4");const se=(e,t,r)=>{const i=r?.renderBefore??t;let n=i._$litPart$;if(void 0===n){const e=r?.renderBefore??null;i._$litPart$=n=new Q(t.insertBefore(I(),e),e,void 0,r??{})}return n._$AI(e),n};
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */class ae extends w{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){const e=super.createRenderRoot();return this.renderOptions.renderBefore??=e.firstChild,e}update(e){const t=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=se(t,this.renderRoot,this.renderOptions)}connectedCallback(){super.connectedCallback(),this._$Do?.setConnected(!0)}disconnectedCallback(){super.disconnectedCallback(),this._$Do?.setConnected(!1)}render(){return j}}ae._$litElement$=!0,ae.finalized=!0,globalThis.litElementHydrateSupport?.({LitElement:ae});const le=globalThis.litElementPolyfillSupport;le?.({LitElement:ae}),(globalThis.litElementVersions??=[]).push("4.0.6");
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const ce=e=>(t,r)=>{void 0!==r?r.addInitializer((()=>{customElements.define(e,t)})):customElements.define(e,t)}
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */,de={attribute:!0,type:String,converter:b,reflect:!1,hasChanged:y},he=(e=de,t,r)=>{const{kind:i,metadata:n}=r;let o=globalThis.litPropertyMetadata.get(n);if(void 0===o&&globalThis.litPropertyMetadata.set(n,o=new Map),o.set(r.name,e),"accessor"===i){const{name:i}=r;return{set(r){const n=t.get.call(this);t.set.call(this,r),this.requestUpdate(i,n,e)},init(t){return void 0!==t&&this.P(i,void 0,e),t}}}if("setter"===i){const{name:i}=r;return function(r){const n=this[i];t.call(this,r),this.requestUpdate(i,n,e)}}throw Error("Unsupported decorator location: "+i)};function ue(e){return(t,r)=>"object"==typeof r?he(e,t,r):((e,t,r)=>{const i=t.hasOwnProperty(r);return t.constructor.createProperty(r,i?{...e,wrapped:!0}:e),i?Object.getOwnPropertyDescriptor(t,r):void 0})(e,t,r)}
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function pe(e){return ue({...e,state:!0,attribute:!1})}
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const fe=(e,t,r)=>(r.configurable=!0,r.enumerable=!0,Reflect.decorate&&"object"!=typeof t&&Object.defineProperty(e,t,r),r)
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */;function me(e,t){return(r,i,n)=>{const o=t=>t.renderRoot?.querySelector(e)??null;if(t){const{get:e,set:t}="object"==typeof i?r:n??(()=>{const e=Symbol();return{get(){return this[e]},set(t){this[e]=t}}})();return fe(r,i,{get(){let r=e.call(this);return void 0===r&&(r=o(this),(null!==r||this.hasUpdated)&&t.call(this,r)),r}})}return fe(r,i,{get(){return o(this)}})}}
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */let ge;function ve(e){return(t,r)=>fe(t,r,{get(){return(this.renderRoot??(ge??=document.createDocumentFragment())).querySelectorAll(e)}})}
/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function be(e){return(t,r)=>{const{slot:i,selector:n}=e??{},o="slot"+(i?`[name=${i}]`:":not([name])");return fe(t,r,{get(){const t=this.renderRoot?.querySelector(o),r=t?.assignedElements(e)??[];return void 0===n?r:r.filter((e=>e.matches(n)))}})}}
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function ye(e){return(t,r)=>{const{slot:i}=e??{},n="slot"+(i?`[name=${i}]`:":not([name])");return fe(t,r,{get(){const t=this.renderRoot?.querySelector(n);return t?.assignedNodes(e)??[]}})}}var xe=function(){return xe=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},xe.apply(this,arguments)};function we(e,t,r,i){var n,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,r,s):n(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s}function _e(e,t,r,i){return new(r||(r=Promise))((function(n,o){function s(e){try{l(i.next(e))}catch(e){o(e)}}function a(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}l((i=i.apply(e,t||[])).next())}))}function ke(e,t){var r,i,n,o,s={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(l){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(s=0)),s;)try{if(r=1,i&&(n=2&a[0]?i.return:a[0]?i.throw||((n=i.return)&&n.call(i),0):i.next)&&!(n=n.call(i,a[1])).done)return n;switch(i=0,n&&(a=[2&a[0],n.value]),a[0]){case 0:case 1:n=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,i=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(n=s.trys,(n=n.length>0&&n[n.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!n||a[1]>n[0]&&a[1]<n[3])){s.label=a[1];break}if(6===a[0]&&s.label<n[1]){s.label=n[1],n=a;break}if(n&&s.label<n[2]){s.label=n[2],s.ops.push(a);break}n[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],i=0}finally{r=n=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}function Ce(e,t,r){if(r||2===arguments.length)for(var i,n=0,o=t.length;n<o;n++)!i&&n in t||(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))}"function"==typeof SuppressedError&&SuppressedError;
/**
 * @license
 * Copyright 2022 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
class Se extends ae{connectedCallback(){super.connectedCallback(),this.setAttribute("aria-hidden","true")}render(){return V`<span class="shadow"></span>`}}
/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ae=o`.shadow,.shadow::after,.shadow::before,:host{border-radius:inherit;inset:0;position:absolute;transition-duration:inherit;transition-property:inherit;transition-timing-function:inherit}:host{display:flex;pointer-events:none;transition-property:box-shadow,opacity}.shadow::after,.shadow::before{content:"";transition-property:box-shadow,opacity;--_level:var(--md-elevation-level, 0);--_shadow-color:var(--md-elevation-shadow-color, var(--md-sys-color-shadow, #000))}.shadow::before{box-shadow:0 calc(1px*(clamp(0,var(--_level),1) + clamp(0,var(--_level) - 3,1) + 2*clamp(0,var(--_level) - 4,1))) calc(1px*(2*clamp(0,var(--_level),1) + clamp(0,var(--_level) - 2,1) + clamp(0,var(--_level) - 4,1))) 0 var(--_shadow-color);opacity:.3}.shadow::after{box-shadow:0 calc(1px*(clamp(0,var(--_level),1) + clamp(0,var(--_level) - 1,1) + 2*clamp(0,var(--_level) - 2,3))) calc(1px*(3*clamp(0,var(--_level),2) + 2*clamp(0,var(--_level) - 2,3))) calc(1px*(clamp(0,var(--_level),4) + 2*clamp(0,var(--_level) - 4,1))) var(--_shadow-color);opacity:.15}`
/**
 * @license
 * Copyright 2022 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */;let Pe=class extends Se{};Pe.styles=[Ae],Pe=we([ce("md-elevation")],Pe);
/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
const Te=["role","ariaAtomic","ariaAutoComplete","ariaBusy","ariaChecked","ariaColCount","ariaColIndex","ariaColSpan","ariaCurrent","ariaDisabled","ariaExpanded","ariaHasPopup","ariaHidden","ariaInvalid","ariaKeyShortcuts","ariaLabel","ariaLevel","ariaLive","ariaModal","ariaMultiLine","ariaMultiSelectable","ariaOrientation","ariaPlaceholder","ariaPosInSet","ariaPressed","ariaReadOnly","ariaRequired","ariaRoleDescription","ariaRowCount","ariaRowIndex","ariaRowSpan","ariaSelected","ariaSetSize","ariaSort","ariaValueMax","ariaValueMin","ariaValueNow","ariaValueText"];function Ee(e){return e.replace("aria","aria-").replace(/Elements?/g,"").toLowerCase()}
/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ie(e){for(const t of Te)e.createProperty(t,{attribute:Ee(t),reflect:!0});e.addInitializer((e=>{const t={hostConnected(){e.setAttribute("role","presentation")}};e.addController(t)}))}
/**
 * @license
 * Copyright 2022 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Le(e,t=!0){return t&&"rtl"===getComputedStyle(e).getPropertyValue("direction").trim()}
/**
 * @license
 * Copyright 2022 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */Te.map(Ee);class Oe extends ae{constructor(){super(...arguments),this.activeIndex=0,this.hideInactiveLabels=!1,this.tabs=[]}render(){const{ariaLabel:e}=this;return V`<div class="md3-navigation-bar" role="tablist" aria-label="${e||G}" @keydown="${this.handleKeydown}" @navigation-tab-interaction="${this.handleNavigationTabInteraction}" @navigation-tab-rendered="${this.handleNavigationTabConnected}"><md-elevation part="elevation"></md-elevation><div class="md3-navigation-bar__tabs-slot-container"><slot></slot></div></div>`}updated(e){e.has("activeIndex")&&(this.onActiveIndexChange(this.activeIndex),this.dispatchEvent(new CustomEvent("navigation-bar-activated",{detail:{tab:this.tabs[this.activeIndex],activeIndex:this.activeIndex},bubbles:!0,composed:!0}))),e.has("hideInactiveLabels")&&this.onHideInactiveLabelsChange(this.hideInactiveLabels),e.has("tabs")&&(this.onHideInactiveLabelsChange(this.hideInactiveLabels),this.onActiveIndexChange(this.activeIndex))}firstUpdated(e){super.firstUpdated(e),this.layout()}layout(){if(!this.tabsElement)return;const e=[];for(const t of this.tabsElement)e.push(t);this.tabs=e}handleNavigationTabConnected(e){const t=e.target;-1===this.tabs.indexOf(t)&&this.layout()}handleNavigationTabInteraction(e){this.activeIndex=this.tabs.indexOf(e.detail.state)}handleKeydown(e){const t=e.key,r=this.tabs.findIndex((e=>e.matches(":focus-within"))),i=Le(this),n=this.tabs.length-1;if("Enter"===t||" "===t)return void(this.activeIndex=r);if("Home"===t)return void this.tabs[0].focus();if("End"===t)return void this.tabs[n].focus();const o="ArrowRight"===t&&!i||"ArrowLeft"===t&&i;if(o&&r===n)return void this.tabs[0].focus();if(o)return void this.tabs[r+1].focus();const s="ArrowLeft"===t&&!i||"ArrowRight"===t&&i;s&&0===r?this.tabs[n].focus():s&&this.tabs[r-1].focus()}onActiveIndexChange(e){if(!this.tabs[e])throw new Error("NavigationBar: activeIndex is out of bounds.");for(let t=0;t<this.tabs.length;t++)this.tabs[t].active=t===e}onHideInactiveLabelsChange(e){for(const t of this.tabs)t.hideInactiveLabel=e}}Ie(Oe),we([ue({type:Number,attribute:"active-index"})],Oe.prototype,"activeIndex",void 0),we([ue({type:Boolean,attribute:"hide-inactive-labels"})],Oe.prototype,"hideInactiveLabels",void 0),we([be({flatten:!0})],Oe.prototype,"tabsElement",void 0);
/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
const Me=o`:host{--_active-indicator-color:var(--md-navigation-bar-active-indicator-color, var(--md-sys-color-secondary-container, #e8def8));--_active-indicator-height:var(--md-navigation-bar-active-indicator-height, 32px);--_active-indicator-shape:var(--md-navigation-bar-active-indicator-shape, var(--md-sys-shape-corner-full, 9999px));--_active-indicator-width:var(--md-navigation-bar-active-indicator-width, 64px);--_active-focus-icon-color:var(--md-navigation-bar-active-focus-icon-color, var(--md-sys-color-on-secondary-container, #1d192b));--_active-focus-label-text-color:var(--md-navigation-bar-active-focus-label-text-color, var(--md-sys-color-on-surface, #1d1b20));--_active-focus-state-layer-color:var(--md-navigation-bar-active-focus-state-layer-color, var(--md-sys-color-on-surface, #1d1b20));--_active-hover-icon-color:var(--md-navigation-bar-active-hover-icon-color, var(--md-sys-color-on-secondary-container, #1d192b));--_active-hover-label-text-color:var(--md-navigation-bar-active-hover-label-text-color, var(--md-sys-color-on-surface, #1d1b20));--_active-hover-state-layer-color:var(--md-navigation-bar-active-hover-state-layer-color, var(--md-sys-color-on-surface, #1d1b20));--_active-icon-color:var(--md-navigation-bar-active-icon-color, var(--md-sys-color-on-secondary-container, #1d192b));--_active-label-text-color:var(--md-navigation-bar-active-label-text-color, var(--md-sys-color-on-surface, #1d1b20));--_active-label-text-weight:var(--md-navigation-bar-active-label-text-weight, var(--md-sys-typescale-label-medium-weight-prominent, var(--md-ref-typeface-weight-bold, 700)));--_active-pressed-icon-color:var(--md-navigation-bar-active-pressed-icon-color, var(--md-sys-color-on-secondary-container, #1d192b));--_active-pressed-label-text-color:var(--md-navigation-bar-active-pressed-label-text-color, var(--md-sys-color-on-surface, #1d1b20));--_active-pressed-state-layer-color:var(--md-navigation-bar-active-pressed-state-layer-color, var(--md-sys-color-on-surface, #1d1b20));--_container-color:var(--md-navigation-bar-container-color, var(--md-sys-color-surface-container, #f3edf7));--_container-elevation:var(--md-navigation-bar-container-elevation, 2);--_container-height:var(--md-navigation-bar-container-height, 80px);--_container-shape:var(--md-navigation-bar-container-shape, var(--md-sys-shape-corner-none, 0px));--_focus-state-layer-opacity:var(--md-navigation-bar-focus-state-layer-opacity, 0.12);--_hover-state-layer-opacity:var(--md-navigation-bar-hover-state-layer-opacity, 0.08);--_icon-size:var(--md-navigation-bar-icon-size, 24px);--_inactive-focus-icon-color:var(--md-navigation-bar-inactive-focus-icon-color, var(--md-sys-color-on-surface, #1d1b20));--_inactive-focus-label-text-color:var(--md-navigation-bar-inactive-focus-label-text-color, var(--md-sys-color-on-surface, #1d1b20));--_inactive-focus-state-layer-color:var(--md-navigation-bar-inactive-focus-state-layer-color, var(--md-sys-color-on-surface, #1d1b20));--_inactive-hover-icon-color:var(--md-navigation-bar-inactive-hover-icon-color, var(--md-sys-color-on-surface, #1d1b20));--_inactive-hover-label-text-color:var(--md-navigation-bar-inactive-hover-label-text-color, var(--md-sys-color-on-surface, #1d1b20));--_inactive-hover-state-layer-color:var(--md-navigation-bar-inactive-hover-state-layer-color, var(--md-sys-color-on-surface, #1d1b20));--_inactive-icon-color:var(--md-navigation-bar-inactive-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_inactive-label-text-color:var(--md-navigation-bar-inactive-label-text-color, var(--md-sys-color-on-surface-variant, #49454f));--_inactive-pressed-icon-color:var(--md-navigation-bar-inactive-pressed-icon-color, var(--md-sys-color-on-surface, #1d1b20));--_inactive-pressed-label-text-color:var(--md-navigation-bar-inactive-pressed-label-text-color, var(--md-sys-color-on-surface, #1d1b20));--_inactive-pressed-state-layer-color:var(--md-navigation-bar-inactive-pressed-state-layer-color, var(--md-sys-color-on-surface, #1d1b20));--_label-text-font:var(--md-navigation-bar-label-text-font, var(--md-sys-typescale-label-medium-font, var(--md-ref-typeface-plain, Roboto)));--_label-text-line-height:var(--md-navigation-bar-label-text-line-height, var(--md-sys-typescale-label-medium-line-height, 1rem));--_label-text-size:var(--md-navigation-bar-label-text-size, var(--md-sys-typescale-label-medium-size, 0.75rem));--_label-text-tracking:var(--md-navigation-bar-label-text-tracking, );--_label-text-type:var(--md-navigation-bar-label-text-type, var(--md-sys-typescale-label-medium-weight, var(--md-ref-typeface-weight-medium, 500)) var(--md-sys-typescale-label-medium-size, 0.75rem) / var(--md-sys-typescale-label-medium-line-height, 1rem) var(--md-sys-typescale-label-medium-font, var(--md-ref-typeface-plain, Roboto)));--_label-text-weight:var(--md-navigation-bar-label-text-weight, var(--md-sys-typescale-label-medium-weight, var(--md-ref-typeface-weight-medium, 500)));--_pressed-state-layer-opacity:var(--md-navigation-bar-pressed-state-layer-opacity, 0.12);--md-elevation-level:var(--_container-elevation);--md-elevation-shadow-color:var(--_container-shadow-color);width:100%}.md3-navigation-bar{display:flex;position:relative;width:100%;background-color:var(--_container-color);border-radius:var(--_container-shape);height:var(--_container-height)}.md3-navigation-bar .md3-navigation-bar__tabs-slot-container{display:inherit;width:inherit}md-elevation{transition-duration:280ms;z-index:0}`
/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */;let Re=class extends Oe{};Re.styles=[Me],Re=we([ce("md-navigation-bar")],Re);
/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
const $e=Symbol("attachableController");let Ne;Ne=new MutationObserver((e=>{for(const t of e)t.target[$e]?.hostConnected()}));class De{get htmlFor(){return this.host.getAttribute("for")}set htmlFor(e){null===e?this.host.removeAttribute("for"):this.host.setAttribute("for",e)}get control(){return this.host.hasAttribute("for")?this.htmlFor&&this.host.isConnected?this.host.getRootNode().querySelector(`#${this.htmlFor}`):null:this.currentControl||this.host.parentElement}set control(e){e?this.attach(e):this.detach()}constructor(e,t){this.host=e,this.onControlChange=t,this.currentControl=null,e.addController(this),e[$e]=this,Ne?.observe(e,{attributeFilter:["for"]})}attach(e){e!==this.currentControl&&(this.setCurrentControl(e),this.host.removeAttribute("for"))}detach(){this.setCurrentControl(null),this.host.setAttribute("for","")}hostConnected(){this.setCurrentControl(this.control)}hostDisconnected(){this.setCurrentControl(null)}setCurrentControl(e){this.onControlChange(this.currentControl,e),this.currentControl=e}}
/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ze=["focusin","focusout","pointerdown"];class Be extends ae{constructor(){super(...arguments),this.visible=!1,this.inward=!1,this.attachableController=new De(this,this.onControlChange.bind(this))}get htmlFor(){return this.attachableController.htmlFor}set htmlFor(e){this.attachableController.htmlFor=e}get control(){return this.attachableController.control}set control(e){this.attachableController.control=e}attach(e){this.attachableController.attach(e)}detach(){this.attachableController.detach()}connectedCallback(){super.connectedCallback(),this.setAttribute("aria-hidden","true")}handleEvent(e){if(!e[Fe]){switch(e.type){default:return;case"focusin":this.visible=this.control?.matches(":focus-visible")??!1;break;case"focusout":case"pointerdown":this.visible=!1}e[Fe]=!0}}onControlChange(e,t){for(const r of ze)e?.removeEventListener(r,this),t?.addEventListener(r,this)}update(e){e.has("visible")&&this.dispatchEvent(new Event("visibility-changed")),super.update(e)}}we([ue({type:Boolean,reflect:!0})],Be.prototype,"visible",void 0),we([ue({type:Boolean,reflect:!0})],Be.prototype,"inward",void 0);const Fe=Symbol("handledByFocusRing"),Ue=o`:host{animation-delay:0s,calc(var(--md-focus-ring-duration,600ms)*.25);animation-duration:calc(var(--md-focus-ring-duration,600ms)*.25),calc(var(--md-focus-ring-duration,600ms)*.75);animation-timing-function:cubic-bezier(.2,0,0,1);box-sizing:border-box;color:var(--md-focus-ring-color,var(--md-sys-color-secondary,#625b71));display:none;pointer-events:none;position:absolute}:host([visible]){display:flex}:host(:not([inward])){animation-name:outward-grow,outward-shrink;border-end-end-radius:calc(var(--md-focus-ring-shape-end-end,var(--md-focus-ring-shape,var(--md-sys-shape-corner-full,9999px))) + var(--md-focus-ring-outward-offset,2px));border-end-start-radius:calc(var(--md-focus-ring-shape-end-start,var(--md-focus-ring-shape,var(--md-sys-shape-corner-full,9999px))) + var(--md-focus-ring-outward-offset,2px));border-start-end-radius:calc(var(--md-focus-ring-shape-start-end,var(--md-focus-ring-shape,var(--md-sys-shape-corner-full,9999px))) + var(--md-focus-ring-outward-offset,2px));border-start-start-radius:calc(var(--md-focus-ring-shape-start-start,var(--md-focus-ring-shape,var(--md-sys-shape-corner-full,9999px))) + var(--md-focus-ring-outward-offset,2px));inset:calc(-1*var(--md-focus-ring-outward-offset,2px));outline:var(--md-focus-ring-width,3px) solid currentColor}:host([inward]){animation-name:inward-grow,inward-shrink;border-end-end-radius:calc(var(--md-focus-ring-shape-end-end,var(--md-focus-ring-shape,var(--md-sys-shape-corner-full,9999px))) - var(--md-focus-ring-inward-offset,0px));border-end-start-radius:calc(var(--md-focus-ring-shape-end-start,var(--md-focus-ring-shape,var(--md-sys-shape-corner-full,9999px))) - var(--md-focus-ring-inward-offset,0px));border-start-end-radius:calc(var(--md-focus-ring-shape-start-end,var(--md-focus-ring-shape,var(--md-sys-shape-corner-full,9999px))) - var(--md-focus-ring-inward-offset,0px));border-start-start-radius:calc(var(--md-focus-ring-shape-start-start,var(--md-focus-ring-shape,var(--md-sys-shape-corner-full,9999px))) - var(--md-focus-ring-inward-offset,0px));border:var(--md-focus-ring-width,3px) solid currentColor;inset:var(--md-focus-ring-inward-offset,0)}@keyframes outward-grow{from{outline-width:0}to{outline-width:var(--md-focus-ring-active-width,8px)}}@keyframes outward-shrink{from{outline-width:var(--md-focus-ring-active-width,8px)}}@keyframes inward-grow{from{border-width:0}to{border-width:var(--md-focus-ring-active-width,8px)}}@keyframes inward-shrink{from{border-width:var(--md-focus-ring-active-width,8px)}}@media(prefers-reduced-motion){:host{animation:none}}`
/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */;
/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Ve=class extends Be{};Ve.styles=[Ue],Ve=we([ce("md-focus-ring")],Ve);
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const je=1,Ge=2,He=3,We=4,qe=e=>(...t)=>({_$litDirective$:e,values:t});class Ye{constructor(e){}get _$AU(){return this._$AM._$AU}_$AT(e,t,r){this._$Ct=e,this._$AM=t,this._$Ci=r}_$AS(e,t){return this.update(e,t)}update(e,t){return this.render(...t)}}
/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Je=qe(class extends Ye{constructor(e){if(super(e),e.type!==je||"class"!==e.name||e.strings?.length>2)throw Error("`classMap()` can only be used in the `class` attribute and must be the only part in the attribute.")}render(e){return" "+Object.keys(e).filter((t=>e[t])).join(" ")+" "}update(e,[t]){if(void 0===this.st){this.st=new Set,void 0!==e.strings&&(this.nt=new Set(e.strings.join(" ").split(/\s/).filter((e=>""!==e))));for(const e in t)t[e]&&!this.nt?.has(e)&&this.st.add(e);return this.render(t)}const r=e.element.classList;for(const e of this.st)e in t||(r.remove(e),this.st.delete(e));for(const e in t){const i=!!t[e];i===this.st.has(e)||this.nt?.has(e)||(i?(r.add(e),this.st.add(e)):(r.remove(e),this.st.delete(e)))}return j}}),Xe="cubic-bezier(0.2, 0, 0, 1)",Ze="cubic-bezier(.3,0,0,1)",Qe="cubic-bezier(.3,0,.8,.15)";
/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Ke;!function(e){e[e.INACTIVE=0]="INACTIVE",e[e.TOUCH_DELAY=1]="TOUCH_DELAY",e[e.HOLDING=2]="HOLDING",e[e.WAITING_FOR_CLICK=3]="WAITING_FOR_CLICK"}(Ke||(Ke={}));const et=["click","contextmenu","pointercancel","pointerdown","pointerenter","pointerleave","pointerup"],tt=window.matchMedia("(forced-colors: active)");class rt extends ae{constructor(){super(...arguments),this.disabled=!1,this.hovered=!1,this.pressed=!1,this.rippleSize="",this.rippleScale="",this.initialSize=0,this.state=Ke.INACTIVE,this.checkBoundsAfterContextMenu=!1,this.attachableController=new De(this,this.onControlChange.bind(this))}get htmlFor(){return this.attachableController.htmlFor}set htmlFor(e){this.attachableController.htmlFor=e}get control(){return this.attachableController.control}set control(e){this.attachableController.control=e}attach(e){this.attachableController.attach(e)}detach(){this.attachableController.detach()}connectedCallback(){super.connectedCallback(),this.setAttribute("aria-hidden","true")}render(){const e={hovered:this.hovered,pressed:this.pressed};return V`<div class="surface ${Je(e)}"></div>`}update(e){e.has("disabled")&&this.disabled&&(this.hovered=!1,this.pressed=!1),super.update(e)}handlePointerenter(e){this.shouldReactToEvent(e)&&(this.hovered=!0)}handlePointerleave(e){this.shouldReactToEvent(e)&&(this.hovered=!1,this.state!==Ke.INACTIVE&&this.endPressAnimation())}handlePointerup(e){if(this.shouldReactToEvent(e)){if(this.state!==Ke.HOLDING)return this.state===Ke.TOUCH_DELAY?(this.state=Ke.WAITING_FOR_CLICK,void this.startPressAnimation(this.rippleStartEvent)):void 0;this.state=Ke.WAITING_FOR_CLICK}}async handlePointerdown(e){if(this.shouldReactToEvent(e)){if(this.rippleStartEvent=e,!this.isTouch(e))return this.state=Ke.WAITING_FOR_CLICK,void this.startPressAnimation(e);this.checkBoundsAfterContextMenu&&!this.inBounds(e)||(this.checkBoundsAfterContextMenu=!1,this.state=Ke.TOUCH_DELAY,await new Promise((e=>{setTimeout(e,150)})),this.state===Ke.TOUCH_DELAY&&(this.state=Ke.HOLDING,this.startPressAnimation(e)))}}handleClick(){this.disabled||(this.state!==Ke.WAITING_FOR_CLICK?this.state===Ke.INACTIVE&&(this.startPressAnimation(),this.endPressAnimation()):this.endPressAnimation())}handlePointercancel(e){this.shouldReactToEvent(e)&&this.endPressAnimation()}handleContextmenu(){this.disabled||(this.checkBoundsAfterContextMenu=!0,this.endPressAnimation())}determineRippleSize(){const{height:e,width:t}=this.getBoundingClientRect(),r=Math.max(e,t),i=Math.max(.35*r,75),n=Math.floor(.2*r),o=Math.sqrt(t**2+e**2)+10;this.initialSize=n,this.rippleScale=""+(o+i)/n,this.rippleSize=`${n}px`}getNormalizedPointerEventCoords(e){const{scrollX:t,scrollY:r}=window,{left:i,top:n}=this.getBoundingClientRect(),o=t+i,s=r+n,{pageX:a,pageY:l}=e;return{x:a-o,y:l-s}}getTranslationCoordinates(e){const{height:t,width:r}=this.getBoundingClientRect(),i={x:(r-this.initialSize)/2,y:(t-this.initialSize)/2};let n;return n=e instanceof PointerEvent?this.getNormalizedPointerEventCoords(e):{x:r/2,y:t/2},n={x:n.x-this.initialSize/2,y:n.y-this.initialSize/2},{startPoint:n,endPoint:i}}startPressAnimation(e){if(!this.mdRoot)return;this.pressed=!0,this.growAnimation?.cancel(),this.determineRippleSize();const{startPoint:t,endPoint:r}=this.getTranslationCoordinates(e),i=`${t.x}px, ${t.y}px`,n=`${r.x}px, ${r.y}px`;this.growAnimation=this.mdRoot.animate({top:[0,0],left:[0,0],height:[this.rippleSize,this.rippleSize],width:[this.rippleSize,this.rippleSize],transform:[`translate(${i}) scale(1)`,`translate(${n}) scale(${this.rippleScale})`]},{pseudoElement:"::after",duration:450,easing:Xe,fill:"forwards"})}async endPressAnimation(){this.rippleStartEvent=void 0,this.state=Ke.INACTIVE;const e=this.growAnimation;let t=1/0;"number"==typeof e?.currentTime?t=e.currentTime:e?.currentTime&&(t=e.currentTime.to("ms").value),t>=225?this.pressed=!1:(await new Promise((e=>{setTimeout(e,225-t)})),this.growAnimation===e&&(this.pressed=!1))}shouldReactToEvent(e){if(this.disabled||!e.isPrimary)return!1;if(this.rippleStartEvent&&this.rippleStartEvent.pointerId!==e.pointerId)return!1;if("pointerenter"===e.type||"pointerleave"===e.type)return!this.isTouch(e);const t=1===e.buttons;return this.isTouch(e)||t}inBounds({x:e,y:t}){const{top:r,left:i,bottom:n,right:o}=this.getBoundingClientRect();return e>=i&&e<=o&&t>=r&&t<=n}isTouch({pointerType:e}){return"touch"===e}async handleEvent(e){if(!tt?.matches)switch(e.type){case"click":this.handleClick();break;case"contextmenu":this.handleContextmenu();break;case"pointercancel":this.handlePointercancel(e);break;case"pointerdown":await this.handlePointerdown(e);break;case"pointerenter":this.handlePointerenter(e);break;case"pointerleave":this.handlePointerleave(e);break;case"pointerup":this.handlePointerup(e)}}onControlChange(e,t){for(const r of et)e?.removeEventListener(r,this),t?.addEventListener(r,this)}}we([ue({type:Boolean,reflect:!0})],rt.prototype,"disabled",void 0),we([pe()],rt.prototype,"hovered",void 0),we([pe()],rt.prototype,"pressed",void 0),we([me(".surface")],rt.prototype,"mdRoot",void 0);
/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
const it=o`:host{display:flex;margin:auto;pointer-events:none}:host([disabled]){display:none}@media(forced-colors:active){:host{display:none}}.surface,:host{border-radius:inherit;position:absolute;inset:0;overflow:hidden}.surface{-webkit-tap-highlight-color:transparent}.surface::after,.surface::before{content:"";opacity:0;position:absolute}.surface::before{background-color:var(--md-ripple-hover-color,var(--md-sys-color-on-surface,#1d1b20));inset:0;transition:opacity 15ms linear,background-color 15ms linear}.surface::after{background:radial-gradient(closest-side,var(--md-ripple-pressed-color,var(--md-sys-color-on-surface,#1d1b20)) max(100% - 70px,65%),transparent 100%);transform-origin:center center;transition:opacity 375ms linear}.hovered::before{background-color:var(--md-ripple-hover-color,var(--md-sys-color-on-surface,#1d1b20));opacity:var(--md-ripple-hover-opacity,.08)}.pressed::after{opacity:var(--md-ripple-pressed-opacity,.12);transition-duration:105ms}`
/**
 * @license
 * Copyright 2022 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */;let nt=class extends rt{};nt.styles=[it],nt=we([ce("md-ripple")],nt);
/**
 * @license
 * Copyright 2022 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
class ot extends ae{constructor(){super(...arguments),this.value=""}render(){const e={"md3-badge--large":this.value};return V`<div class="md3-badge ${Je(e)}"> <p class="md3-badge__value">${this.value}</p> </div>`}}we([ue()],ot.prototype,"value",void 0);
/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
const st=o`:host{--_color:var(--md-badge-color, var(--md-sys-color-error, #b3261e));--_large-color:var(--md-badge-large-color, var(--md-sys-color-error, #b3261e));--_large-label-text-color:var(--md-badge-large-label-text-color, var(--md-sys-color-on-error, #fff));--_large-label-text-font:var(--md-badge-large-label-text-font, var(--md-sys-typescale-label-small-font, var(--md-ref-typeface-plain, Roboto)));--_large-label-text-line-height:var(--md-badge-large-label-text-line-height, var(--md-sys-typescale-label-small-line-height, 1rem));--_large-label-text-size:var(--md-badge-large-label-text-size, var(--md-sys-typescale-label-small-size, 0.6875rem));--_large-label-text-weight:var(--md-badge-large-label-text-weight, var(--md-sys-typescale-label-small-weight, var(--md-ref-typeface-weight-medium, 500)));--_large-shape:var(--md-badge-large-shape, var(--md-sys-shape-corner-full, 9999px));--_large-size:var(--md-badge-large-size, 16px);--_shape:var(--md-badge-shape, var(--md-sys-shape-corner-full, 9999px));--_size:var(--md-badge-size, 6px)}.md3-badge{inset-inline-start:50%;margin-inline-start:6px;margin-block-start:4px;position:absolute;inset-block-start:0;background-color:var(--_color);border-radius:var(--_shape);height:var(--_size)}.md3-badge:not(.md3-badge--large){width:var(--_size)}.md3-badge.md3-badge--large{display:flex;flex-direction:column;justify-content:center;margin-inline-start:2px;margin-block-start:1px;background-color:var(--_large-color);border-radius:var(--_large-shape);height:var(--_large-size);min-width:var(--_large-size);color:var(--_large-label-text-color)}.md3-badge.md3-badge--large .md3-badge__value{padding:0 4px;text-align:center}.md3-badge__value{font-family:var(--_large-label-text-font);font-size:var(--_large-label-text-size);line-height:var(--_large-label-text-line-height);font-weight:var(--_large-label-text-weight)}`
/**
 * @license
 * Copyright 2022 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */;let at=class extends ot{};at.styles=[st],at=we([ce("md-badge")],at);
/**
 * @license
 * Copyright 2022 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
class lt extends ae{constructor(){super(...arguments),this.disabled=!1,this.active=!1,this.hideInactiveLabel=!1,this.badgeValue="",this.showBadge=!1}render(){const{ariaLabel:e}=this;return V` <button class="md3-navigation-tab ${Je(this.getRenderClasses())}" role="tab" aria-selected="${this.active}" aria-label="${e||G}" tabindex="${this.active?0:-1}" @click="${this.handleClick}"> <md-focus-ring part="focus-ring" inward></md-focus-ring> <md-ripple ?disabled="${this.disabled}" class="md3-navigation-tab__ripple"></md-ripple> <span aria-hidden="true" class="md3-navigation-tab__icon-content"><span class="md3-navigation-tab__active-indicator"></span><span class="md3-navigation-tab__icon"><slot name="inactive-icon"></slot></span> <span class="md3-navigation-tab__icon md3-navigation-tab__icon--active"><slot name="active-icon"></slot></span>${this.renderBadge()}</span>${this.renderLabel()} </button>`}getRenderClasses(){return{"md3-navigation-tab--hide-inactive-label":this.hideInactiveLabel,"md3-navigation-tab--active":this.active}}renderBadge(){return this.showBadge?V`<md-badge .value="${this.badgeValue}"></md-badge>`:G}renderLabel(){const{ariaLabel:e}=this,t=e?"true":"false";return this.label?V` <span aria-hidden="${t}" class="md3-navigation-tab__label-text">${this.label}</span>`:G}firstUpdated(e){super.firstUpdated(e);const t=new Event("navigation-tab-rendered",{bubbles:!0,composed:!0});this.dispatchEvent(t)}focus(){const e=this.buttonElement;e&&e.focus()}blur(){const e=this.buttonElement;e&&e.blur()}handleClick(){this.dispatchEvent(new CustomEvent("navigation-tab-interaction",{detail:{state:this},bubbles:!0,composed:!0}))}}Ie(lt),we([ue({type:Boolean})],lt.prototype,"disabled",void 0),we([ue({type:Boolean,reflect:!0})],lt.prototype,"active",void 0),we([ue({type:Boolean,attribute:"hide-inactive-label"})],lt.prototype,"hideInactiveLabel",void 0),we([ue()],lt.prototype,"label",void 0),we([ue({attribute:"badge-value"})],lt.prototype,"badgeValue",void 0),we([ue({type:Boolean,attribute:"show-badge"})],lt.prototype,"showBadge",void 0),we([me("button")],lt.prototype,"buttonElement",void 0);
/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
const ct=o`:host{--_active-indicator-color:var(--md-navigation-bar-active-indicator-color, var(--md-sys-color-secondary-container, #e8def8));--_active-indicator-height:var(--md-navigation-bar-active-indicator-height, 32px);--_active-indicator-shape:var(--md-navigation-bar-active-indicator-shape, var(--md-sys-shape-corner-full, 9999px));--_active-indicator-width:var(--md-navigation-bar-active-indicator-width, 64px);--_active-focus-icon-color:var(--md-navigation-bar-active-focus-icon-color, var(--md-sys-color-on-secondary-container, #1d192b));--_active-focus-label-text-color:var(--md-navigation-bar-active-focus-label-text-color, var(--md-sys-color-on-surface, #1d1b20));--_active-focus-state-layer-color:var(--md-navigation-bar-active-focus-state-layer-color, var(--md-sys-color-on-surface, #1d1b20));--_active-hover-icon-color:var(--md-navigation-bar-active-hover-icon-color, var(--md-sys-color-on-secondary-container, #1d192b));--_active-hover-label-text-color:var(--md-navigation-bar-active-hover-label-text-color, var(--md-sys-color-on-surface, #1d1b20));--_active-hover-state-layer-color:var(--md-navigation-bar-active-hover-state-layer-color, var(--md-sys-color-on-surface, #1d1b20));--_active-icon-color:var(--md-navigation-bar-active-icon-color, var(--md-sys-color-on-secondary-container, #1d192b));--_active-label-text-color:var(--md-navigation-bar-active-label-text-color, var(--md-sys-color-on-surface, #1d1b20));--_active-label-text-weight:var(--md-navigation-bar-active-label-text-weight, var(--md-sys-typescale-label-medium-weight-prominent, var(--md-ref-typeface-weight-bold, 700)));--_active-pressed-icon-color:var(--md-navigation-bar-active-pressed-icon-color, var(--md-sys-color-on-secondary-container, #1d192b));--_active-pressed-label-text-color:var(--md-navigation-bar-active-pressed-label-text-color, var(--md-sys-color-on-surface, #1d1b20));--_active-pressed-state-layer-color:var(--md-navigation-bar-active-pressed-state-layer-color, var(--md-sys-color-on-surface, #1d1b20));--_container-color:var(--md-navigation-bar-container-color, var(--md-sys-color-surface-container, #f3edf7));--_container-elevation:var(--md-navigation-bar-container-elevation, 2);--_container-height:var(--md-navigation-bar-container-height, 80px);--_container-shape:var(--md-navigation-bar-container-shape, var(--md-sys-shape-corner-none, 0px));--_focus-state-layer-opacity:var(--md-navigation-bar-focus-state-layer-opacity, 0.12);--_hover-state-layer-opacity:var(--md-navigation-bar-hover-state-layer-opacity, 0.08);--_icon-size:var(--md-navigation-bar-icon-size, 24px);--_inactive-focus-icon-color:var(--md-navigation-bar-inactive-focus-icon-color, var(--md-sys-color-on-surface, #1d1b20));--_inactive-focus-label-text-color:var(--md-navigation-bar-inactive-focus-label-text-color, var(--md-sys-color-on-surface, #1d1b20));--_inactive-focus-state-layer-color:var(--md-navigation-bar-inactive-focus-state-layer-color, var(--md-sys-color-on-surface, #1d1b20));--_inactive-hover-icon-color:var(--md-navigation-bar-inactive-hover-icon-color, var(--md-sys-color-on-surface, #1d1b20));--_inactive-hover-label-text-color:var(--md-navigation-bar-inactive-hover-label-text-color, var(--md-sys-color-on-surface, #1d1b20));--_inactive-hover-state-layer-color:var(--md-navigation-bar-inactive-hover-state-layer-color, var(--md-sys-color-on-surface, #1d1b20));--_inactive-icon-color:var(--md-navigation-bar-inactive-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_inactive-label-text-color:var(--md-navigation-bar-inactive-label-text-color, var(--md-sys-color-on-surface-variant, #49454f));--_inactive-pressed-icon-color:var(--md-navigation-bar-inactive-pressed-icon-color, var(--md-sys-color-on-surface, #1d1b20));--_inactive-pressed-label-text-color:var(--md-navigation-bar-inactive-pressed-label-text-color, var(--md-sys-color-on-surface, #1d1b20));--_inactive-pressed-state-layer-color:var(--md-navigation-bar-inactive-pressed-state-layer-color, var(--md-sys-color-on-surface, #1d1b20));--_label-text-font:var(--md-navigation-bar-label-text-font, var(--md-sys-typescale-label-medium-font, var(--md-ref-typeface-plain, Roboto)));--_label-text-line-height:var(--md-navigation-bar-label-text-line-height, var(--md-sys-typescale-label-medium-line-height, 1rem));--_label-text-size:var(--md-navigation-bar-label-text-size, var(--md-sys-typescale-label-medium-size, 0.75rem));--_label-text-tracking:var(--md-navigation-bar-label-text-tracking, );--_label-text-type:var(--md-navigation-bar-label-text-type, var(--md-sys-typescale-label-medium-weight, var(--md-ref-typeface-weight-medium, 500)) var(--md-sys-typescale-label-medium-size, 0.75rem) / var(--md-sys-typescale-label-medium-line-height, 1rem) var(--md-sys-typescale-label-medium-font, var(--md-ref-typeface-plain, Roboto)));--_label-text-weight:var(--md-navigation-bar-label-text-weight, var(--md-sys-typescale-label-medium-weight, var(--md-ref-typeface-weight-medium, 500)));--_pressed-state-layer-opacity:var(--md-navigation-bar-pressed-state-layer-opacity, 0.12);display:flex;flex-grow:1}md-focus-ring{--md-focus-ring-shape:var(--md-sys-shape-corner-small, 8px);--md-focus-ring-inward-offset:-1px}.md3-navigation-tab{align-items:center;appearance:none;background:0 0;border:none;box-sizing:border-box;cursor:pointer;display:flex;flex-direction:column;height:100%;justify-content:center;min-height:48px;min-width:48px;outline:0;padding:8px 0 12px;position:relative;text-align:center;width:100%;font-family:var(--_label-text-font);font-size:var(--_label-text-size);line-height:var(--_label-text-line-height);font-weight:var(--_label-text-weight);text-transform:inherit}.md3-navigation-tab::-moz-focus-inner{border:0;padding:0}.md3-navigation-tab__icon-content{align-items:center;box-sizing:border-box;display:flex;justify-content:center;position:relative;z-index:1}.md3-navigation-tab__label-text{height:16px;margin-top:4px;opacity:1;transition:opacity .1s cubic-bezier(.4,0,.2,1),height .1s cubic-bezier(.4,0,.2,1);z-index:1}.md3-navigation-tab--hide-inactive-label:not(.md3-navigation-tab--active) .md3-navigation-tab__label-text{height:0;opacity:0}.md3-navigation-tab__active-indicator{display:flex;justify-content:center;opacity:0;position:absolute;transition:width .1s cubic-bezier(.4,0,.2,1),opacity .1s cubic-bezier(.4,0,.2,1);width:32px;background-color:var(--_active-indicator-color);border-radius:var(--_active-indicator-shape)}.md3-navigation-tab--active .md3-navigation-tab__active-indicator{opacity:1}.md3-navigation-tab__active-indicator,.md3-navigation-tab__icon-content{height:var(--_active-indicator-height)}.md3-navigation-tab--active .md3-navigation-tab__active-indicator,.md3-navigation-tab__icon-content{width:var(--_active-indicator-width)}.md3-navigation-tab__icon{fill:currentColor;align-self:center;display:inline-block;position:relative;width:var(--_icon-size);height:var(--_icon-size);font-size:var(--_icon-size)}.md3-navigation-tab__icon.md3-navigation-tab__icon--active{display:none}.md3-navigation-tab--active .md3-navigation-tab__icon{display:none}.md3-navigation-tab--active .md3-navigation-tab__icon.md3-navigation-tab__icon--active{display:inline-block}.md3-navigation-tab__ripple{z-index:0}.md3-navigation-tab--active{--md-ripple-hover-color:var(--_active-hover-state-layer-color);--md-ripple-pressed-color:var(--_active-pressed-state-layer-color);--md-ripple-hover-opacity:var(--_hover-state-layer-opacity);--md-ripple-pressed-opacity:var(--_pressed-state-layer-opacity)}.md3-navigation-tab--active .md3-navigation-tab__icon{color:var(--_active-icon-color)}.md3-navigation-tab--active .md3-navigation-tab__label-text{color:var(--_active-label-text-color)}.md3-navigation-tab--active:hover .md3-navigation-tab__icon{color:var(--_active-hover-icon-color)}.md3-navigation-tab--active:hover .md3-navigation-tab__label-text{color:var(--_active-hover-label-text-color)}.md3-navigation-tab--active:focus .md3-navigation-tab__icon{color:var(--_active-focus-icon-color)}.md3-navigation-tab--active:focus .md3-navigation-tab__label-text{color:var(--_active-focus-label-text-color)}.md3-navigation-tab--active:active .md3-navigation-tab__icon{color:var(--_active-pressed-icon-color)}.md3-navigation-tab--active:active .md3-navigation-tab__label-text{color:var(--_active-pressed-label-text-color)}.md3-navigation-tab:not(.md3-navigation-tab--active){--md-ripple-hover-color:var(--_inactive-hover-state-layer-color);--md-ripple-pressed-color:var(--_inactive-pressed-state-layer-color);--md-ripple-hover-opacity:var(--_hover-state-layer-opacity);--md-ripple-pressed-opacity:var(--_pressed-state-layer-opacity)}.md3-navigation-tab:not(.md3-navigation-tab--active) .md3-navigation-tab__icon{color:var(--_inactive-icon-color)}.md3-navigation-tab:not(.md3-navigation-tab--active) .md3-navigation-tab__label-text{color:var(--_inactive-label-text-color)}.md3-navigation-tab:not(.md3-navigation-tab--active):hover .md3-navigation-tab__icon{color:var(--_inactive-hover-icon-color)}.md3-navigation-tab:not(.md3-navigation-tab--active):hover .md3-navigation-tab__label-text{color:var(--_inactive-hover-label-text-color)}.md3-navigation-tab:not(.md3-navigation-tab--active):focus .md3-navigation-tab__icon{color:var(--_inactive-focus-icon-color)}.md3-navigation-tab:not(.md3-navigation-tab--active):focus .md3-navigation-tab__label-text{color:var(--_inactive-focus-label-text-color)}.md3-navigation-tab:not(.md3-navigation-tab--active):active .md3-navigation-tab__icon{color:var(--_inactive-pressed-icon-color)}.md3-navigation-tab:not(.md3-navigation-tab--active):active .md3-navigation-tab__label-text{color:var(--_inactive-pressed-label-text-color)}`
/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */;let dt=class extends lt{};dt.styles=[ct],dt=we([ce("md-navigation-tab")],dt);
/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
class ht extends ae{constructor(){super(...arguments),this.opened=!1,this.pivot="end"}render(){const e=this.opened?"true":"false",t=this.opened?"false":"true",{ariaLabel:r,ariaModal:i}=this;return V` <div aria-expanded="${e}" aria-hidden="${t}" aria-label="${r||G}" aria-modal="${i||G}" class="md3-navigation-drawer ${this.getRenderClasses()}" role="dialog"> <md-elevation part="elevation"></md-elevation> <div class="md3-navigation-drawer__slot-content"> <slot></slot> </div> </div> `}getRenderClasses(){return Je({"md3-navigation-drawer--opened":this.opened,"md3-navigation-drawer--pivot-at-start":"start"===this.pivot})}updated(e){e.has("opened")&&setTimeout((()=>{this.dispatchEvent(new CustomEvent("navigation-drawer-changed",{detail:{opened:this.opened},bubbles:!0,composed:!0}))}),250)}}Ie(ht),we([ue({type:Boolean})],ht.prototype,"opened",void 0),we([ue()],ht.prototype,"pivot",void 0);
/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
const ut=o`:host{--_container-color:var(--md-navigation-drawer-container-color, #fff);--_container-height:var(--md-navigation-drawer-container-height, 100%);--_container-shape:var(--md-navigation-drawer-container-shape, 0 16px 16px 0);--_container-width:var(--md-navigation-drawer-container-width, 360px);--_divider-color:var(--md-navigation-drawer-divider-color, #000);--_modal-container-elevation:var(--md-navigation-drawer-modal-container-elevation, 1);--_standard-container-elevation:var(--md-navigation-drawer-standard-container-elevation, 0);--md-elevation-level:var(--_standard-container-elevation);--md-elevation-shadow-color:var(--_divider-color)}:host{display:flex}.md3-navigation-drawer{inline-size:0;box-sizing:border-box;display:flex;justify-content:flex-end;overflow:hidden;overflow-y:auto;visibility:hidden;transition:inline-size .25s cubic-bezier(.4,0,.2,1) 0s,visibility 0s cubic-bezier(.4,0,.2,1) .25s}md-elevation{z-index:0}.md3-navigation-drawer--opened{visibility:visible;transition:inline-size .25s cubic-bezier(.4,0,.2,1) 0s,visibility 0s cubic-bezier(.4,0,.2,1) 0s}.md3-navigation-drawer--pivot-at-start{justify-content:flex-start}.md3-navigation-drawer__slot-content{display:flex;flex-direction:column;position:relative}`
/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */,pt=o`.md3-navigation-drawer,.md3-navigation-drawer-modal{background-color:var(--_container-color);border-radius:var(--_container-shape);height:var(--_container-height)}.md3-navigation-drawer-modal.md3-navigation-drawer-modal--opened,.md3-navigation-drawer.md3-navigation-drawer--opened{inline-size:var(--_container-width)}.md3-navigation-drawer .md3-navigation-drawer__slot-content,.md3-navigation-drawer-modal .md3-navigation-drawer-modal__slot-content{min-inline-size:var(--_container-width);max-inline-size:var(--_container-width)}`
/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */;let ft=class extends ht{};ft.styles=[pt,ut],ft=we([ce("md-navigation-drawer")],ft);
/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
class mt extends ae{constructor(){super(...arguments),this.multiline=!1}render(){return V` <slot name="container"></slot> <slot class="non-text" name="start"></slot> <div class="text"> <slot name="overline" @slotchange="${this.handleTextSlotChange}"></slot> <slot class="default-slot" @slotchange="${this.handleTextSlotChange}"></slot> <slot name="headline" @slotchange="${this.handleTextSlotChange}"></slot> <slot name="supporting-text" @slotchange="${this.handleTextSlotChange}"></slot> </div> <slot class="non-text" name="trailing-supporting-text"></slot> <slot class="non-text" name="end"></slot> `}handleTextSlotChange(){let e=!1,t=0;for(const r of this.textSlots)if(gt(r)&&(t+=1),t>1){e=!0;break}this.multiline=e}}function gt(e){for(const t of e.assignedNodes({flatten:!0})){const e=t.nodeType===Node.ELEMENT_NODE,r=t.nodeType===Node.TEXT_NODE&&t.textContent?.match(/\S/);if(e||r)return!0}return!1}
/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */we([ue({type:Boolean,reflect:!0})],mt.prototype,"multiline",void 0),we([ve(".text slot")],mt.prototype,"textSlots",void 0);const vt=o`:host{color:var(--md-sys-color-on-surface,#1d1b20);font-family:var(--md-sys-typescale-body-large-font,var(--md-ref-typeface-plain,Roboto));font-size:var(--md-sys-typescale-body-large-size,1rem);font-weight:var(--md-sys-typescale-body-large-weight,var(--md-ref-typeface-weight-regular,400));line-height:var(--md-sys-typescale-body-large-line-height,1.5rem);align-items:center;box-sizing:border-box;display:flex;gap:16px;min-height:56px;overflow:hidden;padding:12px 16px;position:relative;text-overflow:ellipsis}:host([multiline]){min-height:72px}[name=overline]{color:var(--md-sys-color-on-surface-variant,#49454f);font-family:var(--md-sys-typescale-label-small-font,var(--md-ref-typeface-plain,Roboto));font-size:var(--md-sys-typescale-label-small-size,.6875rem);font-weight:var(--md-sys-typescale-label-small-weight,var(--md-ref-typeface-weight-medium,500));line-height:var(--md-sys-typescale-label-small-line-height,1rem)}[name=supporting-text]{color:var(--md-sys-color-on-surface-variant,#49454f);font-family:var(--md-sys-typescale-body-medium-font,var(--md-ref-typeface-plain,Roboto));font-size:var(--md-sys-typescale-body-medium-size,.875rem);font-weight:var(--md-sys-typescale-body-medium-weight,var(--md-ref-typeface-weight-regular,400));line-height:var(--md-sys-typescale-body-medium-line-height,1.25rem)}[name=trailing-supporting-text]{color:var(--md-sys-color-on-surface-variant,#49454f);font-family:var(--md-sys-typescale-label-small-font,var(--md-ref-typeface-plain,Roboto));font-size:var(--md-sys-typescale-label-small-size,.6875rem);font-weight:var(--md-sys-typescale-label-small-weight,var(--md-ref-typeface-weight-medium,500));line-height:var(--md-sys-typescale-label-small-line-height,1rem)}[name=container]::slotted(*){inset:0;position:absolute}.default-slot{display:inline}.default-slot,.text ::slotted(*){overflow:hidden;text-overflow:ellipsis}.text{display:flex;flex:1;flex-direction:column;overflow:hidden}`
/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */;let bt=class extends mt{};bt.styles=[vt],bt=we([ce("md-item")],bt);
/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const yt=Symbol.for(""),xt=e=>{if(e?.r===yt)return e?._$litStatic$},wt=(e,...t)=>({_$litStatic$:t.reduce(((t,r,i)=>t+(e=>{if(void 0!==e._$litStatic$)return e._$litStatic$;throw Error(`Value passed to 'literal' function must be a 'literal' result: ${e}. Use 'unsafeStatic' to pass non-literal values, but\n            take care to ensure page security.`)})(r)+e[i+1]),e[0]),r:yt}),_t=new Map,kt=(e=>(t,...r)=>{const i=r.length;let n,o;const s=[],a=[];let l,c=0,d=!1;for(;c<i;){for(l=t[c];c<i&&void 0!==(o=r[c],n=xt(o));)l+=n+t[++c],d=!0;c!==i&&a.push(o),s.push(l),c++}if(c===i&&s.push(t[i]),d){const e=s.join("$$lit$$");void 0===(t=_t.get(e))&&(s.raw=s,_t.set(e,t=s)),r=a}return e(t,...r)})(V);
/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ct(e,t=Lt){const r=Pt(e,t);return r&&(r.tabIndex=0,r.focus()),r}function St(e,t=Lt){const r=Tt(e,t);return r&&(r.tabIndex=0,r.focus()),r}function At(e,t=Lt){for(let r=0;r<e.length;r++){const i=e[r];if(0===i.tabIndex&&t(i))return{item:i,index:r}}return null}function Pt(e,t=Lt){for(const r of e)if(t(r))return r;return null}function Tt(e,t=Lt){for(let r=e.length-1;r>=0;r--){const i=e[r];if(t(i))return i}return null}function Et(e,t,r=Lt,i=!0){if(t){const n=function(e,t,r=Lt,i=!0){for(let n=1;n<e.length;n++){const o=(n+t)%e.length;if(o<t&&!i)return null;const s=e[o];if(r(s))return s}return e[t]?e[t]:null}(e,t.index,r,i);return n&&(n.tabIndex=0,n.focus()),n}return Ct(e,r)}function It(e,t,r=Lt,i=!0){if(t){const n=function(e,t,r=Lt,i=!0){for(let n=1;n<e.length;n++){const o=(t-n+e.length)%e.length;if(o>t&&!i)return null;const s=e[o];if(r(s))return s}return e[t]?e[t]:null}(e,t.index,r,i);return n&&(n.tabIndex=0,n.focus()),n}return St(e,r)}function Lt(e){return!e.disabled}
/**
 * @license
 * Copyright 2022 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ot extends ae{constructor(){super(...arguments),this.disabled=!1,this.type="text",this.isListItem=!0,this.href="",this.target=""}get isDisabled(){return this.disabled&&"link"!==this.type}willUpdate(e){this.href&&(this.type="link"),super.willUpdate(e)}render(){return this.renderListItem(V` <md-item> <div slot="container"> ${this.renderRipple()} ${this.renderFocusRing()} </div> <slot name="start" slot="start"></slot> <slot name="end" slot="end"></slot> ${this.renderBody()} </md-item> `)}renderListItem(e){const t="link"===this.type;let r;switch(this.type){case"link":r=wt`a`;break;case"button":r=wt`button`;break;default:r=wt`li`}const i="text"!==this.type,n=t&&this.target?this.target:G;return kt`
      <${r}
        id="item"
        tabindex="${this.isDisabled||!i?-1:0}"
        ?disabled=${this.isDisabled}
        role="listitem"
        aria-selected=${this.ariaSelected||G}
        aria-checked=${this.ariaChecked||G}
        aria-expanded=${this.ariaExpanded||G}
        aria-haspopup=${this.ariaHasPopup||G}
        class="list-item ${Je(this.getRenderClasses())}"
        href=${this.href||G}
        target=${n}
        @focus=${this.onFocus}
      >${e}</${r}>
    `}renderRipple(){return"text"===this.type?G:V` <md-ripple part="ripple" for="item" ?disabled="${this.isDisabled}"></md-ripple>`}renderFocusRing(){return"text"===this.type?G:V` <md-focus-ring @visibility-changed="${this.onFocusRingVisibilityChanged}" part="focus-ring" for="item" inward></md-focus-ring>`}onFocusRingVisibilityChanged(e){}getRenderClasses(){return{disabled:this.isDisabled}}renderBody(){return V` <slot></slot> <slot name="overline" slot="overline"></slot> <slot name="headline" slot="headline"></slot> <slot name="supporting-text" slot="supporting-text"></slot> <slot name="trailing-supporting-text" slot="trailing-supporting-text"></slot> `}onFocus(){-1===this.tabIndex&&this.dispatchEvent(new Event("request-activation",{bubbles:!0,composed:!0}))}focus(){this.listItemRoot?.focus()}}Ie(Ot),Ot.shadowRootOptions={...ae.shadowRootOptions,delegatesFocus:!0},we([ue({type:Boolean,reflect:!0})],Ot.prototype,"disabled",void 0),we([ue({reflect:!0})],Ot.prototype,"type",void 0),we([ue({type:Boolean,attribute:"md-list-item",reflect:!0})],Ot.prototype,"isListItem",void 0),we([ue()],Ot.prototype,"href",void 0),we([ue()],Ot.prototype,"target",void 0),we([me(".list-item")],Ot.prototype,"listItemRoot",void 0);
/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
const Mt=o`:host{display:flex;-webkit-tap-highlight-color:transparent;--md-ripple-hover-color:var(--md-list-item-hover-state-layer-color, var(--md-sys-color-on-surface, #1d1b20));--md-ripple-hover-opacity:var(--md-list-item-hover-state-layer-opacity, 0.08);--md-ripple-pressed-color:var(--md-list-item-pressed-state-layer-color, var(--md-sys-color-on-surface, #1d1b20));--md-ripple-pressed-opacity:var(--md-list-item-pressed-state-layer-opacity, 0.12)}:host(:is([type=button]:not([disabled]),[type=link])){cursor:pointer}md-focus-ring{z-index:1;--md-focus-ring-shape:8px}a,button,li{background:0 0;border:none;cursor:inherit;padding:0;margin:0;text-align:unset;text-decoration:none}.list-item{border-radius:inherit;display:flex;flex:1;max-width:inherit;min-width:inherit;outline:0;-webkit-tap-highlight-color:transparent;width:100%}.list-item.interactive{cursor:pointer}.list-item.disabled{opacity:var(--md-list-item-disabled-opacity,.3);pointer-events:none}[slot=container]{pointer-events:none}md-ripple{border-radius:inherit}md-item{border-radius:inherit;flex:1;height:100%;color:var(--md-list-item-label-text-color,var(--md-sys-color-on-surface,#1d1b20));font-family:var(--md-list-item-label-text-font,var(--md-sys-typescale-body-large-font,var(--md-ref-typeface-plain,Roboto)));font-size:var(--md-list-item-label-text-size,var(--md-sys-typescale-body-large-size,1rem));line-height:var(--md-list-item-label-text-line-height,var(--md-sys-typescale-body-large-line-height,1.5rem));font-weight:var(--md-list-item-label-text-weight,var(--md-sys-typescale-body-large-weight,var(--md-ref-typeface-weight-regular,400)));min-height:var(--md-list-item-one-line-container-height,56px);padding-top:var(--md-list-item-top-space,12px);padding-bottom:var(--md-list-item-bottom-space,12px);padding-inline-start:var(--md-list-item-leading-space,16px);padding-inline-end:var(--md-list-item-trailing-space,16px)}md-item[multiline]{min-height:var(--md-list-item-two-line-container-height,72px)}[slot=supporting-text]{color:var(--md-list-item-supporting-text-color,var(--md-sys-color-on-surface-variant,#49454f));font-family:var(--md-list-item-supporting-text-font,var(--md-sys-typescale-body-medium-font,var(--md-ref-typeface-plain,Roboto)));font-size:var(--md-list-item-supporting-text-size,var(--md-sys-typescale-body-medium-size,.875rem));line-height:var(--md-list-item-supporting-text-line-height,var(--md-sys-typescale-body-medium-line-height,1.25rem));font-weight:var(--md-list-item-supporting-text-weight,var(--md-sys-typescale-body-medium-weight,var(--md-ref-typeface-weight-regular,400)))}[slot=trailing-supporting-text]{color:var(--md-list-item-trailing-supporting-text-color,var(--md-sys-color-on-surface-variant,#49454f));font-family:var(--md-list-item-trailing-supporting-text-font,var(--md-sys-typescale-label-small-font,var(--md-ref-typeface-plain,Roboto)));font-size:var(--md-list-item-trailing-supporting-text-size,var(--md-sys-typescale-label-small-size,.6875rem));line-height:var(--md-list-item-trailing-supporting-text-line-height,var(--md-sys-typescale-label-small-line-height,1rem));font-weight:var(--md-list-item-trailing-supporting-text-weight,var(--md-sys-typescale-label-small-weight,var(--md-ref-typeface-weight-medium,500)))}:is([slot=start],[slot=end])::slotted(*){fill:currentColor}[slot=start]{color:var(--md-list-item-leading-icon-color,var(--md-sys-color-on-surface-variant,#49454f))}[slot=end]{color:var(--md-list-item-trailing-icon-color,var(--md-sys-color-on-surface-variant,#49454f))}@media(forced-colors:active){.disabled slot{color:GrayText}.list-item.disabled{color:GrayText;opacity:1}}`
/**
 * @license
 * Copyright 2022 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */;let Rt=class extends Ot{};Rt.styles=[Mt],Rt=we([ce("md-list-item")],Rt);
/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
const $t={ArrowDown:"ArrowDown",ArrowLeft:"ArrowLeft",ArrowUp:"ArrowUp",ArrowRight:"ArrowRight",Home:"Home",End:"End"};class Nt{constructor(e){this.handleKeydown=e=>{const t=e.key;if(e.defaultPrevented||!this.isNavigableKey(t))return;const r=this.items;if(!r.length)return;const i=At(r,this.isActivatable);e.preventDefault();const n=this.isRtl();let o=null;switch(t){case $t.ArrowDown:case n?$t.ArrowLeft:$t.ArrowRight:o=Et(r,i,this.isActivatable,this.wrapNavigation());break;case $t.ArrowUp:case n?$t.ArrowRight:$t.ArrowLeft:o=It(r,i,this.isActivatable,this.wrapNavigation());break;case $t.Home:o=Ct(r,this.isActivatable);break;case $t.End:o=St(r,this.isActivatable)}o&&i&&i.item!==o&&(i.item.tabIndex=-1)},this.onDeactivateItems=()=>{const e=this.items;for(const t of e)this.deactivateItem(t)},this.onRequestActivation=e=>{this.onDeactivateItems();const t=e.target;this.activateItem(t),t.focus()},this.onSlotchange=()=>{const e=this.items;let t=!1;for(const r of e){!(!r.disabled&&r.tabIndex>-1)||t?r.tabIndex=-1:(t=!0,r.tabIndex=0)}if(t)return;const r=Pt(e,this.isActivatable);r&&(r.tabIndex=0)};const{isItem:t,getPossibleItems:r,isRtl:i,deactivateItem:n,activateItem:o,isNavigableKey:s,isActivatable:a,wrapNavigation:l}=e;this.isItem=t,this.getPossibleItems=r,this.isRtl=i,this.deactivateItem=n,this.activateItem=o,this.isNavigableKey=s,this.isActivatable=a,this.wrapNavigation=l??(()=>!0)}get items(){const e=this.getPossibleItems(),t=[];for(const r of e){if(this.isItem(r)){t.push(r);continue}const e=r.item;e&&this.isItem(e)&&t.push(e)}return t}activateNextItem(){const e=this.items,t=At(e,this.isActivatable);return t&&(t.item.tabIndex=-1),Et(e,t,this.isActivatable,this.wrapNavigation())}activatePreviousItem(){const e=this.items,t=At(e,this.isActivatable);return t&&(t.item.tabIndex=-1),It(e,t,this.isActivatable,this.wrapNavigation())}}
/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Dt=new Set(Object.values($t));class zt extends ae{get items(){return this.listController.items}constructor(){super(),this.listController=new Nt({isItem:e=>e.hasAttribute("md-list-item"),getPossibleItems:()=>this.slotItems,isRtl:()=>"rtl"===getComputedStyle(this).direction,deactivateItem:e=>{e.tabIndex=-1},activateItem:e=>{e.tabIndex=0},isNavigableKey:e=>Dt.has(e),isActivatable:e=>!e.disabled&&"text"!==e.type}),this.internals=this.attachInternals(),this.internals.role="list",this.addEventListener("keydown",this.listController.handleKeydown)}render(){return V` <slot @deactivate-items="${this.listController.onDeactivateItems}" @request-activation="${this.listController.onRequestActivation}" @slotchange="${this.listController.onSlotchange}"> </slot> `}activateNextItem(){return this.listController.activateNextItem()}activatePreviousItem(){return this.listController.activatePreviousItem()}}we([be({flatten:!0})],zt.prototype,"slotItems",void 0);
/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
const Bt=o`:host{background:var(--md-list-container-color,var(--md-sys-color-surface,#fef7ff));color:unset;display:flex;flex-direction:column;outline:0;padding:8px 0;position:relative}`
/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */;let Ft=class extends zt{};Ft.styles=[Bt],Ft=we([ce("md-list")],Ft);
/**
 * @license
 * Copyright 2022 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
class Ut extends ae{render(){return V`<slot></slot>`}connectedCallback(){super.connectedCallback();"false"!==this.getAttribute("aria-hidden")?this.setAttribute("aria-hidden","true"):this.removeAttribute("aria-hidden")}}
/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Vt=o`:host{font-size:var(--md-icon-size,24px);width:var(--md-icon-size,24px);height:var(--md-icon-size,24px);color:inherit;font-variation-settings:inherit;font-weight:400;font-family:var(--md-icon-font,Material Symbols Outlined);display:inline-flex;font-style:normal;place-items:center;place-content:center;line-height:1;overflow:hidden;letter-spacing:normal;text-transform:none;user-select:none;white-space:nowrap;word-wrap:normal;flex-shrink:0;-webkit-font-smoothing:antialiased;text-rendering:optimizeLegibility;-moz-osx-font-smoothing:grayscale}::slotted(svg){fill:currentColor}::slotted(*){height:100%;width:100%}`
/**
 * @license
 * Copyright 2022 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */;let jt=class extends Ut{};jt.styles=[Vt],jt=we([ce("md-icon")],jt);
/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
const Gt=Symbol("internals"),Ht=Symbol("privateInternals");function Wt(e){return class extends e{get[Gt](){return this[Ht]||(this[Ht]=this.attachInternals()),this[Ht]}}}
/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function qt(e){e.addInitializer((e=>{const t=e;t.addEventListener("click",(async e=>{const{type:r,[Gt]:i}=t,{form:n}=i;n&&"button"!==r&&(await new Promise((e=>{setTimeout(e)})),e.defaultPrevented||("reset"!==r?(n.addEventListener("submit",(e=>{Object.defineProperty(e,"submitter",{configurable:!0,enumerable:!0,get:()=>t})}),{capture:!0,once:!0}),i.setFormValue(t.value),n.requestSubmit()):n.reset()))}))}))}
/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Yt=Wt(ae);class Jt extends Yt{constructor(){super(...arguments),this.disabled=!1,this.flipIconInRtl=!1,this.href="",this.target="",this.ariaLabelSelected="",this.toggle=!1,this.selected=!1,this.type="submit",this.value="",this.flipIcon=Le(this,this.flipIconInRtl)}get name(){return this.getAttribute("name")??""}set name(e){this.setAttribute("name",e)}get form(){return this[Gt].form}get labels(){return this[Gt].labels}willUpdate(){this.href&&(this.disabled=!1)}render(){const e=this.href?wt`div`:wt`button`,{ariaLabel:t,ariaHasPopup:r,ariaExpanded:i}=this,n=t&&this.ariaLabelSelected,o=this.toggle?this.selected:G;let s=G;return this.href||(s=n&&this.selected?this.ariaLabelSelected:t),kt`<${e}
        class="icon-button ${Je(this.getRenderClasses())}"
        id="button"
        aria-label="${s||G}"
        aria-haspopup="${!this.href&&r||G}"
        aria-expanded="${!this.href&&i||G}"
        aria-pressed="${o}"
        ?disabled="${!this.href&&this.disabled}"
        @click="${this.handleClick}">
        ${this.renderFocusRing()}
        ${this.renderRipple()}
        ${this.selected?G:this.renderIcon()}
        ${this.selected?this.renderSelectedIcon():G}
        ${this.renderTouchTarget()}
        ${this.href&&this.renderLink()}
  </${e}>`}renderLink(){const{ariaLabel:e}=this;return V` <a class="link" id="link" href="${this.href}" target="${this.target||G}" aria-label="${e||G}"></a> `}getRenderClasses(){return{"flip-icon":this.flipIcon,selected:this.toggle&&this.selected}}renderIcon(){return V`<span class="icon"><slot></slot></span>`}renderSelectedIcon(){return V`<span class="icon icon--selected"><slot name="selected"><slot></slot></slot></span>`}renderTouchTarget(){return V`<span class="touch"></span>`}renderFocusRing(){return V`<md-focus-ring part="focus-ring" for="${this.href?"link":"button"}"></md-focus-ring>`}renderRipple(){return V`<md-ripple for="${this.href?"link":G}" ?disabled="${!this.href&&this.disabled}"></md-ripple>`}connectedCallback(){this.flipIcon=Le(this,this.flipIconInRtl),super.connectedCallback()}async handleClick(e){await 0,!this.toggle||this.disabled||e.defaultPrevented||(this.selected=!this.selected,this.dispatchEvent(new InputEvent("input",{bubbles:!0,composed:!0})),this.dispatchEvent(new Event("change",{bubbles:!0})))}}Ie(Jt),qt(Jt),Jt.formAssociated=!0,Jt.shadowRootOptions={mode:"open",delegatesFocus:!0},we([ue({type:Boolean,reflect:!0})],Jt.prototype,"disabled",void 0),we([ue({type:Boolean,attribute:"flip-icon-in-rtl"})],Jt.prototype,"flipIconInRtl",void 0),we([ue()],Jt.prototype,"href",void 0),we([ue()],Jt.prototype,"target",void 0),we([ue({attribute:"aria-label-selected"})],Jt.prototype,"ariaLabelSelected",void 0),we([ue({type:Boolean})],Jt.prototype,"toggle",void 0),we([ue({type:Boolean,reflect:!0})],Jt.prototype,"selected",void 0),we([ue()],Jt.prototype,"type",void 0),we([ue({reflect:!0})],Jt.prototype,"value",void 0),we([pe()],Jt.prototype,"flipIcon",void 0);
/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
const Xt=o`:host{display:inline-flex;outline:0;-webkit-tap-highlight-color:transparent;height:var(--_container-height);width:var(--_container-width);justify-content:center}:host([touch-target=wrapper]){margin:max(0,(48px - var(--_container-height))/2) max(0,(48px - var(--_container-width))/2)}md-focus-ring{--md-focus-ring-shape-start-start:var(--_container-shape-start-start);--md-focus-ring-shape-start-end:var(--_container-shape-start-end);--md-focus-ring-shape-end-end:var(--_container-shape-end-end);--md-focus-ring-shape-end-start:var(--_container-shape-end-start)}:host([disabled]){pointer-events:none}.icon-button{place-items:center;background:0 0;border:none;box-sizing:border-box;cursor:pointer;display:flex;place-content:center;outline:0;padding:0;position:relative;text-decoration:none;user-select:none;z-index:0;flex:1;border-start-start-radius:var(--_container-shape-start-start);border-start-end-radius:var(--_container-shape-start-end);border-end-start-radius:var(--_container-shape-end-start);border-end-end-radius:var(--_container-shape-end-end)}.icon ::slotted(*){font-size:var(--_icon-size);height:var(--_icon-size);width:var(--_icon-size);font-weight:inherit}md-ripple{z-index:-1;border-start-start-radius:var(--_container-shape-start-start);border-start-end-radius:var(--_container-shape-start-end);border-end-start-radius:var(--_container-shape-end-start);border-end-end-radius:var(--_container-shape-end-end)}.flip-icon .icon{transform:scaleX(-1)}.icon{display:inline-flex}.link{height:100%;outline:0;position:absolute;width:100%}.touch{position:absolute;height:max(48px,100%);width:max(48px,100%)}:host([touch-target=none]) .touch{display:none}@media(forced-colors:active){:host([disabled]){--_disabled-icon-opacity:1}}`
/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */,Zt=o`:host{--_disabled-icon-color:var(--md-icon-button-disabled-icon-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-icon-opacity:var(--md-icon-button-disabled-icon-opacity, 0.38);--_icon-size:var(--md-icon-button-icon-size, 24px);--_selected-focus-icon-color:var(--md-icon-button-selected-focus-icon-color, var(--md-sys-color-primary, #6750a4));--_selected-hover-icon-color:var(--md-icon-button-selected-hover-icon-color, var(--md-sys-color-primary, #6750a4));--_selected-hover-state-layer-color:var(--md-icon-button-selected-hover-state-layer-color, var(--md-sys-color-primary, #6750a4));--_selected-hover-state-layer-opacity:var(--md-icon-button-selected-hover-state-layer-opacity, 0.08);--_selected-icon-color:var(--md-icon-button-selected-icon-color, var(--md-sys-color-primary, #6750a4));--_selected-pressed-icon-color:var(--md-icon-button-selected-pressed-icon-color, var(--md-sys-color-primary, #6750a4));--_selected-pressed-state-layer-color:var(--md-icon-button-selected-pressed-state-layer-color, var(--md-sys-color-primary, #6750a4));--_selected-pressed-state-layer-opacity:var(--md-icon-button-selected-pressed-state-layer-opacity, 0.12);--_state-layer-height:var(--md-icon-button-state-layer-height, 40px);--_state-layer-shape:var(--md-icon-button-state-layer-shape, var(--md-sys-shape-corner-full, 9999px));--_state-layer-width:var(--md-icon-button-state-layer-width, 40px);--_focus-icon-color:var(--md-icon-button-focus-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_hover-icon-color:var(--md-icon-button-hover-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_hover-state-layer-color:var(--md-icon-button-hover-state-layer-color, var(--md-sys-color-on-surface-variant, #49454f));--_hover-state-layer-opacity:var(--md-icon-button-hover-state-layer-opacity, 0.08);--_icon-color:var(--md-icon-button-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_pressed-icon-color:var(--md-icon-button-pressed-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_pressed-state-layer-color:var(--md-icon-button-pressed-state-layer-color, var(--md-sys-color-on-surface-variant, #49454f));--_pressed-state-layer-opacity:var(--md-icon-button-pressed-state-layer-opacity, 0.12);--_container-shape-start-start:0;--_container-shape-start-end:0;--_container-shape-end-end:0;--_container-shape-end-start:0;--_container-height:0;--_container-width:0;height:var(--_state-layer-height);width:var(--_state-layer-width)}:host([touch-target=wrapper]){margin:max(0,(48px - var(--_state-layer-height))/2) max(0,(48px - var(--_state-layer-width))/2)}md-focus-ring{--md-focus-ring-shape-start-start:var(--_state-layer-shape);--md-focus-ring-shape-start-end:var(--_state-layer-shape);--md-focus-ring-shape-end-end:var(--_state-layer-shape);--md-focus-ring-shape-end-start:var(--_state-layer-shape)}.standard{background-color:rgba(0,0,0,0);color:var(--_icon-color);--md-ripple-hover-color:var(--_hover-state-layer-color);--md-ripple-hover-opacity:var(--_hover-state-layer-opacity);--md-ripple-pressed-color:var(--_pressed-state-layer-color);--md-ripple-pressed-opacity:var(--_pressed-state-layer-opacity)}.standard:hover{color:var(--_hover-icon-color)}.standard:focus{color:var(--_focus-icon-color)}.standard:active{color:var(--_pressed-icon-color)}.standard:disabled{color:var(--_disabled-icon-color)}md-ripple{border-radius:var(--_state-layer-shape)}.standard:disabled .icon{opacity:var(--_disabled-icon-opacity)}.selected{--md-ripple-hover-color:var(--_selected-hover-state-layer-color);--md-ripple-hover-opacity:var(--_selected-hover-state-layer-opacity);--md-ripple-pressed-color:var(--_selected-pressed-state-layer-color);--md-ripple-pressed-opacity:var(--_selected-pressed-state-layer-opacity)}.selected:not(:disabled){color:var(--_selected-icon-color)}.selected:not(:disabled):hover{color:var(--_selected-hover-icon-color)}.selected:not(:disabled):focus{color:var(--_selected-focus-icon-color)}.selected:not(:disabled):active{color:var(--_selected-pressed-icon-color)}`
/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */;let Qt=class extends Jt{getRenderClasses(){return{...super.getRenderClasses(),standard:!0}}};Qt.styles=[Xt,Zt],Qt=we([ce("md-icon-button")],Qt);
/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
const Kt=o`:host{--_container-height:var(--md-outlined-icon-button-container-height, 40px);--_container-width:var(--md-outlined-icon-button-container-width, 40px);--_disabled-icon-color:var(--md-outlined-icon-button-disabled-icon-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-icon-opacity:var(--md-outlined-icon-button-disabled-icon-opacity, 0.38);--_disabled-selected-container-color:var(--md-outlined-icon-button-disabled-selected-container-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-selected-container-opacity:var(--md-outlined-icon-button-disabled-selected-container-opacity, 0.12);--_hover-state-layer-opacity:var(--md-outlined-icon-button-hover-state-layer-opacity, 0.08);--_icon-size:var(--md-outlined-icon-button-icon-size, 24px);--_pressed-state-layer-opacity:var(--md-outlined-icon-button-pressed-state-layer-opacity, 0.12);--_selected-container-color:var(--md-outlined-icon-button-selected-container-color, var(--md-sys-color-inverse-surface, #322f35));--_selected-focus-icon-color:var(--md-outlined-icon-button-selected-focus-icon-color, var(--md-sys-color-inverse-on-surface, #f5eff7));--_selected-hover-icon-color:var(--md-outlined-icon-button-selected-hover-icon-color, var(--md-sys-color-inverse-on-surface, #f5eff7));--_selected-hover-state-layer-color:var(--md-outlined-icon-button-selected-hover-state-layer-color, var(--md-sys-color-inverse-on-surface, #f5eff7));--_selected-icon-color:var(--md-outlined-icon-button-selected-icon-color, var(--md-sys-color-inverse-on-surface, #f5eff7));--_selected-pressed-icon-color:var(--md-outlined-icon-button-selected-pressed-icon-color, var(--md-sys-color-inverse-on-surface, #f5eff7));--_selected-pressed-state-layer-color:var(--md-outlined-icon-button-selected-pressed-state-layer-color, var(--md-sys-color-inverse-on-surface, #f5eff7));--_disabled-outline-color:var(--md-outlined-icon-button-disabled-outline-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-outline-opacity:var(--md-outlined-icon-button-disabled-outline-opacity, 0.12);--_focus-icon-color:var(--md-outlined-icon-button-focus-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_hover-icon-color:var(--md-outlined-icon-button-hover-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_hover-state-layer-color:var(--md-outlined-icon-button-hover-state-layer-color, var(--md-sys-color-on-surface-variant, #49454f));--_icon-color:var(--md-outlined-icon-button-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_outline-color:var(--md-outlined-icon-button-outline-color, var(--md-sys-color-outline, #79747e));--_outline-width:var(--md-outlined-icon-button-outline-width, 1px);--_pressed-icon-color:var(--md-outlined-icon-button-pressed-icon-color, var(--md-sys-color-on-surface, #1d1b20));--_pressed-state-layer-color:var(--md-outlined-icon-button-pressed-state-layer-color, var(--md-sys-color-on-surface, #1d1b20));--_container-shape-start-start:var(--md-outlined-icon-button-container-shape-start-start, var(--md-outlined-icon-button-container-shape, var(--md-sys-shape-corner-full, 9999px)));--_container-shape-start-end:var(--md-outlined-icon-button-container-shape-start-end, var(--md-outlined-icon-button-container-shape, var(--md-sys-shape-corner-full, 9999px)));--_container-shape-end-end:var(--md-outlined-icon-button-container-shape-end-end, var(--md-outlined-icon-button-container-shape, var(--md-sys-shape-corner-full, 9999px)));--_container-shape-end-start:var(--md-outlined-icon-button-container-shape-end-start, var(--md-outlined-icon-button-container-shape, var(--md-sys-shape-corner-full, 9999px)))}.outlined{background-color:rgba(0,0,0,0);color:var(--_icon-color);--md-ripple-hover-color:var(--_hover-state-layer-color);--md-ripple-hover-opacity:var(--_hover-state-layer-opacity);--md-ripple-pressed-color:var(--_pressed-state-layer-color);--md-ripple-pressed-opacity:var(--_pressed-state-layer-opacity)}.outlined::before{border-color:var(--_outline-color);border-width:var(--_outline-width)}.outlined:hover{color:var(--_hover-icon-color)}.outlined:focus{color:var(--_focus-icon-color)}.outlined:active{color:var(--_pressed-icon-color)}.outlined:disabled{color:var(--_disabled-icon-color)}.outlined:disabled::before{border-color:var(--_disabled-outline-color);opacity:var(--_disabled-outline-opacity)}.outlined:disabled .icon{opacity:var(--_disabled-icon-opacity)}.outlined::before{block-size:100%;border-style:solid;border-radius:inherit;box-sizing:border-box;content:"";inline-size:100%;inset:0;pointer-events:none;position:absolute;z-index:-1}.outlined.selected::before{border-width:0}.selected{--md-ripple-hover-color:var(--_selected-hover-state-layer-color);--md-ripple-hover-opacity:var(--_hover-state-layer-opacity);--md-ripple-pressed-color:var(--_selected-pressed-state-layer-color);--md-ripple-pressed-opacity:var(--_pressed-state-layer-opacity)}.selected:not(:disabled){color:var(--_selected-icon-color)}.selected:not(:disabled):hover{color:var(--_selected-hover-icon-color)}.selected:not(:disabled):focus{color:var(--_selected-focus-icon-color)}.selected:not(:disabled):active{color:var(--_selected-pressed-icon-color)}.selected:not(:disabled)::before{background-color:var(--_selected-container-color)}.selected:disabled::before{background-color:var(--_disabled-selected-container-color);opacity:var(--_disabled-selected-container-opacity)}@media(forced-colors:active){:host([disabled]){--_disabled-outline-opacity:1}.selected::before{border-color:CanvasText;border-width:var(--_outline-width)}.selected:disabled::before{border-color:GrayText;opacity:1}}`
/**
 * @license
 * Copyright 2022 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */;let er=class extends Jt{getRenderClasses(){return{...super.getRenderClasses(),outlined:!0}}};
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function tr(e){return e<0?-1:0===e?0:1}function rr(e,t,r){return(1-r)*e+r*t}function ir(e,t,r){return r<e?e:r>t?t:r}function nr(e){return(e%=360)<0&&(e+=360),e}function or(e){return(e%=360)<0&&(e+=360),e}function sr(e,t){return 180-Math.abs(Math.abs(e-t)-180)}function ar(e,t){return[e[0]*t[0][0]+e[1]*t[0][1]+e[2]*t[0][2],e[0]*t[1][0]+e[1]*t[1][1]+e[2]*t[1][2],e[0]*t[2][0]+e[1]*t[2][1]+e[2]*t[2][2]]}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */er.styles=[Xt,Kt],er=we([ce("md-outlined-icon-button")],er);const lr=[[.41233895,.35762064,.18051042],[.2126,.7152,.0722],[.01932141,.11916382,.95034478]],cr=[[3.2413774792388685,-1.5376652402851851,-.49885366846268053],[-.9691452513005321,1.8758853451067872,.04156585616912061],[.05562093689691305,-.20395524564742123,1.0571799111220335]],dr=[95.047,100,108.883];function hr(e,t,r){return(255<<24|(255&e)<<16|(255&t)<<8|255&r)>>>0}function ur(e){return hr(_r(e[0]),_r(e[1]),_r(e[2]))}function pr(e){return e>>16&255}function fr(e){return e>>8&255}function mr(e){return 255&e}function gr(e,t,r){const i=cr,n=i[0][0]*e+i[0][1]*t+i[0][2]*r,o=i[1][0]*e+i[1][1]*t+i[1][2]*r,s=i[2][0]*e+i[2][1]*t+i[2][2]*r;return hr(_r(n),_r(o),_r(s))}function vr(e){const t=wr(pr(e)),r=wr(fr(e)),i=wr(mr(e)),n=lr,o=n[0][0]*t+n[0][1]*r+n[0][2]*i,s=n[1][0]*t+n[1][1]*r+n[1][2]*i,a=n[2][0]*t+n[2][1]*r+n[2][2]*i,l=s/dr[1],c=a/dr[2],d=kr(o/dr[0]),h=kr(l);return[116*h-16,500*(d-h),200*(h-kr(c))]}function br(e){const t=function(e){return ar([wr(pr(e)),wr(fr(e)),wr(mr(e))],lr)}(e)[1];return 116*kr(t/100)-16}function yr(e){return 100*Cr((e+16)/116)}function xr(e){return 116*kr(e/100)-16}function wr(e){const t=e/255;return t<=.040449936?t/12.92*100:100*Math.pow((t+.055)/1.055,2.4)}function _r(e){const t=e/100;let r=0;return r=t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055,function(e,t,r){return r<e?e:r>t?t:r}(0,255,Math.round(255*r))}function kr(e){const t=24389/27;return e>216/24389?Math.pow(e,1/3):(t*e+16)/116}function Cr(e){const t=e*e*e;return t>216/24389?t:(116*e-16)/(24389/27)}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr{static make(e=function(){return dr}(),t=200/Math.PI*yr(50)/100,r=50,i=2,n=!1){const o=e,s=.401288*o[0]+.650173*o[1]+-.051461*o[2],a=-.250268*o[0]+1.204414*o[1]+.045854*o[2],l=-.002079*o[0]+.048952*o[1]+.953127*o[2],c=.8+i/10,d=c>=.9?rr(.59,.69,10*(c-.9)):rr(.525,.59,10*(c-.8));let h=n?1:c*(1-1/3.6*Math.exp((-t-42)/92));h=h>1?1:h<0?0:h;const u=c,p=[h*(100/s)+1-h,h*(100/a)+1-h,h*(100/l)+1-h],f=1/(5*t+1),m=f*f*f*f,g=1-m,v=m*t+.1*g*g*Math.cbrt(5*t),b=yr(r)/e[1],y=1.48+Math.sqrt(b),x=.725/Math.pow(b,.2),w=x,_=[Math.pow(v*p[0]*s/100,.42),Math.pow(v*p[1]*a/100,.42),Math.pow(v*p[2]*l/100,.42)],k=[400*_[0]/(_[0]+27.13),400*_[1]/(_[1]+27.13),400*_[2]/(_[2]+27.13)];return new Sr(b,(2*k[0]+k[1]+.05*k[2])*x,x,w,d,u,p,v,Math.pow(v,.25),y)}constructor(e,t,r,i,n,o,s,a,l,c){this.n=e,this.aw=t,this.nbb=r,this.ncb=i,this.c=n,this.nc=o,this.rgbD=s,this.fl=a,this.fLRoot=l,this.z=c}}Sr.DEFAULT=Sr.make();
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Ar{constructor(e,t,r,i,n,o,s,a,l){this.hue=e,this.chroma=t,this.j=r,this.q=i,this.m=n,this.s=o,this.jstar=s,this.astar=a,this.bstar=l}distance(e){const t=this.jstar-e.jstar,r=this.astar-e.astar,i=this.bstar-e.bstar,n=Math.sqrt(t*t+r*r+i*i);return 1.41*Math.pow(n,.63)}static fromInt(e){return Ar.fromIntInViewingConditions(e,Sr.DEFAULT)}static fromIntInViewingConditions(e,t){const r=(65280&e)>>8,i=255&e,n=wr((16711680&e)>>16),o=wr(r),s=wr(i),a=.41233895*n+.35762064*o+.18051042*s,l=.2126*n+.7152*o+.0722*s,c=.01932141*n+.11916382*o+.95034478*s,d=.401288*a+.650173*l-.051461*c,h=-.250268*a+1.204414*l+.045854*c,u=-.002079*a+.048952*l+.953127*c,p=t.rgbD[0]*d,f=t.rgbD[1]*h,m=t.rgbD[2]*u,g=Math.pow(t.fl*Math.abs(p)/100,.42),v=Math.pow(t.fl*Math.abs(f)/100,.42),b=Math.pow(t.fl*Math.abs(m)/100,.42),y=400*tr(p)*g/(g+27.13),x=400*tr(f)*v/(v+27.13),w=400*tr(m)*b/(b+27.13),_=(11*y+-12*x+w)/11,k=(y+x-2*w)/9,C=(20*y+20*x+21*w)/20,S=(40*y+20*x+w)/20,A=180*Math.atan2(k,_)/Math.PI,P=A<0?A+360:A>=360?A-360:A,T=P*Math.PI/180,E=S*t.nbb,I=100*Math.pow(E/t.aw,t.c*t.z),L=4/t.c*Math.sqrt(I/100)*(t.aw+4)*t.fLRoot,O=P<20.14?P+360:P,M=5e4/13*(.25*(Math.cos(O*Math.PI/180+2)+3.8))*t.nc*t.ncb*Math.sqrt(_*_+k*k)/(C+.305),R=Math.pow(M,.9)*Math.pow(1.64-Math.pow(.29,t.n),.73),$=R*Math.sqrt(I/100),N=$*t.fLRoot,D=50*Math.sqrt(R*t.c/(t.aw+4)),z=(1+100*.007)*I/(1+.007*I),B=1/.0228*Math.log(1+.0228*N),F=B*Math.cos(T),U=B*Math.sin(T);return new Ar(P,$,I,L,N,D,z,F,U)}static fromJch(e,t,r){return Ar.fromJchInViewingConditions(e,t,r,Sr.DEFAULT)}static fromJchInViewingConditions(e,t,r,i){const n=4/i.c*Math.sqrt(e/100)*(i.aw+4)*i.fLRoot,o=t*i.fLRoot,s=t/Math.sqrt(e/100),a=50*Math.sqrt(s*i.c/(i.aw+4)),l=r*Math.PI/180,c=(1+100*.007)*e/(1+.007*e),d=1/.0228*Math.log(1+.0228*o),h=d*Math.cos(l),u=d*Math.sin(l);return new Ar(r,t,e,n,o,a,c,h,u)}static fromUcs(e,t,r){return Ar.fromUcsInViewingConditions(e,t,r,Sr.DEFAULT)}static fromUcsInViewingConditions(e,t,r,i){const n=t,o=r,s=Math.sqrt(n*n+o*o),a=(Math.exp(.0228*s)-1)/.0228/i.fLRoot;let l=Math.atan2(o,n)*(180/Math.PI);l<0&&(l+=360);const c=e/(1-.007*(e-100));return Ar.fromJchInViewingConditions(c,a,l,i)}toInt(){return this.viewed(Sr.DEFAULT)}viewed(e){const t=0===this.chroma||0===this.j?0:this.chroma/Math.sqrt(this.j/100),r=Math.pow(t/Math.pow(1.64-Math.pow(.29,e.n),.73),1/.9),i=this.hue*Math.PI/180,n=.25*(Math.cos(i+2)+3.8),o=e.aw*Math.pow(this.j/100,1/e.c/e.z),s=n*(5e4/13)*e.nc*e.ncb,a=o/e.nbb,l=Math.sin(i),c=Math.cos(i),d=23*(a+.305)*r/(23*s+11*r*c+108*r*l),h=d*c,u=d*l,p=(460*a+451*h+288*u)/1403,f=(460*a-891*h-261*u)/1403,m=(460*a-220*h-6300*u)/1403,g=Math.max(0,27.13*Math.abs(p)/(400-Math.abs(p))),v=tr(p)*(100/e.fl)*Math.pow(g,1/.42),b=Math.max(0,27.13*Math.abs(f)/(400-Math.abs(f))),y=tr(f)*(100/e.fl)*Math.pow(b,1/.42),x=Math.max(0,27.13*Math.abs(m)/(400-Math.abs(m))),w=tr(m)*(100/e.fl)*Math.pow(x,1/.42),_=v/e.rgbD[0],k=y/e.rgbD[1],C=w/e.rgbD[2];return gr(1.86206786*_-1.01125463*k+.14918677*C,.38752654*_+.62144744*k-.00897398*C,-.0158415*_-.03412294*k+1.04996444*C)}static fromXyzInViewingConditions(e,t,r,i){const n=.401288*e+.650173*t-.051461*r,o=-.250268*e+1.204414*t+.045854*r,s=-.002079*e+.048952*t+.953127*r,a=i.rgbD[0]*n,l=i.rgbD[1]*o,c=i.rgbD[2]*s,d=Math.pow(i.fl*Math.abs(a)/100,.42),h=Math.pow(i.fl*Math.abs(l)/100,.42),u=Math.pow(i.fl*Math.abs(c)/100,.42),p=400*tr(a)*d/(d+27.13),f=400*tr(l)*h/(h+27.13),m=400*tr(c)*u/(u+27.13),g=(11*p+-12*f+m)/11,v=(p+f-2*m)/9,b=(20*p+20*f+21*m)/20,y=(40*p+20*f+m)/20,x=180*Math.atan2(v,g)/Math.PI,w=x<0?x+360:x>=360?x-360:x,_=w*Math.PI/180,k=y*i.nbb,C=100*Math.pow(k/i.aw,i.c*i.z),S=4/i.c*Math.sqrt(C/100)*(i.aw+4)*i.fLRoot,A=w<20.14?w+360:w,P=5e4/13*(1/4*(Math.cos(A*Math.PI/180+2)+3.8))*i.nc*i.ncb*Math.sqrt(g*g+v*v)/(b+.305),T=Math.pow(P,.9)*Math.pow(1.64-Math.pow(.29,i.n),.73),E=T*Math.sqrt(C/100),I=E*i.fLRoot,L=50*Math.sqrt(T*i.c/(i.aw+4)),O=(1+100*.007)*C/(1+.007*C),M=Math.log(1+.0228*I)/.0228,R=M*Math.cos(_),$=M*Math.sin(_);return new Ar(w,E,C,S,I,L,O,R,$)}xyzInViewingConditions(e){const t=0===this.chroma||0===this.j?0:this.chroma/Math.sqrt(this.j/100),r=Math.pow(t/Math.pow(1.64-Math.pow(.29,e.n),.73),1/.9),i=this.hue*Math.PI/180,n=.25*(Math.cos(i+2)+3.8),o=e.aw*Math.pow(this.j/100,1/e.c/e.z),s=n*(5e4/13)*e.nc*e.ncb,a=o/e.nbb,l=Math.sin(i),c=Math.cos(i),d=23*(a+.305)*r/(23*s+11*r*c+108*r*l),h=d*c,u=d*l,p=(460*a+451*h+288*u)/1403,f=(460*a-891*h-261*u)/1403,m=(460*a-220*h-6300*u)/1403,g=Math.max(0,27.13*Math.abs(p)/(400-Math.abs(p))),v=tr(p)*(100/e.fl)*Math.pow(g,1/.42),b=Math.max(0,27.13*Math.abs(f)/(400-Math.abs(f))),y=tr(f)*(100/e.fl)*Math.pow(b,1/.42),x=Math.max(0,27.13*Math.abs(m)/(400-Math.abs(m))),w=tr(m)*(100/e.fl)*Math.pow(x,1/.42),_=v/e.rgbD[0],k=y/e.rgbD[1],C=w/e.rgbD[2];return[1.86206786*_-1.01125463*k+.14918677*C,.38752654*_+.62144744*k-.00897398*C,-.0158415*_-.03412294*k+1.04996444*C]}}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr{static sanitizeRadians(e){return(e+8*Math.PI)%(2*Math.PI)}static trueDelinearized(e){const t=e/100;let r=0;return r=t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055,255*r}static chromaticAdaptation(e){const t=Math.pow(Math.abs(e),.42);return 400*tr(e)*t/(t+27.13)}static hueOf(e){const t=ar(e,Pr.SCALED_DISCOUNT_FROM_LINRGB),r=Pr.chromaticAdaptation(t[0]),i=Pr.chromaticAdaptation(t[1]),n=Pr.chromaticAdaptation(t[2]),o=(11*r+-12*i+n)/11,s=(r+i-2*n)/9;return Math.atan2(s,o)}static areInCyclicOrder(e,t,r){return Pr.sanitizeRadians(t-e)<Pr.sanitizeRadians(r-e)}static intercept(e,t,r){return(t-e)/(r-e)}static lerpPoint(e,t,r){return[e[0]+(r[0]-e[0])*t,e[1]+(r[1]-e[1])*t,e[2]+(r[2]-e[2])*t]}static setCoordinate(e,t,r,i){const n=Pr.intercept(e[i],t,r[i]);return Pr.lerpPoint(e,n,r)}static isBounded(e){return 0<=e&&e<=100}static nthVertex(e,t){const r=Pr.Y_FROM_LINRGB[0],i=Pr.Y_FROM_LINRGB[1],n=Pr.Y_FROM_LINRGB[2],o=t%4<=1?0:100,s=t%2==0?0:100;if(t<4){const t=o,a=s,l=(e-t*i-a*n)/r;return Pr.isBounded(l)?[l,t,a]:[-1,-1,-1]}if(t<8){const t=o,a=s,l=(e-a*r-t*n)/i;return Pr.isBounded(l)?[a,l,t]:[-1,-1,-1]}{const t=o,a=s,l=(e-t*r-a*i)/n;return Pr.isBounded(l)?[t,a,l]:[-1,-1,-1]}}static bisectToSegment(e,t){let r=[-1,-1,-1],i=r,n=0,o=0,s=!1,a=!0;for(let l=0;l<12;l++){const c=Pr.nthVertex(e,l);if(c[0]<0)continue;const d=Pr.hueOf(c);s?(a||Pr.areInCyclicOrder(n,d,o))&&(a=!1,Pr.areInCyclicOrder(n,t,d)?(i=c,o=d):(r=c,n=d)):(r=c,i=c,n=d,o=d,s=!0)}return[r,i]}static midpoint(e,t){return[(e[0]+t[0])/2,(e[1]+t[1])/2,(e[2]+t[2])/2]}static criticalPlaneBelow(e){return Math.floor(e-.5)}static criticalPlaneAbove(e){return Math.ceil(e-.5)}static bisectToLimit(e,t){const r=Pr.bisectToSegment(e,t);let i=r[0],n=Pr.hueOf(i),o=r[1];for(let e=0;e<3;e++)if(i[e]!==o[e]){let r=-1,s=255;i[e]<o[e]?(r=Pr.criticalPlaneBelow(Pr.trueDelinearized(i[e])),s=Pr.criticalPlaneAbove(Pr.trueDelinearized(o[e]))):(r=Pr.criticalPlaneAbove(Pr.trueDelinearized(i[e])),s=Pr.criticalPlaneBelow(Pr.trueDelinearized(o[e])));for(let a=0;a<8&&!(Math.abs(s-r)<=1);a++){const a=Math.floor((r+s)/2),l=Pr.CRITICAL_PLANES[a],c=Pr.setCoordinate(i,l,o,e),d=Pr.hueOf(c);Pr.areInCyclicOrder(n,t,d)?(o=c,s=a):(i=c,n=d,r=a)}}return Pr.midpoint(i,o)}static inverseChromaticAdaptation(e){const t=Math.abs(e),r=Math.max(0,27.13*t/(400-t));return tr(e)*Math.pow(r,1/.42)}static findResultByJ(e,t,r){let i=11*Math.sqrt(r);const n=Sr.DEFAULT,o=1/Math.pow(1.64-Math.pow(.29,n.n),.73),s=.25*(Math.cos(e+2)+3.8)*(5e4/13)*n.nc*n.ncb,a=Math.sin(e),l=Math.cos(e);for(let e=0;e<5;e++){const c=i/100,d=0===t||0===i?0:t/Math.sqrt(c),h=Math.pow(d*o,1/.9),u=n.aw*Math.pow(c,1/n.c/n.z)/n.nbb,p=23*(u+.305)*h/(23*s+11*h*l+108*h*a),f=p*l,m=p*a,g=(460*u+451*f+288*m)/1403,v=(460*u-891*f-261*m)/1403,b=(460*u-220*f-6300*m)/1403,y=ar([Pr.inverseChromaticAdaptation(g),Pr.inverseChromaticAdaptation(v),Pr.inverseChromaticAdaptation(b)],Pr.LINRGB_FROM_SCALED_DISCOUNT);if(y[0]<0||y[1]<0||y[2]<0)return 0;const x=Pr.Y_FROM_LINRGB[0],w=Pr.Y_FROM_LINRGB[1],_=Pr.Y_FROM_LINRGB[2],k=x*y[0]+w*y[1]+_*y[2];if(k<=0)return 0;if(4===e||Math.abs(k-r)<.002)return y[0]>100.01||y[1]>100.01||y[2]>100.01?0:ur(y);i-=(k-r)*i/(2*k)}return 0}static solveToInt(e,t,r){if(t<1e-4||r<1e-4||r>99.9999)return function(e){const t=_r(yr(e));return hr(t,t,t)}(r);const i=(e=or(e))/180*Math.PI,n=yr(r),o=Pr.findResultByJ(i,t,n);if(0!==o)return o;return ur(Pr.bisectToLimit(n,i))}static solveToCam(e,t,r){return Ar.fromInt(Pr.solveToInt(e,t,r))}}Pr.SCALED_DISCOUNT_FROM_LINRGB=[[.001200833568784504,.002389694492170889,.0002795742885861124],[.0005891086651375999,.0029785502573438758,.0003270666104008398],[.00010146692491640572,.0005364214359186694,.0032979401770712076]],Pr.LINRGB_FROM_SCALED_DISCOUNT=[[1373.2198709594231,-1100.4251190754821,-7.278681089101213],[-271.815969077903,559.6580465940733,-32.46047482791194],[1.9622899599665666,-57.173814538844006,308.7233197812385]],Pr.Y_FROM_LINRGB=[.2126,.7152,.0722],Pr.CRITICAL_PLANES=[.015176349177441876,.045529047532325624,.07588174588720938,.10623444424209313,.13658714259697685,.16693984095186062,.19729253930674434,.2276452376616281,.2579979360165119,.28835063437139563,.3188300904430532,.350925934958123,.3848314933096426,.42057480301049466,.458183274052838,.4976837250274023,.5391024159806381,.5824650784040898,.6277969426914107,.6751227633498623,.7244668422128921,.775853049866786,.829304845476233,.8848452951698498,.942497089126609,1.0022825574869039,1.0642236851973577,1.1283421258858297,1.1946592148522128,1.2631959812511864,1.3339731595349034,1.407011200216447,1.4823302800086415,1.5599503113873272,1.6398909516233677,1.7221716113234105,1.8068114625156377,1.8938294463134073,1.9832442801866852,2.075074464868551,2.1693382909216234,2.2660538449872063,2.36523901573795,2.4669114995532007,2.5710888059345764,2.6777882626779785,2.7870270208169257,2.898822059350997,3.0131901897720907,3.1301480604002863,3.2497121605402226,3.3718988244681087,3.4967242352587946,3.624204428461639,3.754355295633311,3.887192587735158,4.022731918402185,4.160988767090289,4.301978482107941,4.445716283538092,4.592217266055746,4.741496401646282,4.893568542229298,5.048448422192488,5.20615066083972,5.3666897647573375,5.5300801301023865,5.696336044816294,5.865471690767354,6.037501145825082,6.212438385869475,6.390297286737924,6.571091626112461,6.7548350853498045,6.941541251256611,7.131223617812143,7.323895587840543,7.5195704746346665,7.7182615035334345,7.919981813454504,8.124744458384042,8.332562408825165,8.543448553206703,8.757415699253682,8.974476575321063,9.194643831691977,9.417930041841839,9.644347703669503,9.873909240696694,10.106627003236781,10.342513269534024,10.58158024687427,10.8238400726681,11.069304815507364,11.317986476196008,11.569896988756009,11.825048221409341,12.083451977536606,12.345119996613247,12.610063955123938,12.878295467455942,13.149826086772048,13.42466730586372,13.702830557985108,13.984327217668513,14.269168601521828,14.55736596900856,14.848930523210871,15.143873411576273,15.44220572664832,15.743938506781891,16.04908273684337,16.35764934889634,16.66964922287304,16.985093187232053,17.30399201960269,17.62635644741625,17.95219714852476,18.281524751807332,18.614349837764564,18.95068293910138,19.290534541298456,19.633915083172692,19.98083495742689,20.331304511189067,20.685334046541502,21.042933821039977,21.404114048223256,21.76888489811322,22.137256497705877,22.50923893145328,22.884842241736916,23.264076429332462,23.6469514538663,24.033477234264016,24.42366364919083,24.817520537484558,25.21505769858089,25.61628489293138,26.021211842414342,26.429848230738664,26.842203703840827,27.258287870275353,27.678110301598522,28.10168053274597,28.529008062403893,28.96010235337422,29.39497283293396,29.83362889318845,30.276079891419332,30.722335150426627,31.172403958865512,31.62629557157785,32.08401920991837,32.54558406207592,33.010999283389665,33.4802739966603,33.953417292456834,34.430438229418264,34.911345834551085,35.39614910352207,35.88485700094671,36.37747846067349,36.87402238606382,37.37449765026789,37.87891309649659,38.38727753828926,38.89959975977785,39.41588851594697,39.93615253289054,40.460400508064545,40.98864111053629,41.520882981230194,42.05713473317016,42.597404951718396,43.141702194811224,43.6900349931913,44.24241185063697,44.798841244188324,45.35933162437017,45.92389141541209,46.49252901546552,47.065252796817916,47.64207110610409,48.22299226451468,48.808024568002054,49.3971762874833,49.9904556690408,50.587870934119984,51.189430279724725,51.79514187861014,52.40501387947288,53.0190544071392,53.637271562750364,54.259673423945976,54.88626804504493,55.517063457223934,56.15206766869424,56.79128866487574,57.43473440856916,58.08241284012621,58.734331877617365,59.39049941699807,60.05092333227251,60.715611475655585,61.38457167773311,62.057811747619894,62.7353394731159,63.417162620860914,64.10328893648692,64.79372614476921,65.48848194977529,66.18756403501224,66.89098006357258,67.59873767827808,68.31084450182222,69.02730813691093,69.74813616640164,70.47333615344107,71.20291564160104,71.93688215501312,72.67524319850172,73.41800625771542,74.16517879925733,74.9167682708136,75.67278210128072,76.43322770089146,77.1981124613393,77.96744375590167,78.74122893956174,79.51947534912904,80.30219030335869,81.08938110306934,81.88105503125999,82.67721935322541,83.4778813166706,84.28304815182372,85.09272707154808,85.90692527145302,86.72564993000343,87.54890820862819,88.3767072518277,89.2090541872801,90.04595612594655,90.88742016217518,91.73345337380438,92.58406282226491,93.43925555268066,94.29903859396902,95.16341895893969,96.03240364439274,96.9059996312159,97.78421388448044,98.6670533535366,99.55452497210776];
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Tr{static from(e,t,r){return new Tr(Pr.solveToInt(e,t,r))}static fromInt(e){return new Tr(e)}toInt(){return this.argb}get hue(){return this.internalHue}set hue(e){this.setInternalState(Pr.solveToInt(e,this.internalChroma,this.internalTone))}get chroma(){return this.internalChroma}set chroma(e){this.setInternalState(Pr.solveToInt(this.internalHue,e,this.internalTone))}get tone(){return this.internalTone}set tone(e){this.setInternalState(Pr.solveToInt(this.internalHue,this.internalChroma,e))}constructor(e){this.argb=e;const t=Ar.fromInt(e);this.internalHue=t.hue,this.internalChroma=t.chroma,this.internalTone=br(e),this.argb=e}setInternalState(e){const t=Ar.fromInt(e);this.internalHue=t.hue,this.internalChroma=t.chroma,this.internalTone=br(e),this.argb=e}inViewingConditions(e){const t=Ar.fromInt(this.toInt()).xyzInViewingConditions(e),r=Ar.fromXyzInViewingConditions(t[0],t[1],t[2],Sr.make());return Tr.from(r.hue,r.chroma,xr(t[1]))}}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er{static harmonize(e,t){const r=Tr.fromInt(e),i=Tr.fromInt(t),n=sr(r.hue,i.hue),o=Math.min(.5*n,15),s=or(r.hue+o*(a=r.hue,or(i.hue-a)<=180?1:-1));var a;return Tr.from(s,r.chroma,r.tone).toInt()}static hctHue(e,t,r){const i=Er.cam16Ucs(e,t,r),n=Ar.fromInt(i),o=Ar.fromInt(e);return Tr.from(n.hue,o.chroma,br(e)).toInt()}static cam16Ucs(e,t,r){const i=Ar.fromInt(e),n=Ar.fromInt(t),o=i.jstar,s=i.astar,a=i.bstar,l=o+(n.jstar-o)*r,c=s+(n.astar-s)*r,d=a+(n.bstar-a)*r;return Ar.fromUcs(l,c,d).toInt()}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir{static ratioOfTones(e,t){return e=ir(0,100,e),t=ir(0,100,t),Ir.ratioOfYs(yr(e),yr(t))}static ratioOfYs(e,t){const r=e>t?e:t;return(r+5)/((r===t?e:t)+5)}static lighter(e,t){if(e<0||e>100)return-1;const r=yr(e),i=t*(r+5)-5,n=Ir.ratioOfYs(i,r),o=Math.abs(n-t);if(n<t&&o>.04)return-1;const s=xr(i)+.4;return s<0||s>100?-1:s}static darker(e,t){if(e<0||e>100)return-1;const r=yr(e),i=(r+5)/t-5,n=Ir.ratioOfYs(r,i),o=Math.abs(n-t);if(n<t&&o>.04)return-1;const s=xr(i)-.4;return s<0||s>100?-1:s}static lighterUnsafe(e,t){const r=Ir.lighter(e,t);return r<0?100:r}static darkerUnsafe(e,t){const r=Ir.darker(e,t);return r<0?0:r}}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr{static isDisliked(e){const t=Math.round(e.hue)>=90&&Math.round(e.hue)<=111,r=Math.round(e.chroma)>16,i=Math.round(e.tone)<65;return t&&r&&i}static fixIfDisliked(e){return Lr.isDisliked(e)?Tr.from(e.hue,e.chroma,70):e}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Or{static fromPalette(e){return new Or(e.name??"",e.palette,e.tone,e.isBackground??!1,e.background,e.secondBackground,e.contrastCurve,e.toneDeltaPair)}constructor(e,t,r,i,n,o,s,a){if(this.name=e,this.palette=t,this.tone=r,this.isBackground=i,this.background=n,this.secondBackground=o,this.contrastCurve=s,this.toneDeltaPair=a,this.hctCache=new Map,!n&&o)throw new Error(`Color ${e} has secondBackgrounddefined, but background is not defined.`);if(!n&&s)throw new Error(`Color ${e} has contrastCurvedefined, but background is not defined.`);if(n&&!s)throw new Error(`Color ${e} has backgrounddefined, but contrastCurve is not defined.`)}getArgb(e){return this.getHct(e).toInt()}getHct(e){const t=this.hctCache.get(e);if(null!=t)return t;const r=this.getTone(e),i=this.palette(e).getHct(r);return this.hctCache.size>4&&this.hctCache.clear(),this.hctCache.set(e,i),i}getTone(e){const t=e.contrastLevel<0;if(this.toneDeltaPair){const r=this.toneDeltaPair(e),i=r.roleA,n=r.roleB,o=r.delta,s=r.polarity,a=r.stayTogether,l=this.background(e).getTone(e),c="nearer"===s||"lighter"===s&&!e.isDark||"darker"===s&&e.isDark,d=c?i:n,h=c?n:i,u=this.name===d.name,p=e.isDark?1:-1,f=d.contrastCurve.getContrast(e.contrastLevel),m=h.contrastCurve.getContrast(e.contrastLevel),g=d.tone(e);let v=Ir.ratioOfTones(l,g)>=f?g:Or.foregroundTone(l,f);const b=h.tone(e);let y=Ir.ratioOfTones(l,b)>=m?b:Or.foregroundTone(l,m);return t&&(v=Or.foregroundTone(l,f),y=Or.foregroundTone(l,m)),(y-v)*p>=o||(y=ir(0,100,v+o*p),(y-v)*p>=o||(v=ir(0,100,y-o*p))),50<=v&&v<60?p>0?(v=60,y=Math.max(y,v+o*p)):(v=49,y=Math.min(y,v+o*p)):50<=y&&y<60&&(a?p>0?(v=60,y=Math.max(y,v+o*p)):(v=49,y=Math.min(y,v+o*p)):y=p>0?60:49),u?v:y}{let r=this.tone(e);if(null==this.background)return r;const i=this.background(e).getTone(e),n=this.contrastCurve.getContrast(e.contrastLevel);if(Ir.ratioOfTones(i,r)>=n||(r=Or.foregroundTone(i,n)),t&&(r=Or.foregroundTone(i,n)),this.isBackground&&50<=r&&r<60&&(r=Ir.ratioOfTones(49,i)>=n?49:60),this.secondBackground){const[t,i]=[this.background,this.secondBackground],[o,s]=[t(e).getTone(e),i(e).getTone(e)],[a,l]=[Math.max(o,s),Math.min(o,s)];if(Ir.ratioOfTones(a,r)>=n&&Ir.ratioOfTones(l,r)>=n)return r;const c=Ir.lighter(a,n),d=Ir.darker(l,n),h=[];-1!==c&&h.push(c),-1!==d&&h.push(d);return Or.tonePrefersLightForeground(o)||Or.tonePrefersLightForeground(s)?c<0?100:c:1===h.length?h[0]:d<0?0:d}return r}}static foregroundTone(e,t){const r=Ir.lighterUnsafe(e,t),i=Ir.darkerUnsafe(e,t),n=Ir.ratioOfTones(r,e),o=Ir.ratioOfTones(i,e);if(Or.tonePrefersLightForeground(e)){const e=Math.abs(n-o)<.1&&n<t&&o<t;return n>=t||n>=o||e?r:i}return o>=t||o>=n?i:r}static tonePrefersLightForeground(e){return Math.round(e)<60}static toneAllowsLightForeground(e){return Math.round(e)<=49}static enableLightForeground(e){return Or.tonePrefersLightForeground(e)&&!Or.toneAllowsLightForeground(e)?49:e}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Mr;!function(e){e[e.MONOCHROME=0]="MONOCHROME",e[e.NEUTRAL=1]="NEUTRAL",e[e.TONAL_SPOT=2]="TONAL_SPOT",e[e.VIBRANT=3]="VIBRANT",e[e.EXPRESSIVE=4]="EXPRESSIVE",e[e.FIDELITY=5]="FIDELITY",e[e.CONTENT=6]="CONTENT",e[e.RAINBOW=7]="RAINBOW",e[e.FRUIT_SALAD=8]="FRUIT_SALAD"}(Mr||(Mr={}));
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Rr{constructor(e,t,r,i){this.low=e,this.normal=t,this.medium=r,this.high=i}getContrast(e){return e<=-1?this.low:e<0?rr(this.low,this.normal,(e- -1)/1):e<.5?rr(this.normal,this.medium,(e-0)/.5):e<1?rr(this.medium,this.high,(e-.5)/.5):this.high}}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $r{constructor(e,t,r,i,n){this.roleA=e,this.roleB=t,this.delta=r,this.polarity=i,this.stayTogether=n}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nr(e){return e.variant===Mr.FIDELITY||e.variant===Mr.CONTENT}function Dr(e){return e.variant===Mr.MONOCHROME}function zr(e,t){const r=e.inViewingConditions(function(e){return Sr.make(void 0,void 0,e.isDark?30:80,void 0,void 0)}(t));return Or.tonePrefersLightForeground(e.tone)&&!Or.toneAllowsLightForeground(r.tone)?Or.enableLightForeground(e.tone):Or.enableLightForeground(r.tone)}class Br{static highestSurface(e){return e.isDark?Br.surfaceBright:Br.surfaceDim}}Br.contentAccentToneDelta=15,Br.primaryPaletteKeyColor=Or.fromPalette({name:"primary_palette_key_color",palette:e=>e.primaryPalette,tone:e=>e.primaryPalette.keyColor.tone}),Br.secondaryPaletteKeyColor=Or.fromPalette({name:"secondary_palette_key_color",palette:e=>e.secondaryPalette,tone:e=>e.secondaryPalette.keyColor.tone}),Br.tertiaryPaletteKeyColor=Or.fromPalette({name:"tertiary_palette_key_color",palette:e=>e.tertiaryPalette,tone:e=>e.tertiaryPalette.keyColor.tone}),Br.neutralPaletteKeyColor=Or.fromPalette({name:"neutral_palette_key_color",palette:e=>e.neutralPalette,tone:e=>e.neutralPalette.keyColor.tone}),Br.neutralVariantPaletteKeyColor=Or.fromPalette({name:"neutral_variant_palette_key_color",palette:e=>e.neutralVariantPalette,tone:e=>e.neutralVariantPalette.keyColor.tone}),Br.background=Or.fromPalette({name:"background",palette:e=>e.neutralPalette,tone:e=>e.isDark?6:98,isBackground:!0}),Br.onBackground=Or.fromPalette({name:"on_background",palette:e=>e.neutralPalette,tone:e=>e.isDark?90:10,background:e=>Br.background,contrastCurve:new Rr(3,3,4.5,7)}),Br.surface=Or.fromPalette({name:"surface",palette:e=>e.neutralPalette,tone:e=>e.isDark?6:98,isBackground:!0}),Br.surfaceDim=Or.fromPalette({name:"surface_dim",palette:e=>e.neutralPalette,tone:e=>e.isDark?6:87,isBackground:!0}),Br.surfaceBright=Or.fromPalette({name:"surface_bright",palette:e=>e.neutralPalette,tone:e=>e.isDark?24:98,isBackground:!0}),Br.surfaceContainerLowest=Or.fromPalette({name:"surface_container_lowest",palette:e=>e.neutralPalette,tone:e=>e.isDark?4:100,isBackground:!0}),Br.surfaceContainerLow=Or.fromPalette({name:"surface_container_low",palette:e=>e.neutralPalette,tone:e=>e.isDark?10:96,isBackground:!0}),Br.surfaceContainer=Or.fromPalette({name:"surface_container",palette:e=>e.neutralPalette,tone:e=>e.isDark?12:94,isBackground:!0}),Br.surfaceContainerHigh=Or.fromPalette({name:"surface_container_high",palette:e=>e.neutralPalette,tone:e=>e.isDark?17:92,isBackground:!0}),Br.surfaceContainerHighest=Or.fromPalette({name:"surface_container_highest",palette:e=>e.neutralPalette,tone:e=>e.isDark?22:90,isBackground:!0}),Br.onSurface=Or.fromPalette({name:"on_surface",palette:e=>e.neutralPalette,tone:e=>e.isDark?90:10,background:e=>Br.highestSurface(e),contrastCurve:new Rr(4.5,7,11,21)}),Br.surfaceVariant=Or.fromPalette({name:"surface_variant",palette:e=>e.neutralVariantPalette,tone:e=>e.isDark?30:90,isBackground:!0}),Br.onSurfaceVariant=Or.fromPalette({name:"on_surface_variant",palette:e=>e.neutralVariantPalette,tone:e=>e.isDark?80:30,background:e=>Br.highestSurface(e),contrastCurve:new Rr(3,4.5,7,11)}),Br.inverseSurface=Or.fromPalette({name:"inverse_surface",palette:e=>e.neutralPalette,tone:e=>e.isDark?90:20}),Br.inverseOnSurface=Or.fromPalette({name:"inverse_on_surface",palette:e=>e.neutralPalette,tone:e=>e.isDark?20:95,background:e=>Br.inverseSurface,contrastCurve:new Rr(4.5,7,11,21)}),Br.outline=Or.fromPalette({name:"outline",palette:e=>e.neutralVariantPalette,tone:e=>e.isDark?60:50,background:e=>Br.highestSurface(e),contrastCurve:new Rr(1.5,3,4.5,7)}),Br.outlineVariant=Or.fromPalette({name:"outline_variant",palette:e=>e.neutralVariantPalette,tone:e=>e.isDark?30:80,background:e=>Br.highestSurface(e),contrastCurve:new Rr(1,1,3,7)}),Br.shadow=Or.fromPalette({name:"shadow",palette:e=>e.neutralPalette,tone:e=>0}),Br.scrim=Or.fromPalette({name:"scrim",palette:e=>e.neutralPalette,tone:e=>0}),Br.surfaceTint=Or.fromPalette({name:"surface_tint",palette:e=>e.primaryPalette,tone:e=>e.isDark?80:40,isBackground:!0}),Br.primary=Or.fromPalette({name:"primary",palette:e=>e.primaryPalette,tone:e=>Dr(e)?e.isDark?100:0:e.isDark?80:40,isBackground:!0,background:e=>Br.highestSurface(e),contrastCurve:new Rr(3,4.5,7,11),toneDeltaPair:e=>new $r(Br.primaryContainer,Br.primary,15,"nearer",!1)}),Br.onPrimary=Or.fromPalette({name:"on_primary",palette:e=>e.primaryPalette,tone:e=>Dr(e)?e.isDark?10:90:e.isDark?20:100,background:e=>Br.primary,contrastCurve:new Rr(4.5,7,11,21)}),Br.primaryContainer=Or.fromPalette({name:"primary_container",palette:e=>e.primaryPalette,tone:e=>Nr(e)?zr(e.sourceColorHct,e):Dr(e)?e.isDark?85:25:e.isDark?30:90,isBackground:!0,background:e=>Br.highestSurface(e),contrastCurve:new Rr(1,1,3,7),toneDeltaPair:e=>new $r(Br.primaryContainer,Br.primary,15,"nearer",!1)}),Br.onPrimaryContainer=Or.fromPalette({name:"on_primary_container",palette:e=>e.primaryPalette,tone:e=>Nr(e)?Or.foregroundTone(Br.primaryContainer.tone(e),4.5):Dr(e)?e.isDark?0:100:e.isDark?90:10,background:e=>Br.primaryContainer,contrastCurve:new Rr(4.5,7,11,21)}),Br.inversePrimary=Or.fromPalette({name:"inverse_primary",palette:e=>e.primaryPalette,tone:e=>e.isDark?40:80,background:e=>Br.inverseSurface,contrastCurve:new Rr(3,4.5,7,11)}),Br.secondary=Or.fromPalette({name:"secondary",palette:e=>e.secondaryPalette,tone:e=>e.isDark?80:40,isBackground:!0,background:e=>Br.highestSurface(e),contrastCurve:new Rr(3,4.5,7,11),toneDeltaPair:e=>new $r(Br.secondaryContainer,Br.secondary,15,"nearer",!1)}),Br.onSecondary=Or.fromPalette({name:"on_secondary",palette:e=>e.secondaryPalette,tone:e=>Dr(e)?e.isDark?10:100:e.isDark?20:100,background:e=>Br.secondary,contrastCurve:new Rr(4.5,7,11,21)}),Br.secondaryContainer=Or.fromPalette({name:"secondary_container",palette:e=>e.secondaryPalette,tone:e=>{const t=e.isDark?30:90;if(Dr(e))return e.isDark?30:85;if(!Nr(e))return t;let r=function(e,t,r,i){let n=r,o=Tr.from(e,t,r);if(o.chroma<t){let r=o.chroma;for(;o.chroma<t;){n+=i?-1:1;const s=Tr.from(e,t,n);if(r>s.chroma)break;if(Math.abs(s.chroma-t)<.4)break;Math.abs(s.chroma-t)<Math.abs(o.chroma-t)&&(o=s),r=Math.max(r,s.chroma)}}return n}(e.secondaryPalette.hue,e.secondaryPalette.chroma,t,!e.isDark);return r=zr(e.secondaryPalette.getHct(r),e),r},isBackground:!0,background:e=>Br.highestSurface(e),contrastCurve:new Rr(1,1,3,7),toneDeltaPair:e=>new $r(Br.secondaryContainer,Br.secondary,15,"nearer",!1)}),Br.onSecondaryContainer=Or.fromPalette({name:"on_secondary_container",palette:e=>e.secondaryPalette,tone:e=>Nr(e)?Or.foregroundTone(Br.secondaryContainer.tone(e),4.5):e.isDark?90:10,background:e=>Br.secondaryContainer,contrastCurve:new Rr(4.5,7,11,21)}),Br.tertiary=Or.fromPalette({name:"tertiary",palette:e=>e.tertiaryPalette,tone:e=>Dr(e)?e.isDark?90:25:e.isDark?80:40,isBackground:!0,background:e=>Br.highestSurface(e),contrastCurve:new Rr(3,4.5,7,11),toneDeltaPair:e=>new $r(Br.tertiaryContainer,Br.tertiary,15,"nearer",!1)}),Br.onTertiary=Or.fromPalette({name:"on_tertiary",palette:e=>e.tertiaryPalette,tone:e=>Dr(e)?e.isDark?10:90:e.isDark?20:100,background:e=>Br.tertiary,contrastCurve:new Rr(4.5,7,11,21)}),Br.tertiaryContainer=Or.fromPalette({name:"tertiary_container",palette:e=>e.tertiaryPalette,tone:e=>{if(Dr(e))return e.isDark?60:49;if(!Nr(e))return e.isDark?30:90;const t=zr(e.tertiaryPalette.getHct(e.sourceColorHct.tone),e),r=e.tertiaryPalette.getHct(t);return Lr.fixIfDisliked(r).tone},isBackground:!0,background:e=>Br.highestSurface(e),contrastCurve:new Rr(1,1,3,7),toneDeltaPair:e=>new $r(Br.tertiaryContainer,Br.tertiary,15,"nearer",!1)}),Br.onTertiaryContainer=Or.fromPalette({name:"on_tertiary_container",palette:e=>e.tertiaryPalette,tone:e=>Dr(e)?e.isDark?0:100:Nr(e)?Or.foregroundTone(Br.tertiaryContainer.tone(e),4.5):e.isDark?90:10,background:e=>Br.tertiaryContainer,contrastCurve:new Rr(4.5,7,11,21)}),Br.error=Or.fromPalette({name:"error",palette:e=>e.errorPalette,tone:e=>e.isDark?80:40,isBackground:!0,background:e=>Br.highestSurface(e),contrastCurve:new Rr(3,4.5,7,11),toneDeltaPair:e=>new $r(Br.errorContainer,Br.error,15,"nearer",!1)}),Br.onError=Or.fromPalette({name:"on_error",palette:e=>e.errorPalette,tone:e=>e.isDark?20:100,background:e=>Br.error,contrastCurve:new Rr(4.5,7,11,21)}),Br.errorContainer=Or.fromPalette({name:"error_container",palette:e=>e.errorPalette,tone:e=>e.isDark?30:90,isBackground:!0,background:e=>Br.highestSurface(e),contrastCurve:new Rr(1,1,3,7),toneDeltaPair:e=>new $r(Br.errorContainer,Br.error,15,"nearer",!1)}),Br.onErrorContainer=Or.fromPalette({name:"on_error_container",palette:e=>e.errorPalette,tone:e=>e.isDark?90:10,background:e=>Br.errorContainer,contrastCurve:new Rr(4.5,7,11,21)}),Br.primaryFixed=Or.fromPalette({name:"primary_fixed",palette:e=>e.primaryPalette,tone:e=>Dr(e)?40:90,isBackground:!0,background:e=>Br.highestSurface(e),contrastCurve:new Rr(1,1,3,7),toneDeltaPair:e=>new $r(Br.primaryFixed,Br.primaryFixedDim,10,"lighter",!0)}),Br.primaryFixedDim=Or.fromPalette({name:"primary_fixed_dim",palette:e=>e.primaryPalette,tone:e=>Dr(e)?30:80,isBackground:!0,background:e=>Br.highestSurface(e),contrastCurve:new Rr(1,1,3,7),toneDeltaPair:e=>new $r(Br.primaryFixed,Br.primaryFixedDim,10,"lighter",!0)}),Br.onPrimaryFixed=Or.fromPalette({name:"on_primary_fixed",palette:e=>e.primaryPalette,tone:e=>Dr(e)?100:10,background:e=>Br.primaryFixedDim,secondBackground:e=>Br.primaryFixed,contrastCurve:new Rr(4.5,7,11,21)}),Br.onPrimaryFixedVariant=Or.fromPalette({name:"on_primary_fixed_variant",palette:e=>e.primaryPalette,tone:e=>Dr(e)?90:30,background:e=>Br.primaryFixedDim,secondBackground:e=>Br.primaryFixed,contrastCurve:new Rr(3,4.5,7,11)}),Br.secondaryFixed=Or.fromPalette({name:"secondary_fixed",palette:e=>e.secondaryPalette,tone:e=>Dr(e)?80:90,isBackground:!0,background:e=>Br.highestSurface(e),contrastCurve:new Rr(1,1,3,7),toneDeltaPair:e=>new $r(Br.secondaryFixed,Br.secondaryFixedDim,10,"lighter",!0)}),Br.secondaryFixedDim=Or.fromPalette({name:"secondary_fixed_dim",palette:e=>e.secondaryPalette,tone:e=>Dr(e)?70:80,isBackground:!0,background:e=>Br.highestSurface(e),contrastCurve:new Rr(1,1,3,7),toneDeltaPair:e=>new $r(Br.secondaryFixed,Br.secondaryFixedDim,10,"lighter",!0)}),Br.onSecondaryFixed=Or.fromPalette({name:"on_secondary_fixed",palette:e=>e.secondaryPalette,tone:e=>10,background:e=>Br.secondaryFixedDim,secondBackground:e=>Br.secondaryFixed,contrastCurve:new Rr(4.5,7,11,21)}),Br.onSecondaryFixedVariant=Or.fromPalette({name:"on_secondary_fixed_variant",palette:e=>e.secondaryPalette,tone:e=>Dr(e)?25:30,background:e=>Br.secondaryFixedDim,secondBackground:e=>Br.secondaryFixed,contrastCurve:new Rr(3,4.5,7,11)}),Br.tertiaryFixed=Or.fromPalette({name:"tertiary_fixed",palette:e=>e.tertiaryPalette,tone:e=>Dr(e)?40:90,isBackground:!0,background:e=>Br.highestSurface(e),contrastCurve:new Rr(1,1,3,7),toneDeltaPair:e=>new $r(Br.tertiaryFixed,Br.tertiaryFixedDim,10,"lighter",!0)}),Br.tertiaryFixedDim=Or.fromPalette({name:"tertiary_fixed_dim",palette:e=>e.tertiaryPalette,tone:e=>Dr(e)?30:80,isBackground:!0,background:e=>Br.highestSurface(e),contrastCurve:new Rr(1,1,3,7),toneDeltaPair:e=>new $r(Br.tertiaryFixed,Br.tertiaryFixedDim,10,"lighter",!0)}),Br.onTertiaryFixed=Or.fromPalette({name:"on_tertiary_fixed",palette:e=>e.tertiaryPalette,tone:e=>Dr(e)?100:10,background:e=>Br.tertiaryFixedDim,secondBackground:e=>Br.tertiaryFixed,contrastCurve:new Rr(4.5,7,11,21)}),Br.onTertiaryFixedVariant=Or.fromPalette({name:"on_tertiary_fixed_variant",palette:e=>e.tertiaryPalette,tone:e=>Dr(e)?90:30,background:e=>Br.tertiaryFixedDim,secondBackground:e=>Br.tertiaryFixed,contrastCurve:new Rr(3,4.5,7,11)});
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Fr{static fromInt(e){const t=Tr.fromInt(e);return Fr.fromHct(t)}static fromHct(e){return new Fr(e.hue,e.chroma,e)}static fromHueAndChroma(e,t){return new Fr(e,t,Fr.createKeyColor(e,t))}constructor(e,t,r){this.hue=e,this.chroma=t,this.keyColor=r,this.cache=new Map}static createKeyColor(e,t){let r=Tr.from(e,t,50),i=Math.abs(r.chroma-t);for(let n=1;n<50;n+=1){if(Math.round(t)===Math.round(r.chroma))return r;const o=Tr.from(e,t,50+n),s=Math.abs(o.chroma-t);s<i&&(i=s,r=o);const a=Tr.from(e,t,50-n),l=Math.abs(a.chroma-t);l<i&&(i=l,r=a)}return r}tone(e){let t=this.cache.get(e);return void 0===t&&(t=Tr.from(this.hue,this.chroma,e).toInt(),this.cache.set(e,t)),t}getHct(e){return Tr.fromInt(this.tone(e))}}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur{static of(e){return new Ur(e,!1)}static contentOf(e){return new Ur(e,!0)}static fromColors(e){return Ur.createPaletteFromColors(!1,e)}static contentFromColors(e){return Ur.createPaletteFromColors(!0,e)}static createPaletteFromColors(e,t){const r=new Ur(t.primary,e);if(t.secondary){const i=new Ur(t.secondary,e);r.a2=i.a1}if(t.tertiary){const i=new Ur(t.tertiary,e);r.a3=i.a1}if(t.error){const i=new Ur(t.error,e);r.error=i.a1}if(t.neutral){const i=new Ur(t.neutral,e);r.n1=i.n1}if(t.neutralVariant){const i=new Ur(t.neutralVariant,e);r.n2=i.n2}return r}constructor(e,t){const r=Tr.fromInt(e),i=r.hue,n=r.chroma;t?(this.a1=Fr.fromHueAndChroma(i,n),this.a2=Fr.fromHueAndChroma(i,n/3),this.a3=Fr.fromHueAndChroma(i+60,n/2),this.n1=Fr.fromHueAndChroma(i,Math.min(n/12,4)),this.n2=Fr.fromHueAndChroma(i,Math.min(n/6,8))):(this.a1=Fr.fromHueAndChroma(i,Math.max(48,n)),this.a2=Fr.fromHueAndChroma(i,16),this.a3=Fr.fromHueAndChroma(i+60,24),this.n1=Fr.fromHueAndChroma(i,4),this.n2=Fr.fromHueAndChroma(i,8)),this.error=Fr.fromHueAndChroma(25,84)}}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr{fromInt(e){return vr(e)}toInt(e){return function(e,t,r){const i=dr,n=(e+16)/116,o=n-r/200,s=Cr(t/500+n),a=Cr(n),l=Cr(o);return gr(s*i[0],a*i[1],l*i[2])}(e[0],e[1],e[2])}distance(e,t){const r=e[0]-t[0],i=e[1]-t[1],n=e[2]-t[2];return r*r+i*i+n*n}}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr{static quantize(e,t,r){const i=new Map,n=new Array,o=new Array,s=new Vr;let a=0;for(let t=0;t<e.length;t++){const r=e[t],l=i.get(r);void 0===l?(a++,n.push(s.fromInt(r)),o.push(r),i.set(r,1)):i.set(r,l+1)}const l=new Array;for(let e=0;e<a;e++){const t=o[e],r=i.get(t);void 0!==r&&(l[e]=r)}let c=Math.min(r,a);t.length>0&&(c=Math.min(c,t.length));const d=new Array;for(let e=0;e<t.length;e++)d.push(s.fromInt(t[e]));const h=c-d.length;if(0===t.length&&h>0)for(let e=0;e<h;e++){const e=100*Math.random(),t=201*Math.random()-100,r=201*Math.random()-100;d.push(new Array(e,t,r))}const u=new Array;for(let e=0;e<a;e++)u.push(Math.floor(Math.random()*c));const p=new Array;for(let e=0;e<c;e++){p.push(new Array);for(let t=0;t<c;t++)p[e].push(0)}const f=new Array;for(let e=0;e<c;e++){f.push(new Array);for(let t=0;t<c;t++)f[e].push(new Gr)}const m=new Array;for(let e=0;e<c;e++)m.push(0);for(let e=0;e<10;e++){for(let e=0;e<c;e++){for(let t=e+1;t<c;t++){const r=s.distance(d[e],d[t]);f[t][e].distance=r,f[t][e].index=e,f[e][t].distance=r,f[e][t].index=t}f[e].sort();for(let t=0;t<c;t++)p[e][t]=f[e][t].index}let t=0;for(let e=0;e<a;e++){const r=n[e],i=u[e],o=d[i],a=s.distance(r,o);let l=a,h=-1;for(let e=0;e<c;e++){if(f[i][e].distance>=4*a)continue;const t=s.distance(r,d[e]);t<l&&(l=t,h=e)}if(-1!==h){Math.abs(Math.sqrt(l)-Math.sqrt(a))>3&&(t++,u[e]=h)}}if(0===t&&0!==e)break;const r=new Array(c).fill(0),i=new Array(c).fill(0),o=new Array(c).fill(0);for(let e=0;e<c;e++)m[e]=0;for(let e=0;e<a;e++){const t=u[e],s=n[e],a=l[e];m[t]+=a,r[t]+=s[0]*a,i[t]+=s[1]*a,o[t]+=s[2]*a}for(let e=0;e<c;e++){const t=m[e];if(0===t){d[e]=[0,0,0];continue}const n=r[e]/t,s=i[e]/t,a=o[e]/t;d[e]=[n,s,a]}}const g=new Map;for(let e=0;e<c;e++){const t=m[e];if(0===t)continue;const r=s.toInt(d[e]);g.has(r)||g.set(r,t)}return g}}class Gr{constructor(){this.distance=-1,this.index=-1}}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hr{static quantize(e){const t=new Map;for(let r=0;r<e.length;r++){const i=e[r];(i>>24&255)<255||t.set(i,(t.get(i)??0)+1)}return t}}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wr=33,qr=35937,Yr="red",Jr="green",Xr="blue";class Zr{constructor(e=[],t=[],r=[],i=[],n=[],o=[]){this.weights=e,this.momentsR=t,this.momentsG=r,this.momentsB=i,this.moments=n,this.cubes=o}quantize(e,t){this.constructHistogram(e),this.computeMoments();const r=this.createBoxes(t);return this.createResult(r.resultCount)}constructHistogram(e){this.weights=Array.from({length:qr}).fill(0),this.momentsR=Array.from({length:qr}).fill(0),this.momentsG=Array.from({length:qr}).fill(0),this.momentsB=Array.from({length:qr}).fill(0),this.moments=Array.from({length:qr}).fill(0);const t=Hr.quantize(e);for(const[e,r]of t.entries()){const t=pr(e),i=fr(e),n=mr(e),o=3,s=1+(t>>o),a=1+(i>>o),l=1+(n>>o),c=this.getIndex(s,a,l);this.weights[c]=(this.weights[c]??0)+r,this.momentsR[c]+=r*t,this.momentsG[c]+=r*i,this.momentsB[c]+=r*n,this.moments[c]+=r*(t*t+i*i+n*n)}}computeMoments(){for(let e=1;e<Wr;e++){const t=Array.from({length:Wr}).fill(0),r=Array.from({length:Wr}).fill(0),i=Array.from({length:Wr}).fill(0),n=Array.from({length:Wr}).fill(0),o=Array.from({length:Wr}).fill(0);for(let s=1;s<Wr;s++){let a=0,l=0,c=0,d=0,h=0;for(let u=1;u<Wr;u++){const p=this.getIndex(e,s,u);a+=this.weights[p],l+=this.momentsR[p],c+=this.momentsG[p],d+=this.momentsB[p],h+=this.moments[p],t[u]+=a,r[u]+=l,i[u]+=c,n[u]+=d,o[u]+=h;const f=this.getIndex(e-1,s,u);this.weights[p]=this.weights[f]+t[u],this.momentsR[p]=this.momentsR[f]+r[u],this.momentsG[p]=this.momentsG[f]+i[u],this.momentsB[p]=this.momentsB[f]+n[u],this.moments[p]=this.moments[f]+o[u]}}}}createBoxes(e){this.cubes=Array.from({length:e}).fill(0).map((()=>new Qr));const t=Array.from({length:e}).fill(0);this.cubes[0].r0=0,this.cubes[0].g0=0,this.cubes[0].b0=0,this.cubes[0].r1=32,this.cubes[0].g1=32,this.cubes[0].b1=32;let r=e,i=0;for(let n=1;n<e;n++){this.cut(this.cubes[i],this.cubes[n])?(t[i]=this.cubes[i].vol>1?this.variance(this.cubes[i]):0,t[n]=this.cubes[n].vol>1?this.variance(this.cubes[n]):0):(t[i]=0,n--),i=0;let e=t[0];for(let r=1;r<=n;r++)t[r]>e&&(e=t[r],i=r);if(e<=0){r=n+1;break}}return new Kr(e,r)}createResult(e){const t=[];for(let r=0;r<e;++r){const e=this.cubes[r],i=this.volume(e,this.weights);if(i>0){const r=255<<24|(255&Math.round(this.volume(e,this.momentsR)/i))<<16|(255&Math.round(this.volume(e,this.momentsG)/i))<<8|255&Math.round(this.volume(e,this.momentsB)/i);t.push(r)}}return t}variance(e){const t=this.volume(e,this.momentsR),r=this.volume(e,this.momentsG),i=this.volume(e,this.momentsB);return this.moments[this.getIndex(e.r1,e.g1,e.b1)]-this.moments[this.getIndex(e.r1,e.g1,e.b0)]-this.moments[this.getIndex(e.r1,e.g0,e.b1)]+this.moments[this.getIndex(e.r1,e.g0,e.b0)]-this.moments[this.getIndex(e.r0,e.g1,e.b1)]+this.moments[this.getIndex(e.r0,e.g1,e.b0)]+this.moments[this.getIndex(e.r0,e.g0,e.b1)]-this.moments[this.getIndex(e.r0,e.g0,e.b0)]-(t*t+r*r+i*i)/this.volume(e,this.weights)}cut(e,t){const r=this.volume(e,this.momentsR),i=this.volume(e,this.momentsG),n=this.volume(e,this.momentsB),o=this.volume(e,this.weights),s=this.maximize(e,Yr,e.r0+1,e.r1,r,i,n,o),a=this.maximize(e,Jr,e.g0+1,e.g1,r,i,n,o),l=this.maximize(e,Xr,e.b0+1,e.b1,r,i,n,o);let c;const d=s.maximum,h=a.maximum,u=l.maximum;if(d>=h&&d>=u){if(s.cutLocation<0)return!1;c=Yr}else c=h>=d&&h>=u?Jr:Xr;switch(t.r1=e.r1,t.g1=e.g1,t.b1=e.b1,c){case Yr:e.r1=s.cutLocation,t.r0=e.r1,t.g0=e.g0,t.b0=e.b0;break;case Jr:e.g1=a.cutLocation,t.r0=e.r0,t.g0=e.g1,t.b0=e.b0;break;case Xr:e.b1=l.cutLocation,t.r0=e.r0,t.g0=e.g0,t.b0=e.b1;break;default:throw new Error("unexpected direction "+c)}return e.vol=(e.r1-e.r0)*(e.g1-e.g0)*(e.b1-e.b0),t.vol=(t.r1-t.r0)*(t.g1-t.g0)*(t.b1-t.b0),!0}maximize(e,t,r,i,n,o,s,a){const l=this.bottom(e,t,this.momentsR),c=this.bottom(e,t,this.momentsG),d=this.bottom(e,t,this.momentsB),h=this.bottom(e,t,this.weights);let u=0,p=-1,f=0,m=0,g=0,v=0;for(let b=r;b<i;b++){if(f=l+this.top(e,t,b,this.momentsR),m=c+this.top(e,t,b,this.momentsG),g=d+this.top(e,t,b,this.momentsB),v=h+this.top(e,t,b,this.weights),0===v)continue;let r=1*(f*f+m*m+g*g),i=1*v,y=r/i;f=n-f,m=o-m,g=s-g,v=a-v,0!==v&&(r=1*(f*f+m*m+g*g),i=1*v,y+=r/i,y>u&&(u=y,p=b))}return new ei(p,u)}volume(e,t){return t[this.getIndex(e.r1,e.g1,e.b1)]-t[this.getIndex(e.r1,e.g1,e.b0)]-t[this.getIndex(e.r1,e.g0,e.b1)]+t[this.getIndex(e.r1,e.g0,e.b0)]-t[this.getIndex(e.r0,e.g1,e.b1)]+t[this.getIndex(e.r0,e.g1,e.b0)]+t[this.getIndex(e.r0,e.g0,e.b1)]-t[this.getIndex(e.r0,e.g0,e.b0)]}bottom(e,t,r){switch(t){case Yr:return-r[this.getIndex(e.r0,e.g1,e.b1)]+r[this.getIndex(e.r0,e.g1,e.b0)]+r[this.getIndex(e.r0,e.g0,e.b1)]-r[this.getIndex(e.r0,e.g0,e.b0)];case Jr:return-r[this.getIndex(e.r1,e.g0,e.b1)]+r[this.getIndex(e.r1,e.g0,e.b0)]+r[this.getIndex(e.r0,e.g0,e.b1)]-r[this.getIndex(e.r0,e.g0,e.b0)];case Xr:return-r[this.getIndex(e.r1,e.g1,e.b0)]+r[this.getIndex(e.r1,e.g0,e.b0)]+r[this.getIndex(e.r0,e.g1,e.b0)]-r[this.getIndex(e.r0,e.g0,e.b0)];default:throw new Error("unexpected direction $direction")}}top(e,t,r,i){switch(t){case Yr:return i[this.getIndex(r,e.g1,e.b1)]-i[this.getIndex(r,e.g1,e.b0)]-i[this.getIndex(r,e.g0,e.b1)]+i[this.getIndex(r,e.g0,e.b0)];case Jr:return i[this.getIndex(e.r1,r,e.b1)]-i[this.getIndex(e.r1,r,e.b0)]-i[this.getIndex(e.r0,r,e.b1)]+i[this.getIndex(e.r0,r,e.b0)];case Xr:return i[this.getIndex(e.r1,e.g1,r)]-i[this.getIndex(e.r1,e.g0,r)]-i[this.getIndex(e.r0,e.g1,r)]+i[this.getIndex(e.r0,e.g0,r)];default:throw new Error("unexpected direction $direction")}}getIndex(e,t,r){return(e<<10)+(e<<6)+e+(t<<5)+t+r}}class Qr{constructor(e=0,t=0,r=0,i=0,n=0,o=0,s=0){this.r0=e,this.r1=t,this.g0=r,this.g1=i,this.b0=n,this.b1=o,this.vol=s}}class Kr{constructor(e,t){this.requestedCount=e,this.resultCount=t}}class ei{constructor(e,t){this.cutLocation=e,this.maximum=t}}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ti{static quantize(e,t){const r=(new Zr).quantize(e,t);return jr.quantize(e,r,t)}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ri{constructor(e){this.sourceColorArgb=e.sourceColorArgb,this.variant=e.variant,this.contrastLevel=e.contrastLevel,this.isDark=e.isDark,this.sourceColorHct=Tr.fromInt(e.sourceColorArgb),this.primaryPalette=e.primaryPalette,this.secondaryPalette=e.secondaryPalette,this.tertiaryPalette=e.tertiaryPalette,this.neutralPalette=e.neutralPalette,this.neutralVariantPalette=e.neutralVariantPalette,this.errorPalette=Fr.fromHueAndChroma(25,84)}static getRotatedHue(e,t,r){const i=e.hue;if(t.length!==r.length)throw new Error(`mismatch between hue length ${t.length} & rotations ${r.length}`);if(1===r.length)return or(e.hue+r[0]);const n=t.length;for(let e=0;e<=n-2;e++){const n=t[e],o=t[e+1];if(n<i&&i<o)return or(i+r[e])}return i}}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ii{get primary(){return this.props.primary}get onPrimary(){return this.props.onPrimary}get primaryContainer(){return this.props.primaryContainer}get onPrimaryContainer(){return this.props.onPrimaryContainer}get secondary(){return this.props.secondary}get onSecondary(){return this.props.onSecondary}get secondaryContainer(){return this.props.secondaryContainer}get onSecondaryContainer(){return this.props.onSecondaryContainer}get tertiary(){return this.props.tertiary}get onTertiary(){return this.props.onTertiary}get tertiaryContainer(){return this.props.tertiaryContainer}get onTertiaryContainer(){return this.props.onTertiaryContainer}get error(){return this.props.error}get onError(){return this.props.onError}get errorContainer(){return this.props.errorContainer}get onErrorContainer(){return this.props.onErrorContainer}get background(){return this.props.background}get onBackground(){return this.props.onBackground}get surface(){return this.props.surface}get onSurface(){return this.props.onSurface}get surfaceVariant(){return this.props.surfaceVariant}get onSurfaceVariant(){return this.props.onSurfaceVariant}get outline(){return this.props.outline}get outlineVariant(){return this.props.outlineVariant}get shadow(){return this.props.shadow}get scrim(){return this.props.scrim}get inverseSurface(){return this.props.inverseSurface}get inverseOnSurface(){return this.props.inverseOnSurface}get inversePrimary(){return this.props.inversePrimary}static light(e){return ii.lightFromCorePalette(Ur.of(e))}static dark(e){return ii.darkFromCorePalette(Ur.of(e))}static lightContent(e){return ii.lightFromCorePalette(Ur.contentOf(e))}static darkContent(e){return ii.darkFromCorePalette(Ur.contentOf(e))}static lightFromCorePalette(e){return new ii({primary:e.a1.tone(40),onPrimary:e.a1.tone(100),primaryContainer:e.a1.tone(90),onPrimaryContainer:e.a1.tone(10),secondary:e.a2.tone(40),onSecondary:e.a2.tone(100),secondaryContainer:e.a2.tone(90),onSecondaryContainer:e.a2.tone(10),tertiary:e.a3.tone(40),onTertiary:e.a3.tone(100),tertiaryContainer:e.a3.tone(90),onTertiaryContainer:e.a3.tone(10),error:e.error.tone(40),onError:e.error.tone(100),errorContainer:e.error.tone(90),onErrorContainer:e.error.tone(10),background:e.n1.tone(99),onBackground:e.n1.tone(10),surface:e.n1.tone(99),onSurface:e.n1.tone(10),surfaceVariant:e.n2.tone(90),onSurfaceVariant:e.n2.tone(30),outline:e.n2.tone(50),outlineVariant:e.n2.tone(80),shadow:e.n1.tone(0),scrim:e.n1.tone(0),inverseSurface:e.n1.tone(20),inverseOnSurface:e.n1.tone(95),inversePrimary:e.a1.tone(80)})}static darkFromCorePalette(e){return new ii({primary:e.a1.tone(80),onPrimary:e.a1.tone(20),primaryContainer:e.a1.tone(30),onPrimaryContainer:e.a1.tone(90),secondary:e.a2.tone(80),onSecondary:e.a2.tone(20),secondaryContainer:e.a2.tone(30),onSecondaryContainer:e.a2.tone(90),tertiary:e.a3.tone(80),onTertiary:e.a3.tone(20),tertiaryContainer:e.a3.tone(30),onTertiaryContainer:e.a3.tone(90),error:e.error.tone(80),onError:e.error.tone(20),errorContainer:e.error.tone(30),onErrorContainer:e.error.tone(80),background:e.n1.tone(10),onBackground:e.n1.tone(90),surface:e.n1.tone(10),onSurface:e.n1.tone(90),surfaceVariant:e.n2.tone(30),onSurfaceVariant:e.n2.tone(80),outline:e.n2.tone(60),outlineVariant:e.n2.tone(30),shadow:e.n1.tone(0),scrim:e.n1.tone(0),inverseSurface:e.n1.tone(90),inverseOnSurface:e.n1.tone(20),inversePrimary:e.a1.tone(40)})}constructor(e){this.props=e}toJSON(){return{...this.props}}}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ni{constructor(e){this.input=e,this.hctsByTempCache=[],this.hctsByHueCache=[],this.tempsByHctCache=new Map,this.inputRelativeTemperatureCache=-1,this.complementCache=null}get hctsByTemp(){if(this.hctsByTempCache.length>0)return this.hctsByTempCache;const e=this.hctsByHue.concat([this.input]),t=this.tempsByHct;return e.sort(((e,r)=>t.get(e)-t.get(r))),this.hctsByTempCache=e,e}get warmest(){return this.hctsByTemp[this.hctsByTemp.length-1]}get coldest(){return this.hctsByTemp[0]}analogous(e=5,t=12){const r=Math.round(this.input.hue),i=this.hctsByHue[r];let n=this.relativeTemperature(i);const o=[i];let s=0;for(let e=0;e<360;e++){const t=nr(r+e),i=this.hctsByHue[t],o=this.relativeTemperature(i),a=Math.abs(o-n);n=o,s+=a}let a=1;const l=s/t;let c=0;for(n=this.relativeTemperature(i);o.length<t;){const e=nr(r+a),i=this.hctsByHue[e],s=this.relativeTemperature(i);c+=Math.abs(s-n);let d=c>=o.length*l,h=1;for(;d&&o.length<t;){o.push(i);d=c>=(o.length+h)*l,h++}if(n=s,a++,a>360){for(;o.length<t;)o.push(i);break}}const d=[this.input],h=Math.floor((e-1)/2);for(let e=1;e<h+1;e++){let t=0-e;for(;t<0;)t=o.length+t;t>=o.length&&(t%=o.length),d.splice(0,0,o[t])}const u=e-h-1;for(let e=1;e<u+1;e++){let t=e;for(;t<0;)t=o.length+t;t>=o.length&&(t%=o.length),d.push(o[t])}return d}get complement(){if(null!=this.complementCache)return this.complementCache;const e=this.coldest.hue,t=this.tempsByHct.get(this.coldest),r=this.warmest.hue,i=this.tempsByHct.get(this.warmest)-t,n=ni.isBetween(this.input.hue,e,r),o=n?r:e,s=n?e:r;let a=1e3,l=this.hctsByHue[Math.round(this.input.hue)];const c=1-this.inputRelativeTemperature;for(let e=0;e<=360;e+=1){const r=or(o+1*e);if(!ni.isBetween(r,o,s))continue;const n=this.hctsByHue[Math.round(r)],d=(this.tempsByHct.get(n)-t)/i,h=Math.abs(c-d);h<a&&(a=h,l=n)}return this.complementCache=l,this.complementCache}relativeTemperature(e){const t=this.tempsByHct.get(this.warmest)-this.tempsByHct.get(this.coldest),r=this.tempsByHct.get(e)-this.tempsByHct.get(this.coldest);return 0===t?.5:r/t}get inputRelativeTemperature(){return this.inputRelativeTemperatureCache>=0||(this.inputRelativeTemperatureCache=this.relativeTemperature(this.input)),this.inputRelativeTemperatureCache}get tempsByHct(){if(this.tempsByHctCache.size>0)return this.tempsByHctCache;const e=this.hctsByHue.concat([this.input]),t=new Map;for(const r of e)t.set(r,ni.rawTemperature(r));return this.tempsByHctCache=t,t}get hctsByHue(){if(this.hctsByHueCache.length>0)return this.hctsByHueCache;const e=[];for(let t=0;t<=360;t+=1){const r=Tr.from(t,this.input.chroma,this.input.tone);e.push(r)}return this.hctsByHueCache=e,this.hctsByHueCache}static isBetween(e,t,r){return t<r?t<=e&&e<=r:t<=e||e<=r}static rawTemperature(e){const t=vr(e.toInt()),r=or(180*Math.atan2(t[2],t[1])/Math.PI),i=Math.sqrt(t[1]*t[1]+t[2]*t[2]);return.02*Math.pow(i,1.07)*Math.cos(or(r-50)*Math.PI/180)-.5}}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi extends ri{constructor(e,t,r){super({sourceColorArgb:e.toInt(),variant:Mr.CONTENT,contrastLevel:r,isDark:t,primaryPalette:Fr.fromHueAndChroma(e.hue,e.chroma),secondaryPalette:Fr.fromHueAndChroma(e.hue,Math.max(e.chroma-32,.5*e.chroma)),tertiaryPalette:Fr.fromInt(Lr.fixIfDisliked(new ni(e).analogous(3,6)[2]).toInt()),neutralPalette:Fr.fromHueAndChroma(e.hue,e.chroma/8),neutralVariantPalette:Fr.fromHueAndChroma(e.hue,e.chroma/8+4)})}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class si extends ri{constructor(e,t,r){super({sourceColorArgb:e.toInt(),variant:Mr.EXPRESSIVE,contrastLevel:r,isDark:t,primaryPalette:Fr.fromHueAndChroma(or(e.hue+240),40),secondaryPalette:Fr.fromHueAndChroma(ri.getRotatedHue(e,si.hues,si.secondaryRotations),24),tertiaryPalette:Fr.fromHueAndChroma(ri.getRotatedHue(e,si.hues,si.tertiaryRotations),32),neutralPalette:Fr.fromHueAndChroma(e.hue+15,8),neutralVariantPalette:Fr.fromHueAndChroma(e.hue+15,12)})}}si.hues=[0,21,51,121,151,191,271,321,360],si.secondaryRotations=[45,95,45,20,45,90,45,45,45],si.tertiaryRotations=[120,120,20,45,20,15,20,120,120];
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class ai extends ri{constructor(e,t,r){super({sourceColorArgb:e.toInt(),variant:Mr.FIDELITY,contrastLevel:r,isDark:t,primaryPalette:Fr.fromHueAndChroma(e.hue,e.chroma),secondaryPalette:Fr.fromHueAndChroma(e.hue,Math.max(e.chroma-32,.5*e.chroma)),tertiaryPalette:Fr.fromInt(Lr.fixIfDisliked(new ni(e).complement).toInt()),neutralPalette:Fr.fromHueAndChroma(e.hue,e.chroma/8),neutralVariantPalette:Fr.fromHueAndChroma(e.hue,e.chroma/8+4)})}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class li extends ri{constructor(e,t,r){super({sourceColorArgb:e.toInt(),variant:Mr.MONOCHROME,contrastLevel:r,isDark:t,primaryPalette:Fr.fromHueAndChroma(e.hue,0),secondaryPalette:Fr.fromHueAndChroma(e.hue,0),tertiaryPalette:Fr.fromHueAndChroma(e.hue,0),neutralPalette:Fr.fromHueAndChroma(e.hue,0),neutralVariantPalette:Fr.fromHueAndChroma(e.hue,0)})}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci extends ri{constructor(e,t,r){super({sourceColorArgb:e.toInt(),variant:Mr.NEUTRAL,contrastLevel:r,isDark:t,primaryPalette:Fr.fromHueAndChroma(e.hue,12),secondaryPalette:Fr.fromHueAndChroma(e.hue,8),tertiaryPalette:Fr.fromHueAndChroma(e.hue,16),neutralPalette:Fr.fromHueAndChroma(e.hue,2),neutralVariantPalette:Fr.fromHueAndChroma(e.hue,2)})}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di extends ri{constructor(e,t,r){super({sourceColorArgb:e.toInt(),variant:Mr.TONAL_SPOT,contrastLevel:r,isDark:t,primaryPalette:Fr.fromHueAndChroma(e.hue,36),secondaryPalette:Fr.fromHueAndChroma(e.hue,16),tertiaryPalette:Fr.fromHueAndChroma(or(e.hue+60),24),neutralPalette:Fr.fromHueAndChroma(e.hue,6),neutralVariantPalette:Fr.fromHueAndChroma(e.hue,8)})}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi extends ri{constructor(e,t,r){super({sourceColorArgb:e.toInt(),variant:Mr.VIBRANT,contrastLevel:r,isDark:t,primaryPalette:Fr.fromHueAndChroma(e.hue,200),secondaryPalette:Fr.fromHueAndChroma(ri.getRotatedHue(e,hi.hues,hi.secondaryRotations),24),tertiaryPalette:Fr.fromHueAndChroma(ri.getRotatedHue(e,hi.hues,hi.tertiaryRotations),32),neutralPalette:Fr.fromHueAndChroma(e.hue,10),neutralVariantPalette:Fr.fromHueAndChroma(e.hue,12)})}}hi.hues=[0,41,61,101,131,181,251,301,360],hi.secondaryRotations=[18,15,10,12,15,18,15,12,12],hi.tertiaryRotations=[35,30,20,25,30,35,30,25,25];
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const ui={desired:4,fallbackColorARGB:4282549748,filter:!0};function pi(e,t){return e.score>t.score?-1:e.score<t.score?1:0}class fi{constructor(){}static score(e,t){const{desired:r,fallbackColorARGB:i,filter:n}={...ui,...t},o=[],s=new Array(360).fill(0);let a=0;for(const[t,r]of e.entries()){const e=Tr.fromInt(t);o.push(e);s[Math.floor(e.hue)]+=r,a+=r}const l=new Array(360).fill(0);for(let e=0;e<360;e++){const t=s[e]/a;for(let r=e-14;r<e+16;r++){l[nr(r)]+=t}}const c=new Array;for(const e of o){const t=l[nr(Math.round(e.hue))];if(n&&(e.chroma<fi.CUTOFF_CHROMA||t<=fi.CUTOFF_EXCITED_PROPORTION))continue;const r=100*t*fi.WEIGHT_PROPORTION,i=e.chroma<fi.TARGET_CHROMA?fi.WEIGHT_CHROMA_BELOW:fi.WEIGHT_CHROMA_ABOVE,o=r+(e.chroma-fi.TARGET_CHROMA)*i;c.push({hct:e,score:o})}c.sort(pi);const d=[];for(let e=90;e>=15;e--){d.length=0;for(const{hct:t}of c){if(d.find((r=>sr(t.hue,r.hue)<e))||d.push(t),d.length>=r)break}if(d.length>=r)break}const h=[];0===d.length&&h.push(i);for(const e of d)h.push(e.toInt());return h}}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function mi(e){const t=pr(e),r=fr(e),i=mr(e),n=[t.toString(16),r.toString(16),i.toString(16)];for(const[e,t]of n.entries())1===t.length&&(n[e]="0"+t);return"#"+n.join("")}function gi(e){const t=3===(e=e.replace("#","")).length,r=6===e.length,i=8===e.length;if(!t&&!r&&!i)throw new Error("unexpected hex "+e);let n=0,o=0,s=0;return t?(n=vi(e.slice(0,1).repeat(2)),o=vi(e.slice(1,2).repeat(2)),s=vi(e.slice(2,3).repeat(2))):r?(n=vi(e.slice(0,2)),o=vi(e.slice(2,4)),s=vi(e.slice(4,6))):i&&(n=vi(e.slice(2,4)),o=vi(e.slice(4,6)),s=vi(e.slice(6,8))),(255<<24|(255&n)<<16|(255&o)<<8|255&s)>>>0}function vi(e){return parseInt(e,16)}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bi(e,t=[]){const r=Ur.of(e);return{source:e,schemes:{light:ii.light(e),dark:ii.dark(e)},palettes:{primary:r.a1,secondary:r.a2,tertiary:r.a3,neutral:r.n1,neutralVariant:r.n2,error:r.error},customColors:t.map((t=>function(e,t){let r=t.value;const i=r,n=e;t.blend&&(r=Er.harmonize(i,n));const o=Ur.of(r),s=o.a1;return{color:t,value:r,light:{color:s.tone(40),onColor:s.tone(100),colorContainer:s.tone(90),onColorContainer:s.tone(10)},dark:{color:s.tone(80),onColor:s.tone(20),colorContainer:s.tone(30),onColorContainer:s.tone(90)}}}(e,t)))}}function yi(e,t,r=""){for(const[i,n]of Object.entries(t.toJSON())){const t=i.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),o=mi(n);e.style.setProperty(`--md-sys-color-${t}${r}`,o)}}
/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */fi.TARGET_CHROMA=48,fi.WEIGHT_PROPORTION=.7,fi.WEIGHT_CHROMA_ABOVE=.3,fi.WEIGHT_CHROMA_BELOW=.1,fi.CUTOFF_CHROMA=5,fi.CUTOFF_EXCITED_PROPORTION=.01;const xi="important",wi=" !"+xi,_i=qe(class extends Ye{constructor(e){if(super(e),e.type!==je||"style"!==e.name||e.strings?.length>2)throw Error("The `styleMap` directive must be used in the `style` attribute and must be the only part in the attribute.")}render(e){return Object.keys(e).reduce(((t,r)=>{const i=e[r];return null==i?t:t+`${r=r.includes("-")?r:r.replace(/(?:^(webkit|moz|ms|o)|)(?=[A-Z])/g,"-$&").toLowerCase()}:${i};`}),"")}update(e,[t]){const{style:r}=e.element;if(void 0===this.ft)return this.ft=new Set(Object.keys(t)),this.render(t);for(const e of this.ft)null==t[e]&&(this.ft.delete(e),e.includes("-")?r.removeProperty(e):r[e]=null);for(const e in t){const i=t[e];if(null!=i){this.ft.add(e);const t="string"==typeof i&&i.endsWith(wi);e.includes("-")||t?r.setProperty(e,t?i.slice(0,-11):i,t?xi:""):r[e]=i}}return j}});
/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ki=function(e,t){return new CustomEvent("close-menu",{bubbles:!0,composed:!0,detail:{initiator:e,reason:t,itemPath:[e]}})},Ci="click-selection",Si="keydown",Ai={ESCAPE:"Escape",SPACE:"Space",ENTER:"Enter"};function Pi(e){return Object.values(Ai).some((t=>t===e))}function Ti(e,t){const r=new Event("md-contains",{bubbles:!0,composed:!0});let i=[];const n=e=>{i=e.composedPath()};t.addEventListener("md-contains",n),e.dispatchEvent(r),t.removeEventListener("md-contains",n);return i.length>0}const Ei="none",Ii="list-root",Li="first-item",Oi="last-item",Mi="end-start",Ri="start-start";
/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class $i{constructor(e,t){this.host=e,this.getProperties=t,this.surfaceStylesInternal={display:"none"},this.lastValues={isOpen:!1},this.host.addController(this)}get surfaceStyles(){return this.surfaceStylesInternal}async position(){const{surfaceEl:e,anchorEl:t,anchorCorner:r,surfaceCorner:i,positioning:n,xOffset:o,yOffset:s,repositionStrategy:a}=this.getProperties(),l=r.toLowerCase().trim(),c=i.toLowerCase().trim();if(!e||!t)return;const d=window.innerWidth,h=window.innerHeight,u=document.createElement("div");u.style.opacity="0",u.style.position="fixed",u.style.display="block",u.style.inset="0",document.body.appendChild(u);const p=u.getBoundingClientRect();u.remove();const f=window.innerHeight-p.bottom,m=window.innerWidth-p.right;this.surfaceStylesInternal={display:"block",opacity:"0"},this.host.requestUpdate(),await this.host.updateComplete,e.popover&&e.isConnected&&e.showPopover();const g=e.getSurfacePositionClientRect?e.getSurfacePositionClientRect():e.getBoundingClientRect(),v=t.getSurfacePositionClientRect?t.getSurfacePositionClientRect():t.getBoundingClientRect(),[b,y]=c.split("-"),[x,w]=l.split("-"),_="ltr"===getComputedStyle(e).direction;let{blockInset:k,blockOutOfBoundsCorrection:C,surfaceBlockProperty:S}=this.calculateBlock({surfaceRect:g,anchorRect:v,anchorBlock:x,surfaceBlock:b,yOffset:s,positioning:n,windowInnerHeight:h,blockScrollbarHeight:f});if(C){const e="start"===b?"end":"start",t="start"===x?"end":"start",r=this.calculateBlock({surfaceRect:g,anchorRect:v,anchorBlock:t,surfaceBlock:e,yOffset:s,positioning:n,windowInnerHeight:h,blockScrollbarHeight:f});C>r.blockOutOfBoundsCorrection&&(k=r.blockInset,C=r.blockOutOfBoundsCorrection,S=r.surfaceBlockProperty)}let{inlineInset:A,inlineOutOfBoundsCorrection:P,surfaceInlineProperty:T}=this.calculateInline({surfaceRect:g,anchorRect:v,anchorInline:w,surfaceInline:y,xOffset:o,positioning:n,isLTR:_,windowInnerWidth:d,inlineScrollbarWidth:m});if(P){const e="start"===y?"end":"start",t="start"===w?"end":"start",r=this.calculateInline({surfaceRect:g,anchorRect:v,anchorInline:t,surfaceInline:e,xOffset:o,positioning:n,isLTR:_,windowInnerWidth:d,inlineScrollbarWidth:m});Math.abs(P)>Math.abs(r.inlineOutOfBoundsCorrection)&&(A=r.inlineInset,P=r.inlineOutOfBoundsCorrection,T=r.surfaceInlineProperty)}"move"===a&&(k-=C,A-=P),this.surfaceStylesInternal={display:"block",opacity:"1",[S]:`${k}px`,[T]:`${A}px`},"resize"===a&&(C&&(this.surfaceStylesInternal.height=g.height-C+"px"),P&&(this.surfaceStylesInternal.width=g.width-P+"px")),this.host.requestUpdate()}calculateBlock(e){const{surfaceRect:t,anchorRect:r,anchorBlock:i,surfaceBlock:n,yOffset:o,positioning:s,windowInnerHeight:a,blockScrollbarHeight:l}=e,c="fixed"===s||"document"===s?1:0,d="document"===s?1:0,h="start"===n?1:0,u="end"===n?1:0,p=(i!==n?1:0)*r.height+o,f=h*r.top+u*(a-r.bottom-l);return{blockInset:c*f+d*(h*window.scrollY-u*window.scrollY)+p,blockOutOfBoundsCorrection:Math.abs(Math.min(0,a-f-p-t.height)),surfaceBlockProperty:"start"===n?"inset-block-start":"inset-block-end"}}calculateInline(e){const{isLTR:t,surfaceInline:r,anchorInline:i,anchorRect:n,surfaceRect:o,xOffset:s,positioning:a,windowInnerWidth:l,inlineScrollbarWidth:c}=e,d="fixed"===a||"document"===a?1:0,h="document"===a?1:0,u=t?1:0,p=t?0:1,f="start"===r?1:0,m="end"===r?1:0,g=(i!==r?1:0)*n.width+s,v=u*(f*n.left+m*(l-n.right-c))+p*(f*(l-n.right-c)+m*n.left);let b="start"===r?"inset-inline-start":"inset-inline-end";return"document"!==a&&"fixed"!==a||(b="start"===r&&t||"end"===r&&!t?"left":"right"),{inlineInset:d*v+g+h*(u*(f*window.scrollX-m*window.scrollX)+p*(m*window.scrollX-f*window.scrollX)),inlineOutOfBoundsCorrection:Math.abs(Math.min(0,l-v-g-o.width)),surfaceInlineProperty:b}}hostUpdate(){this.onUpdate()}hostUpdated(){this.onUpdate()}async onUpdate(){const e=this.getProperties();let t=!1;for(const[r,i]of Object.entries(e))if(t=t||i!==this.lastValues[r],t)break;const r=this.lastValues.isOpen!==e.isOpen,i=!!e.anchorEl,n=!!e.surfaceEl;t&&i&&n&&(this.lastValues.isOpen=e.isOpen,e.isOpen?(this.lastValues=e,await this.position(),e.onOpen()):r&&(await e.beforeClose(),this.close(),e.onClose()))}close(){this.surfaceStylesInternal={display:"none"},this.host.requestUpdate();const e=this.getProperties().surfaceEl;e?.popover&&e?.isConnected&&e.hidePopover()}}
/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ni=0,Di=1,zi=2;class Bi{constructor(e){this.getProperties=e,this.typeaheadRecords=[],this.typaheadBuffer="",this.cancelTypeaheadTimeout=0,this.isTypingAhead=!1,this.lastActiveRecord=null,this.onKeydown=e=>{this.isTypingAhead?this.typeahead(e):this.beginTypeahead(e)},this.endTypeahead=()=>{this.isTypingAhead=!1,this.typaheadBuffer="",this.typeaheadRecords=[]}}get items(){return this.getProperties().getItems()}get active(){return this.getProperties().active}beginTypeahead(e){this.active&&("Space"===e.code||"Enter"===e.code||e.code.startsWith("Arrow")||"Escape"===e.code||(this.isTypingAhead=!0,this.typeaheadRecords=this.items.map(((e,t)=>[t,e,e.typeaheadText.trim().toLowerCase()])),this.lastActiveRecord=this.typeaheadRecords.find((e=>0===e[Di].tabIndex))??null,this.lastActiveRecord&&(this.lastActiveRecord[Di].tabIndex=-1),this.typeahead(e)))}typeahead(e){if(e.defaultPrevented)return;if(clearTimeout(this.cancelTypeaheadTimeout),"Enter"===e.code||e.code.startsWith("Arrow")||"Escape"===e.code)return this.endTypeahead(),void(this.lastActiveRecord&&(this.lastActiveRecord[Di].tabIndex=-1));"Space"===e.code&&e.preventDefault(),this.cancelTypeaheadTimeout=setTimeout(this.endTypeahead,this.getProperties().typeaheadBufferTime),this.typaheadBuffer+=e.key.toLowerCase();const t=this.lastActiveRecord?this.lastActiveRecord[Ni]:-1,r=this.typeaheadRecords.length,i=e=>(e[Ni]+r-t)%r,n=this.typeaheadRecords.filter((e=>!e[Di].disabled&&e[zi].startsWith(this.typaheadBuffer))).sort(((e,t)=>i(e)-i(t)));if(0===n.length)return clearTimeout(this.cancelTypeaheadTimeout),this.lastActiveRecord&&(this.lastActiveRecord[Di].tabIndex=-1),void this.endTypeahead();const o=1===this.typaheadBuffer.length;let s;s=this.lastActiveRecord===n[0]&&o?n[1]??n[0]:n[0],this.lastActiveRecord&&(this.lastActiveRecord[Di].tabIndex=-1),this.lastActiveRecord=s,s[Di].tabIndex=0,s[Di].focus()}}
/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Fi=new Set([$t.ArrowDown,$t.ArrowUp,$t.Home,$t.End]),Ui=new Set([$t.ArrowLeft,$t.ArrowRight,...Fi]);class Vi extends ae{get openDirection(){return"start"===this.menuCorner.split("-")[0]?"DOWN":"UP"}get anchorElement(){return this.anchor?this.getRootNode().querySelector(`#${this.anchor}`):this.currentAnchorElement}set anchorElement(e){this.currentAnchorElement=e,this.requestUpdate("anchorElement")}constructor(){super(),this.anchor="",this.positioning="absolute",this.quick=!1,this.hasOverflow=!1,this.open=!1,this.xOffset=0,this.yOffset=0,this.typeaheadDelay=200,this.anchorCorner=Mi,this.menuCorner=Ri,this.stayOpenOnOutsideClick=!1,this.stayOpenOnFocusout=!1,this.skipRestoreFocus=!1,this.defaultFocus=Li,this.noNavigationWrap=!1,this.typeaheadActive=!0,this.isSubmenu=!1,this.pointerPath=[],this.isRepositioning=!1,this.openCloseAnimationSignal=function(){let e=null;return{start:()=>(e?.abort(),e=new AbortController,e.signal),finish(){e=null}}}
/**
 * @license
 * Copyright 2022 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */(),this.listController=new Nt({isItem:e=>e.hasAttribute("md-menu-item"),getPossibleItems:()=>this.slotItems,isRtl:()=>"rtl"===getComputedStyle(this).direction,deactivateItem:e=>{e.selected=!1,e.tabIndex=-1},activateItem:e=>{e.selected=!0,e.tabIndex=0},isNavigableKey:e=>{if(!this.isSubmenu)return Ui.has(e);return e===("rtl"===getComputedStyle(this).direction?$t.ArrowLeft:$t.ArrowRight)||Fi.has(e)},wrapNavigation:()=>!this.noNavigationWrap}),this.lastFocusedElement=null,this.typeaheadController=new Bi((()=>({getItems:()=>this.items,typeaheadBufferTime:this.typeaheadDelay,active:this.typeaheadActive}))),this.currentAnchorElement=null,this.internals=this.attachInternals(),this.menuPositionController=new $i(this,(()=>({anchorCorner:this.anchorCorner,surfaceCorner:this.menuCorner,surfaceEl:this.surfaceEl,anchorEl:this.anchorElement,positioning:"popover"===this.positioning?"document":this.positioning,isOpen:this.open,xOffset:this.xOffset,yOffset:this.yOffset,onOpen:this.onOpened,beforeClose:this.beforeClose,onClose:this.onClosed,repositionStrategy:this.hasOverflow&&"popover"!==this.positioning?"move":"resize"}))),this.onWindowResize=()=>{this.isRepositioning||"document"!==this.positioning&&"fixed"!==this.positioning&&"popover"!==this.positioning||(this.isRepositioning=!0,this.reposition(),this.isRepositioning=!1)},this.handleFocusout=async e=>{const t=this.anchorElement;if(this.stayOpenOnFocusout||!this.open||this.pointerPath.includes(t))return;if(e.relatedTarget){if(Ti(e.relatedTarget,this)||0!==this.pointerPath.length&&Ti(e.relatedTarget,t))return}else if(this.pointerPath.includes(this))return;const r=this.skipRestoreFocus;this.skipRestoreFocus=!0,this.close(),await this.updateComplete,this.skipRestoreFocus=r},this.onOpened=async()=>{this.lastFocusedElement=function(e=document){let t=e.activeElement;for(;t&&t?.shadowRoot?.activeElement;)t=t.shadowRoot.activeElement;return t}();const e=this.items,t=At(e);t&&this.defaultFocus!==Ei&&(t.item.tabIndex=-1);let r=!this.quick;switch(this.quick?this.dispatchEvent(new Event("opening")):r=!!await this.animateOpen(),this.defaultFocus){case Li:const t=Pt(e);t&&(t.tabIndex=0,t.focus(),await t.updateComplete);break;case Oi:const r=Tt(e);r&&(r.tabIndex=0,r.focus(),await r.updateComplete);break;case Ii:this.focus()}r||this.dispatchEvent(new Event("opened"))},this.beforeClose=async()=>{this.open=!1,this.skipRestoreFocus||this.lastFocusedElement?.focus?.(),this.quick||await this.animateClose()},this.onClosed=()=>{this.quick&&(this.dispatchEvent(new Event("closing")),this.dispatchEvent(new Event("closed")))},this.onWindowPointerdown=e=>{this.pointerPath=e.composedPath()},this.onDocumentClick=e=>{if(!this.open)return;const t=e.composedPath();this.stayOpenOnOutsideClick||t.includes(this)||t.includes(this.anchorElement)||(this.open=!1)},this.internals.role="menu",this.addEventListener("keydown",this.handleKeydown),this.addEventListener("keydown",this.captureKeydown,{capture:!0}),this.addEventListener("focusout",this.handleFocusout)}get items(){return this.listController.items}willUpdate(e){e.has("open")&&(this.open?this.removeAttribute("aria-hidden"):this.setAttribute("aria-hidden","true"))}update(e){e.has("open")&&(this.open?this.setUpGlobalEventListeners():this.cleanUpGlobalEventListeners()),e.has("positioning")&&"popover"===this.positioning&&!this.showPopover&&(this.positioning="fixed"),super.update(e)}connectedCallback(){super.connectedCallback(),this.open&&this.setUpGlobalEventListeners()}disconnectedCallback(){super.disconnectedCallback(),this.cleanUpGlobalEventListeners()}getBoundingClientRect(){return this.surfaceEl?this.surfaceEl.getBoundingClientRect():super.getBoundingClientRect()}getClientRects(){return this.surfaceEl?this.surfaceEl.getClientRects():super.getClientRects()}render(){return this.renderSurface()}renderSurface(){return V` <div class="menu ${Je(this.getSurfaceClasses())}" style="${_i(this.menuPositionController.surfaceStyles)}" popover="${"popover"===this.positioning?"manual":G}"> ${this.renderElevation()} <div class="items"> <div class="item-padding"> ${this.renderMenuItems()} </div> </div> </div> `}renderMenuItems(){return V`<slot @close-menu="${this.onCloseMenu}" @deactivate-items="${this.onDeactivateItems}" @request-activation="${this.onRequestActivation}" @deactivate-typeahead="${this.handleDeactivateTypeahead}" @activate-typeahead="${this.handleActivateTypeahead}" @stay-open-on-focusout="${this.handleStayOpenOnFocusout}" @close-on-focusout="${this.handleCloseOnFocusout}" @slotchange="${this.listController.onSlotchange}"></slot>`}renderElevation(){return V`<md-elevation part="elevation"></md-elevation>`}getSurfaceClasses(){return{open:this.open,fixed:"fixed"===this.positioning,"has-overflow":this.hasOverflow}}captureKeydown(e){e.target===this&&!e.defaultPrevented&&Pi(e.code)&&(e.preventDefault(),this.close()),this.typeaheadController.onKeydown(e)}async animateOpen(){const e=this.surfaceEl,t=this.slotEl;if(!e||!t)return!0;const r=this.openDirection;this.dispatchEvent(new Event("opening")),e.classList.toggle("animating",!0);const i=this.openCloseAnimationSignal.start(),n=e.offsetHeight,o="UP"===r,s=this.items,a=250/s.length,l=e.animate([{height:"0px"},{height:`${n}px`}],{duration:500,easing:Ze}),c=t.animate([{transform:o?`translateY(-${n}px)`:""},{transform:""}],{duration:500,easing:Ze}),d=e.animate([{opacity:0},{opacity:1}],50),h=[];for(let e=0;e<s.length;e++){const t=s[o?s.length-1-e:e],r=t.animate([{opacity:0},{opacity:1}],{duration:250,delay:a*e});t.classList.toggle("md-menu-hidden",!0),r.addEventListener("finish",(()=>{t.classList.toggle("md-menu-hidden",!1)})),h.push([t,r])}let u=e=>{};const p=new Promise((e=>{u=e}));return i.addEventListener("abort",(()=>{l.cancel(),c.cancel(),d.cancel(),h.forEach((([e,t])=>{e.classList.toggle("md-menu-hidden",!1),t.cancel()})),u(!0)})),l.addEventListener("finish",(()=>{e.classList.toggle("animating",!1),this.openCloseAnimationSignal.finish(),u(!1)})),await p}animateClose(){let e,t;const r=new Promise(((r,i)=>{e=r,t=i})),i=this.surfaceEl,n=this.slotEl;if(!i||!n)return t(),r;const o="UP"===this.openDirection;this.dispatchEvent(new Event("closing")),i.classList.toggle("animating",!0);const s=this.openCloseAnimationSignal.start(),a=i.offsetHeight,l=this.items,c=150,d=50/l.length,h=i.animate([{height:`${a}px`},{height:.35*a+"px"}],{duration:c,easing:Qe}),u=n.animate([{transform:""},{transform:o?`translateY(-${.65*a}px)`:""}],{duration:c,easing:Qe}),p=i.animate([{opacity:1},{opacity:0}],{duration:50,delay:100}),f=[];for(let e=0;e<l.length;e++){const t=l[o?e:l.length-1-e],r=t.animate([{opacity:1},{opacity:0}],{duration:50,delay:50+d*e});r.addEventListener("finish",(()=>{t.classList.toggle("md-menu-hidden",!0)})),f.push([t,r])}return s.addEventListener("abort",(()=>{h.cancel(),u.cancel(),p.cancel(),f.forEach((([e,t])=>{t.cancel(),e.classList.toggle("md-menu-hidden",!1)})),t()})),h.addEventListener("finish",(()=>{i.classList.toggle("animating",!1),f.forEach((([e])=>{e.classList.toggle("md-menu-hidden",!1)})),this.openCloseAnimationSignal.finish(),this.dispatchEvent(new Event("closed")),e(!0)})),r}handleKeydown(e){this.pointerPath=[],this.listController.handleKeydown(e)}setUpGlobalEventListeners(){document.addEventListener("click",this.onDocumentClick,{capture:!0}),window.addEventListener("pointerdown",this.onWindowPointerdown),document.addEventListener("resize",this.onWindowResize,{passive:!0}),window.addEventListener("resize",this.onWindowResize,{passive:!0})}cleanUpGlobalEventListeners(){document.removeEventListener("click",this.onDocumentClick,{capture:!0}),window.removeEventListener("pointerdown",this.onWindowPointerdown),document.removeEventListener("resize",this.onWindowResize),window.removeEventListener("resize",this.onWindowResize)}onCloseMenu(){this.close()}onDeactivateItems(e){e.stopPropagation(),this.listController.onDeactivateItems()}onRequestActivation(e){e.stopPropagation(),this.listController.onRequestActivation(e)}handleDeactivateTypeahead(e){e.stopPropagation(),this.typeaheadActive=!1}handleActivateTypeahead(e){e.stopPropagation(),this.typeaheadActive=!0}handleStayOpenOnFocusout(e){e.stopPropagation(),this.stayOpenOnFocusout=!0}handleCloseOnFocusout(e){e.stopPropagation(),this.stayOpenOnFocusout=!1}close(){this.open=!1;this.slotItems.forEach((e=>{e.close?.()}))}show(){this.open=!0}activateNextItem(){return this.listController.activateNextItem()??null}activatePreviousItem(){return this.listController.activatePreviousItem()??null}reposition(){this.open&&this.menuPositionController.position()}}we([me(".menu")],Vi.prototype,"surfaceEl",void 0),we([me("slot")],Vi.prototype,"slotEl",void 0),we([ue()],Vi.prototype,"anchor",void 0),we([ue()],Vi.prototype,"positioning",void 0),we([ue({type:Boolean})],Vi.prototype,"quick",void 0),we([ue({type:Boolean,attribute:"has-overflow"})],Vi.prototype,"hasOverflow",void 0),we([ue({type:Boolean,reflect:!0})],Vi.prototype,"open",void 0),we([ue({type:Number,attribute:"x-offset"})],Vi.prototype,"xOffset",void 0),we([ue({type:Number,attribute:"y-offset"})],Vi.prototype,"yOffset",void 0),we([ue({type:Number,attribute:"typeahead-delay"})],Vi.prototype,"typeaheadDelay",void 0),we([ue({attribute:"anchor-corner"})],Vi.prototype,"anchorCorner",void 0),we([ue({attribute:"menu-corner"})],Vi.prototype,"menuCorner",void 0),we([ue({type:Boolean,attribute:"stay-open-on-outside-click"})],Vi.prototype,"stayOpenOnOutsideClick",void 0),we([ue({type:Boolean,attribute:"stay-open-on-focusout"})],Vi.prototype,"stayOpenOnFocusout",void 0),we([ue({type:Boolean,attribute:"skip-restore-focus"})],Vi.prototype,"skipRestoreFocus",void 0),we([ue({attribute:"default-focus"})],Vi.prototype,"defaultFocus",void 0),we([ue({type:Boolean,attribute:"no-navigation-wrap"})],Vi.prototype,"noNavigationWrap",void 0),we([be({flatten:!0})],Vi.prototype,"slotItems",void 0),we([pe()],Vi.prototype,"typeaheadActive",void 0);
/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
const ji=o`:host{--md-elevation-level:var(--md-menu-container-elevation, 2);--md-elevation-shadow-color:var(--md-menu-container-shadow-color, var(--md-sys-color-shadow, #000));min-width:112px;color:unset;display:contents}md-focus-ring{--md-focus-ring-shape:var(--md-menu-container-shape, var(--md-sys-shape-corner-extra-small, 4px))}.menu{border-radius:var(--md-menu-container-shape,var(--md-sys-shape-corner-extra-small,4px));display:none;inset:auto;border:none;padding:0;overflow:visible;background-color:rgba(0,0,0,0);color:inherit;opacity:0;z-index:20;position:absolute;user-select:none;max-height:inherit;height:inherit;min-width:inherit;max-width:inherit;scrollbar-width:inherit}.menu::backdrop{display:none}.fixed{position:fixed}.items{display:block;list-style-type:none;margin:0;outline:0;box-sizing:border-box;background-color:var(--md-menu-container-color,var(--md-sys-color-surface-container,#f3edf7));height:inherit;max-height:inherit;overflow:auto;min-width:inherit;max-width:inherit;border-radius:inherit;scrollbar-width:inherit}.item-padding{padding-block:8px}.has-overflow:not([popover]) .items{overflow:visible}.animating .items,.has-overflow.animating .items{overflow:hidden}.has-overflow.animating .items{pointer-events:none}.animating ::slotted(.md-menu-hidden){opacity:0}slot{display:block;height:inherit;max-height:inherit}::slotted(:is(md-divider,[role=separator])){margin:8px 0}@media(forced-colors:active){.menu{border-style:solid;border-color:CanvasText;border-width:1px}}`
/**
 * @license
 * Copyright 2022 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */;let Gi=class extends Vi{};Gi.styles=[ji],Gi=we([ce("md-menu")],Gi);
/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const Hi=e=>e??G
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */;
/**
@license
Copyright (c) 2016 The Polymer Community Authors. All rights reserved.
Copyright (c) 2020 Citizens Foundation Iceland / Citizens Foundation USA LitElement Port. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer community is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
var Wi=function(e,t,r,i){var n,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,r,s):n(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s};let qi=class extends ae{constructor(){super(...arguments),this.src="",this.alt=void 0,this.crossorigin=void 0,this.preventLoad=!1,this.sizing=void 0,this.position="center",this.preload=!1,this.placeholder=void 0,this.fade=!1,this.loaded=!1,this.loading=!1,this.error=!1,this.width=void 0,this.height=void 0,this._resolvedSrc=void 0,this.ABS_URL=/(^\/[^\/])|(^#)|(^[\w-\d]*:)/,this.workingURL=void 0,this.resolveDoc=void 0}static get styles(){return[o`:host{display:inline-block;overflow:hidden;position:relative}#baseURIAnchor{display:none}#sizedImgDiv{position:absolute;top:0;right:0;bottom:0;left:0;display:none}#img{display:block;width:var(--yp-image-width,auto);height:var(--yp-image-height,auto)}:host([sizing]) #sizedImgDiv{display:block}:host([sizing]) #img{display:none}#placeholder{position:absolute;top:0;right:0;bottom:0;left:0;background-color:inherit;opacity:1}#placeholder.faded-out{transition:opacity .5s linear;opacity:0}`]}render(){return V` <a id="baseURIAnchor" href="#"></a> <div id="sizedImgDiv" role="img" ?hidden="${this._computeImgDivHidden}" aria-hidden="${this._computeImgDivARIAHidden}" aria-label="${Hi(this._computeImgDivARIALabel)}"></div> <img id="img" alt="${this.alt?this.alt:""}" ?hidden="${this._computeImgHidden}" crossorigin="${Hi(this.crossorigin)}" @load="${this._imgOnLoad}" @error="${this._imgOnError}"> <div id="placeholder" ?hidden="${this.computePlaceholderHidden}" class="${this._computePlaceholderClassName}"></div> `}$$(e){return this.shadowRoot?this.shadowRoot.querySelector(e):null}connectedCallback(){super.connectedCallback(),this._resolvedSrc=""}static async getThemeColorsFromImage(e){return await new Promise((async(t,r)=>{try{const r=await async function(e){try{const t=await new Promise(((t,r)=>{const i=document.createElement("canvas"),n=i.getContext("2d");if(!n)return r(new Error("Could not get canvas context"));i.width=e.width,i.height=e.height,n.drawImage(e,0,0),t(n.getImageData(0,0,e.width,e.height).data)})),r=[];for(let e=0;e<t.length;e+=4){const i=t[e],n=t[e+1],o=t[e+2];if(t[e+3]<255)continue;const s=hr(i,n,o);r.push(s)}const i=ti.quantize(r,128);return"#"+("000000"+(16777215&fi.score(i)[0]).toString(16)).slice(-6)}catch(t){return void console.error(`Error getting source color from image: ${t.message} ${e.src}`)}}(e);t(r)}catch(e){r(e)}}))}_imgOnLoad(){this.$$("img").src===this._resolveSrc(this.src)&&(this.loading=!1,this.loaded=!0,this.error=!1)}_imgOnError(){this.$$("img").src===this._resolveSrc(this.src)&&(this.$$("img").removeAttribute("src"),this.$$("#sizedImgDiv").style.backgroundImage="",this.loading=!1,this.loaded=!1,this.error=!0)}get computePlaceholderHidden(){return!this.preload||!this.fade&&!this.loading&&this.loaded}_computePlaceholderClassName(){return this.preload&&this.fade&&!this.loading&&this.loaded?"faded-out":""}get _computeImgDivHidden(){return!this.sizing}get _computeImgDivARIAHidden(){return""===this.alt}get _computeImgDivARIALabel(){if(null!==this.alt)return this.alt;if(""===this.src)return"";const e=this._resolveSrc(this.src);return e?e.replace(/[?|#].*/g,"").split("/").pop():""}get _computeImgHidden(){return!!this.sizing}_widthChanged(){this.width&&(this.style.width=this.width+"px")}_heightChanged(){this.style.height=this.height+"px"}_loadStateObserver(){const e=this._resolveSrc(this.src);e!==this._resolvedSrc&&(this._resolvedSrc="",this.$$("img").removeAttribute("src"),this.$$("#sizedImgDiv").style.backgroundImage="",""===this.src||this.preventLoad?(this.loading=!1,this.loaded=!1,this.error=!1):(this._resolvedSrc=e,this._resolvedSrc&&(this.$$("img").src=this._resolvedSrc),this.$$("#sizedImgDiv").style.backgroundImage='url("'+this._resolvedSrc+'")',this.loading=!0,this.loaded=!1,this.error=!1))}_placeholderChanged(){this.$$("#placeholder").style.backgroundImage=this.placeholder?'url("'+this.placeholder+'")':""}_transformChanged(){const e=this.$$("#sizedImgDiv").style,t=this.$$("#placeholder").style;this.sizing&&(e.backgroundSize=t.backgroundSize=this.sizing),e.backgroundPosition=t.backgroundPosition=this.sizing?this.position:"",e.backgroundRepeat=t.backgroundRepeat=this.sizing?"no-repeat":""}_resolveSrc(e){let t=this.resolveUrl(e,this.$$("#baseURIAnchor").href);return t&&t.length>=2&&"/"===t[0]&&"/"!==t[1]&&(t=(location.origin||location.protocol+"//"+location.host)+t),t}resolveUrl(e,t){if(e&&this.ABS_URL.test(e))return e;if("//"===e)return e;if(void 0===this.workingURL){this.workingURL=!1;try{const e=new URL("b","http://a");e.pathname="c%20d",this.workingURL="http://a/c%20d"===e.href}catch(e){}}if(t||(t=document.baseURI||window.location.href),this.workingURL)try{return new URL(e,t).href}catch(t){return e}}updated(e){if(super.updated(e),e.has("placeHolder")&&this._placeholderChanged(),e.has("loaded")&&this.loaded){const e=new CustomEvent("loaded",{detail:{imageYp:this}});this.dispatchEvent(e)}e.has("width")&&this._widthChanged(),e.has("height")&&this._widthChanged(),(e.has("sizing")||e.has("position"))&&this._transformChanged(),(e.has("src")||e.has("preventLoad"))&&this._loadStateObserver()}};Wi([ue({type:String})],qi.prototype,"src",void 0),Wi([ue({type:String})],qi.prototype,"alt",void 0),Wi([ue({type:String})],qi.prototype,"crossorigin",void 0),Wi([ue({type:Boolean})],qi.prototype,"preventLoad",void 0),Wi([ue({type:String,reflect:!0})],qi.prototype,"sizing",void 0),Wi([ue({type:String})],qi.prototype,"position",void 0),Wi([ue({type:Boolean})],qi.prototype,"preload",void 0),Wi([ue({type:String})],qi.prototype,"placeholder",void 0),Wi([ue({type:Boolean})],qi.prototype,"fade",void 0),Wi([ue({type:Boolean})],qi.prototype,"loaded",void 0),Wi([ue({type:Boolean})],qi.prototype,"loading",void 0),Wi([ue({type:Boolean})],qi.prototype,"error",void 0),Wi([ue({type:String})],qi.prototype,"width",void 0),Wi([ue({type:String})],qi.prototype,"height",void 0),qi=Wi([ce("yp-image")],qi);const Yi=o`
  display: -ms-flexbox;
  display: -webkit-flex;
  display: flex;
`;o`
  box-sizing: border-box;
`;const Ji=o`
  display: -ms-inline-flexbox;
  display: -webkit-inline-flex;
  display: inline-flex;
`,Xi=o`
  -ms-flex-direction: row;
  -webkit-flex-direction: row;
  flex-direction: row;
`,Zi=o`
  -ms-flex-direction: column;
  -webkit-flex-direction: column;
  flex-direction: column;
`,Qi=o`
  -ms-flex-wrap: wrap;
  -webkit-flex-wrap: wrap;
  flex-wrap: wrap;
`,Ki=o`
  -ms-flex-wrap: nowrap;
  -webkit-flex-wrap: nowrap;
  flex-wrap: nowrap;
`,en=o`
  -ms-flex: 1 1 0.000000001px;
  -webkit-flex: 1;
  flex: 1;
  -webkit-flex-basis: 0.000000001px;
  flex-basis: 0.000000001px;
`,tn=o`
  -ms-flex: 1 1 auto;
  -webkit-flex: 1 1 auto;
  flex: 1 1 auto;
`,rn=o`
  -ms-flex: 1 1 auto;
  -webkit-flex: 1 1 auto;
  flex: 1 1 auto;
`,nn=o`
  display: none !important;
`,on=o`
  -ms-flex: 2;
  -webkit-flex: 2;
  flex: 2;
`,sn=o`
  -ms-flex: 3;
  -webkit-flex: 3;
  flex: 3;
`,an=o`
  -ms-flex: 4;
  -webkit-flex: 4;
  flex: 4;
`,ln=o`
  -ms-flex: 5;
  -webkit-flex: 5;
  flex: 5;
`,cn=o`
  -ms-flex: 6;
  -webkit-flex: 6;
  flex: 6;
`,dn=o`
  -ms-flex: 7;
  -webkit-flex: 7;
  flex: 7;
`,hn=o`
  -ms-flex: 8;
  -webkit-flex: 8;
  flex: 8;
`,un=o`
  -ms-flex: 9;
  -webkit-flex: 9;
  flex: 9;
`,pn=o`
  -ms-flex: 10;
  -webkit-flex: 10;
  flex: 10;
`,fn=o`
  -ms-flex: 11;
  -webkit-flex: 11;
  flex: 11;
`,mn=o`
  -ms-flex: 12;
  -webkit-flex: 12;
  flex: 12;
`,gn=o`
  -ms-flex-direction: row-reverse;
  -webkit-flex-direction: row-reverse;
  flex-direction: row-reverse;
`,vn=o`
  -ms-flex-direction: column-reverse;
  -webkit-flex-direction: column-reverse;
  flex-direction: column-reverse;
`,bn=o`
  -ms-flex-wrap: wrap-reverse;
  -webkit-flex-wrap: wrap-reverse;
  flex-wrap: wrap-reverse;
`,yn=o`
  display: block;
`,xn=o`
  visibility: hidden !important;
`,wn=o`
  position: relative;
`,_n=o`
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
`,kn=o`
  -webkit-overflow-scrolling: touch;
  overflow: auto;
`,Cn=o`
  position: fixed;
`,Sn=o`
  top: 0;
  left: 0;
  right: 0;
`,An=o`
  top: 0;
  right: 0;
  bottom: 0;
`,Pn=o`
  top: 0;
  bottom: 0;
  left: 0;
`,Tn=o`
  right: 0;
  bottom: 0;
  left: 0;
`,En=o`
  -ms-flex-align: start;
  -webkit-align-items: flex-start;
  align-items: flex-start;
`,In=o`
  -ms-flex-align: center;
  -webkit-align-items: center;
  align-items: center;
`,Ln=o`
  -ms-flex-align: end;
  -webkit-align-items: flex-end;
  align-items: flex-end;
`,On=o`
  -ms-flex-align: baseline;
  -webkit-align-items: baseline;
  align-items: baseline;
`,Mn=o`
  -ms-flex-pack: start;
  -webkit-justify-content: flex-start;
  justify-content: flex-start;
`,Rn=o`
  -ms-flex-pack: center;
  -webkit-justify-content: center;
  justify-content: center;
`,$n=o`
  -ms-flex-pack: end;
  -webkit-justify-content: flex-end;
  justify-content: flex-end;
`,Nn=o`
  -ms-flex-pack: distribute;
  -webkit-justify-content: space-around;
  justify-content: space-around;
`,Dn=o`
  -ms-flex-pack: justify;
  -webkit-justify-content: space-between;
  justify-content: space-between;
`,zn=o`
  -ms-align-self: flex-start;
  -webkit-align-self: flex-start;
  align-self: flex-start;
`,Bn=o`
  -ms-align-self: center;
  -webkit-align-self: center;
  align-self: center;
`,Fn=o`
  -ms-align-self: flex-end;
  -webkit-align-self: flex-end;
  align-self: flex-end;
`,Un=o`
  -ms-align-self: stretch;
  -webkit-align-self: stretch;
  align-self: stretch;
`,Vn=o`
  -ms-align-self: baseline;
  -webkit-align-self: baseline;
  align-self: baseline;
`,jn=o`
  -ms-flex-line-pack: start; /* IE10 */
  -ms-align-content: flex-start;
  -webkit-align-content: flex-start;
  align-content: flex-start;
`,Gn=o`
  -ms-flex-line-pack: end; /* IE10 */
  -ms-align-content: flex-end;
  -webkit-align-content: flex-end;
  align-content: flex-end;
`,Hn=o`
  -ms-flex-line-pack: center; /* IE10 */
  -ms-align-content: center;
  -webkit-align-content: center;
  align-content: center;
`,Wn=o`
  -ms-flex-line-pack: justify; /* IE10 */
  -ms-align-content: space-between;
  -webkit-align-content: space-between;
  align-content: space-between;
`,qn=o`
  -ms-flex-line-pack: distribute; /* IE10 */
  -ms-align-content: space-around;
  -webkit-align-content: space-around;
  align-content: space-around;
`,Yn=o`.layout.horizontal,.layout.vertical{${Yi}}.layout.inline{${Ji}}.layout.horizontal{${Xi}}.layout.vertical{${Zi}}.layout.wrap{${Qi}}.layout.no-wrap{${Ki}}.layout.center,.layout.center-center{${In}}.layout.center-center,.layout.center-justified{${Rn}}.flex{${en}}.flex-auto{${tn}}.flex-none{${rn}}.none{${nn}}`;
/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
function Jn(e){const t=new MouseEvent("click",{bubbles:!0});return e.dispatchEvent(t),t}function Xn(e){return e.currentTarget===e.target&&(e.composedPath()[0]===e.target&&(!e.target.disabled&&!function(e){const t=Zn;t&&(e.preventDefault(),e.stopImmediatePropagation());return async function(){Zn=!0,await null,Zn=!1}
/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */(),t}(e)))}o`.flex,.flex-1{${tn}}.flex-2{${on}}.flex-3{${sn}}.flex-4{${an}}.flex-5{${ln}}.flex-6{${cn}}.flex-7{${dn}}.flex-8{${hn}}.flex-9{${un}}.flex-10{${pn}}.flex-11{${fn}}.flex-12{${mn}}`,o`.layout.horizontal-reverse,.layout.vertical-reverse{${Yi}}.layout.horizontal-reverse{${gn}}.layout.vertical-reverse{${vn}}.layout.wrap-reverse{${bn}}`,o`.block{${yn}}[hidden]{${nn}}.invisible{${xn}}.relative{${wn}}.fit{${_n}}body.fullbleed{margin:0;height:100vh}.scroll{${kn}}.fixed-bottom,.fixed-left,.fixed-right,.fixed-top{${Cn}}.fixed-top{${Sn}}.fixed-right{${An}}.fixed-bottom{${Tn}}.fixed-left{${Pn}}`,o`
  .layout.start {
    ${En}
  }

  .layout.center,
  .layout.center-center {
    ${In}
  }

  .layout.end {
    ${Ln}
  }

  .layout.baseline {
    ${On}
  }

  .layout.start-justified {
    ${Mn}
  }

  .layout.center-justified,
  .layout.center-center {
    ${Rn}
  }

  .layout.end-justified {
    ${$n}
  }

  .layout.around-justified {
    ${Nn}
  }

  .layout.justified {
    ${Dn}
  }

  .self-start {
   ${zn}

  .self-center {
   ${Bn}
  }

  .self-end {
    ${Fn}
  }

  .self-stretch {
   ${Un}
  }

  .self-baseline {
   ${Vn}
  }

  .layout.start-aligned {
   ${jn}
  }

  .layout.end-aligned {
    ${Gn}
  }

  .layout.center-aligned {
   ${Hn}
  }

  .layout.between-aligned {
    ${Wn}
  }

  .layout.around-aligned {
    ${qn}
  }
`;let Zn=!1;function Qn(e,t){!t.bubbles||e.shadowRoot&&!t.composed||t.stopPropagation();const r=Reflect.construct(t.constructor,[t.type,t]),i=e.dispatchEvent(r);return i||t.preventDefault(),i}
/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Kn=Symbol("createValidator"),eo=Symbol("getValidityAnchor"),to=Symbol("privateValidator"),ro=Symbol("privateSyncValidity"),io=Symbol("privateCustomValidationMessage");function no(e){var t;class r extends e{constructor(){super(...arguments),this[t]=""}get validity(){return this[ro](),this[Gt].validity}get validationMessage(){return this[ro](),this[Gt].validationMessage}get willValidate(){return this[ro](),this[Gt].willValidate}checkValidity(){return this[ro](),this[Gt].checkValidity()}reportValidity(){return this[ro](),this[Gt].reportValidity()}setCustomValidity(e){this[io]=e,this[ro]()}requestUpdate(e,t,r){super.requestUpdate(e,t,r),this[ro]()}firstUpdated(e){super.firstUpdated(e),this[ro]()}[(t=io,ro)](){this[to]||(this[to]=this[Kn]());const{validity:e,validationMessage:t}=this[to].getValidity(),r=!!this[io],i=this[io]||t;this[Gt].setValidity({...e,customError:r},i,this[eo]()??void 0)}[Kn](){throw new Error("Implement [createValidator]")}[eo](){throw new Error("Implement [getValidityAnchor]")}}return r}
/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const oo=Symbol("getFormValue"),so=Symbol("getFormState");function ao(e){class t extends e{get form(){return this[Gt].form}get labels(){return this[Gt].labels}get name(){return this.getAttribute("name")??""}set name(e){this.setAttribute("name",e)}get disabled(){return this.hasAttribute("disabled")}set disabled(e){this.toggleAttribute("disabled",e)}attributeChangedCallback(e,t,r){if("name"!==e&&"disabled"!==e)super.attributeChangedCallback(e,t,r);else{const r="disabled"===e?null!==t:t;this.requestUpdate(e,r)}}requestUpdate(e,t,r){super.requestUpdate(e,t,r),this[Gt].setFormValue(this[oo](),this[so]())}[oo](){throw new Error("Implement [getFormValue]")}[so](){return this[oo]()}formDisabledCallback(e){this.disabled=e}}return t.formAssociated=!0,we([ue({noAccessor:!0})],t.prototype,"name",null),we([ue({type:Boolean,noAccessor:!0})],t.prototype,"disabled",null),t}
/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class lo{constructor(e){this.getCurrentState=e,this.currentValidity={validity:{},validationMessage:""}}getValidity(){const e=this.getCurrentState();if(!(!this.prevState||!this.equals(this.prevState,e)))return this.currentValidity;const{validity:t,validationMessage:r}=this.computeValidity(e);return this.prevState=this.copy(e),this.currentValidity={validationMessage:r,validity:{badInput:t.badInput,customError:t.customError,patternMismatch:t.patternMismatch,rangeOverflow:t.rangeOverflow,rangeUnderflow:t.rangeUnderflow,stepMismatch:t.stepMismatch,tooLong:t.tooLong,tooShort:t.tooShort,typeMismatch:t.typeMismatch,valueMissing:t.valueMissing}},this.currentValidity}}
/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class co extends lo{computeValidity(e){return this.checkboxControl||(this.checkboxControl=document.createElement("input"),this.checkboxControl.type="checkbox"),this.checkboxControl.checked=e.checked,this.checkboxControl.required=e.required,{validity:this.checkboxControl.validity,validationMessage:this.checkboxControl.validationMessage}}equals(e,t){return e.checked===t.checked&&e.required===t.required}copy({checked:e,required:t}){return{checked:e,required:t}}}
/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ho=no(ao(Wt(ae)));class uo extends ho{constructor(){super(),this.checked=!1,this.indeterminate=!1,this.required=!1,this.value="on",this.prevChecked=!1,this.prevDisabled=!1,this.prevIndeterminate=!1,this.addEventListener("click",(e=>{Xn(e)&&this.input&&(this.focus(),Jn(this.input))}))}update(e){(e.has("checked")||e.has("disabled")||e.has("indeterminate"))&&(this.prevChecked=e.get("checked")??this.checked,this.prevDisabled=e.get("disabled")??this.disabled,this.prevIndeterminate=e.get("indeterminate")??this.indeterminate),super.update(e)}render(){const e=!this.prevChecked&&!this.prevIndeterminate,t=this.prevChecked&&!this.prevIndeterminate,r=this.prevIndeterminate,i=this.checked&&!this.indeterminate,n=this.indeterminate,o=Je({disabled:this.disabled,selected:i||n,unselected:!i&&!n,checked:i,indeterminate:n,"prev-unselected":e,"prev-checked":t,"prev-indeterminate":r,"prev-disabled":this.prevDisabled}),{ariaLabel:s,ariaInvalid:a}=this;return V` <div class="container ${o}"> <input type="checkbox" id="input" aria-checked="${n?"mixed":G}" aria-label="${s||G}" aria-invalid="${a||G}" ?disabled="${this.disabled}" ?required="${this.required}" .indeterminate="${this.indeterminate}" .checked="${this.checked}" @input="${this.handleInput}" @change="${this.handleChange}"> <div class="outline"></div> <div class="background"></div> <md-focus-ring part="focus-ring" for="input"></md-focus-ring> <md-ripple for="input" ?disabled="${this.disabled}"></md-ripple> <svg class="icon" viewBox="0 0 18 18" aria-hidden="true"> <rect class="mark short"/> <rect class="mark long"/> </svg> </div> `}handleInput(e){const t=e.target;this.checked=t.checked,this.indeterminate=t.indeterminate}handleChange(e){Qn(this,e)}[oo](){return!this.checked||this.indeterminate?null:this.value}[so](){return String(this.checked)}formResetCallback(){this.checked=this.hasAttribute("checked")}formStateRestoreCallback(e){this.checked="true"===e}[Kn](){return new co((()=>this))}[eo](){return this.input}}Ie(uo),uo.shadowRootOptions={...ae.shadowRootOptions,delegatesFocus:!0},we([ue({type:Boolean})],uo.prototype,"checked",void 0),we([ue({type:Boolean})],uo.prototype,"indeterminate",void 0),we([ue({type:Boolean})],uo.prototype,"required",void 0),we([ue()],uo.prototype,"value",void 0),we([pe()],uo.prototype,"prevChecked",void 0),we([pe()],uo.prototype,"prevDisabled",void 0),we([pe()],uo.prototype,"prevIndeterminate",void 0),we([me("input")],uo.prototype,"input",void 0);
/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
const po=o`:host{border-start-start-radius:var(--md-checkbox-container-shape-start-start,var(--md-checkbox-container-shape,2px));border-start-end-radius:var(--md-checkbox-container-shape-start-end,var(--md-checkbox-container-shape,2px));border-end-end-radius:var(--md-checkbox-container-shape-end-end,var(--md-checkbox-container-shape,2px));border-end-start-radius:var(--md-checkbox-container-shape-end-start,var(--md-checkbox-container-shape,2px));display:inline-flex;height:var(--md-checkbox-container-size,18px);position:relative;vertical-align:top;width:var(--md-checkbox-container-size,18px);-webkit-tap-highlight-color:transparent;cursor:pointer}:host([disabled]){cursor:default}:host([touch-target=wrapper]){margin:max(0,(48px - var(--md-checkbox-container-size,18px))/2)}md-focus-ring{height:44px;inset:unset;width:44px}input{appearance:none;height:48px;margin:0;opacity:0;outline:0;position:absolute;width:48px;z-index:1;cursor:inherit}:host([touch-target=none]) input{height:100%;width:100%}.container{border-radius:inherit;display:flex;height:100%;place-content:center;place-items:center;position:relative;width:100%}.background,.icon,.outline{inset:0;position:absolute}.background,.outline{border-radius:inherit}.outline{border-color:var(--md-checkbox-outline-color,var(--md-sys-color-on-surface-variant,#49454f));border-style:solid;border-width:var(--md-checkbox-outline-width,2px);box-sizing:border-box}.background{background-color:var(--md-checkbox-selected-container-color,var(--md-sys-color-primary,#6750a4))}.background,.icon{opacity:0;transition-duration:150ms,50ms;transition-property:transform,opacity;transition-timing-function:cubic-bezier(.3,0,.8,.15),linear;transform:scale(.6)}:where(.selected) :is(.background,.icon){opacity:1;transition-duration:350ms,50ms;transition-timing-function:cubic-bezier(.05,.7,.1,1),linear;transform:scale(1)}md-ripple{border-radius:var(--md-checkbox-state-layer-shape,var(--md-sys-shape-corner-full,9999px));height:var(--md-checkbox-state-layer-size,40px);inset:unset;width:var(--md-checkbox-state-layer-size,40px);--md-ripple-hover-color:var(--md-checkbox-hover-state-layer-color, var(--md-sys-color-on-surface, #1d1b20));--md-ripple-hover-opacity:var(--md-checkbox-hover-state-layer-opacity, 0.08);--md-ripple-pressed-color:var(--md-checkbox-pressed-state-layer-color, var(--md-sys-color-primary, #6750a4));--md-ripple-pressed-opacity:var(--md-checkbox-pressed-state-layer-opacity, 0.12)}.selected md-ripple{--md-ripple-hover-color:var(--md-checkbox-selected-hover-state-layer-color, var(--md-sys-color-primary, #6750a4));--md-ripple-hover-opacity:var(--md-checkbox-selected-hover-state-layer-opacity, 0.08);--md-ripple-pressed-color:var(--md-checkbox-selected-pressed-state-layer-color, var(--md-sys-color-on-surface, #1d1b20));--md-ripple-pressed-opacity:var(--md-checkbox-selected-pressed-state-layer-opacity, 0.12)}.icon{fill:var(--md-checkbox-selected-icon-color,var(--md-sys-color-on-primary,#fff));height:var(--md-checkbox-icon-size,18px);width:var(--md-checkbox-icon-size,18px)}.mark.short{height:2px;transition-property:transform,height;width:2px}.mark.long{height:2px;transition-property:transform,width;width:10px}.mark{animation-duration:150ms;animation-timing-function:cubic-bezier(.3,0,.8,.15);transition-duration:150ms;transition-timing-function:cubic-bezier(.3,0,.8,.15)}.selected .mark{animation-duration:350ms;animation-timing-function:cubic-bezier(.05,.7,.1,1);transition-duration:350ms;transition-timing-function:cubic-bezier(.05,.7,.1,1)}.checked .mark,.prev-checked.unselected .mark{transform:scaleY(-1) translate(7px,-14px) rotate(45deg)}.checked .mark.short,.prev-checked.unselected .mark.short{height:5.6568542495px}.checked .mark.long,.prev-checked.unselected .mark.long{width:11.313708499px}.indeterminate .mark,.prev-indeterminate.unselected .mark{transform:scaleY(-1) translate(4px,-10px) rotate(0)}.prev-unselected .mark{transition-property:none}.prev-unselected.checked .mark.long{animation-name:prev-unselected-to-checked}@keyframes prev-unselected-to-checked{from{width:0}}:where(:hover) .outline{border-color:var(--md-checkbox-hover-outline-color,var(--md-sys-color-on-surface,#1d1b20));border-width:var(--md-checkbox-hover-outline-width,2px)}:where(:hover) .background{background:var(--md-checkbox-selected-hover-container-color,var(--md-sys-color-primary,#6750a4))}:where(:hover) .icon{fill:var(--md-checkbox-selected-hover-icon-color,var(--md-sys-color-on-primary,#fff))}:where(:focus-within) .outline{border-color:var(--md-checkbox-focus-outline-color,var(--md-sys-color-on-surface,#1d1b20));border-width:var(--md-checkbox-focus-outline-width,2px)}:where(:focus-within) .background{background:var(--md-checkbox-selected-focus-container-color,var(--md-sys-color-primary,#6750a4))}:where(:focus-within) .icon{fill:var(--md-checkbox-selected-focus-icon-color,var(--md-sys-color-on-primary,#fff))}:where(:active) .outline{border-color:var(--md-checkbox-pressed-outline-color,var(--md-sys-color-on-surface,#1d1b20));border-width:var(--md-checkbox-pressed-outline-width,2px)}:where(:active) .background{background:var(--md-checkbox-selected-pressed-container-color,var(--md-sys-color-primary,#6750a4))}:where(:active) .icon{fill:var(--md-checkbox-selected-pressed-icon-color,var(--md-sys-color-on-primary,#fff))}:where(.disabled,.prev-disabled) :is(.background,.icon,.mark){animation-duration:0s;transition-duration:0s}:where(.disabled) .outline{border-color:var(--md-checkbox-disabled-outline-color,var(--md-sys-color-on-surface,#1d1b20));border-width:var(--md-checkbox-disabled-outline-width,2px);opacity:var(--md-checkbox-disabled-container-opacity,.38)}:where(.selected.disabled) .outline{visibility:hidden}:where(.selected.disabled) .background{background:var(--md-checkbox-selected-disabled-container-color,var(--md-sys-color-on-surface,#1d1b20));opacity:var(--md-checkbox-selected-disabled-container-opacity,.38)}:where(.disabled) .icon{fill:var(--md-checkbox-selected-disabled-icon-color,var(--md-sys-color-surface,#fef7ff))}@media(forced-colors:active){.background{background-color:CanvasText}.selected.disabled .background{background-color:GrayText;opacity:1}.outline{border-color:CanvasText}.disabled .outline{border-color:GrayText;opacity:1}.icon{fill:Canvas}}`
/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */;let fo=class extends uo{};fo.styles=[po],fo=we([ce("md-checkbox")],fo);
/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
const mo=Wt(ae);class go extends mo{get name(){return this.getAttribute("name")??""}set name(e){this.setAttribute("name",e)}get form(){return this[Gt].form}constructor(){super(),this.disabled=!1,this.href="",this.target="",this.trailingIcon=!1,this.hasIcon=!1,this.type="submit",this.value="",this.handleActivationClick=e=>{Xn(e)&&this.buttonElement&&(this.focus(),Jn(this.buttonElement))},this.addEventListener("click",this.handleActivationClick)}focus(){this.buttonElement?.focus()}blur(){this.buttonElement?.blur()}render(){const e=this.disabled&&!this.href,t=this.href?this.renderLink():this.renderButton(),r=this.href?"link":"button";return V` ${this.renderElevationOrOutline?.()} <div class="background"></div> <md-focus-ring part="focus-ring" for="${r}"></md-focus-ring> <md-ripple part="ripple" for="${r}" ?disabled="${e}"></md-ripple> ${t} `}renderButton(){const{ariaLabel:e,ariaHasPopup:t,ariaExpanded:r}=this;return V`<button id="button" class="button" ?disabled="${this.disabled}" aria-label="${e||G}" aria-haspopup="${t||G}" aria-expanded="${r||G}"> ${this.renderContent()} </button>`}renderLink(){const{ariaLabel:e,ariaHasPopup:t,ariaExpanded:r}=this;return V`<a id="link" class="button" aria-label="${e||G}" aria-haspopup="${t||G}" aria-expanded="${r||G}" href="${this.href}" target="${this.target||G}">${this.renderContent()} </a>`}renderContent(){const e=V`<slot name="icon" @slotchange="${this.handleSlotChange}"></slot>`;return V` <span class="touch"></span> ${this.trailingIcon?G:e} <span class="label"><slot></slot></span> ${this.trailingIcon?e:G} `}handleSlotChange(){this.hasIcon=this.assignedIcons.length>0}}Ie(go),qt(go),go.formAssociated=!0,go.shadowRootOptions={mode:"open",delegatesFocus:!0},we([ue({type:Boolean,reflect:!0})],go.prototype,"disabled",void 0),we([ue()],go.prototype,"href",void 0),we([ue()],go.prototype,"target",void 0),we([ue({type:Boolean,attribute:"trailing-icon",reflect:!0})],go.prototype,"trailingIcon",void 0),we([ue({type:Boolean,attribute:"has-icon",reflect:!0})],go.prototype,"hasIcon",void 0),we([ue()],go.prototype,"type",void 0),we([ue({reflect:!0})],go.prototype,"value",void 0),we([me(".button")],go.prototype,"buttonElement",void 0),we([be({slot:"icon",flatten:!0})],go.prototype,"assignedIcons",void 0);
/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
class vo extends go{renderElevationOrOutline(){return V`<div class="outline"></div>`}}
/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const bo=o`:host{--_container-height:var(--md-outlined-button-container-height, 40px);--_disabled-label-text-color:var(--md-outlined-button-disabled-label-text-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-label-text-opacity:var(--md-outlined-button-disabled-label-text-opacity, 0.38);--_disabled-outline-color:var(--md-outlined-button-disabled-outline-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-outline-opacity:var(--md-outlined-button-disabled-outline-opacity, 0.12);--_focus-label-text-color:var(--md-outlined-button-focus-label-text-color, var(--md-sys-color-primary, #6750a4));--_hover-label-text-color:var(--md-outlined-button-hover-label-text-color, var(--md-sys-color-primary, #6750a4));--_hover-state-layer-color:var(--md-outlined-button-hover-state-layer-color, var(--md-sys-color-primary, #6750a4));--_hover-state-layer-opacity:var(--md-outlined-button-hover-state-layer-opacity, 0.08);--_label-text-color:var(--md-outlined-button-label-text-color, var(--md-sys-color-primary, #6750a4));--_label-text-font:var(--md-outlined-button-label-text-font, var(--md-sys-typescale-label-large-font, var(--md-ref-typeface-plain, Roboto)));--_label-text-line-height:var(--md-outlined-button-label-text-line-height, var(--md-sys-typescale-label-large-line-height, 1.25rem));--_label-text-size:var(--md-outlined-button-label-text-size, var(--md-sys-typescale-label-large-size, 0.875rem));--_label-text-weight:var(--md-outlined-button-label-text-weight, var(--md-sys-typescale-label-large-weight, var(--md-ref-typeface-weight-medium, 500)));--_outline-color:var(--md-outlined-button-outline-color, var(--md-sys-color-outline, #79747e));--_outline-width:var(--md-outlined-button-outline-width, 1px);--_pressed-label-text-color:var(--md-outlined-button-pressed-label-text-color, var(--md-sys-color-primary, #6750a4));--_pressed-outline-color:var(--md-outlined-button-pressed-outline-color, var(--md-sys-color-outline, #79747e));--_pressed-state-layer-color:var(--md-outlined-button-pressed-state-layer-color, var(--md-sys-color-primary, #6750a4));--_pressed-state-layer-opacity:var(--md-outlined-button-pressed-state-layer-opacity, 0.12);--_disabled-icon-color:var(--md-outlined-button-disabled-icon-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-icon-opacity:var(--md-outlined-button-disabled-icon-opacity, 0.38);--_focus-icon-color:var(--md-outlined-button-focus-icon-color, var(--md-sys-color-primary, #6750a4));--_hover-icon-color:var(--md-outlined-button-hover-icon-color, var(--md-sys-color-primary, #6750a4));--_icon-color:var(--md-outlined-button-icon-color, var(--md-sys-color-primary, #6750a4));--_icon-size:var(--md-outlined-button-icon-size, 18px);--_pressed-icon-color:var(--md-outlined-button-pressed-icon-color, var(--md-sys-color-primary, #6750a4));--_container-shape-start-start:var(--md-outlined-button-container-shape-start-start, var(--md-outlined-button-container-shape, var(--md-sys-shape-corner-full, 9999px)));--_container-shape-start-end:var(--md-outlined-button-container-shape-start-end, var(--md-outlined-button-container-shape, var(--md-sys-shape-corner-full, 9999px)));--_container-shape-end-end:var(--md-outlined-button-container-shape-end-end, var(--md-outlined-button-container-shape, var(--md-sys-shape-corner-full, 9999px)));--_container-shape-end-start:var(--md-outlined-button-container-shape-end-start, var(--md-outlined-button-container-shape, var(--md-sys-shape-corner-full, 9999px)));--_leading-space:var(--md-outlined-button-leading-space, 24px);--_trailing-space:var(--md-outlined-button-trailing-space, 24px);--_with-leading-icon-leading-space:var(--md-outlined-button-with-leading-icon-leading-space, 16px);--_with-leading-icon-trailing-space:var(--md-outlined-button-with-leading-icon-trailing-space, 24px);--_with-trailing-icon-leading-space:var(--md-outlined-button-with-trailing-icon-leading-space, 24px);--_with-trailing-icon-trailing-space:var(--md-outlined-button-with-trailing-icon-trailing-space, 16px);--_container-color:none;--_disabled-container-color:none;--_disabled-container-opacity:0}.outline{inset:0;border-style:solid;position:absolute;box-sizing:border-box;border-color:var(--_outline-color);border-start-start-radius:var(--_container-shape-start-start);border-start-end-radius:var(--_container-shape-start-end);border-end-start-radius:var(--_container-shape-end-start);border-end-end-radius:var(--_container-shape-end-end)}:host(:active) .outline{border-color:var(--_pressed-outline-color)}:host([disabled]) .outline{border-color:var(--_disabled-outline-color);opacity:var(--_disabled-outline-opacity)}@media(forced-colors:active){:host([disabled]) .background{border-color:GrayText}:host([disabled]) .outline{opacity:1}}.outline,md-ripple{border-width:var(--_outline-width)}md-ripple{inline-size:calc(100% - 2*var(--_outline-width));block-size:calc(100% - 2*var(--_outline-width));border-style:solid;border-color:transparent}`
/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */,yo=o`:host{border-start-start-radius:var(--_container-shape-start-start);border-start-end-radius:var(--_container-shape-start-end);border-end-start-radius:var(--_container-shape-end-start);border-end-end-radius:var(--_container-shape-end-end);box-sizing:border-box;cursor:pointer;display:inline-flex;gap:8px;min-height:var(--_container-height);outline:0;padding-block:calc((var(--_container-height) - max(var(--_label-text-line-height),var(--_icon-size)))/ 2);padding-inline-start:var(--_leading-space);padding-inline-end:var(--_trailing-space);place-content:center;place-items:center;position:relative;font-family:var(--_label-text-font);font-size:var(--_label-text-size);line-height:var(--_label-text-line-height);font-weight:var(--_label-text-weight);text-overflow:ellipsis;text-wrap:nowrap;user-select:none;-webkit-tap-highlight-color:transparent;vertical-align:top;--md-ripple-hover-color:var(--_hover-state-layer-color);--md-ripple-pressed-color:var(--_pressed-state-layer-color);--md-ripple-hover-opacity:var(--_hover-state-layer-opacity);--md-ripple-pressed-opacity:var(--_pressed-state-layer-opacity)}md-focus-ring{--md-focus-ring-shape-start-start:var(--_container-shape-start-start);--md-focus-ring-shape-start-end:var(--_container-shape-start-end);--md-focus-ring-shape-end-end:var(--_container-shape-end-end);--md-focus-ring-shape-end-start:var(--_container-shape-end-start)}:host([disabled]){cursor:default;pointer-events:none}.button{border-radius:inherit;cursor:inherit;display:inline-flex;align-items:center;justify-content:center;border:none;outline:0;-webkit-appearance:none;vertical-align:middle;background:rgba(0,0,0,0);text-decoration:none;min-width:calc(64px - var(--_leading-space) - var(--_trailing-space));width:100%;z-index:0;height:100%;font:inherit;color:var(--_label-text-color);padding:0;gap:inherit;text-transform:inherit}.button::-moz-focus-inner{padding:0;border:0}:host(:hover) .button{color:var(--_hover-label-text-color)}:host(:focus-within) .button{color:var(--_focus-label-text-color)}:host(:active) .button{color:var(--_pressed-label-text-color)}.background{background-color:var(--_container-color);border-radius:inherit;inset:0;position:absolute}.label{overflow:hidden}.label ::slotted(*),:is(.button,.label,.labelslot){text-overflow:inherit}:host([disabled]) .label{color:var(--_disabled-label-text-color);opacity:var(--_disabled-label-text-opacity)}:host([disabled]) .background{background-color:var(--_disabled-container-color);opacity:var(--_disabled-container-opacity)}@media(forced-colors:active){.background{border:1px solid CanvasText}:host([disabled]){--_disabled-icon-color:GrayText;--_disabled-icon-opacity:1;--_disabled-container-opacity:1;--_disabled-label-text-color:GrayText;--_disabled-label-text-opacity:1}}:host([has-icon]:not([trailing-icon])){padding-inline-start:var(--_with-leading-icon-leading-space);padding-inline-end:var(--_with-leading-icon-trailing-space)}:host([has-icon][trailing-icon]){padding-inline-start:var(--_with-trailing-icon-leading-space);padding-inline-end:var(--_with-trailing-icon-trailing-space)}::slotted([slot=icon]){display:inline-flex;position:relative;writing-mode:horizontal-tb;fill:currentColor;flex-shrink:0;color:var(--_icon-color);font-size:var(--_icon-size);inline-size:var(--_icon-size);block-size:var(--_icon-size)}:host(:hover) ::slotted([slot=icon]){color:var(--_hover-icon-color)}:host(:focus-within) ::slotted([slot=icon]){color:var(--_focus-icon-color)}:host(:active) ::slotted([slot=icon]){color:var(--_pressed-icon-color)}:host([disabled]) ::slotted([slot=icon]){color:var(--_disabled-icon-color);opacity:var(--_disabled-icon-opacity)}.touch{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}:host([touch-target=wrapper]){margin:max(0,(48px - var(--_container-height))/2) 0}:host([touch-target=none]) .touch{display:none}`
/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */;let xo=class extends vo{};xo.styles=[yo,bo],xo=we([ce("md-outlined-button")],xo);
/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
class wo extends ae{constructor(){super(...arguments),this.value=0,this.max=1,this.indeterminate=!1,this.fourColor=!1}render(){const{ariaLabel:e}=this;return V` <div class="progress ${Je(this.getRenderClasses())}" role="progressbar" aria-label="${e||G}" aria-valuemin="0" aria-valuemax="${this.max}" aria-valuenow="${this.indeterminate?G:this.value}">${this.renderIndicator()}</div> `}getRenderClasses(){return{indeterminate:this.indeterminate,"four-color":this.fourColor}}}Ie(wo),we([ue({type:Number})],wo.prototype,"value",void 0),we([ue({type:Number})],wo.prototype,"max",void 0),we([ue({type:Boolean})],wo.prototype,"indeterminate",void 0),we([ue({type:Boolean,attribute:"four-color"})],wo.prototype,"fourColor",void 0);
/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
class _o extends wo{renderIndicator(){return this.indeterminate?this.renderIndeterminateContainer():this.renderDeterminateContainer()}renderDeterminateContainer(){const e=100*(1-this.value/this.max);return V` <svg viewBox="0 0 4800 4800"> <circle class="track" pathLength="100"></circle> <circle class="active-track" pathLength="100" stroke-dashoffset="${e}"></circle> </svg> `}renderIndeterminateContainer(){return V` <div class="spinner"> <div class="left"> <div class="circle"></div> </div> <div class="right"> <div class="circle"></div> </div> </div>`}}
/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ko=o`:host{--_active-indicator-color: var(--md-circular-progress-active-indicator-color, var(--md-sys-color-primary, #6750a4));--_active-indicator-width: var(--md-circular-progress-active-indicator-width, 10);--_four-color-active-indicator-four-color: var(--md-circular-progress-four-color-active-indicator-four-color, var(--md-sys-color-tertiary-container, #ffd8e4));--_four-color-active-indicator-one-color: var(--md-circular-progress-four-color-active-indicator-one-color, var(--md-sys-color-primary, #6750a4));--_four-color-active-indicator-three-color: var(--md-circular-progress-four-color-active-indicator-three-color, var(--md-sys-color-tertiary, #7d5260));--_four-color-active-indicator-two-color: var(--md-circular-progress-four-color-active-indicator-two-color, var(--md-sys-color-primary-container, #eaddff));--_size: var(--md-circular-progress-size, 48px);display:inline-flex;vertical-align:middle;width:var(--_size);height:var(--_size);position:relative;align-items:center;justify-content:center;contain:strict;content-visibility:auto}.progress{flex:1;align-self:stretch;margin:4px}.progress,.spinner,.left,.right,.circle,svg,.track,.active-track{position:absolute;inset:0}svg{transform:rotate(-90deg)}circle{cx:50%;cy:50%;r:calc(50%*(1 - var(--_active-indicator-width)/100));stroke-width:calc(var(--_active-indicator-width)*1%);stroke-dasharray:100;fill:rgba(0,0,0,0)}.active-track{transition:stroke-dashoffset 500ms cubic-bezier(0, 0, 0.2, 1);stroke:var(--_active-indicator-color)}.track{stroke:rgba(0,0,0,0)}.progress.indeterminate{animation:linear infinite linear-rotate;animation-duration:1568.2352941176ms}.spinner{animation:infinite both rotate-arc;animation-duration:5332ms;animation-timing-function:cubic-bezier(0.4, 0, 0.2, 1)}.left{overflow:hidden;inset:0 50% 0 0}.right{overflow:hidden;inset:0 0 0 50%}.circle{box-sizing:border-box;border-radius:50%;border:solid calc(var(--_active-indicator-width)/100*(var(--_size) - 8px));border-color:var(--_active-indicator-color) var(--_active-indicator-color) rgba(0,0,0,0) rgba(0,0,0,0);animation:expand-arc;animation-iteration-count:infinite;animation-fill-mode:both;animation-duration:1333ms,5332ms;animation-timing-function:cubic-bezier(0.4, 0, 0.2, 1)}.four-color .circle{animation-name:expand-arc,four-color}.left .circle{rotate:135deg;inset:0 -100% 0 0}.right .circle{rotate:100deg;inset:0 0 0 -100%;animation-delay:-666.5ms,0ms}@media(forced-colors: active){.active-track{stroke:CanvasText}.circle{border-color:CanvasText CanvasText Canvas Canvas}}@keyframes expand-arc{0%{transform:rotate(265deg)}50%{transform:rotate(130deg)}100%{transform:rotate(265deg)}}@keyframes rotate-arc{12.5%{transform:rotate(135deg)}25%{transform:rotate(270deg)}37.5%{transform:rotate(405deg)}50%{transform:rotate(540deg)}62.5%{transform:rotate(675deg)}75%{transform:rotate(810deg)}87.5%{transform:rotate(945deg)}100%{transform:rotate(1080deg)}}@keyframes linear-rotate{to{transform:rotate(360deg)}}@keyframes four-color{0%{border-top-color:var(--_four-color-active-indicator-one-color);border-right-color:var(--_four-color-active-indicator-one-color)}15%{border-top-color:var(--_four-color-active-indicator-one-color);border-right-color:var(--_four-color-active-indicator-one-color)}25%{border-top-color:var(--_four-color-active-indicator-two-color);border-right-color:var(--_four-color-active-indicator-two-color)}40%{border-top-color:var(--_four-color-active-indicator-two-color);border-right-color:var(--_four-color-active-indicator-two-color)}50%{border-top-color:var(--_four-color-active-indicator-three-color);border-right-color:var(--_four-color-active-indicator-three-color)}65%{border-top-color:var(--_four-color-active-indicator-three-color);border-right-color:var(--_four-color-active-indicator-three-color)}75%{border-top-color:var(--_four-color-active-indicator-four-color);border-right-color:var(--_four-color-active-indicator-four-color)}90%{border-top-color:var(--_four-color-active-indicator-four-color);border-right-color:var(--_four-color-active-indicator-four-color)}100%{border-top-color:var(--_four-color-active-indicator-one-color);border-right-color:var(--_four-color-active-indicator-one-color)}}
`
/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */;let Co=class extends _o{};Co.styles=[ko],Co=we([ce("md-circular-progress")],Co);const So=o`
  display: -ms-flexbox;
  display: -webkit-flex;
  display: flex;
`;o`
  box-sizing: border-box;
`;const Ao=o`
  display: -ms-inline-flexbox;
  display: -webkit-inline-flex;
  display: inline-flex;
`,Po=o`
  -ms-flex-direction: row;
  -webkit-flex-direction: row;
  flex-direction: row;
`,To=o`
  -ms-flex-direction: column;
  -webkit-flex-direction: column;
  flex-direction: column;
`,Eo=o`
  -ms-flex-wrap: wrap;
  -webkit-flex-wrap: wrap;
  flex-wrap: wrap;
`,Io=o`
  -ms-flex-wrap: nowrap;
  -webkit-flex-wrap: nowrap;
  flex-wrap: nowrap;
`,Lo=o`
  -ms-flex: 1 1 0.000000001px;
  -webkit-flex: 1;
  flex: 1;
  -webkit-flex-basis: 0.000000001px;
  flex-basis: 0.000000001px;
`,Oo=o`
  -ms-flex: 1 1 auto;
  -webkit-flex: 1 1 auto;
  flex: 1 1 auto;
`,Mo=o`
  -ms-flex: 1 1 auto;
  -webkit-flex: 1 1 auto;
  flex: 1 1 auto;
`,Ro=o`
  display: none !important;
`,$o=o`
  -ms-flex: 2;
  -webkit-flex: 2;
  flex: 2;
`,No=o`
  -ms-flex: 3;
  -webkit-flex: 3;
  flex: 3;
`,Do=o`
  -ms-flex: 4;
  -webkit-flex: 4;
  flex: 4;
`,zo=o`
  -ms-flex: 5;
  -webkit-flex: 5;
  flex: 5;
`,Bo=o`
  -ms-flex: 6;
  -webkit-flex: 6;
  flex: 6;
`,Fo=o`
  -ms-flex: 7;
  -webkit-flex: 7;
  flex: 7;
`,Uo=o`
  -ms-flex: 8;
  -webkit-flex: 8;
  flex: 8;
`,Vo=o`
  -ms-flex: 9;
  -webkit-flex: 9;
  flex: 9;
`,jo=o`
  -ms-flex: 10;
  -webkit-flex: 10;
  flex: 10;
`,Go=o`
  -ms-flex: 11;
  -webkit-flex: 11;
  flex: 11;
`,Ho=o`
  -ms-flex: 12;
  -webkit-flex: 12;
  flex: 12;
`,Wo=o`
  -ms-flex-direction: row-reverse;
  -webkit-flex-direction: row-reverse;
  flex-direction: row-reverse;
`,qo=o`
  -ms-flex-direction: column-reverse;
  -webkit-flex-direction: column-reverse;
  flex-direction: column-reverse;
`,Yo=o`
  -ms-flex-wrap: wrap-reverse;
  -webkit-flex-wrap: wrap-reverse;
  flex-wrap: wrap-reverse;
`,Jo=o`
  display: block;
`,Xo=o`
  visibility: hidden !important;
`,Zo=o`
  position: relative;
`,Qo=o`
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
`,Ko=o`
  -webkit-overflow-scrolling: touch;
  overflow: auto;
`,es=o`
  position: fixed;
`,ts=o`
  top: 0;
  left: 0;
  right: 0;
`,rs=o`
  top: 0;
  right: 0;
  bottom: 0;
`,is=o`
  top: 0;
  bottom: 0;
  left: 0;
`,ns=o`
  right: 0;
  bottom: 0;
  left: 0;
`,os=o`
  -ms-flex-align: start;
  -webkit-align-items: flex-start;
  align-items: flex-start;
`,ss=o`
  -ms-flex-align: center;
  -webkit-align-items: center;
  align-items: center;
`,as=o`
  -ms-flex-align: end;
  -webkit-align-items: flex-end;
  align-items: flex-end;
`,ls=o`
  -ms-flex-align: baseline;
  -webkit-align-items: baseline;
  align-items: baseline;
`,cs=o`
  -ms-flex-pack: start;
  -webkit-justify-content: flex-start;
  justify-content: flex-start;
`,ds=o`
  -ms-flex-pack: center;
  -webkit-justify-content: center;
  justify-content: center;
`,hs=o`
  -ms-flex-pack: end;
  -webkit-justify-content: flex-end;
  justify-content: flex-end;
`,us=o`
  -ms-flex-pack: distribute;
  -webkit-justify-content: space-around;
  justify-content: space-around;
`,ps=o`
  -ms-flex-pack: justify;
  -webkit-justify-content: space-between;
  justify-content: space-between;
`,fs=o`
  -ms-align-self: flex-start;
  -webkit-align-self: flex-start;
  align-self: flex-start;
`,ms=o`
  -ms-align-self: center;
  -webkit-align-self: center;
  align-self: center;
`,gs=o`
  -ms-align-self: flex-end;
  -webkit-align-self: flex-end;
  align-self: flex-end;
`,vs=o`
  -ms-align-self: stretch;
  -webkit-align-self: stretch;
  align-self: stretch;
`,bs=o`
  -ms-align-self: baseline;
  -webkit-align-self: baseline;
  align-self: baseline;
`,ys=o`
  -ms-flex-line-pack: start; /* IE10 */
  -ms-align-content: flex-start;
  -webkit-align-content: flex-start;
  align-content: flex-start;
`,xs=o`
  -ms-flex-line-pack: end; /* IE10 */
  -ms-align-content: flex-end;
  -webkit-align-content: flex-end;
  align-content: flex-end;
`,ws=o`
  -ms-flex-line-pack: center; /* IE10 */
  -ms-align-content: center;
  -webkit-align-content: center;
  align-content: center;
`,_s=o`
  -ms-flex-line-pack: justify; /* IE10 */
  -ms-align-content: space-between;
  -webkit-align-content: space-between;
  align-content: space-between;
`,ks=o`
  -ms-flex-line-pack: distribute; /* IE10 */
  -ms-align-content: space-around;
  -webkit-align-content: space-around;
  align-content: space-around;
`,Cs=o`.layout.horizontal,.layout.vertical{${So}}.layout.inline{${Ao}}.layout.horizontal{${Po}}.layout.vertical{${To}}.layout.wrap{${Eo}}.layout.no-wrap{${Io}}.layout.center,.layout.center-center{${ss}}.layout.center-center,.layout.center-justified{${ds}}.flex{${Lo}}.flex-auto{${Oo}}.flex-none{${Mo}}.none{${Ro}}`;o`.flex,.flex-1{${Oo}}.flex-2{${$o}}.flex-3{${No}}.flex-4{${Do}}.flex-5{${zo}}.flex-6{${Bo}}.flex-7{${Fo}}.flex-8{${Uo}}.flex-9{${Vo}}.flex-10{${jo}}.flex-11{${Go}}.flex-12{${Ho}}`,o`.layout.horizontal-reverse,.layout.vertical-reverse{${So}}.layout.horizontal-reverse{${Wo}}.layout.vertical-reverse{${qo}}.layout.wrap-reverse{${Yo}}`,o`.block{${Jo}}[hidden]{${Ro}}.invisible{${Xo}}.relative{${Zo}}.fit{${Qo}}body.fullbleed{margin:0;height:100vh}.scroll{${Ko}}.fixed-bottom,.fixed-left,.fixed-right,.fixed-top{${es}}.fixed-top{${ts}}.fixed-right{${rs}}.fixed-bottom{${ns}}.fixed-left{${is}}`,o`
  .layout.start {
    ${os}
  }

  .layout.center,
  .layout.center-center {
    ${ss}
  }

  .layout.end {
    ${as}
  }

  .layout.baseline {
    ${ls}
  }

  .layout.start-justified {
    ${cs}
  }

  .layout.center-justified,
  .layout.center-center {
    ${ds}
  }

  .layout.end-justified {
    ${hs}
  }

  .layout.around-justified {
    ${us}
  }

  .layout.justified {
    ${ps}
  }

  .self-start {
   ${fs}

  .self-center {
   ${ms}
  }

  .self-end {
    ${gs}
  }

  .self-stretch {
   ${vs}
  }

  .self-baseline {
   ${bs}
  }

  .layout.start-aligned {
   ${ys}
  }

  .layout.end-aligned {
    ${xs}
  }

  .layout.center-aligned {
   ${ws}
  }

  .layout.between-aligned {
    ${_s}
  }

  .layout.around-aligned {
    ${ks}
  }
`;var Ss=function(e,t,r,i){var n,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,r,s):n(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s};class As extends ae{constructor(){super(...arguments),this.language="en",this.wide=!1,this.rtl=!1,this.hasLlm=!1,this.largeFont=!1,this.themeColor="#002255",this.installMediaQueryWatcher=(e,t)=>{let r=window.matchMedia(e);r.addListener((e=>t(e.matches))),t(r.matches)}}static get styles(){return[Cs,o`[hidden]{display:none!important}.lightDarkContainer{padding-left:8px;padding-right:8px;font-size:14px;margin-bottom:16px}`]}get isAppleDevice(){return/Macintosh|iPhone|iPad/.test(navigator.userAgent)}connectedCallback(){super.connectedCallback(),this.hasLlm=window.appGlobals.hasLlm,this.addGlobalListener("yp-language-loaded",this._languageEvent.bind(this)),this.addGlobalListener("yp-large-font",this._largeFont.bind(this)),this.addGlobalListener("yp-theme-color",this._changeThemeColor.bind(this)),this.addGlobalListener("yp-theme-dark-mode",this._changeThemeDarkMode.bind(this)),window.appGlobals&&window.appGlobals.i18nTranslation&&window.appGlobals.locale?(this.language=window.appGlobals.locale,this._setupRtl()):this.language="",this.installMediaQueryWatcher("(min-width: 900px)",(e=>{this.wide=e})),this.setupThemeSettings()}hasBooted(){this.hasLlm=window.appGlobals.hasLlm}setupBootListener(){this.addGlobalListener("yp-boot-from-server",this.hasBooted.bind(this))}async setupThemeSettings(){await new Promise((e=>setTimeout(e,50))),this.themeDarkMode=window.appGlobals.theme.themeDarkMode,this.themeHighContrast=window.appGlobals.theme.themeHighContrast}disconnectedCallback(){super.disconnectedCallback(),this.removeGlobalListener("yp-language-loaded",this._languageEvent.bind(this)),this.removeGlobalListener("yp-large-font",this._largeFont.bind(this)),this.removeGlobalListener("yp-theme-color",this._changeThemeColor.bind(this)),this.removeGlobalListener("yp-theme-dark-mode",this._changeThemeDarkMode.bind(this)),this.removeGlobalListener("yp-boot-from-server",this.hasBooted.bind(this))}_changeThemeColor(e){this.themeColor=e.detail}_changeThemeDarkMode(e){this.themeDarkMode=e.detail}updated(e){super.updated(e),e.has("language")&&this.languageChanged()}static get rtlLanguages(){return["fa","ar","he","ur","ps","ku","sd","dv","ug","yi"]}languageChanged(){}get isSafari(){const e=navigator.userAgent;return e.includes("Safari")&&e.includes("Version")&&!e.includes("Chrome")&&!e.includes("Edg")}_setupRtl(){const e=this.language.substring(0,2).toLowerCase();As.rtlLanguages.indexOf(e)>-1?this.rtl=!0:this.rtl=!1}scrimDisableAction(e){e.preventDefault(),e.stopPropagation()}_largeFont(e){this.largeFont=e.detail}_languageEvent(e){this.language=e.detail.language,window.appGlobals.locale=e.detail.language,void 0!==this.rtl&&this._setupRtl()}fire(e,t={},r=this){const i=new CustomEvent(e,{detail:t,bubbles:!0,composed:!0});r.dispatchEvent(i)}fireGlobal(e,t={}){this.fire(e,t,document)}addListener(e,t,r=this){r.addEventListener(e,t,!1)}addGlobalListener(e,t){this.addListener(e,t,document)}removeListener(e,t,r=this){r.removeEventListener(e,t)}removeGlobalListener(e,t){this.removeListener(e,t,document)}t(...e){const t=e[0];if(window.appGlobals&&window.appGlobals.i18nTranslation){let e=window.appGlobals.i18nTranslation.t(t);return e||(e=""),e}return t}$$(e){return this.shadowRoot?this.shadowRoot.querySelector(e):null}toggleHighContrast(){this.themeHighContrast=!this.themeHighContrast,window.appGlobals.theme.themeHighContrast=!window.appGlobals.theme.themeHighContrast,window.appGlobals.theme.themeHighContrast?(window.appGlobals.activity("Settings - high contrast mode"),localStorage.setItem(As.highContrastLocalStorageKey,"true")):(window.appGlobals.activity("Settings - non high contrast mode"),localStorage.removeItem(As.highContrastLocalStorageKey)),window.appGlobals.theme.themeChanged()}toggleDarkMode(){this.themeDarkMode=!this.themeDarkMode,window.appGlobals.theme.themeDarkMode=!window.appGlobals.theme.themeDarkMode,window.appGlobals.theme.themeDarkMode?(window.appGlobals.activity("Settings - dark mode"),localStorage.setItem(As.darkModeLocalStorageKey,"true")):(window.appGlobals.activity("Settings - light mode"),localStorage.removeItem(As.darkModeLocalStorageKey)),window.appGlobals.theme.themeChanged()}renderThemeToggle(e=!1){return V`<div class="layout vertical center-center lightDarkContainer"> ${this.themeDarkMode?V` <md-outlined-icon-button class="darkModeButton" @click="${this.toggleDarkMode}"><md-icon>light_mode</md-icon></md-outlined-icon-button> `:V` <md-outlined-icon-button class="darkModeButton" @click="${this.toggleDarkMode}"><md-icon>dark_mode</md-icon></md-outlined-icon-button> `} <div ?hidden="${e}">${this.t("Light/Dark")}</div> </div> <div class="layout vertical center-center lightDarkContainer" ?hidden="${this.isAppleDevice}"> ${this.themeHighContrast?V` <md-outlined-icon-button class="darkModeButton" @click="${this.toggleHighContrast}"><md-icon>contrast_rtl_off</md-icon></md-outlined-icon-button> `:V` <md-outlined-icon-button class="darkModeButton" @click="${this.toggleHighContrast}"><md-icon>contrast</md-icon></md-outlined-icon-button> `} <div ?hidden="${e}">${this.t("Contrast")}</div> </div>`}}As.darkModeLocalStorageKey="md3-yp-dark-mode",As.highContrastLocalStorageKey="md3-yp-high-contrast-mode",Ss([ue({type:String})],As.prototype,"language",void 0),Ss([ue({type:Boolean})],As.prototype,"wide",void 0),Ss([ue({type:Boolean})],As.prototype,"rtl",void 0),Ss([ue({type:Boolean})],As.prototype,"hasLlm",void 0),Ss([ue({type:Boolean})],As.prototype,"largeFont",void 0),Ss([ue({type:String})],As.prototype,"themeColor",void 0),Ss([ue({type:Boolean})],As.prototype,"themeDarkMode",void 0),Ss([ue({type:Boolean})],As.prototype,"themeHighContrast",void 0);var Ps=function(e,t,r,i){var n,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,r,s):n(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s};class Ts extends As{constructor(){super(...arguments),this.childType="solution",this.showEloRatings=!1,this.activeSubProblemIndex=null,this.activeSolutionIndex=null,this.activePolicyIndex=null,this.activePopulationIndex=0,this.firstTimeSubProblemClick=!0,this.activeGroupIndex=null,this.longDescriptions=!1,this.displayStates=new Map,this.subProblemListScrollPositionX=0,this.subProblemListScrollPositionY=0,this.subProblemColors=[],this.maxTopSearchQueries=4,this.maxUsedSearchResults=1e3}connectedCallback(){super.connectedCallback(),this.memory&&(2==this.memory.groupId&&(this.maxTopSearchQueries=4,this.maxUsedSearchResults=1e3),2===this.memory.groupId&&(this.longDescriptions=!0),this.memory.subProblemClientColors?this.subProblemColors=this.memory.subProblemClientColors:this.subProblemColors=["#0b60b9","#ee782d","#face2d","#50c363","#cf1103","#e9a633","#87559b","#3f5fce"])}updateRoutes(){this.fire("update-route",{activeSolutionIndex:this.activeSolutionIndex,activeSubProblemIndex:this.activeSubProblemIndex,activePopulationIndex:this.activePopulationIndex})}updated(e){super.updated(e),(e.has("activeSolutionIndex")||e.has("activePolicyIndex")||e.has("activeSubProblemIndex")||e.has("activePopulationIndex"))&&this.updateRoutes(),e.has("activeSubProblemIndex")&&null!==this.activeSubProblemIndex&&this.setSubProblemColor(this.activeSubProblemIndex)}exitSubProblemScreen(){window.scrollTo(this.subProblemListScrollPositionX,this.subProblemListScrollPositionY)}async toggleDisplayState(e){const t=window.scrollY,r=this.displayStates.get(e);this.displayStates.set(e,!r),this.requestUpdate(),await this.updateComplete,window.scrollTo(0,t)}toggleScores(){const e=this.$$("#showScores");this.showEloRatings=e.checked,window.psAppGlobals.activity("View memory - toggle scores "+(this.showEloRatings?"on":"off"))}fixImageUrlIfNeeded(e){return e.startsWith("https")?e:`https://${e}`}static get styles(){return[super.styles,o`.topContainer{margin-right:32px;margin-top:24px;margin-bottom:64px}.topContainer[is-header]{width:100%;max-width:100%}.subProblemImage[is-header]{margin-bottom:32px;margin-top:0}.subProblemImage[not-header]{margin-bottom:16px;margin-top:-16px;margin-left:8px;margin-right:8px}.problemStatement{font-size:22px;padding:16px;margin:16px 0;border-radius:16px;line-height:1.5;background-color:var(--md-sys-color-surface);color:var(--md-sys-color-on-surface);max-width:960px;margin-bottom:0;padding-top:8px}.problemStatementText{padding:16px;font-size:26px}.subProblemStatement,.subProblemTitle{font-size:22px;padding:8px;margin:8px;border-radius:12px;line-height:1.4;max-width:960px}.subProblemStatement{padding-left:0;padding-right:16px}.subProblemStatement[not-header]{background-color:var(--md-sys-color-surface);color:var(--md-sys-color-on-surface)}.subProblemStatement[is-header]{font-size:18px}.subProblemTitle{font-size:26px;padding-bottom:0;font-family:'Roboto Condensed',sans-serif}.subProblemMainTitle{font-size:32px;margin-left:8px}.subProblemMainTitle[is-header]{margin-left:8px}.headerContainer[is-header]{position:relative;width:100%}.subProblem{opacity:1;border-radius:12px;padding:16px;margin:16px 0;background-color:var(--md-sys-color-primary-container);color:var(--md-sys-color-on-primary-container);margin-bottom:8px;padding-bottom:16px}.subProblem[is-header]{cursor:default;background-color:var(--md-sys-color-secondary-container);color:var(--md-sys-color-on-secondary-container);max-height:206px;margin:0;max-width:960px;margin-top:24px}.subProblem[is-wordy]{max-height:300px}.headerContainer[is-wordy]{padding-bottom:28px}.subProblem[not-header]{cursor:pointer;background-color:var(--md-sys-color-surface);color:var(--md-sys-color-on-surface);max-width:450px;margin-top:16px;margin-bottom:16px;padding-top:0;margin-right:16px;margin-left:16px}.navButton[is-header]{position:absolute;bottom:0;left:0}.title{font-family:'Roboto Condensed',sans-serif;font-size:32px;margin-bottom:8px;color:var(--md-sys-color-secondary);background-color:var(--md-sys-color-on-secondary);text-align:center;padding:16px;border-radius:16px;max-width:960px;margin-top:32px;width:100%}.smallerTitle{font-size:22px}.subProblem.lessProminent{opacity:.55}.profileImage{width:50px;height:50px;min-height:50px;min-width:50px;margin-right:8px}.searchResults{background-color:var(--md-sys-color-surface);color:var(--md-sys-color-on-surface)}.row{padding:8px;margin:8px;border-radius:16px;background-color:var(--md-sys-color-on-primary);color:var(--md-sys-color-primary);min-width:350px;width:550px;font-size:16px;vertical-align:center;padding-bottom:16px}.row[current-user]{background-color:var(--md-sys-color-teriary);color:var(--md-sys-color-on-primary)}.column{padding:8px;padding-bottom:0}.index{font-size:16px}.ideaName{padding-bottom:0;width:100%}.nameAndScore{width:100%}.subProblemContainer{width:100%}.scores{margin-top:16px;padding:16px;padding-top:12px;padding-bottom:12px;margin-bottom:0;text-align:center;background-color:var(--md-sys-color-surface-variant);color:var(--md-sys-color-on-surface-variant);border-radius:24px;font-size:14px;line-height:1.2}.checkboxText{color:var(--md-sys-color-primary);margin-top:14px}md-checkbox{padding-bottom:8px}.loading{display:flex;justify-content:center;align-items:center;width:100%;height:100vh}.scores[hidden]{display:none}.winLosses{margin-top:4px}.scoreAndNameContainer{width:100%}.exportButton{margin-bottom:128px;margin-top:32px}.queryType{font-size:18px;margin-top:16px;margin-bottom:8px}.query{font-size:16px;margin-bottom:0;opacity:.7}.queryUsed{font-weight:500;opacity:1}.card{padding:16px;padding-top:0;margin:8px;border-radius:8px;width:100%;max-width:960px;color:var(--md-sys-color-on-surface)}.searchItem{opacity:.5}a{color:var(--md-sys-color-on-surface)}.selectedSearchItem{opacity:1}.searchTitle{margin-top:16px}.url{margin-bottom:16px;margin-top:4px}.problemStatementImage{margin-top:24px}@media (max-width:960px){.problemStatementText{font-size:22px}.headerContainer[is-wordy]{padding-bottom:16px}.subProblemMainTitle{font-size:28px;line-height:1.3}.subProblemStatement,.subProblemTitle{font-size:18px;max-width:100%}.subProblemStatement{padding-left:8px;padding-right:8px}.subProblem{max-width:100%!important;height:100%;max-height:100%;padding:8px;padding-bottom:0}.subProblemStatement{padding:0;padding-bottom:32px}.subProblem[is-header]{max-width:100%!important;height:100%;max-height:100%}.subProblemMainTitle[is-header]{margin:8px;font-size:24px}.navButton[is-header]{position:absolute;bottom:0;right:0}.subProblemImage[is-header]{margin-bottom:8px}.title{margin-top:16px;max-width:100%;margin-right:8px;margin-left:8px;font-size:26px;border-radius:16px;max-width:100%}.smallerTitle{font-size:16px;max-width:320px}.topContainer{margin-left:16px;margin-right:16px}.problemStatement{font-size:18px;max-width:100%;margin-bottom:16px}.queryType{font-size:16px;margin-top:12px;margin-bottom:6px}.query{font-size:14px;margin-bottom:3px}}@media (min-width:960px){.questionTitle{margin-bottom:16px}}@media (max-width:960px){.loading{width:100vw;height:100vh}.searchTitle{max-width:320px}.problemStatement{padding-left:0;padding-right:0;padding-bottom:0;margin:0;margin-top:8px;margin-bottom:16px}.problemStatementText{margin-top:0;padding-top:0;margin-bottom:0;padding-bottom:0;font-size:16px}}`]}isUsedSearch(e,t){return t<this.maxUsedSearchResults||e.position&&e.position<=this.maxUsedSearchResults||e.originalPosition&&e.originalPosition<=this.maxUsedSearchResults?"selectedSearchItem":""}closeSubProblem(e){this.activeSubProblemIndex=null,e.stopPropagation(),this.fire("yp-theme-color",this.subProblemColors[7])}setSubProblemColor(e){e<7&&this.fire("yp-theme-color",this.subProblemColors[e])}setSubProblem(e){this.activeSubProblemIndex=e,this.subProblemListScrollPositionX=window.scrollX,this.subProblemListScrollPositionY=window.scrollY,window.scrollTo(0,0),(this.firstTimeSubProblemClick||null===this.activePopulationIndex)&&(this.firstTimeSubProblemClick=!1,this.memory.subProblems.length>0&&this.memory.subProblems[this.activeSubProblemIndex].solutions&&(this.activePopulationIndex=this.memory.subProblems[this.activeSubProblemIndex].solutions.populations.length-1)),this.updateRoutes(),window.psAppGlobals.activity("Sub Problem - click")}toggleDarkMode(){this.fire("yp-theme-dark-mode",!this.themeDarkMode),window.psAppGlobals.activity("Solutions - toggle darkmode"),this.themeDarkMode?(window.psAppGlobals.activity("Settings - dark mode"),localStorage.setItem("md3-ps-dark-mode","true")):(window.psAppGlobals.activity("Settings - light mode"),localStorage.removeItem("md3-ps-dark-mode"))}renderThemeToggle(){return V`<div class="layout vertical center-center"> ${this.themeDarkMode?V` <md-outlined-icon-button class="darkModeButton" @click="${this.toggleDarkMode}"><md-icon>light_mode</md-icon></md-outlined-icon-button> `:V` <md-outlined-icon-button class="darkModeButton" @click="${this.toggleDarkMode}"><md-icon>dark_mode</md-icon></md-outlined-icon-button> `} </div> `}renderProblemStatement(e=void 0){return V` ${this.wide?G:V` ${this.renderThemeToggle()} `} ${this.memory.problemStatement.imageUrl?V` <img class="problemStatementImage" alt="${this.memory.problemStatement.imagePrompt}" title="${this.memory.problemStatement.imagePrompt}" width="${this.wide?650:340}" height="${this.wide?371:194}" src="${this.memory.problemStatement.imageUrl}"> `:V` <div class="title"> ${e||this.t("Problem Statement")} </div> `} <div class="problemStatement"> <div class="problemStatementText"> ${this.memory.problemStatement.description} </div> </div> `}renderSubProblemList(e,t=this.t("Sub Problems")){return V` <div class="topContainer layout vertical center-center"> ${this.renderProblemStatement()} <div class="title">${t}</div> <div class="subProblemContainer layout horizontal center-justified wrap"> ${e.map(((e,t)=>{const r=t>=7;return this.renderSubProblem(e,r,t)}))} </div> </div> `}getImgHeight(e){return this.wide?e?170:275:e?177:193}getImgWidth(e){return this.wide?e?298:481:e?310:350}renderSubProblemImageUrl(e,t){return V` <div class="layout horizontal ${e?"":"center-center"} subProblemImage"> <img loading="lazy" title="${t.imagePrompt}" alt="${t.imagePrompt}" ?is-header="${e}" ?not-header="${!e}" class="subProblemImage" height="${this.getImgHeight(e)}" width="${this.getImgWidth(e)}" src="${this.fixImageUrlIfNeeded(t.imageUrl)}"> </div> `}renderSubProblem(e,t,r,i=!1,n=!1,o=!1){return V` <div ?is-wordy="${i&&this.longDescriptions}" ?not-header="${!i}" ?is-header="${i}" class="subProblem ${t?"lessProminent":""}" @click="${()=>{i||this.setSubProblem(r)}}"> <div class="subProblemTitle layout ${i?this.wide?"horizontal":"vertical":"vertical center-center"}"> ${e.imageUrl&&!i||!this.wide?this.renderSubProblemImageUrl(i,e):G} <div ?is-wordy="${this.longDescriptions}" ?is-header="${i}" ?not-header="${!i}" class="layout headerContainer ${"horizontal"}"> <div class="layout vertical"> <div class="subProblemMainTitle" ?is-header="${i}"> ${e.title} </div> <div ?hidden="${!i}" ?is_header="${i}" class="subProblemStatement"> ${e.displayDescription||e.description} </div> </div> ${e.imageUrl&&i&&this.wide?this.renderSubProblemImageUrl(i,e):G} <div ?is-header="${i}" class="navButton ${i?"horizontal flex":""}"> ${i&&!o?V` <md-icon-button aria-label="Previous" .disabled="${0===this.activeSubProblemIndex}" @click="${e=>{e.stopPropagation(),this.activeSubProblemIndex>0&&(this.activeSubProblemIndex-=1,this.setSubProblemColor(this.activeSubProblemIndex),this.activeGroupIndex=null,window.psAppGlobals.activity("Sub Problem - click previous"))}}"> <md-icon>navigate_before</md-icon> </md-icon-button> <md-icon-button id="nextButton" aria-label="Next" .disabled="${6===this.activeSubProblemIndex}" @click="${e=>{e.stopPropagation(),!this.$$("#nextButton").disabled&&this.activeSubProblemIndex<6&&(this.activeSubProblemIndex+=1,this.setSubProblemColor(this.activeSubProblemIndex),this.activeGroupIndex=null,window.psAppGlobals.activity("Sub Problem - click next"))}}"> <md-icon>navigate_next</md-icon> </md-icon-button> <md-icon-button aria-label="Close" @click="${e=>{e.stopPropagation(),this.activeSubProblemIndex=null,this.fire("yp-theme-color",this.subProblemColors[7]),this.exitSubProblemScreen(),this.activeGroupIndex=null,window.psAppGlobals.activity("Sub Problem - exit")}}"> <md-icon>close</md-icon> </md-icon-button> `:G} </div> </div> </div> <div ?hidden="${i}" class="subProblemStatement"> ${e.displayDescription||e.description} </div> ${n&&!i?V` <div class="subProblemStatement"> ${e.whyIsSubProblemImportant} </div> `:G} </div> `}renderSearchQueries(e,t){return t?V` <div class="title smallerTitle layout horizontal center-center" @click="${t=>{t.stopPropagation(),this.toggleDisplayState(e)}}"> <div class="flex"></div> <div>${e}</div> <div class="flex"></div> <md-icon-button><md-icon>expand_more</md-icon></md-icon-button> </div> <div class="searchResults layout vertical self-start"> ${this.displayStates.get(e)?Object.entries(t).map((([e,t])=>0===t.length?G:V` <div class="queryType">${e}</div> ${t.map(((e,t)=>V` <div class="column"> <div class="query ${t<this.maxTopSearchQueries?"queryUsed":""}"> ${e} </div> </div> `))} `)):G} </div> `:G}getUrlInRightSize(e){return!this.wide&&e.length>30?`${e.substring(0,30)}...`:e}renderSearchResults(e,t){return t&&t.pages?V` <div class="title smallerTitle layout horizontal" @click="${t=>{t.stopPropagation(),this.toggleDisplayState(e)}}"> <div class="flex"></div> <div>${e}</div> <div class="flex"></div> <md-icon-button><md-icon>expand_more</md-icon></md-icon-button> </div> <div class="searchResults"> ${this.displayStates.get(e)?Object.entries(t.pages).map((([e,t])=>0===t.length?G:V` <div class="queryType">${e}</div> <div class="card"> ${t.map(((e,t)=>V` <div class="searchItem ${this.isUsedSearch(e,t)}"> <div class="searchTitle">${e.title}</div> <div class="url"> <a target="blank" href="${e.url||e.link}" target="_blank"> ${this.getUrlInRightSize(e.url||e.link)} </a> </div> </div> `))} </div> `)):G} </div> `:G}}Ps([ue({type:Object})],Ts.prototype,"memory",void 0),Ps([ue({type:String})],Ts.prototype,"childType",void 0),Ps([ue({type:Boolean})],Ts.prototype,"showEloRatings",void 0),Ps([ue({type:Number})],Ts.prototype,"activeSubProblemIndex",void 0),Ps([ue({type:Number})],Ts.prototype,"activeSolutionIndex",void 0),Ps([ue({type:Number})],Ts.prototype,"activePolicyIndex",void 0),Ps([ue({type:Number})],Ts.prototype,"activePopulationIndex",void 0),Ps([ue({type:Boolean})],Ts.prototype,"firstTimeSubProblemClick",void 0),Ps([ue({type:Number})],Ts.prototype,"activeGroupIndex",void 0),Ps([ue({type:Boolean})],Ts.prototype,"longDescriptions",void 0),Ps([ue({type:Object})],Ts.prototype,"router",void 0),Ps([pe()],Ts.prototype,"displayStates",void 0);const Es=1e-5,Is=.03/1e3,Ls=7e4,Os=15e4,Ms=1e4;class Rs{static simplifyEvidenceType(e){let t=e.replace(/allPossible/g,"").replace(/IdentifiedInTextContext/g,"");return t=t.charAt(0).toLowerCase()+t.slice(1),t}static simplifyRootCauseType(e){let t=e.replace(/allPossible/g,"").replace(/IdentifiedInTextContext/g,"");return t=t.charAt(0).toLowerCase()+t.slice(1),"rootCausesCaseStudies"!=t&&(t=t.slice(0,-1)),t}}Rs.createSubProblemsModel={name:"gpt-4-1106-preview",temperature:.7,maxOutputTokens:4096,tokenLimit:Ls,inTokenCostUSD:Es,outTokenCostUSD:Is,limitTPM:Os,limitRPM:Ms,verbose:!0},Rs.policiesSeedModel={name:"gpt-4-1106-preview",temperature:.7,maxOutputTokens:4096,tokenLimit:Ls,inTokenCostUSD:Es,outTokenCostUSD:Is,limitTPM:Os,limitRPM:Ms,verbose:!1},Rs.analyseExternalSolutionsModel={name:"gpt-4-1106-preview",temperature:0,maxOutputTokens:256,tokenLimit:Ls,inTokenCostUSD:Es,outTokenCostUSD:Is,limitTPM:Os,limitRPM:Ms,verbose:!1},Rs.createEntitiesModel={name:"gpt-4-1106-preview",temperature:.7,maxOutputTokens:2048,tokenLimit:Ls,inTokenCostUSD:Es,outTokenCostUSD:Is,limitTPM:Os,limitRPM:Ms,verbose:!0},Rs.topicMapSolutionsModel={inTokenCostsUSD:1e-4},Rs.createSolutionImagesModel={name:"gpt-4-1106-preview",temperature:.7,maxOutputTokens:256,tokenLimit:Ls,inTokenCostUSD:Es,outTokenCostUSD:Is,limitTPM:Os,limitRPM:Ms,verbose:!1},Rs.createSearchQueriesModel={name:"gpt-4-1106-preview",temperature:.7,maxOutputTokens:1024,tokenLimit:Ls,inTokenCostUSD:Es,outTokenCostUSD:Is,limitTPM:Os,limitRPM:Ms,verbose:!0},Rs.createEvidenceSearchQueriesModel={name:"gpt-4-1106-preview",temperature:.5,maxOutputTokens:1024,tokenLimit:Ls,inTokenCostUSD:Es,outTokenCostUSD:Is,limitTPM:Os,limitRPM:Ms,verbose:!1},Rs.createRootCauseSearchQueriesModel={name:"gpt-4-1106-preview",temperature:.7,maxOutputTokens:1024,tokenLimit:Ls,inTokenCostUSD:Es,outTokenCostUSD:Is,limitTPM:Os,limitRPM:Ms,verbose:!0},Rs.searchQueryRankingsModel={name:"gpt-4-1106-preview",temperature:0,maxOutputTokens:2,tokenLimit:Ls,inTokenCostUSD:Es,outTokenCostUSD:Is,limitTPM:Os,limitRPM:Ms,verbose:!1},Rs.searchResultsRankingsModel={name:"gpt-4-1106-preview",temperature:0,maxOutputTokens:2,tokenLimit:Ls,inTokenCostUSD:Es,outTokenCostUSD:Is,limitTPM:Os,limitRPM:Ms,verbose:!1},Rs.subProblemsRankingsModel={name:"gpt-4-1106-preview",temperature:0,maxOutputTokens:2,tokenLimit:Ls,inTokenCostUSD:Es,outTokenCostUSD:Is,limitTPM:Os,limitRPM:Ms,verbose:!1},Rs.entitiesRankingsModel={name:"gpt-4-1106-preview",temperature:0,maxOutputTokens:2,tokenLimit:Ls,inTokenCostUSD:Es,outTokenCostUSD:Is,limitTPM:Os,limitRPM:Ms,verbose:!0},Rs.solutionsRankingsModel={name:"gpt-4-1106-preview",temperature:0,maxOutputTokens:2,tokenLimit:Ls,inTokenCostUSD:Es,outTokenCostUSD:Is,limitTPM:Os,limitRPM:Ms,verbose:!1},Rs.prosConsRankingsModel={name:"gpt-4-1106-preview",temperature:0,maxOutputTokens:2,tokenLimit:Ls,inTokenCostUSD:Es,outTokenCostUSD:Is,limitTPM:Os,limitRPM:Ms,verbose:!1},Rs.getPageAnalysisModel={name:"gpt-3.5-turbo-1106",temperature:0,maxOutputTokens:2048,tokenLimit:16385,inTokenCostUSD:1e-6,outTokenCostUSD:2e-6,limitTPM:1e6,limitRPM:1e4,verbose:!1},Rs.getSolutionsPagesAnalysisModel={name:"gpt-4-1106-preview",temperature:0,maxOutputTokens:4e3,tokenLimit:Ls,inTokenCostUSD:Es,outTokenCostUSD:Is,limitTPM:Os,limitRPM:Ms,verbose:!1},Rs.rankWebSolutionsModel={name:"gpt-4-1106-preview",temperature:0,maxOutputTokens:2048,tokenLimit:Ls,inTokenCostUSD:Es,outTokenCostUSD:Is,limitTPM:Os,limitRPM:Ms,verbose:!1},Rs.reduceSubProblemsModel={name:"gpt-4-1106-preview",temperature:.1,maxOutputTokens:4096,tokenLimit:Ls,inTokenCostUSD:Es,outTokenCostUSD:Is,limitTPM:Os,limitRPM:Ms,verbose:!1},Rs.rateWebEvidenceModel={name:"gpt-4-1106-preview",temperature:0,maxOutputTokens:2048,tokenLimit:4096,inTokenCostUSD:Es,outTokenCostUSD:Is,limitTPM:Os,limitRPM:Ms,verbose:!1},Rs.rateWebRootCausesModel={name:"gpt-4-1106-preview",temperature:0,maxOutputTokens:2048,tokenLimit:Ls,inTokenCostUSD:Es,outTokenCostUSD:Is,limitTPM:Os,limitRPM:Ms,verbose:!1},Rs.rankWebEvidenceModel={name:"gpt-4-1106-preview",temperature:0,maxOutputTokens:2048,tokenLimit:Ls,inTokenCostUSD:Es,outTokenCostUSD:Is,limitTPM:Os,limitRPM:Ms,verbose:!1},Rs.rankWebRootCausesModel={name:"gpt-4-1106-preview",temperature:0,maxOutputTokens:2048,tokenLimit:Ls,inTokenCostUSD:Es,outTokenCostUSD:Is,limitTPM:Os,limitRPM:Ms,verbose:!1},Rs.getRefinedEvidenceModel={name:"gpt-4-1106-preview",temperature:0,maxOutputTokens:2048,tokenLimit:Ls,inTokenCostUSD:Es,outTokenCostUSD:Is,limitTPM:Os,limitRPM:Ms,verbose:!1},Rs.getRefinedRootCausesModel={name:"gpt-4-1106-preview",temperature:0,maxOutputTokens:3048,tokenLimit:Ls,inTokenCostUSD:Es,outTokenCostUSD:Is,limitTPM:Os,limitRPM:Ms,verbose:!1},Rs.reapSolutionsModel={name:"gpt-4-1106-preview",temperature:0,maxOutputTokens:128,tokenLimit:Ls,inTokenCostUSD:Es,outTokenCostUSD:Is,limitTPM:Os,limitRPM:Ms,verbose:!1},Rs.groupSolutionsModel={name:"gpt-4-1106-preview",temperature:0,maxOutputTokens:4095,tokenLimit:Ls,inTokenCostUSD:Es,outTokenCostUSD:Is,limitTPM:Os,limitRPM:Ms,verbose:!1},Rs.rateSolutionsModel={name:"gpt-4-1106-preview",temperature:0,maxOutputTokens:1024,tokenLimit:Ls,inTokenCostUSD:Es,outTokenCostUSD:Is,limitTPM:Os,limitRPM:Ms,verbose:!1},Rs.createSolutionsModel={name:"gpt-4-1106-preview",temperature:.5,maxOutputTokens:1200,tokenLimit:Ls,inTokenCostUSD:Es,outTokenCostUSD:Is,limitTPM:Os,limitRPM:Ms,verbose:!1},Rs.evolveSolutionsModel={name:"gpt-4-1106-preview",temperature:.5,maxOutputTokens:1200,tokenLimit:Ls,inTokenCostUSD:Es,outTokenCostUSD:Is,limitTPM:Os,limitRPM:Ms,verbose:!1},Rs.createProsConsModel={name:"gpt-4-1106-preview",temperature:.7,maxOutputTokens:2048,tokenLimit:Ls,inTokenCostUSD:Es,outTokenCostUSD:Is,limitTPM:Os,limitRPM:Ms,verbose:!1},Rs.evolutionMutateModel={name:"gpt-4-1106-preview",temperature:.7,maxOutputTokens:1024,tokenLimit:Ls,inTokenCostUSD:Es,outTokenCostUSD:Is,limitTPM:Os,limitRPM:Ms,verbose:!1},Rs.evolutionRecombineModel={name:"gpt-4-1106-preview",temperature:.7,maxOutputTokens:1024,tokenLimit:Ls,inTokenCostUSD:Es,outTokenCostUSD:Is,limitTPM:Os,limitRPM:Ms,verbose:!1},Rs.validationModel={name:"gpt-4-1106-preview",temperature:0,maxOutputTokens:1024,tokenLimit:Ls,inTokenCostUSD:Es,outTokenCostUSD:Is,limitTPM:Os,limitRPM:Ms,verbose:!1},Rs.getPageCacheExpiration=14515200,Rs.maxSubProblems=7,Rs.maxNumberGeneratedOfEntities=7,Rs.maxStabilityRetryCount=14,Rs.mainLLMmaxRetryCount=40,Rs.limitedLLMmaxRetryCount=10,Rs.rankingLLMmaxRetryCount=40,Rs.maxTopEntitiesToSearch=4,Rs.maxTopEntitiesToRender=3,Rs.maxTopQueriesToSearchPerType=5,Rs.maxTopEvidenceQueriesToSearchPerType=4,Rs.maxTopRootCauseQueriesToSearchPerType=5,Rs.maxRootCausePercentOfSearchResultWebPagesToGet=.65,Rs.maxRootCausesToUseForRatingRootCauses=5,Rs.topWebPagesToGetForRefineRootCausesScan=10,Rs.mainSearchRetryCount=40,Rs.maxDalleRetryCount=7,Rs.maxTopWebPagesToGet=5,Rs.maxBingSearchResults=10,Rs.maxTopProsConsUsedForRating=2,Rs.maxNumberGeneratedProsConsForSolution=3,Rs.minSleepBeforeBrowserRequest=50,Rs.maxAdditionalRandomSleepBeforeBrowserRequest=100,Rs.numberOfSearchTypes=4,Rs.webPageNavTimeout=3e4,Rs.subProblemsRankingMinNumberOfMatches=10,Rs.currentUserAgent="Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/119.0.0.0 Safari/537.36",Rs.topItemsToKeepForTopicClusterPruning=3,Rs.chances={createSolutions:{searchQueries:{useMainProblemSearchQueries:.01,useOtherSubProblemSearchQueries:.01,useSubProblemSearchQueries:.38,useRandomEntitySearchQueries:.58},webSolutions:{top:.05,topThree:.25,topSeven:.5,all:.2},notUsingTopSearchQueries:.1,vectorSearchAcrossAllProblems:.001}},Rs.maxTopSearchQueriesForSolutionCreation=8,Rs.maxPercentOfSolutionsWebPagesToGet=.25,Rs.limits={webPageVectorResultsForNewSolutions:14,useRandomTopFromVectorSearchResults:14},Rs.enable={refine:{createSubProblems:!0,createEntities:!0,createSolutions:!0,createProsCons:!0,policiesSeed:!0}},Rs.evolution={populationSize:80,limitTopTopicClusterElitesToEloRating:850,keepElitePercent:.1,randomImmigrationPercent:.4,mutationOffspringPercent:.35,crossoverPercent:.15,lowMutationRate:.5,mediumMutationRate:.3,highMutationRate:.2,selectParentTournamentSize:7,crossoverMutationPercent:.05},Rs.maxPercentOfEloMatched=.75,Rs.minimumNumberOfPairwiseVotesForPopulation=10,Rs.maxNumberOfPairwiseRankingPrompts=Rs.evolution.populationSize*Rs.minimumNumberOfPairwiseVotesForPopulation,Rs.maxTopSolutionsToCreatePolicies=3,Rs.maxTopPoliciesToProcess=1,Rs.maxEvidenceToUseForRatingEvidence=5,Rs.policyEvidenceFieldTypes=["allPossiblePositiveEvidenceIdentifiedInTextContext","allPossibleNegativeEvidenceIdentifiedInTextContext","allPossibleNeutralEvidenceIdentifiedInTextContext","allPossibleEconomicEvidenceIdentifiedInTextContext","allPossibleScientificEvidenceIdentifiedInTextContext","allPossibleCulturalEvidenceIdentifiedInTextContext","allPossibleEnvironmentalEvidenceIdentifiedInTextContext","allPossibleLegalEvidenceIdentifiedInTextContext","allPossibleTechnologicalEvidenceIdentifiedInTextContext","allPossibleGeopoliticalEvidenceIdentifiedInTextContext","allPossibleCaseStudiesIdentifiedInTextContext","allPossibleStakeholderOpinionsIdentifiedInTextContext","allPossibleExpertOpinionsIdentifiedInTextContext","allPossiblePublicOpinionsIdentifiedInTextContext","allPossibleHistoricalContextIdentifiedInTextContext","allPossibleEthicalConsiderationsIdentifiedInTextContext","allPossibleLongTermImpactIdentifiedInTextContext","allPossibleShortTermImpactIdentifiedInTextContext","allPossibleLocalPerspectiveIdentifiedInTextContext","allPossibleGlobalPerspectiveIdentifiedInTextContext","allPossibleCostAnalysisIdentifiedInTextContext","allPossibleImplementationFeasibilityIdentifiedInTextContext"],Rs.rootCauseFieldTypes=["allPossibleHistoricalRootCausesIdentifiedInTextContext","allPossibleEconomicRootCausesIdentifiedInTextContext","allPossibleScientificRootCausesIdentifiedInTextContext","allPossibleCulturalRootCausesIdentifiedInTextContext","allPossibleSocialRootCausesIdentifiedInTextContext","allPossibleEnvironmentalRootCausesIdentifiedInTextContext","allPossibleLegalRootCausesIdentifiedInTextContext","allPossibleTechnologicalRootCausesIdentifiedInTextContext","allPossibleGeopoliticalRootCausesIdentifiedInTextContext","allPossibleEthicalRootCausesIdentifiedInTextContext","allPossibleRootCausesCaseStudiesIdentifiedInTextContext"];var $s=function(e,t,r,i){var n,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,r,s):n(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s};let Ns=class extends Ts{constructor(){super(...arguments),this.maxNumberOfTopEntities=4}async connectedCallback(){super.connectedCallback(),window.psAppGlobals.activity("Web research - open"),1===this.memory.groupId&&(this.maxNumberOfTopEntities=3)}updated(e){super.updated(e)}disconnectedCallback(){super.disconnectedCallback(),window.psAppGlobals.activity("Web research - close")}static get styles(){return[super.styles,o`.subProblemContainer{margin-top:64px}.entity{width:940px;max-width:100%;color:var(--md-sys-color-on-surface);background-color:var(--md-sys-color-surface)}.entity[not-scanned]{opacity:.5}.entityName{margin-top:24px;margin-bottom:8px;width:100%;font-size:20px;font-weight:700}.entityName[not-scanned]{font-weight:300}.negPos{width:100%;margin-top:16px}@media (max-width:960px){.entity{width:100%}.entityName{font-size:18px}}`]}render(){return V` <div class="topContainer layout vertical center-center"> ${this.renderProblemStatement(this.t("Automated Web Research"))} ${this.renderSearchQueries(this.t("Search queries for problem statement"),this.memory.problemStatement.searchQueries)} ${this.renderSearchResults(this.t("Webpages scanned for solutions to problem statement"),this.memory.problemStatement.searchResults)} ${this.renderSubProblemsWithAll()} </div> `}renderEntities(e){return V` ${e.entities.map(((e,t)=>{const r=t>=this.maxNumberOfTopEntities;return V` <div class="layout vertical center-center"> <div class="entity ${r?"lessProminent":""}" ?not-scanned="${r}"> <div class="entityName" ?not-scanned="${r}"> ${e.name} </div> <div class="negPos"> ${e.negativeEffects?.length>0?V` <div> Negative Effects: <ul> ${e.negativeEffects?.map((e=>V` <li>${e}</li> `))} </ul> </div> `:G} ${e.positiveEffects?.length>0?V` <div> Positive Effects: <ul> ${e.positiveEffects?.map((e=>V` <li>${e}</li> `))} </ul> </div> `:G} ${r?G:V` ${this.renderSearchQueries(this.t("Search queries for entity"),e.searchQueries)} ${this.renderSearchResults(this.t("Webpages scanned for solutions to entites problems"),e.searchResults)} `} </div> </div> </div> `}))} `}renderSubProblemsWithAll(){const e=this.memory.subProblems.slice(0,Rs.maxSubProblems);return V` ${e.map((e=>V` <div class="subProblemContainer layout vertical center-center"> ${this.renderSubProblem(e,!1,0,!0,!0,!0)} ${this.renderSearchQueries(this.t("Search queries for sub problem"),e.searchQueries)} ${this.renderSearchResults(this.t("Webpages scanned for solutions to sub problem"),e.searchResults)} ${this.renderEntities(e)} </div> `))} `}};Ns=$s([ce("ps-web-research")],Ns);class Ds{constructor(){this.wide=!1,this.installMediaQueryWatcher=(e,t)=>{let r=window.matchMedia(e);r.addListener((e=>t(e.matches))),t(r.matches)},this.installMediaQueryWatcher("(min-width: 900px)",(e=>{this.wide=e})),this.addGlobalListener("yp-language-loaded",this._languageEvent.bind(this)),window.appGlobals&&window.appGlobals.i18nTranslation&&window.appGlobals.locale?this.language=window.appGlobals.locale:this.language="en"}_languageEvent(e){const t=e.detail;this.language=t.language,window.appGlobals.locale=t.language}fire(e,t={},r){const i=new CustomEvent(e,{detail:t,bubbles:!0,composed:!0});r.dispatchEvent(i)}fireGlobal(e,t={}){this.fire(e,t,document)}addListener(e,t,r){r.addEventListener(e,t,!1)}addGlobalListener(e,t){this.addListener(e,t,document)}showToast(e,t=4e3){window.appDialogs.getDialogAsync("masterToast",(r=>{r.labelText=e,r.timeoutMs=t,r.open=!0}))}removeListener(e,t,r){r.removeEventListener(e,t)}removeGlobalListener(e,t){this.removeListener(e,t,document)}t(...e){const t=e[0];if(window.appGlobals.i18nTranslation){let e=window.appGlobals.i18nTranslation.t(t);return e||(e=""),e}return""}}class zs extends Ds{constructor(){super(...arguments),this.baseUrlPath="/api"}static transformCollectionTypeToApi(e){let t;switch(e){case"domain":t="domains";break;case"community":t="communities";break;case"group":t="groups";break;case"post":t="posts";break;case"user":t="users";break;default:t="",console.error(`Cant find collection type transform for ${e}`)}return t}async fetchWrapper(e,t={},r=!0,i=void 0,n=!1){if(t.headers||(t.headers={"Content-Type":"application/json"}),navigator.onLine||"POST"!==t.method||void 0===window.fetch){if(!navigator.onLine&&["POST","PUT","DELETE"].indexOf(t.method)>-1)throw this.showToast(this.t("youAreOfflineCantSend")),new Error("offlineSendLater");{const o=await fetch(e,t);return await this.handleResponse(o,r,i,n)}}throw window.appGlobals.offline.sendWhenOnlineNext({body:t.body,method:t.method,params:{},url:e}),new Error("offlineSendLater")}async handleResponse(e,t,r=void 0,i=!1){if(e.ok){let n=null;try{n=await e.json()}catch(n){if(200===e.status||"OK"===e.statusText);else if(this.fireGlobal("yp-network-error",{response:e,jsonError:n,showUserError:t,errorId:r}),i)throw n}return null===n||n}if(this.fireGlobal("yp-network-error",{response:e,showUserError:t,errorId:r}),i)throw e.statusText;return null}}class Bs extends zs{boot(){return this.fetchWrapper(this.baseUrlPath+"/domains")}isloggedin(){return this.fetchWrapper(this.baseUrlPath+"/users/loggedInUser/isloggedin")}getAdminRights(){return this.fetchWrapper(this.baseUrlPath+"/users/loggedInUser/adminRights")}getMemberships(){return this.fetchWrapper(this.baseUrlPath+"/users/loggedInUser/memberships")}getAdminRightsWithNames(){return this.fetchWrapper(this.baseUrlPath+"/users/loggedInUser/adminRightsWithNames")}getMembershipsWithNames(){return this.fetchWrapper(this.baseUrlPath+"/users/loggedInUser/membershipsWithNames")}logout(){return this.fetchWrapper(this.baseUrlPath+"/users/logout",{method:"POST"})}setLocale(e){return this.fetchWrapper(this.baseUrlPath+"/users/loggedInUser/setLocale",{method:"PUT",body:JSON.stringify(e)},!1)}getRecommendationsForGroup(e){return this.fetchWrapper(this.baseUrlPath+`/recommendations/groups/${e}/getPostRecommendations`,{method:"PUT",body:JSON.stringify({})})}hasVideoUploadSupport(){return this.fetchWrapper(this.baseUrlPath+"/videos/hasVideoUploadSupport")}hasAudioUploadSupport(){return this.fetchWrapper(this.baseUrlPath+"/audios/hasAudioUploadSupport")}sendVideoView(e){return this.fetchWrapper(this.baseUrlPath+"/videos/videoView",{method:"PUT",body:JSON.stringify(e)},!1)}sendAudioView(e){return this.fetchWrapper(this.baseUrlPath+"/audios/videoView",{method:"PUT",body:JSON.stringify(e)},!1)}createActivityFromApp(e){return this.fetchWrapper(this.baseUrlPath+"/users/createActivityFromApp",{method:"POST",body:JSON.stringify(e)},!1)}marketingTrackingOpen(e,t){return this.fetchWrapper(this.baseUrlPath+`/groups/${e}/marketingTrackingOpen`,{method:"POST",body:JSON.stringify(t)},!1)}createApiKey(){return this.fetchWrapper(this.baseUrlPath+"/users/createApiKey",{method:"POST",body:JSON.stringify({})},!1)}triggerTrackingGoal(e,t){return this.fetchWrapper(this.baseUrlPath+`/groups/${e}/triggerTrackingGoal`,{method:"POST",body:JSON.stringify(t)},!1)}startGeneratingAiImage(e,t,r,i){return this.fetchWrapper(this.baseUrlPath+`/${Bs.transformCollectionTypeToApi(e)}/${t}/start_generating/ai_image`,{method:"POST",body:JSON.stringify({prompt:i,imageType:r})})}getPromoterRights(){return this.fetchWrapper(this.baseUrlPath+"/users/loggedInUser/promoterRights")}pollForGeneratingAiImage(e,t,r){return this.fetchWrapper(this.baseUrlPath+`/${Bs.transformCollectionTypeToApi(e)}/${t}/${r}/poll_for_generating_ai_image`)}getCollection(e,t){return this.fetchWrapper(this.baseUrlPath+`/${Bs.transformCollectionTypeToApi(e)}/${t}`)}getCategoriesCount(e,t){return this.fetchWrapper(this.baseUrlPath+`/groups/${e}/categories_count/${t}`)}getGroupPosts(e){return this.fetchWrapper(e)}getPost(e){return this.fetchWrapper(this.baseUrlPath+`/post/${e}`)}getGroup(e){return this.fetchWrapper(this.baseUrlPath+`/groups/${e}`)}endorsePost(e,t,r){return this.fetchWrapper(this.baseUrlPath+`/posts/${e}/endorse`,{method:t,body:JSON.stringify(r)},!1)}getHasNonOpenPosts(e){return this.fetchWrapper(this.baseUrlPath+`/groups/${e}/checkNonOpenPosts`)}getHelpPages(e,t){return this.fetchWrapper(this.baseUrlPath+`/${Bs.transformCollectionTypeToApi(e)}/${t}/pages`)}getTranslation(e){return this.fetchWrapper(e)}getTranslatedRegistrationQuestions(e,t){return this.fetchWrapper(this.baseUrlPath+`/groups/${e}/translatedRegistrationQuestions?targetLanguage=${t}`)}sendRegistrationQuestions(e){return this.fetchWrapper(this.baseUrlPath+"/users/setRegistrationAnswers",{method:"PUT",body:JSON.stringify({registration_answers:e})},!0)}savePostTranscript(e,t){return this.fetchWrapper(this.baseUrlPath+`/posts/${e}/editTranscript`,{method:"PUT",body:JSON.stringify(t)},!1)}getPostTranscriptStatus(e,t){return this.fetchWrapper(this.baseUrlPath+`/groups/${e}/categories_count/${t}`)}addPoint(e,t){return this.fetchWrapper(this.baseUrlPath+`/points/${e}`,{method:"POST",body:JSON.stringify(t)},!1)}completeMediaPoint(e,t,r){return this.fetchWrapper(this.baseUrlPath+`/${e}/${t}/completeAndAddToPoint`,{method:"POST",body:JSON.stringify(r)},!1)}completeMediaPost(e,t,r,i){return this.fetchWrapper(this.baseUrlPath+`/${e}/${r}/completeAndAddToPost`,{method:t,body:JSON.stringify(i)},!1)}getPoints(e){return this.fetchWrapper(this.baseUrlPath+`/posts/${e}/points`)}getMorePoints(e,t,r){return this.fetchWrapper(this.baseUrlPath+`/posts/${e}/points?offsetUp=${t}&offsetDown=${r}`)}getNewPoints(e,t){return this.fetchWrapper(this.baseUrlPath+`/posts/${e}/newPoints?latestPointCreatedAt=${t}`)}getSurveyTranslations(e,t){return this.fetchWrapper(this.baseUrlPath+`/posts/${e.id}/translatedSurvey?targetLanguage=${t}&groupId=${e.Group.id}`)}getSurveyQuestionsTranslations(e,t){return this.fetchWrapper(this.baseUrlPath+`/groups/${e.id}/translatedSurveyQuestions?targetLanguage=${t}`)}getVideoFormatsAndImages(e){return this.fetchWrapper(this.baseUrlPath+`/videos/${e}/formatsAndImages`)}getGroupConfiguration(e){return this.fetchWrapper(this.baseUrlPath+`/groups/${e}/configuration`)}setVideoCover(e,t){return this.fetchWrapper(this.baseUrlPath+`/videos/${e}/setVideoCover`,{method:"PUT",body:JSON.stringify(t)},!1)}getTranscodingJobStatus(e,t,r){return this.fetchWrapper(this.baseUrlPath+`/${e}/${t}/getTranscodingJobStatus`,{method:"PUT",body:JSON.stringify({jobId:r})})}startTranscoding(e,t,r,i){return this.fetchWrapper(this.baseUrlPath+`/${e}/${t}/${r}`,{method:"POST",body:JSON.stringify(i)},!1)}createPresignUrl(e,t={}){return this.fetchWrapper(e,{method:"POST",body:JSON.stringify(t)},!1)}updatePoint(e,t){return this.fetchWrapper(this.baseUrlPath+`/points/${e}`,{method:"PUT",body:JSON.stringify(t)},!1)}updatePointAdminComment(e,t,r){return this.fetchWrapper(this.baseUrlPath+`/groups/${e}/${t}/adminComment`,{method:"PUT",body:JSON.stringify(r)},!1)}deletePoint(e){return this.fetchWrapper(this.baseUrlPath+`/points/${e}`,{method:"DELETE",body:JSON.stringify({})},!1)}checkPointTranscriptStatus(e,t){return this.fetchWrapper(this.baseUrlPath+`/$points/${t}/${e}`)}registerUser(e){return this.fetchWrapper(this.baseUrlPath+"/users/register",{method:"POST",body:JSON.stringify(e)},!1)}async registerAnonymously(e){return this.fetchWrapper(this.baseUrlPath+"/users/register_anonymously",{method:"POST",body:JSON.stringify(e)},!1)}loginUser(e){return this.fetchWrapper(this.baseUrlPath+"/users/login",{method:"POST",body:JSON.stringify(e)},!1)}getAoiTotalStats(e){return this.fetchWrapper(`/api/allOurIdeas/${e}/getAoiSiteStats`)}submitForm(e,t,r,i){return this.fetchWrapper(this.baseUrlPath+e,{method:t,headers:r,body:i},!1,"formError")}getSurveyGroup(e){return this.fetchWrapper(this.baseUrlPath+`/groups/${e}/survey`)}postSurvey(e,t){return this.fetchWrapper(this.baseUrlPath+`/groups/${e}/survey`,{method:"POST",body:JSON.stringify(t)},!1)}deleteActivity(e,t,r){return this.fetchWrapper(this.baseUrlPath+`/${e}/${t}/${r}/delete_activity`,{method:"DELETE",body:JSON.stringify({})},!1)}getAcActivities(e){return this.fetchWrapper(e)}getRecommendations(e,t){return this.fetchWrapper(this.baseUrlPath+`/recommendations/${e}/${t}`)}setNotificationsAsViewed(e){return this.fetchWrapper(this.baseUrlPath+"/notifications/setIdsViewed",{method:"PUT",body:JSON.stringify(e)},!1)}setNotificationsAllAsViewed(){return this.fetchWrapper(this.baseUrlPath+"/notifications/markAllViewed",{method:"PUT",body:JSON.stringify({})},!1)}getAcNotifications(e){return this.fetchWrapper(e)}getComments(e,t){return this.fetchWrapper(this.baseUrlPath+`/${e}/${t}/comments`)}getCommentsCount(e,t){return this.fetchWrapper(this.baseUrlPath+`/${e}/${t}/commentsCount`)}postComment(e,t,r){return this.fetchWrapper(this.baseUrlPath+`/${e}/${t}/comment`,{method:"POST",body:JSON.stringify(r)},!1)}setPointQuality(e,t,r){return this.fetchWrapper(this.baseUrlPath+`/points/${e}/pointQuality`,{method:t,body:JSON.stringify(r)},!1)}postNewsStory(e,t){return this.fetchWrapper(e,{method:"POST",body:JSON.stringify(t)},!1)}pointUrlPreview(e){return this.fetchWrapper(this.baseUrlPath+`/points/url_preview?${e}`)}disconnectSamlLogin(){return this.fetchWrapper(this.baseUrlPath+"/users/disconnectSamlLogin",{method:"DELETE",body:JSON.stringify({})},!1)}disconnectFacebookLogin(){return this.fetchWrapper(this.baseUrlPath+"/users/disconnectFacebookLogin",{method:"DELETE",body:JSON.stringify({})},!1)}deleteUser(){return this.fetchWrapper(this.baseUrlPath+"/users/delete_current_user",{method:"DELETE",body:JSON.stringify({})},!1)}anonymizeUser(){return this.fetchWrapper(this.baseUrlPath+"/users/anonymize_current_user",{method:"DELETE",body:JSON.stringify({})},!1)}resetPassword(e,t){return this.fetchWrapper(this.baseUrlPath+`/users/reset/${e}`,{method:"POST",body:JSON.stringify(t)},!1)}setEmail(e){return this.fetchWrapper(this.baseUrlPath+"/users/missingEmail/setEmail",{method:"PUT",body:JSON.stringify(e)},!1)}linkAccounts(e){return this.fetchWrapper(this.baseUrlPath+"/users/missingEmail/linkAccounts",{method:"PUT",body:JSON.stringify(e)},!1)}confirmEmailShown(){return this.fetchWrapper(this.baseUrlPath+"/users/missingEmail/emailConfirmationShown",{method:"PUT",body:JSON.stringify({})},!1,"forgotPassword")}forgotPassword(e){return this.fetchWrapper(this.baseUrlPath+"/users/forgot_password",{method:"PUT",body:JSON.stringify(e)},!1)}acceptInvite(e){return this.fetchWrapper(this.baseUrlPath+`/users/accept_invite/${e}`,{method:"POST",body:JSON.stringify({})},!1,"acceptInvite")}getInviteSender(e){return this.fetchWrapper(this.baseUrlPath+`/users/get_invite_info/${e}`,{method:"GET"},!1,"acceptInvite")}getPostLocations(e,t){return this.fetchWrapper(this.baseUrlPath+`/${e}/${t}/post_locations`)}hasAutoTranslation(){return this.fetchWrapper(this.baseUrlPath+"/users/has/AutoTranslation")}apiAction(e,t,r){return this.fetchWrapper(e,{method:t,body:JSON.stringify(r)},!1)}getImages(e){return this.fetchWrapper(this.baseUrlPath+`/images/${e}/user_images`)}postRating(e,t,r){return this.fetchWrapper(this.baseUrlPath+`/ratings/${e}/${t}`,{method:"POST",body:JSON.stringify(r)},!1)}deleteRating(e,t){return this.fetchWrapper(this.baseUrlPath+`/ratings/${e}/${t}`,{method:"DELETE",body:JSON.stringify({})},!1)}}class Fs extends Bs{constructor(e="/api"){super(),this.baseUrlPath=e}async getProject(e,t,r){return await this.fetchWrapper(this.baseUrlPath+`/projects/${e}${r?"/new":""}${t?`?trm=${t}`:""}`)}async getMiddleSolutions(e,t){return await this.fetchWrapper(this.baseUrlPath+`/projects/${e}/${t}/middle/solutions`)}async getRawEvidence(e,t,r){return await this.fetchWrapper(this.baseUrlPath+`/projects/${e}/${t}/${r}/rawEvidence`)}}const Us={type:"logger",log(e){this.output("log",e)},warn(e){this.output("warn",e)},error(e){this.output("error",e)},output(e,t){console&&console[e]&&console[e].apply(console,t)}};class Vs{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.init(e,t)}init(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.prefix=t.prefix||"i18next:",this.logger=e||Us,this.options=t,this.debug=t.debug}log(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.forward(t,"log","",!0)}warn(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.forward(t,"warn","",!0)}error(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.forward(t,"error","")}deprecate(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.forward(t,"warn","WARNING DEPRECATED: ",!0)}forward(e,t,r,i){return i&&!this.debug?null:("string"==typeof e[0]&&(e[0]=`${r}${this.prefix} ${e[0]}`),this.logger[t](e))}create(e){return new Vs(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return(e=e||this.options).prefix=e.prefix||this.prefix,new Vs(this.logger,e)}}var js=new Vs;class Gs{constructor(){this.observers={}}on(e,t){return e.split(" ").forEach((e=>{this.observers[e]||(this.observers[e]=new Map);const r=this.observers[e].get(t)||0;this.observers[e].set(t,r+1)})),this}off(e,t){this.observers[e]&&(t?this.observers[e].delete(t):delete this.observers[e])}emit(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];if(this.observers[e]){Array.from(this.observers[e].entries()).forEach((e=>{let[t,i]=e;for(let e=0;e<i;e++)t(...r)}))}if(this.observers["*"]){Array.from(this.observers["*"].entries()).forEach((t=>{let[i,n]=t;for(let t=0;t<n;t++)i.apply(i,[e,...r])}))}}}function Hs(){let e,t;const r=new Promise(((r,i)=>{e=r,t=i}));return r.resolve=e,r.reject=t,r}function Ws(e){return null==e?"":""+e}const qs=/###/g;function Ys(e,t,r){function i(e){return e&&e.indexOf("###")>-1?e.replace(qs,"."):e}function n(){return!e||"string"==typeof e}const o="string"!=typeof t?t:t.split(".");let s=0;for(;s<o.length-1;){if(n())return{};const t=i(o[s]);!e[t]&&r&&(e[t]=new r),e=Object.prototype.hasOwnProperty.call(e,t)?e[t]:{},++s}return n()?{}:{obj:e,k:i(o[s])}}function Js(e,t,r){const{obj:i,k:n}=Ys(e,t,Object);if(void 0!==i||1===t.length)return void(i[n]=r);let o=t[t.length-1],s=t.slice(0,t.length-1),a=Ys(e,s,Object);for(;void 0===a.obj&&s.length;)o=`${s[s.length-1]}.${o}`,s=s.slice(0,s.length-1),a=Ys(e,s,Object),a&&a.obj&&void 0!==a.obj[`${a.k}.${o}`]&&(a.obj=void 0);a.obj[`${a.k}.${o}`]=r}function Xs(e,t){const{obj:r,k:i}=Ys(e,t);if(r)return r[i]}function Zs(e,t,r){for(const i in t)"__proto__"!==i&&"constructor"!==i&&(i in e?"string"==typeof e[i]||e[i]instanceof String||"string"==typeof t[i]||t[i]instanceof String?r&&(e[i]=t[i]):Zs(e[i],t[i],r):e[i]=t[i]);return e}function Qs(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var Ks={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function ea(e){return"string"==typeof e?e.replace(/[&<>"'\/]/g,(e=>Ks[e])):e}const ta=[" ",",","?","!",";"],ra=new class{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const t=this.regExpMap.get(e);if(void 0!==t)return t;const r=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,r),this.regExpQueue.push(e),r}}(20);function ia(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".";if(!e)return;if(e[t])return e[t];const i=t.split(r);let n=e;for(let e=0;e<i.length;){if(!n||"object"!=typeof n)return;let t,o="";for(let s=e;s<i.length;++s)if(s!==e&&(o+=r),o+=i[s],t=n[o],void 0!==t){if(["string","number","boolean"].indexOf(typeof t)>-1&&s<i.length-1)continue;e+=s-e+1;break}n=t}return n}function na(e){return e&&e.indexOf("_")>0?e.replace("_","-"):e}class oa extends Gs{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=e||{},this.options=t,void 0===this.options.keySeparator&&(this.options.keySeparator="."),void 0===this.options.ignoreJSONStructure&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}getResource(e,t,r){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const n=void 0!==i.keySeparator?i.keySeparator:this.options.keySeparator,o=void 0!==i.ignoreJSONStructure?i.ignoreJSONStructure:this.options.ignoreJSONStructure;let s;e.indexOf(".")>-1?s=e.split("."):(s=[e,t],r&&(Array.isArray(r)?s.push(...r):"string"==typeof r&&n?s.push(...r.split(n)):s.push(r)));const a=Xs(this.data,s);return!a&&!t&&!r&&e.indexOf(".")>-1&&(e=s[0],t=s[1],r=s.slice(2).join(".")),a||!o||"string"!=typeof r?a:ia(this.data&&this.data[e]&&this.data[e][t],r,n)}addResource(e,t,r,i){let n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{silent:!1};const o=void 0!==n.keySeparator?n.keySeparator:this.options.keySeparator;let s=[e,t];r&&(s=s.concat(o?r.split(o):r)),e.indexOf(".")>-1&&(s=e.split("."),i=t,t=s[1]),this.addNamespaces(t),Js(this.data,s,i),n.silent||this.emit("added",e,t,r,i)}addResources(e,t,r){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{silent:!1};for(const i in r)("string"==typeof r[i]||Array.isArray(r[i]))&&this.addResource(e,t,i,r[i],{silent:!0});i.silent||this.emit("added",e,t,r)}addResourceBundle(e,t,r,i,n){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{silent:!1,skipCopy:!1},s=[e,t];e.indexOf(".")>-1&&(s=e.split("."),i=r,r=t,t=s[1]),this.addNamespaces(t);let a=Xs(this.data,s)||{};o.skipCopy||(r=JSON.parse(JSON.stringify(r))),i?Zs(a,r,n):a={...a,...r},Js(this.data,s,a),o.silent||this.emit("added",e,t,r)}removeResourceBundle(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}hasResourceBundle(e,t){return void 0!==this.getResource(e,t)}getResourceBundle(e,t){return t||(t=this.options.defaultNS),"v1"===this.options.compatibilityAPI?{...this.getResource(e,t)}:this.getResource(e,t)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const t=this.getDataByLanguage(e);return!!(t&&Object.keys(t)||[]).find((e=>t[e]&&Object.keys(t[e]).length>0))}toJSON(){return this.data}}var sa={processors:{},addPostProcessor(e){this.processors[e.name]=e},handle(e,t,r,i,n){return e.forEach((e=>{this.processors[e]&&(t=this.processors[e].process(t,r,i,n))})),t}};const aa={};class la extends Gs{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),function(e,t,r){e.forEach((e=>{t[e]&&(r[e]=t[e])}))}(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=t,void 0===this.options.keySeparator&&(this.options.keySeparator="."),this.logger=js.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}};if(null==e)return!1;const r=this.resolve(e,t);return r&&void 0!==r.res}extractFromKey(e,t){let r=void 0!==t.nsSeparator?t.nsSeparator:this.options.nsSeparator;void 0===r&&(r=":");const i=void 0!==t.keySeparator?t.keySeparator:this.options.keySeparator;let n=t.ns||this.options.defaultNS||[];const o=r&&e.indexOf(r)>-1,s=!(this.options.userDefinedKeySeparator||t.keySeparator||this.options.userDefinedNsSeparator||t.nsSeparator||function(e,t,r){t=t||"",r=r||"";const i=ta.filter((e=>t.indexOf(e)<0&&r.indexOf(e)<0));if(0===i.length)return!0;const n=ra.getRegExp(`(${i.map((e=>"?"===e?"\\?":e)).join("|")})`);let o=!n.test(e);if(!o){const t=e.indexOf(r);t>0&&!n.test(e.substring(0,t))&&(o=!0)}return o}(e,r,i));if(o&&!s){const t=e.match(this.interpolator.nestingRegexp);if(t&&t.length>0)return{key:e,namespaces:n};const o=e.split(r);(r!==i||r===i&&this.options.ns.indexOf(o[0])>-1)&&(n=o.shift()),e=o.join(i)}return"string"==typeof n&&(n=[n]),{key:e,namespaces:n}}translate(e,t,r){if("object"!=typeof t&&this.options.overloadTranslationOptionHandler&&(t=this.options.overloadTranslationOptionHandler(arguments)),"object"==typeof t&&(t={...t}),t||(t={}),null==e)return"";Array.isArray(e)||(e=[String(e)]);const i=void 0!==t.returnDetails?t.returnDetails:this.options.returnDetails,n=void 0!==t.keySeparator?t.keySeparator:this.options.keySeparator,{key:o,namespaces:s}=this.extractFromKey(e[e.length-1],t),a=s[s.length-1],l=t.lng||this.language,c=t.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(l&&"cimode"===l.toLowerCase()){if(c){const e=t.nsSeparator||this.options.nsSeparator;return i?{res:`${a}${e}${o}`,usedKey:o,exactUsedKey:o,usedLng:l,usedNS:a,usedParams:this.getUsedParamsDetails(t)}:`${a}${e}${o}`}return i?{res:o,usedKey:o,exactUsedKey:o,usedLng:l,usedNS:a,usedParams:this.getUsedParamsDetails(t)}:o}const d=this.resolve(e,t);let h=d&&d.res;const u=d&&d.usedKey||o,p=d&&d.exactUsedKey||o,f=Object.prototype.toString.apply(h),m=void 0!==t.joinArrays?t.joinArrays:this.options.joinArrays,g=!this.i18nFormat||this.i18nFormat.handleAsObject;if(g&&h&&("string"!=typeof h&&"boolean"!=typeof h&&"number"!=typeof h)&&["[object Number]","[object Function]","[object RegExp]"].indexOf(f)<0&&("string"!=typeof m||!Array.isArray(h))){if(!t.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const e=this.options.returnedObjectHandler?this.options.returnedObjectHandler(u,h,{...t,ns:s}):`key '${o} (${this.language})' returned an object instead of string.`;return i?(d.res=e,d.usedParams=this.getUsedParamsDetails(t),d):e}if(n){const e=Array.isArray(h),r=e?[]:{},i=e?p:u;for(const e in h)if(Object.prototype.hasOwnProperty.call(h,e)){const o=`${i}${n}${e}`;r[e]=this.translate(o,{...t,joinArrays:!1,ns:s}),r[e]===o&&(r[e]=h[e])}h=r}}else if(g&&"string"==typeof m&&Array.isArray(h))h=h.join(m),h&&(h=this.extendTranslation(h,e,t,r));else{let i=!1,s=!1;const c=void 0!==t.count&&"string"!=typeof t.count,u=la.hasDefaultValue(t),p=c?this.pluralResolver.getSuffix(l,t.count,t):"",f=t.ordinal&&c?this.pluralResolver.getSuffix(l,t.count,{ordinal:!1}):"",m=c&&!t.ordinal&&0===t.count&&this.pluralResolver.shouldUseIntlApi(),g=m&&t[`defaultValue${this.options.pluralSeparator}zero`]||t[`defaultValue${p}`]||t[`defaultValue${f}`]||t.defaultValue;!this.isValidLookup(h)&&u&&(i=!0,h=g),this.isValidLookup(h)||(s=!0,h=o);const v=(t.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&s?void 0:h,b=u&&g!==h&&this.options.updateMissing;if(s||i||b){if(this.logger.log(b?"updateKey":"missingKey",l,a,o,b?g:h),n){const e=this.resolve(o,{...t,keySeparator:!1});e&&e.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let e=[];const r=this.languageUtils.getFallbackCodes(this.options.fallbackLng,t.lng||this.language);if("fallback"===this.options.saveMissingTo&&r&&r[0])for(let t=0;t<r.length;t++)e.push(r[t]);else"all"===this.options.saveMissingTo?e=this.languageUtils.toResolveHierarchy(t.lng||this.language):e.push(t.lng||this.language);const i=(e,r,i)=>{const n=u&&i!==h?i:v;this.options.missingKeyHandler?this.options.missingKeyHandler(e,a,r,n,b,t):this.backendConnector&&this.backendConnector.saveMissing&&this.backendConnector.saveMissing(e,a,r,n,b,t),this.emit("missingKey",e,a,r,h)};this.options.saveMissing&&(this.options.saveMissingPlurals&&c?e.forEach((e=>{const r=this.pluralResolver.getSuffixes(e,t);m&&t[`defaultValue${this.options.pluralSeparator}zero`]&&r.indexOf(`${this.options.pluralSeparator}zero`)<0&&r.push(`${this.options.pluralSeparator}zero`),r.forEach((r=>{i([e],o+r,t[`defaultValue${r}`]||g)}))})):i(e,o,g))}h=this.extendTranslation(h,e,t,d,r),s&&h===o&&this.options.appendNamespaceToMissingKey&&(h=`${a}:${o}`),(s||i)&&this.options.parseMissingKeyHandler&&(h="v1"!==this.options.compatibilityAPI?this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${a}:${o}`:o,i?h:void 0):this.options.parseMissingKeyHandler(h))}return i?(d.res=h,d.usedParams=this.getUsedParamsDetails(t),d):h}extendTranslation(e,t,r,i,n){var o=this;if(this.i18nFormat&&this.i18nFormat.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...r},r.lng||this.language||i.usedLng,i.usedNS,i.usedKey,{resolved:i});else if(!r.skipInterpolation){r.interpolation&&this.interpolator.init({...r,interpolation:{...this.options.interpolation,...r.interpolation}});const s="string"==typeof e&&(r&&r.interpolation&&void 0!==r.interpolation.skipOnVariables?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let a;if(s){const t=e.match(this.interpolator.nestingRegexp);a=t&&t.length}let l=r.replace&&"string"!=typeof r.replace?r.replace:r;if(this.options.interpolation.defaultVariables&&(l={...this.options.interpolation.defaultVariables,...l}),e=this.interpolator.interpolate(e,l,r.lng||this.language,r),s){const t=e.match(this.interpolator.nestingRegexp);a<(t&&t.length)&&(r.nest=!1)}!r.lng&&"v1"!==this.options.compatibilityAPI&&i&&i.res&&(r.lng=i.usedLng),!1!==r.nest&&(e=this.interpolator.nest(e,(function(){for(var e=arguments.length,i=new Array(e),s=0;s<e;s++)i[s]=arguments[s];return n&&n[0]===i[0]&&!r.context?(o.logger.warn(`It seems you are nesting recursively key: ${i[0]} in key: ${t[0]}`),null):o.translate(...i,t)}),r)),r.interpolation&&this.interpolator.reset()}const s=r.postProcess||this.options.postProcess,a="string"==typeof s?[s]:s;return null!=e&&a&&a.length&&!1!==r.applyPostProcessor&&(e=sa.handle(a,e,t,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...i,usedParams:this.getUsedParamsDetails(r)},...r}:r,this)),e}resolve(e){let t,r,i,n,o,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"string"==typeof e&&(e=[e]),e.forEach((e=>{if(this.isValidLookup(t))return;const a=this.extractFromKey(e,s),l=a.key;r=l;let c=a.namespaces;this.options.fallbackNS&&(c=c.concat(this.options.fallbackNS));const d=void 0!==s.count&&"string"!=typeof s.count,h=d&&!s.ordinal&&0===s.count&&this.pluralResolver.shouldUseIntlApi(),u=void 0!==s.context&&("string"==typeof s.context||"number"==typeof s.context)&&""!==s.context,p=s.lngs?s.lngs:this.languageUtils.toResolveHierarchy(s.lng||this.language,s.fallbackLng);c.forEach((e=>{this.isValidLookup(t)||(o=e,!aa[`${p[0]}-${e}`]&&this.utils&&this.utils.hasLoadedNamespace&&!this.utils.hasLoadedNamespace(o)&&(aa[`${p[0]}-${e}`]=!0,this.logger.warn(`key "${r}" for languages "${p.join(", ")}" won't get resolved as namespace "${o}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),p.forEach((r=>{if(this.isValidLookup(t))return;n=r;const o=[l];if(this.i18nFormat&&this.i18nFormat.addLookupKeys)this.i18nFormat.addLookupKeys(o,l,r,e,s);else{let e;d&&(e=this.pluralResolver.getSuffix(r,s.count,s));const t=`${this.options.pluralSeparator}zero`,i=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(d&&(o.push(l+e),s.ordinal&&0===e.indexOf(i)&&o.push(l+e.replace(i,this.options.pluralSeparator)),h&&o.push(l+t)),u){const r=`${l}${this.options.contextSeparator}${s.context}`;o.push(r),d&&(o.push(r+e),s.ordinal&&0===e.indexOf(i)&&o.push(r+e.replace(i,this.options.pluralSeparator)),h&&o.push(r+t))}}let a;for(;a=o.pop();)this.isValidLookup(t)||(i=a,t=this.getResource(r,e,a,s))})))}))})),{res:t,usedKey:r,exactUsedKey:i,usedLng:n,usedNS:o}}isValidLookup(e){return!(void 0===e||!this.options.returnNull&&null===e||!this.options.returnEmptyString&&""===e)}getResource(e,t,r){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(e,t,r,i):this.resourceStore.getResource(e,t,r,i)}getUsedParamsDetails(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],r=e.replace&&"string"!=typeof e.replace;let i=r?e.replace:e;if(r&&void 0!==e.count&&(i.count=e.count),this.options.interpolation.defaultVariables&&(i={...this.options.interpolation.defaultVariables,...i}),!r){i={...i};for(const e of t)delete i[e]}return i}static hasDefaultValue(e){const t="defaultValue";for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t===r.substring(0,12)&&void 0!==e[r])return!0;return!1}}function ca(e){return e.charAt(0).toUpperCase()+e.slice(1)}class da{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=js.create("languageUtils")}getScriptPartFromCode(e){if(!(e=na(e))||e.indexOf("-")<0)return null;const t=e.split("-");return 2===t.length?null:(t.pop(),"x"===t[t.length-1].toLowerCase()?null:this.formatLanguageCode(t.join("-")))}getLanguagePartFromCode(e){if(!(e=na(e))||e.indexOf("-")<0)return e;const t=e.split("-");return this.formatLanguageCode(t[0])}formatLanguageCode(e){if("string"==typeof e&&e.indexOf("-")>-1){const t=["hans","hant","latn","cyrl","cans","mong","arab"];let r=e.split("-");return this.options.lowerCaseLng?r=r.map((e=>e.toLowerCase())):2===r.length?(r[0]=r[0].toLowerCase(),r[1]=r[1].toUpperCase(),t.indexOf(r[1].toLowerCase())>-1&&(r[1]=ca(r[1].toLowerCase()))):3===r.length&&(r[0]=r[0].toLowerCase(),2===r[1].length&&(r[1]=r[1].toUpperCase()),"sgn"!==r[0]&&2===r[2].length&&(r[2]=r[2].toUpperCase()),t.indexOf(r[1].toLowerCase())>-1&&(r[1]=ca(r[1].toLowerCase())),t.indexOf(r[2].toLowerCase())>-1&&(r[2]=ca(r[2].toLowerCase()))),r.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return("languageOnly"===this.options.load||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let t;return e.forEach((e=>{if(t)return;const r=this.formatLanguageCode(e);this.options.supportedLngs&&!this.isSupportedCode(r)||(t=r)})),!t&&this.options.supportedLngs&&e.forEach((e=>{if(t)return;const r=this.getLanguagePartFromCode(e);if(this.isSupportedCode(r))return t=r;t=this.options.supportedLngs.find((e=>e===r?e:e.indexOf("-")<0&&r.indexOf("-")<0?void 0:e.indexOf("-")>0&&r.indexOf("-")<0&&e.substring(0,e.indexOf("-"))===r||0===e.indexOf(r)&&r.length>1?e:void 0))})),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t}getFallbackCodes(e,t){if(!e)return[];if("function"==typeof e&&(e=e(t)),"string"==typeof e&&(e=[e]),Array.isArray(e))return e;if(!t)return e.default||[];let r=e[t];return r||(r=e[this.getScriptPartFromCode(t)]),r||(r=e[this.formatLanguageCode(t)]),r||(r=e[this.getLanguagePartFromCode(t)]),r||(r=e.default),r||[]}toResolveHierarchy(e,t){const r=this.getFallbackCodes(t||this.options.fallbackLng||[],e),i=[],n=e=>{e&&(this.isSupportedCode(e)?i.push(e):this.logger.warn(`rejecting language code not found in supportedLngs: ${e}`))};return"string"==typeof e&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?("languageOnly"!==this.options.load&&n(this.formatLanguageCode(e)),"languageOnly"!==this.options.load&&"currentOnly"!==this.options.load&&n(this.getScriptPartFromCode(e)),"currentOnly"!==this.options.load&&n(this.getLanguagePartFromCode(e))):"string"==typeof e&&n(this.formatLanguageCode(e)),r.forEach((e=>{i.indexOf(e)<0&&n(this.formatLanguageCode(e))})),i}}let ha=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],ua={1:function(e){return Number(e>1)},2:function(e){return Number(1!=e)},3:function(e){return 0},4:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2)},5:function(e){return Number(0==e?0:1==e?1:2==e?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5)},6:function(e){return Number(1==e?0:e>=2&&e<=4?1:2)},7:function(e){return Number(1==e?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2)},8:function(e){return Number(1==e?0:2==e?1:8!=e&&11!=e?2:3)},9:function(e){return Number(e>=2)},10:function(e){return Number(1==e?0:2==e?1:e<7?2:e<11?3:4)},11:function(e){return Number(1==e||11==e?0:2==e||12==e?1:e>2&&e<20?2:3)},12:function(e){return Number(e%10!=1||e%100==11)},13:function(e){return Number(0!==e)},14:function(e){return Number(1==e?0:2==e?1:3==e?2:3)},15:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&(e%100<10||e%100>=20)?1:2)},16:function(e){return Number(e%10==1&&e%100!=11?0:0!==e?1:2)},17:function(e){return Number(1==e||e%10==1&&e%100!=11?0:1)},18:function(e){return Number(0==e?0:1==e?1:2)},19:function(e){return Number(1==e?0:0==e||e%100>1&&e%100<11?1:e%100>10&&e%100<20?2:3)},20:function(e){return Number(1==e?0:0==e||e%100>0&&e%100<20?1:2)},21:function(e){return Number(e%100==1?1:e%100==2?2:e%100==3||e%100==4?3:0)},22:function(e){return Number(1==e?0:2==e?1:(e<0||e>10)&&e%10==0?2:3)}};const pa=["v1","v2","v3"],fa=["v4"],ma={zero:0,one:1,two:2,few:3,many:4,other:5};class ga{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.languageUtils=e,this.options=t,this.logger=js.create("pluralResolver"),this.options.compatibilityJSON&&!fa.includes(this.options.compatibilityJSON)||"undefined"!=typeof Intl&&Intl.PluralRules||(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=function(){const e={};return ha.forEach((t=>{t.lngs.forEach((r=>{e[r]={numbers:t.nr,plurals:ua[t.fc]}}))})),e}()}addRule(e,t){this.rules[e]=t}getRule(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.shouldUseIntlApi())try{return new Intl.PluralRules(na("dev"===e?"en":e),{type:t.ordinal?"ordinal":"cardinal"})}catch(e){return}return this.rules[e]||this.rules[this.languageUtils.getLanguagePartFromCode(e)]}needsPlural(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=this.getRule(e,t);return this.shouldUseIntlApi()?r&&r.resolvedOptions().pluralCategories.length>1:r&&r.numbers.length>1}getPluralFormsOfKey(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.getSuffixes(e,r).map((e=>`${t}${e}`))}getSuffixes(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=this.getRule(e,t);return r?this.shouldUseIntlApi()?r.resolvedOptions().pluralCategories.sort(((e,t)=>ma[e]-ma[t])).map((e=>`${this.options.prepend}${t.ordinal?`ordinal${this.options.prepend}`:""}${e}`)):r.numbers.map((r=>this.getSuffix(e,r,t))):[]}getSuffix(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=this.getRule(e,r);return i?this.shouldUseIntlApi()?`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${i.select(t)}`:this.getSuffixRetroCompatible(i,t):(this.logger.warn(`no plural rule found for: ${e}`),"")}getSuffixRetroCompatible(e,t){const r=e.noAbs?e.plurals(t):e.plurals(Math.abs(t));let i=e.numbers[r];this.options.simplifyPluralSuffix&&2===e.numbers.length&&1===e.numbers[0]&&(2===i?i="plural":1===i&&(i=""));const n=()=>this.options.prepend&&i.toString()?this.options.prepend+i.toString():i.toString();return"v1"===this.options.compatibilityJSON?1===i?"":"number"==typeof i?`_plural_${i.toString()}`:n():"v2"===this.options.compatibilityJSON||this.options.simplifyPluralSuffix&&2===e.numbers.length&&1===e.numbers[0]?n():this.options.prepend&&r.toString()?this.options.prepend+r.toString():r.toString()}shouldUseIntlApi(){return!pa.includes(this.options.compatibilityJSON)}}function va(e,t,r){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:".",n=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],o=function(e,t,r){const i=Xs(e,r);return void 0!==i?i:Xs(t,r)}(e,t,r);return!o&&n&&"string"==typeof r&&(o=ia(e,r,i),void 0===o&&(o=ia(t,r,i))),o}class ba{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.logger=js.create("interpolator"),this.options=e,this.format=e.interpolation&&e.interpolation.format||(e=>e),this.init(e)}init(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});const{escape:t,escapeValue:r,useRawValueToEscape:i,prefix:n,prefixEscaped:o,suffix:s,suffixEscaped:a,formatSeparator:l,unescapeSuffix:c,unescapePrefix:d,nestingPrefix:h,nestingPrefixEscaped:u,nestingSuffix:p,nestingSuffixEscaped:f,nestingOptionsSeparator:m,maxReplaces:g,alwaysFormat:v}=e.interpolation;this.escape=void 0!==t?t:ea,this.escapeValue=void 0===r||r,this.useRawValueToEscape=void 0!==i&&i,this.prefix=n?Qs(n):o||"{{",this.suffix=s?Qs(s):a||"}}",this.formatSeparator=l||",",this.unescapePrefix=c?"":d||"-",this.unescapeSuffix=this.unescapePrefix?"":c||"",this.nestingPrefix=h?Qs(h):u||Qs("$t("),this.nestingSuffix=p?Qs(p):f||Qs(")"),this.nestingOptionsSeparator=m||",",this.maxReplaces=g||1e3,this.alwaysFormat=void 0!==v&&v,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(e,t)=>e&&e.source===t?(e.lastIndex=0,e):new RegExp(t,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(e,t,r,i){let n,o,s;const a=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function l(e){return e.replace(/\$/g,"$$$$")}const c=e=>{if(e.indexOf(this.formatSeparator)<0){const n=va(t,a,e,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(n,void 0,r,{...i,...t,interpolationkey:e}):n}const n=e.split(this.formatSeparator),o=n.shift().trim(),s=n.join(this.formatSeparator).trim();return this.format(va(t,a,o,this.options.keySeparator,this.options.ignoreJSONStructure),s,r,{...i,...t,interpolationkey:o})};this.resetRegExp();const d=i&&i.missingInterpolationHandler||this.options.missingInterpolationHandler,h=i&&i.interpolation&&void 0!==i.interpolation.skipOnVariables?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:e=>l(e)},{regex:this.regexp,safeValue:e=>this.escapeValue?l(this.escape(e)):l(e)}].forEach((t=>{for(s=0;n=t.regex.exec(e);){const r=n[1].trim();if(o=c(r),void 0===o)if("function"==typeof d){const t=d(e,n,i);o="string"==typeof t?t:""}else if(i&&Object.prototype.hasOwnProperty.call(i,r))o="";else{if(h){o=n[0];continue}this.logger.warn(`missed to pass in variable ${r} for interpolating ${e}`),o=""}else"string"==typeof o||this.useRawValueToEscape||(o=Ws(o));const a=t.safeValue(o);if(e=e.replace(n[0],a),h?(t.regex.lastIndex+=o.length,t.regex.lastIndex-=n[0].length):t.regex.lastIndex=0,s++,s>=this.maxReplaces)break}})),e}nest(e,t){let r,i,n,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};function s(e,t){const r=this.nestingOptionsSeparator;if(e.indexOf(r)<0)return e;const i=e.split(new RegExp(`${r}[ ]*{`));let o=`{${i[1]}`;e=i[0],o=this.interpolate(o,n);const s=o.match(/'/g),a=o.match(/"/g);(s&&s.length%2==0&&!a||a.length%2!=0)&&(o=o.replace(/'/g,'"'));try{n=JSON.parse(o),t&&(n={...t,...n})}catch(t){return this.logger.warn(`failed parsing options string in nesting for key ${e}`,t),`${e}${r}${o}`}return n.defaultValue&&n.defaultValue.indexOf(this.prefix)>-1&&delete n.defaultValue,e}for(;r=this.nestingRegexp.exec(e);){let a=[];n={...o},n=n.replace&&"string"!=typeof n.replace?n.replace:n,n.applyPostProcessor=!1,delete n.defaultValue;let l=!1;if(-1!==r[0].indexOf(this.formatSeparator)&&!/{.*}/.test(r[1])){const e=r[1].split(this.formatSeparator).map((e=>e.trim()));r[1]=e.shift(),a=e,l=!0}if(i=t(s.call(this,r[1].trim(),n),n),i&&r[0]===e&&"string"!=typeof i)return i;"string"!=typeof i&&(i=Ws(i)),i||(this.logger.warn(`missed to resolve ${r[1]} for nesting ${e}`),i=""),l&&(i=a.reduce(((e,t)=>this.format(e,t,o.lng,{...o,interpolationkey:r[1].trim()})),i.trim())),e=e.replace(r[0],i),this.regexp.lastIndex=0}return e}}function ya(e){const t={};return function(r,i,n){const o=i+JSON.stringify(n);let s=t[o];return s||(s=e(na(i),n),t[o]=s),s(r)}}class xa{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.logger=js.create("formatter"),this.options=e,this.formats={number:ya(((e,t)=>{const r=new Intl.NumberFormat(e,{...t});return e=>r.format(e)})),currency:ya(((e,t)=>{const r=new Intl.NumberFormat(e,{...t,style:"currency"});return e=>r.format(e)})),datetime:ya(((e,t)=>{const r=new Intl.DateTimeFormat(e,{...t});return e=>r.format(e)})),relativetime:ya(((e,t)=>{const r=new Intl.RelativeTimeFormat(e,{...t});return e=>r.format(e,t.range||"day")})),list:ya(((e,t)=>{const r=new Intl.ListFormat(e,{...t});return e=>r.format(e)}))},this.init(e)}init(e){const t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}}).interpolation;this.formatSeparator=t.formatSeparator?t.formatSeparator:t.formatSeparator||","}add(e,t){this.formats[e.toLowerCase().trim()]=t}addCached(e,t){this.formats[e.toLowerCase().trim()]=ya(t)}format(e,t,r){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const n=t.split(this.formatSeparator).reduce(((e,t)=>{const{formatName:n,formatOptions:o}=function(e){let t=e.toLowerCase().trim();const r={};if(e.indexOf("(")>-1){const i=e.split("(");t=i[0].toLowerCase().trim();const n=i[1].substring(0,i[1].length-1);"currency"===t&&n.indexOf(":")<0?r.currency||(r.currency=n.trim()):"relativetime"===t&&n.indexOf(":")<0?r.range||(r.range=n.trim()):n.split(";").forEach((e=>{if(e){const[t,...i]=e.split(":"),n=i.join(":").trim().replace(/^'+|'+$/g,""),o=t.trim();r[o]||(r[o]=n),"false"===n&&(r[o]=!1),"true"===n&&(r[o]=!0),isNaN(n)||(r[o]=parseInt(n,10))}}))}return{formatName:t,formatOptions:r}}(t);if(this.formats[n]){let t=e;try{const s=i&&i.formatParams&&i.formatParams[i.interpolationkey]||{},a=s.locale||s.lng||i.locale||i.lng||r;t=this.formats[n](e,a,{...o,...i,...s})}catch(e){this.logger.warn(e)}return t}return this.logger.warn(`there was no format function for ${n}`),e}),e);return n}}class wa extends Gs{constructor(e,t,r){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};super(),this.backend=e,this.store=t,this.services=r,this.languageUtils=r.languageUtils,this.options=i,this.logger=js.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=i.maxParallelReads||10,this.readingCalls=0,this.maxRetries=i.maxRetries>=0?i.maxRetries:5,this.retryTimeout=i.retryTimeout>=1?i.retryTimeout:350,this.state={},this.queue=[],this.backend&&this.backend.init&&this.backend.init(r,i.backend,i)}queueLoad(e,t,r,i){const n={},o={},s={},a={};return e.forEach((e=>{let i=!0;t.forEach((t=>{const s=`${e}|${t}`;!r.reload&&this.store.hasResourceBundle(e,t)?this.state[s]=2:this.state[s]<0||(1===this.state[s]?void 0===o[s]&&(o[s]=!0):(this.state[s]=1,i=!1,void 0===o[s]&&(o[s]=!0),void 0===n[s]&&(n[s]=!0),void 0===a[t]&&(a[t]=!0)))})),i||(s[e]=!0)})),(Object.keys(n).length||Object.keys(o).length)&&this.queue.push({pending:o,pendingCount:Object.keys(o).length,loaded:{},errors:[],callback:i}),{toLoad:Object.keys(n),pending:Object.keys(o),toLoadLanguages:Object.keys(s),toLoadNamespaces:Object.keys(a)}}loaded(e,t,r){const i=e.split("|"),n=i[0],o=i[1];t&&this.emit("failedLoading",n,o,t),r&&this.store.addResourceBundle(n,o,r,void 0,void 0,{skipCopy:!0}),this.state[e]=t?-1:2;const s={};this.queue.forEach((r=>{!function(e,t,r,i){const{obj:n,k:o}=Ys(e,t,Object);n[o]=n[o]||[],i&&(n[o]=n[o].concat(r)),i||n[o].push(r)}(r.loaded,[n],o),function(e,t){void 0!==e.pending[t]&&(delete e.pending[t],e.pendingCount--)}(r,e),t&&r.errors.push(t),0!==r.pendingCount||r.done||(Object.keys(r.loaded).forEach((e=>{s[e]||(s[e]={});const t=r.loaded[e];t.length&&t.forEach((t=>{void 0===s[e][t]&&(s[e][t]=!0)}))})),r.done=!0,r.errors.length?r.callback(r.errors):r.callback())})),this.emit("loaded",s),this.queue=this.queue.filter((e=>!e.done))}read(e,t,r){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.retryTimeout,o=arguments.length>5?arguments[5]:void 0;if(!e.length)return o(null,{});if(this.readingCalls>=this.maxParallelReads)return void this.waitingReads.push({lng:e,ns:t,fcName:r,tried:i,wait:n,callback:o});this.readingCalls++;const s=(s,a)=>{if(this.readingCalls--,this.waitingReads.length>0){const e=this.waitingReads.shift();this.read(e.lng,e.ns,e.fcName,e.tried,e.wait,e.callback)}s&&a&&i<this.maxRetries?setTimeout((()=>{this.read.call(this,e,t,r,i+1,2*n,o)}),n):o(s,a)},a=this.backend[r].bind(this.backend);if(2!==a.length)return a(e,t,s);try{const r=a(e,t);r&&"function"==typeof r.then?r.then((e=>s(null,e))).catch(s):s(null,r)}catch(e){s(e)}}prepareLoading(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),i&&i();"string"==typeof e&&(e=this.languageUtils.toResolveHierarchy(e)),"string"==typeof t&&(t=[t]);const n=this.queueLoad(e,t,r,i);if(!n.toLoad.length)return n.pending.length||i(),null;n.toLoad.forEach((e=>{this.loadOne(e)}))}load(e,t,r){this.prepareLoading(e,t,{},r)}reload(e,t,r){this.prepareLoading(e,t,{reload:!0},r)}loadOne(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const r=e.split("|"),i=r[0],n=r[1];this.read(i,n,"read",void 0,void 0,((r,o)=>{r&&this.logger.warn(`${t}loading namespace ${n} for language ${i} failed`,r),!r&&o&&this.logger.log(`${t}loaded namespace ${n} for language ${i}`,o),this.loaded(e,r,o)}))}saveMissing(e,t,r,i,n){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:()=>{};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(t))this.logger.warn(`did not save key "${r}" as the namespace "${t}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");else if(null!=r&&""!==r){if(this.backend&&this.backend.create){const a={...o,isUpdate:n},l=this.backend.create.bind(this.backend);if(l.length<6)try{let n;n=5===l.length?l(e,t,r,i,a):l(e,t,r,i),n&&"function"==typeof n.then?n.then((e=>s(null,e))).catch(s):s(null,n)}catch(e){s(e)}else l(e,t,r,i,s,a)}e&&e[0]&&this.store.addResource(e[0],t,r,i)}}}function _a(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(e){let t={};if("object"==typeof e[1]&&(t=e[1]),"string"==typeof e[1]&&(t.defaultValue=e[1]),"string"==typeof e[2]&&(t.tDescription=e[2]),"object"==typeof e[2]||"object"==typeof e[3]){const r=e[3]||e[2];Object.keys(r).forEach((e=>{t[e]=r[e]}))}return t},interpolation:{escapeValue:!0,format:e=>e,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}}function ka(e){return"string"==typeof e.ns&&(e.ns=[e.ns]),"string"==typeof e.fallbackLng&&(e.fallbackLng=[e.fallbackLng]),"string"==typeof e.fallbackNS&&(e.fallbackNS=[e.fallbackNS]),e.supportedLngs&&e.supportedLngs.indexOf("cimode")<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),e}function Ca(){}class Sa extends Gs{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;var r;if(super(),this.options=ka(e),this.services={},this.logger=js,this.modules={external:[]},r=this,Object.getOwnPropertyNames(Object.getPrototypeOf(r)).forEach((e=>{"function"==typeof r[e]&&(r[e]=r[e].bind(r))})),t&&!this.isInitialized&&!e.isClone){if(!this.options.initImmediate)return this.init(e,t),this;setTimeout((()=>{this.init(e,t)}),0)}}init(){var e=this;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,"function"==typeof t&&(r=t,t={}),!t.defaultNS&&!1!==t.defaultNS&&t.ns&&("string"==typeof t.ns?t.defaultNS=t.ns:t.ns.indexOf("translation")<0&&(t.defaultNS=t.ns[0]));const i=_a();function n(e){return e?"function"==typeof e?new e:e:null}if(this.options={...i,...this.options,...ka(t)},"v1"!==this.options.compatibilityAPI&&(this.options.interpolation={...i.interpolation,...this.options.interpolation}),void 0!==t.keySeparator&&(this.options.userDefinedKeySeparator=t.keySeparator),void 0!==t.nsSeparator&&(this.options.userDefinedNsSeparator=t.nsSeparator),!this.options.isClone){let t;this.modules.logger?js.init(n(this.modules.logger),this.options):js.init(null,this.options),this.modules.formatter?t=this.modules.formatter:"undefined"!=typeof Intl&&(t=xa);const r=new da(this.options);this.store=new oa(this.options.resources,this.options);const o=this.services;o.logger=js,o.resourceStore=this.store,o.languageUtils=r,o.pluralResolver=new ga(r,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),!t||this.options.interpolation.format&&this.options.interpolation.format!==i.interpolation.format||(o.formatter=n(t),o.formatter.init(o,this.options),this.options.interpolation.format=o.formatter.format.bind(o.formatter)),o.interpolator=new ba(this.options),o.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},o.backendConnector=new wa(n(this.modules.backend),o.resourceStore,o,this.options),o.backendConnector.on("*",(function(t){for(var r=arguments.length,i=new Array(r>1?r-1:0),n=1;n<r;n++)i[n-1]=arguments[n];e.emit(t,...i)})),this.modules.languageDetector&&(o.languageDetector=n(this.modules.languageDetector),o.languageDetector.init&&o.languageDetector.init(o,this.options.detection,this.options)),this.modules.i18nFormat&&(o.i18nFormat=n(this.modules.i18nFormat),o.i18nFormat.init&&o.i18nFormat.init(this)),this.translator=new la(this.services,this.options),this.translator.on("*",(function(t){for(var r=arguments.length,i=new Array(r>1?r-1:0),n=1;n<r;n++)i[n-1]=arguments[n];e.emit(t,...i)})),this.modules.external.forEach((e=>{e.init&&e.init(this)}))}if(this.format=this.options.interpolation.format,r||(r=Ca),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const e=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);e.length>0&&"dev"!==e[0]&&(this.options.lng=e[0])}this.services.languageDetector||this.options.lng||this.logger.warn("init: no languageDetector is used and no lng is defined");["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach((t=>{this[t]=function(){return e.store[t](...arguments)}}));["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach((t=>{this[t]=function(){return e.store[t](...arguments),e}}));const o=Hs(),s=()=>{const e=(e,t)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),o.resolve(t),r(e,t)};if(this.languages&&"v1"!==this.options.compatibilityAPI&&!this.isInitialized)return e(null,this.t.bind(this));this.changeLanguage(this.options.lng,e)};return this.options.resources||!this.options.initImmediate?s():setTimeout(s,0),o}loadResources(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ca;const r="string"==typeof e?e:this.language;if("function"==typeof e&&(t=e),!this.options.resources||this.options.partialBundledLanguages){if(r&&"cimode"===r.toLowerCase()&&(!this.options.preload||0===this.options.preload.length))return t();const e=[],i=t=>{if(!t)return;if("cimode"===t)return;this.services.languageUtils.toResolveHierarchy(t).forEach((t=>{"cimode"!==t&&e.indexOf(t)<0&&e.push(t)}))};if(r)i(r);else{this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach((e=>i(e)))}this.options.preload&&this.options.preload.forEach((e=>i(e))),this.services.backendConnector.load(e,this.options.ns,(e=>{e||this.resolvedLanguage||!this.language||this.setResolvedLanguage(this.language),t(e)}))}else t(null)}reloadResources(e,t,r){const i=Hs();return e||(e=this.languages),t||(t=this.options.ns),r||(r=Ca),this.services.backendConnector.reload(e,t,(e=>{i.resolve(),r(e)})),i}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return"backend"===e.type&&(this.modules.backend=e),("logger"===e.type||e.log&&e.warn&&e.error)&&(this.modules.logger=e),"languageDetector"===e.type&&(this.modules.languageDetector=e),"i18nFormat"===e.type&&(this.modules.i18nFormat=e),"postProcessor"===e.type&&sa.addPostProcessor(e),"formatter"===e.type&&(this.modules.formatter=e),"3rdParty"===e.type&&this.modules.external.push(e),this}setResolvedLanguage(e){if(e&&this.languages&&!(["cimode","dev"].indexOf(e)>-1))for(let e=0;e<this.languages.length;e++){const t=this.languages[e];if(!(["cimode","dev"].indexOf(t)>-1)&&this.store.hasLanguageSomeTranslations(t)){this.resolvedLanguage=t;break}}}changeLanguage(e,t){var r=this;this.isLanguageChangingTo=e;const i=Hs();this.emit("languageChanging",e);const n=e=>{this.language=e,this.languages=this.services.languageUtils.toResolveHierarchy(e),this.resolvedLanguage=void 0,this.setResolvedLanguage(e)},o=(e,o)=>{o?(n(o),this.translator.changeLanguage(o),this.isLanguageChangingTo=void 0,this.emit("languageChanged",o),this.logger.log("languageChanged",o)):this.isLanguageChangingTo=void 0,i.resolve((function(){return r.t(...arguments)})),t&&t(e,(function(){return r.t(...arguments)}))},s=t=>{e||t||!this.services.languageDetector||(t=[]);const r="string"==typeof t?t:this.services.languageUtils.getBestMatchFromCodes(t);r&&(this.language||n(r),this.translator.language||this.translator.changeLanguage(r),this.services.languageDetector&&this.services.languageDetector.cacheUserLanguage&&this.services.languageDetector.cacheUserLanguage(r)),this.loadResources(r,(e=>{o(e,r)}))};return e||!this.services.languageDetector||this.services.languageDetector.async?!e&&this.services.languageDetector&&this.services.languageDetector.async?0===this.services.languageDetector.detect.length?this.services.languageDetector.detect().then(s):this.services.languageDetector.detect(s):s(e):s(this.services.languageDetector.detect()),i}getFixedT(e,t,r){var i=this;const n=function(e,t){let o;if("object"!=typeof t){for(var s=arguments.length,a=new Array(s>2?s-2:0),l=2;l<s;l++)a[l-2]=arguments[l];o=i.options.overloadTranslationOptionHandler([e,t].concat(a))}else o={...t};o.lng=o.lng||n.lng,o.lngs=o.lngs||n.lngs,o.ns=o.ns||n.ns,o.keyPrefix=o.keyPrefix||r||n.keyPrefix;const c=i.options.keySeparator||".";let d;return d=o.keyPrefix&&Array.isArray(e)?e.map((e=>`${o.keyPrefix}${c}${e}`)):o.keyPrefix?`${o.keyPrefix}${c}${e}`:e,i.t(d,o)};return"string"==typeof e?n.lng=e:n.lngs=e,n.ns=t,n.keyPrefix=r,n}t(){return this.translator&&this.translator.translate(...arguments)}exists(){return this.translator&&this.translator.exists(...arguments)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const r=t.lng||this.resolvedLanguage||this.languages[0],i=!!this.options&&this.options.fallbackLng,n=this.languages[this.languages.length-1];if("cimode"===r.toLowerCase())return!0;const o=(e,t)=>{const r=this.services.backendConnector.state[`${e}|${t}`];return-1===r||2===r};if(t.precheck){const e=t.precheck(this,o);if(void 0!==e)return e}return!!this.hasResourceBundle(r,e)||(!(this.services.backendConnector.backend&&(!this.options.resources||this.options.partialBundledLanguages))||!(!o(r,e)||i&&!o(n,e)))}loadNamespaces(e,t){const r=Hs();return this.options.ns?("string"==typeof e&&(e=[e]),e.forEach((e=>{this.options.ns.indexOf(e)<0&&this.options.ns.push(e)})),this.loadResources((e=>{r.resolve(),t&&t(e)})),r):(t&&t(),Promise.resolve())}loadLanguages(e,t){const r=Hs();"string"==typeof e&&(e=[e]);const i=this.options.preload||[],n=e.filter((e=>i.indexOf(e)<0&&this.services.languageUtils.isSupportedCode(e)));return n.length?(this.options.preload=i.concat(n),this.loadResources((e=>{r.resolve(),t&&t(e)})),r):(t&&t(),Promise.resolve())}dir(e){if(e||(e=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!e)return"rtl";const t=this.services&&this.services.languageUtils||new da(_a());return["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"].indexOf(t.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){return new Sa(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments.length>1?arguments[1]:void 0)}cloneInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ca;const r=e.forkResourceStore;r&&delete e.forkResourceStore;const i={...this.options,...e,isClone:!0},n=new Sa(i);void 0===e.debug&&void 0===e.prefix||(n.logger=n.logger.clone(e));return["store","services","language"].forEach((e=>{n[e]=this[e]})),n.services={...this.services},n.services.utils={hasLoadedNamespace:n.hasLoadedNamespace.bind(n)},r&&(n.store=new oa(this.store.data,i),n.services.resourceStore=n.store),n.translator=new la(n.services,i),n.translator.on("*",(function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];n.emit(e,...r)})),n.init(i,t),n.translator.options=i,n.translator.backendConnector.services.utils={hasLoadedNamespace:n.hasLoadedNamespace.bind(n)},n}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const Aa=Sa.createInstance();function Pa(e){return Pa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pa(e)}function Ta(){return"function"==typeof XMLHttpRequest||"object"===("undefined"==typeof XMLHttpRequest?"undefined":Pa(XMLHttpRequest))}var Ea;if(Aa.createInstance=Sa.createInstance,Aa.createInstance,Aa.dir,Aa.init,Aa.loadResources,Aa.reloadResources,Aa.use,Aa.changeLanguage,Aa.getFixedT,Aa.t,Aa.exists,Aa.setDefaultNamespace,Aa.hasLoadedNamespace,Aa.loadNamespaces,Aa.loadLanguages,"function"==typeof fetch&&(Ea="undefined"!=typeof global&&global.fetch?global.fetch:"undefined"!=typeof window&&window.fetch?window.fetch:fetch),"undefined"!=typeof require&&"undefined"==typeof window){var Ia=Ea||require("cross-fetch");Ia.default&&(Ia=Ia.default),exports.default=Ia,module.exports=exports.default}var La,Oa,Ma,Ra=Object.freeze({__proto__:null});function $a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function Na(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?$a(Object(r),!0).forEach((function(t){Da(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Da(e,t,r){return t=function(e){var t=function(e,t){if("object"!=za(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=za(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==za(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function za(e){return za="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},za(e)}"function"==typeof fetch&&(La="undefined"!=typeof global&&global.fetch?global.fetch:"undefined"!=typeof window&&window.fetch?window.fetch:fetch),Ta()&&("undefined"!=typeof global&&global.XMLHttpRequest?Oa=global.XMLHttpRequest:"undefined"!=typeof window&&window.XMLHttpRequest&&(Oa=window.XMLHttpRequest)),"function"==typeof ActiveXObject&&("undefined"!=typeof global&&global.ActiveXObject?Ma=global.ActiveXObject:"undefined"!=typeof window&&window.ActiveXObject&&(Ma=window.ActiveXObject)),La||!Ra||Oa||Ma||(La=Ra),"function"!=typeof La&&(La=void 0);var Ba=function(e,t){if(t&&"object"===za(t)){var r="";for(var i in t)r+="&"+encodeURIComponent(i)+"="+encodeURIComponent(t[i]);if(!r)return e;e=e+(-1!==e.indexOf("?")?"&":"?")+r.slice(1)}return e},Fa=function(e,t,r,i){var n=function(e){if(!e.ok)return r(e.statusText||"Error",{status:e.status});e.text().then((function(t){r(null,{status:e.status,data:t})})).catch(r)};if(i){var o=i(e,t);if(o instanceof Promise)return void o.then(n).catch(r)}"function"==typeof fetch?fetch(e,t).then(n).catch(r):La(e,t).then(n).catch(r)},Ua=!1,Va=function(e,t,r,i){return"function"==typeof r&&(i=r,r=void 0),i=i||function(){},La&&0!==t.indexOf("file:")?function(e,t,r,i){e.queryStringParams&&(t=Ba(t,e.queryStringParams));var n=Na({},"function"==typeof e.customHeaders?e.customHeaders():e.customHeaders);"undefined"==typeof window&&"undefined"!=typeof global&&void 0!==global.process&&global.process.versions&&global.process.versions.node&&(n["User-Agent"]="i18next-http-backend (node/".concat(global.process.version,"; ").concat(global.process.platform," ").concat(global.process.arch,")")),r&&(n["Content-Type"]="application/json");var o="function"==typeof e.requestOptions?e.requestOptions(r):e.requestOptions,s=Na({method:r?"POST":"GET",body:r?e.stringify(r):void 0,headers:n},Ua?{}:o),a="function"==typeof e.alternateFetch&&e.alternateFetch.length>=1?e.alternateFetch:void 0;try{Fa(t,s,i,a)}catch(e){if(!o||0===Object.keys(o).length||!e.message||e.message.indexOf("not implemented")<0)return i(e);try{Object.keys(o).forEach((function(e){delete s[e]})),Fa(t,s,i,a),Ua=!0}catch(e){i(e)}}}(e,t,r,i):Ta()||"function"==typeof ActiveXObject?function(e,t,r,i){r&&"object"===za(r)&&(r=Ba("",r).slice(1)),e.queryStringParams&&(t=Ba(t,e.queryStringParams));try{var n;(n=Oa?new Oa:new Ma("MSXML2.XMLHTTP.3.0")).open(r?"POST":"GET",t,1),e.crossDomain||n.setRequestHeader("X-Requested-With","XMLHttpRequest"),n.withCredentials=!!e.withCredentials,r&&n.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),n.overrideMimeType&&n.overrideMimeType("application/json");var o=e.customHeaders;if(o="function"==typeof o?o():o)for(var s in o)n.setRequestHeader(s,o[s]);n.onreadystatechange=function(){n.readyState>3&&i(n.status>=400?n.statusText:null,{status:n.status,data:n.responseText})},n.send(r)}catch(e){console&&console.log(e)}}(e,t,r,i):void i(new Error("No fetch and no xhr implementation found!"))};function ja(e){return ja="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ja(e)}function Ga(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function Ha(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ga(Object(r),!0).forEach((function(t){qa(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ga(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Wa(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,Ya(i.key),i)}}function qa(e,t,r){return(t=Ya(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ya(e){var t=function(e,t){if("object"!=ja(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=ja(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ja(t)?t:t+""}var Ja,Xa,Za,Qa=(Ja=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.services=t,this.options=r,this.allOptions=i,this.type="backend",this.init(t,r,i)},Xa=[{key:"init",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this.services=e,this.options=Ha(Ha(Ha({},{loadPath:"/locales/{{lng}}/{{ns}}.json",addPath:"/locales/add/{{lng}}/{{ns}}",parse:function(e){return JSON.parse(e)},stringify:JSON.stringify,parsePayload:function(e,t,r){return qa({},t,r||"")},parseLoadPayload:function(e,t){},request:Va,reloadInterval:"undefined"==typeof window&&36e5,customHeaders:{},queryStringParams:{},crossDomain:!1,withCredentials:!1,overrideMimeType:!1,requestOptions:{mode:"cors",credentials:"same-origin",cache:"default"}}),this.options||{}),r),this.allOptions=i,this.services&&this.options.reloadInterval){var n=setInterval((function(){return t.reload()}),this.options.reloadInterval);"object"===ja(n)&&"function"==typeof n.unref&&n.unref()}}},{key:"readMulti",value:function(e,t,r){this._readAny(e,e,t,t,r)}},{key:"read",value:function(e,t,r){this._readAny([e],e,[t],t,r)}},{key:"_readAny",value:function(e,t,r,i,n){var o,s=this,a=this.options.loadPath;"function"==typeof this.options.loadPath&&(a=this.options.loadPath(e,r)),(a=function(e){return!!e&&"function"==typeof e.then}(o=a)?o:Promise.resolve(o)).then((function(o){if(!o)return n(null,{});var a=s.services.interpolator.interpolate(o,{lng:e.join("+"),ns:r.join("+")});s.loadUrl(a,n,t,i)}))}},{key:"loadUrl",value:function(e,t,r,i){var n=this,o="string"==typeof r?[r]:r,s="string"==typeof i?[i]:i,a=this.options.parseLoadPayload(o,s);this.options.request(this.options,e,a,(function(o,s){if(s&&(s.status>=500&&s.status<600||!s.status))return t("failed loading "+e+"; status code: "+s.status,!0);if(s&&s.status>=400&&s.status<500)return t("failed loading "+e+"; status code: "+s.status,!1);if(!s&&o&&o.message&&o.message.indexOf("Failed to fetch")>-1)return t("failed loading "+e+": "+o.message,!0);if(o)return t(o,!1);var a,l;try{a="string"==typeof s.data?n.options.parse(s.data,r,i):s.data}catch(t){l="failed parsing "+e+" to json"}if(l)return t(l,!1);t(null,a)}))}},{key:"create",value:function(e,t,r,i,n){var o=this;if(this.options.addPath){"string"==typeof e&&(e=[e]);var s=this.options.parsePayload(t,r,i),a=0,l=[],c=[];e.forEach((function(r){var i=o.options.addPath;"function"==typeof o.options.addPath&&(i=o.options.addPath(r,t));var d=o.services.interpolator.interpolate(i,{lng:r,ns:t});o.options.request(o.options,d,s,(function(t,r){a+=1,l.push(t),c.push(r),a===e.length&&"function"==typeof n&&n(l,c)}))}))}}},{key:"reload",value:function(){var e=this,t=this.services,r=t.backendConnector,i=t.languageUtils,n=t.logger,o=r.language;if(!o||"cimode"!==o.toLowerCase()){var s=[],a=function(e){i.toResolveHierarchy(e).forEach((function(e){s.indexOf(e)<0&&s.push(e)}))};a(o),this.allOptions.preload&&this.allOptions.preload.forEach((function(e){return a(e)})),s.forEach((function(t){e.allOptions.ns.forEach((function(e){r.read(t,e,"read",null,null,(function(i,o){i&&n.warn("loading namespace ".concat(e," for language ").concat(t," failed"),i),!i&&o&&n.log("loaded namespace ".concat(e," for language ").concat(t),o),r.loaded("".concat(t,"|").concat(e),i,o)}))}))}))}}}],Xa&&Wa(Ja.prototype,Xa),Za&&Wa(Ja,Za),Object.defineProperty(Ja,"prototype",{writable:!1}),Ja);Qa.type="backend";class Ka{static redirectTo(e){history.pushState({},"",e),window.dispatchEvent(new CustomEvent("location-changed")),document.dispatchEvent(new CustomEvent("yp-pause-media-playback",{bubbles:!0,detail:{}}))}static goToPost(e,t=void 0,r=void 0,i=void 0,n=!1){if(void 0===e)return void console.error("Can't find post id for goToPost");let o="/post/"+e;void 0!==t&&(o+="/"+t);const s=window.location.href;r&&(window.appGlobals.cache.cachedActivityItem=r),i&&i.Group&&i.Group.Community&&(window.appGlobals.cache.cachedPostItem=i),-1==s.indexOf(o)&&(window.appGlobals.activity("open","post",o,{id:e,modelType:"post"}),!0!==n&&window.app.setKeepOpenForPostsOn(window.location.pathname),setTimeout((()=>{this.redirectTo(o)})))}}class el extends Ds{constructor(e){super(),this.recommendationsGroupCache={},this.recommendationCallbacks={},this.lastRecommendationResponseLengths={},this.currentlyDownloadingIds={},this.preCacheLimit=3,this.serverApi=e}getNextRecommendationForGroup(e,t,r){if(this.currentPostId=t,this.recommendationCallbacks[e]=r,this.recommendationsGroupCache[e])if(this.recommendationsGroupCache[e].length>0){const t=this._getSelectedPost(e);t&&window.appGlobals.showRecommendationInfoIfNeeded(),r(t)}else r(null);else this._getRecommendationsForGroup(e)}_preCacheMediaForPost(e){setTimeout((()=>{let t=null;e.cover_media_type&&"none"!==e.cover_media_type||e.Category?e.cover_media_type&&"none"!==e.cover_media_type||!e.Category?"image"===e.cover_media_type&&(t=this._getImageFormatUrl(e.PostHeaderImages,0)):t=this._getCategoryImagePath(e):t="https://i.imgur.com/sdsFAoT.png",t&&((new Image).src=t)}))}_getImageFormatUrl(e,t){if(!(e&&e.length>0))return"";{const r=JSON.parse(e[e.length-1].formats);if(r&&r.length>0)return r[t]}}_getCategoryImagePath(e){return e&&e.Category&&e.Category.CategoryIconImages?this._getImageFormatUrl(e.Category.CategoryIconImages,0):""}_downloadItemToCache(e){setTimeout((()=>{this.currentlyDownloadingIds[e]?console.warn("Recommendation already downloading: "+e):(this.currentlyDownloadingIds[e]=!0,console.log("Recommendation downloading for cache: "+e),fetch("/api/posts/"+e).then((t=>(this.currentlyDownloadingIds[e]=!1,t.json()))).then((t=>{t?this._preCacheMediaForPost(t):console.error("Recommendation no post to save to cache"),window.appGlobals.cache.postItemsCache[e]=t})).catch((t=>{console.error("Recommendation: Error in getting post for cache",t),this.currentlyDownloadingIds[e]=!1})))}))}_ensureNextItemsAreCached(e){for(let t=0;t<Math.min(this.recommendationsGroupCache[e].length-1,this.preCacheLimit);t++)window.appGlobals.cache.postItemsCache[this.recommendationsGroupCache[e][t].id]||this._downloadItemToCache(this.recommendationsGroupCache[e][t].id)}async _getRecommendationsForGroup(e){const t=await this.serverApi.getRecommendationsForGroup(e);t&&(this.lastRecommendationResponseLengths[e]=t.length,this.recommendationsGroupCache[e]?this.recommendationsGroupCache[e]=this.recommendationsGroupCache[e].concat(t):this.recommendationsGroupCache[e]=t,this.recommendationCallbacks[e]&&(this.recommendationCallbacks[e](this._getSelectedPost(e)),delete this.recommendationCallbacks[e]))}_getSelectedPost(e){if(this.recommendationsGroupCache[e]){let t=this.recommendationsGroupCache[e][0];return t?(t.id===this.currentPostId&&(this.recommendationsGroupCache[e].shift(),t=this.recommendationsGroupCache[e].length>0?this.recommendationsGroupCache[e][0]:null),t&&this._ensureNextItemsAreCached(e),t):(console.warn("Recommendation no post for getSelectedPost, groupId: "+e),null)}return null}reset(){this.recommendationsSeenPostIds={},this.lastRecommendationResponseLengths={},this.recommendationCallbacks={},this.recommendationsGroupCache={}}}class tl extends Ds{constructor(){super(...arguments),this.backToDomainCommunityItems={},this.backToCommunityGroupItems={},this.communityItemsCache={},this.groupItemsCache={},this.postItemsCache={},this.autoTranslateCache={}}addPostsToCacheLater(e){const t=Math.floor(1e3*Math.random())+750;setTimeout((()=>{this.addPostsToCache(e)}),t)}addPostsToCache(e){if(e)for(let t=0;t<e.length;t++)this.postItemsCache[e[t].id]||(this.postItemsCache[e[t].id]=e[t]);else console.error("No posts for cache")}getPostFromCache(e){return this.postItemsCache[e]}updatePostInCache(e){this.postItemsCache[e.id]=e}}class rl extends Ds{_onlineEvent(){this.showToast(this.t("youAreOnline")),this._checkContentToSend()}_offlineEvent(){this.showToast(this.t("youAreNowOffline"))}_urlWithQuery(e,t){const r=Object.keys(t).filter((e=>void 0!==t[e]&&"object"!=typeof t[e])).map((e=>encodeURIComponent(e)+"="+encodeURIComponent(t[e]))).join("&");return e+=(-1===e.indexOf("?")?"?":"&")+r}_getItemsFromLocalStorage(){const e=[];for(let t=0;t<localStorage.length;t++){const r=localStorage.key(t);r&&r.indexOf(this.sendLaterStoragePrefix)>-1&&e.push({key:r,content:JSON.parse(localStorage.getItem(r))})}return e}_sendItems(e){e.forEach((e=>{const t=e.content;fetch(t.url,{method:t.method,headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t.body)}).then((()=>{this.showToast(this.t("storedDataSent")),localStorage.removeItem(e.key)})).catch((e=>{console.error(e),this.showToast(this.t("errorSendingContentWhenOnline"))}))}))}_checkContentToSend(){setTimeout((()=>{const e=this._getItemsFromLocalStorage();e.length>0?navigator.onLine?window.appUser.user?this._sendItems(e):this.showToast(this.t("notLoggedInContentSentWhenLoggedIn")):this.showToast(this.t("offlineContentSentWhenOnline")):navigator.onLine||this.showToast(this.t("youAreOffline"))}),4e3)}checkContentToSendForLoggedInUser(){this._checkContentToSend()}sendWhenOnlineNext(e){setTimeout((()=>{const t=this.sendLaterStoragePrefix+(new Date).getTime();localStorage.setItem(t,JSON.stringify(e)),this.showToast(this.t("offlineContentSentWhenOnline"))}))}constructor(){super(),this.sendLaterStoragePrefix="yp-send-later-",window.addEventListener("online",this._onlineEvent.bind(this)),window.addEventListener("offline",this._offlineEvent.bind(this)),this._checkContentToSend()}}class il extends Ds{constructor(){super(...arguments),this.communityTrackerIds={}}setupGoogleAnalytics(e){}facebookPixelTracking(e,t=void 0){if(this.pixelTrackerId&&e){let r;r="pageview"===e?"PageView":"event"===e&&t?t:e;new Image(1,1).src="https://www.facebook.com/tr?id="+this.pixelTrackerId+"&ev="+r+"&noscript=1",console.debug("Have sent to Facebook pixel: "+r)}}setCommunityPixelTracker(e){if(e&&""!==e)if(null!=localStorage.getItem("consentGivenForFacebookPixelTracking")){const t=this.pixelTrackerId;this.pixelTrackerId=e,e!==t&&this.facebookPixelTracking("pageview")}else localStorage.getItem("disableFacebookPixelTracking")?console.log("Facebook tracking disabled"):this.fireGlobal("yp-open-pixel-cookie-confirm",e);else this.pixelTrackerId=void 0}setCommunityAnalyticsTracker(e){if(e=e?.trim(),e&&e.length>5){const t=this.communityTrackerId;this.communityTrackerId=e,e!==t&&this.sendToAnalyticsTrackers("sendOnlyCommunity","pageview",location.pathname)}else this.communityTrackerId=void 0}sendToAnalyticsTrackers(e,t,r,i=void 0,n=void 0,o=void 0){"sendOnlyCommunity"!=e&&this.facebookPixelTracking(t,r),"pageview"===t&&"sendOnlyCommunity"!==e&&window.appGlobals.activity("pageview",r)}sendLoginAndSignup(e,t,r,i=void 0){}}const nl={monochrome:0,neutral:1,tonalSpot:2,vibrant:3,expressive:4,fidelity:5,content:6,rainbow:7,fruitSalad:8};function ol(e,t,r,i,n){if("string"!=typeof e&&"dynamic"!==i||"object"!=typeof e&&"dynamic"===i)throw new Error("color / scheme type mismatch");let o,s;if(t&&(s=nl[t]),"tonal"===i)o=new di(Tr.fromInt(gi(e)),r,n);else if("fidelity"===i)o=new ai(Tr.fromInt(gi(e)),r,n);else if("vibrant"===i)o=new hi(Tr.fromInt(gi(e)),r,n);else if("expressive"===i)o=new si(Tr.fromInt(gi(e)),r,n);else if("content"===i)o=new oi(Tr.fromInt(gi(e)),r,n);else if("neutral"===i)o=new ci(Tr.fromInt(gi(e)),r,n);else if("monochrome"===i)o=new li(Tr.fromInt(gi(e)),r,n);else if("dynamic"===i&&"object"==typeof e){console.log(e);const t=Tr.fromInt(gi(e.primary)),i=Tr.fromInt(gi(e.secondary)),a=Tr.fromInt(gi(e.tertiary)),l=Tr.fromInt(gi(e.neutral)),c=Tr.fromInt(gi(e.neutralVariant));console.log(e.primary),o=new ri({sourceColorArgb:gi(e.primary),variant:void 0===s?5:s,contrastLevel:n,isDark:r,primaryPalette:Fr.fromHueAndChroma(t.hue,t.chroma),secondaryPalette:Fr.fromHueAndChroma(i.hue,i.chroma),tertiaryPalette:Fr.fromHueAndChroma(a.hue,a.chroma),neutralPalette:Fr.fromHueAndChroma(l.hue,l.chroma),neutralVariantPalette:Fr.fromHueAndChroma(c.hue,c.chroma)})}return function(e){const t=function(e){return{"highest-surface":Br.highestSurface(e),background:Br.background,"on-background":Br.onBackground,surface:Br.surface,"surface-dim":Br.surfaceDim,"surface-bright":Br.surfaceBright,"surface-container-lowest":Br.surfaceContainerLowest,"surface-container-low":Br.surfaceContainerLow,"surface-container":Br.surfaceContainer,"surface-container-high":Br.surfaceContainerHigh,"surface-container-highest":Br.surfaceContainerHighest,"on-surface":Br.onSurface,"surface-variant":Br.surfaceVariant,"on-surface-variant":Br.onSurfaceVariant,"inverse-surface":Br.inverseSurface,"inverse-on-surface":Br.inverseOnSurface,outline:Br.outline,"outline-variant":Br.outlineVariant,shadow:Br.shadow,scrim:Br.scrim,"surface-tint":Br.surfaceTint,primary:Br.primary,"on-primary":Br.onPrimary,"primary-container":Br.primaryContainer,"on-primary-container":Br.onPrimaryContainer,"inverse-primary":Br.inversePrimary,"inverse-on-primary":Br.primary,secondary:Br.secondary,"on-secondary":Br.onSecondary,"secondary-container":Br.secondaryContainer,"on-secondary-container":Br.onSecondaryContainer,tertiary:Br.tertiary,"on-tertiary":Br.onTertiary,"tertiary-container":Br.tertiaryContainer,"on-tertiary-container":Br.onTertiaryContainer,error:Br.error,"on-error":Br.onError,"error-container":Br.errorContainer,"on-error-container":Br.onErrorContainer}}(e),r={};for(const[i,n]of Object.entries(t))r[i]=mi(n.getArgb(e));return r}(o)}function sl(e,t,r="material-theme"){let i=":root{";for(const[e,r]of Object.entries(t))i+=`--md-sys-color-${e}:${r};`;i+="}",function(e,t,r){try{if((new CSSStyleSheet).replace instanceof Function){let i=window[r];i||(i=new CSSStyleSheet,e.adoptedStyleSheets=[...e.adoptedStyleSheets,i],window[r]=i),i.replace(t).catch(console.error)}}catch(i){if(e instanceof Document&&e.head){let i=e.createElement("style");i.setAttribute("id",r),i.textContent=t,e.head.appendChild(i)}else console.error("The provided document does not have a head element.",i)}}(e,i,r)}class al{constructor(){this.themes=[],this.themeColor="#0327f8",this.themeDarkMode=!1,this.themeHighContrast=!1,this.isAppleDevice=!1,this.themeScheme="tonal";const e=localStorage.getItem(As.darkModeLocalStorageKey);this.themeDarkMode=!!e;const t=localStorage.getItem(As.highContrastLocalStorageKey);this.themeHighContrast=!!t,this.setupOldThemes(),this.themeChanged()}setupOldThemes(){this.themes.push({name:"Reykjavk","--mdc-theme-background":"#f7f7f7","--mdc-theme-primary":"#103458","--mdc-theme-secondary":"#ff6500"}),this.themes.push({name:"Basalt Gray","--mdc-theme-background":"#f7f7f7","--mdc-theme-primary":"#37474f","--mdc-theme-secondary":"#ff6500"}),this.themes.push({name:"Green Moss","--mdc-theme-background":"#dcedc8","--mdc-theme-primary":"#558b2f","--mdc-theme-secondary":"#c51162"}),this.themes.push({name:"Google Blue","--mdc-theme-background":"#e3f2fd","--mdc-theme-primary":"#1565c0","--mdc-theme-secondary":"#ff3d00"}),this.themes.push({name:"Red Rhubarb","--mdc-theme-background":"#f1f8e9","--mdc-theme-primary":"#c62828","--mdc-theme-secondary":"#ffd600"}),this.themes.push({name:"Mountain Roses","--mdc-theme-background":"#f1f8e9","--mdc-theme-primary":"#2e7d32","--mdc-theme-secondary":"#d50000"}),this.themes.push({name:"Purple Wizards","--mdc-theme-background":"#ede7f6","--mdc-theme-primary":"#4527a0","--mdc-theme-secondary":"#d50000"}),this.themes.push({name:"Kpavogur","--mdc-theme-background":"#F0F0F0","--mdc-theme-primary":"#004E24","--mdc-theme-secondary":"#ff6500"}),this.themes.push({name:"Forbrukerrdet","--mdc-theme-background":"#f5f5f5","--mdc-theme-primary":"#4b7179","--mdc-theme-secondary":"#d0672f"}),this.themes.push({name:"Forbrukerrdet Fonts","--mdc-theme-background":"#f5f5f5","--mdc-theme-primary":"#4b7179","--mdc-theme-secondary":"#d0672f",fonts:{htmlImport:"/styles/fonts/forbrukerradet-font.html",fontName:"FFClanWebBook"}}),this.themes.push({name:"I choose Malta","--mdc-theme-background":"#cfd8dc","--mdc-theme-primary":"#001a4b","--mdc-theme-secondary":"#d71920"}),this.themes.push({name:"Reykjavk Blue","--mdc-theme-background":"#f7f7f7","--mdc-theme-primary":"#084F71","--mdc-theme-secondary":"#ff6500"}),this.themes.push({name:"Unicorn 1","--mdc-theme-background":"#f7f7f7","--mdc-theme-primary":"#aa3319","--mdc-theme-secondary":"#112e4c"}),this.themes.push({name:"Unicorn 2","--mdc-theme-background":"#f7f7f7","--mdc-theme-primary":"#282828","--mdc-theme-secondary":"#aa3319"}),this.themes.push({name:"Mount Air","--mdc-theme-background":"#f7f7f7","--mdc-theme-primary":"#0d3c55","--mdc-theme-secondary":"#f16c20"}),this.themes.push({name:"Snjallborg","--mdc-theme-background":"#cfd8dc","--mdc-theme-primary":"#1e9ac8","--mdc-theme-secondary":"#ee7aa2"}),this.themes.push({name:"Black","--mdc-theme-background":"#f7f7f7","--mdc-theme-primary":"#282828","--mdc-theme-secondary":"#ff6500"}),this.themes.push({name:"Nesi Okkar","--mdc-theme-background":"#cfd8dc","--mdc-theme-primary":"#525254","--mdc-theme-secondary":"#e0701e"}),this.themes.push({disabled:!0,name:"Snjallborg","--mdc-theme-background":"#cfd8dc","--mdc-theme-primary":"#1e9ac8","--mdc-theme-secondary":"#ee7aa2"}),this.themes.push({disabled:!0,name:"Black","--mdc-theme-background":"#cfd8dc","--mdc-theme-primary":"#282828","--mdc-theme-secondary":"#ff6500"}),this.themes.push({disabled:!0,name:"Nesi Okkar","--mdc-theme-background":"#cfd8dc","--mdc-theme-primary":"#525254","--mdc-theme-secondary":"#e0701e"}),this.themes.push({name:"Iceland","--mdc-theme-background":"#cfd8dc","--mdc-theme-primary":"#282828","--mdc-theme-secondary":"#dc1e35"}),this.themes.push({name:"The Westbourne","--mdc-theme-background":"#f1f8e9","--mdc-theme-primary":"#c62828","--mdc-theme-secondary":"#fbba00"}),this.themes.push({name:"Amsterdam","--mdc-theme-background":"#cfd8dc","--mdc-theme-primary":"#164995","--mdc-theme-secondary":"#ed1b24"}),this.themes.push({name:"AS Roma","--mdc-theme-background":"#DDDBDA","--mdc-theme-primary":"#970a2c","--mdc-theme-secondary":"#fbba00"}),this.themes.push({name:"AS Roma Inverted","--mdc-theme-background":"#DDDBDA","--mdc-theme-primary":"#970a2c","--mdc-theme-secondary":"#1D1D1B"}),this.themes.push({name:"New Jersey","--mdc-theme-background":"#f7f7f7","--mdc-theme-primary":"#56920C","--mdc-theme-secondary":"#1880c7"}),this.themes.push({name:"New Jersey Inverted","--mdc-theme-background":"#f7f7f7","--mdc-theme-primary":"#1880c7","--mdc-theme-secondary":"#56920C"}),this.themes.push({name:"Scottish Parliament","--mdc-theme-background":"#f7f7f7","--mdc-theme-primary":"#500778","--mdc-theme-secondary":"#E87722"}),this.themes.push({name:"RoStartup","--mdc-theme-background":"#F7F7F7","--mdc-theme-primary":"#154164","--mdc-theme-secondary":"#1f52a5","--app-header-font-weight":"500","--app-tags-text-color":"#1f52a5","--app-tags-font-weight":"500",fonts:{htmlImport:"/styles/fonts/rostartup-font.html",fontName:"Montserrat"}}),this.themes.push({name:"wienExtra","--mdc-theme-background":"#F7F7F7","--mdc-theme-primary":"#292929","--mdc-theme-secondary":"#ff0000",fonts:{htmlImport:"/styles/fonts/junges-wien-font.html",fontName:"WienerMelange"}}),this.themes.push({name:"Frumbjrg","--mdc-theme-background":"#fefefe","--mdc-theme-primary":"#17263e","--mdc-theme-secondary":"#1f5d04",fonts:{htmlImport:"/styles/fonts/frumbjorg-font.html",fontName:"Merriweather"}})}updateStyles(e){for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&window.app&&window.app.style.setProperty(t,e[t])}setThemeFromOldConfiguration(e,t=void 0){if(t&&t.themeOverrideColorPrimary&&t.themeOverrideColorPrimary.length>5&&t.themeOverrideColorAccent&&t.themeOverrideColorAccent.length>5?(6===t.themeOverrideColorPrimary.length&&(t.themeOverrideColorPrimary="#"+t.themeOverrideColorPrimary),6===t.themeOverrideColorAccent.length&&(t.themeOverrideColorAccent="#"+t.themeOverrideColorAccent),t.themeOverrideBackgroundColor&&6===t.themeOverrideBackgroundColor.length&&(t.themeOverrideBackgroundColor="#"+t.themeOverrideBackgroundColor),this.themeColor=t.themeOverrideColorPrimary,this.themeChanged()):void 0!==e&&this.themes[e]&&(this.themeColor=this.themes[e]["--mdc-theme-primary"],this.themeChanged()),e&&this.themes[e]&&("wienExtra"===this.themes[e].originalName||"RoStartup"===this.themes[e].originalName||"Frumbjrg"===this.themes[e].originalName)){const e=new CustomEvent("yp-large-font",{detail:!0,bubbles:!0,composed:!0});document.dispatchEvent(e)}else if(e&&this.themes[e]){const e=new CustomEvent("yp-large-font",{detail:!1,bubbles:!0,composed:!0});document.dispatchEvent(e)}}sanitizeFontStyles(e){const t=["body","font-family","font-weight","font-size"],r=/([a-zA-Z\-]+)\s*:\s*([^;]+);?/g;let i,n="";for(;null!==(i=r.exec(e));)t.includes(i[1])&&(n+=`${i[1]}: ${i[2]}; `);return n}sanitizeFontImports(e){const t=["fonts.googleapis.com","use.typekit.net","fonts.fontsquirrel.com","fast.fonts.net","myfonts.com","foundry.typenetwork.com","fonts.fontspring.com","creativemarket.com","fonts.linotype.com","fonts.monotype.com","fontshop.com","typography.com"];return e.filter((e=>{try{const r=new URL(e);return"https:"===r.protocol&&t.some((e=>r.hostname.endsWith(e)||r.hostname.includes(e)))}catch(e){return!1}}))}applyFontStyles(e){let t=document.getElementById("custom-font-styles");e?(t||(t=document.createElement("style"),t.id="custom-font-styles",document.head.appendChild(t)),t.textContent=e):t&&(t.textContent="")}importFonts(e){if(document.querySelectorAll("link[data-font-import]").forEach((e=>e.remove())),e){this.sanitizeFontImports(e.split("\n")).forEach((e=>{const t=document.createElement("link");t.rel="stylesheet",t.href=e,t.setAttribute("data-font-import","true"),document.head.appendChild(t)}))}}setTheme(e,t=void 0){t?t.theme?(t.theme.oneDynamicColor?(this.themeColor=t.theme.oneDynamicColor,this.themeScheme=t.theme.oneColorScheme):t.theme.primaryColor&&(this.themeColor=void 0,this.themePrimaryColor=t.theme.primaryColor,this.themeSecondaryColor=t.theme.secondaryColor,this.themeTertiaryColor=t.theme.tertiaryColor,this.themeNeutralColor=t.theme.neutralColor,this.themeNeutralVariantColor=t.theme.neutralVariantColor),t.theme.fontStyles?this.applyFontStyles(t.theme.fontStyles):this.applyFontStyles(null),t.theme.fontImports?this.importFonts(t.theme.fontImports):this.importFonts(null),this.themeChanged(),this.updateBrowserThemeColor()):this.setThemeFromOldConfiguration(e,t):console.warn("No configuration found")}updateBrowserThemeColor(){let e=document.querySelector('meta[name="theme-color"]'),t=this.themeColor||this.themePrimaryColor||"#000000";t&&!t.startsWith("#")&&(t=`#${t}`),!e&&t&&(e=document.createElement("meta"),e.setAttribute("name","theme-color"),document.getElementsByTagName("head")[0].appendChild(e)),e&&t&&e.setAttribute("content",t)}updateLiveFromConfiguration(e){e&&(e.oneDynamicColor?(this.themeColor=e.oneDynamicColor,this.themeScheme=e.oneColorScheme):(this.themeColor=void 0,this.themePrimaryColor=e.primaryColor,this.themeSecondaryColor=e.secondaryColor,this.themeTertiaryColor=e.tertiaryColor,this.themeNeutralColor=e.neutralColor,this.themeNeutralVariantColor=e.neutralVariantColor,this.themeVariant=e.variant||"fidelity"),this.themeChanged())}themeChanged(e=void 0){let t={};const r=void 0===this.themeDarkMode?window.matchMedia("(prefers-color-scheme: dark)").matches:this.themeDarkMode;t=this.themeColor?ol(this.getHexColor(this.themeColor),this.themeVariant,r,this.themeScheme,this.themeHighContrast?2:0):ol({primary:this.getHexColor(this.themePrimaryColor||"#000000"),secondary:this.getHexColor(this.themeSecondaryColor||"#000000"),tertiary:this.getHexColor(this.themeTertiaryColor||"#000000"),neutral:this.getHexColor(this.themeNeutralColor||"#000000"),neutralVariant:this.getHexColor(this.themeNeutralVariantColor||"#000000")},this.themeVariant,r,"dynamic",this.themeHighContrast?2:0),sl(document,t)}getHexColor(e){return e&&6===(e=e.replace(/#/g,"")).length?`#${e}`:"#000000"}}al.themeScemesOptionsWithName=[{name:"Tonal",value:"tonal"},{name:"Vibrant",value:"vibrant"},{name:"Expressive",value:"expressive"},{name:"Content",value:"content"},{name:"Neutral",value:"neutral"},{name:"Monochrome",value:"monochrome"},{name:"Fidelity",value:"fidelity"}],al.themeVariantsOptionsWithName=[{name:"Monochrome",value:"monochrome"},{name:"Neutral",value:"neutral"},{name:"Tonal Spot",value:"tonalSpot"},{name:"Vibrant",value:"vibrant"},{name:"Expressive",value:"expressive"},{name:"Fidelity",value:"fidelity"},{name:"Content",value:"content"},{name:"Rainbow",value:"rainbow"},{name:"Fruit Salad",value:"fruitSalad"}];class ll extends Ds{constructor(e,t=!1){super(),this.seenWelcome=!1,this.resetSeenWelcome=!1,this.disableWelcome=!1,this.activityHost="",this.groupConfigOverrides={},this.currentForceSaml=!1,this.disableFacebookLoginForGroup=!1,this.hasLlm=!1,this.originalQueryParameters={},this.externalGoalCounter=0,this.autoTranslate=!1,this.goalTriggerEvents=["newPost","endorse_up","endorse_down","newPointFor","newPointAgainst"],this.haveLoadedLanguages=!1,this.hasTranscriptSupport=!1,this.hasVideoUpload=!1,this.hasAudioUpload=!1,this.groupLoadNewPost=!1,t||(this.appStartTime=new Date,this.serverApi=e,this.recommendations=new el(e),this.cache=new tl,this.analytics=new il,this.theme=new al,this.offline=new rl,this.boot(),this.hasVideoUploadSupport(),this.hasAudioUploadSupport(),this.fireGlobal("app-ready"),this.parseQueryString(),this.addGlobalListener("yp-logged-in",this._userLoggedIn.bind(this)))}showRecommendationInfoIfNeeded(){localStorage.getItem("ypHaveShownRecommendationInfo")||(localStorage.setItem("ypHaveShownRecommendationInfo","1"),this.fireGlobal("yp-notify-dialog",{text:this.t("recommendationToastInfo")}))}showSpeechToTextInfoIfNeeded(){window.appGlobals.hasTranscriptSupport&&!localStorage.getItem("haveShownTranscriptInfo")&&(localStorage.setItem("haveShownTranscriptInfo","1"),this.fireGlobal("yp-notify-dialog",{text:this.t("speechToTextInfo")}))}async hasVideoUploadSupport(){const e=await this.serverApi.hasVideoUploadSupport();e&&(window.appGlobals.hasVideoUpload=e.hasVideoUploadSupport,window.appGlobals.hasTranscriptSupport=e.hasTranscriptSupport,this.fireGlobal("yp-has-video-upload"))}sendVideoView(e){this.serverApi.sendVideoView({videoId:e}),this.activity("view","video",e)}sendLongVideoView(e){this.serverApi.sendVideoView({videoId:e,longPlaytime:!0}),this.activity("view","videoLong",e)}async hasAudioUploadSupport(){const e=await this.serverApi.hasAudioUploadSupport();e&&(window.appGlobals.hasAudioUpload=e.hasAudioUploadSupport,this.fireGlobal("yp-has-audio-upload"))}sendAudioListen(e){this.serverApi.sendAudioView({audioId:e}),this.activity("view","audio",e)}sendLongAudioListen(e){this.serverApi.sendAudioView({audioId:e,longPlaytime:!0}),this.activity("view","audioLong",e)}changeLocaleIfNeededAfterWait(e,t){!0===window.appGlobals.haveLoadedLanguages&&e&&this.language!=e&&(!t&&localStorage.getItem("yp-user-locale")||Aa.changeLanguage(e,(()=>{this.fireGlobal("yp-language-loaded",{language:e}),this.fireGlobal("language-loaded",{language:e})})))}setHighlightedLanguages(e){this.highlightedLanguages=e,this.fireGlobal("yp-refresh-language-selection")}changeLocaleIfNeeded(e,t=!1){window.appGlobals.haveLoadedLanguages?this.changeLocaleIfNeededAfterWait(e,t):setTimeout((()=>{console.warn("Locales not loaded while trying to load languages, trying again in 100 ms"),this.changeLocaleIfNeeded(e,t)}),100)}parseQueryString(){const e=(window.location.search||"?").substr(1),t={};e.split("&").forEach((e=>{const r=e.split("="),i=decodeURIComponent(r[0]),n=decodeURIComponent(r.length>1?r[1]:"");t[i]=n})),this.originalQueryParameters=t}setAnonymousUser(e){this.currentAnonymousUser=e}setRegistrationQuestionGroup(e){e&&e.configuration&&e.configuration.registrationQuestionsJson?(this.registrationQuestionsGroup=e,window.appUser.checkRegistrationAnswersCurrent()):this.registrationQuestionsGroup=void 0}setAnonymousGroupStatus(e){e&&e.configuration&&(e.configuration.allowAnonymousUsers||e.configuration.allowOneTimeLoginWithName)?(this.currentAnonymousGroup=e,!window.appUser.user&&this.currentAnonymousUser?window.appUser.setLoggedInUser(this.currentAnonymousUser):window.appUser&&!window.appUser.user&&e.configuration.allowAnonymousAutoLogin&&this.originalQueryParameters&&this.originalQueryParameters.autoLogin&&window.appUser.autoAnonymousLogin()):(window.appUser&&window.appUser.user&&window.appUser.user.profile_data&&window.appUser.user.profile_data.isAnonymousUser&&window.appUser.removeAnonymousUser(),this.currentAnonymousGroup=void 0)}_domainChanged(e){e&&this.fireGlobal("yp-domain-changed",{domain:e})}notifyUserViaToast(e){this.fireGlobal("yp-open-toast",{text:e})}reBoot(){this.boot()}_userLoggedIn(e){e.detail&&setTimeout((()=>{}),250),this.recommendations.reset()}setupTranslationSystem(e=""){const t=window.location.hostname;let r="en";if(t.indexOf("betrireykjavik")>-1)r="is";else if(t.indexOf("betraisland")>-1)r="is";else if(t.indexOf("forbrukerradet")>-1)r="no";else{const e=t.substring(t.lastIndexOf("."));r={".fr":"fr",".hr":"hr",".hu":"hu",".nl":"nl",".no":"no",".pl":"pl",".tw":"zh_tw"}[e]||"en"}const i=localStorage.getItem("yp-user-locale");let n;i&&(r=i),window.appGlobals.originalQueryParameters&&window.appGlobals.originalQueryParameters.locale&&(n=window.appGlobals.originalQueryParameters.locale),window.appGlobals.originalQueryParameters&&window.appGlobals.originalQueryParameters.startAutoTranslate&&setTimeout((()=>{this.startTranslation()}),2500),n&&n.length>1&&(r=n,localStorage.setItem("yp-user-locale",n)),r=r.replace("-","_").toLowerCase(),Aa.use(Qa).init({lng:r,fallbackLng:"en",backend:{loadPath:`${e}/locales/{{lng}}/{{ns}}.json`}},(()=>{window.appGlobals.locale=r,window.appGlobals.i18nTranslation=Aa,window.appGlobals.haveLoadedLanguages=!0,this.fireGlobal("yp-language-loaded",{language:r}),this.fireGlobal("language-loaded",{language:r})}))}startTranslation(){window.appGlobals.autoTranslate=!0,this.fireGlobal("yp-auto-translate",!0),window.appDialogs.getDialogAsync("masterToast",(e=>{e.labelText=this.t("autoTranslationStarted"),e.open=!0}))}stopTranslation(){window.appGlobals.autoTranslate=!1,this.fireGlobal("yp-auto-translate",!1),window.appDialogs.getDialogAsync("masterToast",(e=>{e.labelText=this.t("autoTranslationStopped"),e.open=!0})),sessionStorage.setItem("dontPromptForAutoTranslation","1")}async boot(){const e=await this.serverApi.boot();e&&(this.domain=e.domain,this.googleMapsApiKey=e.domain.googleMapsApiKey,this.hasLlm=void 0!==e.domain.hasLlm&&e.domain.hasLlm,this._domainChanged(this.domain),"/"==window.location.pathname&&(e.community&&e.community.configuration&&e.community.configuration.redirectToGroupId?Ka.redirectTo("/group/"+e.community.configuration.redirectToGroupId):e.community&&!e.community.is_community_folder?Ka.redirectTo("/community/"+e.community.id):e.community&&e.community.is_community_folder?Ka.redirectTo("/community_folder/"+e.community.id):(Ka.redirectTo("/domain/"+this.domain.id),this.fireGlobal("yp-change-header",{headerTitle:this.domain.domain_name,headerDescription:this.domain.description})))),this.fireGlobal("yp-boot-from-server")}setupGroupConfigOverride(e,t){const r={};t.split(";").forEach((function(e){const t=e.split("=");r[t[0]]=t[1]})),this.groupConfigOverrides[e]=r,r.ln&&this.changeLocaleIfNeeded(r.ln,!0)}overrideGroupConfigIfNeeded(e,t){t||(t={});const r=this.groupConfigOverrides[e];return r?(r.hg&&(t.hideGroupHeader=Boolean(r.hg)),r.ht&&(t.hideAllTabs=Boolean(r.ht)),r.hh&&(t.hideHelpIcon=Boolean(r.hh)),r.rn&&(t.customBackName=r.rn),r.ru&&(t.customBackURL=r.ru),t):t}postLoadGroupProcessing(e){this.originalQueryParameters.yu&&(this.serverApi.marketingTrackingOpen(e.id,this.originalQueryParameters),this.externalGoalTriggerGroupId=e.id,this.goalTriggerEvents=["newPost","newPointFor","newPointAgainst"],this.originalQueryParameters.goalThreshold=1)}checkExternalGoalTrigger(e){this.externalGoalTriggerGroupId&&this.originalQueryParameters&&this.originalQueryParameters.goalThreshold&&this.goalTriggerEvents.indexOf(e)>-1&&(this.externalGoalCounter+=1,this.externalGoalCounter==this.originalQueryParameters.goalThreshold&&this.serverApi.triggerTrackingGoal(this.externalGoalTriggerGroupId,this.originalQueryParameters))}activity(e,t=void 0,r=void 0,i=void 0){let n;n=window.appUser&&window.appUser.user?window.appUser.user.id:"-1";let o="activity stream: "+n+" "+e+" "+t;console.log(o),r&&(o+=" "+r),"open"==e?setTimeout((()=>{this.analytics.sendToAnalyticsTrackers("send","event",t||{},e)}),25):this.analytics.sendToAnalyticsTrackers("send","event",t||{},e),this.serverApi.createActivityFromApp({actor:n,type:e,object:t,target:JSON.stringify(i),context:r||"",path_name:location.pathname,referrer:document.referrer,screen_width:window.innerWidth,url:window.location.href,userLocale:this.locale,userAutoTranslate:this.autoTranslate,groupId:this.currentGroup?this.currentGroup.id:void 0,event_time:(new Date).toISOString(),session_id:this.getSessionFromCookie(),user_agent:navigator.userAgent}),"completed"!==e&&"clicked"!==e||this.checkExternalGoalTrigger(t)}setSeenWelcome(){this.seenWelcome=!0,localStorage.setItem("yrpri-welcome-status","1")}getSessionFromCookie(){const e=document.cookie.split(";");let t="";for(let r=0;r<e.length;r++){const i=e[r].split("=")[0],n=e[r].split("=")[1];" connect.sid"==i&&(t=n)}return t}}class cl extends ll{constructor(e){super(e,!0),this.disableParentConstruction=!0,this.getEarlName=()=>{const e=new URLSearchParams(window.location.search);if(e.has("name"))return e.get("name");{const e=window.location.pathname.split("/");if(e.length>=2&&e[1])return e[1]}return console.error(`Earl name not found in URL or path: ${window.location.href}`),null},this.setIds=e=>{this.questionId=e.detail.questionId,this.earlId=e.detail.earlId,this.promptId=e.detail.promptId},this.parseQueryString=()=>{const e=(window.location.search||"?").substr(1);let t={};const r=/([^&=]+)=?([^&]*)(?:&+|$)/g;let i;for(;i=r.exec(e);){const e=i[1],r=i[2];t[e]=r}this.originalQueryParameters=t},this.getSessionFromCookie=()=>{const e=document.cookie.split(";");let t="";for(let r=0;r<e.length;r++){let i=e[r].split("=")[0],n=e[r].split("=")[1];"_all_our_ideas_session"===i.trim()&&(t=n)}return t},this.activity=(e,t=void 0)=>{let r;window.appUser&&window.appUser.user||(r="-1");const i=new Date,n={actor:r,type:e,object:t,path_name:location.pathname,event_time:i.toISOString(),session_id:this.getSessionFromCookie(),originalQueryString:this.getOriginalQueryString(),originalReferrer:this.originalReferrer,questionId:this.questionId,earlId:this.earlId,promptId:this.promptId,earlName:this.earlName,userLocale:window.locale,userAutoTranslate:window.autoTranslate,user_agent:navigator.userAgent,referrer:document.referrer,url:location.href,screen_width:window.innerWidth};"function"==typeof gtag&&gtag("event",e);try{fetch("/api/analytics/createActivityFromApp",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then((t=>{t.ok?"Voting - left"!==e&&"Voting - right"!==e&&"New Idea - added"!==e||this.checkExternalGoalTrigger(e):console.error(`HTTP error! status: ${t.status}`)})).catch((e=>{console.error("There has been a problem with your fetch operation:",e)}))}catch(e){console.error(e)}},this.parseQueryString(),this.originalReferrer=document.referrer,document.addEventListener("set-ids",this.setIds.bind(this))}getOriginalQueryString(){return this.originalQueryParameters?new URLSearchParams(this.originalQueryParameters).toString():null}}class dl{static _hasAdminRights(e,t){return null!=t.find((t=>t.id==e))}static _hasPromoterAccess(e,t,r){return e?!(!window.appUser||!window.appUser.user)&&(window.appUser.user.id==e.user_id||(!(!e.User||window.appUser.user.id!=e.User.id)||!!window.appUser.promoterRights&&this._hasAdminRights(t,r))):!!window.appUser&&(console.warn("No object in hasAccess"),!1)}static checkGroupPromoterAccess(e){return e&&window.appUser&&window.appUser.promoterRights?this._hasPromoterAccess(e,e.id,window.appUser.promoterRights.GroupPromoters):(e||console.warn("No group in hasAccess"),!1)}static checkCommunityPromoterAccess(e){return e&&window.appUser&&window.appUser.promoterRights?this._hasPromoterAccess(e,e.id,window.appUser.promoterRights.CommunityPromoters):(e||console.warn("No community in hasAccess"),!1)}static _hasAccess(e,t,r){return e?!(!window.appUser||!window.appUser.user)&&(window.appUser.user.id==e.user_id||(!(!e.User||window.appUser.user.id!=e.User.id)||!!window.appUser.adminRights&&this._hasAdminRights(t,r))):!!window.appUser&&(console.warn("No object in hasAccess"),!1)}static hasImageAccess(e,t){return!!(e&&t&&window.appUser&&window.appUser.adminRights)&&this._hasAccess(e,t.group_id,window.appUser.adminRights.GroupAdmins)}static checkPostAccess(e){return e&&window.appUser&&window.appUser.adminRights?this._hasAccess(e,e.group_id,window.appUser.adminRights.GroupAdmins):e&&e.User&&window.appUser&&window.appUser.user?e.User.id===window.appUser.user.id:(e||console.warn("No post in hasAccess"),!1)}static checkPointAccess(e){return e&&e.Post&&window.appUser&&window.appUser.adminRights?this._hasAccess(e,e.Post.group_id,window.appUser.adminRights.GroupAdmins):!!(e&&window.appUser&&window.appUser.user&&window.appUser.user.id==e.user_id)}static checkPostAdminOnlyAccess(e){return e&&window.appUser&&window.appUser.adminRights?this._hasAdminRights(e.group_id,window.appUser.adminRights.GroupAdmins):(e||console.warn("No post in hasAccess"),!1)}static checkGroupAccess(e){return e&&window.appUser&&window.appUser.adminRights?this._hasAccess(e,e.id,window.appUser.adminRights.GroupAdmins):(e||console.warn("No group in hasAccess"),!1)}static checkCommunityAccess(e){return e&&window.appUser&&window.appUser.adminRights?this._hasAccess(e,e.id,window.appUser.adminRights.CommunityAdmins):(e||console.warn("No community in hasAccess"),!1)}static checkDomainAccess(e){return e&&window.appUser&&window.appUser.adminRights?this._hasAccess(e,e.id,window.appUser.adminRights.DomainAdmins):(e||console.warn("No domain in hasAccess"),!1)}static hasUserAccess(e){return!!(e&&window.appUser&&window.appUser.user&&window.appUser.user.id==e.id)}}var hl="3.4.2";function ul(e,t){return new Promise((function(r){return setTimeout(r,e,t)}))}function pl(e){return!!e&&"function"==typeof e.then}function fl(e,t){try{var r=e();pl(r)?r.then((function(e){return t(!0,e)}),(function(e){return t(!1,e)})):t(!0,r)}catch(e){t(!1,e)}}function ml(e,t,r){return void 0===r&&(r=16),_e(this,void 0,void 0,(function(){var i,n,o,s;return ke(this,(function(a){switch(a.label){case 0:i=Array(e.length),n=Date.now(),o=0,a.label=1;case 1:return o<e.length?(i[o]=t(e[o],o),(s=Date.now())>=n+r?(n=s,[4,ul(0)]):[3,3]):[3,4];case 2:a.sent(),a.label=3;case 3:return++o,[3,1];case 4:return[2,i]}}))}))}function gl(e){e.then(void 0,(function(){}))}function vl(e,t){e=[e[0]>>>16,65535&e[0],e[1]>>>16,65535&e[1]],t=[t[0]>>>16,65535&t[0],t[1]>>>16,65535&t[1]];var r=[0,0,0,0];return r[3]+=e[3]+t[3],r[2]+=r[3]>>>16,r[3]&=65535,r[2]+=e[2]+t[2],r[1]+=r[2]>>>16,r[2]&=65535,r[1]+=e[1]+t[1],r[0]+=r[1]>>>16,r[1]&=65535,r[0]+=e[0]+t[0],r[0]&=65535,[r[0]<<16|r[1],r[2]<<16|r[3]]}function bl(e,t){e=[e[0]>>>16,65535&e[0],e[1]>>>16,65535&e[1]],t=[t[0]>>>16,65535&t[0],t[1]>>>16,65535&t[1]];var r=[0,0,0,0];return r[3]+=e[3]*t[3],r[2]+=r[3]>>>16,r[3]&=65535,r[2]+=e[2]*t[3],r[1]+=r[2]>>>16,r[2]&=65535,r[2]+=e[3]*t[2],r[1]+=r[2]>>>16,r[2]&=65535,r[1]+=e[1]*t[3],r[0]+=r[1]>>>16,r[1]&=65535,r[1]+=e[2]*t[2],r[0]+=r[1]>>>16,r[1]&=65535,r[1]+=e[3]*t[1],r[0]+=r[1]>>>16,r[1]&=65535,r[0]+=e[0]*t[3]+e[1]*t[2]+e[2]*t[1]+e[3]*t[0],r[0]&=65535,[r[0]<<16|r[1],r[2]<<16|r[3]]}function yl(e,t){return 32===(t%=64)?[e[1],e[0]]:t<32?[e[0]<<t|e[1]>>>32-t,e[1]<<t|e[0]>>>32-t]:(t-=32,[e[1]<<t|e[0]>>>32-t,e[0]<<t|e[1]>>>32-t])}function xl(e,t){return 0===(t%=64)?e:t<32?[e[0]<<t|e[1]>>>32-t,e[1]<<t]:[e[1]<<t-32,0]}function wl(e,t){return[e[0]^t[0],e[1]^t[1]]}function _l(e){return e=wl(e,[0,e[0]>>>1]),e=wl(e=bl(e,[4283543511,3981806797]),[0,e[0]>>>1]),e=wl(e=bl(e,[3301882366,444984403]),[0,e[0]>>>1])}function kl(e){return parseInt(e)}function Cl(e){return parseFloat(e)}function Sl(e,t){return"number"==typeof e&&isNaN(e)?t:e}function Al(e){return e.reduce((function(e,t){return e+(t?1:0)}),0)}function Pl(e,t){if(void 0===t&&(t=1),Math.abs(t)>=1)return Math.round(e/t)*t;var r=1/t;return Math.round(e*r)/r}function Tl(e){return e&&"object"==typeof e&&"message"in e?e:{message:e}}function El(e,t,r){var i=Object.keys(e).filter((function(e){return!function(e,t){for(var r=0,i=e.length;r<i;++r)if(e[r]===t)return!0;return!1}(r,e)})),n=ml(i,(function(r){return function(e,t){var r=new Promise((function(r){var i=Date.now();fl(e.bind(null,t),(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Date.now()-i;if(!e[0])return r((function(){return{error:Tl(e[1]),duration:n}}));var o=e[1];if(function(e){return"function"!=typeof e}(o))return r((function(){return{value:o,duration:n}}));r((function(){return new Promise((function(e){var t=Date.now();fl(o,(function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var o=n+Date.now()-t;if(!r[0])return e({error:Tl(r[1]),duration:o});e({value:r[1],duration:o})}))}))}))}))}));return gl(r),function(){return r.then((function(e){return e()}))}}(e[r],t)}));return gl(n),function(){return _e(this,void 0,void 0,(function(){var e,t,r,o;return ke(this,(function(s){switch(s.label){case 0:return[4,n];case 1:return[4,ml(s.sent(),(function(e){var t=e();return gl(t),t}))];case 2:return e=s.sent(),[4,Promise.all(e)];case 3:for(t=s.sent(),r={},o=0;o<i.length;++o)r[i[o]]=t[o];return[2,r]}}))}))}}function Il(){var e=window,t=navigator;return Al(["MSCSSMatrix"in e,"msSetImmediate"in e,"msIndexedDB"in e,"msMaxTouchPoints"in t,"msPointerEnabled"in t])>=4}function Ll(){var e=window,t=navigator;return Al(["webkitPersistentStorage"in t,"webkitTemporaryStorage"in t,0===t.vendor.indexOf("Google"),"webkitResolveLocalFileSystemURL"in e,"BatteryManager"in e,"webkitMediaStream"in e,"webkitSpeechGrammar"in e])>=5}function Ol(){var e=window,t=navigator;return Al(["ApplePayError"in e,"CSSPrimitiveValue"in e,"Counter"in e,0===t.vendor.indexOf("Apple"),"getStorageUpdates"in t,"WebKitMediaKeys"in e])>=4}function Ml(){var e=window;return Al(["safari"in e,!("DeviceMotionEvent"in e),!("ongestureend"in e),!("standalone"in navigator)])>=3}function Rl(){var e=document;return(e.exitFullscreen||e.msExitFullscreen||e.mozCancelFullScreen||e.webkitExitFullscreen).call(e)}function $l(){var e=Ll(),t=function(){var e,t,r=window;return Al(["buildID"in navigator,"MozAppearance"in(null!==(t=null===(e=document.documentElement)||void 0===e?void 0:e.style)&&void 0!==t?t:{}),"onmozfullscreenchange"in r,"mozInnerScreenX"in r,"CSSMozDocumentRule"in r,"CanvasCaptureMediaStream"in r])>=4}();if(!e&&!t)return!1;var r=window;return Al(["onorientationchange"in r,"orientation"in r,e&&!("SharedWorker"in r),t&&/android/i.test(navigator.appVersion)])>=2}function Nl(e){var t=new Error(e);return t.name=e,t}function Dl(e,t,r){var i,n,o;return void 0===r&&(r=50),_e(this,void 0,void 0,(function(){var s,a;return ke(this,(function(l){switch(l.label){case 0:s=document,l.label=1;case 1:return s.body?[3,3]:[4,ul(r)];case 2:return l.sent(),[3,1];case 3:a=s.createElement("iframe"),l.label=4;case 4:return l.trys.push([4,,10,11]),[4,new Promise((function(e,r){var i=!1,n=function(){i=!0,e()};a.onload=n,a.onerror=function(e){i=!0,r(e)};var o=a.style;o.setProperty("display","block","important"),o.position="absolute",o.top="0",o.left="0",o.visibility="hidden",t&&"srcdoc"in a?a.srcdoc=t:a.src="about:blank",s.body.appendChild(a);var l=function(){var e,t;i||("complete"===(null===(t=null===(e=a.contentWindow)||void 0===e?void 0:e.document)||void 0===t?void 0:t.readyState)?n():setTimeout(l,10))};l()}))];case 5:l.sent(),l.label=6;case 6:return(null===(n=null===(i=a.contentWindow)||void 0===i?void 0:i.document)||void 0===n?void 0:n.body)?[3,8]:[4,ul(r)];case 7:return l.sent(),[3,6];case 8:return[4,e(a,a.contentWindow)];case 9:return[2,l.sent()];case 10:return null===(o=a.parentNode)||void 0===o||o.removeChild(a),[7];case 11:return[2]}}))}))}function zl(e){for(var t=function(e){for(var t,r,i="Unexpected syntax '".concat(e,"'"),n=/^\s*([a-z-]*)(.*)$/i.exec(e),o=n[1]||void 0,s={},a=/([.:#][\w-]+|\[.+?\])/gi,l=function(e,t){s[e]=s[e]||[],s[e].push(t)};;){var c=a.exec(n[2]);if(!c)break;var d=c[0];switch(d[0]){case".":l("class",d.slice(1));break;case"#":l("id",d.slice(1));break;case"[":var h=/^\[([\w-]+)([~|^$*]?=("(.*?)"|([\w-]+)))?(\s+[is])?\]$/.exec(d);if(!h)throw new Error(i);l(h[1],null!==(r=null!==(t=h[4])&&void 0!==t?t:h[5])&&void 0!==r?r:"");break;default:throw new Error(i)}}return[o,s]}(e),r=t[0],i=t[1],n=document.createElement(null!=r?r:"div"),o=0,s=Object.keys(i);o<s.length;o++){var a=s[o],l=i[a].join(" ");"style"===a?Bl(n.style,l):n.setAttribute(a,l)}return n}function Bl(e,t){for(var r=0,i=t.split(";");r<i.length;r++){var n=i[r],o=/^\s*([\w-]+)\s*:\s*(.+?)(\s*!([\w-]+))?\s*$/.exec(n);if(o){var s=o[1],a=o[2],l=o[4];e.setProperty(s,a,l||"")}}}var Fl=["monospace","sans-serif","serif"],Ul=["sans-serif-thin","ARNO PRO","Agency FB","Arabic Typesetting","Arial Unicode MS","AvantGarde Bk BT","BankGothic Md BT","Batang","Bitstream Vera Sans Mono","Calibri","Century","Century Gothic","Clarendon","EUROSTILE","Franklin Gothic","Futura Bk BT","Futura Md BT","GOTHAM","Gill Sans","HELV","Haettenschweiler","Helvetica Neue","Humanst521 BT","Leelawadee","Letter Gothic","Levenim MT","Lucida Bright","Lucida Sans","Menlo","MS Mincho","MS Outlook","MS Reference Specialty","MS UI Gothic","MT Extra","MYRIAD PRO","Marlett","Meiryo UI","Microsoft Uighur","Minion Pro","Monotype Corsiva","PMingLiU","Pristina","SCRIPTINA","Segoe UI Light","Serifa","SimHei","Small Fonts","Staccato222 BT","TRAJAN PRO","Univers CE 55 Medium","Vrinda","ZWAdobeF"];function Vl(e){return e.toDataURL()}var jl,Gl,Hl=2500;function Wl(){var e=this;return function(){if(void 0===Gl){var e=function(){var t=ql();Yl(t)?Gl=setTimeout(e,Hl):(jl=t,Gl=void 0)};e()}}(),function(){return _e(e,void 0,void 0,(function(){var e;return ke(this,(function(t){switch(t.label){case 0:return Yl(e=ql())?jl?[2,Ce([],jl,!0)]:function(){var e=document;return e.fullscreenElement||e.msFullscreenElement||e.mozFullScreenElement||e.webkitFullscreenElement||null}()?[4,Rl()]:[3,2]:[3,2];case 1:t.sent(),e=ql(),t.label=2;case 2:return Yl(e)||(jl=e),[2,e]}}))}))}}function ql(){var e=screen;return[Sl(Cl(e.availTop),null),Sl(Cl(e.width)-Cl(e.availWidth)-Sl(Cl(e.availLeft),0),null),Sl(Cl(e.height)-Cl(e.availHeight)-Sl(Cl(e.availTop),0),null),Sl(Cl(e.availLeft),null)]}function Yl(e){for(var t=0;t<4;++t)if(e[t])return!1;return!0}function Jl(e){var t;return _e(this,void 0,void 0,(function(){var r,i,n,o,s,a,l;return ke(this,(function(c){switch(c.label){case 0:for(r=document,i=r.createElement("div"),n=new Array(e.length),o={},Xl(i),l=0;l<e.length;++l)"DIALOG"===(s=zl(e[l])).tagName&&s.show(),Xl(a=r.createElement("div")),a.appendChild(s),i.appendChild(a),n[l]=s;c.label=1;case 1:return r.body?[3,3]:[4,ul(50)];case 2:return c.sent(),[3,1];case 3:r.body.appendChild(i);try{for(l=0;l<e.length;++l)n[l].offsetParent||(o[e[l]]=!0)}finally{null===(t=i.parentNode)||void 0===t||t.removeChild(i)}return[2,o]}}))}))}function Xl(e){e.style.setProperty("display","block","important")}function Zl(e){return matchMedia("(inverted-colors: ".concat(e,")")).matches}function Ql(e){return matchMedia("(forced-colors: ".concat(e,")")).matches}function Kl(e){return matchMedia("(prefers-contrast: ".concat(e,")")).matches}function ec(e){return matchMedia("(prefers-reduced-motion: ".concat(e,")")).matches}function tc(e){return matchMedia("(dynamic-range: ".concat(e,")")).matches}var rc=Math,ic=function(){return 0};var nc={default:[],apple:[{font:"-apple-system-body"}],serif:[{fontFamily:"serif"}],sans:[{fontFamily:"sans-serif"}],mono:[{fontFamily:"monospace"}],min:[{fontSize:"1px"}],system:[{fontFamily:"system-ui"}]};var oc={fonts:function(){return Dl((function(e,t){var r=t.document,i=r.body;i.style.fontSize="48px";var n=r.createElement("div"),o={},s={},a=function(e){var t=r.createElement("span"),i=t.style;return i.position="absolute",i.top="0",i.left="0",i.fontFamily=e,t.textContent="mmMwWLliI0O&1",n.appendChild(t),t},l=Fl.map(a),c=function(){for(var e={},t=function(t){e[t]=Fl.map((function(e){return function(e,t){return a("'".concat(e,"',").concat(t))}(t,e)}))},r=0,i=Ul;r<i.length;r++){t(i[r])}return e}();i.appendChild(n);for(var d=0;d<Fl.length;d++)o[Fl[d]]=l[d].offsetWidth,s[Fl[d]]=l[d].offsetHeight;return Ul.filter((function(e){return t=c[e],Fl.some((function(e,r){return t[r].offsetWidth!==o[e]||t[r].offsetHeight!==s[e]}));var t}))}))},domBlockers:function(e){var t=(void 0===e?{}:e).debug;return _e(this,void 0,void 0,(function(){var e,r,i,n,o;return ke(this,(function(s){switch(s.label){case 0:return Ol()||$l()?(a=atob,e={abpIndo:["#Iklan-Melayang","#Kolom-Iklan-728","#SidebarIklan-wrapper",'[title="ALIENBOLA" i]',a("I0JveC1CYW5uZXItYWRz")],abpvn:[".quangcao","#mobileCatfish",a("LmNsb3NlLWFkcw=="),'[id^="bn_bottom_fixed_"]',"#pmadv"],adBlockFinland:[".mainostila",a("LnNwb25zb3JpdA=="),".ylamainos",a("YVtocmVmKj0iL2NsaWNrdGhyZ2guYXNwPyJd"),a("YVtocmVmXj0iaHR0cHM6Ly9hcHAucmVhZHBlYWsuY29tL2FkcyJd")],adBlockPersian:["#navbar_notice_50",".kadr",'TABLE[width="140px"]',"#divAgahi",a("YVtocmVmXj0iaHR0cDovL2cxLnYuZndtcm0ubmV0L2FkLyJd")],adBlockWarningRemoval:["#adblock-honeypot",".adblocker-root",".wp_adblock_detect",a("LmhlYWRlci1ibG9ja2VkLWFk"),a("I2FkX2Jsb2NrZXI=")],adGuardAnnoyances:[".hs-sosyal","#cookieconsentdiv",'div[class^="app_gdpr"]',".as-oil",'[data-cypress="soft-push-notification-modal"]'],adGuardBase:[".BetterJsPopOverlay",a("I2FkXzMwMFgyNTA="),a("I2Jhbm5lcmZsb2F0MjI="),a("I2NhbXBhaWduLWJhbm5lcg=="),a("I0FkLUNvbnRlbnQ=")],adGuardChinese:[a("LlppX2FkX2FfSA=="),a("YVtocmVmKj0iLmh0aGJldDM0LmNvbSJd"),"#widget-quan",a("YVtocmVmKj0iLzg0OTkyMDIwLnh5eiJd"),a("YVtocmVmKj0iLjE5NTZobC5jb20vIl0=")],adGuardFrench:["#pavePub",a("LmFkLWRlc2t0b3AtcmVjdGFuZ2xl"),".mobile_adhesion",".widgetadv",a("LmFkc19iYW4=")],adGuardGerman:['aside[data-portal-id="leaderboard"]'],adGuardJapanese:["#kauli_yad_1",a("YVtocmVmXj0iaHR0cDovL2FkMi50cmFmZmljZ2F0ZS5uZXQvIl0="),a("Ll9wb3BJbl9pbmZpbml0ZV9hZA=="),a("LmFkZ29vZ2xl"),a("Ll9faXNib29zdFJldHVybkFk")],adGuardMobile:[a("YW1wLWF1dG8tYWRz"),a("LmFtcF9hZA=="),'amp-embed[type="24smi"]',"#mgid_iframe1",a("I2FkX2ludmlld19hcmVh")],adGuardRussian:[a("YVtocmVmXj0iaHR0cHM6Ly9hZC5sZXRtZWFkcy5jb20vIl0="),a("LnJlY2xhbWE="),'div[id^="smi2adblock"]',a("ZGl2W2lkXj0iQWRGb3hfYmFubmVyXyJd"),"#psyduckpockeball"],adGuardSocial:[a("YVtocmVmXj0iLy93d3cuc3R1bWJsZXVwb24uY29tL3N1Ym1pdD91cmw9Il0="),a("YVtocmVmXj0iLy90ZWxlZ3JhbS5tZS9zaGFyZS91cmw/Il0="),".etsy-tweet","#inlineShare",".popup-social"],adGuardSpanishPortuguese:["#barraPublicidade","#Publicidade","#publiEspecial","#queTooltip",".cnt-publi"],adGuardTrackingProtection:["#qoo-counter",a("YVtocmVmXj0iaHR0cDovL2NsaWNrLmhvdGxvZy5ydS8iXQ=="),a("YVtocmVmXj0iaHR0cDovL2hpdGNvdW50ZXIucnUvdG9wL3N0YXQucGhwIl0="),a("YVtocmVmXj0iaHR0cDovL3RvcC5tYWlsLnJ1L2p1bXAiXQ=="),"#top100counter"],adGuardTurkish:["#backkapat",a("I3Jla2xhbWk="),a("YVtocmVmXj0iaHR0cDovL2Fkc2Vydi5vbnRlay5jb20udHIvIl0="),a("YVtocmVmXj0iaHR0cDovL2l6bGVuemkuY29tL2NhbXBhaWduLyJd"),a("YVtocmVmXj0iaHR0cDovL3d3dy5pbnN0YWxsYWRzLm5ldC8iXQ==")],bulgarian:[a("dGQjZnJlZW5ldF90YWJsZV9hZHM="),"#ea_intext_div",".lapni-pop-over","#xenium_hot_offers"],easyList:[".yb-floorad",a("LndpZGdldF9wb19hZHNfd2lkZ2V0"),a("LnRyYWZmaWNqdW5reS1hZA=="),".textad_headline",a("LnNwb25zb3JlZC10ZXh0LWxpbmtz")],easyListChina:[a("LmFwcGd1aWRlLXdyYXBbb25jbGljayo9ImJjZWJvcy5jb20iXQ=="),a("LmZyb250cGFnZUFkdk0="),"#taotaole","#aafoot.top_box",".cfa_popup"],easyListCookie:[".ezmob-footer",".cc-CookieWarning","[data-cookie-number]",a("LmF3LWNvb2tpZS1iYW5uZXI="),".sygnal24-gdpr-modal-wrap"],easyListCzechSlovak:["#onlajny-stickers",a("I3Jla2xhbW5pLWJveA=="),a("LnJla2xhbWEtbWVnYWJvYXJk"),".sklik",a("W2lkXj0ic2tsaWtSZWtsYW1hIl0=")],easyListDutch:[a("I2FkdmVydGVudGll"),a("I3ZpcEFkbWFya3RCYW5uZXJCbG9jaw=="),".adstekst",a("YVtocmVmXj0iaHR0cHM6Ly94bHR1YmUubmwvY2xpY2svIl0="),"#semilo-lrectangle"],easyListGermany:["#SSpotIMPopSlider",a("LnNwb25zb3JsaW5rZ3J1ZW4="),a("I3dlcmJ1bmdza3k="),a("I3Jla2xhbWUtcmVjaHRzLW1pdHRl"),a("YVtocmVmXj0iaHR0cHM6Ly9iZDc0Mi5jb20vIl0=")],easyListItaly:[a("LmJveF9hZHZfYW5udW5jaQ=="),".sb-box-pubbliredazionale",a("YVtocmVmXj0iaHR0cDovL2FmZmlsaWF6aW9uaWFkcy5zbmFpLml0LyJd"),a("YVtocmVmXj0iaHR0cHM6Ly9hZHNlcnZlci5odG1sLml0LyJd"),a("YVtocmVmXj0iaHR0cHM6Ly9hZmZpbGlhemlvbmlhZHMuc25haS5pdC8iXQ==")],easyListLithuania:[a("LnJla2xhbW9zX3RhcnBhcw=="),a("LnJla2xhbW9zX251b3JvZG9z"),a("aW1nW2FsdD0iUmVrbGFtaW5pcyBza3lkZWxpcyJd"),a("aW1nW2FsdD0iRGVkaWt1b3RpLmx0IHNlcnZlcmlhaSJd"),a("aW1nW2FsdD0iSG9zdGluZ2FzIFNlcnZlcmlhaS5sdCJd")],estonian:[a("QVtocmVmKj0iaHR0cDovL3BheTRyZXN1bHRzMjQuZXUiXQ==")],fanboyAnnoyances:["#ac-lre-player",".navigate-to-top","#subscribe_popup",".newsletter_holder","#back-top"],fanboyAntiFacebook:[".util-bar-module-firefly-visible"],fanboyEnhancedTrackers:[".open.pushModal","#issuem-leaky-paywall-articles-zero-remaining-nag","#sovrn_container",'div[class$="-hide"][zoompage-fontsize][style="display: block;"]',".BlockNag__Card"],fanboySocial:["#FollowUs","#meteored_share","#social_follow",".article-sharer",".community__social-desc"],frellwitSwedish:[a("YVtocmVmKj0iY2FzaW5vcHJvLnNlIl1bdGFyZ2V0PSJfYmxhbmsiXQ=="),a("YVtocmVmKj0iZG9rdG9yLXNlLm9uZWxpbmsubWUiXQ=="),"article.category-samarbete",a("ZGl2LmhvbGlkQWRz"),"ul.adsmodern"],greekAdBlock:[a("QVtocmVmKj0iYWRtYW4ub3RlbmV0LmdyL2NsaWNrPyJd"),a("QVtocmVmKj0iaHR0cDovL2F4aWFiYW5uZXJzLmV4b2R1cy5nci8iXQ=="),a("QVtocmVmKj0iaHR0cDovL2ludGVyYWN0aXZlLmZvcnRobmV0LmdyL2NsaWNrPyJd"),"DIV.agores300","TABLE.advright"],hungarian:["#cemp_doboz",".optimonk-iframe-container",a("LmFkX19tYWlu"),a("W2NsYXNzKj0iR29vZ2xlQWRzIl0="),"#hirdetesek_box"],iDontCareAboutCookies:['.alert-info[data-block-track*="CookieNotice"]',".ModuleTemplateCookieIndicator",".o--cookies--container","#cookies-policy-sticky","#stickyCookieBar"],icelandicAbp:[a("QVtocmVmXj0iL2ZyYW1ld29yay9yZXNvdXJjZXMvZm9ybXMvYWRzLmFzcHgiXQ==")],latvian:[a("YVtocmVmPSJodHRwOi8vd3d3LnNhbGlkemluaS5sdi8iXVtzdHlsZT0iZGlzcGxheTogYmxvY2s7IHdpZHRoOiAxMjBweDsgaGVpZ2h0OiA0MHB4OyBvdmVyZmxvdzogaGlkZGVuOyBwb3NpdGlvbjogcmVsYXRpdmU7Il0="),a("YVtocmVmPSJodHRwOi8vd3d3LnNhbGlkemluaS5sdi8iXVtzdHlsZT0iZGlzcGxheTogYmxvY2s7IHdpZHRoOiA4OHB4OyBoZWlnaHQ6IDMxcHg7IG92ZXJmbG93OiBoaWRkZW47IHBvc2l0aW9uOiByZWxhdGl2ZTsiXQ==")],listKr:[a("YVtocmVmKj0iLy9hZC5wbGFuYnBsdXMuY28ua3IvIl0="),a("I2xpdmVyZUFkV3JhcHBlcg=="),a("YVtocmVmKj0iLy9hZHYuaW1hZHJlcC5jby5rci8iXQ=="),a("aW5zLmZhc3R2aWV3LWFk"),".revenue_unit_item.dable"],listeAr:[a("LmdlbWluaUxCMUFk"),".right-and-left-sponsers",a("YVtocmVmKj0iLmFmbGFtLmluZm8iXQ=="),a("YVtocmVmKj0iYm9vcmFxLm9yZyJd"),a("YVtocmVmKj0iZHViaXp6bGUuY29tL2FyLz91dG1fc291cmNlPSJd")],listeFr:[a("YVtocmVmXj0iaHR0cDovL3Byb21vLnZhZG9yLmNvbS8iXQ=="),a("I2FkY29udGFpbmVyX3JlY2hlcmNoZQ=="),a("YVtocmVmKj0id2Vib3JhbWEuZnIvZmNnaS1iaW4vIl0="),".site-pub-interstitiel",'div[id^="crt-"][data-criteo-id]'],officialPolish:["#ceneo-placeholder-ceneo-12",a("W2hyZWZePSJodHRwczovL2FmZi5zZW5kaHViLnBsLyJd"),a("YVtocmVmXj0iaHR0cDovL2Fkdm1hbmFnZXIudGVjaGZ1bi5wbC9yZWRpcmVjdC8iXQ=="),a("YVtocmVmXj0iaHR0cDovL3d3dy50cml6ZXIucGwvP3V0bV9zb3VyY2UiXQ=="),a("ZGl2I3NrYXBpZWNfYWQ=")],ro:[a("YVtocmVmXj0iLy9hZmZ0cmsuYWx0ZXgucm8vQ291bnRlci9DbGljayJd"),a("YVtocmVmXj0iaHR0cHM6Ly9ibGFja2ZyaWRheXNhbGVzLnJvL3Ryay9zaG9wLyJd"),a("YVtocmVmXj0iaHR0cHM6Ly9ldmVudC4ycGVyZm9ybWFudC5jb20vZXZlbnRzL2NsaWNrIl0="),a("YVtocmVmXj0iaHR0cHM6Ly9sLnByb2ZpdHNoYXJlLnJvLyJd"),'a[href^="/url/"]'],ruAd:[a("YVtocmVmKj0iLy9mZWJyYXJlLnJ1LyJd"),a("YVtocmVmKj0iLy91dGltZy5ydS8iXQ=="),a("YVtocmVmKj0iOi8vY2hpa2lkaWtpLnJ1Il0="),"#pgeldiz",".yandex-rtb-block"],thaiAds:["a[href*=macau-uta-popup]",a("I2Fkcy1nb29nbGUtbWlkZGxlX3JlY3RhbmdsZS1ncm91cA=="),a("LmFkczMwMHM="),".bumq",".img-kosana"],webAnnoyancesUltralist:["#mod-social-share-2","#social-tools",a("LmN0cGwtZnVsbGJhbm5lcg=="),".zergnet-recommend",".yt.btn-link.btn-md.btn"]},r=Object.keys(e),[4,Jl((o=[]).concat.apply(o,r.map((function(t){return e[t]}))))]):[2,void 0];case 1:return i=s.sent(),t&&function(e,t){for(var r="DOM blockers debug:\n```",i=0,n=Object.keys(e);i<n.length;i++){var o=n[i];r+="\n".concat(o,":");for(var s=0,a=e[o];s<a.length;s++){var l=a[s];r+="\n  ".concat(t[l]?"":""," ").concat(l)}}console.log("".concat(r,"\n```"))}(e,i),(n=r.filter((function(t){var r=e[t];return Al(r.map((function(e){return i[e]})))>.6*r.length}))).sort(),[2,n]}var a}))}))},fontPreferences:function(){return function(e,t){void 0===t&&(t=4e3);return Dl((function(r,i){var n=i.document,o=n.body,s=o.style;s.width="".concat(t,"px"),s.webkitTextSizeAdjust=s.textSizeAdjust="none",Ll()?o.style.zoom="".concat(1/i.devicePixelRatio):Ol()&&(o.style.zoom="reset");var a=n.createElement("div");return a.textContent=Ce([],Array(t/20|0),!0).map((function(){return"word"})).join(" "),o.appendChild(a),e(n,o)}),'<!doctype html><html><head><meta name="viewport" content="width=device-width, initial-scale=1">')}((function(e,t){for(var r={},i={},n=0,o=Object.keys(nc);n<o.length;n++){var s=o[n],a=nc[s],l=a[0],c=void 0===l?{}:l,d=a[1],h=void 0===d?"mmMwWLliI0fiflO&1":d,u=e.createElement("span");u.textContent=h,u.style.whiteSpace="nowrap";for(var p=0,f=Object.keys(c);p<f.length;p++){var m=f[p],g=c[m];void 0!==g&&(u.style[m]=g)}r[s]=u,t.appendChild(e.createElement("br")),t.appendChild(u)}for(var v=0,b=Object.keys(nc);v<b.length;v++){i[s=b[v]]=r[s].getBoundingClientRect().width}return i}))},audio:function(){var e=window,t=e.OfflineAudioContext||e.webkitOfflineAudioContext;if(!t)return-2;if(Ol()&&!Ml()&&!function(){var e=window;return Al(["DOMRectList"in e,"RTCPeerConnectionIceEvent"in e,"SVGGeometryElement"in e,"ontransitioncancel"in e])>=3}())return-1;var r=new t(1,5e3,44100),i=r.createOscillator();i.type="triangle",i.frequency.value=1e4;var n=r.createDynamicsCompressor();n.threshold.value=-50,n.knee.value=40,n.ratio.value=12,n.attack.value=0,n.release.value=.25,i.connect(n),n.connect(r.destination),i.start(0);var o=function(e){var t=3,r=500,i=500,n=5e3,o=function(){},s=new Promise((function(s,a){var l=!1,c=0,d=0;e.oncomplete=function(e){return s(e.renderedBuffer)};var h=function(){setTimeout((function(){return a(Nl("timeout"))}),Math.min(i,d+n-Date.now()))},u=function(){try{var i=e.startRendering();switch(pl(i)&&gl(i),e.state){case"running":d=Date.now(),l&&h();break;case"suspended":document.hidden||c++,l&&c>=t?a(Nl("suspended")):setTimeout(u,r)}}catch(e){a(e)}};u(),o=function(){l||(l=!0,d>0&&h())}}));return[s,o]}(r),s=o[0],a=o[1],l=s.then((function(e){return function(e){for(var t=0,r=0;r<e.length;++r)t+=Math.abs(e[r]);return t}(e.getChannelData(0).subarray(4500))}),(function(e){if("timeout"===e.name||"suspended"===e.name)return-3;throw e}));return gl(l),function(){return a(),l}},screenFrame:function(){var e=this,t=Wl();return function(){return _e(e,void 0,void 0,(function(){var e,r;return ke(this,(function(i){switch(i.label){case 0:return[4,t()];case 1:return e=i.sent(),[2,[(r=function(e){return null===e?null:Pl(e,10)})(e[0]),r(e[1]),r(e[2]),r(e[3])]]}}))}))}},osCpu:function(){return navigator.oscpu},languages:function(){var e=navigator,t=[],r=e.language||e.userLanguage||e.browserLanguage||e.systemLanguage;if(void 0!==r&&t.push([r]),Array.isArray(e.languages))Ll()&&function(){var e=window;return Al([!("MediaSettingsRange"in e),"RTCEncodedAudioFrame"in e,""+e.Intl=="[object Intl]",""+e.Reflect=="[object Reflect]"])>=3}()||t.push(e.languages);else if("string"==typeof e.languages){var i=e.languages;i&&t.push(i.split(","))}return t},colorDepth:function(){return window.screen.colorDepth},deviceMemory:function(){return Sl(Cl(navigator.deviceMemory),void 0)},screenResolution:function(){var e=screen,t=function(e){return Sl(kl(e),null)},r=[t(e.width),t(e.height)];return r.sort().reverse(),r},hardwareConcurrency:function(){return Sl(kl(navigator.hardwareConcurrency),void 0)},timezone:function(){var e,t=null===(e=window.Intl)||void 0===e?void 0:e.DateTimeFormat;if(t){var r=(new t).resolvedOptions().timeZone;if(r)return r}var i,n=(i=(new Date).getFullYear(),-Math.max(Cl(new Date(i,0,1).getTimezoneOffset()),Cl(new Date(i,6,1).getTimezoneOffset())));return"UTC".concat(n>=0?"+":"").concat(Math.abs(n))},sessionStorage:function(){try{return!!window.sessionStorage}catch(e){return!0}},localStorage:function(){try{return!!window.localStorage}catch(e){return!0}},indexedDB:function(){if(!Il()&&!function(){var e=window,t=navigator;return Al(["msWriteProfilerMark"in e,"MSStream"in e,"msLaunchUri"in t,"msSaveBlob"in t])>=3&&!Il()}())try{return!!window.indexedDB}catch(e){return!0}},openDatabase:function(){return!!window.openDatabase},cpuClass:function(){return navigator.cpuClass},platform:function(){var e=navigator.platform;return"MacIntel"===e&&Ol()&&!Ml()?function(){if("iPad"===navigator.platform)return!0;var e=screen,t=e.width/e.height;return Al(["MediaSource"in window,!!Element.prototype.webkitRequestFullscreen,t>.65&&t<1.53])>=2}()?"iPad":"iPhone":e},plugins:function(){var e=navigator.plugins;if(e){for(var t=[],r=0;r<e.length;++r){var i=e[r];if(i){for(var n=[],o=0;o<i.length;++o){var s=i[o];n.push({type:s.type,suffixes:s.suffixes})}t.push({name:i.name,description:i.description,mimeTypes:n})}}return t}},canvas:function(){var e,t,r=!1,i=function(){var e=document.createElement("canvas");return e.width=1,e.height=1,[e,e.getContext("2d")]}(),n=i[0],o=i[1];if(function(e,t){return!(!t||!e.toDataURL)}(n,o)){r=function(e){return e.rect(0,0,10,10),e.rect(2,2,6,6),!e.isPointInPath(5,5,"evenodd")}(o),function(e,t){e.width=240,e.height=60,t.textBaseline="alphabetic",t.fillStyle="#f60",t.fillRect(100,1,62,20),t.fillStyle="#069",t.font='11pt "Times New Roman"';var r="Cwm fjordbank gly ".concat(String.fromCharCode(55357,56835));t.fillText(r,2,15),t.fillStyle="rgba(102, 204, 0, 0.2)",t.font="18pt Arial",t.fillText(r,4,45)}(n,o);var s=Vl(n);s!==Vl(n)?e=t="unstable":(t=s,function(e,t){e.width=122,e.height=110,t.globalCompositeOperation="multiply";for(var r=0,i=[["#f2f",40,40],["#2ff",80,40],["#ff2",60,80]];r<i.length;r++){var n=i[r],o=n[0],s=n[1],a=n[2];t.fillStyle=o,t.beginPath(),t.arc(s,a,40,0,2*Math.PI,!0),t.closePath(),t.fill()}t.fillStyle="#f9c",t.arc(60,60,60,0,2*Math.PI,!0),t.arc(60,60,20,0,2*Math.PI,!0),t.fill("evenodd")}(n,o),e=Vl(n))}else e=t="";return{winding:r,geometry:e,text:t}},touchSupport:function(){var e,t=navigator,r=0;void 0!==t.maxTouchPoints?r=kl(t.maxTouchPoints):void 0!==t.msMaxTouchPoints&&(r=t.msMaxTouchPoints);try{document.createEvent("TouchEvent"),e=!0}catch(t){e=!1}return{maxTouchPoints:r,touchEvent:e,touchStart:"ontouchstart"in window}},vendor:function(){return navigator.vendor||""},vendorFlavors:function(){for(var e=[],t=0,r=["chrome","safari","__crWeb","__gCrWeb","yandex","__yb","__ybro","__firefox__","__edgeTrackingPreventionStatistics","webkit","oprt","samsungAr","ucweb","UCShellJava","puffinDevice"];t<r.length;t++){var i=r[t],n=window[i];n&&"object"==typeof n&&e.push(i)}return e.sort()},cookiesEnabled:function(){var e=document;try{e.cookie="cookietest=1; SameSite=Strict;";var t=-1!==e.cookie.indexOf("cookietest=");return e.cookie="cookietest=1; SameSite=Strict; expires=Thu, 01-Jan-1970 00:00:01 GMT",t}catch(e){return!1}},colorGamut:function(){for(var e=0,t=["rec2020","p3","srgb"];e<t.length;e++){var r=t[e];if(matchMedia("(color-gamut: ".concat(r,")")).matches)return r}},invertedColors:function(){return!!Zl("inverted")||!Zl("none")&&void 0},forcedColors:function(){return!!Ql("active")||!Ql("none")&&void 0},monochrome:function(){if(matchMedia("(min-monochrome: 0)").matches){for(var e=0;e<=100;++e)if(matchMedia("(max-monochrome: ".concat(e,")")).matches)return e;throw new Error("Too high value")}},contrast:function(){return Kl("no-preference")?0:Kl("high")||Kl("more")?1:Kl("low")||Kl("less")?-1:Kl("forced")?10:void 0},reducedMotion:function(){return!!ec("reduce")||!ec("no-preference")&&void 0},hdr:function(){return!!tc("high")||!tc("standard")&&void 0},math:function(){var e,t=rc.acos||ic,r=rc.acosh||ic,i=rc.asin||ic,n=rc.asinh||ic,o=rc.atanh||ic,s=rc.atan||ic,a=rc.sin||ic,l=rc.sinh||ic,c=rc.cos||ic,d=rc.cosh||ic,h=rc.tan||ic,u=rc.tanh||ic,p=rc.exp||ic,f=rc.expm1||ic,m=rc.log1p||ic;return{acos:t(.12312423423423424),acosh:r(1e308),acoshPf:(e=1e154,rc.log(e+rc.sqrt(e*e-1))),asin:i(.12312423423423424),asinh:n(1),asinhPf:function(e){return rc.log(e+rc.sqrt(e*e+1))}(1),atanh:o(.5),atanhPf:function(e){return rc.log((1+e)/(1-e))/2}(.5),atan:s(.5),sin:a(-1e300),sinh:l(1),sinhPf:function(e){return rc.exp(e)-1/rc.exp(e)/2}(1),cos:c(10.000000000123),cosh:d(1),coshPf:function(e){return(rc.exp(e)+1/rc.exp(e))/2}(1),tan:h(-1e300),tanh:u(1),tanhPf:function(e){return(rc.exp(2*e)-1)/(rc.exp(2*e)+1)}(1),exp:p(1),expm1:f(1),expm1Pf:function(e){return rc.exp(e)-1}(1),log1p:m(10),log1pPf:function(e){return rc.log(1+e)}(10),powPI:function(e){return rc.pow(rc.PI,e)}(-100)}},videoCard:function(){var e,t=document.createElement("canvas"),r=null!==(e=t.getContext("webgl"))&&void 0!==e?e:t.getContext("experimental-webgl");if(r&&"getExtension"in r){var i=r.getExtension("WEBGL_debug_renderer_info");if(i)return{vendor:(r.getParameter(i.UNMASKED_VENDOR_WEBGL)||"").toString(),renderer:(r.getParameter(i.UNMASKED_RENDERER_WEBGL)||"").toString()}}},pdfViewerEnabled:function(){return navigator.pdfViewerEnabled},architecture:function(){var e=new Float32Array(1),t=new Uint8Array(e.buffer);return e[0]=1/0,e[0]=e[0]-e[0],t[3]}};var sc="$ if upgrade to Pro: https://fpjs.dev/pro";function ac(e){var t=function(e){if($l())return.4;if(Ol())return Ml()?.5:.3;var t=e.platform.value||"";if(/^Win/.test(t))return.6;if(/^Mac/.test(t))return.5;return.7}(e),r=function(e){return Pl(.99+.01*e,1e-4)}(t);return{score:t,comment:sc.replace(/\$/g,"".concat(r))}}function lc(e){return JSON.stringify(e,(function(e,t){return t instanceof Error?function(e){var t;return xe({name:e.name,message:e.message,stack:null===(t=e.stack)||void 0===t?void 0:t.split("\n")},e)}(t):t}),2)}function cc(e){return function(e,t){t=t||0;var r,i=(e=e||"").length%16,n=e.length-i,o=[0,t],s=[0,t],a=[0,0],l=[0,0],c=[2277735313,289559509],d=[1291169091,658871167];for(r=0;r<n;r+=16)a=[255&e.charCodeAt(r+4)|(255&e.charCodeAt(r+5))<<8|(255&e.charCodeAt(r+6))<<16|(255&e.charCodeAt(r+7))<<24,255&e.charCodeAt(r)|(255&e.charCodeAt(r+1))<<8|(255&e.charCodeAt(r+2))<<16|(255&e.charCodeAt(r+3))<<24],l=[255&e.charCodeAt(r+12)|(255&e.charCodeAt(r+13))<<8|(255&e.charCodeAt(r+14))<<16|(255&e.charCodeAt(r+15))<<24,255&e.charCodeAt(r+8)|(255&e.charCodeAt(r+9))<<8|(255&e.charCodeAt(r+10))<<16|(255&e.charCodeAt(r+11))<<24],a=yl(a=bl(a,c),31),o=vl(o=yl(o=wl(o,a=bl(a,d)),27),s),o=vl(bl(o,[0,5]),[0,1390208809]),l=yl(l=bl(l,d),33),s=vl(s=yl(s=wl(s,l=bl(l,c)),31),o),s=vl(bl(s,[0,5]),[0,944331445]);switch(a=[0,0],l=[0,0],i){case 15:l=wl(l,xl([0,e.charCodeAt(r+14)],48));case 14:l=wl(l,xl([0,e.charCodeAt(r+13)],40));case 13:l=wl(l,xl([0,e.charCodeAt(r+12)],32));case 12:l=wl(l,xl([0,e.charCodeAt(r+11)],24));case 11:l=wl(l,xl([0,e.charCodeAt(r+10)],16));case 10:l=wl(l,xl([0,e.charCodeAt(r+9)],8));case 9:l=bl(l=wl(l,[0,e.charCodeAt(r+8)]),d),s=wl(s,l=bl(l=yl(l,33),c));case 8:a=wl(a,xl([0,e.charCodeAt(r+7)],56));case 7:a=wl(a,xl([0,e.charCodeAt(r+6)],48));case 6:a=wl(a,xl([0,e.charCodeAt(r+5)],40));case 5:a=wl(a,xl([0,e.charCodeAt(r+4)],32));case 4:a=wl(a,xl([0,e.charCodeAt(r+3)],24));case 3:a=wl(a,xl([0,e.charCodeAt(r+2)],16));case 2:a=wl(a,xl([0,e.charCodeAt(r+1)],8));case 1:a=bl(a=wl(a,[0,e.charCodeAt(r)]),c),o=wl(o,a=bl(a=yl(a,31),d))}return o=vl(o=wl(o,[0,e.length]),s=wl(s,[0,e.length])),s=vl(s,o),o=vl(o=_l(o),s=_l(s)),s=vl(s,o),("00000000"+(o[0]>>>0).toString(16)).slice(-8)+("00000000"+(o[1]>>>0).toString(16)).slice(-8)+("00000000"+(s[0]>>>0).toString(16)).slice(-8)+("00000000"+(s[1]>>>0).toString(16)).slice(-8)}(function(e){for(var t="",r=0,i=Object.keys(e).sort();r<i.length;r++){var n=i[r],o=e[n],s=o.error?"error":JSON.stringify(o.value);t+="".concat(t?"|":"").concat(n.replace(/([:|\\])/g,"\\$1"),":").concat(s)}return t}(e))}function dc(e){return void 0===e&&(e=50),function(e,t){void 0===t&&(t=1/0);var r=window.requestIdleCallback;return r?new Promise((function(e){return r.call(window,(function(){return e()}),{timeout:t})})):ul(Math.min(e,t))}(e,2*e)}function hc(e,t){var r=Date.now();return{get:function(i){return _e(this,void 0,void 0,(function(){var n,o,s;return ke(this,(function(a){switch(a.label){case 0:return n=Date.now(),[4,e()];case 1:return o=a.sent(),s=function(e){var t,r=ac(e);return{get visitorId(){return void 0===t&&(t=cc(this.components)),t},set visitorId(e){t=e},confidence:r,components:e,version:hl}}(o),(t||(null==i?void 0:i.debug))&&console.log("Copy the text below to get the debug data:\n\n```\nversion: ".concat(s.version,"\nuserAgent: ").concat(navigator.userAgent,"\ntimeBetweenLoadAndGet: ").concat(n-r,"\nvisitorId: ").concat(s.visitorId,"\ncomponents: ").concat(lc(o),"\n```")),[2,s]}}))}))}}}var uc={load:function(e){var t=void 0===e?{}:e,r=t.delayFallback,i=t.debug,n=t.monitoring,o=void 0===n||n;return _e(this,void 0,void 0,(function(){return ke(this,(function(e){switch(e.label){case 0:return o&&function(){if(!(window.__fpjs_d_m||Math.random()>=.001))try{var e=new XMLHttpRequest;e.open("get","https://m1.openfpcdn.io/fingerprintjs/v".concat(hl,"/npm-monitoring"),!0),e.send()}catch(e){console.error(e)}}(),[4,dc(r)];case 1:return e.sent(),[2,hc(El(oc,{debug:i},[]),i)]}}))}))},hashComponents:cc,componentsToDebugString:lc};class pc extends Ds{constructor(e,t=!1){super(),this.loginForAcceptInviteParams=null,this.loginForEditParams=null,this.loginForNewPointParams=null,this.loginForEndorseParams=null,this.loginForRatingsParams=null,this.loginForPointQualityParams=null,this.loginForMembershipParams=null,this.loginForNotificationSettingsParams=!1,this.endorsementPostsIndex={},this.groupCurrentVoteCountIndex={},this.ratingPostsIndex={},this.membershipsIndex={},this.pointQualitiesIndex={},this.isPollingForLogin=!1,this.facebookPopupWindow=null,this.samlPopupWindow=null,this.hasIssuedLogout=!1,this.sessionPrefix="session_",this.sessionStorage=window.localStorage,this.serverApi=e,this._setupBrowserFingerprint(),t||(window.location.pathname.startsWith("/survey/")?console.log("Not checking login in survey mode"):this.checkLogin(),this.addGlobalListener("yp-forgot-password",this._forgotPassword.bind(this)),this.addGlobalListener("yp-reset-password",this._resetPassword.bind(this)))}getBrowserId(){var e=localStorage.getItem("aoi-brid");return e||((e=this._generateRandomString(32))?localStorage.setItem("yp-brid",e):console.error("Could not generate browser id")),e}_setupBrowserFingerprint(){try{uc.load({monitoring:!1}).then((e=>e.get())).then((e=>{this.browserFingerprint=e.visitorId,this.browserFingerprintConfidence=e.confidence.score}))}catch(e){console.error(e)}}_generateRandomString(e){if(window.crypto){for(var t=window.crypto.getRandomValues(new Uint32Array(3)),r="",i=0,n=t.length;i<n;i++)r+=t[i].toString(36);return r}return console.log("Not checking login in survey mode"),null}sessionHas(e){const t=this.sessionPrefix+e;return null!==this.sessionStorage.getItem(t)}sessionGet(e){const t=this.sessionPrefix+e,r=this.sessionStorage.getItem(t);let i;if(r)try{i=JSON.parse(r)}catch(e){i=null}return i}sessionSet(e,t){const r=this.sessionPrefix+e,i=JSON.stringify(t);this.sessionStorage.setItem(r,i)}sessionUnset(e){const t=this.sessionPrefix+e;this.sessionStorage.removeItem(t)}sessionClear(){this.sessionStorage.clear()}loginForAcceptInvite(e,t,r,i){this.loginForAcceptInviteParams={editDialog:e,token:t},this.openUserlogin(r,i)}loginForEdit(e,t,r,i){this.loginForEditParams={editDialog:e,newOrUpdate:t,params:r,refreshFunction:i},this.openUserlogin()}loginForNewPoint(e,t){this.loginForNewPointParams={postPointsElement:e,params:t},this.openUserlogin()}loginForEndorse(e,t){this.loginForEndorseParams={postActionElement:e,params:t},this.openUserlogin()}loginForRatings(e){this.loginForRatingsParams={postActionElement:e},this.openUserlogin()}loginForPointQuality(e,t){this.loginForPointQualityParams={pointActionElement:e,params:t},this.openUserlogin()}loginForMembership(e,t){this.loginForMembershipParams={membershipActionElement:e,params:t},this.openUserlogin()}loginFor401(e){this.loginFor401refreshFunction=e,this.openUserlogin()}loginForNotificationSettings(){this.loginForNotificationSettingsParams=!0,this.openUserlogin()}openUserlogin(e=void 0,t=void 0){window.appDialogs.getDialogAsync("userLogin",(r=>{r.setup(this._handleLogin.bind(this),window.appGlobals.domain),r.openDialog(void 0,e,t)}))}autoAnonymousLogin(){setTimeout((()=>{null==this.user?window.appDialogs.getDialogAsync("userLogin",(e=>{e.setup(this._handleLogin.bind(this),window.appGlobals.domain),e.anonymousLogin()})):console.log("Not doing auto anon login as user already exists")}),1)}_closeUserLogin(){window.appDialogs.closeDialog("userLogin")}_setUserLoginSpinner(){window.appDialogs.getDialogAsync("userLogin",(e=>{e.userSpinner=!1}))}_handleLogin(e){this._closeUserLogin(),this.setLoggedInUser(e),e.profile_data&&e.profile_data.isAnonymousUser?console.debug("Do not fetch admin or memberships for anonymous users"):(this.getAdminRights(),this.getPromoterRights(),this.getMemberShips(),this.toastLoginTextCombined=this.t("user.loginCompleteFor")+" "+this.user?.name,this.fireGlobal("yp-open-toast",{text:this.toastLoginTextCombined})),this._checkLoginForParameters(),setTimeout((()=>{window.appGlobals.originalQueryParameters&&window.appGlobals.originalQueryParameters.raLogin&&(window.location.href=window.appGlobals.originalQueryParameters.raLogin)})),setTimeout((()=>{this._checkRegistrationAnswers(e)}),450)}_checkLoginForParameters(){}openNotificationSettings(){window.appDialogs.getDialogAsync("userEdit",(e=>{e.setup(window.appUser.user,!1,null,!0),e.open("edit",{userId:window.appUser.user?.id})}))}_forgotPassword(e){window.appDialogs.getDialogAsync("forgotPassword",(t=>{t.open(e.detail)}))}_resetPassword(e){window.appDialogs.getDialogAsync("resetPassword",(t=>{t.open(e.detail)}))}getUser(){return this.sessionGet("user")}setLoggedInUser(e){this.sessionSet("user",e),this.user=e,this.fireGlobal("yp-logged-in",this.user),window.appGlobals.analytics.sendLoginAndSignup(e.id,"Login Success",this.lastLoginMethod?this.lastLoginMethod:"Email"),this.lastLoginMethod=void 0,e&&e.profile_data&&e.profile_data.isAnonymousUser?window.appGlobals.setAnonymousUser(e):window.appGlobals.setAnonymousUser(void 0),window.appGlobals.offline.checkContentToSendForLoggedInUser()}removeAnonymousUser(){console.log("Remove anon user"),this.removeUserSession()}removeUserSession(){this.sessionUnset("user"),this.user=null,window.appGlobals.setAnonymousUser(void 0),this.fireGlobal("yp-logged-in",null)}loggedIn(){let e=!0;return window.appGlobals.currentForceSaml&&window.appGlobals.currentGroup&&(dl.checkGroupAccess(window.appGlobals.currentGroup)||(this.user?("saml"!==this.user.loginProvider&&(e=!1),window.appGlobals.currentGroup&&window.appGlobals.currentGroup.configuration&&window.appGlobals.currentGroup.configuration.forceSecureSamlEmployeeLogin&&(this.user.isSamlEmployee||(e=!1))):e=!1)),null!=this.user&&e}async setLocale(e){await this.serverApi.setLocale({locale:e})}cancelLoginPolling(){this.pollingStartedAt=void 0}_closeAllPopups(){if(this.facebookPopupWindow){try{this.facebookPopupWindow.close()}catch(e){console.error(e)}this.facebookPopupWindow=null}if(this.samlPopupWindow){try{this.samlPopupWindow.close()}catch(e){console.error(e)}this.samlPopupWindow=null}}async pollForLogin(){if(this.pollingStartedAt){const e=await this.serverApi.isloggedin();if(e&&!0===e.notLoggedIn&&this.pollingStartedAt){Date.now()-this.pollingStartedAt<3e5?setTimeout((()=>{this.pollForLogin()}),1200):this.pollingStartedAt=void 0}else e&&e.name&&(this.fireGlobal("yp-logged-in-via-polling",e),this.cancelLoginPolling(),this.facebookPopupWindow?this.loginFromFacebook():this.samlPopupWindow&&this.loginFromSaml(),this._closeAllPopups())}else console.error("Unkown state in polling..."),this._closeAllPopups(),this.cancelLoginPolling()}startPollingForLogin(){this.pollingStartedAt=Date.now(),setTimeout((()=>{this.pollForLogin()}),1e3)}loginFromFacebook(){this.cancelLoginPolling(),this.lastLoginMethod="Facebook",this._completeExternalLogin(this.t("user.loggedInWithFacebook"))}loginFromSaml(){this.cancelLoginPolling(),this.lastLoginMethod="Saml2",this._completeExternalLogin(this.t("user.loggedInWithSaml"))}_completeExternalLogin(e){this.checkLogin(),this._setUserLoginSpinner(),this.completeExternalLoginText=e}checkLogin(){this.isloggedin(),this.getMemberShips(),this.getAdminRights(),this.getPromoterRights()}recheckAdminRights(){this.getAdminRights(),this.getPromoterRights()}async getPromoterRights(){const e=await this.serverApi.getPromoterRights();e?(this.promoterRights=e,this.fireGlobal("yp-got-promoter-rights",!0)):(this.promoterRights=void 0,this.fireGlobal("yp-got-promoter-rights",!1))}updateEndorsementForPost(e,t,r=void 0){if(this.user){this.user.Endorsements||(this.user.Endorsements=[]);let r=!1;for(let i=0;i<this.user.Endorsements.length;i++)if(this.user.Endorsements[i].post_id===e){t?this.user.Endorsements[i]=t:this.user.Endorsements.splice(i,1),r=!0;break}!r&&t&&this.user.Endorsements.push(t),this._updateEndorsementPostsIndex(this.user)}else console.error("Can't find user for updateEndorsementForPost");r&&r.configuration&&r.configuration.maxNumberOfGroupVotes?this.calculateVotesLeftForGroup(r):this.fireGlobal("got-endorsements-and-qualities",null)}calculateVotesLeftForGroup(e){setTimeout((()=>{if(this.user&&this.user.Endorsements){const t=this.groupCurrentVoteCountIndex[e.id];if(this.groupCurrentVoteCountIndex[e.id]=this.user.Endorsements.filter((function(t){return t.Post&&t.Post.group_id===e.id&&-1!==t.value&&0!==t.value})).length,t!=this.groupCurrentVoteCountIndex[e.id]){const t=`${this.t("youHaveUsed")} ${this.groupCurrentVoteCountIndex[e.id]} ${this.t("ofNumber")} ${e.configuration.maxNumberOfGroupVotes} ${this.t("votesForGroup")}`;window.appDialogs.getDialogAsync("masterToast",(e=>{e.labelText=t,e.open=!0,e.timeoutMs=4e3}))}this.fireGlobal("got-endorsements-and-qualities",{maxGroupId:e.id,groupCurrentVoteCount:this.groupCurrentVoteCountIndex[e.id]})}else console.warn("No user or endorsements for calculateVotesLeftForGroup")}))}_updateEndorsementPostsIndex(e){if(e&&e.Endorsements&&e.Endorsements.length>0){this.endorsementPostsIndex={};for(let t=0;t<e.Endorsements.length;t++)this.endorsementPostsIndex[e.Endorsements[t].post_id]=e.Endorsements[t]}else this.endorsementPostsIndex={}}_updateRatingPostsIndex(e){if(e&&e.Ratings&&e.Ratings.length>0){this.ratingPostsIndex={};for(let t=0;t<e.Ratings.length;t++)this.ratingPostsIndex[e.Ratings[t].post_id]||(this.ratingPostsIndex[e.Ratings[t].post_id]={}),this.ratingPostsIndex[e.Ratings[t].post_id][e.Ratings[t].type_index]=e.Ratings[t]}else this.ratingPostsIndex={}}updateRatingForPost(e,t,r){if(this.user){this.user.Ratings||(this.user.Ratings=[]);let i=!1;for(let n=0;n<this.user.Ratings.length;n++)if(this.user.Ratings[n].post_id===e&&this.user.Ratings[n].type_index===t){r?this.user.Ratings[n]=r:this.user.Ratings.splice(n,1),i=!0;break}!i&&r&&this.user.Ratings.push(r),this._updateRatingPostsIndex(this.user)}else console.error("Can't find user for updateRatingForPost")}updatePointQualityForPost(e,t){if(this.user){if(this.user.PointQualities){let r=!1;for(let i=0;i<this.user.PointQualities.length;i++)if(this.user.PointQualities[i].point_id===e){t?this.user.PointQualities[i]=t:this.user.PointQualities.splice(i,1),r=!0;break}r&&this._updatePointQualitiesIndex(this.user)}}else console.error("Can't find user for updatePointQualityForPost")}_updatePointQualitiesIndex(e){if(e&&e.PointQualities&&e.PointQualities.length>0){this.pointQualitiesIndex={};for(let t=0;t<e.PointQualities.length;t++)this.pointQualitiesIndex[e.PointQualities[t].point_id]=e.PointQualities[t]}else this.pointQualitiesIndex={}}_onUserChanged(e){e&&(this._updateEndorsementPostsIndex(e),this._updatePointQualitiesIndex(e),this._updateRatingPostsIndex(e),this.fireGlobal("got-endorsements-and-qualities",null))}async logout(){this.hasIssuedLogout=!0,await this.serverApi.logout(),this.toastLogoutTextCombined=this.t("user.logoutCompleteFor")+" "+this.user?.name,this.fireGlobal("yp-open-toast",{text:this.toastLogoutTextCombined}),this.fireGlobal("yp-close-right-drawer",!0),this.removeUserSession(),this.recheckAdminRights()}checkRegistrationAnswersCurrent(){this.user&&this._checkRegistrationAnswers(this.user)}setHasRegistrationAnswers(){this.user&&(this.user.hasRegistrationAnswers=!0)}_checkRegistrationAnswers(e){e&&!e.notLoggedIn&&window.appGlobals.registrationQuestionsGroup&&!e.hasRegistrationAnswers&&(!window.appGlobals.currentAnonymousUser||window.appGlobals.currentAnonymousUser&&window.appGlobals.registrationQuestionsGroup.configuration.anonymousAskRegistrationQuestions)?window.appDialogs.getDialogAsync("registrationQuestions",(e=>{e.open(window.appGlobals.registrationQuestionsGroup)})):this.fireGlobal("yp-registration-questions-done")}async isloggedin(){const e=await this.serverApi.isloggedin();e&&!0===e.notLoggedIn?this.removeUserSession():e&&e.name&&e.profile_data&&e.profile_data.isAnonymousUser?setTimeout((()=>{window.appGlobals.currentAnonymousGroup?this.setLoggedInUser(e):window.appGlobals.setAnonymousUser(e)}),500):e&&e.name&&this.setLoggedInUser(e),e&&e.missingEmail?window.appDialogs.getDialogAsync("missingEmail",(t=>{t.open(e.loginProvider)})):e&&e.profile_data&&!1===e.profile_data.saml_show_confirm_email_completed&&window.appDialogs.getDialogAsync("missingEmail",(t=>{t.open(e.loginProvider,!0,e.email)})),setTimeout((()=>{"Saml2"!==this.lastLoginMethod&&"Facebook"!==this.lastLoginMethod||this._checkRegistrationAnswers(e)}),250),e&&(e.customSamlDeniedMessage?window.appGlobals.currentSamlDeniedMessage=e.customSamlDeniedMessage:window.appGlobals.currentSamlDeniedMessage=void 0,e.customSamlLoginMessage?window.appGlobals.currentSamlLoginMessage=e.customSamlLoginMessage:window.appGlobals.currentSamlLoginMessage=void 0,e.forceSecureSamlLogin?window.appGlobals.currentForceSaml=!0:window.appGlobals.currentForceSaml=!1),this.completeExternalLoginText&&(window.appGlobals.notifyUserViaToast(this.completeExternalLoginText),this._closeUserLogin(),this.completeExternalLoginText=void 0,this._checkLoginForParameters())}async getAdminRights(){const e=await this.serverApi.getAdminRights();e?(this.adminRights=e,this.fireGlobal("yp-got-admin-rights",!0)):this.adminRights&&(this.adminRights=void 0,this.fireGlobal("yp-got-admin-rights",!1)),this.fireGlobal("yp-have-checked-admin-rights")}_updateMembershipsIndex(e){if(e){let t;for(this.membershipsIndex={groups:{},communities:{},domains:{}},t=0;t<e.GroupUsers.length;t++)this.membershipsIndex.groups[e.GroupUsers[t].id]=!0;for(t=0;t<e.CommunityUsers.length;t++)this.membershipsIndex.communities[e.CommunityUsers[t].id]=!0;for(t=0;t<e.DomainUsers.length;t++)this.membershipsIndex.domains[e.DomainUsers[t].id]=!0}else this.membershipsIndex={groups:{},communities:{},domains:{}}}async getMemberShips(){const e=await this.serverApi.getMemberships();e?(this.memberships=e,this._updateMembershipsIndex(this.memberships),this.fireGlobal("yp-got-memberships",!0)):this.memberships&&(this.memberships=void 0,this.fireGlobal("yp-got-memberships",!1))}}class fc extends pc{constructor(e,t=!1){super(e,!0)}}var mc=function(e,t,r,i){var n,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,r,s):n(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s};const gc=[{id:1,title:"Democracy in Distress",imageUrl:"https://cps-images.citizens.is/projects/1/problemStatement/images/916898992.png",description:"The first test run is entirely automated except for the problem statement provided by us. All sub problems, entities and solutions with pros & cons are generated using GPT-4 & GPT-3.5. The context for solutions is obtained through curated web searches. This setup allows us to explore how human and AI-driven insights can work together to solve complex problems."}];let vc=class extends Ts{async connectedCallback(){super.connectedCallback(),window.psAppGlobals.activity("Home - open")}updated(e){super.updated(e)}disconnectedCallback(){super.disconnectedCallback(),window.psAppGlobals.activity("Home - close")}static get styles(){return[super.styles,o`.subContainer{max-width:960px;margin-top:8px;padding:16px}.projectItem{background-color:var(--md-sys-color-surface-variant);color:var(--md-sys-color-on-surface-variant);border-radius:16px;margin:16px;margin-top:32px;width:100%;max-width:420px;padding:0}.projectTitle{font-size:32px;background-color:var(--md-sys-color-primary);color:var(--md-sys-color-on-primary);width:100%;max-width:420px;height:100%;padding:0;margin:0;margin-top:-4px}.projectDescription{padding:16px;height:142px}.projectTitleInner{padding:16px;padding-bottom:20px}.projectImage{margin:0;padding:0}.moreInfo{margin:16px;margin-top:0;font-size:18px;padding:24px;line-height:1.5;max-width:944px;border-radius:24px;color:var(--md-sys-color-on-surface);background-color:var(--md-sys-color-surface)}a{text-decoration:none}.gitHubLink{margin-top:16px}.gitHubLink a{text-decoration:underline}.title{padding:24px;margin-bottom:0;color:var(--md-sys-color-primary);background-color:var(--md-sys-color-on-primary)}@media (max-width:960px){.projectItem,.projectTitle{max-width:100%;width:100%;margin:0}.projectTitle{font-size:26px;margin-top:-3px}.subContainer{max-width:100%;margin-top:8px;padding:8px}.moreInfo{margin:8px;max-width:100%;width:100%}.projectDescription{padding-bottom:24px;height:100%}.title{font-size:26px;padding:16px;line-height:1.45}}`]}renderProject(e){return V` <a href="/projects/${e.id}" @click="${()=>window.scrollTo(0,0)}"> <div class="projectItem layout vertical center-center"> <div class="projectImage"> <img width="${this.wide?420:343}" height="${this.wide?240:196}" src="${e.imageUrl}"> </div> <div class="projectTitle layout vertical center-center"> <div class="projectTitleInner">${e.title}</div> </div> <div class="projectDescription">${e.description}</div> </div> </a> `}render(){return V` <div class="topContainer layout vertical center-center"> <img height="${this.wide?300:190}" src="https://yrpri-usa-production-direct-assets.s3.amazonaws.com/Robert_Bjarnason_High_quality_abstract_new_high_tech_new_wave.__61a9b3d8-7533-4841-a99e-ef036fed1fbf.png"> <div class="title">${this.t("Welcome to Policy Synth")}</div> <div class="layout horizontal center-justified wrap"> ${gc.map((e=>this.renderProject(e)))} </div> <div class="subContainer layout vertical center-center"> <div class="title"> ${this.t("Bringing together the best of collective and artificial intelligence")} </div> <div class="moreInfo"> Our project embodies a unique effort to intertwine human insights and artificial intelligence to grapple with complex policy dilemmas. We are in the process of building a state-of-the-art platform where policymakers, citizens, and AI can engage in a collective discourse. This collaborative interaction is expected to not only expedite decision-making processes but also augment their quality, paving the way for more inventive and efficacious policy resolutions. </div> <div class="gitHubLink"> <a href="https://github.com/CitizensFoundation/policy-synth" target="_blank">${this.t("Join us and collaborate on Github")}</a> </div> </div> </div> `}};vc=mc([ce("ps-home")],vc);
/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const{I:bc}=ne,yc=(e,t)=>void 0===t?void 0!==e?._$litType$:e?._$litType$===t,xc=e=>void 0===e.strings,wc=()=>document.createComment(""),_c=(e,t,r)=>{const i=e._$AA.parentNode,n=void 0===t?e._$AB:t._$AA;if(void 0===r){const t=i.insertBefore(wc(),n),o=i.insertBefore(wc(),n);r=new bc(t,o,e,e.options)}else{const t=r._$AB.nextSibling,o=r._$AM,s=o!==e;if(s){let t;r._$AQ?.(e),r._$AM=e,void 0!==r._$AP&&(t=e._$AU)!==o._$AU&&r._$AP(t)}if(t!==n||s){let e=r._$AA;for(;e!==t;){const t=e.nextSibling;i.insertBefore(e,n),e=t}}}return r},kc={},Cc=(e,t=kc)=>e._$AH=t,Sc=e=>e._$AH,Ac=e=>(e=>null!=e?._$litType$?.h)(e)?e._$litType$.h:e.strings,Pc=qe(class extends Ye{constructor(e){super(e),this.et=new WeakMap}render(e){return[e]}update(e,[t]){const r=yc(this.it)?Ac(this.it):null,i=yc(t)?Ac(t):null;if(null!==r&&(null===i||r!==i)){const t=Sc(e).pop();let i=this.et.get(r);if(void 0===i){const e=document.createDocumentFragment();i=se(G,e),i.setConnected(!1),this.et.set(r,i)}Cc(i,[t]),_c(i,void 0,t)}if(null!==i){if(null===r||r!==i){const t=this.et.get(i);if(void 0!==t){const r=Sc(t).pop();(e=>{e._$AR()})(e),_c(e,void 0,r),Cc(e,[r])}}this.it=t}else this.it=void 0;return this.render(t)}});
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
class Tc extends Ye{constructor(e){if(super(e),this.it=G,e.type!==Ge)throw Error(this.constructor.directiveName+"() can only be used in child bindings")}render(e){if(e===G||null==e)return this._t=void 0,this.it=e;if(e===j)return e;if("string"!=typeof e)throw Error(this.constructor.directiveName+"() called with a non-string value");if(e===this.it)return this._t;this.it=e;const t=[e];return t.raw=t,this._t={_$litType$:this.constructor.resultType,strings:t,values:[]}}}Tc.directiveName="unsafeHTML",Tc.resultType=1;const Ec=qe(Tc),Ic=(e,t)=>{const r=e._$AN;if(void 0===r)return!1;for(const e of r)e._$AO?.(t,!1),Ic(e,t);return!0},Lc=e=>{let t,r;do{if(void 0===(t=e._$AM))break;r=t._$AN,r.delete(e),e=t}while(0===r?.size)},Oc=e=>{for(let t;t=e._$AM;e=t){let r=t._$AN;if(void 0===r)t._$AN=r=new Set;else if(r.has(e))break;r.add(e),$c(t)}};
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function Mc(e){void 0!==this._$AN?(Lc(this),this._$AM=e,Oc(this)):this._$AM=e}function Rc(e,t=!1,r=0){const i=this._$AH,n=this._$AN;if(void 0!==n&&0!==n.size)if(t)if(Array.isArray(i))for(let e=r;e<i.length;e++)Ic(i[e],!1),Lc(i[e]);else null!=i&&(Ic(i,!1),Lc(i));else Ic(this,e)}const $c=e=>{e.type==Ge&&(e._$AP??=Rc,e._$AQ??=Mc)};class Nc extends Ye{constructor(){super(...arguments),this._$AN=void 0}_$AT(e,t,r){super._$AT(e,t,r),Oc(this),this.isConnected=e._$AU}_$AO(e,t=!0){e!==this.isConnected&&(this.isConnected=e,e?this.reconnected?.():this.disconnected?.()),t&&(Ic(this,e),Lc(this))}setValue(e){if(xc(this._$Ct))this._$Ct._$AI(e,this);else{const t=[...this._$Ct._$AH];t[this._$Ci]=e,this._$Ct._$AI(t,this,0)}}disconnected(){}reconnected(){}}function Dc(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}let zc={async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null};function Bc(e){zc=e}const Fc=/[&<>"']/,Uc=new RegExp(Fc.source,"g"),Vc=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,jc=new RegExp(Vc.source,"g"),Gc={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Hc=e=>Gc[e];function Wc(e,t){if(t){if(Fc.test(e))return e.replace(Uc,Hc)}else if(Vc.test(e))return e.replace(jc,Hc);return e}const qc=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi;function Yc(e){return e.replace(qc,((e,t)=>"colon"===(t=t.toLowerCase())?":":"#"===t.charAt(0)?"x"===t.charAt(1)?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""))}const Jc=/(^|[^\[])\^/g;function Xc(e,t){let r="string"==typeof e?e:e.source;t=t||"";const i={replace:(e,t)=>{let n="string"==typeof t?t:t.source;return n=n.replace(Jc,"$1"),r=r.replace(e,n),i},getRegex:()=>new RegExp(r,t)};return i}function Zc(e){try{e=encodeURI(e).replace(/%25/g,"%")}catch(e){return null}return e}const Qc={exec:()=>null};function Kc(e,t){const r=e.replace(/\|/g,((e,t,r)=>{let i=!1,n=t;for(;--n>=0&&"\\"===r[n];)i=!i;return i?"|":" |"})),i=r.split(/ \|/);let n=0;if(i[0].trim()||i.shift(),i.length>0&&!i[i.length-1].trim()&&i.pop(),t)if(i.length>t)i.splice(t);else for(;i.length<t;)i.push("");for(;n<i.length;n++)i[n]=i[n].trim().replace(/\\\|/g,"|");return i}function ed(e,t,r){const i=e.length;if(0===i)return"";let n=0;for(;n<i;){const o=e.charAt(i-n-1);if(o!==t||r){if(o===t||!r)break;n++}else n++}return e.slice(0,i-n)}function td(e,t,r,i){const n=t.href,o=t.title?Wc(t.title):null,s=e[1].replace(/\\([\[\]])/g,"$1");if("!"!==e[0].charAt(0)){i.state.inLink=!0;const e={type:"link",raw:r,href:n,title:o,text:s,tokens:i.inlineTokens(s)};return i.state.inLink=!1,e}return{type:"image",raw:r,href:n,title:o,text:Wc(s)}}class rd{options;rules;lexer;constructor(e){this.options=e||zc}space(e){const t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){const t=this.rules.block.code.exec(e);if(t){const e=t[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?e:ed(e,"\n")}}}fences(e){const t=this.rules.block.fences.exec(e);if(t){const e=t[0],r=function(e,t){const r=e.match(/^(\s+)(?:```)/);if(null===r)return t;const i=r[1];return t.split("\n").map((e=>{const t=e.match(/^\s+/);if(null===t)return e;const[r]=t;return r.length>=i.length?e.slice(i.length):e})).join("\n")}(e,t[3]||"");return{type:"code",raw:e,lang:t[2]?t[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):t[2],text:r}}}heading(e){const t=this.rules.block.heading.exec(e);if(t){let e=t[2].trim();if(/#$/.test(e)){const t=ed(e,"#");this.options.pedantic?e=t.trim():t&&!/ $/.test(t)||(e=t.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:e,tokens:this.lexer.inline(e)}}}hr(e){const t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:t[0]}}blockquote(e){const t=this.rules.block.blockquote.exec(e);if(t){let e=t[0].replace(/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,"\n    $1");e=ed(e.replace(/^ *>[ \t]?/gm,""),"\n");const r=this.lexer.state.top;this.lexer.state.top=!0;const i=this.lexer.blockTokens(e);return this.lexer.state.top=r,{type:"blockquote",raw:t[0],tokens:i,text:e}}}list(e){let t=this.rules.block.list.exec(e);if(t){let r=t[1].trim();const i=r.length>1,n={type:"list",raw:"",ordered:i,start:i?+r.slice(0,-1):"",loose:!1,items:[]};r=i?`\\d{1,9}\\${r.slice(-1)}`:`\\${r}`,this.options.pedantic&&(r=i?r:"[*+-]");const o=new RegExp(`^( {0,3}${r})((?:[\t ][^\\n]*)?(?:\\n|$))`);let s="",a="",l=!1;for(;e;){let r=!1;if(!(t=o.exec(e)))break;if(this.rules.block.hr.test(e))break;s=t[0],e=e.substring(s.length);let i=t[2].split("\n",1)[0].replace(/^\t+/,(e=>" ".repeat(3*e.length))),c=e.split("\n",1)[0],d=0;this.options.pedantic?(d=2,a=i.trimStart()):(d=t[2].search(/[^ ]/),d=d>4?1:d,a=i.slice(d),d+=t[1].length);let h=!1;if(!i&&/^ *$/.test(c)&&(s+=c+"\n",e=e.substring(c.length+1),r=!0),!r){const t=new RegExp(`^ {0,${Math.min(3,d-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ \t][^\\n]*)?(?:\\n|$))`),r=new RegExp(`^ {0,${Math.min(3,d-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),n=new RegExp(`^ {0,${Math.min(3,d-1)}}(?:\`\`\`|~~~)`),o=new RegExp(`^ {0,${Math.min(3,d-1)}}#`);for(;e;){const l=e.split("\n",1)[0];if(c=l,this.options.pedantic&&(c=c.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),n.test(c))break;if(o.test(c))break;if(t.test(c))break;if(r.test(e))break;if(c.search(/[^ ]/)>=d||!c.trim())a+="\n"+c.slice(d);else{if(h)break;if(i.search(/[^ ]/)>=4)break;if(n.test(i))break;if(o.test(i))break;if(r.test(i))break;a+="\n"+c}h||c.trim()||(h=!0),s+=l+"\n",e=e.substring(l.length+1),i=c.slice(d)}}n.loose||(l?n.loose=!0:/\n *\n *$/.test(s)&&(l=!0));let u,p=null;this.options.gfm&&(p=/^\[[ xX]\] /.exec(a),p&&(u="[ ] "!==p[0],a=a.replace(/^\[[ xX]\] +/,""))),n.items.push({type:"list_item",raw:s,task:!!p,checked:u,loose:!1,text:a,tokens:[]}),n.raw+=s}n.items[n.items.length-1].raw=s.trimEnd(),n.items[n.items.length-1].text=a.trimEnd(),n.raw=n.raw.trimEnd();for(let e=0;e<n.items.length;e++)if(this.lexer.state.top=!1,n.items[e].tokens=this.lexer.blockTokens(n.items[e].text,[]),!n.loose){const t=n.items[e].tokens.filter((e=>"space"===e.type)),r=t.length>0&&t.some((e=>/\n.*\n/.test(e.raw)));n.loose=r}if(n.loose)for(let e=0;e<n.items.length;e++)n.items[e].loose=!0;return n}}html(e){const t=this.rules.block.html.exec(e);if(t){return{type:"html",block:!0,raw:t[0],pre:"pre"===t[1]||"script"===t[1]||"style"===t[1],text:t[0]}}}def(e){const t=this.rules.block.def.exec(e);if(t){const e=t[1].toLowerCase().replace(/\s+/g," "),r=t[2]?t[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",i=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):t[3];return{type:"def",tag:e,raw:t[0],href:r,title:i}}}table(e){const t=this.rules.block.table.exec(e);if(!t)return;if(!/[:|]/.test(t[2]))return;const r=Kc(t[1]),i=t[2].replace(/^\||\| *$/g,"").split("|"),n=t[3]&&t[3].trim()?t[3].replace(/\n[ \t]*$/,"").split("\n"):[],o={type:"table",raw:t[0],header:[],align:[],rows:[]};if(r.length===i.length){for(const e of i)/^ *-+: *$/.test(e)?o.align.push("right"):/^ *:-+: *$/.test(e)?o.align.push("center"):/^ *:-+ *$/.test(e)?o.align.push("left"):o.align.push(null);for(const e of r)o.header.push({text:e,tokens:this.lexer.inline(e)});for(const e of n)o.rows.push(Kc(e,o.header.length).map((e=>({text:e,tokens:this.lexer.inline(e)}))));return o}}lheading(e){const t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:"="===t[2].charAt(0)?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){const t=this.rules.block.paragraph.exec(e);if(t){const e="\n"===t[1].charAt(t[1].length-1)?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:e,tokens:this.lexer.inline(e)}}}text(e){const t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){const t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:Wc(t[1])}}tag(e){const t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&/^<a /i.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}link(e){const t=this.rules.inline.link.exec(e);if(t){const e=t[2].trim();if(!this.options.pedantic&&/^</.test(e)){if(!/>$/.test(e))return;const t=ed(e.slice(0,-1),"\\");if((e.length-t.length)%2==0)return}else{const e=function(e,t){if(-1===e.indexOf(t[1]))return-1;let r=0;for(let i=0;i<e.length;i++)if("\\"===e[i])i++;else if(e[i]===t[0])r++;else if(e[i]===t[1]&&(r--,r<0))return i;return-1}(t[2],"()");if(e>-1){const r=(0===t[0].indexOf("!")?5:4)+t[1].length+e;t[2]=t[2].substring(0,e),t[0]=t[0].substring(0,r).trim(),t[3]=""}}let r=t[2],i="";if(this.options.pedantic){const e=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(r);e&&(r=e[1],i=e[3])}else i=t[3]?t[3].slice(1,-1):"";return r=r.trim(),/^</.test(r)&&(r=this.options.pedantic&&!/>$/.test(e)?r.slice(1):r.slice(1,-1)),td(t,{href:r?r.replace(this.rules.inline.anyPunctuation,"$1"):r,title:i?i.replace(this.rules.inline.anyPunctuation,"$1"):i},t[0],this.lexer)}}reflink(e,t){let r;if((r=this.rules.inline.reflink.exec(e))||(r=this.rules.inline.nolink.exec(e))){const e=t[(r[2]||r[1]).replace(/\s+/g," ").toLowerCase()];if(!e){const e=r[0].charAt(0);return{type:"text",raw:e,text:e}}return td(r,e,r[0],this.lexer)}}emStrong(e,t,r=""){let i=this.rules.inline.emStrongLDelim.exec(e);if(!i)return;if(i[3]&&r.match(/[\p{L}\p{N}]/u))return;if(!(i[1]||i[2]||"")||!r||this.rules.inline.punctuation.exec(r)){const r=[...i[0]].length-1;let n,o,s=r,a=0;const l="*"===i[0][0]?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(l.lastIndex=0,t=t.slice(-1*e.length+r);null!=(i=l.exec(t));){if(n=i[1]||i[2]||i[3]||i[4]||i[5]||i[6],!n)continue;if(o=[...n].length,i[3]||i[4]){s+=o;continue}if((i[5]||i[6])&&r%3&&!((r+o)%3)){a+=o;continue}if(s-=o,s>0)continue;o=Math.min(o,o+s+a);const t=[...i[0]][0].length,l=e.slice(0,r+i.index+t+o);if(Math.min(r,o)%2){const e=l.slice(1,-1);return{type:"em",raw:l,text:e,tokens:this.lexer.inlineTokens(e)}}const c=l.slice(2,-2);return{type:"strong",raw:l,text:c,tokens:this.lexer.inlineTokens(c)}}}}codespan(e){const t=this.rules.inline.code.exec(e);if(t){let e=t[2].replace(/\n/g," ");const r=/[^ ]/.test(e),i=/^ /.test(e)&&/ $/.test(e);return r&&i&&(e=e.substring(1,e.length-1)),e=Wc(e,!0),{type:"codespan",raw:t[0],text:e}}}br(e){const t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){const t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e){const t=this.rules.inline.autolink.exec(e);if(t){let e,r;return"@"===t[2]?(e=Wc(t[1]),r="mailto:"+e):(e=Wc(t[1]),r=e),{type:"link",raw:t[0],text:e,href:r,tokens:[{type:"text",raw:e,text:e}]}}}url(e){let t;if(t=this.rules.inline.url.exec(e)){let e,r;if("@"===t[2])e=Wc(t[0]),r="mailto:"+e;else{let i;do{i=t[0],t[0]=this.rules.inline._backpedal.exec(t[0])?.[0]??""}while(i!==t[0]);e=Wc(t[0]),r="www."===t[1]?"http://"+t[0]:t[0]}return{type:"link",raw:t[0],text:e,href:r,tokens:[{type:"text",raw:e,text:e}]}}}inlineText(e){const t=this.rules.inline.text.exec(e);if(t){let e;return e=this.lexer.state.inRawBlock?t[0]:Wc(t[0]),{type:"text",raw:t[0],text:e}}}}const id=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,nd=/(?:[*+-]|\d{1,9}[.)])/,od=Xc(/^(?!bull |blockCode|fences|blockquote|heading|html)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,nd).replace(/blockCode/g,/ {4}/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).getRegex(),sd=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,ad=/(?!\s*\])(?:\\.|[^\[\]\\])+/,ld=Xc(/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/).replace("label",ad).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),cd=Xc(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,nd).getRegex(),dd="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",hd=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,ud=Xc("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))","i").replace("comment",hd).replace("tag",dd).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),pd=Xc(sd).replace("hr",id).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",dd).getRegex(),fd={blockquote:Xc(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",pd).getRegex(),code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,def:ld,fences:/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,hr:id,html:ud,lheading:od,list:cd,newline:/^(?: *(?:\n|$))+/,paragraph:pd,table:Qc,text:/^[^\n]+/},md=Xc("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",id).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",dd).getRegex(),gd={...fd,table:md,paragraph:Xc(sd).replace("hr",id).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",md).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",dd).getRegex()},vd={...fd,html:Xc("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",hd).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Qc,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:Xc(sd).replace("hr",id).replace("heading"," *#{1,6} *[^\n]").replace("lheading",od).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},bd=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,yd=/^( {2,}|\\)\n(?!\s*$)/,xd="\\p{P}\\p{S}",wd=Xc(/^((?![*_])[\spunctuation])/,"u").replace(/punctuation/g,xd).getRegex(),_d=Xc(/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,"u").replace(/punct/g,xd).getRegex(),kd=Xc("^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)[punct](\\*+)(?=[\\s]|$)|[^punct\\s](\\*+)(?!\\*)(?=[punct\\s]|$)|(?!\\*)[punct\\s](\\*+)(?=[^punct\\s])|[\\s](\\*+)(?!\\*)(?=[punct])|(?!\\*)[punct](\\*+)(?!\\*)(?=[punct])|[^punct\\s](\\*+)(?=[^punct\\s])","gu").replace(/punct/g,xd).getRegex(),Cd=Xc("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\\s]|$)|[^punct\\s](_+)(?!_)(?=[punct\\s]|$)|(?!_)[punct\\s](_+)(?=[^punct\\s])|[\\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])","gu").replace(/punct/g,xd).getRegex(),Sd=Xc(/\\([punct])/,"gu").replace(/punct/g,xd).getRegex(),Ad=Xc(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),Pd=Xc(hd).replace("(?:--\x3e|$)","--\x3e").getRegex(),Td=Xc("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",Pd).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),Ed=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,Id=Xc(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",Ed).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),Ld=Xc(/^!?\[(label)\]\[(ref)\]/).replace("label",Ed).replace("ref",ad).getRegex(),Od=Xc(/^!?\[(ref)\](?:\[\])?/).replace("ref",ad).getRegex(),Md={_backpedal:Qc,anyPunctuation:Sd,autolink:Ad,blockSkip:/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g,br:yd,code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,del:Qc,emStrongLDelim:_d,emStrongRDelimAst:kd,emStrongRDelimUnd:Cd,escape:bd,link:Id,nolink:Od,punctuation:wd,reflink:Ld,reflinkSearch:Xc("reflink|nolink(?!\\()","g").replace("reflink",Ld).replace("nolink",Od).getRegex(),tag:Td,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,url:Qc},Rd={...Md,link:Xc(/^!?\[(label)\]\((.*?)\)/).replace("label",Ed).getRegex(),reflink:Xc(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Ed).getRegex()},$d={...Md,escape:Xc(bd).replace("])","~|])").getRegex(),url:Xc(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},Nd={...$d,br:Xc(yd).replace("{2,}","*").getRegex(),text:Xc($d.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},Dd={normal:fd,gfm:gd,pedantic:vd},zd={normal:Md,gfm:$d,breaks:Nd,pedantic:Rd};class Bd{tokens;options;state;tokenizer;inlineQueue;constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||zc,this.options.tokenizer=this.options.tokenizer||new rd,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const t={block:Dd.normal,inline:zd.normal};this.options.pedantic?(t.block=Dd.pedantic,t.inline=zd.pedantic):this.options.gfm&&(t.block=Dd.gfm,this.options.breaks?t.inline=zd.breaks:t.inline=zd.gfm),this.tokenizer.rules=t}static get rules(){return{block:Dd,inline:zd}}static lex(e,t){return new Bd(t).lex(e)}static lexInline(e,t){return new Bd(t).inlineTokens(e)}lex(e){e=e.replace(/\r\n|\r/g,"\n"),this.blockTokens(e,this.tokens);for(let e=0;e<this.inlineQueue.length;e++){const t=this.inlineQueue[e];this.inlineTokens(t.src,t.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,t=[]){let r,i,n,o;for(e=this.options.pedantic?e.replace(/\t/g,"    ").replace(/^ +$/gm,""):e.replace(/^( *)(\t+)/gm,((e,t,r)=>t+"    ".repeat(r.length)));e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some((i=>!!(r=i.call({lexer:this},e,t))&&(e=e.substring(r.raw.length),t.push(r),!0)))))if(r=this.tokenizer.space(e))e=e.substring(r.raw.length),1===r.raw.length&&t.length>0?t[t.length-1].raw+="\n":t.push(r);else if(r=this.tokenizer.code(e))e=e.substring(r.raw.length),i=t[t.length-1],!i||"paragraph"!==i.type&&"text"!==i.type?t.push(r):(i.raw+="\n"+r.raw,i.text+="\n"+r.text,this.inlineQueue[this.inlineQueue.length-1].src=i.text);else if(r=this.tokenizer.fences(e))e=e.substring(r.raw.length),t.push(r);else if(r=this.tokenizer.heading(e))e=e.substring(r.raw.length),t.push(r);else if(r=this.tokenizer.hr(e))e=e.substring(r.raw.length),t.push(r);else if(r=this.tokenizer.blockquote(e))e=e.substring(r.raw.length),t.push(r);else if(r=this.tokenizer.list(e))e=e.substring(r.raw.length),t.push(r);else if(r=this.tokenizer.html(e))e=e.substring(r.raw.length),t.push(r);else if(r=this.tokenizer.def(e))e=e.substring(r.raw.length),i=t[t.length-1],!i||"paragraph"!==i.type&&"text"!==i.type?this.tokens.links[r.tag]||(this.tokens.links[r.tag]={href:r.href,title:r.title}):(i.raw+="\n"+r.raw,i.text+="\n"+r.raw,this.inlineQueue[this.inlineQueue.length-1].src=i.text);else if(r=this.tokenizer.table(e))e=e.substring(r.raw.length),t.push(r);else if(r=this.tokenizer.lheading(e))e=e.substring(r.raw.length),t.push(r);else{if(n=e,this.options.extensions&&this.options.extensions.startBlock){let t=1/0;const r=e.slice(1);let i;this.options.extensions.startBlock.forEach((e=>{i=e.call({lexer:this},r),"number"==typeof i&&i>=0&&(t=Math.min(t,i))})),t<1/0&&t>=0&&(n=e.substring(0,t+1))}if(this.state.top&&(r=this.tokenizer.paragraph(n)))i=t[t.length-1],o&&"paragraph"===i.type?(i.raw+="\n"+r.raw,i.text+="\n"+r.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):t.push(r),o=n.length!==e.length,e=e.substring(r.raw.length);else if(r=this.tokenizer.text(e))e=e.substring(r.raw.length),i=t[t.length-1],i&&"text"===i.type?(i.raw+="\n"+r.raw,i.text+="\n"+r.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):t.push(r);else if(e){const t="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(t);break}throw new Error(t)}}return this.state.top=!0,t}inline(e,t=[]){return this.inlineQueue.push({src:e,tokens:t}),t}inlineTokens(e,t=[]){let r,i,n,o,s,a,l=e;if(this.tokens.links){const e=Object.keys(this.tokens.links);if(e.length>0)for(;null!=(o=this.tokenizer.rules.inline.reflinkSearch.exec(l));)e.includes(o[0].slice(o[0].lastIndexOf("[")+1,-1))&&(l=l.slice(0,o.index)+"["+"a".repeat(o[0].length-2)+"]"+l.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;null!=(o=this.tokenizer.rules.inline.blockSkip.exec(l));)l=l.slice(0,o.index)+"["+"a".repeat(o[0].length-2)+"]"+l.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;null!=(o=this.tokenizer.rules.inline.anyPunctuation.exec(l));)l=l.slice(0,o.index)+"++"+l.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;e;)if(s||(a=""),s=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some((i=>!!(r=i.call({lexer:this},e,t))&&(e=e.substring(r.raw.length),t.push(r),!0)))))if(r=this.tokenizer.escape(e))e=e.substring(r.raw.length),t.push(r);else if(r=this.tokenizer.tag(e))e=e.substring(r.raw.length),i=t[t.length-1],i&&"text"===r.type&&"text"===i.type?(i.raw+=r.raw,i.text+=r.text):t.push(r);else if(r=this.tokenizer.link(e))e=e.substring(r.raw.length),t.push(r);else if(r=this.tokenizer.reflink(e,this.tokens.links))e=e.substring(r.raw.length),i=t[t.length-1],i&&"text"===r.type&&"text"===i.type?(i.raw+=r.raw,i.text+=r.text):t.push(r);else if(r=this.tokenizer.emStrong(e,l,a))e=e.substring(r.raw.length),t.push(r);else if(r=this.tokenizer.codespan(e))e=e.substring(r.raw.length),t.push(r);else if(r=this.tokenizer.br(e))e=e.substring(r.raw.length),t.push(r);else if(r=this.tokenizer.del(e))e=e.substring(r.raw.length),t.push(r);else if(r=this.tokenizer.autolink(e))e=e.substring(r.raw.length),t.push(r);else if(this.state.inLink||!(r=this.tokenizer.url(e))){if(n=e,this.options.extensions&&this.options.extensions.startInline){let t=1/0;const r=e.slice(1);let i;this.options.extensions.startInline.forEach((e=>{i=e.call({lexer:this},r),"number"==typeof i&&i>=0&&(t=Math.min(t,i))})),t<1/0&&t>=0&&(n=e.substring(0,t+1))}if(r=this.tokenizer.inlineText(n))e=e.substring(r.raw.length),"_"!==r.raw.slice(-1)&&(a=r.raw.slice(-1)),s=!0,i=t[t.length-1],i&&"text"===i.type?(i.raw+=r.raw,i.text+=r.text):t.push(r);else if(e){const t="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(t);break}throw new Error(t)}}else e=e.substring(r.raw.length),t.push(r);return t}}class Fd{options;constructor(e){this.options=e||zc}code(e,t,r){const i=(t||"").match(/^\S*/)?.[0];return e=e.replace(/\n$/,"")+"\n",i?'<pre><code class="language-'+Wc(i)+'">'+(r?e:Wc(e,!0))+"</code></pre>\n":"<pre><code>"+(r?e:Wc(e,!0))+"</code></pre>\n"}blockquote(e){return`<blockquote>\n${e}</blockquote>\n`}html(e,t){return e}heading(e,t,r){return`<h${t}>${e}</h${t}>\n`}hr(){return"<hr>\n"}list(e,t,r){const i=t?"ol":"ul";return"<"+i+(t&&1!==r?' start="'+r+'"':"")+">\n"+e+"</"+i+">\n"}listitem(e,t,r){return`<li>${e}</li>\n`}checkbox(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph(e){return`<p>${e}</p>\n`}table(e,t){return t&&(t=`<tbody>${t}</tbody>`),"<table>\n<thead>\n"+e+"</thead>\n"+t+"</table>\n"}tablerow(e){return`<tr>\n${e}</tr>\n`}tablecell(e,t){const r=t.header?"th":"td";return(t.align?`<${r} align="${t.align}">`:`<${r}>`)+e+`</${r}>\n`}strong(e){return`<strong>${e}</strong>`}em(e){return`<em>${e}</em>`}codespan(e){return`<code>${e}</code>`}br(){return"<br>"}del(e){return`<del>${e}</del>`}link(e,t,r){const i=Zc(e);if(null===i)return r;let n='<a href="'+(e=i)+'"';return t&&(n+=' title="'+t+'"'),n+=">"+r+"</a>",n}image(e,t,r){const i=Zc(e);if(null===i)return r;let n=`<img src="${e=i}" alt="${r}"`;return t&&(n+=` title="${t}"`),n+=">",n}text(e){return e}}class Ud{strong(e){return e}em(e){return e}codespan(e){return e}del(e){return e}html(e){return e}text(e){return e}link(e,t,r){return""+r}image(e,t,r){return""+r}br(){return""}}class Vd{options;renderer;textRenderer;constructor(e){this.options=e||zc,this.options.renderer=this.options.renderer||new Fd,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new Ud}static parse(e,t){return new Vd(t).parse(e)}static parseInline(e,t){return new Vd(t).parseInline(e)}parse(e,t=!0){let r="";for(let i=0;i<e.length;i++){const n=e[i];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[n.type]){const e=n,t=this.options.extensions.renderers[e.type].call({parser:this},e);if(!1!==t||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(e.type)){r+=t||"";continue}}switch(n.type){case"space":continue;case"hr":r+=this.renderer.hr();continue;case"heading":{const e=n;r+=this.renderer.heading(this.parseInline(e.tokens),e.depth,Yc(this.parseInline(e.tokens,this.textRenderer)));continue}case"code":{const e=n;r+=this.renderer.code(e.text,e.lang,!!e.escaped);continue}case"table":{const e=n;let t="",i="";for(let t=0;t<e.header.length;t++)i+=this.renderer.tablecell(this.parseInline(e.header[t].tokens),{header:!0,align:e.align[t]});t+=this.renderer.tablerow(i);let o="";for(let t=0;t<e.rows.length;t++){const r=e.rows[t];i="";for(let t=0;t<r.length;t++)i+=this.renderer.tablecell(this.parseInline(r[t].tokens),{header:!1,align:e.align[t]});o+=this.renderer.tablerow(i)}r+=this.renderer.table(t,o);continue}case"blockquote":{const e=n,t=this.parse(e.tokens);r+=this.renderer.blockquote(t);continue}case"list":{const e=n,t=e.ordered,i=e.start,o=e.loose;let s="";for(let t=0;t<e.items.length;t++){const r=e.items[t],i=r.checked,n=r.task;let a="";if(r.task){const e=this.renderer.checkbox(!!i);o?r.tokens.length>0&&"paragraph"===r.tokens[0].type?(r.tokens[0].text=e+" "+r.tokens[0].text,r.tokens[0].tokens&&r.tokens[0].tokens.length>0&&"text"===r.tokens[0].tokens[0].type&&(r.tokens[0].tokens[0].text=e+" "+r.tokens[0].tokens[0].text)):r.tokens.unshift({type:"text",text:e+" "}):a+=e+" "}a+=this.parse(r.tokens,o),s+=this.renderer.listitem(a,n,!!i)}r+=this.renderer.list(s,t,i);continue}case"html":{const e=n;r+=this.renderer.html(e.text,e.block);continue}case"paragraph":{const e=n;r+=this.renderer.paragraph(this.parseInline(e.tokens));continue}case"text":{let o=n,s=o.tokens?this.parseInline(o.tokens):o.text;for(;i+1<e.length&&"text"===e[i+1].type;)o=e[++i],s+="\n"+(o.tokens?this.parseInline(o.tokens):o.text);r+=t?this.renderer.paragraph(s):s;continue}default:{const e='Token with "'+n.type+'" type was not found.';if(this.options.silent)return console.error(e),"";throw new Error(e)}}}return r}parseInline(e,t){t=t||this.renderer;let r="";for(let i=0;i<e.length;i++){const n=e[i];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[n.type]){const e=this.options.extensions.renderers[n.type].call({parser:this},n);if(!1!==e||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(n.type)){r+=e||"";continue}}switch(n.type){case"escape":{const e=n;r+=t.text(e.text);break}case"html":{const e=n;r+=t.html(e.text);break}case"link":{const e=n;r+=t.link(e.href,e.title,this.parseInline(e.tokens,t));break}case"image":{const e=n;r+=t.image(e.href,e.title,e.text);break}case"strong":{const e=n;r+=t.strong(this.parseInline(e.tokens,t));break}case"em":{const e=n;r+=t.em(this.parseInline(e.tokens,t));break}case"codespan":{const e=n;r+=t.codespan(e.text);break}case"br":r+=t.br();break;case"del":{const e=n;r+=t.del(this.parseInline(e.tokens,t));break}case"text":{const e=n;r+=t.text(e.text);break}default:{const e='Token with "'+n.type+'" type was not found.';if(this.options.silent)return console.error(e),"";throw new Error(e)}}}return r}}class jd{options;constructor(e){this.options=e||zc}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}}const Gd=new class{defaults={async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null};options=this.setOptions;parse=this.#e(Bd.lex,Vd.parse);parseInline=this.#e(Bd.lexInline,Vd.parseInline);Parser=Vd;Renderer=Fd;TextRenderer=Ud;Lexer=Bd;Tokenizer=rd;Hooks=jd;constructor(...e){this.use(...e)}walkTokens(e,t){let r=[];for(const i of e)switch(r=r.concat(t.call(this,i)),i.type){case"table":{const e=i;for(const i of e.header)r=r.concat(this.walkTokens(i.tokens,t));for(const i of e.rows)for(const e of i)r=r.concat(this.walkTokens(e.tokens,t));break}case"list":{const e=i;r=r.concat(this.walkTokens(e.items,t));break}default:{const e=i;this.defaults.extensions?.childTokens?.[e.type]?this.defaults.extensions.childTokens[e.type].forEach((i=>{const n=e[i].flat(1/0);r=r.concat(this.walkTokens(n,t))})):e.tokens&&(r=r.concat(this.walkTokens(e.tokens,t)))}}return r}use(...e){const t=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach((e=>{const r={...e};if(r.async=this.defaults.async||r.async||!1,e.extensions&&(e.extensions.forEach((e=>{if(!e.name)throw new Error("extension name required");if("renderer"in e){const r=t.renderers[e.name];t.renderers[e.name]=r?function(...t){let i=e.renderer.apply(this,t);return!1===i&&(i=r.apply(this,t)),i}:e.renderer}if("tokenizer"in e){if(!e.level||"block"!==e.level&&"inline"!==e.level)throw new Error("extension level must be 'block' or 'inline'");const r=t[e.level];r?r.unshift(e.tokenizer):t[e.level]=[e.tokenizer],e.start&&("block"===e.level?t.startBlock?t.startBlock.push(e.start):t.startBlock=[e.start]:"inline"===e.level&&(t.startInline?t.startInline.push(e.start):t.startInline=[e.start]))}"childTokens"in e&&e.childTokens&&(t.childTokens[e.name]=e.childTokens)})),r.extensions=t),e.renderer){const t=this.defaults.renderer||new Fd(this.defaults);for(const r in e.renderer){if(!(r in t))throw new Error(`renderer '${r}' does not exist`);if("options"===r)continue;const i=r,n=e.renderer[i],o=t[i];t[i]=(...e)=>{let r=n.apply(t,e);return!1===r&&(r=o.apply(t,e)),r||""}}r.renderer=t}if(e.tokenizer){const t=this.defaults.tokenizer||new rd(this.defaults);for(const r in e.tokenizer){if(!(r in t))throw new Error(`tokenizer '${r}' does not exist`);if(["options","rules","lexer"].includes(r))continue;const i=r,n=e.tokenizer[i],o=t[i];t[i]=(...e)=>{let r=n.apply(t,e);return!1===r&&(r=o.apply(t,e)),r}}r.tokenizer=t}if(e.hooks){const t=this.defaults.hooks||new jd;for(const r in e.hooks){if(!(r in t))throw new Error(`hook '${r}' does not exist`);if("options"===r)continue;const i=r,n=e.hooks[i],o=t[i];jd.passThroughHooks.has(r)?t[i]=e=>{if(this.defaults.async)return Promise.resolve(n.call(t,e)).then((e=>o.call(t,e)));const r=n.call(t,e);return o.call(t,r)}:t[i]=(...e)=>{let r=n.apply(t,e);return!1===r&&(r=o.apply(t,e)),r}}r.hooks=t}if(e.walkTokens){const t=this.defaults.walkTokens,i=e.walkTokens;r.walkTokens=function(e){let r=[];return r.push(i.call(this,e)),t&&(r=r.concat(t.call(this,e))),r}}this.defaults={...this.defaults,...r}})),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,t){return Bd.lex(e,t??this.defaults)}parser(e,t){return Vd.parse(e,t??this.defaults)}#e(e,t){return(r,i)=>{const n={...i},o={...this.defaults,...n};!0===this.defaults.async&&!1===n.async&&(o.silent||console.warn("marked(): The async option was set to true by an extension. The async: false option sent to parse will be ignored."),o.async=!0);const s=this.#t(!!o.silent,!!o.async);if(null==r)return s(new Error("marked(): input parameter is undefined or null"));if("string"!=typeof r)return s(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(r)+", string expected"));if(o.hooks&&(o.hooks.options=o),o.async)return Promise.resolve(o.hooks?o.hooks.preprocess(r):r).then((t=>e(t,o))).then((e=>o.hooks?o.hooks.processAllTokens(e):e)).then((e=>o.walkTokens?Promise.all(this.walkTokens(e,o.walkTokens)).then((()=>e)):e)).then((e=>t(e,o))).then((e=>o.hooks?o.hooks.postprocess(e):e)).catch(s);try{o.hooks&&(r=o.hooks.preprocess(r));let i=e(r,o);o.hooks&&(i=o.hooks.processAllTokens(i)),o.walkTokens&&this.walkTokens(i,o.walkTokens);let n=t(i,o);return o.hooks&&(n=o.hooks.postprocess(n)),n}catch(e){return s(e)}}}#t(e,t){return r=>{if(r.message+="\nPlease report this to https://github.com/markedjs/marked.",e){const e="<p>An error occurred:</p><pre>"+Wc(r.message+"",!0)+"</pre>";return t?Promise.resolve(e):e}if(t)return Promise.reject(r);throw r}}};function Hd(e,t){return Gd.parse(e,t)}Hd.options=Hd.setOptions=function(e){return Gd.setOptions(e),Hd.defaults=Gd.defaults,Bc(Hd.defaults),Hd},Hd.getDefaults=Dc,Hd.defaults=zc,Hd.use=function(...e){return Gd.use(...e),Hd.defaults=Gd.defaults,Bc(Hd.defaults),Hd},Hd.walkTokens=function(e,t){return Gd.walkTokens(e,t)},Hd.parseInline=Gd.parseInline,Hd.Parser=Vd,Hd.parser=Vd.parse,Hd.Renderer=Fd,Hd.TextRenderer=Ud,Hd.Lexer=Bd,Hd.lexer=Bd.lex,Hd.Tokenizer=rd,Hd.Hooks=jd,Hd.parse=Hd,Hd.options,Hd.setOptions,Hd.use,Hd.walkTokens,Hd.parseInline,Vd.parse,Bd.lex,Hd.setOptions({gfm:!0});class Wd extends Nc{constructor(){super(...arguments),this.inJsonBlock=!1,this.hasCompletedJsonParsing=!1}handleJsonBlocks(e,t){let r,i;if(e){if(r=e.indexOf("```json"),this.inJsonBlock){if(this.inJsonBlock)if(i=e.indexOf("```",r+6),-1!==i){let n=e.substring(r+7,i).trim();this.hasCompletedJsonParsing||t.fire("jsonLoadingEnd",{jsonContent:n}),this.hasCompletedJsonParsing=!0,e=e.substring(0,r)}else t.fire("jsonPartialContent",{jsonContent:e.substring(6).trim()}),e=e.substring(0,r)}else-1!==r&&(this.inJsonBlock=!0,t.fire("jsonLoadingStart"),e=e.substring(r));return e}}sanitizeHTMLWithOptions(e,t){return e}closeCodeBlockIfNeeded(e){return(e.match(new RegExp("```","g"))||[]).length%2!=0&&(e+="\n```"),e}removeCitations(e){return e.replace(/<code>(.*?)<\/code>/g,((e,t)=>`<code>${t.replace(/<span class="postCitation">(\d+)<\/span>/g,"")}</code>`))}render(e,t){const r=Object.assign(Wd.defaultOptions,t??{});t&&t.handleJsonBlocks&&t.targetElement&&e&&(e=this.handleJsonBlocks(e,t.targetElement)),e&&(e=this.closeCodeBlockIfNeeded(e)),e||(e=""),new Promise(((t,r)=>{Hd.parse(e,((e,i)=>{if(e)return r(e);t(`\n            <style>\n            \n          table {\n            border-collapse: collapse;\n            border-radius: 5px;\n            background-color: var(--md-sys-color-primary-container);\n            color: var(--md-sys-color-on-primary-container);\n            margin: 16px;\n            width: 100%;\n          }\n\n          img {\n            width: 200px;\n            height: 113px;\n            object-fit: cover;\n          }\n\n\n          ol {\n            margin: 8px;\n          }\n\n          @media (max-width: 800px) {\n            ol {\n              padding: 0px;\n            }\n          }\n\n          th, td {\n            padding: 8px;\n            text-align: left;\n            vertical-align: top;\n          }\n\n          th {\n            font-weight: bold;\n            background-color: var(--md-sys-color-primary-container);\n            color: var(--md-sys-color-on-primary-container);\n          }\n\n          tr:nth-child(even) {\n          }\n\n          tr:hover {\n          }\n\n          p {\n            margin-top: 8px;\n            margin-bottom: 8px;\n          }\n\n          pre {\n            white-space: pre-wrap;\n            white-space: -moz-pre-wrap;\n          }\n\n          a {\n            color: var(--md-sys-color-primary);\n            font-weight: bold;\n          }\n        \n          </style>\n          ${i}\n        `)}))})).then((e=>(e=e.replace(/<a href="/g,'<a target="_blank" href="'),r.skipSanitization?Promise.resolve(e):Promise.resolve(this.sanitizeHTMLWithOptions(e,r))))).then((e=>{let t=Ec(e);this.setValue(t)}));const i=r.skipSanitization?r.loadingHTML:this.sanitizeHTMLWithOptions(r.loadingHTML,r);return Ec(i)}}Wd.defaultOptions={includeImages:!1,includeCodeBlockClassNames:!1,loadingHTML:"<p>Loading...</p>",skipSanitization:!1,handleJsonBlocks:!1,targetElement:void 0};const qd=qe(Wd);
/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Yd extends wo{constructor(){super(...arguments),this.buffer=0}renderIndicator(){const e={transform:`scaleX(${100*(this.indeterminate?1:this.value/this.max)}%)`},t=this.buffer??0,r=t>0,i={transform:`scaleX(${100*(this.indeterminate||!r?1:t/this.max)}%)`},n=this.indeterminate||!r||t>=this.max||this.value>=this.max;return V` <div class="dots" ?hidden="${n}"></div> <div class="inactive-track" style="${_i(i)}"></div> <div class="bar primary-bar" style="${_i(e)}"> <div class="bar-inner"></div> </div> <div class="bar secondary-bar"> <div class="bar-inner"></div> </div> `}}we([ue({type:Number})],Yd.prototype,"buffer",void 0);
/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
const Jd=o`:host{--_active-indicator-color:var(--md-linear-progress-active-indicator-color, var(--md-sys-color-primary, #6750a4));--_active-indicator-height:var(--md-linear-progress-active-indicator-height, 4px);--_four-color-active-indicator-four-color:var(--md-linear-progress-four-color-active-indicator-four-color, var(--md-sys-color-tertiary-container, #ffd8e4));--_four-color-active-indicator-one-color:var(--md-linear-progress-four-color-active-indicator-one-color, var(--md-sys-color-primary, #6750a4));--_four-color-active-indicator-three-color:var(--md-linear-progress-four-color-active-indicator-three-color, var(--md-sys-color-tertiary, #7d5260));--_four-color-active-indicator-two-color:var(--md-linear-progress-four-color-active-indicator-two-color, var(--md-sys-color-primary-container, #eaddff));--_track-color:var(--md-linear-progress-track-color, var(--md-sys-color-surface-container-highest, #e6e0e9));--_track-height:var(--md-linear-progress-track-height, 4px);--_track-shape:var(--md-linear-progress-track-shape, var(--md-sys-shape-corner-none, 0px));border-radius:var(--_track-shape);display:flex;position:relative;min-width:80px;height:var(--_track-height);content-visibility:auto;contain:strict}.bar,.bar-inner,.dots,.inactive-track,.progress{position:absolute}.progress{direction:ltr;inset:0;border-radius:inherit;overflow:hidden;display:flex;align-items:center}.bar{animation:none;width:100%;height:var(--_active-indicator-height);transform-origin:left center;transition:transform 250ms cubic-bezier(.4,0,.6,1)}.secondary-bar{display:none}.bar-inner{inset:0;animation:none;background:var(--_active-indicator-color)}.inactive-track{background:var(--_track-color);inset:0;transition:transform 250ms cubic-bezier(.4,0,.6,1);transform-origin:left center}.dots{inset:0;animation:linear infinite 250ms;animation-name:buffering;background-color:var(--_track-color);background-repeat:repeat-x;-webkit-mask-image:url("data:image/svg+xml,%3Csvg version='1.1' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 5 2' preserveAspectRatio='xMinYMin slice'%3E%3Ccircle cx='1' cy='1' r='1'/%3E%3C/svg%3E");mask-image:url("data:image/svg+xml,%3Csvg version='1.1' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 5 2' preserveAspectRatio='xMinYMin slice'%3E%3Ccircle cx='1' cy='1' r='1'/%3E%3C/svg%3E");z-index:-1}.dots[hidden]{display:none}.indeterminate .bar{transition:none}.indeterminate .primary-bar{inset-inline-start:-145.167%}.indeterminate .secondary-bar{inset-inline-start:-54.8889%;display:block}.indeterminate .primary-bar{animation:linear infinite 2s;animation-name:primary-indeterminate-translate}.indeterminate .primary-bar>.bar-inner{animation:linear infinite 2s primary-indeterminate-scale}.indeterminate.four-color .primary-bar>.bar-inner{animation-name:primary-indeterminate-scale,four-color;animation-duration:2s,4s}.indeterminate .secondary-bar{animation:linear infinite 2s;animation-name:secondary-indeterminate-translate}.indeterminate .secondary-bar>.bar-inner{animation:linear infinite 2s secondary-indeterminate-scale}.indeterminate.four-color .secondary-bar>.bar-inner{animation-name:secondary-indeterminate-scale,four-color;animation-duration:2s,4s}:host(:dir(rtl)){transform:scale(-1)}@keyframes primary-indeterminate-scale{0%{transform:scaleX(.08)}36.65%{animation-timing-function:cubic-bezier(.334731,.12482,.785844,1);transform:scaleX(.08)}69.15%{animation-timing-function:cubic-bezier(.06,.11,.6,1);transform:scaleX(.661479)}100%{transform:scaleX(.08)}}@keyframes secondary-indeterminate-scale{0%{animation-timing-function:cubic-bezier(.205028,.057051,.57661,.453971);transform:scaleX(.08)}19.15%{animation-timing-function:cubic-bezier(.152313,.196432,.648374,1.00432);transform:scaleX(.457104)}44.15%{animation-timing-function:cubic-bezier(.257759,-.003163,.211762,1.38179);transform:scaleX(.72796)}100%{transform:scaleX(.08)}}@keyframes buffering{0%{transform:translateX(calc(var(--_track-height)/ 2 * 5))}}@keyframes primary-indeterminate-translate{0%{transform:translateX(0)}20%{animation-timing-function:cubic-bezier(.5,0,.701732,.495819);transform:translateX(0)}59.15%{animation-timing-function:cubic-bezier(.302435,.381352,.55,.956352);transform:translateX(83.6714%)}100%{transform:translateX(200.611%)}}@keyframes secondary-indeterminate-translate{0%{animation-timing-function:cubic-bezier(.15,0,.515058,.409685);transform:translateX(0)}25%{animation-timing-function:cubic-bezier(.31033,.284058,.8,.733712);transform:translateX(37.6519%)}48.35%{animation-timing-function:cubic-bezier(.4,.627035,.6,.902026);transform:translateX(84.3862%)}100%{transform:translateX(160.278%)}}@keyframes four-color{0%{background:var(--_four-color-active-indicator-one-color)}15%{background:var(--_four-color-active-indicator-one-color)}25%{background:var(--_four-color-active-indicator-two-color)}40%{background:var(--_four-color-active-indicator-two-color)}50%{background:var(--_four-color-active-indicator-three-color)}65%{background:var(--_four-color-active-indicator-three-color)}75%{background:var(--_four-color-active-indicator-four-color)}90%{background:var(--_four-color-active-indicator-four-color)}100%{background:var(--_four-color-active-indicator-one-color)}}@media(forced-colors:active){:host{outline:1px solid CanvasText}.bar-inner,.dots{background-color:CanvasText}}`
/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */;let Xd=class extends Yd{};Xd.styles=[Jd],Xd=we([ce("md-linear-progress")],Xd);
/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
class Zd extends ae{constructor(){super(...arguments),this.inset=!1,this.insetStart=!1,this.insetEnd=!1}}we([ue({type:Boolean,reflect:!0})],Zd.prototype,"inset",void 0),we([ue({type:Boolean,reflect:!0,attribute:"inset-start"})],Zd.prototype,"insetStart",void 0),we([ue({type:Boolean,reflect:!0,attribute:"inset-end"})],Zd.prototype,"insetEnd",void 0);
/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
const Qd=o`:host{box-sizing:border-box;color:var(--md-divider-color,var(--md-sys-color-outline-variant,#cac4d0));display:flex;height:var(--md-divider-thickness,1px);width:100%}:host([inset-start]),:host([inset]){padding-inline-start:16px}:host([inset-end]),:host([inset]){padding-inline-end:16px}:host::before{background:currentColor;content:"";height:100%;width:100%}@media(forced-colors:active){:host::before{background:CanvasText}}`
/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */;let Kd=class extends Zd{};Kd.styles=[Qd],Kd=we([ce("md-divider")],Kd);
/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
const eh=Symbol("isFocusable"),th=Symbol("privateIsFocusable"),rh=Symbol("externalTabIndex"),ih=Symbol("isUpdatingTabIndex"),nh=Symbol("updateTabIndex");function oh(e){var t,r,i;class n extends e{constructor(){super(...arguments),this[t]=!0,this[r]=null,this[i]=!1}get[eh](){return this[th]}set[eh](e){this[eh]!==e&&(this[th]=e,this[nh]())}connectedCallback(){super.connectedCallback(),this[nh]()}attributeChangedCallback(e,t,r){if("tabindex"===e){if(this.requestUpdate("tabIndex",Number(t??-1)),!this[ih])return this.hasAttribute("tabindex")?void(this[rh]=this.tabIndex):(this[rh]=null,void this[nh]())}else super.attributeChangedCallback(e,t,r)}[(t=th,r=rh,i=ih,nh)](){const e=this[eh]?0:-1,t=this[rh]??e;this[ih]=!0,this.tabIndex=t,this[ih]=!1}}return we([ue({noAccessor:!0})],n.prototype,"tabIndex",void 0),n}
/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var sh;const ah=Symbol("indicator"),lh=Symbol("animateIndicator"),ch=oh(ae);class dh extends ch{get selected(){return this.active}set selected(e){this.active=e}constructor(){super(),this.isTab=!0,this.active=!1,this.hasIcon=!1,this.iconOnly=!1,this.fullWidthIndicator=!1,this.internals=this.attachInternals(),this.internals.role="tab",this.addEventListener("keydown",this.handleKeydown.bind(this))}render(){const e=V`<div class="indicator"></div>`;return V`<div class="button" role="presentation" @click="${this.handleContentClick}"> <md-focus-ring part="focus-ring" inward .control="${this}"></md-focus-ring> <md-elevation part="elevation"></md-elevation> <md-ripple .control="${this}"></md-ripple> <div class="content ${Je(this.getContentClasses())}" role="presentation"> <slot name="icon" @slotchange="${this.handleIconSlotChange}"></slot> <slot @slotchange="${this.handleSlotChange}"></slot> ${this.fullWidthIndicator?G:e} </div> ${this.fullWidthIndicator?e:G} </div>`}getContentClasses(){return{"has-icon":this.hasIcon,"has-label":!this.iconOnly}}updated(){this.internals.ariaSelected=String(this.active)}async handleKeydown(e){await 0,e.defaultPrevented||"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),this.click())}handleContentClick(e){e.stopPropagation(),this.click()}[(sh=ah,lh)](e){if(!this[ah])return;this[ah].getAnimations().forEach((e=>{e.cancel()}));const t=this.getKeyframes(e);null!==t&&this[ah].animate(t,{duration:250,easing:Ze})}getKeyframes(e){const t=window.matchMedia("(prefers-reduced-motion: reduce)").matches;if(!this.active)return t?[{opacity:1},{transform:"none"}]:null;const r={},i=e[ah]?.getBoundingClientRect()??{},n=i.left,o=i.width,s=this[ah].getBoundingClientRect(),a=s.left,l=o/s.width;return t||void 0===n||void 0===a||isNaN(l)?r.opacity=0:r.transform=`translateX(${(n-a).toFixed(4)}px) scaleX(${l.toFixed(4)})`,[r,{transform:"none"}]}handleSlotChange(){this.iconOnly=!1;for(const e of this.assignedDefaultNodes){const t=e.nodeType===Node.TEXT_NODE&&!!e.wholeText.match(/\S/);if(e.nodeType===Node.ELEMENT_NODE||t)return}this.iconOnly=!0}handleIconSlotChange(){this.hasIcon=this.assignedIcons.length>0}}we([ue({type:Boolean,reflect:!0,attribute:"md-tab"})],dh.prototype,"isTab",void 0),we([ue({type:Boolean,reflect:!0})],dh.prototype,"active",void 0),we([ue({type:Boolean})],dh.prototype,"selected",null),we([ue({type:Boolean,attribute:"has-icon"})],dh.prototype,"hasIcon",void 0),we([ue({type:Boolean,attribute:"icon-only"})],dh.prototype,"iconOnly",void 0),we([me(".indicator")],dh.prototype,sh,void 0),we([pe()],dh.prototype,"fullWidthIndicator",void 0),we([ye({flatten:!0})],dh.prototype,"assignedDefaultNodes",void 0),we([be({slot:"icon",flatten:!0})],dh.prototype,"assignedIcons",void 0);
/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
class hh extends ae{get activeTab(){return this.tabs.find((e=>e.active))??null}set activeTab(e){e&&this.activateTab(e)}get activeTabIndex(){return this.tabs.findIndex((e=>e.active))}set activeTabIndex(e){const t=()=>{const t=this.tabs[e];t&&this.activateTab(t)};this.slotElement?t():this.updateComplete.then(t)}get focusedTab(){return this.tabs.find((e=>e.matches(":focus-within")))}constructor(){super(),this.autoActivate=!1,this.internals=this.attachInternals(),this.internals.role="tablist",this.addEventListener("keydown",this.handleKeydown.bind(this)),this.addEventListener("keyup",this.handleKeyup.bind(this)),this.addEventListener("focusout",this.handleFocusout.bind(this))}async scrollToTab(e){await this.updateComplete;const{tabs:t}=this;if(e??(e=this.activeTab),!e||!t.includes(e)||!this.tabsScrollerElement)return;for(const e of this.tabs)await e.updateComplete;const r=e.offsetLeft,i=e.offsetWidth,n=this.scrollLeft,o=r-48,s=r+i-this.offsetWidth+48,a=Math.min(o,Math.max(s,n)),l=this.focusedTab?"auto":"instant";this.tabsScrollerElement.scrollTo({behavior:l,top:0,left:a})}render(){return V` <div class="tabs"> <slot @slotchange="${this.handleSlotChange}" @click="${this.handleTabClick}"></slot> </div> <md-divider part="divider"></md-divider> `}async handleTabClick(e){const t=e.target;var r;
/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */(await 0,e.defaultPrevented||!((r=t)instanceof HTMLElement&&r.hasAttribute("md-tab"))||t.active)||this.activateTab(t)}activateTab(e){const{tabs:t}=this,r=this.activeTab;if(t.includes(e)&&r!==e){for(const r of t)r.active=r===e;if(r){if(!this.dispatchEvent(new Event("change",{bubbles:!0,cancelable:!0}))){for(const e of t)e.active=e===r;return}e[lh](r)}this.updateFocusableTab(e),this.scrollToTab(e)}}updateFocusableTab(e){for(const t of this.tabs)t.tabIndex=t===e?0:-1}async handleKeydown(e){await 0;const t="ArrowLeft"===e.key,r="ArrowRight"===e.key,i="Home"===e.key,n="End"===e.key;if(e.defaultPrevented||!t&&!r&&!i&&!n)return;const{tabs:o}=this;if(o.length<2)return;let s;if(e.preventDefault(),i||n)s=i?0:o.length-1;else{const e="rtl"===getComputedStyle(this).direction?t:r,{focusedTab:i}=this;if(i){const t=this.tabs.indexOf(i);s=e?t+1:t-1,s>=o.length?s=0:s<0&&(s=o.length-1)}else s=e?0:o.length-1}const a=o[s];a.focus(),this.autoActivate?this.activateTab(a):this.updateFocusableTab(a)}handleKeyup(){this.scrollToTab(this.focusedTab??this.activeTab)}handleFocusout(){if(this.matches(":focus-within"))return;const{activeTab:e}=this;e&&this.updateFocusableTab(e)}handleSlotChange(){const e=this.tabs[0];!this.activeTab&&e&&this.activateTab(e),this.scrollToTab(this.activeTab)}}we([be({flatten:!0,selector:"[md-tab]"})],hh.prototype,"tabs",void 0),we([ue({type:Number,attribute:"active-tab-index"})],hh.prototype,"activeTabIndex",null),we([ue({type:Boolean,attribute:"auto-activate"})],hh.prototype,"autoActivate",void 0),we([me(".tabs")],hh.prototype,"tabsScrollerElement",void 0),we([me("slot")],hh.prototype,"slotElement",void 0);const uh=o`:host{box-sizing:border-box;display:flex;flex-direction:column;overflow:auto;scroll-behavior:smooth;scrollbar-width:none;position:relative}:host([hidden]){display:none}:host::-webkit-scrollbar{display:none}.tabs{align-items:end;display:flex;height:100%;overflow:inherit;scroll-behavior:inherit;scrollbar-width:inherit;justify-content:space-between;width:100%}::slotted(*){flex:1}::slotted([active]){z-index:1}`;
/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let ph=class extends hh{};ph.styles=[uh],ph=we([ce("md-tabs")],ph);
/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
class fh extends dh{constructor(){super(...arguments),this.inlineIcon=!1}getContentClasses(){return{...super.getContentClasses(),stacked:!this.inlineIcon}}}we([ue({type:Boolean,attribute:"inline-icon"})],fh.prototype,"inlineIcon",void 0);
/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
const mh=o`:host{--_active-indicator-color:var(--md-primary-tab-active-indicator-color, var(--md-sys-color-primary, #6750a4));--_active-indicator-height:var(--md-primary-tab-active-indicator-height, 3px);--_active-indicator-shape:var(--md-primary-tab-active-indicator-shape, 3px 3px 0px 0px);--_active-hover-state-layer-color:var(--md-primary-tab-active-hover-state-layer-color, var(--md-sys-color-primary, #6750a4));--_active-hover-state-layer-opacity:var(--md-primary-tab-active-hover-state-layer-opacity, 0.08);--_active-pressed-state-layer-color:var(--md-primary-tab-active-pressed-state-layer-color, var(--md-sys-color-primary, #6750a4));--_active-pressed-state-layer-opacity:var(--md-primary-tab-active-pressed-state-layer-opacity, 0.12);--_container-color:var(--md-primary-tab-container-color, var(--md-sys-color-surface, #fef7ff));--_container-elevation:var(--md-primary-tab-container-elevation, 0);--_container-height:var(--md-primary-tab-container-height, 48px);--_with-icon-and-label-text-container-height:var(--md-primary-tab-with-icon-and-label-text-container-height, 64px);--_hover-state-layer-color:var(--md-primary-tab-hover-state-layer-color, var(--md-sys-color-on-surface, #1d1b20));--_hover-state-layer-opacity:var(--md-primary-tab-hover-state-layer-opacity, 0.08);--_pressed-state-layer-color:var(--md-primary-tab-pressed-state-layer-color, var(--md-sys-color-primary, #6750a4));--_pressed-state-layer-opacity:var(--md-primary-tab-pressed-state-layer-opacity, 0.12);--_active-focus-icon-color:var(--md-primary-tab-active-focus-icon-color, var(--md-sys-color-primary, #6750a4));--_active-hover-icon-color:var(--md-primary-tab-active-hover-icon-color, var(--md-sys-color-primary, #6750a4));--_active-icon-color:var(--md-primary-tab-active-icon-color, var(--md-sys-color-primary, #6750a4));--_active-pressed-icon-color:var(--md-primary-tab-active-pressed-icon-color, var(--md-sys-color-primary, #6750a4));--_icon-size:var(--md-primary-tab-icon-size, 24px);--_focus-icon-color:var(--md-primary-tab-focus-icon-color, var(--md-sys-color-on-surface, #1d1b20));--_hover-icon-color:var(--md-primary-tab-hover-icon-color, var(--md-sys-color-on-surface, #1d1b20));--_icon-color:var(--md-primary-tab-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_pressed-icon-color:var(--md-primary-tab-pressed-icon-color, var(--md-sys-color-on-surface, #1d1b20));--_label-text-font:var(--md-primary-tab-label-text-font, var(--md-sys-typescale-title-small-font, var(--md-ref-typeface-plain, Roboto)));--_label-text-line-height:var(--md-primary-tab-label-text-line-height, var(--md-sys-typescale-title-small-line-height, 1.25rem));--_label-text-size:var(--md-primary-tab-label-text-size, var(--md-sys-typescale-title-small-size, 0.875rem));--_label-text-weight:var(--md-primary-tab-label-text-weight, var(--md-sys-typescale-title-small-weight, var(--md-ref-typeface-weight-medium, 500)));--_active-focus-label-text-color:var(--md-primary-tab-active-focus-label-text-color, var(--md-sys-color-primary, #6750a4));--_active-hover-label-text-color:var(--md-primary-tab-active-hover-label-text-color, var(--md-sys-color-primary, #6750a4));--_active-label-text-color:var(--md-primary-tab-active-label-text-color, var(--md-sys-color-primary, #6750a4));--_active-pressed-label-text-color:var(--md-primary-tab-active-pressed-label-text-color, var(--md-sys-color-primary, #6750a4));--_focus-label-text-color:var(--md-primary-tab-focus-label-text-color, var(--md-sys-color-on-surface, #1d1b20));--_hover-label-text-color:var(--md-primary-tab-hover-label-text-color, var(--md-sys-color-on-surface, #1d1b20));--_label-text-color:var(--md-primary-tab-label-text-color, var(--md-sys-color-on-surface-variant, #49454f));--_pressed-label-text-color:var(--md-primary-tab-pressed-label-text-color, var(--md-sys-color-on-surface, #1d1b20));--_container-shape-start-start:var(--md-primary-tab-container-shape-start-start, var(--md-primary-tab-container-shape, var(--md-sys-shape-corner-none, 0px)));--_container-shape-start-end:var(--md-primary-tab-container-shape-start-end, var(--md-primary-tab-container-shape, var(--md-sys-shape-corner-none, 0px)));--_container-shape-end-end:var(--md-primary-tab-container-shape-end-end, var(--md-primary-tab-container-shape, var(--md-sys-shape-corner-none, 0px)));--_container-shape-end-start:var(--md-primary-tab-container-shape-end-start, var(--md-primary-tab-container-shape, var(--md-sys-shape-corner-none, 0px)))}.content.stacked{flex-direction:column;gap:2px}.content.stacked.has-icon.has-label{height:var(--_with-icon-and-label-text-container-height)}`
/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */,gh=o`:host{display:inline-flex;align-items:center;justify-content:center;outline:0;padding:0 16px;position:relative;-webkit-tap-highlight-color:transparent;vertical-align:middle;user-select:none;font-family:var(--_label-text-font);font-size:var(--_label-text-size);line-height:var(--_label-text-line-height);font-weight:var(--_label-text-weight);color:var(--_label-text-color);z-index:0;--md-ripple-hover-color:var(--_hover-state-layer-color);--md-ripple-hover-opacity:var(--_hover-state-layer-opacity);--md-ripple-pressed-color:var(--_pressed-state-layer-color);--md-ripple-pressed-opacity:var(--_pressed-state-layer-opacity);--md-elevation-level:var(--_container-elevation)}md-focus-ring{--md-focus-ring-shape:8px}:host([active]) md-focus-ring{margin-bottom:calc(var(--_active-indicator-height) + 1px)}.button::before{background:var(--_container-color);content:"";inset:0;position:absolute;z-index:-1}.button::before,md-elevation,md-ripple{border-start-start-radius:var(--_container-shape-start-start);border-start-end-radius:var(--_container-shape-start-end);border-end-end-radius:var(--_container-shape-end-end);border-end-start-radius:var(--_container-shape-end-start)}.content{position:relative;box-sizing:border-box;display:inline-flex;flex-direction:row;align-items:center;justify-content:center;height:var(--_container-height);gap:8px}.indicator{position:absolute;box-sizing:border-box;z-index:-1;transform-origin:bottom left;background:var(--_active-indicator-color);border-radius:var(--_active-indicator-shape);height:var(--_active-indicator-height);inset:auto 0 0 0;opacity:0}::slotted([slot=icon]){display:inline-flex;position:relative;writing-mode:horizontal-tb;fill:currentColor;color:var(--_icon-color);font-size:var(--_icon-size);width:var(--_icon-size);height:var(--_icon-size)}:host(:hover){color:var(--_hover-label-text-color);cursor:pointer}:host(:hover) ::slotted([slot=icon]){color:var(--_hover-icon-color)}:host(:focus){color:var(--_focus-label-text-color)}:host(:focus) ::slotted([slot=icon]){color:var(--_focus-icon-color)}:host(:active){color:var(--_pressed-label-text-color)}:host(:active) ::slotted([slot=icon]){color:var(--_pressed-icon-color)}:host([active]) .indicator{opacity:1}:host([active]){color:var(--_active-label-text-color);--md-ripple-hover-color:var(--_active-hover-state-layer-color);--md-ripple-hover-opacity:var(--_active-hover-state-layer-opacity);--md-ripple-pressed-color:var(--_active-pressed-state-layer-color);--md-ripple-pressed-opacity:var(--_active-pressed-state-layer-opacity)}:host([active]) ::slotted([slot=icon]){color:var(--_active-icon-color)}:host([active]:hover){color:var(--_active-hover-label-text-color)}:host([active]:hover) ::slotted([slot=icon]){color:var(--_active-hover-icon-color)}:host([active]:focus){color:var(--_active-focus-label-text-color)}:host([active]:focus) ::slotted([slot=icon]){color:var(--_active-focus-icon-color)}:host([active]:active){color:var(--_active-pressed-label-text-color)}:host([active]:active) ::slotted([slot=icon]){color:var(--_active-pressed-icon-color)}::slotted(*),:host{white-space:nowrap}@media(forced-colors:active){.indicator{background:CanvasText}}`;
/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
let vh=class extends fh{};vh.styles=[gh,mh],vh=we([ce("md-primary-tab")],vh);
/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
class bh extends ae{constructor(){super(...arguments),this.disabled=!1,this.error=!1,this.focused=!1,this.label="",this.noAsterisk=!1,this.populated=!1,this.required=!1,this.resizable=!1,this.supportingText="",this.errorText="",this.count=-1,this.max=-1,this.hasStart=!1,this.hasEnd=!1,this.isAnimating=!1,this.refreshErrorAlert=!1,this.disableTransitions=!1}get counterText(){const e=this.count??-1,t=this.max??-1;return e<0||t<=0?"":`${e} / ${t}`}get supportingOrErrorText(){return this.error&&this.errorText?this.errorText:this.supportingText}reannounceError(){this.refreshErrorAlert=!0}update(e){e.has("disabled")&&void 0!==e.get("disabled")&&(this.disableTransitions=!0),this.disabled&&this.focused&&(e.set("focused",!0),this.focused=!1),this.animateLabelIfNeeded({wasFocused:e.get("focused"),wasPopulated:e.get("populated")}),super.update(e)}render(){const e=this.renderLabel(!0),t=this.renderLabel(!1),r=this.renderOutline?.(e),i={disabled:this.disabled,"disable-transitions":this.disableTransitions,error:this.error&&!this.disabled,focused:this.focused,"with-start":this.hasStart,"with-end":this.hasEnd,populated:this.populated,resizable:this.resizable,required:this.required,"no-label":!this.label};return V` <div class="field ${Je(i)}"> <div class="container-overflow"> ${this.renderBackground?.()} ${this.renderIndicator?.()} ${r} <div class="container"> <div class="start"> <slot name="start"></slot> </div> <div class="middle"> <div class="label-wrapper"> ${t} ${r?G:e} </div> <div class="content"> <slot></slot> </div> </div> <div class="end"> <slot name="end"></slot> </div> </div> </div> ${this.renderSupportingText()} </div> `}updated(e){(e.has("supportingText")||e.has("errorText")||e.has("count")||e.has("max"))&&this.updateSlottedAriaDescribedBy(),this.refreshErrorAlert&&requestAnimationFrame((()=>{this.refreshErrorAlert=!1})),this.disableTransitions&&requestAnimationFrame((()=>{this.disableTransitions=!1}))}renderSupportingText(){const{supportingOrErrorText:e,counterText:t}=this;if(!e&&!t)return G;const r=V`<span>${e}</span>`,i=t?V`<span class="counter">${t}</span>`:G,n=this.error&&this.errorText&&!this.refreshErrorAlert;return V` <div class="supporting-text" role="${n?"alert":G}">${r}${i}</div> <slot name="aria-describedby" @slotchange="${this.updateSlottedAriaDescribedBy}"></slot> `}updateSlottedAriaDescribedBy(){for(const e of this.slottedAriaDescribedBy)se(V`${this.supportingOrErrorText} ${this.counterText}`,e),e.setAttribute("hidden","")}renderLabel(e){if(!this.label)return G;let t;t=e?this.focused||this.populated||this.isAnimating:!this.focused&&!this.populated&&!this.isAnimating;const r={hidden:!t,floating:e,resting:!e},i=`${this.label}${this.required&&!this.noAsterisk?"*":""}`;return V` <span class="label ${Je(r)}" aria-hidden="${!t}">${i}</span> `}animateLabelIfNeeded({wasFocused:e,wasPopulated:t}){if(!this.label)return;e??(e=this.focused),t??(t=this.populated);(e||t)!==(this.focused||this.populated)&&(this.isAnimating=!0,this.labelAnimation?.cancel(),this.labelAnimation=this.floatingLabelEl?.animate(this.getLabelKeyframes(),{duration:150,easing:Xe}),this.labelAnimation?.addEventListener("finish",(()=>{this.isAnimating=!1})))}getLabelKeyframes(){const{floatingLabelEl:e,restingLabelEl:t}=this;if(!e||!t)return[];const{x:r,y:i,height:n}=e.getBoundingClientRect(),{x:o,y:s,height:a}=t.getBoundingClientRect(),l=e.scrollWidth,c=t.scrollWidth,d=c/l,h=`translateX(${o-r}px) translateY(${s-i+Math.round((a-n*d)/2)}px) scale(${d})`,u="translateX(0) translateY(0) scale(1)",p=t.clientWidth,f=c>p?p/d+"px":"";return this.focused||this.populated?[{transform:h,width:f},{transform:u,width:f}]:[{transform:u,width:f},{transform:h,width:f}]}getSurfacePositionClientRect(){return this.containerEl.getBoundingClientRect()}}we([ue({type:Boolean})],bh.prototype,"disabled",void 0),we([ue({type:Boolean})],bh.prototype,"error",void 0),we([ue({type:Boolean})],bh.prototype,"focused",void 0),we([ue()],bh.prototype,"label",void 0),we([ue({type:Boolean,attribute:"no-asterisk"})],bh.prototype,"noAsterisk",void 0),we([ue({type:Boolean})],bh.prototype,"populated",void 0),we([ue({type:Boolean})],bh.prototype,"required",void 0),we([ue({type:Boolean})],bh.prototype,"resizable",void 0),we([ue({attribute:"supporting-text"})],bh.prototype,"supportingText",void 0),we([ue({attribute:"error-text"})],bh.prototype,"errorText",void 0),we([ue({type:Number})],bh.prototype,"count",void 0),we([ue({type:Number})],bh.prototype,"max",void 0),we([ue({type:Boolean,attribute:"has-start"})],bh.prototype,"hasStart",void 0),we([ue({type:Boolean,attribute:"has-end"})],bh.prototype,"hasEnd",void 0),we([be({slot:"aria-describedby"})],bh.prototype,"slottedAriaDescribedBy",void 0),we([pe()],bh.prototype,"isAnimating",void 0),we([pe()],bh.prototype,"refreshErrorAlert",void 0),we([pe()],bh.prototype,"disableTransitions",void 0),we([me(".label.floating")],bh.prototype,"floatingLabelEl",void 0),we([me(".label.resting")],bh.prototype,"restingLabelEl",void 0),we([me(".container")],bh.prototype,"containerEl",void 0);
/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
class yh extends bh{renderOutline(e){return V` <div class="outline"> <div class="outline-start"></div> <div class="outline-notch"> <div class="outline-panel-inactive"></div> <div class="outline-panel-active"></div> <div class="outline-label">${e}</div> </div> <div class="outline-end"></div> </div> `}}
/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const xh=o`@layer styles{:host{--_bottom-space: var(--md-outlined-field-bottom-space, 16px);--_content-color: var(--md-outlined-field-content-color, var(--md-sys-color-on-surface, #1d1b20));--_content-font: var(--md-outlined-field-content-font, var(--md-sys-typescale-body-large-font, var(--md-ref-typeface-plain, Roboto)));--_content-line-height: var(--md-outlined-field-content-line-height, var(--md-sys-typescale-body-large-line-height, 1.5rem));--_content-size: var(--md-outlined-field-content-size, var(--md-sys-typescale-body-large-size, 1rem));--_content-weight: var(--md-outlined-field-content-weight, var(--md-sys-typescale-body-large-weight, var(--md-ref-typeface-weight-regular, 400)));--_disabled-content-color: var(--md-outlined-field-disabled-content-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-content-opacity: var(--md-outlined-field-disabled-content-opacity, 0.38);--_disabled-label-text-color: var(--md-outlined-field-disabled-label-text-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-label-text-opacity: var(--md-outlined-field-disabled-label-text-opacity, 0.38);--_disabled-leading-content-color: var(--md-outlined-field-disabled-leading-content-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-leading-content-opacity: var(--md-outlined-field-disabled-leading-content-opacity, 0.38);--_disabled-outline-color: var(--md-outlined-field-disabled-outline-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-outline-opacity: var(--md-outlined-field-disabled-outline-opacity, 0.12);--_disabled-outline-width: var(--md-outlined-field-disabled-outline-width, 1px);--_disabled-supporting-text-color: var(--md-outlined-field-disabled-supporting-text-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-supporting-text-opacity: var(--md-outlined-field-disabled-supporting-text-opacity, 0.38);--_disabled-trailing-content-color: var(--md-outlined-field-disabled-trailing-content-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-trailing-content-opacity: var(--md-outlined-field-disabled-trailing-content-opacity, 0.38);--_error-content-color: var(--md-outlined-field-error-content-color, var(--md-sys-color-on-surface, #1d1b20));--_error-focus-content-color: var(--md-outlined-field-error-focus-content-color, var(--md-sys-color-on-surface, #1d1b20));--_error-focus-label-text-color: var(--md-outlined-field-error-focus-label-text-color, var(--md-sys-color-error, #b3261e));--_error-focus-leading-content-color: var(--md-outlined-field-error-focus-leading-content-color, var(--md-sys-color-on-surface-variant, #49454f));--_error-focus-outline-color: var(--md-outlined-field-error-focus-outline-color, var(--md-sys-color-error, #b3261e));--_error-focus-supporting-text-color: var(--md-outlined-field-error-focus-supporting-text-color, var(--md-sys-color-error, #b3261e));--_error-focus-trailing-content-color: var(--md-outlined-field-error-focus-trailing-content-color, var(--md-sys-color-error, #b3261e));--_error-hover-content-color: var(--md-outlined-field-error-hover-content-color, var(--md-sys-color-on-surface, #1d1b20));--_error-hover-label-text-color: var(--md-outlined-field-error-hover-label-text-color, var(--md-sys-color-on-error-container, #410e0b));--_error-hover-leading-content-color: var(--md-outlined-field-error-hover-leading-content-color, var(--md-sys-color-on-surface-variant, #49454f));--_error-hover-outline-color: var(--md-outlined-field-error-hover-outline-color, var(--md-sys-color-on-error-container, #410e0b));--_error-hover-supporting-text-color: var(--md-outlined-field-error-hover-supporting-text-color, var(--md-sys-color-error, #b3261e));--_error-hover-trailing-content-color: var(--md-outlined-field-error-hover-trailing-content-color, var(--md-sys-color-on-error-container, #410e0b));--_error-label-text-color: var(--md-outlined-field-error-label-text-color, var(--md-sys-color-error, #b3261e));--_error-leading-content-color: var(--md-outlined-field-error-leading-content-color, var(--md-sys-color-on-surface-variant, #49454f));--_error-outline-color: var(--md-outlined-field-error-outline-color, var(--md-sys-color-error, #b3261e));--_error-supporting-text-color: var(--md-outlined-field-error-supporting-text-color, var(--md-sys-color-error, #b3261e));--_error-trailing-content-color: var(--md-outlined-field-error-trailing-content-color, var(--md-sys-color-error, #b3261e));--_focus-content-color: var(--md-outlined-field-focus-content-color, var(--md-sys-color-on-surface, #1d1b20));--_focus-label-text-color: var(--md-outlined-field-focus-label-text-color, var(--md-sys-color-primary, #6750a4));--_focus-leading-content-color: var(--md-outlined-field-focus-leading-content-color, var(--md-sys-color-on-surface-variant, #49454f));--_focus-outline-color: var(--md-outlined-field-focus-outline-color, var(--md-sys-color-primary, #6750a4));--_focus-outline-width: var(--md-outlined-field-focus-outline-width, 3px);--_focus-supporting-text-color: var(--md-outlined-field-focus-supporting-text-color, var(--md-sys-color-on-surface-variant, #49454f));--_focus-trailing-content-color: var(--md-outlined-field-focus-trailing-content-color, var(--md-sys-color-on-surface-variant, #49454f));--_hover-content-color: var(--md-outlined-field-hover-content-color, var(--md-sys-color-on-surface, #1d1b20));--_hover-label-text-color: var(--md-outlined-field-hover-label-text-color, var(--md-sys-color-on-surface, #1d1b20));--_hover-leading-content-color: var(--md-outlined-field-hover-leading-content-color, var(--md-sys-color-on-surface-variant, #49454f));--_hover-outline-color: var(--md-outlined-field-hover-outline-color, var(--md-sys-color-on-surface, #1d1b20));--_hover-outline-width: var(--md-outlined-field-hover-outline-width, 1px);--_hover-supporting-text-color: var(--md-outlined-field-hover-supporting-text-color, var(--md-sys-color-on-surface-variant, #49454f));--_hover-trailing-content-color: var(--md-outlined-field-hover-trailing-content-color, var(--md-sys-color-on-surface-variant, #49454f));--_label-text-color: var(--md-outlined-field-label-text-color, var(--md-sys-color-on-surface-variant, #49454f));--_label-text-font: var(--md-outlined-field-label-text-font, var(--md-sys-typescale-body-large-font, var(--md-ref-typeface-plain, Roboto)));--_label-text-line-height: var(--md-outlined-field-label-text-line-height, var(--md-sys-typescale-body-large-line-height, 1.5rem));--_label-text-padding-bottom: var(--md-outlined-field-label-text-padding-bottom, 8px);--_label-text-populated-line-height: var(--md-outlined-field-label-text-populated-line-height, var(--md-sys-typescale-body-small-line-height, 1rem));--_label-text-populated-size: var(--md-outlined-field-label-text-populated-size, var(--md-sys-typescale-body-small-size, 0.75rem));--_label-text-size: var(--md-outlined-field-label-text-size, var(--md-sys-typescale-body-large-size, 1rem));--_label-text-weight: var(--md-outlined-field-label-text-weight, var(--md-sys-typescale-body-large-weight, var(--md-ref-typeface-weight-regular, 400)));--_leading-content-color: var(--md-outlined-field-leading-content-color, var(--md-sys-color-on-surface-variant, #49454f));--_leading-space: var(--md-outlined-field-leading-space, 16px);--_outline-color: var(--md-outlined-field-outline-color, var(--md-sys-color-outline, #79747e));--_outline-label-padding: var(--md-outlined-field-outline-label-padding, 4px);--_outline-width: var(--md-outlined-field-outline-width, 1px);--_supporting-text-color: var(--md-outlined-field-supporting-text-color, var(--md-sys-color-on-surface-variant, #49454f));--_supporting-text-font: var(--md-outlined-field-supporting-text-font, var(--md-sys-typescale-body-small-font, var(--md-ref-typeface-plain, Roboto)));--_supporting-text-leading-space: var(--md-outlined-field-supporting-text-leading-space, 16px);--_supporting-text-line-height: var(--md-outlined-field-supporting-text-line-height, var(--md-sys-typescale-body-small-line-height, 1rem));--_supporting-text-size: var(--md-outlined-field-supporting-text-size, var(--md-sys-typescale-body-small-size, 0.75rem));--_supporting-text-top-space: var(--md-outlined-field-supporting-text-top-space, 4px);--_supporting-text-trailing-space: var(--md-outlined-field-supporting-text-trailing-space, 16px);--_supporting-text-weight: var(--md-outlined-field-supporting-text-weight, var(--md-sys-typescale-body-small-weight, var(--md-ref-typeface-weight-regular, 400)));--_top-space: var(--md-outlined-field-top-space, 16px);--_trailing-content-color: var(--md-outlined-field-trailing-content-color, var(--md-sys-color-on-surface-variant, #49454f));--_trailing-space: var(--md-outlined-field-trailing-space, 16px);--_container-shape-start-start: var(--md-outlined-field-container-shape-start-start, var(--md-outlined-field-container-shape, var(--md-sys-shape-corner-extra-small, 4px)));--_container-shape-start-end: var(--md-outlined-field-container-shape-start-end, var(--md-outlined-field-container-shape, var(--md-sys-shape-corner-extra-small, 4px)));--_container-shape-end-end: var(--md-outlined-field-container-shape-end-end, var(--md-outlined-field-container-shape, var(--md-sys-shape-corner-extra-small, 4px)));--_container-shape-end-start: var(--md-outlined-field-container-shape-end-start, var(--md-outlined-field-container-shape, var(--md-sys-shape-corner-extra-small, 4px)))}.outline{border-color:var(--_outline-color);border-radius:inherit;display:flex;pointer-events:none;height:100%;position:absolute;width:100%;z-index:1}.outline-start::before,.outline-start::after,.outline-panel-inactive::before,.outline-panel-inactive::after,.outline-panel-active::before,.outline-panel-active::after,.outline-end::before,.outline-end::after{border:inherit;content:"";inset:0;position:absolute}.outline-start,.outline-end{border:inherit;border-radius:inherit;box-sizing:border-box;position:relative}.outline-start::before,.outline-start::after,.outline-end::before,.outline-end::after{border-bottom-style:solid;border-top-style:solid}.outline-start::after,.outline-end::after{opacity:0;transition:opacity 150ms cubic-bezier(0.2, 0, 0, 1)}.focused .outline-start::after,.focused .outline-end::after{opacity:1}.outline-start::before,.outline-start::after{border-inline-start-style:solid;border-inline-end-style:none;border-start-start-radius:inherit;border-start-end-radius:0;border-end-start-radius:inherit;border-end-end-radius:0;margin-inline-end:var(--_outline-label-padding)}.outline-end{flex-grow:1;margin-inline-start:calc(-1*var(--_outline-label-padding))}.outline-end::before,.outline-end::after{border-inline-start-style:none;border-inline-end-style:solid;border-start-start-radius:0;border-start-end-radius:inherit;border-end-start-radius:0;border-end-end-radius:inherit}.outline-notch{align-items:flex-start;border:inherit;display:flex;margin-inline-start:calc(-1*var(--_outline-label-padding));margin-inline-end:var(--_outline-label-padding);max-width:calc(100% - var(--_leading-space) - var(--_trailing-space));padding:0 var(--_outline-label-padding);position:relative}.no-label .outline-notch{display:none}.outline-panel-inactive,.outline-panel-active{border:inherit;border-bottom-style:solid;inset:0;position:absolute}.outline-panel-inactive::before,.outline-panel-inactive::after,.outline-panel-active::before,.outline-panel-active::after{border-top-style:solid;border-bottom:none;bottom:auto;transform:scaleX(1);transition:transform 150ms cubic-bezier(0.2, 0, 0, 1)}.outline-panel-inactive::before,.outline-panel-active::before{right:50%;transform-origin:top left}.outline-panel-inactive::after,.outline-panel-active::after{left:50%;transform-origin:top right}.populated .outline-panel-inactive::before,.populated .outline-panel-inactive::after,.populated .outline-panel-active::before,.populated .outline-panel-active::after,.focused .outline-panel-inactive::before,.focused .outline-panel-inactive::after,.focused .outline-panel-active::before,.focused .outline-panel-active::after{transform:scaleX(0)}.outline-panel-active{opacity:0;transition:opacity 150ms cubic-bezier(0.2, 0, 0, 1)}.focused .outline-panel-active{opacity:1}.outline-label{display:flex;max-width:100%;transform:translateY(calc(-100% + var(--_label-text-padding-bottom)))}.outline-start,.field:not(.with-start) .content ::slotted(*){padding-inline-start:max(var(--_leading-space),max(var(--_container-shape-start-start),var(--_container-shape-end-start)) + var(--_outline-label-padding))}.field:not(.with-start) .label-wrapper{margin-inline-start:max(var(--_leading-space),max(var(--_container-shape-start-start),var(--_container-shape-end-start)) + var(--_outline-label-padding))}.field:not(.with-end) .content ::slotted(*){padding-inline-end:max(var(--_trailing-space),max(var(--_container-shape-start-end),var(--_container-shape-end-end)))}.field:not(.with-end) .label-wrapper{margin-inline-end:max(var(--_trailing-space),max(var(--_container-shape-start-end),var(--_container-shape-end-end)))}.outline-start::before,.outline-end::before,.outline-panel-inactive,.outline-panel-inactive::before,.outline-panel-inactive::after{border-width:var(--_outline-width)}:hover .outline{border-color:var(--_hover-outline-color);color:var(--_hover-outline-color)}:hover .outline-start::before,:hover .outline-end::before,:hover .outline-panel-inactive,:hover .outline-panel-inactive::before,:hover .outline-panel-inactive::after{border-width:var(--_hover-outline-width)}.focused .outline{border-color:var(--_focus-outline-color);color:var(--_focus-outline-color)}.outline-start::after,.outline-end::after,.outline-panel-active,.outline-panel-active::before,.outline-panel-active::after{border-width:var(--_focus-outline-width)}.disabled .outline{border-color:var(--_disabled-outline-color);color:var(--_disabled-outline-color)}.disabled .outline-start,.disabled .outline-end,.disabled .outline-panel-inactive{opacity:var(--_disabled-outline-opacity)}.disabled .outline-start::before,.disabled .outline-end::before,.disabled .outline-panel-inactive,.disabled .outline-panel-inactive::before,.disabled .outline-panel-inactive::after{border-width:var(--_disabled-outline-width)}.error .outline{border-color:var(--_error-outline-color);color:var(--_error-outline-color)}.error:hover .outline{border-color:var(--_error-hover-outline-color);color:var(--_error-hover-outline-color)}.error.focused .outline{border-color:var(--_error-focus-outline-color);color:var(--_error-focus-outline-color)}.resizable .container{bottom:var(--_focus-outline-width);inset-inline-end:var(--_focus-outline-width);clip-path:inset(var(--_focus-outline-width) 0 0 var(--_focus-outline-width))}.resizable .container>*{top:var(--_focus-outline-width);inset-inline-start:var(--_focus-outline-width)}.resizable .container:dir(rtl){clip-path:inset(var(--_focus-outline-width) var(--_focus-outline-width) 0 0)}}@layer hcm{@media(forced-colors: active){.disabled .outline{border-color:GrayText;color:GrayText}.disabled :is(.outline-start,.outline-end,.outline-panel-inactive){opacity:1}}}
`
/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */,wh=o`:host{display:inline-flex;resize:both}.field{display:flex;flex:1;flex-direction:column;writing-mode:horizontal-tb;max-width:100%}.container-overflow{border-start-start-radius:var(--_container-shape-start-start);border-start-end-radius:var(--_container-shape-start-end);border-end-end-radius:var(--_container-shape-end-end);border-end-start-radius:var(--_container-shape-end-start);display:flex;height:100%;position:relative}.container{align-items:center;border-radius:inherit;display:flex;flex:1;max-height:100%;min-height:100%;min-width:min-content;position:relative}.field,.container-overflow{resize:inherit}.resizable:not(.disabled) .container{resize:inherit;overflow:hidden}.disabled{pointer-events:none}@layer styles{.start,.middle,.end{display:flex;box-sizing:border-box;height:100%;position:relative}.start{color:var(--_leading-content-color)}.end{color:var(--_trailing-content-color)}.start,.end{align-items:center;justify-content:center}.with-start .start,.with-end .end{min-width:48px}.with-start .start{margin-inline-end:4px}.with-end .end{margin-inline-start:4px}.middle{align-items:stretch;align-self:baseline;flex:1}.content{color:var(--_content-color);display:flex;flex:1;opacity:0;transition:opacity 83ms cubic-bezier(0.2, 0, 0, 1)}.no-label .content,.focused .content,.populated .content{opacity:1;transition-delay:67ms}:is(.disabled,.disable-transitions) .content{transition:none}.content ::slotted(*){all:unset;color:currentColor;font-family:var(--_content-font);font-size:var(--_content-size);line-height:var(--_content-line-height);font-weight:var(--_content-weight);width:100%;overflow-wrap:revert;white-space:revert}.content ::slotted(:not(textarea)){padding-top:var(--_top-space);padding-bottom:var(--_bottom-space)}.content ::slotted(textarea){margin-top:var(--_top-space);margin-bottom:var(--_bottom-space)}:hover .content{color:var(--_hover-content-color)}:hover .start{color:var(--_hover-leading-content-color)}:hover .end{color:var(--_hover-trailing-content-color)}.focused .content{color:var(--_focus-content-color)}.focused .start{color:var(--_focus-leading-content-color)}.focused .end{color:var(--_focus-trailing-content-color)}.disabled .content{color:var(--_disabled-content-color)}.disabled.no-label .content,.disabled.focused .content,.disabled.populated .content{opacity:var(--_disabled-content-opacity)}.disabled .start{color:var(--_disabled-leading-content-color);opacity:var(--_disabled-leading-content-opacity)}.disabled .end{color:var(--_disabled-trailing-content-color);opacity:var(--_disabled-trailing-content-opacity)}.error .content{color:var(--_error-content-color)}.error .start{color:var(--_error-leading-content-color)}.error .end{color:var(--_error-trailing-content-color)}.error:hover .content{color:var(--_error-hover-content-color)}.error:hover .start{color:var(--_error-hover-leading-content-color)}.error:hover .end{color:var(--_error-hover-trailing-content-color)}.error.focused .content{color:var(--_error-focus-content-color)}.error.focused .start{color:var(--_error-focus-leading-content-color)}.error.focused .end{color:var(--_error-focus-trailing-content-color)}}@layer hcm{@media(forced-colors: active){.disabled :is(.start,.content,.end){color:GrayText;opacity:1}}}@layer styles{.label{box-sizing:border-box;color:var(--_label-text-color);overflow:hidden;max-width:100%;text-overflow:ellipsis;white-space:nowrap;z-index:1;font-family:var(--_label-text-font);font-size:var(--_label-text-size);line-height:var(--_label-text-line-height);font-weight:var(--_label-text-weight);width:min-content}.label-wrapper{inset:0;pointer-events:none;position:absolute}.label.resting{position:absolute;top:var(--_top-space)}.label.floating{font-size:var(--_label-text-populated-size);line-height:var(--_label-text-populated-line-height);transform-origin:top left}.label.hidden{opacity:0}.no-label .label{display:none}.label-wrapper{inset:0;position:absolute;text-align:initial}:hover .label{color:var(--_hover-label-text-color)}.focused .label{color:var(--_focus-label-text-color)}.disabled .label{color:var(--_disabled-label-text-color)}.disabled .label:not(.hidden){opacity:var(--_disabled-label-text-opacity)}.error .label{color:var(--_error-label-text-color)}.error:hover .label{color:var(--_error-hover-label-text-color)}.error.focused .label{color:var(--_error-focus-label-text-color)}}@layer hcm{@media(forced-colors: active){.disabled .label:not(.hidden){color:GrayText;opacity:1}}}@layer styles{.supporting-text{color:var(--_supporting-text-color);display:flex;font-family:var(--_supporting-text-font);font-size:var(--_supporting-text-size);line-height:var(--_supporting-text-line-height);font-weight:var(--_supporting-text-weight);gap:16px;justify-content:space-between;padding-inline-start:var(--_supporting-text-leading-space);padding-inline-end:var(--_supporting-text-trailing-space);padding-top:var(--_supporting-text-top-space)}.supporting-text :nth-child(2){flex-shrink:0}:hover .supporting-text{color:var(--_hover-supporting-text-color)}.focus .supporting-text{color:var(--_focus-supporting-text-color)}.disabled .supporting-text{color:var(--_disabled-supporting-text-color);opacity:var(--_disabled-supporting-text-opacity)}.error .supporting-text{color:var(--_error-supporting-text-color)}.error:hover .supporting-text{color:var(--_error-hover-supporting-text-color)}.error.focus .supporting-text{color:var(--_error-focus-supporting-text-color)}}@layer hcm{@media(forced-colors: active){.disabled .supporting-text{color:GrayText;opacity:1}}}
`
/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */;let _h=class extends yh{};_h.styles=[wh,xh],_h=we([ce("md-outlined-field")],_h);
/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
const kh=o`:host{--_caret-color:var(--md-outlined-text-field-caret-color, var(--md-sys-color-primary, #6750a4));--_disabled-input-text-color:var(--md-outlined-text-field-disabled-input-text-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-input-text-opacity:var(--md-outlined-text-field-disabled-input-text-opacity, 0.38);--_disabled-label-text-color:var(--md-outlined-text-field-disabled-label-text-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-label-text-opacity:var(--md-outlined-text-field-disabled-label-text-opacity, 0.38);--_disabled-leading-icon-color:var(--md-outlined-text-field-disabled-leading-icon-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-leading-icon-opacity:var(--md-outlined-text-field-disabled-leading-icon-opacity, 0.38);--_disabled-outline-color:var(--md-outlined-text-field-disabled-outline-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-outline-opacity:var(--md-outlined-text-field-disabled-outline-opacity, 0.12);--_disabled-outline-width:var(--md-outlined-text-field-disabled-outline-width, 1px);--_disabled-supporting-text-color:var(--md-outlined-text-field-disabled-supporting-text-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-supporting-text-opacity:var(--md-outlined-text-field-disabled-supporting-text-opacity, 0.38);--_disabled-trailing-icon-color:var(--md-outlined-text-field-disabled-trailing-icon-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-trailing-icon-opacity:var(--md-outlined-text-field-disabled-trailing-icon-opacity, 0.38);--_error-focus-caret-color:var(--md-outlined-text-field-error-focus-caret-color, var(--md-sys-color-error, #b3261e));--_error-focus-input-text-color:var(--md-outlined-text-field-error-focus-input-text-color, var(--md-sys-color-on-surface, #1d1b20));--_error-focus-label-text-color:var(--md-outlined-text-field-error-focus-label-text-color, var(--md-sys-color-error, #b3261e));--_error-focus-leading-icon-color:var(--md-outlined-text-field-error-focus-leading-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_error-focus-outline-color:var(--md-outlined-text-field-error-focus-outline-color, var(--md-sys-color-error, #b3261e));--_error-focus-supporting-text-color:var(--md-outlined-text-field-error-focus-supporting-text-color, var(--md-sys-color-error, #b3261e));--_error-focus-trailing-icon-color:var(--md-outlined-text-field-error-focus-trailing-icon-color, var(--md-sys-color-error, #b3261e));--_error-hover-input-text-color:var(--md-outlined-text-field-error-hover-input-text-color, var(--md-sys-color-on-surface, #1d1b20));--_error-hover-label-text-color:var(--md-outlined-text-field-error-hover-label-text-color, var(--md-sys-color-on-error-container, #410e0b));--_error-hover-leading-icon-color:var(--md-outlined-text-field-error-hover-leading-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_error-hover-outline-color:var(--md-outlined-text-field-error-hover-outline-color, var(--md-sys-color-on-error-container, #410e0b));--_error-hover-supporting-text-color:var(--md-outlined-text-field-error-hover-supporting-text-color, var(--md-sys-color-error, #b3261e));--_error-hover-trailing-icon-color:var(--md-outlined-text-field-error-hover-trailing-icon-color, var(--md-sys-color-on-error-container, #410e0b));--_error-input-text-color:var(--md-outlined-text-field-error-input-text-color, var(--md-sys-color-on-surface, #1d1b20));--_error-label-text-color:var(--md-outlined-text-field-error-label-text-color, var(--md-sys-color-error, #b3261e));--_error-leading-icon-color:var(--md-outlined-text-field-error-leading-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_error-outline-color:var(--md-outlined-text-field-error-outline-color, var(--md-sys-color-error, #b3261e));--_error-supporting-text-color:var(--md-outlined-text-field-error-supporting-text-color, var(--md-sys-color-error, #b3261e));--_error-trailing-icon-color:var(--md-outlined-text-field-error-trailing-icon-color, var(--md-sys-color-error, #b3261e));--_focus-input-text-color:var(--md-outlined-text-field-focus-input-text-color, var(--md-sys-color-on-surface, #1d1b20));--_focus-label-text-color:var(--md-outlined-text-field-focus-label-text-color, var(--md-sys-color-primary, #6750a4));--_focus-leading-icon-color:var(--md-outlined-text-field-focus-leading-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_focus-outline-color:var(--md-outlined-text-field-focus-outline-color, var(--md-sys-color-primary, #6750a4));--_focus-outline-width:var(--md-outlined-text-field-focus-outline-width, 3px);--_focus-supporting-text-color:var(--md-outlined-text-field-focus-supporting-text-color, var(--md-sys-color-on-surface-variant, #49454f));--_focus-trailing-icon-color:var(--md-outlined-text-field-focus-trailing-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_hover-input-text-color:var(--md-outlined-text-field-hover-input-text-color, var(--md-sys-color-on-surface, #1d1b20));--_hover-label-text-color:var(--md-outlined-text-field-hover-label-text-color, var(--md-sys-color-on-surface, #1d1b20));--_hover-leading-icon-color:var(--md-outlined-text-field-hover-leading-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_hover-outline-color:var(--md-outlined-text-field-hover-outline-color, var(--md-sys-color-on-surface, #1d1b20));--_hover-outline-width:var(--md-outlined-text-field-hover-outline-width, 1px);--_hover-supporting-text-color:var(--md-outlined-text-field-hover-supporting-text-color, var(--md-sys-color-on-surface-variant, #49454f));--_hover-trailing-icon-color:var(--md-outlined-text-field-hover-trailing-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_input-text-color:var(--md-outlined-text-field-input-text-color, var(--md-sys-color-on-surface, #1d1b20));--_input-text-font:var(--md-outlined-text-field-input-text-font, var(--md-sys-typescale-body-large-font, var(--md-ref-typeface-plain, Roboto)));--_input-text-line-height:var(--md-outlined-text-field-input-text-line-height, var(--md-sys-typescale-body-large-line-height, 1.5rem));--_input-text-placeholder-color:var(--md-outlined-text-field-input-text-placeholder-color, var(--md-sys-color-on-surface-variant, #49454f));--_input-text-prefix-color:var(--md-outlined-text-field-input-text-prefix-color, var(--md-sys-color-on-surface-variant, #49454f));--_input-text-size:var(--md-outlined-text-field-input-text-size, var(--md-sys-typescale-body-large-size, 1rem));--_input-text-suffix-color:var(--md-outlined-text-field-input-text-suffix-color, var(--md-sys-color-on-surface-variant, #49454f));--_input-text-weight:var(--md-outlined-text-field-input-text-weight, var(--md-sys-typescale-body-large-weight, var(--md-ref-typeface-weight-regular, 400)));--_label-text-color:var(--md-outlined-text-field-label-text-color, var(--md-sys-color-on-surface-variant, #49454f));--_label-text-font:var(--md-outlined-text-field-label-text-font, var(--md-sys-typescale-body-large-font, var(--md-ref-typeface-plain, Roboto)));--_label-text-line-height:var(--md-outlined-text-field-label-text-line-height, var(--md-sys-typescale-body-large-line-height, 1.5rem));--_label-text-populated-line-height:var(--md-outlined-text-field-label-text-populated-line-height, var(--md-sys-typescale-body-small-line-height, 1rem));--_label-text-populated-size:var(--md-outlined-text-field-label-text-populated-size, var(--md-sys-typescale-body-small-size, 0.75rem));--_label-text-size:var(--md-outlined-text-field-label-text-size, var(--md-sys-typescale-body-large-size, 1rem));--_label-text-weight:var(--md-outlined-text-field-label-text-weight, var(--md-sys-typescale-body-large-weight, var(--md-ref-typeface-weight-regular, 400)));--_leading-icon-color:var(--md-outlined-text-field-leading-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_leading-icon-size:var(--md-outlined-text-field-leading-icon-size, 24px);--_outline-color:var(--md-outlined-text-field-outline-color, var(--md-sys-color-outline, #79747e));--_outline-width:var(--md-outlined-text-field-outline-width, 1px);--_supporting-text-color:var(--md-outlined-text-field-supporting-text-color, var(--md-sys-color-on-surface-variant, #49454f));--_supporting-text-font:var(--md-outlined-text-field-supporting-text-font, var(--md-sys-typescale-body-small-font, var(--md-ref-typeface-plain, Roboto)));--_supporting-text-line-height:var(--md-outlined-text-field-supporting-text-line-height, var(--md-sys-typescale-body-small-line-height, 1rem));--_supporting-text-size:var(--md-outlined-text-field-supporting-text-size, var(--md-sys-typescale-body-small-size, 0.75rem));--_supporting-text-weight:var(--md-outlined-text-field-supporting-text-weight, var(--md-sys-typescale-body-small-weight, var(--md-ref-typeface-weight-regular, 400)));--_trailing-icon-color:var(--md-outlined-text-field-trailing-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_trailing-icon-size:var(--md-outlined-text-field-trailing-icon-size, 24px);--_container-shape-start-start:var(--md-outlined-text-field-container-shape-start-start, var(--md-outlined-text-field-container-shape, var(--md-sys-shape-corner-extra-small, 4px)));--_container-shape-start-end:var(--md-outlined-text-field-container-shape-start-end, var(--md-outlined-text-field-container-shape, var(--md-sys-shape-corner-extra-small, 4px)));--_container-shape-end-end:var(--md-outlined-text-field-container-shape-end-end, var(--md-outlined-text-field-container-shape, var(--md-sys-shape-corner-extra-small, 4px)));--_container-shape-end-start:var(--md-outlined-text-field-container-shape-end-start, var(--md-outlined-text-field-container-shape, var(--md-sys-shape-corner-extra-small, 4px)));--_leading-space:var(--md-outlined-text-field-leading-space, 16px);--_trailing-space:var(--md-outlined-text-field-trailing-space, 16px);--_top-space:var(--md-outlined-text-field-top-space, 16px);--_bottom-space:var(--md-outlined-text-field-bottom-space, 16px);--_input-text-prefix-trailing-space:var(--md-outlined-text-field-input-text-prefix-trailing-space, 2px);--_input-text-suffix-leading-space:var(--md-outlined-text-field-input-text-suffix-leading-space, 2px);--_focus-caret-color:var(--md-outlined-text-field-focus-caret-color, var(--md-sys-color-primary, #6750a4));--md-outlined-field-bottom-space:var(--_bottom-space);--md-outlined-field-container-shape-end-end:var(--_container-shape-end-end);--md-outlined-field-container-shape-end-start:var(--_container-shape-end-start);--md-outlined-field-container-shape-start-end:var(--_container-shape-start-end);--md-outlined-field-container-shape-start-start:var(--_container-shape-start-start);--md-outlined-field-content-color:var(--_input-text-color);--md-outlined-field-content-font:var(--_input-text-font);--md-outlined-field-content-line-height:var(--_input-text-line-height);--md-outlined-field-content-size:var(--_input-text-size);--md-outlined-field-content-weight:var(--_input-text-weight);--md-outlined-field-disabled-content-color:var(--_disabled-input-text-color);--md-outlined-field-disabled-content-opacity:var(--_disabled-input-text-opacity);--md-outlined-field-disabled-label-text-color:var(--_disabled-label-text-color);--md-outlined-field-disabled-label-text-opacity:var(--_disabled-label-text-opacity);--md-outlined-field-disabled-leading-content-color:var(--_disabled-leading-icon-color);--md-outlined-field-disabled-leading-content-opacity:var(--_disabled-leading-icon-opacity);--md-outlined-field-disabled-outline-color:var(--_disabled-outline-color);--md-outlined-field-disabled-outline-opacity:var(--_disabled-outline-opacity);--md-outlined-field-disabled-outline-width:var(--_disabled-outline-width);--md-outlined-field-disabled-supporting-text-color:var(--_disabled-supporting-text-color);--md-outlined-field-disabled-supporting-text-opacity:var(--_disabled-supporting-text-opacity);--md-outlined-field-disabled-trailing-content-color:var(--_disabled-trailing-icon-color);--md-outlined-field-disabled-trailing-content-opacity:var(--_disabled-trailing-icon-opacity);--md-outlined-field-error-content-color:var(--_error-input-text-color);--md-outlined-field-error-focus-content-color:var(--_error-focus-input-text-color);--md-outlined-field-error-focus-label-text-color:var(--_error-focus-label-text-color);--md-outlined-field-error-focus-leading-content-color:var(--_error-focus-leading-icon-color);--md-outlined-field-error-focus-outline-color:var(--_error-focus-outline-color);--md-outlined-field-error-focus-supporting-text-color:var(--_error-focus-supporting-text-color);--md-outlined-field-error-focus-trailing-content-color:var(--_error-focus-trailing-icon-color);--md-outlined-field-error-hover-content-color:var(--_error-hover-input-text-color);--md-outlined-field-error-hover-label-text-color:var(--_error-hover-label-text-color);--md-outlined-field-error-hover-leading-content-color:var(--_error-hover-leading-icon-color);--md-outlined-field-error-hover-outline-color:var(--_error-hover-outline-color);--md-outlined-field-error-hover-supporting-text-color:var(--_error-hover-supporting-text-color);--md-outlined-field-error-hover-trailing-content-color:var(--_error-hover-trailing-icon-color);--md-outlined-field-error-label-text-color:var(--_error-label-text-color);--md-outlined-field-error-leading-content-color:var(--_error-leading-icon-color);--md-outlined-field-error-outline-color:var(--_error-outline-color);--md-outlined-field-error-supporting-text-color:var(--_error-supporting-text-color);--md-outlined-field-error-trailing-content-color:var(--_error-trailing-icon-color);--md-outlined-field-focus-content-color:var(--_focus-input-text-color);--md-outlined-field-focus-label-text-color:var(--_focus-label-text-color);--md-outlined-field-focus-leading-content-color:var(--_focus-leading-icon-color);--md-outlined-field-focus-outline-color:var(--_focus-outline-color);--md-outlined-field-focus-outline-width:var(--_focus-outline-width);--md-outlined-field-focus-supporting-text-color:var(--_focus-supporting-text-color);--md-outlined-field-focus-trailing-content-color:var(--_focus-trailing-icon-color);--md-outlined-field-hover-content-color:var(--_hover-input-text-color);--md-outlined-field-hover-label-text-color:var(--_hover-label-text-color);--md-outlined-field-hover-leading-content-color:var(--_hover-leading-icon-color);--md-outlined-field-hover-outline-color:var(--_hover-outline-color);--md-outlined-field-hover-outline-width:var(--_hover-outline-width);--md-outlined-field-hover-supporting-text-color:var(--_hover-supporting-text-color);--md-outlined-field-hover-trailing-content-color:var(--_hover-trailing-icon-color);--md-outlined-field-label-text-color:var(--_label-text-color);--md-outlined-field-label-text-font:var(--_label-text-font);--md-outlined-field-label-text-line-height:var(--_label-text-line-height);--md-outlined-field-label-text-populated-line-height:var(--_label-text-populated-line-height);--md-outlined-field-label-text-populated-size:var(--_label-text-populated-size);--md-outlined-field-label-text-size:var(--_label-text-size);--md-outlined-field-label-text-weight:var(--_label-text-weight);--md-outlined-field-leading-content-color:var(--_leading-icon-color);--md-outlined-field-leading-space:var(--_leading-space);--md-outlined-field-outline-color:var(--_outline-color);--md-outlined-field-outline-width:var(--_outline-width);--md-outlined-field-supporting-text-color:var(--_supporting-text-color);--md-outlined-field-supporting-text-font:var(--_supporting-text-font);--md-outlined-field-supporting-text-line-height:var(--_supporting-text-line-height);--md-outlined-field-supporting-text-size:var(--_supporting-text-size);--md-outlined-field-supporting-text-weight:var(--_supporting-text-weight);--md-outlined-field-top-space:var(--_top-space);--md-outlined-field-trailing-content-color:var(--_trailing-icon-color);--md-outlined-field-trailing-space:var(--_trailing-space)}`
/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */,Ch=qe(class extends Ye{constructor(e){if(super(e),e.type!==He&&e.type!==je&&e.type!==We)throw Error("The `live` directive is not allowed on child or event bindings");if(!xc(e))throw Error("`live` bindings can only contain a single expression")}render(e){return e}update(e,[t]){if(t===j||t===G)return t;const r=e.element,i=e.name;if(e.type===He){if(t===r[i])return j}else if(e.type===We){if(!!t===r.hasAttribute(i))return j}else if(e.type===je&&r.getAttribute(i)===t+"")return j;return Cc(e),t}}),Sh={fromAttribute:e=>e??"",toAttribute:e=>e||null},Ah=Symbol("onReportValidity"),Ph=Symbol("privateCleanupFormListeners"),Th=Symbol("privateDoNotReportInvalid"),Eh=Symbol("privateIsSelfReportingValidity"),Ih=Symbol("privateCallOnReportValidity");const Lh=new WeakMap;
/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
class Oh extends lo{computeValidity({state:e,renderedControl:t}){let r=t;Mh(e)&&!r?(r=this.inputControl||document.createElement("input"),this.inputControl=r):r||(r=this.textAreaControl||document.createElement("textarea"),this.textAreaControl=r);const i=Mh(e)?r:null;if(i&&(i.type=e.type),r.value!==e.value&&(r.value=e.value),r.required=e.required,i){const t=e;t.pattern?i.pattern=t.pattern:i.removeAttribute("pattern"),t.min?i.min=t.min:i.removeAttribute("min"),t.max?i.max=t.max:i.removeAttribute("max"),t.step?i.step=t.step:i.removeAttribute("step")}return(e.minLength??-1)>-1?r.setAttribute("minlength",String(e.minLength)):r.removeAttribute("minlength"),(e.maxLength??-1)>-1?r.setAttribute("maxlength",String(e.maxLength)):r.removeAttribute("maxlength"),{validity:r.validity,validationMessage:r.validationMessage}}equals({state:e},{state:t}){const r=e.type===t.type&&e.value===t.value&&e.required===t.required&&e.minLength===t.minLength&&e.maxLength===t.maxLength;return Mh(e)&&Mh(t)?r&&e.pattern===t.pattern&&e.min===t.min&&e.max===t.max&&e.step===t.step:r}copy({state:e}){return{state:Mh(e)?this.copyInput(e):this.copyTextArea(e),renderedControl:null}}copyInput(e){const{type:t,pattern:r,min:i,max:n,step:o}=e;return{...this.copySharedState(e),type:t,pattern:r,min:i,max:n,step:o}}copyTextArea(e){return{...this.copySharedState(e),type:e.type}}copySharedState({value:e,required:t,minLength:r,maxLength:i}){return{value:e,required:t,minLength:r,maxLength:i}}}function Mh(e){return"textarea"!==e.type}
/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Rh=function(e){var t,r,i;class n extends e{constructor(...e){super(...e),this[t]=new AbortController,this[r]=!1,this[i]=!1,this.addEventListener("invalid",(e=>{!this[Th]&&e.isTrusted&&this.addEventListener("invalid",(()=>{this[Ih](e)}),{once:!0})}),{capture:!0})}checkValidity(){this[Th]=!0;const e=super.checkValidity();return this[Th]=!1,e}reportValidity(){this[Eh]=!0;const e=super.reportValidity();return e&&this[Ih](null),this[Eh]=!1,e}[(t=Ph,r=Th,i=Eh,Ih)](e){const t=e?.defaultPrevented;if(t)return;this[Ah](e);!t&&e?.defaultPrevented&&(this[Eh]||function(e,t){if(!e)return!0;let r;for(const t of e.elements)if(t.matches(":invalid")){r=t;break}return r===t}(this[Gt].form,this))&&this.focus()}[Ah](e){throw new Error("Implement [onReportValidity]")}formAssociatedCallback(e){super.formAssociatedCallback&&super.formAssociatedCallback(e),this[Ph].abort(),e&&(this[Ph]=new AbortController,function(e,t,r,i){const n=function(e){if(!Lh.has(e)){const t=new EventTarget;Lh.set(e,t);for(const r of["reportValidity","requestSubmit"]){const i=e[r];e[r]=function(){t.dispatchEvent(new Event("before"));const e=Reflect.apply(i,this,arguments);return t.dispatchEvent(new Event("after")),e}}}return Lh.get(e)}(t);let o,s=!1,a=!1;n.addEventListener("before",(()=>{a=!0,o=new AbortController,s=!1,e.addEventListener("invalid",(()=>{s=!0}),{signal:o.signal})}),{signal:i}),n.addEventListener("after",(()=>{a=!1,o?.abort(),s||r()}),{signal:i}),t.addEventListener("submit",(()=>{a||r()}),{signal:i})}(this,e,(()=>{this[Ih](null)}),this[Ph].signal))}}return n}(no(ao(Wt(ae))));class $h extends Rh{constructor(){super(...arguments),this.error=!1,this.errorText="",this.label="",this.noAsterisk=!1,this.required=!1,this.value="",this.prefixText="",this.suffixText="",this.hasLeadingIcon=!1,this.hasTrailingIcon=!1,this.supportingText="",this.textDirection="",this.rows=2,this.cols=20,this.inputMode="",this.max="",this.maxLength=-1,this.min="",this.minLength=-1,this.noSpinner=!1,this.pattern="",this.placeholder="",this.readOnly=!1,this.multiple=!1,this.step="",this.type="text",this.autocomplete="",this.dirty=!1,this.focused=!1,this.nativeError=!1,this.nativeErrorText=""}get selectionDirection(){return this.getInputOrTextarea().selectionDirection}set selectionDirection(e){this.getInputOrTextarea().selectionDirection=e}get selectionEnd(){return this.getInputOrTextarea().selectionEnd}set selectionEnd(e){this.getInputOrTextarea().selectionEnd=e}get selectionStart(){return this.getInputOrTextarea().selectionStart}set selectionStart(e){this.getInputOrTextarea().selectionStart=e}get valueAsNumber(){const e=this.getInput();return e?e.valueAsNumber:NaN}set valueAsNumber(e){const t=this.getInput();t&&(t.valueAsNumber=e,this.value=t.value)}get valueAsDate(){const e=this.getInput();return e?e.valueAsDate:null}set valueAsDate(e){const t=this.getInput();t&&(t.valueAsDate=e,this.value=t.value)}get hasError(){return this.error||this.nativeError}select(){this.getInputOrTextarea().select()}setRangeText(...e){this.getInputOrTextarea().setRangeText(...e),this.value=this.getInputOrTextarea().value}setSelectionRange(e,t,r){this.getInputOrTextarea().setSelectionRange(e,t,r)}stepDown(e){const t=this.getInput();t&&(t.stepDown(e),this.value=t.value)}stepUp(e){const t=this.getInput();t&&(t.stepUp(e),this.value=t.value)}reset(){this.dirty=!1,this.value=this.getAttribute("value")??"",this.nativeError=!1,this.nativeErrorText=""}attributeChangedCallback(e,t,r){"value"===e&&this.dirty||super.attributeChangedCallback(e,t,r)}render(){const e={disabled:this.disabled,error:!this.disabled&&this.hasError,textarea:"textarea"===this.type,"no-spinner":this.noSpinner};return V` <span class="text-field ${Je(e)}"> ${this.renderField()} </span> `}updated(e){const t=this.getInputOrTextarea().value;this.value!==t&&(this.value=t)}renderField(){return kt`<${this.fieldTag}
      class="field"
      count=${this.value.length}
      ?disabled=${this.disabled}
      ?error=${this.hasError}
      error-text=${this.getErrorText()}
      ?focused=${this.focused}
      ?has-end=${this.hasTrailingIcon}
      ?has-start=${this.hasLeadingIcon}
      label=${this.label}
      ?no-asterisk=${this.noAsterisk}
      max=${this.maxLength}
      ?populated=${!!this.value}
      ?required=${this.required}
      ?resizable=${"textarea"===this.type}
      supporting-text=${this.supportingText}
    >
      ${this.renderLeadingIcon()}
      ${this.renderInputOrTextarea()}
      ${this.renderTrailingIcon()}
      <div id="description" slot="aria-describedby"></div>
    </${this.fieldTag}>`}renderLeadingIcon(){return V` <span class="icon leading" slot="start"> <slot name="leading-icon" @slotchange="${this.handleIconChange}"></slot> </span> `}renderTrailingIcon(){return V` <span class="icon trailing" slot="end"> <slot name="trailing-icon" @slotchange="${this.handleIconChange}"></slot> </span> `}renderInputOrTextarea(){const e={direction:this.textDirection},t=this.ariaLabel||this.label||G,r=this.autocomplete,i=(this.maxLength??-1)>-1,n=(this.minLength??-1)>-1;if("textarea"===this.type)return V` <textarea class="input" style="${_i(e)}" aria-describedby="description" aria-invalid="${this.hasError}" aria-label="${t}" autocomplete="${r||G}" name="${this.name||G}" ?disabled="${this.disabled}" maxlength="${i?this.maxLength:G}" minlength="${n?this.minLength:G}" placeholder="${this.placeholder||G}" ?readonly="${this.readOnly}" ?required="${this.required}" rows="${this.rows}" cols="${this.cols}" .value="${Ch(this.value)}" @change="${this.redispatchEvent}" @focus="${this.handleFocusChange}" @blur="${this.handleFocusChange}" @input="${this.handleInput}" @select="${this.redispatchEvent}"></textarea> `;const o=this.renderPrefix(),s=this.renderSuffix(),a=this.inputMode;return V` <div class="input-wrapper"> ${o} <input class="input" style="${_i(e)}" aria-describedby="description" aria-invalid="${this.hasError}" aria-label="${t}" autocomplete="${r||G}" name="${this.name||G}" ?disabled="${this.disabled}" inputmode="${a||G}" max="${this.max||G}" maxlength="${i?this.maxLength:G}" min="${this.min||G}" minlength="${n?this.minLength:G}" pattern="${this.pattern||G}" placeholder="${this.placeholder||G}" ?readonly="${this.readOnly}" ?required="${this.required}" ?multiple="${this.multiple}" step="${this.step||G}" type="${this.type}" .value="${Ch(this.value)}" @change="${this.redispatchEvent}" @focus="${this.handleFocusChange}" @blur="${this.handleFocusChange}" @input="${this.handleInput}" @select="${this.redispatchEvent}"> ${s} </div> `}renderPrefix(){return this.renderAffix(this.prefixText,!1)}renderSuffix(){return this.renderAffix(this.suffixText,!0)}renderAffix(e,t){if(!e)return G;return V`<span class="${Je({suffix:t,prefix:!t})}">${e}</span>`}getErrorText(){return this.error?this.errorText:this.nativeErrorText}handleFocusChange(){this.focused=this.inputOrTextarea?.matches(":focus")??!1}handleInput(e){this.dirty=!0,this.value=e.target.value}redispatchEvent(e){Qn(this,e)}getInputOrTextarea(){return this.inputOrTextarea||(this.connectedCallback(),this.scheduleUpdate()),this.isUpdatePending&&this.scheduleUpdate(),this.inputOrTextarea}getInput(){return"textarea"===this.type?null:this.getInputOrTextarea()}handleIconChange(){this.hasLeadingIcon=this.leadingIcons.length>0,this.hasTrailingIcon=this.trailingIcons.length>0}[oo](){return this.value}formResetCallback(){this.reset()}formStateRestoreCallback(e){this.value=e}focus(){this.getInputOrTextarea().focus()}[Kn](){return new Oh((()=>({state:this,renderedControl:this.inputOrTextarea})))}[eo](){return this.inputOrTextarea}[Ah](e){e?.preventDefault();const t=this.getErrorText();this.nativeError=!!e,this.nativeErrorText=this.validationMessage,t===this.getErrorText()&&this.field?.reannounceError()}}Ie($h),$h.shadowRootOptions={...ae.shadowRootOptions,delegatesFocus:!0},we([ue({type:Boolean,reflect:!0})],$h.prototype,"error",void 0),we([ue({attribute:"error-text"})],$h.prototype,"errorText",void 0),we([ue()],$h.prototype,"label",void 0),we([ue({type:Boolean,attribute:"no-asterisk"})],$h.prototype,"noAsterisk",void 0),we([ue({type:Boolean,reflect:!0})],$h.prototype,"required",void 0),we([ue()],$h.prototype,"value",void 0),we([ue({attribute:"prefix-text"})],$h.prototype,"prefixText",void 0),we([ue({attribute:"suffix-text"})],$h.prototype,"suffixText",void 0),we([ue({type:Boolean,attribute:"has-leading-icon"})],$h.prototype,"hasLeadingIcon",void 0),we([ue({type:Boolean,attribute:"has-trailing-icon"})],$h.prototype,"hasTrailingIcon",void 0),we([ue({attribute:"supporting-text"})],$h.prototype,"supportingText",void 0),we([ue({attribute:"text-direction"})],$h.prototype,"textDirection",void 0),we([ue({type:Number})],$h.prototype,"rows",void 0),we([ue({type:Number})],$h.prototype,"cols",void 0),we([ue({reflect:!0})],$h.prototype,"inputMode",void 0),we([ue()],$h.prototype,"max",void 0),we([ue({type:Number})],$h.prototype,"maxLength",void 0),we([ue()],$h.prototype,"min",void 0),we([ue({type:Number})],$h.prototype,"minLength",void 0),we([ue({type:Boolean,attribute:"no-spinner"})],$h.prototype,"noSpinner",void 0),we([ue()],$h.prototype,"pattern",void 0),we([ue({reflect:!0,converter:Sh})],$h.prototype,"placeholder",void 0),we([ue({type:Boolean,reflect:!0})],$h.prototype,"readOnly",void 0),we([ue({type:Boolean,reflect:!0})],$h.prototype,"multiple",void 0),we([ue()],$h.prototype,"step",void 0),we([ue({reflect:!0})],$h.prototype,"type",void 0),we([ue({reflect:!0})],$h.prototype,"autocomplete",void 0),we([pe()],$h.prototype,"dirty",void 0),we([pe()],$h.prototype,"focused",void 0),we([pe()],$h.prototype,"nativeError",void 0),we([pe()],$h.prototype,"nativeErrorText",void 0),we([me(".input")],$h.prototype,"inputOrTextarea",void 0),we([me(".field")],$h.prototype,"field",void 0),we([be({slot:"leading-icon"})],$h.prototype,"leadingIcons",void 0),we([be({slot:"trailing-icon"})],$h.prototype,"trailingIcons",void 0);
/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
class Nh extends $h{constructor(){super(...arguments),this.fieldTag=wt`md-outlined-field`}}
/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Dh=o`:host{display:inline-flex;outline:0;resize:both;text-align:start;-webkit-tap-highlight-color:transparent}.field,.text-field{width:100%}.text-field{display:inline-flex}.field{cursor:text}.disabled .field{cursor:default}.text-field,.textarea .field{resize:inherit}.icon{color:currentColor;display:flex;fill:currentColor}.icon ::slotted(*){display:flex}[hasstart] .icon.leading{font-size:var(--_leading-icon-size);height:var(--_leading-icon-size);width:var(--_leading-icon-size)}[hasend] .icon.trailing{font-size:var(--_trailing-icon-size);height:var(--_trailing-icon-size);width:var(--_trailing-icon-size)}.input-wrapper{display:flex}.input-wrapper>*{all:inherit;padding:0}.input{caret-color:var(--_caret-color);overflow-x:hidden;text-align:inherit}.input::placeholder{color:currentColor;opacity:1}.input::-webkit-calendar-picker-indicator{display:none}.input::-webkit-search-cancel-button,.input::-webkit-search-decoration{display:none}@media(forced-colors:active){.input{background:0 0}}.no-spinner .input::-webkit-inner-spin-button,.no-spinner .input::-webkit-outer-spin-button{display:none}.no-spinner .input[type=number]{-moz-appearance:textfield}:focus-within .input{caret-color:var(--_focus-caret-color)}.error:focus-within .input{caret-color:var(--_error-focus-caret-color)}.text-field:not(.disabled) .prefix{color:var(--_input-text-prefix-color)}.text-field:not(.disabled) .suffix{color:var(--_input-text-suffix-color)}.text-field:not(.disabled) .input::placeholder{color:var(--_input-text-placeholder-color)}.prefix,.suffix{text-wrap:nowrap;width:min-content}.prefix{padding-inline-end:var(--_input-text-prefix-trailing-space)}.suffix{padding-inline-start:var(--_input-text-suffix-leading-space)}`
/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */;let zh=class extends Nh{constructor(){super(...arguments),this.fieldTag=wt`md-outlined-field`}};zh.styles=[Dh,kh],zh=we([ce("md-outlined-text-field")],zh);
/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
class Bh extends go{renderElevationOrOutline(){return V`<md-elevation part="elevation"></md-elevation>`}}
/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Fh=o`:host{--_container-color:var(--md-filled-tonal-button-container-color, var(--md-sys-color-secondary-container, #e8def8));--_container-elevation:var(--md-filled-tonal-button-container-elevation, 0);--_container-height:var(--md-filled-tonal-button-container-height, 40px);--_container-shadow-color:var(--md-filled-tonal-button-container-shadow-color, var(--md-sys-color-shadow, #000));--_disabled-container-color:var(--md-filled-tonal-button-disabled-container-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-container-elevation:var(--md-filled-tonal-button-disabled-container-elevation, 0);--_disabled-container-opacity:var(--md-filled-tonal-button-disabled-container-opacity, 0.12);--_disabled-label-text-color:var(--md-filled-tonal-button-disabled-label-text-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-label-text-opacity:var(--md-filled-tonal-button-disabled-label-text-opacity, 0.38);--_focus-container-elevation:var(--md-filled-tonal-button-focus-container-elevation, 0);--_focus-label-text-color:var(--md-filled-tonal-button-focus-label-text-color, var(--md-sys-color-on-secondary-container, #1d192b));--_hover-container-elevation:var(--md-filled-tonal-button-hover-container-elevation, 1);--_hover-label-text-color:var(--md-filled-tonal-button-hover-label-text-color, var(--md-sys-color-on-secondary-container, #1d192b));--_hover-state-layer-color:var(--md-filled-tonal-button-hover-state-layer-color, var(--md-sys-color-on-secondary-container, #1d192b));--_hover-state-layer-opacity:var(--md-filled-tonal-button-hover-state-layer-opacity, 0.08);--_label-text-color:var(--md-filled-tonal-button-label-text-color, var(--md-sys-color-on-secondary-container, #1d192b));--_label-text-font:var(--md-filled-tonal-button-label-text-font, var(--md-sys-typescale-label-large-font, var(--md-ref-typeface-plain, Roboto)));--_label-text-line-height:var(--md-filled-tonal-button-label-text-line-height, var(--md-sys-typescale-label-large-line-height, 1.25rem));--_label-text-size:var(--md-filled-tonal-button-label-text-size, var(--md-sys-typescale-label-large-size, 0.875rem));--_label-text-weight:var(--md-filled-tonal-button-label-text-weight, var(--md-sys-typescale-label-large-weight, var(--md-ref-typeface-weight-medium, 500)));--_pressed-container-elevation:var(--md-filled-tonal-button-pressed-container-elevation, 0);--_pressed-label-text-color:var(--md-filled-tonal-button-pressed-label-text-color, var(--md-sys-color-on-secondary-container, #1d192b));--_pressed-state-layer-color:var(--md-filled-tonal-button-pressed-state-layer-color, var(--md-sys-color-on-secondary-container, #1d192b));--_pressed-state-layer-opacity:var(--md-filled-tonal-button-pressed-state-layer-opacity, 0.12);--_disabled-icon-color:var(--md-filled-tonal-button-disabled-icon-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-icon-opacity:var(--md-filled-tonal-button-disabled-icon-opacity, 0.38);--_focus-icon-color:var(--md-filled-tonal-button-focus-icon-color, var(--md-sys-color-on-secondary-container, #1d192b));--_hover-icon-color:var(--md-filled-tonal-button-hover-icon-color, var(--md-sys-color-on-secondary-container, #1d192b));--_icon-color:var(--md-filled-tonal-button-icon-color, var(--md-sys-color-on-secondary-container, #1d192b));--_icon-size:var(--md-filled-tonal-button-icon-size, 18px);--_pressed-icon-color:var(--md-filled-tonal-button-pressed-icon-color, var(--md-sys-color-on-secondary-container, #1d192b));--_container-shape-start-start:var(--md-filled-tonal-button-container-shape-start-start, var(--md-filled-tonal-button-container-shape, var(--md-sys-shape-corner-full, 9999px)));--_container-shape-start-end:var(--md-filled-tonal-button-container-shape-start-end, var(--md-filled-tonal-button-container-shape, var(--md-sys-shape-corner-full, 9999px)));--_container-shape-end-end:var(--md-filled-tonal-button-container-shape-end-end, var(--md-filled-tonal-button-container-shape, var(--md-sys-shape-corner-full, 9999px)));--_container-shape-end-start:var(--md-filled-tonal-button-container-shape-end-start, var(--md-filled-tonal-button-container-shape, var(--md-sys-shape-corner-full, 9999px)));--_leading-space:var(--md-filled-tonal-button-leading-space, 24px);--_trailing-space:var(--md-filled-tonal-button-trailing-space, 24px);--_with-leading-icon-leading-space:var(--md-filled-tonal-button-with-leading-icon-leading-space, 16px);--_with-leading-icon-trailing-space:var(--md-filled-tonal-button-with-leading-icon-trailing-space, 24px);--_with-trailing-icon-leading-space:var(--md-filled-tonal-button-with-trailing-icon-leading-space, 24px);--_with-trailing-icon-trailing-space:var(--md-filled-tonal-button-with-trailing-icon-trailing-space, 16px)}`
/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */,Uh=o`md-elevation{transition-duration:280ms}:host([disabled]) md-elevation{transition:none}md-elevation{--md-elevation-level:var(--_container-elevation);--md-elevation-shadow-color:var(--_container-shadow-color)}:host(:focus-within) md-elevation{--md-elevation-level:var(--_focus-container-elevation)}:host(:hover) md-elevation{--md-elevation-level:var(--_hover-container-elevation)}:host(:active) md-elevation{--md-elevation-level:var(--_pressed-container-elevation)}:host([disabled]) md-elevation{--md-elevation-level:var(--_disabled-container-elevation)}`
/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */;let Vh=class extends Bh{};Vh.styles=[yo,Uh,Fh],Vh=we([ce("md-filled-tonal-button")],Vh);
/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
const jh={dialog:[[[{transform:"translateY(-50px)"},{transform:"translateY(0)"}],{duration:500,easing:Ze}]],scrim:[[[{opacity:0},{opacity:.32}],{duration:500,easing:"linear"}]],container:[[[{opacity:0},{opacity:1}],{duration:50,easing:"linear",pseudoElement:"::before"}],[[{height:"35%"},{height:"100%"}],{duration:500,easing:Ze,pseudoElement:"::before"}]],headline:[[[{opacity:0},{opacity:0,offset:.2},{opacity:1}],{duration:250,easing:"linear",fill:"forwards"}]],content:[[[{opacity:0},{opacity:0,offset:.2},{opacity:1}],{duration:250,easing:"linear",fill:"forwards"}]],actions:[[[{opacity:0},{opacity:0,offset:.5},{opacity:1}],{duration:300,easing:"linear",fill:"forwards"}]]},Gh={dialog:[[[{transform:"translateY(0)"},{transform:"translateY(-50px)"}],{duration:150,easing:Qe}]],scrim:[[[{opacity:.32},{opacity:0}],{duration:150,easing:"linear"}]],container:[[[{height:"100%"},{height:"35%"}],{duration:150,easing:Qe,pseudoElement:"::before"}],[[{opacity:"1"},{opacity:"0"}],{delay:100,duration:50,easing:"linear",pseudoElement:"::before"}]],headline:[[[{opacity:1},{opacity:0}],{duration:100,easing:"linear",fill:"forwards"}]],content:[[[{opacity:1},{opacity:0}],{duration:100,easing:"linear",fill:"forwards"}]],actions:[[[{opacity:1},{opacity:0}],{duration:100,easing:"linear",fill:"forwards"}]]};
/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
class Hh extends ae{get open(){return this.isOpen}set open(e){e!==this.isOpen&&(this.isOpen=e,e?(this.setAttribute("open",""),this.show()):(this.removeAttribute("open"),this.close()))}constructor(){super(),this.quick=!1,this.returnValue="",this.noFocusTrap=!1,this.getOpenAnimation=()=>jh,this.getCloseAnimation=()=>Gh,this.isOpen=!1,this.isOpening=!1,this.isConnectedPromise=this.getIsConnectedPromise(),this.isAtScrollTop=!1,this.isAtScrollBottom=!1,this.nextClickIsFromContent=!1,this.hasHeadline=!1,this.hasActions=!1,this.hasIcon=!1,this.escapePressedWithoutCancel=!1,this.treewalker=document.createTreeWalker(this,NodeFilter.SHOW_ELEMENT),this.addEventListener("submit",this.handleSubmit)}async show(){this.isOpening=!0,await this.isConnectedPromise,await this.updateComplete;const e=this.dialog;if(e.open||!this.isOpening)return void(this.isOpening=!1);if(!this.dispatchEvent(new Event("open",{cancelable:!0})))return this.open=!1,void(this.isOpening=!1);e.showModal(),this.open=!0,this.scroller&&(this.scroller.scrollTop=0),this.querySelector("[autofocus]")?.focus(),await this.animateDialog(this.getOpenAnimation()),this.dispatchEvent(new Event("opened")),this.isOpening=!1}async close(e=this.returnValue){if(this.isOpening=!1,!this.isConnected)return void(this.open=!1);await this.updateComplete;const t=this.dialog;if(!t.open||this.isOpening)return void(this.open=!1);const r=this.returnValue;this.returnValue=e;this.dispatchEvent(new Event("close",{cancelable:!0}))?(await this.animateDialog(this.getCloseAnimation()),t.close(e),this.open=!1,this.dispatchEvent(new Event("closed"))):this.returnValue=r}connectedCallback(){super.connectedCallback(),this.isConnectedPromiseResolve()}disconnectedCallback(){super.disconnectedCallback(),this.isConnectedPromise=this.getIsConnectedPromise()}render(){const e=this.open&&!(this.isAtScrollTop&&this.isAtScrollBottom),t={"has-headline":this.hasHeadline,"has-actions":this.hasActions,"has-icon":this.hasIcon,scrollable:e,"show-top-divider":e&&!this.isAtScrollTop,"show-bottom-divider":e&&!this.isAtScrollBottom},r=this.open&&!this.noFocusTrap,i=V` <div class="focus-trap" tabindex="0" aria-hidden="true" @focus="${this.handleFocusTrapFocus}"></div> `,{ariaLabel:n}=this;return V` <div class="scrim"></div> <dialog class="${Je(t)}" aria-label="${n||G}" aria-labelledby="${this.hasHeadline?"headline":G}" role="${"alert"===this.type?"alertdialog":G}" @cancel="${this.handleCancel}" @click="${this.handleDialogClick}" @close="${this.handleClose}" @keydown="${this.handleKeydown}" .returnValue="${this.returnValue||G}"> ${r?i:G} <div class="container" @click="${this.handleContentClick}"> <div class="headline"> <div class="icon" aria-hidden="true"> <slot name="icon" @slotchange="${this.handleIconChange}"></slot> </div> <h2 id="headline" aria-hidden="${!this.hasHeadline||G}"> <slot name="headline" @slotchange="${this.handleHeadlineChange}"></slot> </h2> <md-divider></md-divider> </div> <div class="scroller"> <div class="content"> <div class="top anchor"></div> <slot name="content"></slot> <div class="bottom anchor"></div> </div> </div> <div class="actions"> <md-divider></md-divider> <slot name="actions" @slotchange="${this.handleActionsChange}"></slot> </div> </div> ${r?i:G} </dialog> `}firstUpdated(){this.intersectionObserver=new IntersectionObserver((e=>{for(const t of e)this.handleAnchorIntersection(t)}),{root:this.scroller}),this.intersectionObserver.observe(this.topAnchor),this.intersectionObserver.observe(this.bottomAnchor)}handleDialogClick(){if(this.nextClickIsFromContent)return void(this.nextClickIsFromContent=!1);!this.dispatchEvent(new Event("cancel",{cancelable:!0}))||this.close()}handleContentClick(){this.nextClickIsFromContent=!0}handleSubmit(e){const t=e.target,{submitter:r}=e;"dialog"===t.method&&r&&this.close(r.getAttribute("value")??this.returnValue)}handleCancel(e){if(e.target!==this.dialog)return;this.escapePressedWithoutCancel=!1;const t=!Qn(this,e);e.preventDefault(),t||this.close()}handleClose(){this.escapePressedWithoutCancel&&(this.escapePressedWithoutCancel=!1,this.dialog?.dispatchEvent(new Event("cancel",{cancelable:!0})))}handleKeydown(e){"Escape"===e.key&&(this.escapePressedWithoutCancel=!0,setTimeout((()=>{this.escapePressedWithoutCancel=!1})))}async animateDialog(e){if(this.cancelAnimations?.abort(),this.cancelAnimations=new AbortController,this.quick)return;const{dialog:t,scrim:r,container:i,headline:n,content:o,actions:s}=this;if(!(t&&r&&i&&n&&o&&s))return;const{container:a,dialog:l,scrim:c,headline:d,content:h,actions:u}=e,p=[[t,l??[]],[r,c??[]],[i,a??[]],[n,d??[]],[o,h??[]],[s,u??[]]],f=[];for(const[e,t]of p)for(const r of t){const t=e.animate(...r);this.cancelAnimations.signal.addEventListener("abort",(()=>{t.cancel()})),f.push(t)}await Promise.all(f.map((e=>e.finished.catch((()=>{})))))}handleHeadlineChange(e){const t=e.target;this.hasHeadline=t.assignedElements().length>0}handleActionsChange(e){const t=e.target;this.hasActions=t.assignedElements().length>0}handleIconChange(e){const t=e.target;this.hasIcon=t.assignedElements().length>0}handleAnchorIntersection(e){const{target:t,isIntersecting:r}=e;t===this.topAnchor&&(this.isAtScrollTop=r),t===this.bottomAnchor&&(this.isAtScrollBottom=r)}getIsConnectedPromise(){return new Promise((e=>{this.isConnectedPromiseResolve=e}))}handleFocusTrapFocus(e){const[t,r]=this.getFirstAndLastFocusableChildren();if(!t||!r)return void this.dialog?.focus();const i=e.target===this.firstFocusTrap,n=!i,o=e.relatedTarget===t,s=e.relatedTarget===r,a=!o&&!s;if(n&&s||i&&a)return void t.focus();(i&&o||n&&a)&&r.focus()}getFirstAndLastFocusableChildren(){let e=null,t=null;for(this.treewalker.currentNode=this.treewalker.root;this.treewalker.nextNode();){const r=this.treewalker.currentNode;Wh(r)&&(e||(e=r),t=r)}return[e,t]}}function Wh(e){const t=":not(:disabled,[disabled])";if(e.matches(":is(button,input,select,textarea,object,:is(a,area)[href],[tabindex],[contenteditable=true])"+t+':not([tabindex^="-"])'))return!0;return!!e.localName.includes("-")&&(!!e.matches(t)&&(e.shadowRoot?.delegatesFocus??!1))}
/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */Ie(Hh),we([ue({type:Boolean})],Hh.prototype,"open",null),we([ue({type:Boolean})],Hh.prototype,"quick",void 0),we([ue({attribute:!1})],Hh.prototype,"returnValue",void 0),we([ue()],Hh.prototype,"type",void 0),we([ue({type:Boolean,attribute:"no-focus-trap"})],Hh.prototype,"noFocusTrap",void 0),we([me("dialog")],Hh.prototype,"dialog",void 0),we([me(".scrim")],Hh.prototype,"scrim",void 0),we([me(".container")],Hh.prototype,"container",void 0),we([me(".headline")],Hh.prototype,"headline",void 0),we([me(".content")],Hh.prototype,"content",void 0),we([me(".actions")],Hh.prototype,"actions",void 0),we([pe()],Hh.prototype,"isAtScrollTop",void 0),we([pe()],Hh.prototype,"isAtScrollBottom",void 0),we([me(".scroller")],Hh.prototype,"scroller",void 0),we([me(".top.anchor")],Hh.prototype,"topAnchor",void 0),we([me(".bottom.anchor")],Hh.prototype,"bottomAnchor",void 0),we([me(".focus-trap")],Hh.prototype,"firstFocusTrap",void 0),we([pe()],Hh.prototype,"hasHeadline",void 0),we([pe()],Hh.prototype,"hasActions",void 0),we([pe()],Hh.prototype,"hasIcon",void 0);const qh=o`:host{border-start-start-radius:var(--md-dialog-container-shape-start-start,var(--md-dialog-container-shape,var(--md-sys-shape-corner-extra-large,28px)));border-start-end-radius:var(--md-dialog-container-shape-start-end,var(--md-dialog-container-shape,var(--md-sys-shape-corner-extra-large,28px)));border-end-end-radius:var(--md-dialog-container-shape-end-end,var(--md-dialog-container-shape,var(--md-sys-shape-corner-extra-large,28px)));border-end-start-radius:var(--md-dialog-container-shape-end-start,var(--md-dialog-container-shape,var(--md-sys-shape-corner-extra-large,28px)));display:contents;margin:auto;max-height:min(560px,100% - 48px);max-width:min(560px,100% - 48px);min-height:140px;min-width:280px;position:fixed;height:fit-content;width:fit-content}dialog{background:rgba(0,0,0,0);border:none;border-radius:inherit;flex-direction:column;height:inherit;margin:inherit;max-height:inherit;max-width:inherit;min-height:inherit;min-width:inherit;outline:0;overflow:visible;padding:0;width:inherit}dialog[open]{display:flex}::backdrop{background:0 0}.scrim{background:var(--md-sys-color-scrim,#000);display:none;inset:0;opacity:32%;pointer-events:none;position:fixed;z-index:1}:host([open]) .scrim{display:flex}h2{all:unset;align-self:stretch}.headline{align-items:center;color:var(--md-dialog-headline-color,var(--md-sys-color-on-surface,#1d1b20));display:flex;flex-direction:column;font-family:var(--md-dialog-headline-font,var(--md-sys-typescale-headline-small-font,var(--md-ref-typeface-brand,Roboto)));font-size:var(--md-dialog-headline-size,var(--md-sys-typescale-headline-small-size,1.5rem));line-height:var(--md-dialog-headline-line-height,var(--md-sys-typescale-headline-small-line-height,2rem));font-weight:var(--md-dialog-headline-weight,var(--md-sys-typescale-headline-small-weight,var(--md-ref-typeface-weight-regular,400)));position:relative}slot[name=headline]::slotted(*){align-items:center;align-self:stretch;box-sizing:border-box;display:flex;gap:8px;padding:24px 24px 0}.icon{display:flex}slot[name=icon]::slotted(*){color:var(--md-dialog-icon-color,var(--md-sys-color-secondary,#625b71));fill:currentColor;font-size:var(--md-dialog-icon-size,24px);margin-top:24px;height:var(--md-dialog-icon-size,24px);width:var(--md-dialog-icon-size,24px)}.has-icon slot[name=headline]::slotted(*){justify-content:center;padding-top:16px}.scrollable slot[name=headline]::slotted(*){padding-bottom:16px}.scrollable.has-headline slot[name=content]::slotted(*){padding-top:8px}.container{border-radius:inherit;display:flex;flex-direction:column;flex-grow:1;overflow:hidden;position:relative;transform-origin:top}.container::before{background:var(--md-dialog-container-color,var(--md-sys-color-surface-container-high,#ece6f0));border-radius:inherit;content:"";inset:0;position:absolute}.scroller{display:flex;flex:1;flex-direction:column;overflow:hidden;z-index:1}.scrollable .scroller{overflow-y:scroll}.content{color:var(--md-dialog-supporting-text-color,var(--md-sys-color-on-surface-variant,#49454f));font-family:var(--md-dialog-supporting-text-font,var(--md-sys-typescale-body-medium-font,var(--md-ref-typeface-plain,Roboto)));font-size:var(--md-dialog-supporting-text-size,var(--md-sys-typescale-body-medium-size,.875rem));line-height:var(--md-dialog-supporting-text-line-height,var(--md-sys-typescale-body-medium-line-height,1.25rem));font-weight:var(--md-dialog-supporting-text-weight,var(--md-sys-typescale-body-medium-weight,var(--md-ref-typeface-weight-regular,400)));height:min-content;position:relative}slot[name=content]::slotted(*){box-sizing:border-box;padding:24px}.anchor{position:absolute}.top.anchor{top:0}.bottom.anchor{bottom:0}.actions{position:relative}slot[name=actions]::slotted(*){box-sizing:border-box;display:flex;gap:8px;justify-content:flex-end;padding:16px 24px 24px}.has-actions slot[name=content]::slotted(*){padding-bottom:8px}md-divider{display:none;position:absolute}.has-actions.show-bottom-divider .actions md-divider,.has-headline.show-top-divider .headline md-divider{display:flex}.headline md-divider{bottom:0}.actions md-divider{top:0}@media(forced-colors:active){dialog{outline:2px solid WindowText}}`
/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */;let Yh=class extends Hh{};Yh.styles=[qh],Yh=we([ce("md-dialog")],Yh);
/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
class Jh extends go{}
/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Xh=o`:host{--_container-height:var(--md-text-button-container-height, 40px);--_disabled-label-text-color:var(--md-text-button-disabled-label-text-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-label-text-opacity:var(--md-text-button-disabled-label-text-opacity, 0.38);--_focus-label-text-color:var(--md-text-button-focus-label-text-color, var(--md-sys-color-primary, #6750a4));--_hover-label-text-color:var(--md-text-button-hover-label-text-color, var(--md-sys-color-primary, #6750a4));--_hover-state-layer-color:var(--md-text-button-hover-state-layer-color, var(--md-sys-color-primary, #6750a4));--_hover-state-layer-opacity:var(--md-text-button-hover-state-layer-opacity, 0.08);--_label-text-color:var(--md-text-button-label-text-color, var(--md-sys-color-primary, #6750a4));--_label-text-font:var(--md-text-button-label-text-font, var(--md-sys-typescale-label-large-font, var(--md-ref-typeface-plain, Roboto)));--_label-text-line-height:var(--md-text-button-label-text-line-height, var(--md-sys-typescale-label-large-line-height, 1.25rem));--_label-text-size:var(--md-text-button-label-text-size, var(--md-sys-typescale-label-large-size, 0.875rem));--_label-text-weight:var(--md-text-button-label-text-weight, var(--md-sys-typescale-label-large-weight, var(--md-ref-typeface-weight-medium, 500)));--_pressed-label-text-color:var(--md-text-button-pressed-label-text-color, var(--md-sys-color-primary, #6750a4));--_pressed-state-layer-color:var(--md-text-button-pressed-state-layer-color, var(--md-sys-color-primary, #6750a4));--_pressed-state-layer-opacity:var(--md-text-button-pressed-state-layer-opacity, 0.12);--_disabled-icon-color:var(--md-text-button-disabled-icon-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-icon-opacity:var(--md-text-button-disabled-icon-opacity, 0.38);--_focus-icon-color:var(--md-text-button-focus-icon-color, var(--md-sys-color-primary, #6750a4));--_hover-icon-color:var(--md-text-button-hover-icon-color, var(--md-sys-color-primary, #6750a4));--_icon-color:var(--md-text-button-icon-color, var(--md-sys-color-primary, #6750a4));--_icon-size:var(--md-text-button-icon-size, 18px);--_pressed-icon-color:var(--md-text-button-pressed-icon-color, var(--md-sys-color-primary, #6750a4));--_container-shape-start-start:var(--md-text-button-container-shape-start-start, var(--md-text-button-container-shape, var(--md-sys-shape-corner-full, 9999px)));--_container-shape-start-end:var(--md-text-button-container-shape-start-end, var(--md-text-button-container-shape, var(--md-sys-shape-corner-full, 9999px)));--_container-shape-end-end:var(--md-text-button-container-shape-end-end, var(--md-text-button-container-shape, var(--md-sys-shape-corner-full, 9999px)));--_container-shape-end-start:var(--md-text-button-container-shape-end-start, var(--md-text-button-container-shape, var(--md-sys-shape-corner-full, 9999px)));--_leading-space:var(--md-text-button-leading-space, 12px);--_trailing-space:var(--md-text-button-trailing-space, 12px);--_with-leading-icon-leading-space:var(--md-text-button-with-leading-icon-leading-space, 12px);--_with-leading-icon-trailing-space:var(--md-text-button-with-leading-icon-trailing-space, 16px);--_with-trailing-icon-leading-space:var(--md-text-button-with-trailing-icon-leading-space, 16px);--_with-trailing-icon-trailing-space:var(--md-text-button-with-trailing-icon-trailing-space, 12px);--_container-color:none;--_disabled-container-color:none;--_disabled-container-opacity:0}`
/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */;let Zh=class extends Jh{};Zh.styles=[yo,Xh],Zh=we([ce("md-text-button")],Zh);
/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
class Qh{constructor(e,t){this.host=e,this.internalTypeaheadText=null,this.onClick=()=>{this.host.keepOpen||this.host.dispatchEvent(ki(this.host,{kind:Ci}))},this.onKeydown=e=>{if(this.host.href&&"Enter"===e.code){const e=this.getInteractiveElement();e instanceof HTMLAnchorElement&&e.click()}if(e.defaultPrevented)return;const t=e.code;this.host.keepOpen&&"Escape"!==t||Pi(t)&&(e.preventDefault(),this.host.dispatchEvent(ki(this.host,{kind:Si,key:t})))},this.getHeadlineElements=t.getHeadlineElements,this.getSupportingTextElements=t.getSupportingTextElements,this.getDefaultElements=t.getDefaultElements,this.getInteractiveElement=t.getInteractiveElement,this.host.addController(this)}get typeaheadText(){if(null!==this.internalTypeaheadText)return this.internalTypeaheadText;const e=this.getHeadlineElements(),t=[];return e.forEach((e=>{e.textContent&&e.textContent.trim()&&t.push(e.textContent.trim())})),0===t.length&&this.getDefaultElements().forEach((e=>{e.textContent&&e.textContent.trim()&&t.push(e.textContent.trim())})),0===t.length&&this.getSupportingTextElements().forEach((e=>{e.textContent&&e.textContent.trim()&&t.push(e.textContent.trim())})),t.join(" ")}get tagName(){switch(this.host.type){case"link":return"a";case"button":return"button";default:return"li"}}get role(){return"option"===this.host.type?"option":"menuitem"}hostConnected(){this.host.toggleAttribute("md-menu-item",!0)}hostUpdate(){this.host.href&&(this.host.type="link")}setTypeaheadText(e){this.internalTypeaheadText=e}}
/**
 * @license
 * Copyright 2022 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Kh extends ae{constructor(){super(...arguments),this.disabled=!1,this.type="menuitem",this.href="",this.target="",this.keepOpen=!1,this.selected=!1,this.menuItemController=new Qh(this,{getHeadlineElements:()=>this.headlineElements,getSupportingTextElements:()=>this.supportingTextElements,getDefaultElements:()=>this.defaultElements,getInteractiveElement:()=>this.listItemRoot})}get typeaheadText(){return this.menuItemController.typeaheadText}set typeaheadText(e){this.menuItemController.setTypeaheadText(e)}render(){return this.renderListItem(V` <md-item> <div slot="container"> ${this.renderRipple()} ${this.renderFocusRing()} </div> <slot name="start" slot="start"></slot> <slot name="end" slot="end"></slot> ${this.renderBody()} </md-item> `)}renderListItem(e){const t="link"===this.type;let r;switch(this.menuItemController.tagName){case"a":r=wt`a`;break;case"button":r=wt`button`;break;default:r=wt`li`}const i=t&&this.target?this.target:G;return kt`
      <${r}
        id="item"
        tabindex=${this.disabled&&!t?-1:0}
        role=${this.menuItemController.role}
        aria-label=${this.ariaLabel||G}
        aria-selected=${this.ariaSelected||G}
        aria-checked=${this.ariaChecked||G}
        aria-expanded=${this.ariaExpanded||G}
        aria-haspopup=${this.ariaHasPopup||G}
        class="list-item ${Je(this.getRenderClasses())}"
        href=${this.href||G}
        target=${i}
        @click=${this.menuItemController.onClick}
        @keydown=${this.menuItemController.onKeydown}
      >${e}</${r}>
    `}renderRipple(){return V` <md-ripple part="ripple" for="item" ?disabled="${this.disabled}"></md-ripple>`}renderFocusRing(){return V` <md-focus-ring part="focus-ring" for="item" inward></md-focus-ring>`}getRenderClasses(){return{disabled:this.disabled,selected:this.selected}}renderBody(){return V` <slot></slot> <slot name="overline" slot="overline"></slot> <slot name="headline" slot="headline"></slot> <slot name="supporting-text" slot="supporting-text"></slot> <slot name="trailing-supporting-text" slot="trailing-supporting-text"></slot> `}focus(){this.listItemRoot?.focus()}}Ie(Kh),Kh.shadowRootOptions={...ae.shadowRootOptions,delegatesFocus:!0},we([ue({type:Boolean,reflect:!0})],Kh.prototype,"disabled",void 0),we([ue()],Kh.prototype,"type",void 0),we([ue()],Kh.prototype,"href",void 0),we([ue()],Kh.prototype,"target",void 0),we([ue({type:Boolean,attribute:"keep-open"})],Kh.prototype,"keepOpen",void 0),we([ue({type:Boolean})],Kh.prototype,"selected",void 0),we([me(".list-item")],Kh.prototype,"listItemRoot",void 0),we([be({slot:"headline"})],Kh.prototype,"headlineElements",void 0),we([be({slot:"supporting-text"})],Kh.prototype,"supportingTextElements",void 0),we([ye({slot:""})],Kh.prototype,"defaultElements",void 0),we([ue({attribute:"typeahead-text"})],Kh.prototype,"typeaheadText",null);
/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
const eu=o`:host{display:flex;--md-ripple-hover-color:var(--md-menu-item-hover-state-layer-color, var(--md-sys-color-on-surface, #1d1b20));--md-ripple-hover-opacity:var(--md-menu-item-hover-state-layer-opacity, 0.08);--md-ripple-pressed-color:var(--md-menu-item-pressed-state-layer-color, var(--md-sys-color-on-surface, #1d1b20));--md-ripple-pressed-opacity:var(--md-menu-item-pressed-state-layer-opacity, 0.12)}:host([disabled]){opacity:var(--md-menu-item-disabled-opacity,.3);pointer-events:none}md-focus-ring{z-index:1;--md-focus-ring-shape:8px}a,button,li{background:0 0;border:none;padding:0;margin:0;text-align:unset;text-decoration:none}.list-item{border-radius:inherit;display:flex;flex:1;max-width:inherit;min-width:inherit;outline:0;-webkit-tap-highlight-color:transparent}.list-item:not(.disabled){cursor:pointer}[slot=container]{pointer-events:none}md-ripple{border-radius:inherit}md-item{border-radius:inherit;flex:1;color:var(--md-menu-item-label-text-color,var(--md-sys-color-on-surface,#1d1b20));font-family:var(--md-menu-item-label-text-font,var(--md-sys-typescale-body-large-font,var(--md-ref-typeface-plain,Roboto)));font-size:var(--md-menu-item-label-text-size,var(--md-sys-typescale-body-large-size,1rem));line-height:var(--md-menu-item-label-text-line-height,var(--md-sys-typescale-body-large-line-height,1.5rem));font-weight:var(--md-menu-item-label-text-weight,var(--md-sys-typescale-body-large-weight,var(--md-ref-typeface-weight-regular,400)));min-height:var(--md-menu-item-one-line-container-height,56px);padding-top:var(--md-menu-item-top-space,12px);padding-bottom:var(--md-menu-item-bottom-space,12px);padding-inline-start:var(--md-menu-item-leading-space,16px);padding-inline-end:var(--md-menu-item-trailing-space,16px)}md-item[multiline]{min-height:var(--md-menu-item-two-line-container-height,72px)}[slot=supporting-text]{color:var(--md-menu-item-supporting-text-color,var(--md-sys-color-on-surface-variant,#49454f));font-family:var(--md-menu-item-supporting-text-font,var(--md-sys-typescale-body-medium-font,var(--md-ref-typeface-plain,Roboto)));font-size:var(--md-menu-item-supporting-text-size,var(--md-sys-typescale-body-medium-size,.875rem));line-height:var(--md-menu-item-supporting-text-line-height,var(--md-sys-typescale-body-medium-line-height,1.25rem));font-weight:var(--md-menu-item-supporting-text-weight,var(--md-sys-typescale-body-medium-weight,var(--md-ref-typeface-weight-regular,400)))}[slot=trailing-supporting-text]{color:var(--md-menu-item-trailing-supporting-text-color,var(--md-sys-color-on-surface-variant,#49454f));font-family:var(--md-menu-item-trailing-supporting-text-font,var(--md-sys-typescale-label-small-font,var(--md-ref-typeface-plain,Roboto)));font-size:var(--md-menu-item-trailing-supporting-text-size,var(--md-sys-typescale-label-small-size,.6875rem));line-height:var(--md-menu-item-trailing-supporting-text-line-height,var(--md-sys-typescale-label-small-line-height,1rem));font-weight:var(--md-menu-item-trailing-supporting-text-weight,var(--md-sys-typescale-label-small-weight,var(--md-ref-typeface-weight-medium,500)))}:is([slot=start],[slot=end])::slotted(*){fill:currentColor}[slot=start]{color:var(--md-menu-item-leading-icon-color,var(--md-sys-color-on-surface-variant,#49454f))}[slot=end]{color:var(--md-menu-item-trailing-icon-color,var(--md-sys-color-on-surface-variant,#49454f))}.list-item{background-color:var(--md-menu-item-container-color,transparent)}.list-item.selected{background-color:var(--md-menu-item-selected-container-color,var(--md-sys-color-secondary-container,#e8def8))}.selected:not(.disabled) ::slotted(*){color:var(--md-menu-item-selected-label-text-color,var(--md-sys-color-on-secondary-container,#1d192b))}@media(forced-colors:active){:host([disabled]),:host([disabled]) slot{color:GrayText;opacity:1}.list-item{position:relative}.list-item.selected::before{content:"";position:absolute;inset:0;box-sizing:border-box;border-radius:inherit;pointer-events:none;border:3px double CanvasText}}`
/**
 * @license
 * Copyright 2022 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */;let tu=class extends Kh{};tu.styles=[eu],tu=we([ce("md-menu-item")],tu);
/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
class ru extends go{renderElevationOrOutline(){return V`<md-elevation part="elevation"></md-elevation>`}}
/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const iu=o`:host{--_container-color:var(--md-filled-button-container-color, var(--md-sys-color-primary, #6750a4));--_container-elevation:var(--md-filled-button-container-elevation, 0);--_container-height:var(--md-filled-button-container-height, 40px);--_container-shadow-color:var(--md-filled-button-container-shadow-color, var(--md-sys-color-shadow, #000));--_disabled-container-color:var(--md-filled-button-disabled-container-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-container-elevation:var(--md-filled-button-disabled-container-elevation, 0);--_disabled-container-opacity:var(--md-filled-button-disabled-container-opacity, 0.12);--_disabled-label-text-color:var(--md-filled-button-disabled-label-text-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-label-text-opacity:var(--md-filled-button-disabled-label-text-opacity, 0.38);--_focus-container-elevation:var(--md-filled-button-focus-container-elevation, 0);--_focus-label-text-color:var(--md-filled-button-focus-label-text-color, var(--md-sys-color-on-primary, #fff));--_hover-container-elevation:var(--md-filled-button-hover-container-elevation, 1);--_hover-label-text-color:var(--md-filled-button-hover-label-text-color, var(--md-sys-color-on-primary, #fff));--_hover-state-layer-color:var(--md-filled-button-hover-state-layer-color, var(--md-sys-color-on-primary, #fff));--_hover-state-layer-opacity:var(--md-filled-button-hover-state-layer-opacity, 0.08);--_label-text-color:var(--md-filled-button-label-text-color, var(--md-sys-color-on-primary, #fff));--_label-text-font:var(--md-filled-button-label-text-font, var(--md-sys-typescale-label-large-font, var(--md-ref-typeface-plain, Roboto)));--_label-text-line-height:var(--md-filled-button-label-text-line-height, var(--md-sys-typescale-label-large-line-height, 1.25rem));--_label-text-size:var(--md-filled-button-label-text-size, var(--md-sys-typescale-label-large-size, 0.875rem));--_label-text-weight:var(--md-filled-button-label-text-weight, var(--md-sys-typescale-label-large-weight, var(--md-ref-typeface-weight-medium, 500)));--_pressed-container-elevation:var(--md-filled-button-pressed-container-elevation, 0);--_pressed-label-text-color:var(--md-filled-button-pressed-label-text-color, var(--md-sys-color-on-primary, #fff));--_pressed-state-layer-color:var(--md-filled-button-pressed-state-layer-color, var(--md-sys-color-on-primary, #fff));--_pressed-state-layer-opacity:var(--md-filled-button-pressed-state-layer-opacity, 0.12);--_disabled-icon-color:var(--md-filled-button-disabled-icon-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-icon-opacity:var(--md-filled-button-disabled-icon-opacity, 0.38);--_focus-icon-color:var(--md-filled-button-focus-icon-color, var(--md-sys-color-on-primary, #fff));--_hover-icon-color:var(--md-filled-button-hover-icon-color, var(--md-sys-color-on-primary, #fff));--_icon-color:var(--md-filled-button-icon-color, var(--md-sys-color-on-primary, #fff));--_icon-size:var(--md-filled-button-icon-size, 18px);--_pressed-icon-color:var(--md-filled-button-pressed-icon-color, var(--md-sys-color-on-primary, #fff));--_container-shape-start-start:var(--md-filled-button-container-shape-start-start, var(--md-filled-button-container-shape, var(--md-sys-shape-corner-full, 9999px)));--_container-shape-start-end:var(--md-filled-button-container-shape-start-end, var(--md-filled-button-container-shape, var(--md-sys-shape-corner-full, 9999px)));--_container-shape-end-end:var(--md-filled-button-container-shape-end-end, var(--md-filled-button-container-shape, var(--md-sys-shape-corner-full, 9999px)));--_container-shape-end-start:var(--md-filled-button-container-shape-end-start, var(--md-filled-button-container-shape, var(--md-sys-shape-corner-full, 9999px)));--_leading-space:var(--md-filled-button-leading-space, 24px);--_trailing-space:var(--md-filled-button-trailing-space, 24px);--_with-leading-icon-leading-space:var(--md-filled-button-with-leading-icon-leading-space, 16px);--_with-leading-icon-trailing-space:var(--md-filled-button-with-leading-icon-trailing-space, 24px);--_with-trailing-icon-leading-space:var(--md-filled-button-with-trailing-icon-leading-space, 24px);--_with-trailing-icon-trailing-space:var(--md-filled-button-with-trailing-icon-trailing-space, 16px)}`
/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */;let nu=class extends ru{};nu.styles=[yo,Uh,iu],nu=we([ce("md-filled-button")],nu);const{round:ou,floor:su,PI:au}=Math,lu=function(e){return e%360+(e<0?360:0)},cu=function(e,t){return t*ou(e/t)},du=function(e){return 180*e/au%360},hu=function(e,t){return(e=(t=t||!1)?e:e%360)*au/180},uu=function(e,t){if(void 0===t)t=void 0===e?1:e,e=0;else if(t<e){const r=e;e=t,t=r}return su(Math.random()*(t-e+1)+e)},{cos:pu,sin:fu,atan2:mu}=Math,gu=function(e,t){var r=hu(e.y),i=hu(t.y),n=e.x,o=t.x,s=hu(o-n),a=fu(s)*pu(i),l=pu(r)*fu(i)-fu(r)*pu(i)*pu(s),c=du(mu(a,l))-22.5;return c<0&&(c+=360),["NE","E","SE","S","SW","W","NW","N"][c=parseInt(c/45)]},vu=function(e,t){var r=e.x,i=e.y;return(r-=t.x)*r+(i-=t.y)*i},bu=function(e,t){return Math.sqrt(vu(e,t))},yu={Point:1,Line:2,Ellipse:3,Rect:4,Polyline:5,Polygon:6,Curve:7,Path:8},{abs:xu,cos:wu,sin:_u,sqrt:ku,min:Cu,max:Su,atan2:Au,round:Pu,pow:Tu,PI:Eu}=Math,Iu=function(e,t){if(!(this instanceof Iu))return new Iu(e,t);if("string"==typeof e){var r=e.split(-1===e.indexOf("@")?" ":"@");e=parseFloat(r[0]),t=parseFloat(r[1])}else Object(e)===e&&(t=e.y,e=e.x);this.x=void 0===e?0:e,this.y=void 0===t?0:t};Iu.fromPolar=function(e,t,r){r=new Iu(r);var i=xu(e*wu(t)),n=xu(e*_u(t)),o=lu(du(t));return o<90?n=-n:o<180?(i=-i,n=-n):o<270&&(i=-i),new Iu(r.x+i,r.y+n)},Iu.random=function(e,t,r,i){return new Iu(uu(e,t),uu(r,i))},Iu.prototype={type:yu.Point,chooseClosest:function(e){var t=e.length;if(1===t)return new Iu(e[0]);for(var r=null,i=1/0,n=0;n<t;n++){var o=new Iu(e[n]),s=this.squaredDistance(o);s<i&&(r=o,i=s)}return r},adhereToRect:function(e){return e.containsPoint(this)||(this.x=Cu(Su(this.x,e.x),e.x+e.width),this.y=Cu(Su(this.y,e.y),e.y+e.height)),this},angleBetween:function(e,t){var r=this.equals(e)||this.equals(t)?NaN:this.theta(t)-this.theta(e);return r<0&&(r+=360),r},bearing:function(e){return gu(this,e)},changeInAngle:function(e,t,r){return this.clone().offset(-e,-t).theta(r)-this.theta(r)},clone:function(){return new Iu(this)},cross:function(e,t){return e&&t?(t.x-this.x)*(e.y-this.y)-(t.y-this.y)*(e.x-this.x):NaN},difference:function(e,t){return Object(e)===e&&(t=e.y,e=e.x),new Iu(this.x-(e||0),this.y-(t||0))},distance:function(e){return bu(this,e)},dot:function(e){return e?this.x*e.x+this.y*e.y:NaN},equals:function(e){return!!e&&this.x===e.x&&this.y===e.y},lerp:function(e,t){var r=this.x,i=this.y;return new Iu((1-t)*r+t*e.x,(1-t)*i+t*e.y)},magnitude:function(){return ku(this.x*this.x+this.y*this.y)||.01},manhattanDistance:function(e){return xu(e.x-this.x)+xu(e.y-this.y)},move:function(e,t){var r=hu(new Iu(e).theta(this));return this.offset(wu(r)*t,-_u(r)*t)},normalize:function(e){var t=(e||1)/this.magnitude();return this.scale(t,t)},offset:function(e,t){return Object(e)===e&&(t=e.y,e=e.x),this.x+=e||0,this.y+=t||0,this},reflection:function(e){return new Iu(e).move(this,this.distance(e))},rotate:function(e,t){if(0===t)return this;e=e||new Iu(0,0),t=hu(lu(-t));var r=wu(t),i=_u(t),n=r*(this.x-e.x)-i*(this.y-e.y)+e.x,o=i*(this.x-e.x)+r*(this.y-e.y)+e.y;return this.x=n,this.y=o,this},round:function(e){let t=1;if(e)switch(e){case 1:t=10;break;case 2:t=100;break;case 3:t=1e3;break;default:t=Tu(10,e)}return this.x=Pu(this.x*t)/t,this.y=Pu(this.y*t)/t,this},scale:function(e,t,r){return r=r&&new Iu(r)||new Iu(0,0),this.x=r.x+e*(this.x-r.x),this.y=r.y+t*(this.y-r.y),this},snapToGrid:function(e,t){return this.x=cu(this.x,e),this.y=cu(this.y,t||e),this},squaredDistance:function(e){return vu(this,e)},theta:function(e){var t=-((e=new Iu(e)).y-this.y),r=e.x-this.x,i=Au(t,r);return i<0&&(i=2*Eu+i),180*i/Eu},toJSON:function(){return{x:this.x,y:this.y}},toPolar:function(e){e=e&&new Iu(e)||new Iu(0,0);var t=this.x,r=this.y;return this.x=ku((t-e.x)*(t-e.x)+(r-e.y)*(r-e.y)),this.y=hu(e.theta(new Iu(t,r))),this},toString:function(){return this.x+"@"+this.y},serialize:function(){return this.x+","+this.y},update:function(e,t){return Object(e)===e&&(t=e.y,e=e.x),this.x=e||0,this.y=t||0,this},vectorAngle:function(e){return new Iu(0,0).angleBetween(this,e)}},Iu.prototype.translate=Iu.prototype.offset;const Lu=Iu,{max:Ou,min:Mu}=Math,Ru=function(e,t){return this instanceof Ru?e instanceof Ru?new Ru(e.start,e.end):(this.start=new Iu(e),void(this.end=new Iu(t))):new Ru(e,t)};Ru.prototype={type:yu.Line,angle:function(){var e=new Iu(this.start.x+1,this.start.y);return this.start.angleBetween(this.end,e)},bbox:function(){var e=Mu(this.start.x,this.end.x),t=Mu(this.start.y,this.end.y),r=Ou(this.start.x,this.end.x),i=Ou(this.start.y,this.end.y);return new Yu(e,t,r-e,i-t)},bearing:function(){return gu(this.start,this.end)},clone:function(){return new Ru(this.start,this.end)},closestPoint:function(e){return this.pointAt(this.closestPointNormalizedLength(e))},closestPointLength:function(e){return this.closestPointNormalizedLength(e)*this.length()},closestPointNormalizedLength:function(e){var t=this.vector().dot(new Ru(this.start,e).vector()),r=Mu(1,Ou(0,t/this.squaredLength()));return r!=r?0:r},closestPointTangent:function(e){return this.tangentAt(this.closestPointNormalizedLength(e))},containsPoint:function(e){var t=this.start,r=this.end;if(0!==t.cross(e,r))return!1;var i=this.length();return!(new Ru(t,e).length()>i)&&!(new Ru(e,r).length()>i)},divideAt:function(e){var t=this.pointAt(e);return[new Ru(this.start,t),new Ru(t,this.end)]},divideAtLength:function(e){var t=this.pointAtLength(e);return[new Ru(this.start,t),new Ru(t,this.end)]},equals:function(e){return!!e&&this.start.x===e.start.x&&this.start.y===e.start.y&&this.end.x===e.end.x&&this.end.y===e.end.y},intersect:function(e,t){if(e&&e.intersectionWithLine){var r=e.intersectionWithLine(this,t);return r&&e instanceof Ru&&(r=r[0]),r}return null},intersectionWithLine:function(e){var t=new Iu(this.end.x-this.start.x,this.end.y-this.start.y),r=new Iu(e.end.x-e.start.x,e.end.y-e.start.y),i=t.x*r.y-t.y*r.x,n=new Iu(e.start.x-this.start.x,e.start.y-this.start.y),o=n.x*r.y-n.y*r.x,s=n.x*t.y-n.y*t.x;if(0===i||o*i<0||s*i<0)return null;if(i>0){if(o>i||s>i)return null}else if(o<i||s<i)return null;return[new Iu(this.start.x+o*t.x/i,this.start.y+o*t.y/i)]},isDifferentiable:function(){return!this.start.equals(this.end)},length:function(){return bu(this.start,this.end)},midpoint:function(){return new Iu((this.start.x+this.end.x)/2,(this.start.y+this.end.y)/2)},parallel:function(e){const t=this.clone();if(!this.isDifferentiable())return t;const{start:r,end:i}=t,n=r.clone().rotate(i,270),o=i.clone().rotate(r,90);return r.move(o,e),i.move(n,e),t},pointAt:function(e){var t=this.start,r=this.end;return e<=0?t.clone():e>=1?r.clone():t.lerp(r,e)},pointAtLength:function(e){var t=this.start,r=this.end,i=!0;e<0&&(i=!1,e=-e);var n=this.length();return e>=n?i?r.clone():t.clone():this.pointAt((i?e:n-e)/n)},pointOffset:function(e){e=new Iu(e);var t=this.start,r=this.end;return((r.x-t.x)*(e.y-t.y)-(r.y-t.y)*(e.x-t.x))/this.length()},rotate:function(e,t){return this.start.rotate(e,t),this.end.rotate(e,t),this},round:function(e){return this.start.round(e),this.end.round(e),this},scale:function(e,t,r){return this.start.scale(e,t,r),this.end.scale(e,t,r),this},setLength:function(e){var t=this.length();if(!t)return this;var r=e/t;return this.scale(r,r,this.start)},squaredLength:function(){return vu(this.start,this.end)},tangentAt:function(e){if(!this.isDifferentiable())return null;var t=this.start,r=this.end,i=this.pointAt(e),n=new Ru(t,r);return n.translate(i.x-t.x,i.y-t.y),n},tangentAtLength:function(e){if(!this.isDifferentiable())return null;var t=this.start,r=this.end,i=this.pointAtLength(e),n=new Ru(t,r);return n.translate(i.x-t.x,i.y-t.y),n},toString:function(){return this.start.toString()+" "+this.end.toString()},serialize:function(){return this.start.serialize()+" "+this.end.serialize()},translate:function(e,t){return this.start.translate(e,t),this.end.translate(e,t),this},vector:function(){return new Iu(this.end.x-this.start.x,this.end.y-this.start.y)}},Ru.prototype.intersection=Ru.prototype.intersect;const $u=Ru,{sqrt:Nu,round:Du,pow:zu}=Math,Bu=function(e,t,r){return this instanceof Bu?e instanceof Bu?new Bu(new Iu(e.x,e.y),e.a,e.b):(e=new Iu(e),this.x=e.x,this.y=e.y,this.a=t,void(this.b=r)):new Bu(e,t,r)};Bu.fromRect=function(e){return e=new Yu(e),new Bu(e.center(),e.width/2,e.height/2)},Bu.prototype={type:yu.Ellipse,bbox:function(){return new Yu(this.x-this.a,this.y-this.b,2*this.a,2*this.b)},center:function(){return new Iu(this.x,this.y)},clone:function(){return new Bu(this)},containsPoint:function(e){return this.normalizedDistance(e)<=1},equals:function(e){return!!e&&e.x===this.x&&e.y===this.y&&e.a===this.a&&e.b===this.b},inflate:function(e,t){return void 0===e&&(e=0),void 0===t&&(t=e),this.a+=2*e,this.b+=2*t,this},intersectionWithLine:function(e){var t=[],r=e.start,i=e.end,n=this.a,o=this.b,s=e.vector(),a=r.difference(new Iu(this)),l=new Iu(s.x/(n*n),s.y/(o*o)),c=new Iu(a.x/(n*n),a.y/(o*o)),d=s.dot(l),h=s.dot(c),u=h*h-d*(a.dot(c)-1);if(u<0)return null;if(u>0){var p=Nu(u),f=(-h-p)/d,m=(-h+p)/d;if((f<0||1<f)&&(m<0||1<m))return null;0<=f&&f<=1&&t.push(r.lerp(i,f)),0<=m&&m<=1&&t.push(r.lerp(i,m))}else{var g=-h/d;if(!(0<=g&&g<=1))return null;t.push(r.lerp(i,g))}return t},intersectionWithLineFromCenterToPoint:function(e,t){e=new Iu(e),t&&e.rotate(new Iu(this.x,this.y),t);var r,i=e.x-this.x,n=e.y-this.y;if(0===i)return r=this.bbox().pointNearestToPoint(e),t?r.rotate(new Iu(this.x,this.y),-t):r;var o=n/i,s=o*o,a=this.a*this.a,l=this.b*this.b,c=Nu(1/(1/a+s/l)),d=o*(c=i<0?-c:c);return r=new Iu(this.x+c,this.y+d),t?r.rotate(new Iu(this.x,this.y),-t):r},normalizedDistance:function(e){var t=e.x,r=e.y,i=this.a,n=this.b,o=this.x,s=this.y;return(t-o)*(t-o)/(i*i)+(r-s)*(r-s)/(n*n)},round:function(e){let t=1;if(e)switch(e){case 1:t=10;break;case 2:t=100;break;case 3:t=1e3;break;default:t=zu(10,e)}return this.x=Du(this.x*t)/t,this.y=Du(this.y*t)/t,this.a=Du(this.a*t)/t,this.b=Du(this.b*t)/t,this},tangentTheta:function(e){var t,r,i=e.x,n=e.y,o=this.a,s=this.b,a=this.bbox().center(),l=a.x,c=a.y,d=i>a.x+o/2,h=i<a.x-o/2;return d||h?r=o*o/(i-l)-o*o*(n-c)*((t=i>a.x?n-30:n+30)-c)/(s*s*(i-l))+l:t=s*s/(n-c)-s*s*(i-l)*((r=n>a.y?i+30:i-30)-l)/(o*o*(n-c))+c,new Iu(r,t).theta(e)},toString:function(){return new Iu(this.x,this.y).toString()+" "+this.a+" "+this.b}};const Fu=Bu,{abs:Uu,cos:Vu,sin:ju,min:Gu,max:Hu,round:Wu,pow:qu}=Math,Yu=function(e,t,r,i){if(!(this instanceof Yu))return new Yu(e,t,r,i);Object(e)===e&&(t=e.y,r=e.width,i=e.height,e=e.x),this.x=void 0===e?0:e,this.y=void 0===t?0:t,this.width=void 0===r?0:r,this.height=void 0===i?0:i};Yu.fromEllipse=function(e){return e=new Bu(e),new Yu(e.x-e.a,e.y-e.b,2*e.a,2*e.b)},Yu.fromPointUnion=function(...e){if(0===e.length)return null;const t=new Iu;let r,i,n,o;r=i=1/0,n=o=-1/0;for(let s=0;s<e.length;s++){t.update(e[s]);const a=t.x,l=t.y;a<r&&(r=a),a>n&&(n=a),l<i&&(i=l),l>o&&(o=l)}return new Yu(r,i,n-r,o-i)},Yu.fromRectUnion=function(...e){if(0===e.length)return null;const t=new Yu;let r,i,n,o;r=i=1/0,n=o=-1/0;for(let s=0;s<e.length;s++){t.update(e[s]);const a=t.x,l=t.y,c=a+t.width,d=l+t.height;a<r&&(r=a),c>n&&(n=c),l<i&&(i=l),d>o&&(o=d)}return new Yu(r,i,n-r,o-i)},Yu.prototype={type:yu.Rect,bbox:function(e){return this.clone().rotateAroundCenter(e)},rotateAroundCenter:function(e){if(!e)return this;const{width:t,height:r}=this,i=hu(e),n=Uu(ju(i)),o=Uu(Vu(i)),s=t*o+r*n,a=t*n+r*o;return this.x+=(t-s)/2,this.y+=(r-a)/2,this.width=s,this.height=a,this},bottomLeft:function(){return new Iu(this.x,this.y+this.height)},bottomLine:function(){return new Ru(this.bottomLeft(),this.bottomRight())},bottomMiddle:function(){return new Iu(this.x+this.width/2,this.y+this.height)},center:function(){return new Iu(this.x+this.width/2,this.y+this.height/2)},clone:function(){return new Yu(this)},containsPoint:function(e){return e instanceof Iu||(e=new Iu(e)),e.x>=this.x&&e.x<=this.x+this.width&&e.y>=this.y&&e.y<=this.y+this.height},containsRect:function(e){var t=new Yu(this).normalize(),r=new Yu(e).normalize(),i=t.width,n=t.height,o=r.width,s=r.height;if(!(i&&n&&o&&s))return!1;var a=t.x,l=t.y,c=r.x,d=r.y;return o+=c,i+=a,s+=d,n+=l,a<=c&&o<=i&&l<=d&&s<=n},corner:function(){return new Iu(this.x+this.width,this.y+this.height)},equals:function(e){var t=new Yu(this).normalize(),r=new Yu(e).normalize();return t.x===r.x&&t.y===r.y&&t.width===r.width&&t.height===r.height},inflate:function(e,t){return void 0===e&&(e=0),void 0===t&&(t=e),this.x-=e,this.y-=t,this.width+=2*e,this.height+=2*t,this},intersect:function(e){var t=this.origin(),r=this.corner(),i=e.origin(),n=e.corner();if(n.x<=t.x||n.y<=t.y||i.x>=r.x||i.y>=r.y)return null;var o=Hu(t.x,i.x),s=Hu(t.y,i.y);return new Yu(o,s,Gu(r.x,n.x)-o,Gu(r.y,n.y)-s)},intersectionWithLine:function(e){var t,r,i=this,n=[i.topLine(),i.rightLine(),i.bottomLine(),i.leftLine()],o=[],s=[],a=n.length;for(r=0;r<a;r++)null!==(t=e.intersect(n[r]))&&s.indexOf(t.toString())<0&&(o.push(t),s.push(t.toString()));return o.length>0?o:null},intersectionWithLineFromCenterToPoint:function(e,t){e=new Iu(e);var r,i=new Iu(this.x+this.width/2,this.y+this.height/2);t&&e.rotate(i,t);for(var n=[this.topLine(),this.rightLine(),this.bottomLine(),this.leftLine()],o=new Ru(i,e),s=n.length-1;s>=0;--s){var a=n[s].intersection(o);if(null!==a){r=a;break}}return r&&t&&r.rotate(i,-t),r},leftLine:function(){return new Ru(this.topLeft(),this.bottomLeft())},leftMiddle:function(){return new Iu(this.x,this.y+this.height/2)},maxRectScaleToFit:function(e,t){var r,i,n,o,s,a,l,c;e=new Yu(e),t||(t=e.center());var d=t.x,h=t.y;r=i=n=o=s=a=l=c=1/0;var u=e.topLeft();u.x<d&&(r=(this.x-d)/(u.x-d)),u.y<h&&(s=(this.y-h)/(u.y-h));var p=e.bottomRight();p.x>d&&(i=(this.x+this.width-d)/(p.x-d)),p.y>h&&(a=(this.y+this.height-h)/(p.y-h));var f=e.topRight();f.x>d&&(n=(this.x+this.width-d)/(f.x-d)),f.y<h&&(l=(this.y-h)/(f.y-h));var m=e.bottomLeft();return m.x<d&&(o=(this.x-d)/(m.x-d)),m.y>h&&(c=(this.y+this.height-h)/(m.y-h)),{sx:Gu(r,i,n,o),sy:Gu(s,a,l,c)}},maxRectUniformScaleToFit:function(e,t){var r=this.maxRectScaleToFit(e,t);return Gu(r.sx,r.sy)},moveAndExpand:function(e){return this.x+=e.x||0,this.y+=e.y||0,this.width+=e.width||0,this.height+=e.height||0,this},normalize:function(){var e=this.x,t=this.y,r=this.width,i=this.height;return this.width<0&&(e=this.x+this.width,r=-this.width),this.height<0&&(t=this.y+this.height,i=-this.height),this.x=e,this.y=t,this.width=r,this.height=i,this},offset:function(e,t){return Iu.prototype.offset.call(this,e,t)},origin:function(){return new Iu(this.x,this.y)},pointNearestToPoint:function(e){if(e=new Iu(e),this.containsPoint(e))switch(this.sideNearestToPoint(e)){case"right":return new Iu(this.x+this.width,e.y);case"left":return new Iu(this.x,e.y);case"bottom":return new Iu(e.x,this.y+this.height);case"top":return new Iu(e.x,this.y)}return e.adhereToRect(this)},rightLine:function(){return new Ru(this.topRight(),this.bottomRight())},rightMiddle:function(){return new Iu(this.x+this.width,this.y+this.height/2)},round:function(e){let t=1;if(e)switch(e){case 1:t=10;break;case 2:t=100;break;case 3:t=1e3;break;default:t=qu(10,e)}return this.x=Wu(this.x*t)/t,this.y=Wu(this.y*t)/t,this.width=Wu(this.width*t)/t,this.height=Wu(this.height*t)/t,this},scale:function(e,t,r){return r=this.origin().scale(e,t,r),this.x=r.x,this.y=r.y,this.width*=e,this.height*=t,this},sideNearestToPoint:function(e){var t=(e=new Iu(e)).x-this.x,r=this.x+this.width-e.x,i=e.y-this.y,n=t,o="left";return r<n&&(n=r,o="right"),i<n&&(n=i,o="top"),this.y+this.height-e.y<n&&(o="bottom"),o},snapToGrid:function(e,t){var r=this.origin().snapToGrid(e,t),i=this.corner().snapToGrid(e,t);return this.x=r.x,this.y=r.y,this.width=i.x-r.x,this.height=i.y-r.y,this},toJSON:function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},topLine:function(){return new Ru(this.topLeft(),this.topRight())},topMiddle:function(){return new Iu(this.x+this.width/2,this.y)},topRight:function(){return new Iu(this.x+this.width,this.y)},toString:function(){return this.origin().toString()+" "+this.corner().toString()},union:function(e){return Yu.fromRectUnion(this,e)},update:function(e,t,r,i){return Object(e)===e&&(t=e.y,r=e.width,i=e.height,e=e.x),this.x=e||0,this.y=t||0,this.width=r||0,this.height=i||0,this}},Yu.prototype.bottomRight=Yu.prototype.corner,Yu.prototype.topLeft=Yu.prototype.origin,Yu.prototype.translate=Yu.prototype.offset;const Ju=Yu;function Xu(e){const t=e.trim();if(""===t)return[];const r=[],i=t.split(/\b\s*,\s*|,\s*|\s+/),n=i.length;for(let e=0;e<n;e+=2)r.push({x:+i[e],y:+i[e+1]});return r}function Zu(e){const t=e.length;if(0===t)return[];const r=[];for(let i=0;i<t;i++){const t=e[i].clone();r.push(t)}return r}function Qu(e){const{abs:t}=Math;var r,i,n,o=e.length;if(0===o)return[];for(r=0;r<o;r++)(void 0===n||e[r].y<n.y||e[r].y===n.y&&e[r].x>n.x)&&(n=e[r]);var s=[];for(r=0;r<o;r++){var a=n.theta(e[r]);0===a&&(a=360);var l=[e[r],r,a];s.push(l)}if(s.sort((function(e,t){var r=e[2]-t[2];return 0===r&&(r=t[1]-e[1]),r})),s.length>2){var c=s[s.length-1];s.unshift(c)}for(var d,h,u,p,f,m,g,v={},b=[];0!==s.length;)if(h=(d=s.pop())[0],!v.hasOwnProperty(d[0]+"@@"+d[1]))for(var y=!1;!y;)if(b.length<2)b.push(d),y=!0;else{p=(u=b.pop())[0];var x=(m=(f=b.pop())[0]).cross(p,h);if(x<0)b.push(f),b.push(u),b.push(d),y=!0;else if(0===x){var w=p.angleBetween(m,h);t(w-180)<1e-10||p.equals(h)||m.equals(p)?(v[u[0]+"@@"+u[1]]=p,b.push(f)):t((w+1)%360-1)<1e-10&&(b.push(f),s.push(u))}else v[u[0]+"@@"+u[1]]=p,b.push(f)}b.length>2&&b.pop();var _=-1;for(i=b.length,r=0;r<i;r++){var k=b[r][1];(void 0===g||k<g)&&(g=k,_=r)}var C=[];if(_>0){var S=b.slice(_),A=b.slice(0,_);C=S.concat(A)}else C=b;var P=[];for(i=C.length,r=0;r<i;r++)P.push(C[r][0]);return P}const Ku=function(e){return this instanceof Ku?"string"==typeof e?new Ku.parse(e):void(this.points=Array.isArray(e)?e.map(Iu):[]):new Ku(e)};Ku.parse=function(e){return new Ku(Xu(e))},Ku.fromRect=function(e){return new Ku([e.topLeft(),e.topRight(),e.bottomRight(),e.bottomLeft(),e.topLeft()])},Ku.prototype={type:yu.Polyline,bbox:function(){var e=1/0,t=-1/0,r=1/0,i=-1/0,n=this.points,o=n.length;if(0===o)return null;for(var s=0;s<o;s++){var a=n[s],l=a.x,c=a.y;l<e&&(e=l),l>t&&(t=l),c<r&&(r=c),c>i&&(i=c)}return new Yu(e,r,t-e,i-r)},clone:function(){return new Ku(Zu(this.points))},closestPoint:function(e){var t=this.closestPointLength(e);return this.pointAtLength(t)},closestPointLength:function(e){var t,r=this.lengthPoints(),i=r.length;if(0===i)return 0;if(1===i)return 0;for(var n=1/0,o=0,s=i-1,a=0;a<s;a++){var l=new Ru(r[a],r[a+1]),c=l.length(),d=l.closestPointNormalizedLength(e),h=l.pointAt(d).squaredDistance(e);h<n&&(n=h,t=o+d*c),o+=c}return t},closestPointNormalizedLength:function(e){var t=this.closestPointLength(e);if(0===t)return 0;var r=this.length();return 0===r?0:t/r},closestPointTangent:function(e){var t=this.closestPointLength(e);return this.tangentAtLength(t)},containsPoint:function(e){var t=this.points,r=t.length;if(0===r)return!1;for(var i=e.x,n=e.y,o=r-1,s=0,a=0,l=new Ru,c=new Ru,d=new Iu;s<r;s++){var h=t[o],u=t[s];if(e.equals(h))return!0;if(l.start=h,l.end=u,l.containsPoint(e))return!0;if(n<=h.y&&n>u.y||n>h.y&&n<=u.y){var p=h.x-i>u.x-i?h.x-i:u.x-i;p>=0&&(d.x=i+p,d.y=n,c.start=e,c.end=d,l.intersect(c)&&a++)}o=s}return a%2==1},close:function(){const{start:e,end:t,points:r}=this;return e&&t&&!e.equals(t)&&r.push(e.clone()),this},lengthPoints:function(){return this.points},convexHull:function(){return new Ku(Qu(this.points))},equals:function(e){if(!e)return!1;var t=this.points,r=e.points,i=t.length;if(r.length!==i)return!1;for(var n=0;n<i;n++){var o=t[n],s=e.points[n];if(!o.equals(s))return!1}return!0},intersectionWithLine:function(e){for(var t=new Ru(e),r=[],i=this.lengthPoints(),n=new Ru,o=0,s=i.length-1;o<s;o++){n.start=i[o],n.end=i[o+1];var a=t.intersectionWithLine(n);a&&r.push(a[0])}return r.length>0?r:null},isDifferentiable:function(){var e=this.points,t=e.length;if(0===t)return!1;for(var r=new Ru,i=t-1,n=0;n<i;n++)if(r.start=e[n],r.end=e[n+1],r.isDifferentiable())return!0;return!1},length:function(){var e=this.lengthPoints(),t=e.length;if(0===t)return 0;for(var r=0,i=t-1,n=0;n<i;n++)r+=e[n].distance(e[n+1]);return r},pointAt:function(e){var t=this.lengthPoints(),r=t.length;if(0===r)return null;if(1===r)return t[0].clone();if(e<=0)return t[0].clone();if(e>=1)return t[r-1].clone();var i=this.length()*e;return this.pointAtLength(i)},pointAtLength:function(e){var t=this.lengthPoints(),r=t.length;if(0===r)return null;if(1===r)return t[0].clone();var i=!0;e<0&&(i=!1,e=-e);for(var n=0,o=r-1,s=0;s<o;s++){var a=i?s:o-1-s,l=t[a],c=t[a+1],d=new Ru(l,c),h=l.distance(c);if(e<=n+h)return d.pointAtLength((i?1:-1)*(e-n));n+=h}return(i?t[r-1]:t[0]).clone()},round:function(e){for(var t=this.points,r=t.length,i=0;i<r;i++)t[i].round(e);return this},scale:function(e,t,r){for(var i=this.points,n=i.length,o=0;o<n;o++)i[o].scale(e,t,r);return this},simplify:function(e={}){const t=this.points;if(t.length<3)return this;const r=e.threshold||1e-10;let i=0;for(;t[i+2];){const e=i+1,n=i+2,o=t[i],s=t[e],a=t[n];new Ru(o,a).closestPoint(s).distance(s)<=r?t.splice(e,1):i+=1}return this},tangentAt:function(e){var t=this.lengthPoints().length;if(0===t)return null;if(1===t)return null;e<0&&(e=0),e>1&&(e=1);var r=this.length()*e;return this.tangentAtLength(r)},tangentAtLength:function(e){var t=this.lengthPoints(),r=t.length;if(0===r)return null;if(1===r)return null;var i,n=!0;e<0&&(n=!1,e=-e);for(var o=0,s=r-1,a=0;a<s;a++){var l=n?a:s-1-a,c=t[l],d=t[l+1],h=new Ru(c,d),u=c.distance(d);if(h.isDifferentiable()){if(e<=o+u)return h.tangentAtLength((n?1:-1)*(e-o));i=h}o+=u}if(i){var p=n?1:0;return i.tangentAt(p)}return null},toString:function(){return this.points+""},translate:function(e,t){for(var r=this.points,i=r.length,n=0;n<i;n++)r[n].translate(e,t);return this},serialize:function(){var e=this.points,t=e.length;if(0===t)return"";for(var r="",i=0;i<t;i++){var n=e[i];r+=n.x+","+n.y+" "}return r.trim()}},Object.defineProperty(Ku.prototype,"start",{configurable:!0,enumerable:!0,get:function(){return 0===this.points.length?null:this.points[0]}}),Object.defineProperty(Ku.prototype,"end",{configurable:!0,enumerable:!0,get:function(){var e=this.points.length;return 0===e?null:this.points[e-1]}});const{abs:ep,sqrt:tp,min:rp,max:ip,pow:np}=Math,op=function(e,t,r,i){return this instanceof op?e instanceof op?new op(e.start,e.controlPoint1,e.controlPoint2,e.end):(this.start=new Iu(e),this.controlPoint1=new Iu(t),this.controlPoint2=new Iu(r),void(this.end=new Iu(i))):new op(e,t,r,i)};function sp(e){var t,r,i=[];for(r=arguments.length,t=1;t<r;t++)i.push(arguments[t]);if(!e)throw new Error("Missing a parent object.");var n=Object.create(e);for(r=i.length,t=0;t<r;t++){var o,s,a=i[t];for(s in a)a.hasOwnProperty(s)&&(delete n[s],o=Object.getOwnPropertyDescriptor(a,s),Object.defineProperty(n,s,o))}return n}op.throughPoints=function(){function e(e){var t=e.length,r=[],i=[],n=2;r[0]=e[0]/n;for(var o=1;o<t;o++)i[o]=1/n,n=(o<t-1?4:3.5)-i[o],r[o]=(e[o]-r[o-1])/n;for(o=1;o<t;o++)r[t-o-1]-=i[t-o]*r[t-o];return r}return function(t){if(!t||Array.isArray(t)&&t.length<2)throw new Error("At least 2 points are required");for(var r=function(t){var r,i=[],n=[],o=t.length-1;if(1==o)return i[0]=new Iu((2*t[0].x+t[1].x)/3,(2*t[0].y+t[1].y)/3),n[0]=new Iu(2*i[0].x-t[0].x,2*i[0].y-t[0].y),[i,n];var s=[];for(r=1;r<o-1;r++)s[r]=4*t[r].x+2*t[r+1].x;s[0]=t[0].x+2*t[1].x,s[o-1]=(8*t[o-1].x+t[o].x)/2;var a=e(s);for(r=1;r<o-1;++r)s[r]=4*t[r].y+2*t[r+1].y;s[0]=t[0].y+2*t[1].y,s[o-1]=(8*t[o-1].y+t[o].y)/2;var l=e(s);for(r=0;r<o;r++)i.push(new Iu(a[r],l[r])),r<o-1?n.push(new Iu(2*t[r+1].x-a[r+1],2*t[r+1].y-l[r+1])):n.push(new Iu((t[o].x+a[o-1])/2,(t[o].y+l[o-1])/2));return[i,n]}(t),i=[],n=r[0].length,o=0;o<n;o++){var s=new Iu(r[0][o].x,r[0][o].y),a=new Iu(r[1][o].x,r[1][o].y);i.push(new op(t[o],s,a,t[o+1]))}return i}}(),op.prototype={type:yu.Curve,bbox:function(){for(var e,t,r,i,n,o,s,a,l=this.start,c=this.controlPoint1,d=this.controlPoint2,h=this.end,u=l.x,p=l.y,f=c.x,m=c.y,g=d.x,v=d.y,b=h.x,y=h.y,x=new Array,w=new Array,_=[new Array,new Array],k=0;k<2;++k)if(0===k?(t=6*u-12*f+6*g,e=-3*u+9*f-9*g+3*b,r=3*f-3*u):(t=6*p-12*m+6*v,e=-3*p+9*m-9*v+3*y,r=3*m-3*p),ep(e)<1e-12){if(ep(t)<1e-12)continue;0<(i=-r/t)&&i<1&&w.push(i)}else a=tp(s=t*t-4*r*e),s<0||(0<(n=(-t+a)/(2*e))&&n<1&&w.push(n),0<(o=(-t-a)/(2*e))&&o<1&&w.push(o));for(var C,S,A,P=w.length,T=P;P--;)S=(C=1-(i=w[P]))*C*C*u+3*C*C*i*f+3*C*i*i*g+i*i*i*b,_[0][P]=S,A=C*C*C*p+3*C*C*i*m+3*C*i*i*v+i*i*i*y,_[1][P]=A,x[P]={X:S,Y:A};w[T]=0,w[T+1]=1,x[T]={X:u,Y:p},x[T+1]={X:b,Y:y},_[0][T]=u,_[1][T]=p,_[0][T+1]=b,_[1][T+1]=y,w.length=T+2,_[0].length=T+2,_[1].length=T+2,x.length=T+2;var E=rp.apply(null,_[0]),I=rp.apply(null,_[1]),L=ip.apply(null,_[0]),O=ip.apply(null,_[1]);return new Yu(E,I,L-E,O-I)},clone:function(){return new op(this.start,this.controlPoint1,this.controlPoint2,this.end)},closestPoint:function(e,t){return this.pointAtT(this.closestPointT(e,t))},closestPointLength:function(e,t){var r=void 0===(t=t||{}).precision?this.PRECISION:t.precision,i={precision:r,subdivisions:void 0===t.subdivisions?this.getSubdivisions({precision:r}):t.subdivisions};return this.lengthAtT(this.closestPointT(e,i),i)},closestPointNormalizedLength:function(e,t){var r=void 0===(t=t||{}).precision?this.PRECISION:t.precision,i={precision:r,subdivisions:void 0===t.subdivisions?this.getSubdivisions({precision:r}):t.subdivisions},n=this.closestPointLength(e,i);if(!n)return 0;var o=this.length(i);return 0===o?0:n/o},closestPointT:function(e,t){for(var r,i,n,o,s,a,l,c=void 0===(t=t||{}).precision?this.PRECISION:t.precision,d=void 0===t.subdivisions?this.getSubdivisions({precision:c}):t.subdivisions,h=d.length,u=h?1/h:0,p=0;p<h;p++){var f=d[p],m=f.start.distance(e),g=f.end.distance(e),v=m+g;(!l||v<l)&&(r=f,i=p*u,n=(p+1)*u,o=m,s=g,a=f.start.distance(f.end),l=v)}for(var b=np(10,-c);;){var y=o?ep(o-s)/o:0,x=s?ep(o-s)/s:0;if(y<b||x<b||(!o||o<a*b||(!s||s<a*b)))return o<=s?i:n;var w=r.divide(.5);u/=2;var _=w[0].start.distance(e),k=w[0].end.distance(e),C=_+k,S=w[1].start.distance(e),A=w[1].end.distance(e);C<=S+A?(r=w[0],n-=u,o=_,s=k):(r=w[1],i+=u,o=S,s=A)}},closestPointTangent:function(e,t){return this.tangentAtT(this.closestPointT(e,t))},containsPoint:function(e,t){return this.toPolyline(t).containsPoint(e)},divideAt:function(e,t){if(e<=0)return this.divideAtT(0);if(e>=1)return this.divideAtT(1);var r=this.tAt(e,t);return this.divideAtT(r)},divideAtLength:function(e,t){var r=this.tAtLength(e,t);return this.divideAtT(r)},divideAtT:function(e){var t=this.start,r=this.controlPoint1,i=this.controlPoint2,n=this.end;if(e<=0)return[new op(t,t,t,t),new op(t,r,i,n)];if(e>=1)return[new op(t,r,i,n),new op(n,n,n,n)];var o=this.getSkeletonPoints(e),s=o.startControlPoint1,a=o.startControlPoint2,l=o.divider,c=o.dividerControlPoint1,d=o.dividerControlPoint2;return[new op(t,s,a,l),new op(l,c,d,n)]},endpointDistance:function(){return this.start.distance(this.end)},equals:function(e){return!!e&&this.start.x===e.start.x&&this.start.y===e.start.y&&this.controlPoint1.x===e.controlPoint1.x&&this.controlPoint1.y===e.controlPoint1.y&&this.controlPoint2.x===e.controlPoint2.x&&this.controlPoint2.y===e.controlPoint2.y&&this.end.x===e.end.x&&this.end.y===e.end.y},getSkeletonPoints:function(e){var t=this.start,r=this.controlPoint1,i=this.controlPoint2,n=this.end;if(e<=0)return{startControlPoint1:t.clone(),startControlPoint2:t.clone(),divider:t.clone(),dividerControlPoint1:r.clone(),dividerControlPoint2:i.clone()};if(e>=1)return{startControlPoint1:r.clone(),startControlPoint2:i.clone(),divider:n.clone(),dividerControlPoint1:n.clone(),dividerControlPoint2:n.clone()};var o=new Ru(t,r).pointAt(e),s=new Ru(r,i).pointAt(e),a=new Ru(i,n).pointAt(e),l=new Ru(o,s).pointAt(e),c=new Ru(s,a).pointAt(e);return{startControlPoint1:o,startControlPoint2:l,divider:new Ru(l,c).pointAt(e),dividerControlPoint1:c,dividerControlPoint2:a}},getSubdivisions:function(e){var t=void 0===(e=e||{}).precision?this.PRECISION:e.precision,r=this.start,i=this.controlPoint1,n=this.controlPoint2,o=this.end,s=[new op(r,i,n,o)];if(0===t)return s;if(!this.isDifferentiable())return s;var a=this.endpointDistance(),l=np(10,-t),c=2;0===i.cross(r,o)&&0===n.cross(r,o)&&(c=2*t);for(var d=0;;){d+=1;for(var h=[],u=s.length,p=0;p<u;p++){var f=s[p].divide(.5);h.push(f[0],f[1])}for(var m=0,g=h.length,v=0;v<g;v++){m+=h[v].endpointDistance()}if(d>=c)if((0!==m?(m-a)/m:0)<l)return h;s=h,a=m}},isDifferentiable:function(){var e=this.start,t=this.controlPoint1,r=this.controlPoint2,i=this.end;return!(e.equals(t)&&t.equals(r)&&r.equals(i))},length:function(e){for(var t=void 0===(e=e||{}).precision?this.PRECISION:e.precision,r=void 0===e.subdivisions?this.getSubdivisions({precision:t}):e.subdivisions,i=0,n=r.length,o=0;o<n;o++){i+=r[o].endpointDistance()}return i},lengthAtT:function(e,t){if(e<=0)return 0;var r=void 0===(t=t||{}).precision?this.PRECISION:t.precision;return this.divide(e)[0].length({precision:r})},pointAt:function(e,t){if(e<=0)return this.start.clone();if(e>=1)return this.end.clone();var r=this.tAt(e,t);return this.pointAtT(r)},pointAtLength:function(e,t){var r=this.tAtLength(e,t);return this.pointAtT(r)},pointAtT:function(e){return e<=0?this.start.clone():e>=1?this.end.clone():this.getSkeletonPoints(e).divider},PRECISION:3,round:function(e){return this.start.round(e),this.controlPoint1.round(e),this.controlPoint2.round(e),this.end.round(e),this},scale:function(e,t,r){return this.start.scale(e,t,r),this.controlPoint1.scale(e,t,r),this.controlPoint2.scale(e,t,r),this.end.scale(e,t,r),this},tangentAt:function(e,t){if(!this.isDifferentiable())return null;e<0?e=0:e>1&&(e=1);var r=this.tAt(e,t);return this.tangentAtT(r)},tangentAtLength:function(e,t){if(!this.isDifferentiable())return null;var r=this.tAtLength(e,t);return this.tangentAtT(r)},tangentAtT:function(e){if(!this.isDifferentiable())return null;e<0?e=0:e>1&&(e=1);var t=this.getSkeletonPoints(e),r=t.startControlPoint2,i=t.dividerControlPoint1,n=t.divider,o=new Ru(r,i);return o.translate(n.x-r.x,n.y-r.y),o},tAt:function(e,t){if(e<=0)return 0;if(e>=1)return 1;var r=void 0===(t=t||{}).precision?this.PRECISION:t.precision,i={precision:r,subdivisions:void 0===t.subdivisions?this.getSubdivisions({precision:r}):t.subdivisions},n=this.length(i)*e;return this.tAtLength(n,i)},tAtLength:function(e,t){var r=!0;e<0&&(r=!1,e=-e);for(var i,n,o,s,a,l=void 0===(t=t||{}).precision?this.PRECISION:t.precision,c=void 0===t.subdivisions?this.getSubdivisions({precision:l}):t.subdivisions,d={precision:l,subdivisions:c},h=0,u=c.length,p=1/u,f=0;f<u;f++){var m=r?f:u-1-f,g=c[f],v=g.endpointDistance();if(e<=h+v){i=g,n=m*p,o=(m+1)*p,s=r?e-h:v+h-e,a=r?v+h-e:e-h;break}h+=v}if(!i)return r?1:0;for(var b=this.length(d),y=np(10,-l);;){var x,w;if((0!==b?s/b:0)<y)return n;if((0!==b?a/b:0)<y)return o;var _=i.divide(.5);p/=2;var k=_[0].endpointDistance(),C=_[1].endpointDistance();s<=k?(i=_[0],o-=p,w=k-(x=s)):(i=_[1],n+=p,w=C-(x=s-k)),s=x,a=w}},toPoints:function(e){for(var t=void 0===(e=e||{}).precision?this.PRECISION:e.precision,r=void 0===e.subdivisions?this.getSubdivisions({precision:t}):e.subdivisions,i=[r[0].start.clone()],n=r.length,o=0;o<n;o++){var s=r[o];i.push(s.end.clone())}return i},toPolyline:function(e){return new Ku(this.toPoints(e))},toString:function(){return this.start+" "+this.controlPoint1+" "+this.controlPoint2+" "+this.end},translate:function(e,t){return this.start.translate(e,t),this.controlPoint1.translate(e,t),this.controlPoint2.translate(e,t),this.end.translate(e,t),this}},op.prototype.divide=op.prototype.divideAtT;const ap=function(e){if(!(this instanceof ap))return new ap(e);if("string"==typeof e)return new ap.parse(e);var t,r;if(this.segments=[],e)if(Array.isArray(e)&&0!==e.length)if(r=(e=e.reduce((function(e,t){return e.concat(t)}),[])).length,e[0].isSegment)for(t=0;t<r;t++){var i=e[t];this.appendSegment(i)}else{var n=null;for(t=0;t<r;t++){var o=e[t];if(!(o instanceof Ru||o instanceof op))throw new Error("Cannot construct a path segment from the provided object.");0===t&&this.appendSegment(ap.createSegment("M",o.start)),n&&!n.end.equals(o.start)&&this.appendSegment(ap.createSegment("M",o.start)),o instanceof Ru?this.appendSegment(ap.createSegment("L",o.end)):o instanceof op&&this.appendSegment(ap.createSegment("C",o.controlPoint1,o.controlPoint2,o.end)),n=o}}else if(e.isSegment)this.appendSegment(e);else if(e instanceof Ru)this.appendSegment(ap.createSegment("M",e.start)),this.appendSegment(ap.createSegment("L",e.end));else if(e instanceof op)this.appendSegment(ap.createSegment("M",e.start)),this.appendSegment(ap.createSegment("C",e.controlPoint1,e.controlPoint2,e.end));else{if(!(e instanceof Ku))throw new Error("Cannot construct a path from the provided object.");if(!e.points||0===e.points.length)return;for(r=e.points.length,t=0;t<r;t++){var s=e.points[t];0===t?this.appendSegment(ap.createSegment("M",s)):this.appendSegment(ap.createSegment("L",s))}}else;};function lp(e,t){return t.unshift(null),new(Function.prototype.bind.apply(e,t))}ap.parse=function(e){if(!e)return new ap;for(var t=new ap,r=e.match(/(?:[a-zA-Z] *)(?:(?:-?\d+(?:\.\d+)?(?:e[-+]?\d+)? *,? *)|(?:-?\.\d+ *,? *))+|(?:[a-zA-Z] *)(?! |\d|-|\.)/g),i=r.length,n=0;n<i;n++){var o=r[n].match(/(?:[a-zA-Z])|(?:(?:-?\d+(?:\.\d+)?(?:e[-+]?\d+)?))|(?:(?:-?\.\d+))/g),s=ap.createSegment.apply(this,o);t.appendSegment(s)}return t},ap.createSegment=function(e){if(!e)throw new Error("Type must be provided.");var t=ap.segmentTypes[e];if(!t)throw new Error(e+" is not a recognized path segment type.");for(var r=[],i=arguments.length,n=1;n<i;n++)r.push(arguments[n]);return lp(t,r)},ap.prototype={type:yu.Path,appendSegment:function(e){var t,r=this.segments,i=r.length,n=0!==i?r[i-1]:null;if(Array.isArray(e)){if(!(e=e.reduce((function(e,t){return e.concat(t)}),[]))[0].isSegment)throw new Error("Segments required.");for(var o=e.length,s=0;s<o;s++){var a=e[s];t=this.prepareSegment(a,n,null),r.push(t),n=t}}else{if(!e||!e.isSegment)throw new Error("Segment required.");t=this.prepareSegment(e,n,null),r.push(t)}},bbox:function(){var e,t=this.segments,r=t.length;if(0===r)return null;for(var i=0;i<r;i++){var n=t[i];if(n.isVisible){var o=n.bbox();e=e?e.union(o):o}}if(e)return e;var s=t[r-1];return new Yu(s.end.x,s.end.y,0,0)},clone:function(){for(var e=this.segments,t=e.length,r=new ap,i=0;i<t;i++){var n=e[i].clone();r.appendSegment(n)}return r},closestPoint:function(e,t){var r=this.closestPointT(e,t);return r?this.pointAtT(r):null},closestPointLength:function(e,t){var r=void 0===(t=t||{}).precision?this.PRECISION:t.precision,i={precision:r,segmentSubdivisions:void 0===t.segmentSubdivisions?this.getSegmentSubdivisions({precision:r}):t.segmentSubdivisions},n=this.closestPointT(e,i);return n?this.lengthAtT(n,i):0},closestPointNormalizedLength:function(e,t){var r=void 0===(t=t||{}).precision?this.PRECISION:t.precision,i={precision:r,segmentSubdivisions:void 0===t.segmentSubdivisions?this.getSegmentSubdivisions({precision:r}):t.segmentSubdivisions},n=this.closestPointLength(e,i);if(0===n)return 0;var o=this.length(i);return 0===o?0:n/o},closestPointT:function(e,t){var r=this.segments,i=r.length;if(0===i)return null;for(var n,o=void 0===(t=t||{}).precision?this.PRECISION:t.precision,s=void 0===t.segmentSubdivisions?this.getSegmentSubdivisions({precision:o}):t.segmentSubdivisions,a=1/0,l=0;l<i;l++){var c=r[l],d=s[l];if(c.isVisible){var h=c.closestPointT(e,{precision:o,subdivisions:d}),u=c.pointAtT(h),p=new Ru(u,e).squaredLength();p<a&&(n={segmentIndex:l,value:h},a=p)}}return n||{segmentIndex:i-1,value:1}},closestPointTangent:function(e,t){var r=this.segments,i=r.length;if(0===i)return null;for(var n,o=void 0===(t=t||{}).precision?this.PRECISION:t.precision,s=void 0===t.segmentSubdivisions?this.getSegmentSubdivisions({precision:o}):t.segmentSubdivisions,a=1/0,l=0;l<i;l++){var c=r[l],d=s[l];if(c.isDifferentiable()){var h=c.closestPointT(e,{precision:o,subdivisions:d}),u=c.pointAtT(h),p=new Ru(u,e).squaredLength();p<a&&(n=c.tangentAtT(h),a=p)}}return n||null},containsPoint:function(e,t){var r=this.toPolylines(t);if(!r)return!1;for(var i=r.length,n=0,o=0;o<i;o++){r[o].containsPoint(e)&&n++}return n%2==1},divideAt:function(e,t){if(0===this.segments.length)return null;e<0&&(e=0),e>1&&(e=1);var r=void 0===(t=t||{}).precision?this.PRECISION:t.precision,i={precision:r,segmentSubdivisions:void 0===t.segmentSubdivisions?this.getSegmentSubdivisions({precision:r}):t.segmentSubdivisions},n=this.length(i)*e;return this.divideAtLength(n,i)},divideAtLength:function(e,t){var r=this.segments.length;if(0===r)return null;var i=!0;e<0&&(i=!1,e=-e);var n,o,s,a,l,c,d,h=void 0===(t=t||{}).precision?this.PRECISION:t.precision,u=void 0===t.segmentSubdivisions?this.getSegmentSubdivisions({precision:h}):t.segmentSubdivisions,p=0;for(n=0;n<r;n++){var f=i?n:r-1-n;o=this.getSegment(f);var m=u[f],g=o.length({precision:h,subdivisions:m});if(o.isDifferentiable()&&(l=o,c=f,e<=p+g)){a=f,s=o.divideAtLength((i?1:-1)*(e-p),{precision:h,subdivisions:m});break}p+=g}if(!l)return null;s||(a=c,d=i?1:0,s=l.divideAtT(d));var v=this.clone();v.replaceSegment(a,s);var b=a,y=a+1,x=a+2;s[0].isDifferentiable()||(v.removeSegment(b),y-=1,x-=1);var w=v.getSegment(y).start;v.insertSegment(y,ap.createSegment("M",w)),x+=1,s[1].isDifferentiable()||(v.removeSegment(x-1),x-=1);var _=x-b-1;for(n=x;n<v.segments.length;n++){var k=this.getSegment(n-_);if("Z"===(o=v.getSegment(n)).type&&!k.subpathStartSegment.end.equals(o.subpathStartSegment.end)){var C=ap.createSegment("L",k.end);v.replaceSegment(n,C)}}return[new ap(v.segments.slice(0,y)),new ap(v.segments.slice(y))]},equals:function(e){if(!e)return!1;var t=this.segments,r=e.segments,i=t.length;if(r.length!==i)return!1;for(var n=0;n<i;n++){var o=t[n],s=r[n];if(o.type!==s.type||!o.equals(s))return!1}return!0},getSegment:function(e){var t=this.segments,r=t.length;if(0===r)throw new Error("Path has no segments.");if(e<0&&(e=r+e),e>=r||e<0)throw new Error("Index out of range.");return t[e]},getSegmentSubdivisions:function(e){for(var t=this.segments,r=t.length,i=void 0===(e=e||{}).precision?this.PRECISION:e.precision,n=[],o=0;o<r;o++){var s=t[o].getSubdivisions({precision:i});n.push(s)}return n},getSubpaths:function(){const e=this.clone().validate().segments,t=e.length,r=[];for(let i=0;i<t;i++){const t=e[i];t.isSubpathStart?r.push(new ap(t)):r[r.length-1].appendSegment(t)}return r},insertSegment:function(e,t){var r,i=this.segments,n=i.length;if(e<0&&(e=n+e+1),e>n||e<0)throw new Error("Index out of range.");var o=null,s=null;if(0!==n&&(s=e>=1?(o=i[e-1]).nextSegment:i[0]),Array.isArray(t)){if(!(t=t.reduce((function(e,t){return e.concat(t)}),[]))[0].isSegment)throw new Error("Segments required.");for(var a=t.length,l=0;l<a;l++){var c=t[l];r=this.prepareSegment(c,o,s),i.splice(e+l,0,r),o=r}}else{if(!t||!t.isSegment)throw new Error("Segment required.");r=this.prepareSegment(t,o,s),i.splice(e,0,r)}},intersectionWithLine:function(e,t){var r=null,i=this.toPolylines(t);if(!i)return null;for(var n=0,o=i.length;n<o;n++){var s=i[n],a=e.intersect(s);a&&(r||(r=[]),Array.isArray(a)?Array.prototype.push.apply(r,a):r.push(a))}return r},isDifferentiable:function(){for(var e=this.segments,t=e.length,r=0;r<t;r++){if(e[r].isDifferentiable())return!0}return!1},isValid:function(){var e=this.segments;return 0===e.length||"M"===e[0].type},length:function(e){var t=this.segments,r=t.length;if(0===r)return 0;for(var i=void 0===(e=e||{}).precision?this.PRECISION:e.precision,n=void 0===e.segmentSubdivisions?this.getSegmentSubdivisions({precision:i}):e.segmentSubdivisions,o=0,s=0;s<r;s++){var a=t[s],l=n[s];o+=a.length({subdivisions:l})}return o},lengthAtT:function(e,t){var r=this.segments,i=r.length;if(0===i)return 0;var n=e.segmentIndex;if(n<0)return 0;var o=e.value;n>=i?(n=i-1,o=1):o<0?o=0:o>1&&(o=1);for(var s,a=void 0===(t=t||{}).precision?this.PRECISION:t.precision,l=void 0===t.segmentSubdivisions?this.getSegmentSubdivisions({precision:a}):t.segmentSubdivisions,c=0,d=0;d<n;d++){var h=r[d];s=l[d],c+=h.length({precisison:a,subdivisions:s})}return h=r[n],s=l[n],c+=h.lengthAtT(o,{precisison:a,subdivisions:s})},pointAt:function(e,t){if(0===this.segments.length)return null;if(e<=0)return this.start.clone();if(e>=1)return this.end.clone();var r=void 0===(t=t||{}).precision?this.PRECISION:t.precision,i={precision:r,segmentSubdivisions:void 0===t.segmentSubdivisions?this.getSegmentSubdivisions({precision:r}):t.segmentSubdivisions},n=this.length(i)*e;return this.pointAtLength(n,i)},pointAtLength:function(e,t){var r=this.segments,i=r.length;if(0===i)return null;if(0===e)return this.start.clone();var n=!0;e<0&&(n=!1,e=-e);for(var o,s=void 0===(t=t||{}).precision?this.PRECISION:t.precision,a=void 0===t.segmentSubdivisions?this.getSegmentSubdivisions({precision:s}):t.segmentSubdivisions,l=0,c=0;c<i;c++){var d=n?c:i-1-c,h=r[d],u=a[d],p=h.length({precision:s,subdivisions:u});if(h.isVisible){if(e<=l+p)return h.pointAtLength((n?1:-1)*(e-l),{precision:s,subdivisions:u});o=h}l+=p}return o?n?o.end:o.start:r[i-1].end.clone()},pointAtT:function(e){var t=this.segments,r=t.length;if(0===r)return null;var i=e.segmentIndex;if(i<0)return t[0].pointAtT(0);if(i>=r)return t[r-1].pointAtT(1);var n=e.value;return n<0?n=0:n>1&&(n=1),t[i].pointAtT(n)},PRECISION:3,prepareSegment:function(e,t,r){e.previousSegment=t,e.nextSegment=r,t&&(t.nextSegment=e),r&&(r.previousSegment=e);var i=e;return e.isSubpathStart&&(e.subpathStartSegment=e,i=r),i&&this.updateSubpathStartSegment(i),e},removeSegment:function(e){var t=this.segments,r=t.length;if(0===r)throw new Error("Path has no segments.");if(e<0&&(e=r+e),e>=r||e<0)throw new Error("Index out of range.");var i=t.splice(e,1)[0],n=i.previousSegment,o=i.nextSegment;n&&(n.nextSegment=o),o&&(o.previousSegment=n),i.isSubpathStart&&o&&this.updateSubpathStartSegment(o)},replaceSegment:function(e,t){var r,i=this.segments,n=i.length;if(0===n)throw new Error("Path has no segments.");if(e<0&&(e=n+e),e>=n||e<0)throw new Error("Index out of range.");var o=i[e],s=o.previousSegment,a=o.nextSegment,l=o.isSubpathStart;if(Array.isArray(t)){if(!(t=t.reduce((function(e,t){return e.concat(t)}),[]))[0].isSegment)throw new Error("Segments required.");i.splice(e,1);for(var c=t.length,d=0;d<c;d++){var h=t[d];r=this.prepareSegment(h,s,a),i.splice(e+d,0,r),s=r,l&&r.isSubpathStart&&(l=!1)}}else{if(!t||!t.isSegment)throw new Error("Segment required.");r=this.prepareSegment(t,s,a),i.splice(e,1,r),l&&r.isSubpathStart&&(l=!1)}l&&a&&this.updateSubpathStartSegment(a)},round:function(e){for(var t=this.segments,r=t.length,i=0;i<r;i++){t[i].round(e)}return this},scale:function(e,t,r){for(var i=this.segments,n=i.length,o=0;o<n;o++){i[o].scale(e,t,r)}return this},segmentAt:function(e,t){var r=this.segmentIndexAt(e,t);return r?this.getSegment(r):null},segmentAtLength:function(e,t){var r=this.segmentIndexAtLength(e,t);return r?this.getSegment(r):null},segmentIndexAt:function(e,t){if(0===this.segments.length)return null;e<0&&(e=0),e>1&&(e=1);var r=void 0===(t=t||{}).precision?this.PRECISION:t.precision,i={precision:r,segmentSubdivisions:void 0===t.segmentSubdivisions?this.getSegmentSubdivisions({precision:r}):t.segmentSubdivisions},n=this.length(i)*e;return this.segmentIndexAtLength(n,i)},segmentIndexAtLength:function(e,t){var r=this.segments,i=r.length;if(0===i)return null;var n=!0;e<0&&(n=!1,e=-e);for(var o=void 0===(t=t||{}).precision?this.PRECISION:t.precision,s=void 0===t.segmentSubdivisions?this.getSegmentSubdivisions({precision:o}):t.segmentSubdivisions,a=null,l=0,c=0;c<i;c++){var d=n?c:i-1-c,h=r[d],u=s[d],p=h.length({precision:o,subdivisions:u});if(h.isVisible){if(e<=l+p)return d;a=d}l+=p}return a},serialize:function(){if(!this.isValid())throw new Error("Invalid path segments.");return this.toString()},tangentAt:function(e,t){if(0===this.segments.length)return null;e<0&&(e=0),e>1&&(e=1);var r=void 0===(t=t||{}).precision?this.PRECISION:t.precision,i={precision:r,segmentSubdivisions:void 0===t.segmentSubdivisions?this.getSegmentSubdivisions({precision:r}):t.segmentSubdivisions},n=this.length(i)*e;return this.tangentAtLength(n,i)},tangentAtLength:function(e,t){var r=this.segments,i=r.length;if(0===i)return null;var n=!0;e<0&&(n=!1,e=-e);for(var o,s=void 0===(t=t||{}).precision?this.PRECISION:t.precision,a=void 0===t.segmentSubdivisions?this.getSegmentSubdivisions({precision:s}):t.segmentSubdivisions,l=0,c=0;c<i;c++){var d=n?c:i-1-c,h=r[d],u=a[d],p=h.length({precision:s,subdivisions:u});if(h.isDifferentiable()){if(e<=l+p)return h.tangentAtLength((n?1:-1)*(e-l),{precision:s,subdivisions:u});o=h}l+=p}if(o){var f=n?1:0;return o.tangentAtT(f)}return null},tangentAtT:function(e){var t=this.segments,r=t.length;if(0===r)return null;var i=e.segmentIndex;if(i<0)return t[0].tangentAtT(0);if(i>=r)return t[r-1].tangentAtT(1);var n=e.value;return n<0?n=0:n>1&&(n=1),t[i].tangentAtT(n)},toPoints:function(e){var t=this.segments,r=t.length;if(0===r)return null;for(var i=void 0===(e=e||{}).precision?this.PRECISION:e.precision,n=void 0===e.segmentSubdivisions?this.getSegmentSubdivisions({precision:i}):e.segmentSubdivisions,o=[],s=[],a=0;a<r;a++){var l=t[a];if(l.isVisible){var c=n[a];if(c.length>0){var d=c.map((function(e){return e.start}));Array.prototype.push.apply(s,d)}else s.push(l.start)}else s.length>0&&(s.push(t[a-1].end),o.push(s),s=[])}return s.length>0&&(s.push(this.end),o.push(s)),o},toPolylines:function(e){var t=[],r=this.toPoints(e);if(!r)return null;for(var i=0,n=r.length;i<n;i++)t.push(new Ku(r[i]));return t},toString:function(){for(var e=this.segments,t=e.length,r="",i=0;i<t;i++){r+=e[i].serialize()+" "}return r.trim()},translate:function(e,t){for(var r=this.segments,i=r.length,n=0;n<i;n++){r[n].translate(e,t)}return this},updateSubpathStartSegment:function(e){for(var t=e.previousSegment;e&&!e.isSubpathStart;)e.subpathStartSegment=t?t.subpathStartSegment:null,t=e,e=e.nextSegment},validate:function(){return this.isValid()||this.insertSegment(0,ap.createSegment("M",0,0)),this}},Object.defineProperty(ap.prototype,"start",{configurable:!0,enumerable:!0,get:function(){var e=this.segments,t=e.length;if(0===t)return null;for(var r=0;r<t;r++){var i=e[r];if(i.isVisible)return i.start}return e[t-1].end}}),Object.defineProperty(ap.prototype,"end",{configurable:!0,enumerable:!0,get:function(){var e=this.segments,t=e.length;if(0===t)return null;for(var r=t-1;r>=0;r--){var i=e[r];if(i.isVisible)return i.end}return e[t-1].end}});var cp={bbox:function(){throw new Error("Declaration missing for virtual function.")},clone:function(){throw new Error("Declaration missing for virtual function.")},closestPoint:function(){throw new Error("Declaration missing for virtual function.")},closestPointLength:function(){throw new Error("Declaration missing for virtual function.")},closestPointNormalizedLength:function(){throw new Error("Declaration missing for virtual function.")},closestPointT:function(e){if(this.closestPointNormalizedLength)return this.closestPointNormalizedLength(e);throw new Error("Neither closestPointT() nor closestPointNormalizedLength() function is implemented.")},closestPointTangent:function(){throw new Error("Declaration missing for virtual function.")},divideAt:function(){throw new Error("Declaration missing for virtual function.")},divideAtLength:function(){throw new Error("Declaration missing for virtual function.")},divideAtT:function(e){if(this.divideAt)return this.divideAt(e);throw new Error("Neither divideAtT() nor divideAt() function is implemented.")},equals:function(){throw new Error("Declaration missing for virtual function.")},getSubdivisions:function(){throw new Error("Declaration missing for virtual function.")},isDifferentiable:function(){throw new Error("Declaration missing for virtual function.")},isSegment:!0,isSubpathStart:!1,isVisible:!0,length:function(){throw new Error("Declaration missing for virtual function.")},lengthAtT:function(e){if(e<=0)return 0;var t=this.length();return e>=1?t:t*e},nextSegment:null,pointAt:function(){throw new Error("Declaration missing for virtual function.")},pointAtLength:function(){throw new Error("Declaration missing for virtual function.")},pointAtT:function(e){if(this.pointAt)return this.pointAt(e);throw new Error("Neither pointAtT() nor pointAt() function is implemented.")},previousSegment:null,round:function(){throw new Error("Declaration missing for virtual function.")},subpathStartSegment:null,scale:function(){throw new Error("Declaration missing for virtual function.")},serialize:function(){throw new Error("Declaration missing for virtual function.")},tangentAt:function(){throw new Error("Declaration missing for virtual function.")},tangentAtLength:function(){throw new Error("Declaration missing for virtual function.")},tangentAtT:function(e){if(this.tangentAt)return this.tangentAt(e);throw new Error("Neither tangentAtT() nor tangentAt() function is implemented.")},toString:function(){throw new Error("Declaration missing for virtual function.")},translate:function(){throw new Error("Declaration missing for virtual function.")}};Object.defineProperty(cp,"end",{configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(cp,"start",{configurable:!0,enumerable:!0,get:function(){if(!this.previousSegment)throw new Error("Missing previous segment. (This segment cannot be the first segment of a path; OR segment has not yet been added to a path.)");return this.previousSegment.end}}),Object.defineProperty(cp,"type",{configurable:!0,enumerable:!0,get:function(){throw new Error("Bad segment declaration. No type specified.")}});var dp=function(){for(var e,t,r=[],i=arguments.length,n=0;n<i;n++)r.push(arguments[n]);if(!(this instanceof dp))return lp(dp,r);if(0===i)throw new Error("Lineto constructor expects a line, 1 point, or 2 coordinates (none provided).");if(r[0]instanceof Ru){if(1===i)return this.end=r[0].end.clone(),this;throw new Error("Lineto constructor expects a line, 1 point, or 2 coordinates ("+i+" lines provided).")}if("string"==typeof r[0]||"number"==typeof r[0]){if(2===i)return this.end=new Iu(+r[0],+r[1]),this;if(i<2)throw new Error("Lineto constructor expects a line, 1 point, or 2 coordinates ("+i+" coordinates provided).");var o;for(e=[],n=0;n<i;n+=2)o=r.slice(n,n+2),e.push(lp(dp,o));return e}if(1===i)return this.end=new Iu(r[0]),this;for(e=[],n=0;n<i;n+=1)t=r[n],e.push(new dp(t));return e},hp={clone:function(){return new dp(this.end)},divideAt:function(e){var t=new Ru(this.start,this.end).divideAt(e);return[new dp(t[0]),new dp(t[1])]},divideAtLength:function(e){var t=new Ru(this.start,this.end).divideAtLength(e);return[new dp(t[0]),new dp(t[1])]},getSubdivisions:function(){return[]},isDifferentiable:function(){return!!this.previousSegment&&!this.start.equals(this.end)},round:function(e){return this.end.round(e),this},scale:function(e,t,r){return this.end.scale(e,t,r),this},serialize:function(){var e=this.end;return this.type+" "+e.x+" "+e.y},toString:function(){return this.type+" "+this.start+" "+this.end},translate:function(e,t){return this.end.translate(e,t),this}};Object.defineProperty(hp,"type",{configurable:!0,enumerable:!0,value:"L"}),dp.prototype=sp(cp,Ru.prototype,hp);var up=function(){for(var e,t,r=[],i=arguments.length,n=0;n<i;n++)r.push(arguments[n]);if(!(this instanceof up))return lp(up,r);if(0===i)throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates (none provided).");if(r[0]instanceof op){if(1===i)return this.controlPoint1=r[0].controlPoint1.clone(),this.controlPoint2=r[0].controlPoint2.clone(),this.end=r[0].end.clone(),this;throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates ("+i+" curves provided).")}if("string"==typeof r[0]||"number"==typeof r[0]){if(6===i)return this.controlPoint1=new Iu(+r[0],+r[1]),this.controlPoint2=new Iu(+r[2],+r[3]),this.end=new Iu(+r[4],+r[5]),this;if(i<6)throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates ("+i+" coordinates provided).");var o;for(e=[],n=0;n<i;n+=6)o=r.slice(n,n+6),e.push(lp(up,o));return e}if(3===i)return this.controlPoint1=new Iu(r[0]),this.controlPoint2=new Iu(r[1]),this.end=new Iu(r[2]),this;if(i<3)throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates ("+i+" points provided).");for(e=[],n=0;n<i;n+=3)t=r.slice(n,n+3),e.push(lp(up,t));return e},pp={clone:function(){return new up(this.controlPoint1,this.controlPoint2,this.end)},divideAt:function(e,t){var r=new op(this.start,this.controlPoint1,this.controlPoint2,this.end).divideAt(e,t);return[new up(r[0]),new up(r[1])]},divideAtLength:function(e,t){var r=new op(this.start,this.controlPoint1,this.controlPoint2,this.end).divideAtLength(e,t);return[new up(r[0]),new up(r[1])]},divideAtT:function(e){var t=new op(this.start,this.controlPoint1,this.controlPoint2,this.end).divideAtT(e);return[new up(t[0]),new up(t[1])]},isDifferentiable:function(){if(!this.previousSegment)return!1;var e=this.start,t=this.controlPoint1,r=this.controlPoint2,i=this.end;return!(e.equals(t)&&t.equals(r)&&r.equals(i))},round:function(e){return this.controlPoint1.round(e),this.controlPoint2.round(e),this.end.round(e),this},scale:function(e,t,r){return this.controlPoint1.scale(e,t,r),this.controlPoint2.scale(e,t,r),this.end.scale(e,t,r),this},serialize:function(){var e=this.controlPoint1,t=this.controlPoint2,r=this.end;return this.type+" "+e.x+" "+e.y+" "+t.x+" "+t.y+" "+r.x+" "+r.y},toString:function(){return this.type+" "+this.start+" "+this.controlPoint1+" "+this.controlPoint2+" "+this.end},translate:function(e,t){return this.controlPoint1.translate(e,t),this.controlPoint2.translate(e,t),this.end.translate(e,t),this}};Object.defineProperty(pp,"type",{configurable:!0,enumerable:!0,value:"C"}),up.prototype=sp(cp,op.prototype,pp);var fp=function(){for(var e,t,r=[],i=arguments.length,n=0;n<i;n++)r.push(arguments[n]);if(!(this instanceof fp))return lp(fp,r);if(0===i)throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates (none provided).");if(r[0]instanceof Ru){if(1===i)return this.end=r[0].end.clone(),this;throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates ("+i+" lines provided).")}if(r[0]instanceof op){if(1===i)return this.end=r[0].end.clone(),this;throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates ("+i+" curves provided).")}if("string"==typeof r[0]||"number"==typeof r[0]){if(2===i)return this.end=new Iu(+r[0],+r[1]),this;if(i<2)throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates ("+i+" coordinates provided).");var o;for(e=[],n=0;n<i;n+=2)o=r.slice(n,n+2),0===n?e.push(lp(fp,o)):e.push(lp(dp,o));return e}if(1===i)return this.end=new Iu(r[0]),this;for(e=[],n=0;n<i;n+=1)t=r[n],0===n?e.push(new fp(t)):e.push(new dp(t));return e},mp={bbox:function(){return null},clone:function(){return new fp(this.end)},closestPoint:function(){return this.end.clone()},closestPointNormalizedLength:function(){return 0},closestPointLength:function(){return 0},closestPointT:function(){return 1},closestPointTangent:function(){return null},divideAt:function(){return[this.clone(),this.clone()]},divideAtLength:function(){return[this.clone(),this.clone()]},equals:function(e){return this.end.equals(e.end)},getSubdivisions:function(){return[]},isDifferentiable:function(){return!1},isSubpathStart:!0,isVisible:!1,length:function(){return 0},lengthAtT:function(){return 0},pointAt:function(){return this.end.clone()},pointAtLength:function(){return this.end.clone()},pointAtT:function(){return this.end.clone()},round:function(e){return this.end.round(e),this},scale:function(e,t,r){return this.end.scale(e,t,r),this},serialize:function(){var e=this.end;return this.type+" "+e.x+" "+e.y},tangentAt:function(){return null},tangentAtLength:function(){return null},tangentAtT:function(){return null},toString:function(){return this.type+" "+this.end},translate:function(e,t){return this.end.translate(e,t),this}};Object.defineProperty(mp,"start",{configurable:!0,enumerable:!0,get:function(){throw new Error("Illegal access. Moveto segments should not need a start property.")}}),Object.defineProperty(mp,"type",{configurable:!0,enumerable:!0,value:"M"}),fp.prototype=sp(cp,mp);var gp=function(){for(var e=[],t=arguments.length,r=0;r<t;r++)e.push(arguments[r]);if(!(this instanceof gp))return lp(gp,e);if(t>0)throw new Error("Closepath constructor expects no arguments.");return this},vp={clone:function(){return new gp},divideAt:function(e){var t=new Ru(this.start,this.end).divideAt(e);return[t[1].isDifferentiable()?new dp(t[0]):this.clone(),new dp(t[1])]},divideAtLength:function(e){var t=new Ru(this.start,this.end).divideAtLength(e);return[t[1].isDifferentiable()?new dp(t[0]):this.clone(),new dp(t[1])]},getSubdivisions:function(){return[]},isDifferentiable:function(){return!(!this.previousSegment||!this.subpathStartSegment)&&!this.start.equals(this.end)},round:function(){return this},scale:function(){return this},serialize:function(){return this.type},toString:function(){return this.type+" "+this.start+" "+this.end},translate:function(){return this}};Object.defineProperty(vp,"end",{configurable:!0,enumerable:!0,get:function(){if(!this.subpathStartSegment)throw new Error("Missing subpath start segment. (This segment needs a subpath start segment (e.g. Moveto); OR segment has not yet been added to a path.)");return this.subpathStartSegment.end}}),Object.defineProperty(vp,"type",{configurable:!0,enumerable:!0,value:"Z"}),gp.prototype=sp(cp,Ru.prototype,vp);var bp=ap.segmentTypes={L:dp,C:up,M:fp,Z:gp,z:gp};ap.regexSupportedData=new RegExp("^[\\s\\d"+Object.keys(bp).join("")+",.]*$"),ap.isDataSupported=function(e){return"string"==typeof e&&this.regexSupportedData.test(e)};const yp={curveThroughPoints:function(e){return console.warn("deprecated"),new ap(op.throughPoints(e)).serialize()},getCurveControlPoints:function(e){console.warn("deprecated");var t,r=[],i=[],n=e.length-1;if(1==n)return r[0]=new Iu((2*e[0].x+e[1].x)/3,(2*e[0].y+e[1].y)/3),i[0]=new Iu(2*r[0].x-e[0].x,2*r[0].y-e[0].y),[r,i];var o=[];for(t=1;t<n-1;t++)o[t]=4*e[t].x+2*e[t+1].x;o[0]=e[0].x+2*e[1].x,o[n-1]=(8*e[n-1].x+e[n].x)/2;var s=this.getFirstControlPoints(o);for(t=1;t<n-1;++t)o[t]=4*e[t].y+2*e[t+1].y;o[0]=e[0].y+2*e[1].y,o[n-1]=(8*e[n-1].y+e[n].y)/2;var a=this.getFirstControlPoints(o);for(t=0;t<n;t++)r.push(new Iu(s[t],a[t])),t<n-1?i.push(new Iu(2*e[t+1].x-s[t+1],2*e[t+1].y-a[t+1])):i.push(new Iu((e[n].x+s[n-1])/2,(e[n].y+a[n-1])/2));return[r,i]},getCurveDivider:function(e,t,r,i){console.warn("deprecated");var n=new op(e,t,r,i);return function(e){var t=n.divide(e);return[{p0:t[0].start,p1:t[0].controlPoint1,p2:t[0].controlPoint2,p3:t[0].end},{p0:t[1].start,p1:t[1].controlPoint1,p2:t[1].controlPoint2,p3:t[1].end}]}},getFirstControlPoints:function(e){console.warn("deprecated");var t=e.length,r=[],i=[],n=2;r[0]=e[0]/n;for(var o=1;o<t;o++)i[o]=1/n,n=(o<t-1?4:3.5)-i[o],r[o]=(e[o]-r[o-1])/n;for(o=1;o<t;o++)r[t-o-1]-=i[t-o]*r[t-o];return r},getInversionSolver:function(e,t,r,i){console.warn("deprecated");var n=new op(e,t,r,i);return function(e){return n.closestPointT(e)}}},xp=function(e){return this instanceof xp?"string"==typeof e?new xp.parse(e):void(this.points=Array.isArray(e)?e.map(Iu):[]):new xp(e)};function wp(e,t){const r=e.start.x,i=e.start.y,n=e.end.x,o=e.end.y,s=t.start.x,a=t.start.y,l=n-r,c=o-i,d=t.end.x-s,h=t.end.y-a,u=r-s,p=i-a,f=l*h-d*c,m=(l*p-c*u)/f,g=(d*p-h*u)/f;return m>=0&&m<=1&&g>=0&&g<=1}function _p(e,t){const r=e.a,i=e.b,n=e.x,o=e.y,s=t.start.x-n,a=t.end.x-n,l=t.start.y-o,c=r*r,d=i*i,h=a-s,u=t.end.y-o-l,p=h*h/c+u*u/d,f=2*s*h/c+2*l*u/d,m=f*f-4*p*(s*s/c+l*l/d-1);if(0===m){const e=-f/2/p;return e>=0&&e<=1}if(m>0){const e=Math.sqrt(m),t=(-f+e)/2/p,r=(-f-e)/2/p;return t>=0&&t<=1||r>=0&&r<=1}return!1}function kp(e,t){return function(e,t,r,i){const{cos:n,sin:o}=Math,s=o(t),a=n(t),l=o(i),c=n(i),d=s*s,h=a*a,u=s*a,p=l*l,f=c*c,m=l*c,g=e.a*e.a,v=e.b*e.b,b=r.a*r.a,y=r.b*r.b,x=g*d+v*h,w=b*p+y*f,_=g*h+v*d,k=b*f+y*p;let C=2*(v-g)*u,S=2*(y-b)*m,A=-2*x*e.x-C*e.y,P=-2*w*r.x-S*r.y,T=-C*e.x-2*_*e.y,E=-S*r.x-2*k*r.y;const I=x*e.x*e.x+_*e.y*e.y+C*e.x*e.y-g*v,L=w*r.x*r.x+k*r.y*r.y+S*r.x*r.y-b*y;C/=2,S/=2,A/=2,P/=2,T/=2,E/=2;const O=Jp([[x,C,A],[C,_,T],[A,T,I]]),M=Jp([[w,S,P],[S,k,E],[P,E,L]]),R=.33333333*(Jp([[w,C,A],[S,_,T],[P,T,I]])+Jp([[x,S,A],[C,k,T],[A,E,I]])+Jp([[x,C,P],[C,_,E],[A,T,L]])),$=.33333333*(Jp([[x,S,P],[C,k,E],[A,E,L]])+Jp([[w,C,P],[S,_,E],[P,T,L]])+Jp([[w,S,A],[S,k,T],[P,E,I]])),N=Yp([[O,R],[R,$]]),D=Yp([[O,$],[R,M]]),z=Yp([[R,$],[$,M]]);if(Yp([[2*N,D],[D,2*z]])>0&&($>0||R>0))return!1;return!0}(e,0,t,0)}function Cp(e,t){const{start:r,end:i}=t,{x:n,y:o,width:s,height:a}=e;return!(r.x>n+s&&i.x>n+s||r.x<n&&i.x<n||r.y>o+a&&i.y>o+a||r.y<o&&i.y<o)&&(!(!e.containsPoint(t.start)&&!e.containsPoint(t.end))||(wp(e.topLine(),t)||wp(e.rightLine(),t)||wp(e.bottomLine(),t)||wp(e.leftLine(),t)))}function Sp(e,t){return!!Ap(e,Yu.fromEllipse(t))&&Op(xp.fromRect(e),t)}function Ap(e,t){return e.x<t.x+t.width&&e.x+e.width>t.x&&e.y<t.y+t.height&&e.y+e.height>t.y}function Pp(e,t){return Vp(e,t,{interior:!1})}function Tp(e,t){return jp(e,t,{interior:!1})}function Ep(e,t){return Gp(e,t,{interior:!1})}function Ip(e,t){return Wp(e,t,{interior:!1})}function Lp(e,t){return Vp(e,t,{interior:!0})}function Op(e,t){return jp(e,t,{interior:!0})}function Mp(e,t){return Gp(e,t,{interior:!0})}function Rp(e,t){return Wp(e,t,{interior:!0})}function $p(e,t){return qp(e,t,{interior:!0})}function Np(e,t,r){return e.getSubpaths().some((e=>{const[i]=e.toPolylines(r),{type:n}=e.getSegment(-1);return"Z"===n?Lp(i,t):Pp(i,t)}))}function Dp(e,t,r){return e.getSubpaths().some((e=>{const[i]=e.toPolylines(r),{type:n}=e.getSegment(-1);return"Z"===n?Op(i,t):Tp(i,t)}))}function zp(e,t,r){return Fp(e,xp.fromRect(t),r)}function Bp(e,t,r){return Hp(e,t,r,{interior:!1})}function Fp(e,t,r){return Hp(e,t,r,{interior:!0})}function Up(e,t,r,i){return e.getSubpaths().some((e=>{const[n]=e.toPolylines(r),{type:o}=e.getSegment(-1);return"Z"===o?Fp(t,n,i):Bp(t,n,i)}))}function Vp(e,t,r={}){const{interior:i=!1}=r;let n;if(i){if(e.containsPoint(t.start))return!0;const{start:r,end:i,points:o}=e;n=i.equals(r)?o:[...o,r]}else n=e.points;const{length:o}=n,s=new Ru;for(let e=0;e<o-1;e++)if(s.start=n[e],s.end=n[e+1],wp(t,s))return!0;return!1}function jp(e,t,r={}){const{start:i,end:n,points:o}=e;if(t.containsPoint(i))return!0;let s;const{interior:a=!1}=r;if(a){if(e.containsPoint(t.center()))return!0;s=n.equals(i)?o:[...o,i]}else s=o;const{length:l}=s,c=new Ru;for(let e=0;e<l-1;e++)if(c.start=s[e],c.end=s[e+1],_p(t,c))return!0;return!1}function Gp(e,t,r){return qp(e,xp.fromRect(t),r)}function Hp(e,t,r,i){return e.getSubpaths().some((e=>{const[n]=e.toPolylines(r),{type:o}=e.getSegment(-1);return"Z"===o?qp(t,n,i):Wp(t,n,i)}))}function Wp(e,t,r={}){const{interior:i=!1}=r;let n;if(i){const{start:r}=t;if(e.containsPoint(r))return!0;n=e.clone().close()}else n=e;const o=t.points,{length:s}=o,a=new Ru;for(let e=0;e<s-1;e++)if(a.start=o[e],a.end=o[e+1],Pp(n,a))return!0;return!1}function qp(e,t,r){return t.containsPoint(e.start)||Wp(e,t.clone().close(),r)}function Yp(e){return e[0][0]*e[1][1]-e[0][1]*e[1][0]}function Jp(e){return e[0][0]*e[1][1]*e[2][2]-e[0][0]*e[1][2]*e[2][1]-e[0][1]*e[1][0]*e[2][2]+e[0][1]*e[1][2]*e[2][0]+e[0][2]*e[1][0]*e[2][1]-e[0][2]*e[1][1]*e[2][0]}xp.parse=function(e){return new xp(Xu(e))},xp.fromRect=function(e){return new xp([e.topLeft(),e.topRight(),e.bottomRight(),e.bottomLeft()])},xp.prototype=sp(Ku.prototype,{type:yu.Polygon,clone:function(){return new xp(Zu(this.points))},convexHull:function(){return new xp(Qu(this.points))},lengthPoints:function(){const{start:e,end:t,points:r}=this;return r.length<=1||e.equals(t)?r:[...r,e.clone()]}});var Xp=Object.freeze({__proto__:null,exists:function e(t,r,i,n){switch(t.type){case yu.Line:if(r.type===yu.Line)return wp(t,r);break;case yu.Ellipse:switch(r.type){case yu.Line:return _p(t,r);case yu.Ellipse:return kp(t,r)}break;case yu.Rect:switch(r.type){case yu.Line:return Cp(t,r);case yu.Ellipse:return Sp(t,r);case yu.Rect:return Ap(t,r)}break;case yu.Polyline:switch(r.type){case yu.Line:return Pp(t,r);case yu.Ellipse:return Tp(t,r);case yu.Rect:return Ep(t,r);case yu.Polyline:return Ip(t,r)}break;case yu.Polygon:switch(r.type){case yu.Line:return Lp(t,r);case yu.Ellipse:return Op(t,r);case yu.Rect:return Mp(t,r);case yu.Polyline:return Rp(t,r);case yu.Polygon:return $p(t,r)}break;case yu.Path:switch(r.type){case yu.Line:return Np(t,r,i);case yu.Ellipse:return Dp(t,r,i);case yu.Rect:return zp(t,r,i);case yu.Polyline:return Bp(t,r,i);case yu.Polygon:return Fp(t,r,i);case yu.Path:return Up(t,r,i,n)}}switch(r.type){case yu.Ellipse:case yu.Rect:case yu.Polyline:case yu.Polygon:case yu.Path:return e(r,t,n,i);default:throw Error(`The intersection for ${t} and ${r} could not be found.`)}},lineWithLine:wp,ellipseWithLine:_p,ellipseWithEllipse:kp,rectWithLine:Cp,rectWithEllipse:Sp,rectWithRect:Ap,polylineWithLine:Pp,polylineWithEllipse:Tp,polylineWithRect:Ep,polylineWithPolyline:Ip,polygonWithLine:Lp,polygonWithEllipse:Op,polygonWithRect:Mp,polygonWithPolyline:Rp,polygonWithPolygon:$p,pathWithLine:Np,pathWithEllipse:Dp,pathWithRect:zp,pathWithPolyline:Bp,pathWithPolygon:Fp,pathWithPath:Up});const Zp=Xp;var Qp=Object.freeze({__proto__:null,intersection:Zp,scale:{linear:function(e,t,r){var i=e[1]-e[0],n=t[1]-t[0];return(r-e[0])/i*n+t[0]||0}},normalizeAngle:lu,snapToGrid:cu,toDeg:du,toRad:hu,random:uu,bezier:yp,Curve:op,Ellipse:Bu,ellipse:Fu,Line:Ru,line:$u,Path:ap,Point:Iu,point:Lu,Polyline:Ku,Polygon:xp,Rect:Yu,rect:Ju,types:yu});const Kp=function(){if(!("object"==typeof window&&!!window.SVGAngle))return function(){throw new Error("SVG is required to use Vectorizer.")};var e={svg:"http://www.w3.org/2000/svg",xmlns:"http://www.w3.org/2000/xmlns/",xml:"http://www.w3.org/XML/1998/namespace",xlink:"http://www.w3.org/1999/xlink",xhtml:"http://www.w3.org/1999/xhtml"},t=Math,r=t.PI,i=t.atan2,n=t.sqrt,o=t.min,s=t.max,a=t.cos,l=t.sin,c=function(t,r,i){if(!(this instanceof c))return c.apply(Object.create(c.prototype),arguments);if(t){if(c.isV(t)&&(t=t.node),r=r||{},c.isString(t)){if("svg"===(t=t.trim()).toLowerCase())t=c.createSvgDocument();else if("<"===t[0]){var n=c.createSvgDocument(t);if(n.childNodes.length>1){var o,s,a=[];for(o=0,s=n.childNodes.length;o<s;o++){var l=n.childNodes[o];a.push(new c(document.importNode(l,!0)))}return a}t=document.importNode(n.firstChild,!0)}else t=document.createElementNS(e.svg,t);c.ensureId(t)}return this.node=t,this.setAttributes(r),i&&this.append(i),this}},d=c.prototype;function h(e,t,r){r||(r={});for(var i=r.includeAnnotationIndices,n=r.eol,o=r.lineHeight,s=r.baseSize,a=0,l={},d=t.length-1,h=0;h<=d;h++){var u=t[h],p=null;if(c.isObject(u)){var f=u.attrs,m=c("tspan",f),g=m.node,v=u.t;n&&h===d&&(v+=n),g.textContent=v;var b=f.class;b&&m.addClass(b),i&&m.attr("annotations",u.annotations),p=parseFloat(f["font-size"]),isFinite(p)||(p=s),p&&p>a&&(a=p)}else n&&h===d&&(u+=n),g=document.createTextNode(u||" "),s&&s>a&&(a=s);e.appendChild(g)}return a&&(l.maxFontSize=a),o?l.lineHeight=o:a&&(l.lineHeight=1.2*a),l}Object.defineProperty(d,"id",{enumerable:!0,get:function(){return this.node.id},set:function(e){this.node.id=e}}),d.getTransformToElement=function(e){var t=this.node;if(c.isSVGGraphicsElement(e)&&c.isSVGGraphicsElement(t)){var r=c.toNode(e).getScreenCTM(),i=t.getScreenCTM();if(r&&i)return r.inverse().multiply(i)}return c.createSVGMatrix()},d.transform=function(e,t){var r=this.node;if(c.isUndefined(e))return c.transformStringToMatrix(this.attr("transform"));if(t&&t.absolute)return this.attr("transform",c.matrixToTransformString(e));var i=c.createSVGTransform(e);return r.transform.baseVal.appendItem(i),this},d.translate=function(e,t,r){r=r||{},t=t||0;var i=this.attr("transform")||"",n=c.parseTransformString(i);if(i=n.value,c.isUndefined(e))return n.translate;i=i.replace(/translate\([^)]*\)/g,"").trim();var o="translate("+(r.absolute?e:n.translate.tx+e)+","+(r.absolute?t:n.translate.ty+t)+")";return this.attr("transform",(o+" "+i).trim()),this},d.rotate=function(e,t,r,i){i=i||{};var n=this.attr("transform")||"",o=c.parseTransformString(n);if(n=o.value,c.isUndefined(e))return o.rotate;n=n.replace(/rotate\([^)]*\)/g,"").trim(),e%=360;var s="rotate("+(i.absolute?e:o.rotate.angle+e)+(void 0!==t&&void 0!==r?","+t+","+r:"")+")";return this.attr("transform",(n+" "+s).trim()),this},d.scale=function(e,t){t=c.isUndefined(t)?e:t;var r=this.attr("transform")||"",i=c.parseTransformString(r);if(r=i.value,c.isUndefined(e))return i.scale;r=r.replace(/scale\([^)]*\)/g,"").trim();var n="scale("+e+","+t+")";return this.attr("transform",(r+" "+n).trim()),this},d.bbox=function(e,t){var r,i=this.node,n=i.ownerSVGElement;if(!n)return new Yu(0,0,0,0);try{r=i.getBBox()}catch(e){r={x:i.clientLeft,y:i.clientTop,width:i.clientWidth,height:i.clientHeight}}if(e)return new Yu(r);var o=this.getTransformToElement(t||n);return c.transformRect(r,o)},d.getBBox=function(e){var t,r={},i=this.node;if(!i.ownerSVGElement||!c.isSVGGraphicsElement(i))return new Yu(0,0,0,0);if(e&&(e.target&&(r.target=c.toNode(e.target)),e.recursive&&(r.recursive=e.recursive)),r.recursive){var n=this.children(),o=n.length;if(0===o)return this.getBBox({target:r.target,recursive:!1});r.target||(r.target=this);for(var s=0;s<o;s++){var a,l=n[s];a=0===l.children().length?l.getBBox({target:r.target,recursive:!1}):l.getBBox({target:r.target,recursive:!0}),t=t?t.union(a):a}return t}try{t=i.getBBox()}catch(e){t={x:i.clientLeft,y:i.clientTop,width:i.clientWidth,height:i.clientHeight}}if(r.target){var d=this.getTransformToElement(r.target);return c.transformRect(t,d)}return new Yu(t)};var u=/em$/;function p(e,t){var r=parseFloat(e);return u.test(e)?r*t:r}d.text=function(t,r){if(t&&"string"!=typeof t)throw new Error("Vectorizer: text() expects the first argument to be a string.");t=c.sanitizeText(t),r||(r={});var i=r.displayEmpty,n=r.eol,o=r.textPath,s=r.textVerticalAnchor,a="middle"===s||"bottom"===s||"top"===s,l=r.x;void 0===l&&(l=this.attr("x")||0);var d=r.includeAnnotationIndices,f=r.annotations;f&&!c.isArray(f)&&(f=[f]);var m=r.lineHeight,g="auto"===m,v=g?"1.5em":m||"1em";this.empty(),this.attr({"xml:space":"preserve",display:t||i?null:"none"});var b=parseFloat(this.attr("font-size"));b||(b=16,(a||f)&&this.attr("font-size",b));var y,x=document;o?("string"==typeof o&&(o={d:o}),y=function(e,t){e||(e={});var r=c("textPath"),i=e.d;if(i&&void 0===e["xlink:href"]){var n=c("path").attr("d",i).appendTo(t.defs());r.attr("xlink:href","#"+n.id)}return c.isObject(e)&&r.attr(e),r.node}(o,this)):y=x.createDocumentFragment();for(var w,_=0,k=t.split("\n"),C=[],S=0,A=k.length-1;S<=A;S++){var P,T=v,E="v-line",I=x.createElementNS(e.svg,"tspan"),L=k[S];if(L)if(f){var O=c.annotateString(L,f,{offset:-_,includeAnnotationIndices:d}),M=(P=h(I,O,{includeAnnotationIndices:d,eol:S!==A&&n,lineHeight:g?null:v,baseSize:b})).lineHeight;M&&g&&0!==S&&(T=M),0===S&&(w=.8*P.maxFontSize)}else n&&S!==A&&(L+=n),I.textContent=L;else{I.textContent="-",E+=" v-empty-line";var R=I.style;if(R.fillOpacity=0,R.strokeOpacity=0,f){P={};let e=b;for(let t=(O=c.findAnnotationsAtIndex(f,_)).length;t>0;t--){const r=O[t-1].attrs;if(!r||!("font-size"in r))continue;const i=parseFloat(r["font-size"]);if(isFinite(i)){e=i;break}}g&&(S>0?T=1.2*e:w=.8*e),I.setAttribute("font-size",e),P.maxFontSize=e}}P&&C.push(P),S>0&&I.setAttribute("dy",T),(S>0||o)&&I.setAttribute("x",l),I.className.baseVal=E,y.appendChild(I),_+=L.length+1}if(a)if(f)T=function(e,t,r,i){if(!Array.isArray(t))return 0;var n=t.length;if(!n)return 0;for(var o=t[0],s=p(o.maxFontSize,r)||r,a=0,l=p(i,r),c=1;c<n;c++)a+=p((o=t[c]).lineHeight,r)||l;var d,h=p(o.maxFontSize,r)||r;switch(e){case"middle":d=s/2-.15*h-a/2;break;case"bottom":d=-.25*h-a;break;default:d=.8*s}return d}(s,C,b,v);else if("top"===s)T="0.8em";else{var $;switch(A>0?($=parseFloat(v)||1,$*=A,u.test(v)||($/=b)):$=0,s){case"middle":T=.3-$/2+"em";break;case"bottom":T=-$-.3+"em"}}else 0===s?T="0em":s?T=s:(T=0,null===this.attr("y")&&this.attr("y",w||"0.8em"));return y.firstChild.setAttribute("dy",T),this.append(y),this},d.removeAttr=function(e){const t=v[e],{ns:r,local:i}=c.qualifyAttr(t),n=this.node;return r?n.hasAttributeNS(r,i)&&n.removeAttributeNS(r,i):n.hasAttribute(t)&&n.removeAttribute(t),this},d.attr=function(e,t){if(c.isUndefined(e)){for(var r=this.node.attributes,i={},n=0;n<r.length;n++)i[r[n].name]=r[n].value;return i}if(c.isString(e)&&c.isUndefined(t))return this.node.getAttribute(v[e]);if("object"==typeof e)for(var o in e)e.hasOwnProperty(o)&&this.setAttribute(o,e[o]);else this.setAttribute(e,t);return this},d.normalizePath=function(){return"PATH"===this.tagName()&&this.attr("d",c.normalizePathData(this.attr("d"))),this},d.remove=function(){return this.node.parentNode&&this.node.parentNode.removeChild(this.node),this},d.empty=function(){for(;this.node.firstChild;)this.node.removeChild(this.node.firstChild);return this},d.setAttributes=function(e){for(var t in e)e.hasOwnProperty(t)&&this.setAttribute(t,e[t]);return this},d.append=function(e){c.isArray(e)||(e=[e]);for(var t=0,r=e.length;t<r;t++)this.node.appendChild(c.toNode(e[t]));return this},d.prepend=function(e){var t=this.node.firstChild;return t?c(t).before(e):this.append(e)},d.before=function(e){var t=this.node,r=t.parentNode;if(r){c.isArray(e)||(e=[e]);for(var i=0,n=e.length;i<n;i++)r.insertBefore(c.toNode(e[i]),t)}return this},d.appendTo=function(e){return c.toNode(e).appendChild(this.node),this},d.svg=function(){return this.node instanceof window.SVGSVGElement?this:c(this.node.ownerSVGElement)},d.tagName=function(){return this.node.tagName.toUpperCase()},d.defs=function(){var e=this.svg()||this,t=e.node.getElementsByTagName("defs")[0];return t?c(t):c("defs").appendTo(e)},d.clone=function(){var e=c(this.node.cloneNode(!0));return e.node.id=c.uniqueId(),e},d.findOne=function(e){var t=this.node.querySelector(e);return t?c(t):void 0},d.find=function(e){var t=[],r=this.node.querySelectorAll(e);if(r)for(var i=0;i<r.length;i++)t.push(c(r[i]));return t},d.children=function(){for(var e=this.node.childNodes,t=[],r=0;r<e.length;r++){1===e[r].nodeType&&t.push(c(e[r]))}return t},d.parent=function(){return c(this.node.parentNode)||null},d.index=function(){for(var e=0,t=this.node.previousSibling;t;)1===t.nodeType&&e++,t=t.previousSibling;return e},d.findParentByClass=function(e,t){for(var r=this.node.ownerSVGElement,i=this.node.parentNode;i&&i!==t&&i!==r;){var n=c(i);if(n.hasClass(e))return n;i=i.parentNode}return null},d.contains=function(e){var t=this.node,r=c.toNode(e),i=r&&r.parentNode;return t===i||!!(i&&1===i.nodeType&&16&t.compareDocumentPosition(i))},d.toLocalPoint=function(e,t){var r=this.svg().node,i=r.createSVGPoint();i.x=e,i.y=t;try{var n=i.matrixTransform(r.getScreenCTM().inverse()),o=this.getTransformToElement(r).inverse()}catch(e){return i}return n.matrixTransform(o)},d.translateCenterToPoint=function(e){var t=this.getBBox({target:this.svg()}).center();return this.translate(e.x-t.x,e.y-t.y),this},d.translateAndAutoOrient=function(e,t,r){e=new Iu(e),t=new Iu(t),r||(r=this.svg());var i=this.scale();this.attr("transform","");var n=this.getBBox({target:r}).scale(i.sx,i.sy),o=c.createSVGTransform();o.setTranslate(-n.x-n.width/2,-n.y-n.height/2);var s=c.createSVGTransform(),a=e.angleBetween(t,e.clone().offset(1,0));a&&s.setRotate(a,0,0);var l=c.createSVGTransform(),d=e.clone().move(t,n.width/2);l.setTranslate(2*e.x-d.x,2*e.y-d.y);var h=this.getTransformToElement(r),u=c.createSVGTransform();return u.setMatrix(l.matrix.multiply(s.matrix.multiply(o.matrix.multiply(h.scale(i.sx,i.sy))))),this.attr("transform",c.matrixToTransformString(u.matrix)),this},d.animateAlongPath=function(e,t){t=c.toNode(t);var r=c.ensureId(t),i=c("animateMotion",e),n=c("mpath",{"xlink:href":"#"+r});i.append(n),this.append(i);try{i.node.beginElement()}catch(e){if("fake"===document.documentElement.getAttribute("smiling")){var o=i.node;o.animators=[];var s=o.getAttribute("id");s&&(id2anim[s]=o);for(var a=getTargets(o),l=0,d=a.length;l<d;l++){var h=a[l],u=new Animator(o,h,l);animators.push(u),o.animators[l]=u,u.register()}}}return this};const f=/[^\x20\t\r\n\f]+/g;function m(e){return c.isString(e)&&e.trim().match(f)||[]}d.hasClass=function(e){return!!c.isString(e)&&this.node.classList.contains(e.trim())},d.addClass=function(e){return this.node.classList.add(...m(e)),this},d.removeClass=function(e){return this.node.classList.remove(...m(e)),this},d.toggleClass=function(e,t){const r=m(e);for(let e=0;e<r.length;e++)this.node.classList.toggle(r[e],t);return this},d.sample=function(e){e=e||1;for(var t,r=this.node,i=r.getTotalLength(),n=[],o=0;o<i;)t=r.getPointAtLength(o),n.push({x:t.x,y:t.y,distance:o}),o+=e;return n},d.convertToPath=function(){var e=c("path");e.attr(this.attr());var t=this.convertToPathData();return t&&e.attr("d",t),e},d.convertToPathData=function(){var e=this.tagName();switch(e){case"PATH":return this.attr("d");case"LINE":return c.convertLineToPathData(this.node);case"POLYGON":return c.convertPolygonToPathData(this.node);case"POLYLINE":return c.convertPolylineToPathData(this.node);case"ELLIPSE":return c.convertEllipseToPathData(this.node);case"CIRCLE":return c.convertCircleToPathData(this.node);case"RECT":return c.convertRectToPathData(this.node)}throw new Error(e+" cannot be converted to PATH.")},c.prototype.toGeometryShape=function(){var e,t,r,i,n,o,s,a,l,d,h,u,p,f,m;switch(this.tagName()){case"RECT":return e=parseFloat(this.attr("x"))||0,t=parseFloat(this.attr("y"))||0,r=parseFloat(this.attr("width"))||0,i=parseFloat(this.attr("height"))||0,new Yu(e,t,r,i);case"CIRCLE":return n=parseFloat(this.attr("cx"))||0,o=parseFloat(this.attr("cy"))||0,s=parseFloat(this.attr("r"))||0,new Bu({x:n,y:o},s,s);case"ELLIPSE":return n=parseFloat(this.attr("cx"))||0,o=parseFloat(this.attr("cy"))||0,a=parseFloat(this.attr("rx"))||0,l=parseFloat(this.attr("ry"))||0,new Bu({x:n,y:o},a,l);case"POLYLINE":return d=c.getPointsFromSvgNode(this),new Ku(d);case"POLYGON":return(d=c.getPointsFromSvgNode(this)).length>1&&d.push(d[0]),new Ku(d);case"PATH":return h=this.attr("d"),ap.isDataSupported(h)||(h=c.normalizePathData(h)),new ap(h);case"LINE":return u=parseFloat(this.attr("x1"))||0,f=parseFloat(this.attr("y1"))||0,p=parseFloat(this.attr("x2"))||0,m=parseFloat(this.attr("y2"))||0,new Ru({x:u,y:f},{x:p,y:m})}return this.getBBox()},d.findIntersection=function(e,t){var r=this.svg().node;t=t||r;var i=this.getBBox({target:t}),n=i.center();if(i.intersectionWithLineFromCenterToPoint(e)){var o,s=this.tagName();if("RECT"===s){var a=new Yu(parseFloat(this.attr("x")||0),parseFloat(this.attr("y")||0),parseFloat(this.attr("width")),parseFloat(this.attr("height"))),l=this.getTransformToElement(t),d=c.decomposeMatrix(l),h=r.createSVGTransform();h.setRotate(-d.rotation,n.x,n.y);var u=c.transformRect(a,h.matrix.multiply(l));o=new Yu(u).intersectionWithLineFromCenterToPoint(e,d.rotation)}else if("PATH"===s||"POLYGON"===s||"POLYLINE"===s||"CIRCLE"===s||"ELLIPSE"===s){var p,f,m,g,v,b=("PATH"===s?this:this.convertToPath()).sample(),y=1/0,x=[];for(p=0;p<b.length;p++)f=b[p],m=(m=c.createSVGPoint(f.x,f.y)).matrixTransform(this.getTransformToElement(t)),(v=(f=new Iu(m)).distance(n)+(g=1.1*f.distance(e)))<y?(y=v,x=[{sample:f,refDistance:g}]):v<y+1&&x.push({sample:f,refDistance:g});x.sort((function(e,t){return e.refDistance-t.refDistance})),x[0]&&(o=x[0].sample)}return o}},d.setAttribute=function(e,t){const r=this.node;if(null===t)return this.removeAttr(e),this;const i=v[e],{ns:n}=c.qualifyAttr(i);return n?r.setAttributeNS(n,i,t):"id"===i?r.id=t:r.setAttribute(i,t),this},c.createSvgDocument=function(t){if(t){const r=`<svg xmlns="${e.svg}" xmlns:xlink="${e.xlink}" version="1.1">${t}</svg>`,{documentElement:i}=c.parseXML(r,{async:!1});return i}const r=document.createElementNS(e.svg,"svg");return r.setAttributeNS(e.xmlns,"xmlns:xlink",e.xlink),r.setAttribute("version","1.1"),r},c.createSVGStyle=function(e){const{node:t}=c("style",{type:"text/css"},[c.createCDATASection(e)]);return t},c.createCDATASection=function(e=""){return document.implementation.createDocument(null,"xml",null).createCDATASection(e)},c.idCounter=0,c.uniqueId=function(){return"v-"+ ++c.idCounter},c.toNode=function(e){return c.isV(e)?e.node:e.nodeName&&e||e[0]},c.ensureId=function(e){return(e=c.toNode(e)).id||(e.id=c.uniqueId())},c.sanitizeText=function(e){return(e||"").replace(/ /g,"")},c.isUndefined=function(e){return void 0===e},c.isString=function(e){return"string"==typeof e},c.isObject=function(e){return e&&"object"==typeof e},c.isArray=Array.isArray,c.parseXML=function(e,t){var r;t=t||{};try{var i=new DOMParser;c.isUndefined(t.async)||(i.async=t.async),r=i.parseFromString(e,"text/xml")}catch(e){r=void 0}if(!r||r.getElementsByTagName("parsererror").length)throw new Error("Invalid XML: "+e);return r};const g=Object.create(null);["baseFrequency","baseProfile","clipPathUnits","contentScriptType","contentStyleType","diffuseConstant","edgeMode","externalResourcesRequired","filterRes","filterUnits","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].forEach((e=>g[e]=e)),g.xlinkShow="xlink:show",g.xlinkRole="xlink:role",g.xlinkActuate="xlink:actuate",g.xlinkHref="xlink:href",g.xlinkType="xlink:type",g.xlinkTitle="xlink:title",g.xmlBase="xml:base",g.xmlLang="xml:lang",g.xmlSpace="xml:space";const v=new Proxy(g,{get:(e,t)=>c.supportCamelCaseAttributes?t in e?e[t]:e[t]=t.replace(/[A-Z]/g,"-$&").toLowerCase():t});Object.defineProperty(c,"attributeNames",{enumerable:!0,value:v,writable:!1}),Object.defineProperty(c,"supportCamelCaseAttributes",{enumerable:!0,value:!0,writable:!0}),c.qualifyAttr=function(t){if(-1!==t.indexOf(":")){var r=t.split(":");return{ns:e[r[0]],local:r[1]}}return{ns:null,local:t}},c.transformSeparatorRegex=/[ ,]+/,c.transformRegex=/\b\w+\([^()]+\)/g,c.transformFunctionRegex=/\b(\w+)\(([^()]+)\)/,c.transformTranslateRegex=/\btranslate\(([^()]+)\)/,c.transformRotateRegex=/\brotate\(([^()]+)\)/,c.transformScaleRegex=/\bscale\(([^()]+)\)/,c.transformStringToMatrix=function(e){let t=c.createSVGMatrix();const r=e&&e.match(c.transformRegex);if(!r)return t;const i=r.length;for(let e=0;e<i;e++){const i=r[e].match(c.transformFunctionRegex);if(i){let e,r,n,o,s,a=c.createSVGMatrix();const l=i[1].toLowerCase(),d=i[2].split(c.transformSeparatorRegex);switch(l){case"scale":e=parseFloat(d[0]),r=void 0===d[1]?e:parseFloat(d[1]),a=a.scaleNonUniform(e,r);break;case"translate":n=parseFloat(d[0]),o=parseFloat(d[1]),a=a.translate(n,o);break;case"rotate":s=parseFloat(d[0]),n=parseFloat(d[1])||0,o=parseFloat(d[2])||0,a=0!==n||0!==o?a.translate(n,o).rotate(s).translate(-n,-o):a.rotate(s);break;case"skewx":s=parseFloat(d[0]),a=a.skewX(s);break;case"skewy":s=parseFloat(d[0]),a=a.skewY(s);break;case"matrix":a.a=parseFloat(d[0]),a.b=parseFloat(d[1]),a.c=parseFloat(d[2]),a.d=parseFloat(d[3]),a.e=parseFloat(d[4]),a.f=parseFloat(d[5]);break;default:continue}t=t.multiply(a)}}return t},c.matrixToTransformString=function(e){return e||(e=!0),"matrix("+(void 0!==e.a?e.a:1)+","+(void 0!==e.b?e.b:0)+","+(void 0!==e.c?e.c:0)+","+(void 0!==e.d?e.d:1)+","+(void 0!==e.e?e.e:0)+","+(void 0!==e.f?e.f:0)+")"},c.parseTransformString=function(e){var t,r,i;if(e){var n=c.transformSeparatorRegex;if(e.trim().indexOf("matrix")>=0){var o=c.transformStringToMatrix(e),s=c.decomposeMatrix(o);t=[s.translateX,s.translateY],i=[s.scaleX,s.scaleY],r=[s.rotation];var a=[];0===t[0]&&0===t[1]||a.push("translate("+t+")"),1===i[0]&&1===i[1]||a.push("scale("+i+")"),0!==r[0]&&a.push("rotate("+r+")"),e=a.join(" ")}else{const o=e.match(c.transformTranslateRegex);o&&(t=o[1].split(n));const s=e.match(c.transformRotateRegex);s&&(r=s[1].split(n));const a=e.match(c.transformScaleRegex);a&&(i=a[1].split(n))}}var l=i&&i[0]?parseFloat(i[0]):1;return{value:e,translate:{tx:t&&t[0]?parseInt(t[0],10):0,ty:t&&t[1]?parseInt(t[1],10):0},rotate:{angle:r&&r[0]?parseInt(r[0],10):0,cx:r&&r[1]?parseInt(r[1],10):void 0,cy:r&&r[2]?parseInt(r[2],10):void 0},scale:{sx:l,sy:i&&i[1]?parseFloat(i[1]):l}}},c.deltaTransformPoint=function(e,t){return{x:t.x*e.a+t.y*e.c+0,y:t.x*e.b+t.y*e.d+0}},c.decomposeMatrix=function(e){var t=c.deltaTransformPoint(e,{x:0,y:1}),o=c.deltaTransformPoint(e,{x:1,y:0}),s=180/r*i(t.y,t.x)-90,a=180/r*i(o.y,o.x);return{translateX:e.e,translateY:e.f,scaleX:n(e.a*e.a+e.b*e.b),scaleY:n(e.c*e.c+e.d*e.d),skewX:s,skewY:a,rotation:s}},c.matrixToScale=function(e){var t,r,i,o;return e?(t=c.isUndefined(e.a)?1:e.a,o=c.isUndefined(e.d)?1:e.d,r=e.b,i=e.c):t=o=1,{sx:r?n(t*t+r*r):t,sy:i?n(i*i+o*o):o}},c.matrixToRotate=function(e){var t={x:0,y:1};return e&&(t=c.deltaTransformPoint(e,t)),{angle:lu(du(i(t.y,t.x))-90)}},c.matrixToTranslate=function(e){return{tx:e&&e.e||0,ty:e&&e.f||0}},c.isV=function(e){return e instanceof c},c.isVElement=c.isV,c.isSVGGraphicsElement=function(e){return!!e&&((e=c.toNode(e))instanceof SVGElement&&"function"==typeof e.getScreenCTM)};var b=c("svg").node;return c.createSVGMatrix=function(e){var t=b.createSVGMatrix();for(var r in e)t[r]=e[r];return t},c.createSVGTransform=function(e){return c.isUndefined(e)?b.createSVGTransform():(e instanceof SVGMatrix||(e=c.createSVGMatrix(e)),b.createSVGTransformFromMatrix(e))},c.createSVGPoint=function(e,t){var r=b.createSVGPoint();return r.x=e,r.y=t,r},c.transformRect=function(e,t){var r=b.createSVGPoint();r.x=e.x,r.y=e.y;var i=r.matrixTransform(t);r.x=e.x+e.width,r.y=e.y;var n=r.matrixTransform(t);r.x=e.x+e.width,r.y=e.y+e.height;var a=r.matrixTransform(t);r.x=e.x,r.y=e.y+e.height;var l=r.matrixTransform(t),c=o(i.x,n.x,a.x,l.x),d=s(i.x,n.x,a.x,l.x),h=o(i.y,n.y,a.y,l.y),u=s(i.y,n.y,a.y,l.y);return new Yu(c,h,d-c,u-h)},c.transformPoint=function(e,t){return new Iu(c.createSVGPoint(e.x,e.y).matrixTransform(t))},c.transformLine=function(e,t){return new Ru(c.transformPoint(e.start,t),c.transformPoint(e.end,t))},c.transformPolyline=function(e,t){var r=e instanceof Ku?e.points:e;c.isArray(r)||(r=[]);for(var i=[],n=0,o=r.length;n<o;n++)i[n]=c.transformPoint(r[n],t);return new Ku(i)},c.styleToObject=function(e){for(var t={},r=e.split(";"),i=0;i<r.length;i++){var n=r[i].split("=");t[n[0].trim()]=n[1].trim()}return t},c.createSlicePathData=function(e,t,i,n){var o=2*r-1e-6,s=e,c=t,d=i,h=n,u=(h<d&&(u=d,d=h,h=u),h-d),p=u<r?"0":"1",f=a(d),m=l(d),g=a(h),v=l(h);return u>=o?s?"M0,"+c+"A"+c+","+c+" 0 1,1 0,"+-c+"A"+c+","+c+" 0 1,1 0,"+c+"M0,"+s+"A"+s+","+s+" 0 1,0 0,"+-s+"A"+s+","+s+" 0 1,0 0,"+s+"Z":"M0,"+c+"A"+c+","+c+" 0 1,1 0,"+-c+"A"+c+","+c+" 0 1,1 0,"+c+"Z":s?"M"+c*f+","+c*m+"A"+c+","+c+" 0 "+p+",1 "+c*g+","+c*v+"L"+s*g+","+s*v+"A"+s+","+s+" 0 "+p+",0 "+s*f+","+s*m+"Z":"M"+c*f+","+c*m+"A"+c+","+c+" 0 "+p+",1 "+c*g+","+c*v+"L0,0Z"},c.mergeAttrs=function(e,t){for(var r in t)"class"===r?e[r]=e[r]?e[r]+" "+t[r]:t[r]:"style"===r?c.isObject(e[r])&&c.isObject(t[r])?e[r]=c.mergeAttrs(e[r],t[r]):c.isObject(e[r])?e[r]=c.mergeAttrs(e[r],c.styleToObject(t[r])):c.isObject(t[r])?e[r]=c.mergeAttrs(c.styleToObject(e[r]),t[r]):e[r]=c.mergeAttrs(c.styleToObject(e[r]),c.styleToObject(t[r])):e[r]=t[r];return e},c.annotateString=function(e,t,r){t=t||[];for(var i,n,o,s=(r=r||{}).offset||0,a=[],l=[],d=0;d<e.length;d++){n=l[d]=e[d];for(var h=0;h<t.length;h++){var u=t[h],p=u.start+s,f=u.end+s;d>=p&&d<f&&(c.isObject(n)?n.attrs=c.mergeAttrs(c.mergeAttrs({},n.attrs),u.attrs):n=l[d]={t:e[d],attrs:u.attrs},r.includeAnnotationIndices&&(n.annotations||(n.annotations=[])).push(h))}(o=l[d-1])?c.isObject(n)&&c.isObject(o)?JSON.stringify(n.attrs)===JSON.stringify(o.attrs)?i.t+=n.t:(a.push(i),i=n):c.isObject(n)||c.isObject(o)?(a.push(i),i=n):i=(i||"")+n:i=n}return i&&a.push(i),a},c.findAnnotationsAtIndex=function(e,t){var r=[];return e&&e.forEach((function(e){e.start<t&&t<=e.end&&r.push(e)})),r},c.findAnnotationsBetweenIndexes=function(e,t,r){var i=[];return e&&e.forEach((function(e){(t>=e.start&&t<e.end||r>e.start&&r<=e.end||e.start>=t&&e.end<r)&&i.push(e)})),i},c.shiftAnnotations=function(e,t,r){return e&&e.forEach((function(e){e.start<t&&e.end>=t?e.end+=r:e.start>=t&&(e.start+=r,e.end+=r)})),e},c.convertLineToPathData=function(e){return["M",(e=c(e)).attr("x1"),e.attr("y1"),"L",e.attr("x2"),e.attr("y2")].join(" ")},c.convertPolygonToPathData=function(e){var t=c.getPointsFromSvgNode(e);return 0===t.length?null:c.svgPointsToPath(t)+" Z"},c.convertPolylineToPathData=function(e){var t=c.getPointsFromSvgNode(e);return 0===t.length?null:c.svgPointsToPath(t)},c.svgPointsToPath=function(e){for(var t=0,r=e.length;t<r;t++)e[t]=e[t].x+" "+e[t].y;return"M "+e.join(" L")},c.getPointsFromSvgNode=function(e){var t=[],r=(e=c.toNode(e)).points;if(r)for(var i=0,n=r.numberOfItems;i<n;i++)t.push(r.getItem(i));return t},c.KAPPA=.551784,c.convertCircleToPathData=function(e){e=c(e);var t=parseFloat(e.attr("cx"))||0,r=parseFloat(e.attr("cy"))||0,i=parseFloat(e.attr("r")),n=i*c.KAPPA;return["M",t,r-i,"C",t+n,r-i,t+i,r-n,t+i,r,"C",t+i,r+n,t+n,r+i,t,r+i,"C",t-n,r+i,t-i,r+n,t-i,r,"C",t-i,r-n,t-n,r-i,t,r-i,"Z"].join(" ")},c.convertEllipseToPathData=function(e){e=c(e);var t=parseFloat(e.attr("cx"))||0,r=parseFloat(e.attr("cy"))||0,i=parseFloat(e.attr("rx")),n=parseFloat(e.attr("ry"))||i,o=i*c.KAPPA,s=n*c.KAPPA;return["M",t,r-n,"C",t+o,r-n,t+i,r-s,t+i,r,"C",t+i,r+s,t+o,r+n,t,r+n,"C",t-o,r+n,t-i,r+s,t-i,r,"C",t-i,r-s,t-o,r-n,t,r-n,"Z"].join(" ")},c.convertRectToPathData=function(e){return e=c(e),c.rectToPath({x:parseFloat(e.attr("x"))||0,y:parseFloat(e.attr("y"))||0,width:parseFloat(e.attr("width"))||0,height:parseFloat(e.attr("height"))||0,rx:parseFloat(e.attr("rx"))||0,ry:parseFloat(e.attr("ry"))||0})},c.rectToPath=function(e){var t=e.x,r=e.y,i=e.width,n=e.height,s=o(e.rx||e["top-rx"]||0,i/2),a=o(e.rx||e["bottom-rx"]||0,i/2),l=o(e.ry||e["top-ry"]||0,n/2),c=o(e.ry||e["bottom-ry"]||0,n/2);return(s||a||l||c?["M",t,r+l,"v",n-l-c,"a",a,c,0,0,0,a,c,"h",i-2*a,"a",a,c,0,0,0,a,-c,"v",-(n-c-l),"a",s,l,0,0,0,-s,-l,"h",-(i-2*s),"a",s,l,0,0,0,-s,l,"Z"]:["M",t,r,"H",t+i,"V",r+n,"H",t,"V",r,"Z"]).join(" ")},c.normalizePathData=function(){var e="\t\n\v\f\r \u2028\u2029",t=new RegExp("([a-z])["+e+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+e+"]*,?["+e+"]*)+)","ig"),r=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+e+"]*,?["+e+"]*","ig"),i=Math,n=i.PI,o=i.sin,s=i.cos,a=i.tan,l=i.asin,c=i.sqrt,d=i.abs;function h(e,t,r,i,n,o){var s=1/3,a=2/3;return[s*e+a*r,s*t+a*i,s*n+a*r,s*o+a*i,n,o]}function u(e,t,r){return{x:e*s(r)-t*o(r),y:e*o(r)+t*s(r)}}function p(e,t,r,i,h,f,m,g,v,b){var y,x=120*n/180,w=n/180*(+h||0),_=[];if(b)L=b[0],O=b[1],E=b[2],I=b[3];else{e=(y=u(e,t,-w)).x,t=y.y;var k=(e-(g=(y=u(g,v,-w)).x))/2,C=(t-(v=y.y))/2,S=k*k/(r*r)+C*C/(i*i);S>1&&(r*=S=c(S),i*=S);var A=r*r,P=i*i,T=(f==m?-1:1)*c(d((A*P-A*C*C-P*k*k)/(A*C*C+P*k*k)));if(!Number.isFinite(T))return[e,t,g,v,g,v];var E=T*r*C/i+(e+g)/2,I=T*-i*k/r+(t+v)/2,L=l(((t-I)/i).toFixed(9)),O=l(((v-I)/i).toFixed(9));(L=e<E?n-L:L)<0&&(L=2*n+L),(O=g<E?n-O:O)<0&&(O=2*n+O),m&&L>O&&(L-=2*n),!m&&O>L&&(O-=2*n)}var M=O-L;if(d(M)>x){var R=O,$=g,N=v;_=p(g=E+r*s(O=L+x*(m&&O>L?1:-1)),v=I+i*o(O),r,i,h,0,m,$,N,[O,R,E,I])}M=O-L;var D=s(L),z=o(L),B=s(O),F=o(O),U=a(M/4),V=4/3*(r*U),j=4/3*(i*U),G=[e,t],H=[e+V*z,t-j*D],W=[g+V*F,v-j*B],q=[g,v];if(H[0]=2*G[0]-H[0],H[1]=2*G[1]-H[1],b)return[H,W,q].concat(_);for(var Y=[],J=(_=[H,W,q].concat(_).join().split(",")).length,X=0;X<J;X++)Y[X]=X%2?u(_[X-1],_[X],w).y:u(_[X],_[X+1],w).x;return Y}function f(e){if(Array.isArray(e)&&Array.isArray(e&&e[0])||(e=function(e){if(!e)return null;var i={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},n=[];return String(e).replace(t,(function(e,t,o){var s=[],a=t.toLowerCase();for(o.replace(r,(function(e,t){t&&s.push(+t)})),"m"===a&&s.length>2&&(n.push([t].concat(s.splice(0,2))),a="l",t="m"===t?"l":"L");s.length>=i[a]&&(n.push([t].concat(s.splice(0,i[a]))),i[a]););})),n}(e)),!e||!e.length)return[["M",0,0]];for(var i,n=[],o=0,s=0,a=0,l=0,c=e.length,d=0;d<c;d++){var h=[];n.push(h);var u,p,f=e[d];if((i=f[0])!=i.toUpperCase())switch(h[0]=i.toUpperCase(),h[0]){case"A":h[1]=f[1],h[2]=f[2],h[3]=f[3],h[4]=f[4],h[5]=f[5],h[6]=+f[6]+o,h[7]=+f[7]+s;break;case"V":h[1]=+f[1]+s;break;case"H":h[1]=+f[1]+o;break;case"M":for(a=+f[1]+o,l=+f[2]+s,u=f.length,p=1;p<u;p++)h[p]=+f[p]+(p%2?o:s);break;default:for(u=f.length,p=1;p<u;p++)h[p]=+f[p]+(p%2?o:s)}else for(var m=f.length,g=0;g<m;g++)h[g]=f[g];switch(h[0]){case"Z":o=+a,s=+l;break;case"H":o=h[1];break;case"V":s=h[1];break;case"M":a=h[h.length-2],l=h[h.length-1],o=h[h.length-2],s=h[h.length-1];break;default:o=h[h.length-2],s=h[h.length-1]}}return n}function m(e){var t=f(e),r={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null};function i(e,t,r){var i,n;if(!e)return["C",t.x,t.y,t.x,t.y,t.x,t.y];switch(e[0]in{T:1,Q:1}||(t.qx=null,t.qy=null),e[0]){case"M":t.X=e[1],t.Y=e[2];break;case"A":e=0===parseFloat(e[1])||0===parseFloat(e[2])?["L",e[6],e[7]]:["C"].concat(p.apply(0,[t.x,t.y].concat(e.slice(1))));break;case"S":"C"===r||"S"===r?(i=2*t.x-t.bx,n=2*t.y-t.by):(i=t.x,n=t.y),e=["C",i,n].concat(e.slice(1));break;case"T":"Q"===r||"T"===r?(t.qx=2*t.x-t.qx,t.qy=2*t.y-t.qy):(t.qx=t.x,t.qy=t.y),e=["C"].concat(h(t.x,t.y,t.qx,t.qy,e[1],e[2]));break;case"Q":t.qx=e[1],t.qy=e[2],e=["C"].concat(h(t.x,t.y,e[1],e[2],e[3],e[4]));break;case"H":e=["L"].concat(e[1],t.y);break;case"V":e=["L"].concat(t.x,e[1])}return e}function n(e,r){if(e[r].length>7){e[r].shift();for(var i=e[r];i.length;)o[r]="A",e.splice(r++,0,["C"].concat(i.splice(0,6)));e.splice(r,1),l=t.length}}for(var o=[],s="",a="",l=t.length,c=0;c<l;c++){t[c]&&(s=t[c][0]),"C"!==s&&(o[c]=s,c>0&&(a=o[c-1])),t[c]=i(t[c],r,a),"A"!==o[c]&&"C"===s&&(o[c]="C"),n(t,c);var d=t[c],u=d.length;r.x=d[u-2],r.y=d[u-1],r.bx=parseFloat(d[u-4])||r.x,r.by=parseFloat(d[u-3])||r.y}return t[0][0]&&"M"===t[0][0]||t.unshift(["M",0,0]),t}return function(e){return m(e).join(",").split(",").join(" ")}}(),c.namespace=e,c.g=Qp,c}();var ef=Kp;const tf="[object Arguments]",rf="[object Array]",nf="[object Boolean]",of="[object Date]",sf="[object Error]",af="[object Function]",lf="[object Map]",cf="[object Number]",df="[object Object]",hf="[object RegExp]",uf="[object Set]",pf="[object String]",ff="[object Symbol]",mf="[object WeakMap]",gf="[object ArrayBuffer]",vf="[object DataView]",bf="[object Float32Array]",yf="[object Float64Array]",xf="[object Int8Array]",wf="[object Int16Array]",_f="[object Int32Array]",kf="[object Uint8Array]",Cf="[object Uint8ClampedArray]",Sf="[object Uint16Array]",Af="[object Uint32Array]",Pf={[tf]:!0,[rf]:!0,[gf]:!0,[vf]:!0,[nf]:!0,[of]:!0,[bf]:!0,[yf]:!0,[xf]:!0,[wf]:!0,[_f]:!0,[lf]:!0,[cf]:!0,[df]:!0,[hf]:!0,[uf]:!0,[pf]:!0,[ff]:!0,[kf]:!0,[Cf]:!0,[Sf]:!0,[Af]:!0,[sf]:!1,[af]:!1,[mf]:!1},Tf="\\ud800-\\udfff",Ef="\\u2700-\\u27bf",If="a-z\\xdf-\\xf6\\xf8-\\xff",Lf="A-Z\\xc0-\\xd6\\xd8-\\xde",Of="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Mf="[']",Rf=`[${Of}]`,$f="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\u1ab0-\\u1aff\\u1dc0-\\u1dff]",Nf=`[${Ef}]`,Df=`[${If}]`,zf=`[^${Tf}${Of+"\\d"+Ef+If+Lf}]`,Bf="\\ud83c[\\udffb-\\udfff]",Ff=`[^${Tf}]`,Uf="(?:\\ud83c[\\udde6-\\uddff]){2}",Vf="[\\ud800-\\udbff][\\udc00-\\udfff]",jf=`[${Lf}]`,Gf=`(?:${Df}|${zf})`,Hf=`(?:${jf}|${zf})`,Wf=`(?:${Mf}(?:d|ll|m|re|s|t|ve))?`,qf=`(?:${Mf}(?:D|LL|M|RE|S|T|VE))?`,Yf=`${`(?:${$f}|${Bf})`}?`,Jf="[\\ufe0e\\ufe0f]?",Xf=Jf+Yf+`(?:\\u200d(?:${[Ff,Uf,Vf].join("|")})${Jf+Yf})*`,Zf=`(?:${[Nf,Uf,Vf].join("|")})${Xf}`,Qf=RegExp([`${jf}?${Df}+${Wf}(?=${[Rf,jf,"$"].join("|")})`,`${Hf}+${qf}(?=${[Rf,jf+Gf,"$"].join("|")})`,`${jf}?${Gf}+${Wf}`,`${jf}+${qf}`,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])","\\d+",Zf].join("|"),"g"),Kf="__hash_undefined__",em=/^\[object (?:Float(?:32|64)|(?:Int|Uint)(?:8|16|32)|Uint8Clamped)Array\]$/,tm=`(?:${[`${Ff}${$f}?`,$f,Uf,Vf,`[${Tf}]`].join("|")})`,rm=RegExp(`${Bf}(?=${Bf})|${tm+Xf}`,"g"),im=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,nm=/^\w*$/,om=".".charCodeAt(0),sm=/\\(\\)?/g,am=RegExp("[^.[\\]]+|\\[(?:([^\"'][^[]*)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))","g"),lm=/^(?:0|[1-9]\d*)$/,cm=RegExp.prototype.test.bind(/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/),dm=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,hm=e=>rm.test(e),um=e=>hm(e)?(e=>e.match(rm)||[])(e):(e=>e.split(""))(e),pm=e=>null==e?[]:fm(e).map((t=>e[t])),fm=e=>km(e)?mm(e):Object.keys(Object(e)),mm=(e,t)=>{const r=Array.isArray(e),i=!r&&bm(e)&&Am(e)===tf,n=!r&&!i&&Om(e),o=r||i||n,s=e.length,a=new Array(o?s:0);let l=o?-1:s;for(;++l<s;)a[l]=`${l}`;for(const r in e)!t&&!hasOwnProperty.call(e,r)||o&&("length"===r||rg(r,s))||a.push(r);return a},gm=(e,t)=>{let{length:r}=e;for(;r--;)if(vm(e[r][0],t))return r;return-1},vm=(e,t)=>e===t||e!=e&&t!=t,bm=e=>null!=e&&"object"==typeof e,ym=(e,t,r)=>{if(!Bg(r))return!1;const i=typeof t;return!!("number"==i?km(r)&&t>-1&&t<r.length:"string"==i&&t in r)&&vm(r[t],e)},xm=e=>{const t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Object.prototype)},wm=(e,t,r)=>{const i=e[t];hasOwnProperty.call(e,t)&&vm(i,r)&&(void 0!==r||t in e)||(e[t]=r)},_m=(e,t,r)=>{let i=-1;const n=t.length;for(;++i<n;){const n=t[i];wm(r,n,e[n])}return r},km=e=>null!=e&&"function"!=typeof e&&"number"==typeof e.length&&e.length>-1&&e.length%1==0,Cm=e=>"symbol"==typeof e||bm(e)&&Am(e)===ff,Sm=(e,t)=>{let r=-1;const i=e.length;for(t||(t=new Array(i));++r<i;)t[r]=e[r];return t},Am=e=>null==e?void 0===e?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e),Pm=e=>{const t=new e.constructor(e.byteLength);return new Uint8Array(t).set(new Uint8Array(e)),t},Tm=(e,t)=>{const r=t?Pm(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)},Em=e=>"function"!=typeof e.constructor||xm(e)?{}:Object.create(Object.getPrototypeOf(e)),Im=e=>{if(null==e)return[];e=Object(e);return Object.getOwnPropertySymbols(e).filter((t=>propertyIsEnumerable.call(e,t)))};const Lm=(e,t,r)=>{const i=e.constructor;switch(t){case gf:return Pm(e);case nf:case of:return new i(+e);case vf:return function(e,t){const r=t?Pm(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}(e,r);case bf:case yf:case xf:case wf:case _f:case kf:case Cf:case Sf:case Af:return Tm(e,r);case lf:case cf:case pf:return new i(e);case hf:return(e=>{const t=new e.constructor(e.source,/\w*$/.exec(e));return t.lastIndex=e.lastIndex,t})(e);case uf:return new i;case ff:return Symbol.prototype.valueOf?Object(Symbol.prototype.valueOf.call(e)):{}}},Om=e=>bm(e)&&em.test(Am(e)),Mm=e=>{const t=Object.keys(e);return Array.isArray(e)||null==e||t.push(...Im(Object(e))),t},Rm=e=>{const t=[];for(;e;)t.push(...Im(e)),e=Object.getPrototypeOf(Object(e));return t},$m=e=>{const t=[];for(const r in e)t.push(r);return Array.isArray(e)||t.push(...Rm(e)),t},Nm=({__data__:e},t)=>{const r=e;return ng(t)?r["string"==typeof t?"string":"hash"]:r.map},Dm=(e,t,r)=>e===t||(null==e||null==t||!bm(e)&&!bm(t)?e!=e&&t!=t:zm(e,t,Dm,r)),zm=(e,t,r,i)=>{let n=Array.isArray(e);const o=Array.isArray(t);let s=n?rf:Am(e),a=o?rf:Am(t);s=s==tf?df:s,a=a==tf?df:a;let l=s==df;const c=a==df,d=s==a;if(d&&!l)return i||(i=new Rg),n||Om(e)?Bm(e,t,!1,r,i):jm(e,t,s,r,i);const h=l&&hasOwnProperty.call(e,"__wrapped__"),u=c&&hasOwnProperty.call(t,"__wrapped__");if(h||u){const n=h?e.value():e,o=u?t.value():t;return i||(i=new Rg),r(n,o,i)}return!!d&&(i||(i=new Rg),((e,t,r,i)=>{const n=Mm(e),o=n.length;if(o!=Mm(t).length)return!1;let s,a=o;for(;a--;)if(s=n[a],!hasOwnProperty.call(t,s))return!1;const l=i.get(e),c=i.get(t);if(l&&c)return l==t&&c==e;let d,h=!0;for(i.set(e,t),i.set(t,e);++a<o;){s=n[a];const o=e[s],l=t[s];if(o!==l&&!r(o,l,i)){h=!1;break}d||(d="constructor"==s)}if(h&&!d){const r=e.constructor,i=t.constructor;r==i||!("constructor"in e)||!("constructor"in t)||"function"==typeof r&&r instanceof r&&"function"==typeof i&&i instanceof i||(h=!1)}return i.delete(e),i.delete(t),h})(e,t,r,i))},Bm=(e,t,r,i,n)=>{const o=e.length;if(o!=t.length)return!1;const s=n.get(e),a=n.get(t);if(s&&a)return s==t&&a==e;let l=-1,c=!0;const d=r?new zg:void 0;for(n.set(e,t),n.set(t,e);++l<o;){const r=e[l],o=t[l];if(d){if(!Fm(t,((e,t)=>{if(!Um(d,t)&&(r===e||i(r,e,n)))return d.push(t)}))){c=!1;break}}else if(r!==o&&!i(r,o,n)){c=!1;break}}return n.delete(e),n.delete(t),c},Fm=(e,t)=>{let r=-1;const i=null==e?0:e.length;for(;++r<i;)if(t(e[r],r,e))return!0;return!1},Um=(e,t)=>e.has(t),Vm=(e,t,r,i)=>!(e.byteLength!=t.byteLength||!r(new Uint8Array(e),new Uint8Array(t),i)),jm=(e,t,r,i,n)=>{switch(r){case vf:return e.byteLength==t.byteLength&&e.byteOffset==t.byteOffset&&(e=e.buffer,t=t.buffer,Vm(e,t,i,n));case gf:return Vm(e,t,i,n);case nf:case of:case cf:return vm(+e,+t);case sf:return e.name==t.name&&e.message==t.message;case hf:case pf:return e==`${t}`;case lf:let r=Gm;case uf:if(r||(r=Hm),e.size!=t.size)return!1;const o=n.get(e);if(o)return o==t;n.set(e,t);const s=Bm(r(e),r(t),!0,i,n);return n.delete(e),s;case ff:return Symbol.prototype.valueOf.call(e)==Symbol.prototype.valueOf.call(t)}return!1},Gm=e=>{let t=-1,r=Array(e.size);return e.forEach(((e,i)=>{r[++t]=[i,e]})),r},Hm=e=>{let t=-1;const r=new Array(e.size);return e.forEach((e=>{r[++t]=e})),r},Wm=(e,t)=>{if(Array.isArray(e))return!1;const r=typeof e;return!("number"!==r&&"boolean"!==r&&null!=e&&!Cm(e))||(nm.test(e)||!im.test(e)||null!=t&&e in Object(t))},qm=(e,t)=>Array.isArray(e)?e:Wm(e,t)?[e]:(e=>{const t=[];return e.charCodeAt(0)===om&&t.push(""),e.replace(am,((e,r,i,n)=>{let o=e;i?o=n.replace(sm,"$1"):r&&(o=r.trim()),t.push(o)})),t})(`${e}`),Ym=(e,t)=>{let r=0;const i=(t=qm(t,e)).length;for(;null!=e&&r<i;)e=e[Zm(t[r])],r++;return r&&r==i?e:void 0};function Jm(e,t){if(e!==t){const r=void 0!==e,i=null===e,n=e==e,o=Cm(e),s=void 0!==t,a=null===t,l=t==t,c=Cm(t);if(!a&&!c&&!o&&e>t||o&&s&&l&&!a&&!c||i&&s&&l||!r&&l||!n)return 1;if(!i&&!o&&!c&&e<t||c&&r&&n&&!i&&!o||a&&r&&n||!s&&n||!l)return-1}return 0}const Xm=(e,t)=>{let r=(e,t)=>!!(null==e?0:e.length)&&e.indexOf(t)>-1,i=!0;const n=[],o=t.length;if(!e.length)return n;t.length>=200&&(r=(e,t)=>e.has(t),i=!1,t=new zg(t));e:for(let s in e){let a=e[s];const l=a;if(a=0!==a?a:0,i&&l==l){let e=o;for(;e--;)if(t[e]===l)continue e;n.push(a)}else r(t,l)||n.push(a)}return n},Zm=e=>{if("string"==typeof e||Cm(e))return e;const t=`${e}`;return"0"==t&&1/e==-1/0?"-0":t},Qm=(e,t=!1,r=!1,i=!0,n,o,s,a)=>{let l;if(n&&(l=s?n(e,o,s,a):n(e)),void 0!==l)return l;if(!Bg(e))return e;const c=Array.isArray(e),d=Am(e);if(c){if(l=(e=>{const t=e.length;let r=new e.constructor(t);return t&&"string"==typeof e[0]&&hasOwnProperty.call(e,"index")&&(r.index=e.index,r.input=e.input),r})(e),!t)return Sm(e,l)}else{const i="function"==typeof e;if(d===df||d===tf||i&&!s){if(l=r||i?{}:Em(e),!t)return r?Km(e,_m(e,Object.keys(e),l)):((e,t)=>_m(e,Im(e),t))(e,Object.assign(l,e))}else{if(i||!Pf[d])return s?e:{};l=Lm(e,d,t)}}a||(a=new Rg);const h=a.get(e);if(h)return h;if(a.set(e,l),(e=>bm(e)&&Am(e)==lf)(e))return e.forEach(((o,s)=>{l.set(s,Qm(o,t,r,i,n,s,e,a))})),l;if((e=>bm(e)&&Am(e)==uf)(e))return e.forEach((o=>{l.add(Qm(o,t,r,i,n,o,e,a))})),l;if(Om(e))return l;const u=c?void 0:(i?r?$m:Mm:r?og:fm)(e);return(u||e).forEach(((o,s)=>{u&&(o=e[s=o]),wm(l,s,Qm(o,t,r,i,n,s,e,a))})),l},Km=(e,t)=>_m(e,Rm(e),t),eg=(e,t)=>t.length<2?e:Ym(e,t.slice(0,-1)),tg=(e,t,r)=>{if(!Bg(e))return e;const i=(t=qm(t,e)).length,n=i-1;let o=-1,s=e;for(;null!=s&&++o<i;){const e=Zm(t[o]);let i=r;if(o!=n){const r=s[e];i=void 0,void 0===i&&(i=Bg(r)?r:rg(t[o+1])?[]:{})}wm(s,e,i),s=s[e]}return e},rg=(e,t)=>{const r=typeof e;return!!(t=null==t?Number.MAX_SAFE_INTEGER:t)&&("number"===r||"symbol"!==r&&lm.test(e))&&e>-1&&e%1==0&&e<t},ig=(e,t)=>{t=qm(t,e),e=eg(e,t);const r=t[t.length-1];return null==e||delete e[Zm(r)]},ng=e=>{const t=typeof e;return"string"===t||"number"===t||"symbol"===t||"boolean"===t?"__proto__"!==e:null===e},og=e=>{const t=[];for(const r in e)t.push(r);return t},sg=(e,t)=>{if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]};function ag(e,t=!1){return(r,...i)=>{let n=-1,o=i.length,s=o>1?i[o-1]:void 0;const a=o>2?i[2]:void 0;for(s=e.length>3&&"function"==typeof s?(o--,s):t?(e,t)=>{if(Array.isArray(e)&&!Array.isArray(t))return t}:void 0,a&&ym(i[0],i[1],a)&&(s=o<3?void 0:s,o=1),r=Object(r);++n<o;){const t=i[n];t&&e(r,t,n,s)}return r}}const lg=(e,t,r,i,n)=>{e!==t&&pv(t,((o,s)=>{if(Bg(o))n||(n=new Rg),cg(e,t,s,r,lg,i,n);else{let r=i?i(e[s],o,`${s}`,e,t,n):void 0;void 0===r&&(r=o),dg(e,s,r)}}))},cg=(e,t,r,i,n,o,s)=>{const a=sg(e,r),l=sg(t,r),c=s.get(l);if(c)return void dg(e,r,c);let d=o?o(a,l,`${r}`,e,t,s):void 0,h=void 0===d;if(h){const e=Array.isArray(l),t=!e&&Om(l);d=l,e||t?Array.isArray(a)?d=a:bm(a)&&km(a)?d=Sm(a):t?(h=!1,d=Tm(l,!0)):d=[]:tv(l)||Pg(l)?(d=a,Pg(a)?d=(e=>{e=Object(e);const t={};for(const r in e)t[r]=e[r];return t})(a):"function"!=typeof a&&Bg(a)||(d=Em(l))):h=!1}h&&(s.set(l,d),n(d,l,i,o,s),s.delete(l)),dg(e,r,d)},dg=(e,t,r)=>{(void 0!==r&&!vm(e[t],r)||void 0===r&&!(t in e))&&wm(e,t,r)};const hg=(e,t)=>e&&function(e,t,r){const i=Object(e),n=r(e);let{length:o}=n,s=-1;for(;o--;){const e=n[++s];if(!1===t(i[e],e,i))break}return e}(e,t,fm),ug=(e,t)=>{if(null==e)return e;if(!km(e))return hg(e,t);const r=e.length,i=Object(e);let n=-1;for(;++n<r&&!1!==t(i[n],n,i););return e};const pg=Set&&1/Hm(new Set([void 0,-0]))[1]==1/0?e=>new Set(e):()=>{};function fg(e,t,r,i,n,o){return Bg(e)&&Bg(t)&&(o.set(t,e),lg(e,t,void 0,fg,o),o.delete(t)),e}function mg(e,t,r){t=t.length?t.map((e=>Array.isArray(e)?t=>Ym(t,1===e.length?e[0]:e):e)):[e=>e];let i=-1,n=-1;const o=km(e)?new Array(e.length):[];return ug(e,(e=>{const r=t.map((t=>t(e)));o[++n]={criteria:r,index:++i,value:e}})),function(e,t){let{length:r}=e;e.sort(t);for(;r--;)e[r]=e[r].value;return e}(o,((e,t)=>function(e,t,r){let i=-1;const n=e.criteria,o=t.criteria,s=n.length,a=r.length;for(;++i<s;){const e=i<a?r[i]:null,t=(e&&"function"==typeof e?e:Jm)(n[i],o[i]);if(t)return e&&"function"!=typeof e?t*("desc"==e?-1:1):t}return e.index-t.index}(e,t,r)))}function gg(e){return e==e&&!Bg(e)}function vg(e,t){return r=>null!=r&&(r[e]===t&&(void 0!==t||e in Object(r)))}function bg(e,t){return null!=e&&Ig(e,t,Eg)}function yg(e){const t=function(e){const t=fm(e);let r=t.length;for(;r--;){const i=t[r],n=e[i];t[r]=[i,n,gg(n)]}return t}(e);return 1===t.length&&t[0][2]?vg(t[0][0],t[0][1]):r=>r===e||function(e,t,r,i){let n=r.length;const o=n,s=!i;if(null==e)return!o;let a,l;e=Object(e);for(;n--;)if(a=r[n],s&&a[2]?a[1]!==e[a[0]]:!(a[0]in e))return!1;for(;++n<o;){a=r[n];const o=a[0],c=e[o],d=a[1];if(s&&a[2]){if(void 0===c&&!(o in e))return!1}else{const r=new Rg;if(i&&(l=i(c,d,o,e,t,r)),!(void 0===l?Dm(d,c,r):l))return!1}}return!0}(r,e,t)}function xg(e){return Wm(e)?(t=Zm(e),e=>null==e?void 0:e[t]):function(e){return t=>Ym(t,e)}(e);var t}function wg(e){return"function"==typeof e?e:null==e?e=>e:"object"==typeof e?Array.isArray(e)?(t=e[0],r=e[1],Wm(t)&&gg(r)?vg(Zm(t),r):e=>{const i=Ym(e,t);return void 0===i&&i===r?bg(e,t):Dm(r,i)}):yg(e):xg(e);var t,r}function _g(){const e=wg;return arguments.length?e(arguments[0]):e}const kg=(e,t,r,i)=>{let n=-1;const o=null==e?0:e.length;for(i&&o&&(r=e[++n]);++n<o;)r=t(r,e[n],n,e);return r},Cg=(e,t,r,i,n)=>(n(e,((e,n,o)=>{r=i?(i=!1,e):t(r,e,n,o)})),r);const Sg=e=>Array.isArray(e)||Pg(e)||!(!e||!e[Symbol.isConcatSpreadable]);function Ag(e,t,r,i,n){let o=-1;const s=e.length;for(r||(r=Sg),n||(n=[]);++o<s;){var a=e[o];t>0&&r(a)?t>1?Ag(a,t-1,r,i,n):n.push(...a):i||(n[n.length]=a)}return n}const Pg=e=>bm(e)&&"[object Arguments]"==Am(e),Tg=(e,t,r)=>{let i=-1;const n=t.length,o={};for(;++i<n;){const n=t[i],s=Ym(e,n);r(s,n)&&tg(o,qm(n,e),s)}return o},Eg=(e,t)=>null!=e&&t in Object(e),Ig=(e,t,r)=>{for(var i,n=-1,o=(t=qm(t,e)).length,s=!1;++n<o;){var a=Zm(t[n]);if(!(s=null!=e&&r(e,a)))break;e=e[a]}return s||++n!=o?s:!!(o=null==e?0:e.length)&&("number"==typeof(i=o)&&i>-1&&i%1==0&&i<=Number.MAX_SAFE_INTEGER)&&rg(a,o)&&(Array.isArray(e)||Pg(e))},Lg=(e,t)=>{if(void 0===t){const t=cm(e)?(e=>e.match(Qf))(e):(e=>e.match(dm))(e);return t||[]}return e.match(t)||[]},Og=(Mg="toUpperCase",e=>{if(!e)return"";const t=hm(e)?um(e):void 0,r=t?t[0]:e[0],i=t?((e,t,r)=>{const{length:i}=e;return r=void 0===r?i:r,!t&&r>=i?e:e.slice(t,r)})(t,1).join(""):e.slice(1);return r[Mg]()+i});var Mg;class Rg{constructor(e){const t=this.__data__=new $g(e);this.size=t.size}clear(){this.__data__=new $g,this.size=0}delete(e){const t=this.__data__,r=t.delete(e);return this.size=t.size,r}get(e){return this.__data__.get(e)}has(e){return this.__data__.has(e)}set(e,t){let r=this.__data__;if(r instanceof $g){const i=r.__data__;if(i.length<199)return i.push([e,t]),this.size=++r.size,this;r=this.__data__=new Ng(i)}return r.set(e,t),this.size=r.size,this}}class $g{constructor(e){let t=-1;const r=null==e?0:e.length;for(this.clear();++t<r;){const r=e[t];this.set(r[0],r[1])}}clear(){this.__data__=[],this.size=0}delete(e){const t=this.__data__,r=gm(t,e);if(r<0)return!1;return r==t.length-1?t.pop():t.splice(r,1),--this.size,!0}get(e){const t=this.__data__,r=gm(t,e);return r<0?void 0:t[r][1]}has(e){return gm(this.__data__,e)>-1}set(e,t){const r=this.__data__,i=gm(r,e);return i<0?(++this.size,r.push([e,t])):r[i][1]=t,this}}class Ng{constructor(e){let t=-1;const r=null==e?0:e.length;for(this.clear();++t<r;){const r=e[t];this.set(r[0],r[1])}}clear(){this.size=0,this.__data__={hash:new Dg,map:new Map,string:new Dg}}delete(e){const t=Nm(this,e).delete(e);return this.size-=t?1:0,t}get(e){return Nm(this,e).get(e)}has(e){return Nm(this,e).has(e)}set(e,t){const r=Nm(this,e),i=r.size;return r.set(e,t),this.size+=r.size==i?0:1,this}}class Dg{constructor(e){let t=-1;const r=null==e?0:e.length;for(this.clear();++t<r;){const r=e[t];this.set(r[0],r[1])}}clear(){this.__data__=Object.create(null),this.size=0}delete(e){const t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}get(e){const t=this.__data__[e];return t===Kf?void 0:t}has(e){return void 0!==this.__data__[e]}set(e,t){const r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=void 0===t?Kf:t,this}}class zg{constructor(e){let t=-1;const r=null==e?0:e.length;for(this.__data__=new Ng;++t<r;)this.add(e[t])}add(e){return this.__data__.set(e,Kf),this}has(e){return this.__data__.has(e)}}zg.prototype.push=zg.prototype.add;const Bg=function(e){return!!e&&("object"==typeof e||"function"==typeof e)},Fg=function(e){var t=Object.prototype.toString;return"number"==typeof e||!!e&&"object"==typeof e&&t.call(e)===cf},Ug=function(e){var t=Object.prototype.toString;return"string"==typeof e||!!e&&"object"==typeof e&&t.call(e)===pf},Vg=ag(((e,t)=>{if(xm(t)||km(t))_m(t,fm(t),e);else for(var r in t)hasOwnProperty.call(t,r)&&wm(e,r,t[r])})),jg=(e,...t)=>{let r=-1,i=t.length;const n=i>2?t[2]:void 0;for(n&&ym(t[0],t[1],n)&&(i=1);++r<i;){const i=t[r];if(null==i)continue;const n=Object.keys(i),o=n.length;let s=-1;for(;++s<o;){const t=n[s],r=e[t];(void 0===r||vm(r,Object.prototype[t])&&!hasOwnProperty.call(e,t))&&(e[t]=i[t])}}return e},Gg=function(...e){return e.push(void 0,fg),vv.apply(void 0,e)},Hg=Gg,Wg=(e,t,...r)=>{let i=-1;const n="function"==typeof t,o=km(e)?new Array(e.length):[];return ug(e,(e=>{o[++i]=n?t.apply(e,r):qg(e,t,...r)})),o},qg=(e,t,...r)=>{t=qm(t,e);const i=null==(e=eg(e,t))?e:e[Zm(function(e){const t=null==e?0:e.length;return t?e[t-1]:void 0}(t))];return null==i?void 0:i.apply(e,r)},Yg=(e,t,r)=>{let i=0,n=null==e?0:e.length;if(0==n)return 0;const o=(t=(r=_g(r,2))(t))!=t,s=null===t,a=Cm(t),l=void 0===t;for(;i<n;){let c;const d=Math.floor((i+n)/2),h=r(e[d]),u=void 0!==h,p=null===h,f=h==h,m=Cm(h);c=o?f:l?f&&u:s?f&&u&&!p:a?f&&u&&!p&&!m:!p&&!m&&h<t,c?i=d+1:n=d}return Math.min(n,4294967294)},Jg=(e,t)=>{let r=-1,i=(e,t)=>!!(null==e?0:e.length)&&e.indexOf(t)>-1;t=_g(t,2);let n=!0;const{length:o}=e,s=[];let a=s;if(o>=200){const r=t?null:pg(e);if(r)return Hm(r);n=!1,i=(e,t)=>e.has(t),a=new zg}else a=t?[]:s;e:for(;++r<o;){let o=e[r];const l=t?t(o):o;if(o=0!==o?o:0,n&&l==l){let e=a.length;for(;e--;)if(a[e]===l)continue e;t&&a.push(l),s.push(o)}else i(a,l)||(a!==s&&a.push(l),s.push(o))}return s},Xg=e=>Qm(e),Zg=e=>Qm(e,!0),Qg=e=>{if(null==e)return!0;if(km(e)&&(Array.isArray(e)||"string"==typeof e||"function"==typeof e.splice||Om(e)||Pg(e)))return!e.length;const t=Am(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(xm(e))return!(e=>{if(!xm(e))return Object.keys(e);var t=[];for(var r in Object(e))hasOwnProperty.call(e,r)&&"constructor"!=r&&t.push(r);return t})(e).length;for(const t in e)if(hasOwnProperty.call(e,t))return!1;return!0},Kg=(e,t)=>Dm(e,t),ev=e=>"function"==typeof e,tv=e=>{if(!bm(e)||"[object Object]"!=Am(e))return!1;if(null===Object.getPrototypeOf(e))return!0;let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t},rv=e=>{if(!e)return[];if(km(e))return Ug(e)?um(e):Sm(e);if(Symbol.iterator&&Symbol.iterator in Object(e)){const t=e[Symbol.iterator]();let r;const i=[];for(;!(r=t.next()).done;)i.push(r.value);return i}const t=Am(e);return(t==lf?Gm:t==uf?Hm:pm)(e)};const iv=(e,t)=>(t=_g(t,2),function(e,t,r){return(Array.isArray(e)?kg:Cg)(e,t,r,arguments.length<3,ug)}(e,((e,r,i)=>(i=t(r),hasOwnProperty.call(e,i)?e[i].push(r):wm(e,i,[r]),e)),{})),nv=(e,t=[])=>{if(null==e)return[];const r=t.length;return r>1&&ym(e,t[0],t[1])?t=[]:r>2&&ym(t[0],t[1],t[2])&&(t=[t[0]]),Array.isArray(t)||(t=[_g(t,2)]),mg(e,t.flat(1),[])},ov=e=>(null==e?0:e.length)?Ag(e,1/0):[],sv=(e,...t)=>km(e)?Xm(e,t):[],av=(e,...t)=>bm(e)&&km(e)?Xm(e,t.flat(1)):[],lv=(...e)=>{const t=e.flat(1);return Jg(t)},cv=(e,t)=>{if(null==e)return!1;"string"==typeof t&&(t=t.split("."));let r=-1,i=e;for(;++r<t.length;){if(!i||!hasOwnProperty.call(i,t[r]))return!1;i=i[t[r]]}return!0},dv=(e,t,r)=>{let i=-1,n=(t=qm(t,e)).length;for(n||(n=1,e=void 0);++i<n;){let o=null==e?void 0:e[Zm(t[i])];void 0===o&&(i=n,o=r),e="function"==typeof o?o.call(e):o}return e},hv=(e,...t)=>{let r={};if(null==e)return r;let i=!1;t=t.flat(1).map((t=>(t=qm(t,e),i||(i=t.length>1),t))),_m(e,$m(e),r),i&&(r=Qm(r,!0,!0,!0,(e=>tv(e)?void 0:e)));let n=t.length;for(;n--;)ig(r,t[n]);return r},uv=(e,...t)=>null==e?{}:((e,t)=>Tg(e,t,((t,r)=>bg(e,r))))(e,t.flat(1/0)),pv=(e,t=(e=>e))=>{let r=-1;const i=Object(e),n=km(e)?mm(e,!0):og(e);let o=n.length;for(;o--;){const e=n[++r];if(!1===t(i[e],e,i))break}},fv=(e="")=>Lg(`${e}`.replace(/['\u2019]/g,"")).reduce(((e,t,r)=>(t=t.toLowerCase(),e+(r?Og(t):t))),"");let mv=0;const gv=(e="")=>`${e}`+ ++mv,vv=ag(((e,t,r,i)=>{lg(e,t,r,i)}),!0);var bv=class{constructor(){this.map=new WeakMap}has(e,t){return void 0===t?this.map.has(e):t in this.map.get(e)}create(e){return this.has(e)||this.map.set(e,Object.create(null)),this.get(e)}get(e,t){if(!this.has(e))return;const r=this.map.get(e);return void 0===t?r:r[t]}set(e,t,r){if(void 0===t)return;const i=this.create(e);"string"==typeof t?i[t]=r:Object.assign(i,t)}remove(e,t){if(this.has(e))if(void 0===t)this.map.delete(e);else{delete this.map.get(e)[t]}}};const yv=new bv,xv=new bv,wv=function(e,t){if(!(this instanceof wv))return new wv(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented?_v:kv,this.target=e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&Object.assign(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this.envelope=!0};function _v(){return!0}function kv(){return!1}
/*!
 * jQuery JavaScript Library v4.0.0-pre+c98597ea.dirty
 * https://jquery.com/
 *
 * Copyright OpenJS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2023-11-24T14:04Z
 */wv.prototype={constructor:wv,isDefaultPrevented:kv,isPropagationStopped:kv,isImmediatePropagationStopped:kv,preventDefault:function(){const e=this.originalEvent;this.isDefaultPrevented=_v,e&&e.preventDefault()},stopPropagation:function(){const e=this.originalEvent;this.isPropagationStopped=_v,e&&e.stopPropagation()},stopImmediatePropagation:function(){const e=this.originalEvent;this.isImmediatePropagationStopped=_v,e&&e.stopImmediatePropagation(),this.stopPropagation()}},["altKey","bubbles","cancelable","changedTouches","ctrlKey","detail","eventPhase","metaKey","pageX","pageY","shiftKey","view","char","code","charCode","key","keyCode","button","buttons","clientX","clientY","offsetX","offsetY","pointerId","pointerType","screenX","screenY","targetTouches","toElement","touches","which"].forEach((e=>function(e){Object.defineProperty(wv.prototype,e,{enumerable:!0,configurable:!0,get:function(){return this.originalEvent?this.originalEvent[e]:void 0},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})}(e)));const Cv="undefined"!=typeof window?window.document:null,Sv=Cv&&Cv.documentElement,Av=/^([^.]*)(?:\.(.+)|)/,Pv=/[^\x20\t\r\n\f]+/g,Tv=function(e){return new Tv.Dom(e)};Tv.fn=Tv.prototype={constructor:Tv,length:0},Tv.guid=1,Tv.data=xv,Tv.merge=function(e,t){let r=+t.length,i=e.length;for(let n=0;n<r;n++)e[i++]=t[n];return e.length=i,e},Tv.parseHTML=function(e){const t=Cv.implementation.createHTMLDocument(),r=t.createElement("base");r.href=Cv.location.href,t.head.appendChild(r),t.body.innerHTML=e;const i=t.getElementsByTagName("script");for(let e=0;e<i.length;e++)i[e].remove();return Array.from(t.body.childNodes)},"function"==typeof Symbol&&(Tv.fn[Symbol.iterator]=Array.prototype[Symbol.iterator]),Tv.fn.toArray=function(){return Array.from(this)},Tv.fn.pushStack=function(e){const t=Tv.merge(this.constructor(),e);return t.prevObject=this,t},Tv.fn.find=function(e){const[t]=this,r=this.pushStack([]);if(!t)return r;const{nodeType:i}=t;return 1!==i&&9!==i&&11!==i||("string"!=typeof e?t!==e&&t.contains(e)&&Tv.merge(r,[e]):Tv.merge(r,t.querySelectorAll(e))),r},Tv.fn.add=function(e,t){const r=Tv(e).toArray(),i=this.toArray(),n=this.pushStack([]);return Tv.merge(n,Jg(i.concat(r))),n},Tv.fn.addBack=function(){return this.add(this.prevObject)},Tv.fn.filter=function(e){const t=[];for(let r=0;r<this.length;r++){const i=this[r];i.matches(e)&&t.push(i)}return this.pushStack(t)};const Ev=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;const Iv=function(e){if(!e)return this;if("function"==typeof e)throw new Error("function not supported");if(arguments.length>1)throw new Error("selector with context not supported");if(e.nodeType)return this[0]=e,this.length=1,this;let t;if("<"===(r=e+"")[0]&&">"===r[r.length-1]&&r.length>=3)t=[null,e,null];else{if("string"!=typeof e)return Tv.merge(this,e);t=Ev.exec(e)}var r;if(!t||!t[1])return Lv.find(e);if(t[1])return Tv.merge(this,Tv.parseHTML(t[1])),this;const i=Cv.getElementById(t[2]);return i&&(this[0]=i,this.length=1),this};Tv.Dom=Iv,Iv.prototype=Tv.fn,Tv.Event=wv,Tv.event={special:Object.create(null)},Tv.event.has=function(e,t){const r=yv.get(e,"events");return!!r&&(!t||Array.isArray(r[t])&&r[t].length>0)},Tv.event.on=function(e,t,r,i,n,o){if("object"==typeof t){"string"!=typeof r&&(i=i||r,r=void 0);for(let n in t)Tv.event.on(e,n,r,i,t[n],o);return e}if(null==i&&null==n?(n=r,i=r=void 0):null==n&&("string"==typeof r?(n=i,i=void 0):(n=i,i=r,r=void 0)),!n)return e;if(1===o){const e=n;n=function(t){return Tv().off(t),e.apply(this,arguments)},n.guid=e.guid||(e.guid=Tv.guid++)}for(let o=0;o<e.length;o++)Tv.event.add(e[o],t,n,i,r)},Tv.event.add=function(e,t,r,i,n){if("object"!=typeof e)return;const o=yv.create(e);let s,a,l;r.handler&&(s=r,r=s.handler,n=s.selector),n&&Sv.matches(n),r.guid||(r.guid=Tv.guid++),(a=o.events)||(a=o.events=Object.create(null)),(l=o.handle)||(l=o.handle=function(t){return void 0!==Tv?Tv.event.dispatch.apply(e,arguments):void 0});const c=(t||"").match(Pv)||[""];let d=c.length;for(;d--;){const[,t,o=""]=Av.exec(c[d]);if(!t)continue;const h=o.split(".").sort();let u=Tv.event.special[t];const p=u&&(n?u.delegateType:u.bindType)||t;u=Tv.event.special[p];const f=Object.assign({type:p,origType:t,data:i,handler:r,guid:r.guid,selector:n,namespace:h.join(".")},s);let m;(m=a[p])||(m=a[p]=[],m.delegateCount=0,u&&u.setup&&!1!==u.setup.call(e,i,h,l)||e.addEventListener&&e.addEventListener(p,l)),u&&u.add&&(u.add.call(e,f),f.handler.guid||(f.handler.guid=r.guid)),n?m.splice(m.delegateCount++,0,f):m.push(f)}},Tv.event.remove=function(e,t,r,i,n){const o=yv.get(e);if(!o||!o.events)return;const s=o.events,a=(t||"").match(Pv)||[""];let l=a.length;for(;l--;){const[,t,c=""]=Av.exec(a[l]);if(!t){for(const t in s)Tv.event.remove(e,t+a[l],r,i,!0);continue}const d=Tv.event.special[t],h=d&&(i?d.delegateType:d.bindType)||t,u=s[h];if(!u||0===u.length)continue;const p=c.split(".").sort(),f=c?new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,m=u.length;let g=m;for(;g--;){const o=u[g];!n&&t!==o.origType||r&&r.guid!==o.guid||f&&!f.test(o.namespace)||i&&i!==o.selector&&("**"!==i||!o.selector)||(u.splice(g,1),o.selector&&u.delegateCount--,d&&d.remove&&d.remove.call(e,o))}m&&0===u.length&&(d&&d.teardown&&!1!==d.teardown.call(e,p,o.handle)||e.removeEventListener&&e.removeEventListener(h,o.handle),delete s[h])}Qg(s)&&(yv.remove(e,"handle"),yv.remove(e,"events"))},Tv.event.dispatch=function(e){const t=this,r=Tv.event.fix(e);r.delegateTarget=t;const i=Array.from(arguments);i[0]=r;const n=yv.get(t,"events"),o=n&&n[r.type]||[],s=Tv.event.special[r.type];if(s&&s.preDispatch&&!1===s.preDispatch.call(t,r))return;const a=Tv.event.handlers.call(t,r,o);let l,c=0;for(;(l=a[c++])&&!r.isPropagationStopped();){r.currentTarget=l.elem;let e,t=0;for(;(e=l.handlers[t++])&&!r.isImmediatePropagationStopped();){r.handleObj=e,r.data=e.data;const t=Tv.event.special[e.origType];let n;n=t&&t.handle?t.handle:e.handler;const o=n.apply(l.elem,i);void 0!==o&&!1===(r.result=o)&&(r.preventDefault(),r.stopPropagation())}}return s&&s.postDispatch&&s.postDispatch.call(t,r),r.result},Tv.event.handlers=function(e,t){const r=t.delegateCount,i=[];if(r&&!("click"===e.type&&e.button>=1))for(let n=e.target;n!==this;n=n.parentNode||this)if(1===n.nodeType&&("click"!==e.type||!0!==n.disabled)){const e=[],o={};for(let i=0;i<r;i++){const r=t[i],s=r.selector+" ";void 0===o[s]&&(o[s]=n.matches(s)),o[s]&&e.push(r)}e.length&&i.push({elem:n,handlers:e})}return r<t.length&&i.push({elem:this,handlers:t.slice(r)}),i},Tv.event.fix=function(e){return e.envelope?e:new wv(e)};const Lv=Tv(Cv);function Ov(e){let t=e.length;for(;t--;)Mv(e[t])}function Mv(e){Tv.event.remove(e),yv.remove(e),xv.remove(e)}function Rv(e){for(let t=0;t<e.length;t++){const r=e[t];r.parentNode&&r.parentNode.removeChild(r)}}const $v={};function Nv(e,t,r){"number"==typeof r&&$v[fv(t)]&&(r+="px"),e.style[t]=r}function Dv(e,t,r){for(let i=0;i<t.length;i++){const n=t[i];ef.prototype[e].apply({node:n},r)}}["width","height","top","bottom","left","right","padding","paddingTop","paddingBottom","paddingLeft","paddingRight","margin","marginTop","marginBottom","marginLeft","marginRight"].forEach((e=>{$v[e]=!0}));var zv=Object.freeze({__proto__:null,remove:function(){for(let e=0;e<this.length;e++){const t=this[e];Mv(t),Ov(t.getElementsByTagName("*"))}return Rv(this),this},detach:function(){return Rv(this),this},empty:function(){for(let e=0;e<this.length;e++){const t=this[e];1===t.nodeType&&(Ov(t.getElementsByTagName("*")),t.textContent="")}return this},clone:function(){const e=[];for(let t=0;t<this.length;t++)e.push(this[t].cloneNode(!0));return this.pushStack(e)},html:function(e){const[t]=this;return t?0===arguments.length?t.innerHTML:void 0===e?this:(Ov(yv,t.getElementsByTagName("*")),"string"!=typeof e&&"number"!=typeof e?(t.innerHTML="",this.append(e)):(t.innerHTML=e,this)):null},append:function(...e){const[t]=this;return t?(e.forEach((e=>{e&&("string"==typeof e?t.append(...Tv.parseHTML(e)):"[object Object]"===e.toString()?this.append(...Array.from(e)):Array.isArray(e)?this.append(...e):t.appendChild(e))})),this):this},prepend:function(...e){const[t]=this;return t?(e.forEach((e=>{e&&("string"==typeof e?t.prepend(...Tv.parseHTML(e)):"[object Object]"===e.toString()?this.prepend(...Array.from(e)):Array.isArray(e)?this.prepend(...e):t.insertBefore(e,t.firstChild))})),this):this},appendTo:function(e){return Tv(e).append(this),this},prependTo:function(e){return Tv(e).prepend(this),this},css:function(e,t){let r;if("string"==typeof e){if(void 0===t){const[t]=this;return t?t.style[e]:null}r={[e]:t}}else{if(!e)throw new Error("no styles provided");r=e}for(let e in r)if(r.hasOwnProperty(e))for(let t=0;t<this.length;t++)Nv(this[t],e,r[e]);return this},data:function(e,t){if(arguments.length<2){const[t]=this;return t?void 0===e?t.dataset:t.dataset[e]:null}for(let r=0;r<this.length;r++)this[r].dataset[e]=t;return this},removeClass:function(){return Dv("removeClass",this,arguments),this},addClass:function(){return Dv("addClass",this,arguments),this},toggleClass:function(){return Dv("toggleClass",this,arguments),this},hasClass:function(){const[e]=this;return!!e&&ef.prototype.hasClass.apply({node:e},arguments)},children:function(e){const t=[];for(let r=0;r<this.length;r++){const i=this[r];let n=Array.from(i.children);"string"==typeof e&&(n=n.filter((t=>t.matches(e)))),t.push(...n)}return this.pushStack(t)},closest:function(e){const t=[];for(let r=0;r<this.length;r++){const i=this[r];if("string"==typeof e){const r=i.closest(e);r&&t.push(r)}else{const[r]=Tv(e);r&&r.contains(i)&&t.push(r)}}return this.pushStack(t)},on:function(e,t,r,i){return Tv.event.on(this,e,t,r,i),this},one:function(e,t,r,i){return Tv.event.on(this,e,t,r,i,1),this},off:function(e,t,r){if(e&&e.preventDefault&&e.handleObj){const t=e.handleObj;return Tv(e.delegateTarget).off(t.namespace?t.origType+"."+t.namespace:t.origType,t.selector,t.handler),this}if("object"==typeof e){for(let r in e)this.off(r,t,e[r]);return this}!1!==t&&"function"!=typeof t||(r=t,t=void 0);for(let i=0;i<this.length;i++)Tv.event.remove(this[i],e,r,t);return this},width:function(){const[e]=this;if(e===window)return e.document.documentElement.clientWidth;if(!e)return;const t=window.getComputedStyle(e),r=e.offsetWidth,i=parseFloat(t.borderTopWidth);return r-parseFloat(t.borderBottomWidth)-i-parseFloat(t.paddingTop)-parseFloat(t.paddingBottom)},height:function(){const[e]=this;if(e===window)return e.document.documentElement.clientHeight;if(!e)return;const t=window.getComputedStyle(e);return e.offsetHeight-parseFloat(t.borderLeftWidth)-parseFloat(t.borderRightWidth)-parseFloat(t.paddingLeft)-parseFloat(t.paddingRight)},position:function(){const[e]=this;if(!e)return;let t,r,i,n=Tv(e),o={top:0,left:0};if("fixed"===n.css("position"))r=e.getBoundingClientRect();else{r=n.offset(),i=e.ownerDocument,t=e.offsetParent||i.documentElement;const s=Tv(t),a=s.css("position")||"static";for(;t&&(t===i.body||t===i.documentElement)&&"static"===a;)t=t.parentNode;if(t&&t!==e&&1===t.nodeType){const e=window.getComputedStyle(t),r=parseFloat(e.borderTopWidth)||0,i=parseFloat(e.borderLeftWidth)||0;o=s.offset(),o.top+=r,o.left+=i}}const s=parseFloat(window.getComputedStyle(e).marginTop)||0,a=parseFloat(window.getComputedStyle(e).marginLeft)||0;return{top:r.top-o.top-s,left:r.left-o.left-a}},offset:function(e){const[t]=this;if(void 0===e){if(!t)return null;if(!t.getClientRects().length)return{top:0,left:0};const e=t.getBoundingClientRect();return{top:e.top+window.scrollY,left:e.left+window.scrollX}}if(!t)return this;const r=window.getComputedStyle(t);"static"===r.position&&this.css("position","relative");const i=this.offset(),n=e.top-i.top,o=e.left-i.left;return this.css({top:(parseFloat(r.top)||0)+n+"px",left:(parseFloat(r.left)||0)+o+"px"}),this}});const Bv="animationFrameId",Fv={};function Uv(e,t,r={}){let{duration:i=400,easing:n="ease-in-out",delay:o=0,complete:s}=r;const a=setTimeout((function(){const r=Tv(e);let a=!1,l="transitionend";i/=1e3,o/=1e3;const c={};if("string"==typeof t)c["animation-name"]=t,c["animation-duration"]=i+"s",c["animation-delay"]=o+"s",c["animation-timing-function"]=n,l="animationend";else{const e=[];for(var d in t)t.hasOwnProperty(d)&&(c[d]=t[d],e.push(d));i>0&&(c["transition-property"]=e.join(", "),c["transition-duration"]=i+"s",c["transition-delay"]=o+"s",c["transition-timing-function"]=n)}const h=function(t){if(t){if(t.target!==t.currentTarget)return;t.target.removeEventListener(l,h)}else e.removeEventListener(l,h);a=!0,r.css(Fv),s&&s.call(e)};if(i>0){e.addEventListener(l,h);const t=setTimeout((function(){a||h(null)}),1e3*(i+o)+25);yv.set(e,Bv,{id:t,stop:()=>{clearTimeout(t),e.removeEventListener(l,h)}})}r.css(c),i<=0&&h(null)}));yv.set(e,Bv,{stop:()=>clearTimeout(a)})}Fv["transition-property"]=Fv["transition-duration"]=Fv["transition-delay"]=Fv["transition-timing-function"]=Fv["animation-name"]=Fv["animation-duration"]=Fv["animation-delay"]=Fv["animation-timing-function"]="";var Vv=Object.freeze({__proto__:null,animate:function(e,t={}){this.stop();for(let r=0;r<this.length;r++)Uv(this[r],e,t);return this},stop:function(){for(let e=0;e<this.length;e++){const t=this[e],r=yv.get(t,Bv);r&&(r.stop(),yv.remove(t,Bv))}return this.css(Fv),this}});const jv={outerWidth:"offsetWidth",outerHeight:"offsetHeight",innerWidth:"clientWidth",innerHeight:"clientHeight",scrollLeft:"scrollLeft",scrollTop:"scrollTop",val:"value",text:"textContent"},Gv={disabled:"disabled",value:"value",text:"textContent"};const Hv={prop:function(e,t){if(!e)throw new Error("no property provided");if(1===arguments.length){const[t]=this;return t?t[e]:null}if(void 0===t)return this;for(let r=0;r<this.length;r++)this[r][e]=t;return this},attr:function(e,t){let r;if("string"==typeof e){if(void 0===t){const[t]=this;return t?t.getAttribute(e):null}r={[e]:t}}else{if(!e)throw new Error("no attributes provided");r=e}for(let e in r)if(r.hasOwnProperty(e)){const t=r[e];if(Gv[e]){this.prop(Gv[e],t);continue}for(let r=0;r<this.length;r++)null===t?this[r].removeAttribute(e):this[r].setAttribute(e,t)}return this}};Object.keys(jv).forEach((e=>{Hv[e]=function(...t){return this.prop(jv[e],...t)}}));var Wv=Hv;const qv=!1,Yv="joint-",Jv="default",Xv=300,Zv=Object.create(null);var Qv=Zv;Zv.load={noBubble:!0},[["mouseenter","mouseover"],["mouseleave","mouseout"],["pointerenter","pointerover"],["pointerleave","pointerout"]].forEach((([e,t])=>{Zv[e]={delegateType:t,bindType:t,handle:function(e){const r=this,i=e.relatedTarget,n=e.handleObj;let o;return i&&r.contains(i)||(e.type=n.origType,o=n.handler.apply(r,arguments),e.type=t),o}}}));const Kv=Xv;Zv.dbltap={bindType:"touchend",delegateType:"touchend",handle:function(e,...t){const{handleObj:r,target:i}=e,n=Tv.data.create(i),o=(new Date).getTime(),s="lastTouch"in n?o-n.lastTouch:0;s<Kv&&s>30?(n.lastTouch=null,e.type=r.origType,r.handler.call(this,e,...t)):n.lastTouch=o}},Object.assign(Tv.fn,zv),Object.assign(Tv.fn,Vv),Object.assign(Tv.fn,Wv),Object.assign(Tv.event.special,Qv);var eb=Tv;const tb=function(e){return e?e.toString().split(" ").map((function(e){return e.substr(0,Yv.length)!==Yv&&(e=Yv+e),e})).join(" "):e},rb=function(e,t){const r={},i={},n=ef.namespace.svg,o=t||n,s=document.createDocumentFragment(),a=function(e,t,o){for(let s=0;s<e.length;s++){const l=e[s];if("string"==typeof l){const e=document.createTextNode(l);t.appendChild(e);continue}if(!l.hasOwnProperty("tagName"))throw new Error("json-dom-parser: missing tagName");const c=l.tagName;let d;l.hasOwnProperty("namespaceURI")&&(o=l.namespaceURI),d=document.createElementNS(o,c);const h=o===n,u=h?ef(d):eb(d),p=l.attributes;p&&u.attr(p);const f=l.style;if(f&&eb(d).css(f),l.hasOwnProperty("className")){const e=l.className;h?d.className.baseVal=e:d.className=e}if(l.hasOwnProperty("textContent")&&(d.textContent=l.textContent),l.hasOwnProperty("selector")){const e=l.selector;if(r[e])throw new Error("json-dom-parser: selector must be unique");r[e]=d,u.attr("joint-selector",e)}if(l.hasOwnProperty("groupSelector")){let e=l.groupSelector;Array.isArray(e)||(e=[e]);for(let t=0;t<e.length;t++){const r=e[t];let n=i[r];n||(n=i[r]=[]),n.push(d)}}t.appendChild(d);const m=l.children;Array.isArray(m)&&a(m,d,o)}};return a(e,s,o),{fragment:s,selectors:r,groupSelectors:i}},ib=function(e){let t=0;if(0===e.length)return t;for(let r=0;r<e.length;r++){t=(t<<5)-t+e.charCodeAt(r),t|=0}return t},nb=function(e,t,r){for(var i,n=Array.isArray(t)?t:t.split(r||"/"),o=0,s=n.length;o<s;){if(i=n[o++],Object(e)!==e||!(i in e))return;e=e[i]}return e},ob=function(e,t){return"string"!=typeof t&&"number"!=typeof t&&(t=String(t)),("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!==t},sb=function(e,t,r,i){const n=Array.isArray(t)?t:t.split(i||"/"),o=n.length-1;let s=e,a=0;for(;a<o;a++){const t=n[a];if(!ob(s,t))return e;s=s[t]||(s[t]={})}return s[n[o]]=r,e},ab=function(e,t,r){const i=Array.isArray(t)?t:t.split(r||"/"),n=i.length-1;let o=e,s=0;for(;s<n;s++){const t=i[s];if(!ob(o,t))return e;const r=o[t];if(!r)return e;o=r}return delete o[i[n]],e},lb=function(e){return lb.id=lb.id||1,void 0===e?"j_"+lb.id++:(e.id=void 0===e.id?"j_"+lb.id++:e.id,e.id)},cb=function(e){if(e.normalized)return e;const{originalEvent:t,target:r}=e,i=t&&t.changedTouches&&t.changedTouches[0];if(i)for(let t in i)void 0===e[t]&&(e[t]=i[t]);if(r){const t=r.correspondingUseElement;t&&(e.target=t)}return e.normalized=!0,e},db=function(){var e;if("undefined"!=typeof window&&(e=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame),!e){var t=0;e=function(e){var r=(new Date).getTime(),i=Math.max(0,16-(r-t)),n=setTimeout((function(){e(r+i)}),i);return t=r+i,n}}return function(t,r,...i){return e(void 0!==r?t.bind(r,...i):t)}}(),hb=((pb="undefined"!=typeof window)&&(ub=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.msCancelAnimationFrame||window.msCancelRequestAnimationFrame||window.oCancelAnimationFrame||window.oCancelRequestAnimationFrame||window.mozCancelAnimationFrame||window.mozCancelRequestAnimationFrame),ub=ub||clearTimeout,pb?ub.bind(window):ub);var ub,pb;const fb=function(e){return Ug(e)&&"%"===e.slice(-1)},mb=function(e,t){var r=parseFloat(e);if(Number.isNaN(r))return null;var i,n={};if(n.value=r,null==t)i="[A-Za-z]*";else if(Array.isArray(t)){if(0===t.length)return null;i=t.join("|")}else Ug(t)&&(i=t);var o=function(t){var r=new RegExp("(?:\\d+(?:\\.\\d+)*)("+t+")$").exec(e);return r?r[1]:null}(i);return null===o?null:(n.unit=o,n)};function gb(e,t){const r=e.split(t);let i=1;for(let e=0,n=r.length-1;e<n;e++){const o=[];(e>0||""!==r[0])&&o.push(0),o.push(t),(e<n-1||""!==r[n])&&o.push(0),r.splice(i,0,...o),i+=o.length+1}return r.filter((e=>""!==e))}function vb(e,t){if(null===e)return t.getBBox().height;switch(e.unit){case"em":return t.getBBox().height*e.value;case"px":case"":return e.value}}const bb=function(e,t,r={},i={}){var n=t.width,o=t.height,s=i.svgDocument||ef("svg").node,a=ef("tspan").node,l=ef("text").attr(r).append(a).node,c=document.createTextNode("");l.style.opacity=0,l.style.display="block",a.style.display="block",a.appendChild(c),s.appendChild(l),i.svgDocument||document.body.appendChild(s);const d=i.preserveSpaces,h=i.separator||""===i.separator?i.separator:" ",u="string"==typeof h?h:" ";var p=i.eol||"\n",f=i.hyphen?new RegExp(i.hyphen):/[^\w\d\u00C0-\u1FFF\u2800-\uFFFD]/,m=i.maxLineCount;Fg(m)||(m=1/0);var g,v,b,y=e.split(h),x=[],w=[];d&&ef(a).attr("xml:space","preserve");for(var _=0,k=0,C=y.length;_<C;_++){var S=y[_];if((S||d)&&"string"==typeof S){var A=!1;if(p&&S.indexOf(p)>=0){if(S.length>1){const e=gb(y[_],p);y.splice(_,1,...e),_--,C=y.length;continue}if(d&&"string"==typeof y[_-1]){y.splice(_,0,"",0),C+=2,_--;continue}w[++k]=d&&"string"!=typeof y[_+1]?void 0:"",A=!0}if(!A){let e;if(e=d?void 0!==w[k]?w[k]+u+S:S:w[k]?w[k]+u+S:S,c.data=e,a.getComputedTextLength()<=n)w[k]=e,(g||v)&&(x[k++]=!0,g=0,v=0);else{if(!w[k]||g){var P=!!g;if(g=S.length-1,P||!g){if(!g){if(!w[k]){w=[];break}y.splice(_,2,S+y[_+1]),C--,x[k++]=!0,_--;continue}y[_]=S.substring(0,g);const e=y[_+1];y[_+1]=S.substring(g)+(void 0===e||0===e?"":e)}else{if(v)y.splice(_,2,y[_]+y[_+1]),v=0;else{var T=S.search(f);T>-1&&T!==S.length-1&&0!==T&&(v=T+1,g=0),y.splice(_,1,S.substring(0,v||g),S.substring(v||g)),C++}k&&!x[k-1]&&k--}d&&""===w[k]||_--;continue}k++,_--}}var E=null;if(w.length>m)E=m-1;else if(void 0!==o){if(void 0===b&&""!==c.data)if("auto"===r.lineHeight)b=vb({value:1.5,unit:"em"},l);else{b=vb(mb(r.lineHeight,["em","px",""]),l)}b*w.length>o&&(E=Math.floor(o/b)-1)}if(null!==E){w.splice(E+1);var I=i.ellipsis;if(!I||E<0)break;"string"!=typeof I&&(I="");var L=w[E];if(!L&&!A)break;var O,M,R=L.length;do{if(M=L[R],O=L.substring(0,R),M?M.match(h)&&(O+=M):O+=u,O+=I,c.data=O,a.getComputedTextLength()<=n){w[E]=O;break}R--}while(R>=0);break}}}return i.svgDocument?s.removeChild(l):document.body.removeChild(s),w.join(p)},yb=function(e){if(Object(e)!==e){var t=0;return isFinite(e)&&(t=+e),{top:t,right:t,bottom:t,left:t}}var r,i,n,o;return r=i=n=o=0,isFinite(e.vertical)&&(r=n=+e.vertical),isFinite(e.horizontal)&&(i=o=+e.horizontal),isFinite(e.top)&&(r=+e.top),isFinite(e.right)&&(i=+e.right),isFinite(e.bottom)&&(n=+e.bottom),isFinite(e.left)&&(o=+e.left),{top:r,right:i,bottom:n,left:o}},xb={linear:function(e){return e},quad:function(e){return e*e},cubic:function(e){return e*e*e},inout:function(e){if(e<=0)return 0;if(e>=1)return 1;var t=e*e,r=t*e;return 4*(e<.5?r:3*(e-t)+r-.75)},exponential:function(e){return Math.pow(2,10*(e-1))},bounce:function(e){for(var t=0,r=1;;t+=r,r/=2)if(e>=(7-4*t)/11){var i=(11-6*t-11*e)/4;return-i*i+r*r}},reverse:function(e){return function(t){return 1-e(1-t)}},reflect:function(e){return function(t){return.5*(t<.5?e(2*t):2-e(2-2*t))}},clamp:function(e,t,r){return t=t||0,r=r||1,function(i){var n=e(i);return n<t?t:n>r?r:n}},back:function(e){return e||(e=1.70158),function(t){return t*t*((e+1)*t-e)}},elastic:function(e){return e||(e=1.5),function(t){return Math.pow(2,10*(t-1))*Math.cos(20*Math.PI*e/3*t)}}},wb={number:function(e,t){var r=t-e;return function(t){return e+r*t}},object:function(e,t){var r=Object.keys(e);return function(i){var n,o,s={};for(n=r.length-1;-1!=n;n--)s[o=r[n]]=e[o]+(t[o]-e[o])*i;return s}},hexColor:function(e,t){var r=parseInt(e.slice(1),16),i=parseInt(t.slice(1),16),n=255&r,o=(255&i)-n,s=65280&r,a=(65280&i)-s,l=16711680&r,c=(16711680&i)-l;return function(e){return"#"+(1<<24|n+o*e&255|s+a*e&65280|l+c*e&16711680).toString(16).slice(1)}},unit:function(e,t){var r=/(-?[0-9]*.[0-9]*)(px|em|cm|mm|in|pt|pc|%)/,i=r.exec(e),n=r.exec(t),o=n[1].indexOf("."),s=o>0?n[1].length-o-1:0;e=+i[1];var a=+n[1]-e,l=i[2];return function(t){return(e+a*t).toFixed(s)+l}}},_b={outline:function(e){var t=Number.isFinite(e.margin)?e.margin:2,r=Number.isFinite(e.width)?e.width:1;return kb('<filter><feFlood flood-color="${color}" flood-opacity="${opacity}" result="colored"/><feMorphology in="SourceAlpha" result="morphedOuter" operator="dilate" radius="${outerRadius}" /><feMorphology in="SourceAlpha" result="morphedInner" operator="dilate" radius="${innerRadius}" /><feComposite result="morphedOuterColored" in="colored" in2="morphedOuter" operator="in"/><feComposite operator="xor" in="morphedOuterColored" in2="morphedInner" result="outline"/><feMerge><feMergeNode in="outline"/><feMergeNode in="SourceGraphic"/></feMerge></filter>')({color:e.color||"blue",opacity:Number.isFinite(e.opacity)?e.opacity:1,outerRadius:t+r,innerRadius:t})},highlight:function(e){return kb('<filter><feFlood flood-color="${color}" flood-opacity="${opacity}" result="colored"/><feMorphology result="morphed" in="SourceGraphic" operator="dilate" radius="${width}"/><feComposite result="composed" in="colored" in2="morphed" operator="in"/><feGaussianBlur result="blured" in="composed" stdDeviation="${blur}"/><feBlend in="SourceGraphic" in2="blured" mode="normal"/></filter>')({color:e.color||"red",width:Number.isFinite(e.width)?e.width:1,blur:Number.isFinite(e.blur)?e.blur:0,opacity:Number.isFinite(e.opacity)?e.opacity:1})},blur:function(e){var t=Number.isFinite(e.x)?e.x:2;return kb('<filter><feGaussianBlur stdDeviation="${stdDeviation}"/></filter>')({stdDeviation:Number.isFinite(e.y)?[t,e.y]:t})},dropShadow:function(e){var t="SVGFEDropShadowElement"in window?'<filter><feDropShadow stdDeviation="${blur}" dx="${dx}" dy="${dy}" flood-color="${color}" flood-opacity="${opacity}"/></filter>':'<filter><feGaussianBlur in="SourceAlpha" stdDeviation="${blur}"/><feOffset dx="${dx}" dy="${dy}" result="offsetblur"/><feFlood flood-color="${color}"/><feComposite in2="offsetblur" operator="in"/><feComponentTransfer><feFuncA type="linear" slope="${opacity}"/></feComponentTransfer><feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/></feMerge></filter>';return kb(t)({dx:e.dx||0,dy:e.dy||0,opacity:Number.isFinite(e.opacity)?e.opacity:1,color:e.color||"black",blur:Number.isFinite(e.blur)?e.blur:4})},grayscale:function(e){var t=Number.isFinite(e.amount)?e.amount:1;return kb('<filter><feColorMatrix type="matrix" values="${a} ${b} ${c} 0 0 ${d} ${e} ${f} 0 0 ${g} ${b} ${h} 0 0 0 0 0 1 0"/></filter>')({a:.2126+.7874*(1-t),b:.7152-.7152*(1-t),c:.0722-.0722*(1-t),d:.2126-.2126*(1-t),e:.7152+.2848*(1-t),f:.0722-.0722*(1-t),g:.2126-.2126*(1-t),h:.0722+.9278*(1-t)})},sepia:function(e){var t=Number.isFinite(e.amount)?e.amount:1;return kb('<filter><feColorMatrix type="matrix" values="${a} ${b} ${c} 0 0 ${d} ${e} ${f} 0 0 ${g} ${h} ${i} 0 0 0 0 0 1 0"/></filter>')({a:.393+.607*(1-t),b:.769-.769*(1-t),c:.189-.189*(1-t),d:.349-.349*(1-t),e:.686+.314*(1-t),f:.168-.168*(1-t),g:.272-.272*(1-t),h:.534-.534*(1-t),i:.131+.869*(1-t)})},saturate:function(e){var t=Number.isFinite(e.amount)?e.amount:1;return kb('<filter><feColorMatrix type="saturate" values="${amount}"/></filter>')({amount:1-t})},hueRotate:function(e){return kb('<filter><feColorMatrix type="hueRotate" values="${angle}"/></filter>')({angle:e.angle||0})},invert:function(e){var t=Number.isFinite(e.amount)?e.amount:1;return kb('<filter><feComponentTransfer><feFuncR type="table" tableValues="${amount} ${amount2}"/><feFuncG type="table" tableValues="${amount} ${amount2}"/><feFuncB type="table" tableValues="${amount} ${amount2}"/></feComponentTransfer></filter>')({amount:t,amount2:1-t})},brightness:function(e){return kb('<filter><feComponentTransfer><feFuncR type="linear" slope="${amount}"/><feFuncG type="linear" slope="${amount}"/><feFuncB type="linear" slope="${amount}"/></feComponentTransfer></filter>')({amount:Number.isFinite(e.amount)?e.amount:1})},contrast:function(e){var t=Number.isFinite(e.amount)?e.amount:1;return kb('<filter><feComponentTransfer><feFuncR type="linear" slope="${amount}" intercept="${amount2}"/><feFuncG type="linear" slope="${amount}" intercept="${amount2}"/><feFuncB type="linear" slope="${amount}" intercept="${amount2}"/></feComponentTransfer></filter>')({amount:t,amount2:.5-t/2})}},kb=function(e){var t=/<%= ([^ ]+) %>|\$\{ ?([^{} ]+) ?\}|\{\{([^{} ]+)\}\}/g;return function(r){return r=r||{},e.replace(t,(function(e){for(var t=Array.from(arguments).slice(1,4).find((function(e){return!!e})).split("."),i=r[t.shift()];void 0!==i&&t.length;)i=i[t.shift()];return void 0!==i?i:""}))}},Cb=function(){};var Sb,Ab={},Pb=/\s+/,Tb=function(e,t,r,i,n){var o,s=0;if(r&&"object"==typeof r){void 0!==i&&"context"in n&&void 0===n.context&&(n.context=i);for(o=Object.keys(r);s<o.length;s++)t=Tb(e,t,o[s],r[o[s]],n)}else if(r&&Pb.test(r))for(o=r.split(Pb);s<o.length;s++)t=e(t,o[s],i,n);else t=e(t,r,i,n);return t};Ab.on=function(e,t,r){(this._events=Tb(Eb,this._events||{},e,t,{context:r,ctx:this,listening:Sb}),Sb)&&((this._listeners||(this._listeners={}))[Sb.id]=Sb,Sb.interop=!1);return this},Ab.listenTo=function(e,t,r){if(!e)return this;var i=e._listenId||(e._listenId=gv("l")),n=this._listeningTo||(this._listeningTo={}),o=Sb=n[i];o||(this._listenId||(this._listenId=gv("l")),o=Sb=n[i]=new Nb(this,e));var s=Ib(e,t,r,this);if(Sb=void 0,s)throw s;return o.interop&&o.on(t,r),this};var Eb=function(e,t,r,i){if(r){var n=e[t]||(e[t]=[]),o=i.context,s=i.ctx,a=i.listening;a&&a.count++,n.push({callback:r,context:o,ctx:o||s,listening:a})}return e},Ib=function(e,t,r,i){try{e.on(t,r,i)}catch(e){return e}};Ab.off=function(e,t,r){return this._events?(this._events=Tb(Lb,this._events,e,t,{context:r,listeners:this._listeners}),this):this},Ab.stopListening=function(e,t,r){var i=this._listeningTo;if(!i)return this;for(var n=e?[e._listenId]:Object.keys(i),o=0;o<n.length;o++){var s=i[n[o]];if(!s)break;s.obj.off(t,r,this),s.interop&&s.off(t,r)}return Qg(i)&&(this._listeningTo=void 0),this};var Lb=function(e,t,r,i){if(e){var n,o=i.context,s=i.listeners,a=0;if(t||o||r){for(n=t?[t]:Object.keys(e);a<n.length;a++){var l=e[t=n[a]];if(!l)break;for(var c=[],d=0;d<l.length;d++){var h=l[d];if(r&&r!==h.callback&&r!==h.callback._callback||o&&o!==h.context)c.push(h);else{var u=h.listening;u&&u.off(t,r)}}c.length?e[t]=c:delete e[t]}return e}if(null!=s)for(n=Object.keys(s);a<n.length;a++)s[n[a]].cleanup()}};Ab.once=function(e,t,r){var i=Tb(Ob,{},e,t,this.off.bind(this));return"string"==typeof e&&null==r&&(t=void 0),this.on(i,t,r)},Ab.listenToOnce=function(e,t,r){var i=Tb(Ob,{},t,r,this.stopListening.bind(this,e));return this.listenTo(e,i)};var Ob=function(e,t,r,i){if(r){var n=e[t]=Mb((function(){i(t,n),r.apply(this,arguments)}));n._callback=r}return e},Mb=function(e){var t;if("function"!=typeof e)throw new TypeError("Expected a function");var r=2;return function(){return--r>0&&(t=e.apply(this,arguments)),r<=1&&(e=void 0),t}};Ab.trigger=function(e){if(!this._events)return this;for(var t=Math.max(0,arguments.length-1),r=Array(t),i=0;i<t;i++)r[i]=arguments[i+1];return Tb(Rb,this._events,e,void 0,r),this};var Rb=function(e,t,r,i){if(e){var n=e[t],o=e.all;n&&o&&(o=o.slice()),n&&$b(n,i),o&&$b(o,[t].concat(i))}return e},$b=function(e,t){var r,i=-1,n=e.length,o=t[0],s=t[1],a=t[2];switch(t.length){case 0:for(;++i<n;)(r=e[i]).callback.call(r.ctx);return;case 1:for(;++i<n;)(r=e[i]).callback.call(r.ctx,o);return;case 2:for(;++i<n;)(r=e[i]).callback.call(r.ctx,o,s);return;case 3:for(;++i<n;)(r=e[i]).callback.call(r.ctx,o,s,a);return;default:for(;++i<n;)(r=e[i]).callback.apply(r.ctx,t);return}},Nb=function(e,t){this.id=e._listenId,this.listener=e,this.obj=t,this.interop=!0,this.count=0,this._events=void 0};Nb.prototype.on=Ab.on,Nb.prototype.off=function(e,t){var r;this.interop?(this._events=Tb(Lb,this._events,e,t,{context:void 0,listeners:void 0}),r=!this._events):(this.count--,r=0===this.count),r&&this.cleanup()},Nb.prototype.cleanup=function(){delete this.listener._listeningTo[this.obj._listenId],this.interop||delete this.obj._listeners[this.id]},Ab.bind=Ab.on,Ab.unbind=Ab.off;var Db=function(e,t){var r,i=this;return r=e&&cv(e,"constructor")?e.constructor:function(){return i.apply(this,arguments)},Vg(r,i,t),r.prototype=Object.assign(Object.create(i.prototype),e),r.prototype.constructor=r,r.__super__=i.prototype,r},zb=function(e,t,r,i){pv(r,(function(r,n){t[n]&&(e.prototype[n]=function(e,t,r,i){switch(t){case 1:return function(){return e[r](this[i])};case 2:return function(t){return e[r](this[i],t)};case 3:return function(t,n){return e[r](this[i],Bb(t,this),n)};case 4:return function(t,n,o){return e[r](this[i],Bb(t,this),n,o)};default:return function(){var t=Array.prototype.slice.call(arguments);return t.unshift(this[i]),e[r].apply(e,t)}}}(t,r,n,i))}))},Bb=function(e,t){return ev(e)?e:Bg(e)&&!t._isModel(e)?Fb(e):Ug(e)?function(t){return t.get(e)}:e},Fb=function(e){var t=yg(Qm(e,!0));return function(e){return t(e.attributes)}},Ub=function(e,t){var r=e||{};t||(t={}),this.preinitialize.apply(this,arguments),this.cid=gv(this.cidPrefix),this.attributes={},t.collection&&(this.collection=t.collection);var i=dv(this,"defaults");r=jg(Vg({},i,r),i),this.set(r,t),this.changed={},this.initialize.apply(this,arguments)};function Vb(e){e=Jg(e);const t=rv(e).reduce((function(e,t){return e[t.id]=t.clone(),e}),{});return rv(e).forEach((function(e){const r=t[e.id];if(r.isLink()){const e=r.source(),i=r.target();e.id&&t[e.id]&&r.prop("source/id",t[e.id].id),i.id&&t[i.id]&&r.prop("target/id",t[i.id].id)}const i=e.get("parent");i&&t[i]&&r.set("parent",t[i].id);const n=rv(e.get("embeds")).reduce((function(e,r){return t[r]&&e.push(t[r].id),e}),[]);Qg(n)||r.set("embeds",n)})),t}Vg(Ub.prototype,Ab,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",preinitialize:function(){},initialize:function(){},toJSON:function(e){return Xg(this.attributes)},get:function(e){return this.attributes[e]},has:function(e){return null!=this.get(e)},set:function(e,t,r){if(null==e)return this;var i;if("object"==typeof e?(i=e,r=t):(i={})[e]=t,r||(r={}),!this._validate(i,r))return!1;var n=r.unset,o=r.silent,s=[],a=this._changing;this._changing=!0,a||(this._previousAttributes=Xg(this.attributes),this.changed={});var l=this.attributes,c=this.changed,d=this._previousAttributes;for(var h in i)t=i[h],Kg(l[h],t)||s.push(h),Kg(d[h],t)?delete c[h]:c[h]=t,n?delete l[h]:l[h]=t;if(this.idAttribute in i){var u=this.id;this.id=this.get(this.idAttribute),this.trigger("changeId",this,u,r)}if(!o){s.length&&(this._pending=r);for(var p=0;p<s.length;p++)this.trigger("change:"+s[p],this,l[s[p]],r)}if(a)return this;if(!o)for(;this._pending;)r=this._pending,this._pending=!1,this.trigger("change",this,r);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,Vg({},t,{unset:!0}))},clear:function(e){var t={};for(var r in this.attributes)t[r]=void 0;return this.set(t,Vg({},e,{unset:!0}))},hasChanged:function(e){return null==e?!Qg(this.changed):cv(this.changed,e)},changedAttributes:function(e){if(!e)return!!this.hasChanged()&&Xg(this.changed);var t,r=this._changing?this._previousAttributes:this.attributes,i={};for(var n in e){var o=e[n];Kg(r[n],o)||(i[n]=o,t=!0)}return!!t&&i},previous:function(e){return null!=e&&this._previousAttributes?this._previousAttributes[e]:null},previousAttributes:function(){return Xg(this._previousAttributes)},clone:function(){return new this.constructor(this.attributes)},isValid:function(e){return this._validate({},Vg({},e,{validate:!0}))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=Vg({},this.attributes,e);var r=this.validationError=this.validate(e,t)||null;return!r||(this.trigger("invalid",this,r,Vg(t,{validationError:r})),!1)}}),Ub.extend=Db;const jb=["checked","selected","disabled","readOnly","contentEditable","value","indeterminate"].reduce(((e,t)=>(e[t]=!0,e)),{});var Gb={qualify:function(e){return tv(e)},set:function(e,t,r){Object.keys(e).forEach((function(t){if(jb[t]&&t in r){const i=e[t];"SELECT"===r.tagName&&Array.isArray(i)?Array.from(r.options).forEach((function(e,t){e.selected=i.includes(e.value)})):r[t]=i}}))}};function Hb(e,t,r){return function(i,n){var o,s=fb(i);if(i=parseFloat(i),s&&(i/=100),isFinite(i)){var a=n[r]();o=s||i>0&&i<1?a[e]+n[t]*i:a[e]+i}var l=Iu();return l[e]=o||0,l}}function Wb(e,t){return function(r,i){var n=fb(r);r=parseFloat(r),n&&(r/=100);var o={};if(isFinite(r)){var s=n||r>=0&&r<=1?r*i[t]:Math.max(r+i[t],0);o[e]=s}return o}}const qb={"ref-x":{position:Hb("x","width","origin")},"ref-y":{position:Hb("y","height","origin")},"ref-dx":{position:Hb("x","width","corner")},"ref-dy":{position:Hb("y","height","corner")},"ref-width":{set:Wb("width","width")},"ref-height":{set:Wb("height","height")},"ref-rx":{set:Wb("rx","width")},"ref-ry":{set:Wb("ry","height")},"ref-cx":{set:Wb("cx","width")},"ref-cy":{set:Wb("cy","height")},"ref-r-inscribed":{set:(Yb=Wb("r","width"),Jb=Wb("r","height"),function(e,t){return(t.height>t.width?Yb:Jb)(e,t)})},"ref-r-circumscribed":{set:function(e,t){var r=fb(e);e=parseFloat(e),r&&(e/=100);var i,n=Math.sqrt(t.height*t.height+t.width*t.width);return isFinite(e)&&(i=r||e>=0&&e<=1?e*n:Math.max(e+n,0)),{r:i}}}};var Yb,Jb;qb.refX=qb["ref-x"],qb.refY=qb["ref-y"],qb["ref-x2"]=qb["ref-x"],qb["ref-y2"]=qb["ref-y"],qb["ref-width2"]=qb["ref-width"],qb["ref-height2"]=qb["ref-height"],qb["ref-r"]=qb["ref-r-inscribed"];var Xb=qb;const Zb={x:"x",y:"y",width:"w",height:"h",minimum:"s",maximum:"l",diagonal:"d"},Qb=Object.keys(Zb).map((e=>Zb[e])).join(""),Kb="[-+]?[0-9]*\\.?[0-9]+(?:[eE][-+]?[0-9]+)?",ey=/\s/g,ty=new RegExp(`^(${Kb}\\*)?([${Qb}])(/${Kb})?([-+]{1,2}${Kb})?$`,"g");function ry(e){throw new Error(`Invalid calc() expression: ${e}`)}function iy(e,t){const r=ty.exec(e.replace(ey,""));r||ry(e),ty.lastIndex=0;const[,i,n,o,s]=r,{x:a,y:l,width:c,height:d}=t;let h=0;switch(n){case Zb.width:h=c;break;case Zb.height:h=d;break;case Zb.x:h=a;break;case Zb.y:h=l;break;case Zb.minimum:h=Math.min(d,c);break;case Zb.maximum:h=Math.max(d,c);break;case Zb.diagonal:h=Math.sqrt(d*d+c*c)}return i&&(h*=parseFloat(i)),o&&(h/=parseFloat(o.slice(1))),s&&(h+=function(e){if(!e)return 0;const[t]=e;switch(t){case"+":return parseFloat(e.substr(1));case"-":return-parseFloat(e.substr(1))}return parseFloat(e)}(s)),h}function ny(e){return"string"==typeof e&&e.includes("calc")}const oy="calc(",sy=oy.length;function ay(e,t){let r=e,i=0;for(;;){let e=r.indexOf(oy,i);if(-1===e)return r;let n=e+sy,o=1;e:for(;;){switch(r[n]){case"(":o++;break;case")":if(o--,0===o)break e;break;case void 0:ry(r)}n++}let s=r.slice(e+sy,n);ny(s)&&(s=ay(s,t));const a=String(iy(s,t));r=r.slice(0,e)+a+r.slice(n+1),i=e+a.length}}function ly(e,t,r){return void 0!==r.text}const cy=["font-weight","font-family","font-size","letter-spacing","text-transform"],dy={"line-height":{qualify:ly},"text-vertical-anchor":{qualify:ly},"text-path":{qualify:ly},annotations:{qualify:ly},eol:{qualify:ly},"display-empty":{qualify:ly},text:{qualify:function(e,t,r){const i=r["text-wrap"];return!i||!tv(i)},set:function(e,t,r,i){const n="joint-text",o=eb.data.get(r,n),s=i["line-height"],a=i["text-vertical-anchor"],l=i["display-empty"],c=i["font-size"],d=i.annotations,h=i.eol,u=i.x;let p=i["text-path"];const f=JSON.stringify([e,s,d,a,h,l,p,u,c]);if(void 0===o||o!==f){if(c&&r.setAttribute("font-size",c),Bg(p)){const e=p.selector;if("string"==typeof e){const t=this.findNode(e);t instanceof SVGPathElement&&(p=Vg({"xlink:href":"#"+t.id},p))}}ef(r).text(""+e,{lineHeight:s,annotations:d,textPath:p,x:u,textVerticalAnchor:a,eol:h,displayEmpty:l}),eb.data.set(r,n,f)}}},"text-wrap":{qualify:tv,set:function(e,t,r,i){var n={},o=e.width||0;fb(o)?n.width=t.width*parseFloat(o)/100:ny(o)?n.width=Number(ay(o,t)):null===e.width?n.width=1/0:n.width=o<=0?t.width+o:o;var s,a=e.height||0;fb(a)?n.height=t.height*parseFloat(a)/100:ny(a)?n.height=Number(ay(a,t)):null===e.height||(n.height=a<=0?t.height+a:a);var l=e.text;if(void 0===l&&(l=i.text),void 0!==l){const t=e.breakText||bb,o=getComputedStyle(r),a={};for(let e=0;e<cy.length;e++){const t=cy[e];t in i&&r.setAttribute(t,i[t]),a[t]=o[t]}a.lineHeight=i["line-height"],s=t(""+l,n,a,{svgDocument:this.paper.svg,ellipsis:e.ellipsis,hyphen:e.hyphen,separator:e.separator,maxLineCount:e.maxLineCount,preserveSpaces:e.preserveSpaces})}else s="";dy.text.set.call(this,s,t,r,i)},FONT_ATTRIBUTES:cy},title:{qualify:function(e,t){return t instanceof SVGElement},set:function(e,t,r){var i="joint-title",n=eb.data.get(r,i);if(void 0===n||n!==e){if(eb.data.set(r,i,e),"title"===r.tagName)return void(r.textContent=e);var o=r.firstElementChild;if(o&&"title"===o.tagName)o.textContent=e;else{var s=document.createElementNS(r.namespaceURI,"title");s.textContent=e,r.insertBefore(s,o)}}}}};var hy=dy;function uy(e,t){var r=new Iu(1,0);return function(i){var n,o,s=this[e](i);return s?(o=t.rotate?s.vector().vectorAngle(r):0,n=s.start):(n=this.path.start,o=0),0===o?{transform:"translate("+n.x+","+n.y+")"}:{transform:"translate("+n.x+","+n.y+") rotate("+o+")"}}}function py(){return this.model.isLink()}const fy={connection:{qualify:py,set:function({stubs:e=0}){let t;if(isFinite(e)&&0!==e){let r;r=e<0?(this.getConnectionLength()+e)/2:e;const i=this.getConnection(),n=this.getConnectionSubdivisions(),o=i.divideAtLength(r,{segmentSubdivisions:n}),s=i.divideAtLength(-r,{segmentSubdivisions:n});o&&s&&(t=`${o[0].serialize()} ${s[1].serialize()}`)}return{d:t||this.getSerializedConnection()}}},"at-connection-length-keep-gradient":{qualify:py,set:uy("getTangentAtLength",{rotate:!0})},"at-connection-length-ignore-gradient":{qualify:py,set:uy("getTangentAtLength",{rotate:!1})},"at-connection-ratio-keep-gradient":{qualify:py,set:uy("getTangentAtRatio",{rotate:!0})},"at-connection-ratio-ignore-gradient":{qualify:py,set:uy("getTangentAtRatio",{rotate:!1})}};fy["at-connection-length"]=fy["at-connection-length-keep-gradient"],fy["at-connection-ratio"]=fy["at-connection-ratio-keep-gradient"];var my=fy;function gy(e,t){var r="joint-shape",i=t&&t.resetOffset;return function(t,n,o){var s=eb.data.get(o,r);if(!s||s.value!==t){var a=e(t);s={value:t,shape:a,shapeBBox:a.bbox()},eb.data.set(o,r,s)}var l=s.shape.clone(),c=s.shapeBBox.clone(),d=c.origin(),h=n.origin();c.x=h.x,c.y=h.y;var u=n.maxRectScaleToFit(c,h),p=0===c.width||0===n.width?1:u.sx,f=0===c.height||0===n.height?1:u.sy;return l.scale(p,f,d),i&&l.translate(-d.x,-d.y),l}}function vy(e){var t=gy((function(e){return new ap(ef.normalizePathData(e))}),e);return function(e,r,i){return{d:t(e,r,i).serialize()}}}function by(e){var t=gy(Ku,e);return function(e,r,i){return{points:t(e,r,i).serialize()}}}const yy={"ref-d-reset-offset":{set:vy({resetOffset:!0})},"ref-d-keep-offset":{set:vy({resetOffset:!1})},"ref-points-reset-offset":{set:by({resetOffset:!0})},"ref-points-keep-offset":{set:by({resetOffset:!1})}};yy["ref-d"]=yy["ref-d-reset-offset"],yy["ref-points"]=yy["ref-points-reset-offset"];var xy=yy;function wy(e){var t={},r=e.stroke;"string"==typeof r&&(t.stroke=r,t.fill=r);var i=e["stroke-opacity"];return void 0===i&&(i=e.opacity),void 0!==i&&(t["stroke-opacity"]=i,t["fill-opacity"]=i),t}function _y(e){const{paper:t}=this;return`url(#${"pattern"===e.type?t.definePattern(e):t.defineGradient(e)})`}const ky={"source-marker":{qualify:tv,set:function(e,t,r,i){return e=Vg(wy(i),e),{"marker-start":"url(#"+this.paper.defineMarker(e)+")"}}},"target-marker":{qualify:tv,set:function(e,t,r,i){return e=Vg(wy(i),{transform:"rotate(180)"},e),{"marker-end":"url(#"+this.paper.defineMarker(e)+")"}}},"vertex-marker":{qualify:tv,set:function(e,t,r,i){return e=Vg(wy(i),e),{"marker-mid":"url(#"+this.paper.defineMarker(e)+")"}}},fill:{qualify:tv,set:_y},stroke:{qualify:tv,set:_y},filter:{qualify:tv,set:function(e){return"url(#"+this.paper.defineFilter(e)+")"}}};var Cy=ky;function Sy(e,t,r){return function(i,n){var o;o="middle"===i?n[t]/2:i===r?n[t]:isFinite(i)?i>-1&&i<1?-n[t]*i:-i:fb(i)?n[t]*parseFloat(i)/100:0;var s=new Iu;return s[e]=-(n[e]+o),s}}var Ay={"x-alignment":{offset:Sy("x","width","right")},"y-alignment":{offset:Sy("y","height","bottom")},"reset-offset":{offset:function(e,t){return e?{x:-t.x,y:-t.y}:{x:0,y:0}}}};function Py(e){return function(t,r,i){const n=ef(i);n.attr(e)!==t&&n.attr(e,t)}}const Ty={ref:{},href:{set:Py("href")},"xlink:href":{set:Py("xlink:href")},port:{set:function(e){return null===e||void 0===e.id?e:e.id}},style:{qualify:tv,set:function(e,t,r){eb(r).css(e)}},html:{set:function(e,t,r){eb(r).html(e+"")}},props:Gb};Vg(Ty,Xb),Vg(Ty,hy),Vg(Ty,my),Vg(Ty,xy),Vg(Ty,Cy),Vg(Ty,Ay);const Ey=Ty,Iy=function(e,t){if(Array.isArray(e))return t},Ly=Ub.extend({constructor:function(e,t){var r,i=e||{};if("function"==typeof this.preinitialize&&this.preinitialize.apply(this,arguments),this.cid=gv("c"),this.attributes={},t&&t.collection&&(this.collection=t.collection),t&&t.parse&&(i=this.parse(i,t)||{}),r=dv(this,"defaults")){const e=(!t||!0!==t.mergeArrays)&&Iy;i=vv({},r,i,e)}this.set(i,t),this.changed={},this.initialize.apply(this,arguments)},translate:function(e,t,r){throw new Error("Must define a translate() method.")},toJSON:function(){const e=dv(this.constructor.prototype,"defaults").attrs||{},t=this.attributes.attrs,r={};pv(t,(function(t,i){const n=e[i];pv(t,(function(e,t){Bg(e)&&!Array.isArray(e)?pv(e,(function(e,o){n&&n[t]&&Kg(n[t][o],e)||(r[i]=r[i]||{},(r[i][t]||(r[i][t]={}))[o]=e)})):n&&Kg(n[t],e)||(r[i]=r[i]||{},r[i][t]=e)}))}));const i=Zg(hv(this.attributes,"attrs"));return i.attrs=r,i},initialize:function(e){const t=this.getIdAttribute();e&&void 0!==e[t]||this.set(t,this.generateId(),{silent:!0}),this._transitionIds={},this._scheduledTransitionIds={},this.processPorts(),this.on("change:attrs",this.processPorts,this)},getIdAttribute:function(){return this.idAttribute||"id"},generateId:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))},processPorts:function(){var e=this.ports,t={};pv(this.get("attrs"),(function(e,r){e&&e.port&&(void 0!==e.port.id?t[e.port.id]=e.port:t[e.port]={id:e.port})}));var r={};(pv(e,(function(e,i){t[i]||(r[i]=!0)})),this.graph&&!Qg(r))&&(this.graph.getConnectedLinks(this,{inbound:!0}).forEach((function(e){r[e.get("target").port]&&e.remove()})),this.graph.getConnectedLinks(this,{outbound:!0}).forEach((function(e){r[e.get("source").port]&&e.remove()})));this.ports=t},remove:function(e={}){const{graph:t,collection:r}=this;if(!t)return r&&r.remove(this,e),this;t.startBatch("remove");const i=this.getParentCell();i&&i.unembed(this,e);const n=this.getEmbeddedCells();for(let t=0,r=n.length;t<r;t++){const r=n[t];r&&r.remove(e)}return this.trigger("remove",this,t.attributes.cells,e),t.stopBatch("remove"),this},toFront:function(e){var t=this.graph;if(t){let r;(e=jg(e||{},{foregroundEmbeds:!0})).deep?(r=this.getEmbeddedCells({deep:!0,breadthFirst:!1!==e.breadthFirst,sortSiblings:e.foregroundEmbeds}),r.unshift(this)):r=[this];const i=e.foregroundEmbeds?r:nv(r,(e=>e.z()));let n=t.maxZIndex()-r.length+1;const o=t.get("cells");let s=o.toArray().indexOf(i[0])!==o.length-r.length;s||(s=i.some((function(e,t){return e.z()!==n+t}))),s&&(this.startBatch("to-front"),n+=r.length,i.forEach((function(t,r){t.set("z",n+r,e)})),this.stopBatch("to-front"))}return this},toBack:function(e){var t=this.graph;if(t){let r;(e=jg(e||{},{foregroundEmbeds:!0})).deep?(r=this.getEmbeddedCells({deep:!0,breadthFirst:!1!==e.breadthFirst,sortSiblings:e.foregroundEmbeds}),r.unshift(this)):r=[this];const i=e.foregroundEmbeds?r:nv(r,(e=>e.z()));let n=t.minZIndex();let o=0!==t.get("cells").toArray().indexOf(i[0]);o||(o=i.some((function(e,t){return e.z()!==n+t}))),o&&(this.startBatch("to-back"),n-=r.length,i.forEach((function(t,r){t.set("z",n+r,e)})),this.stopBatch("to-back"))}return this},parent:function(e,t){return void 0===e?this.get("parent"):this.set("parent",e,t)},embed:function(e,t){const r=Array.isArray(e)?e:[e];if(!this.canEmbed(r))throw new Error("Recursive embedding not allowed.");if(r.some((e=>e.isEmbedded()&&this.id!==e.parent())))throw new Error("Embedding of already embedded cells is not allowed.");return this._embedCells(r,t),this},unembed:function(e,t){const r=Array.isArray(e)?e:[e];return this._unembedCells(r,t),this},canEmbed:function(e){return(Array.isArray(e)?e:[e]).every((e=>this!==e&&!this.isEmbeddedIn(e)))},_embedCells:function(e,t){const r="embed";this.startBatch(r);const i=Vg([],this.get("embeds"));e.forEach((e=>{i[e.isLink()?"unshift":"push"](e.id),e.parent(this.id,t)})),this.set("embeds",Jg(i),t),this.stopBatch(r)},_unembedCells:function(e,t){const r="unembed";this.startBatch(r),e.forEach((e=>e.unset("parent",t))),this.set("embeds",sv(this.get("embeds"),...e.map((e=>e.id))),t),this.stopBatch(r)},getParentCell:function(){var e=this.parent(),t=this.graph;return e&&t&&t.getCell(e)||null},getAncestors:function(){var e=[];if(!this.graph)return e;for(var t=this.getParentCell();t;)e.push(t),t=t.getParentCell();return e},getEmbeddedCells:function(e){if(e=e||{},!this.graph)return[];if(e.deep)return e.breadthFirst?this._getEmbeddedCellsBfs(e.sortSiblings):this._getEmbeddedCellsDfs(e.sortSiblings);const t=this.get("embeds");if(Qg(t))return[];let r=t.map(this.graph.getCell,this.graph);return e.sortSiblings&&(r=nv(r,(e=>e.z()))),r},_getEmbeddedCellsBfs:function(e){const t=[],r=[];for(r.push(this);r.length>0;){const i=r.shift();t.push(i);const n=i.getEmbeddedCells({sortSiblings:e});r.push(...n)}return t.shift(),t},_getEmbeddedCellsDfs:function(e){const t=[],r=[];for(r.push(this);r.length>0;){const i=r.pop();t.push(i);const n=i.getEmbeddedCells({sortSiblings:e});for(let e=n.length-1;e>=0;--e)r.push(n[e])}return t.shift(),t},isEmbeddedIn:function(e,t){var r=Ug(e)?e:e.id,i=this.parent();if(t=Vg({deep:!0},t),this.graph&&t.deep){for(;i;){if(i===r)return!0;i=this.graph.getCell(i).parent()}return!1}return i===r},isEmbedded:function(){return!!this.parent()},clone:function(e){if((e=e||{}).deep)return rv(Vb([this].concat(this.getEmbeddedCells({deep:!0}))));var t=Ub.prototype.clone.apply(this,arguments);return t.set(this.getIdAttribute(),this.generateId()),t.unset("embeds"),t.unset("parent"),t},prop:function(e,t,r){var i=Ug(e);if(i||Array.isArray(e)){if(arguments.length>1){var n,o;i?o=(n=e).split("/"):(n=e.join("/"),o=e.slice());var s=o[0],a=o.length;const g=r||{};g.propertyPath=n,g.propertyValue=t,g.propertyPathArray=o,"rewrite"in g||(g.rewrite=!1);for(var l={},c=l,d=s,h=1;h<a;h++){var u=o[h],p=Number.isFinite(i?Number(u):u);c=c[d]=p?[]:{},d=u}l=sb(l,o,t,"/");var f=vv({},this.attributes);g.rewrite&&ab(f,n,"/");var m=vv(f,l);return this.set(s,m[s],g)}return nb(this.attributes,e,"/")}const g=t||{};g.propertyPath=null,g.propertyValue=e,g.propertyPathArray=[],"rewrite"in g||(g.rewrite=!1);const v={};for(const t in e){const{changedValue:r}=vv({},{changedValue:this.attributes[t]},{changedValue:e[t]});v[t]=r}return this.set(v,g)},removeProp:function(e,t){t=t||{};var r=Array.isArray(e)?e:e.split("/"),i=r[0];if("attrs"===i&&(t.dirty=!0),1===r.length)return this.unset(e,t);var n=r.slice(1),o=this.get(i);return null==o?this:(o=Zg(o),ab(o,n,"/"),this.set(i,o,t))},attr:function(e,t,r){var i=Array.from(arguments);return 0===i.length?this.get("attrs"):(Array.isArray(e)?i[0]=["attrs"].concat(e):Ug(e)?i[0]="attrs/"+e:i[0]={attrs:e},this.prop.apply(this,i))},removeAttr:function(e,t){return Array.isArray(e)?this.removeProp(["attrs"].concat(e)):this.removeProp("attrs/"+e,t)},transition:function(e,t,r,i){i=i||"/",r=Vg({duration:100,delay:10,timingFunction:xb.linear,valueFunction:wb.number},r);var n,o=0,s=function(t){var i,a,l;(a=(t-=o=o||t)/r.duration)<1?this._transitionIds[e]=i=db(s):(a=1,delete this._transitionIds[e]),l=n(r.timingFunction(a)),r.transitionId=i,this.prop(e,l,r),i||this.trigger("transition:end",this,e)}.bind(this);const{_scheduledTransitionIds:a}=this;let l;return l=setTimeout((o=>{a[e]&&(a[e]=sv(a[e],l),0===a[e].length&&delete a[e]),this.stopPendingTransitions(e,i),n=r.valueFunction(nb(this.attributes,e,i),t),this._transitionIds[e]=db(o),this.trigger("transition:start",this,e)}),r.delay,s),a[e]||(a[e]=[]),a[e].push(l),l},getTransitions:function(){return lv(Object.keys(this._transitionIds),Object.keys(this._scheduledTransitionIds))},stopScheduledTransitions:function(e,t="/"){const{_scheduledTransitionIds:r={}}=this;let i=Object.keys(r);if(e){const r=e.split(t);i=i.filter((e=>Kg(r,e.split(t).slice(0,r.length))))}return i.forEach((e=>{r[e].forEach((e=>clearTimeout(e))),delete r[e]})),this},stopPendingTransitions(e,t="/"){const{_transitionIds:r={}}=this;let i=Object.keys(r);if(e){const r=e.split(t);i=i.filter((e=>Kg(r,e.split(t).slice(0,r.length))))}i.forEach((e=>{const t=r[e];hb(t),delete r[e],this.trigger("transition:end",this,e)}))},stopTransitions:function(e,t="/"){return this.stopScheduledTransitions(e,t),this.stopPendingTransitions(e,t),this},addTo:function(e,t){return e.addCell(this,t),this},findView:function(e){return e.findViewByModel(this)},isElement:function(){return!1},isLink:function(){return!1},startBatch:function(e,t){return this.graph&&this.graph.startBatch(e,Vg({},t,{cell:this})),this},stopBatch:function(e,t){return this.graph&&this.graph.stopBatch(e,Vg({},t,{cell:this})),this},getChangeFlag:function(e){var t=0;if(!e)return t;for(var r in e)e.hasOwnProperty(r)&&this.hasChanged(r)&&(t|=e[r]);return t},angle:function(){return 0},position:function(){return new Iu(0,0)},z:function(){return this.get("z")||0},getPointFromConnectedLink:function(){return new Iu},getBBox:function(){return new Yu(0,0,0,0)},getPointRotatedAroundCenter(e,t,r){const i=new Iu(t,r);return e&&i.rotate(this.getBBox().center(),e),i},getAbsolutePointFromRelative(e,t){return this.getPointRotatedAroundCenter(-this.angle(),this.position().offset(e,t))},getRelativePointFromAbsolute(e,t){return this.getPointRotatedAroundCenter(this.angle(),e,t).difference(this.position())}},{getAttributeDefinition:function(e){var t=this.attributes,r=Ey;return t&&t[e]||r[e]},define:function(e,t,r,i){r=Vg({defaults:Hg({type:e},t,this.prototype.defaults)},r);var n=this.extend(r,i);return"undefined"!=typeof joint&&cv(joint,"shapes")&&sb(joint.shapes,e,n,"."),n}}),Oy={cells:function(e){return function(){var t=Array.from(arguments),r=t.length,i=r>0&&t[0]||[],n=r>1&&t[r-1]||{};return Array.isArray(i)||(n instanceof Ly?i=t:i instanceof Ly&&(t.length>1&&t.pop(),i=t)),n instanceof Ly&&(n={}),e.call(this,i,n)}}},My={TOP:"top",RIGHT:"right",BOTTOM:"bottom",LEFT:"left",TOP_LEFT:"top-left",TOP_RIGHT:"top-right",BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",CENTER:"center"};function Ry(e,t){const r=new Yu(e);switch(t){case void 0:throw new Error("Position required");case My.LEFT:case"leftMiddle":return r.leftMiddle();case My.RIGHT:case"rightMiddle":return r.rightMiddle();case My.TOP:case"topMiddle":return r.topMiddle();case My.BOTTOM:case"bottomMiddle":return r.bottomMiddle();case My.TOP_LEFT:case"topLeft":case"origin":return r.topLeft();case My.TOP_RIGHT:case"topRight":return r.topRight();case My.BOTTOM_LEFT:case"bottomLeft":return r.bottomLeft();case My.BOTTOM_RIGHT:case"bottomRight":case"corner":return r.bottomRight();case My.CENTER:return r.center();default:throw new Error(`Unknown position: ${t}`)}}function $y(e,t,r){var i=e.toJSON();return i.angle=t||0,jg({},r,i)}function Ny(e,t,r,i){return e.map((function(e,t,r){var n=this.pointAt((t+.5)/r.length);return(e.dx||e.dy)&&n.offset(e.dx||0,e.dy||0),$y(n.round(),0,zy(i,e))}),$u(t,r))}function Dy(e,t,r,i){var n=t.center(),o=t.width/t.height,s=t.topMiddle(),a=Bu.fromRect(t);return e.map((function(e,l,c){var d=r+i(l,c.length),h=s.clone().rotate(n,-d).scale(o,1,n),u=e.compensateRotation?-a.tangentTheta(h):0;return(e.dx||e.dy)&&h.offset(e.dx||0,e.dy||0),e.dr&&h.move(n,e.dr),$y(h.round(),u,zy(t,e))}))}function zy(e,t){let{x:r,y:i,angle:n}=t;return fb(r)?r=parseFloat(r)/100*e.width:ny(r)&&(r=Number(ay(r,e))),fb(i)?i=parseFloat(i)/100*e.height:ny(i)&&(i=Number(ay(i,e))),{x:r,y:i,angle:n}}function By(e,t){const{x:r,y:i}=zy(e,t);return new Iu(r||0,i||0)}var Fy=Object.freeze({__proto__:null,absolute:function(e,t){return e.map((e=>{const r=By(t,e).round().toJSON();return r.angle=e.angle||0,r}))},fn:function(e,t,r){return r.fn(e,t,r)},line:function(e,t,r){return Ny(e,By(t,r.start||t.origin()),By(t,r.end||t.corner()),t)},left:function(e,t,r){return Ny(e,t.origin(),t.bottomLeft(),t)},right:function(e,t,r){return Ny(e,t.topRight(),t.corner(),t)},top:function(e,t,r){return Ny(e,t.origin(),t.topRight(),t)},bottom:function(e,t,r){return Ny(e,t.bottomLeft(),t.corner(),t)},ellipseSpread:function(e,t,r){var i=r.startAngle||0,n=r.step||360/e.length;return Dy(e,t,i,(function(e){return e*n}))},ellipse:function(e,t,r){var i=r.startAngle||0,n=r.step||20;return Dy(e,t,i,(function(e,t){return(e+.5-t/2)*n}))}});function Uy(e,t){return Hg({},e,t,{x:0,y:0,angle:0,attrs:{}})}function Vy(e){var t=e.center(),r=t.theta(e.origin()),i=t.theta(e.bottomLeft()),n=t.theta(e.corner());return[r,t.theta(e.topRight()),n,i]}function jy(e,t,r,i){i=jg({},i,{offset:15});var n,o,s,a,l=t.center().theta(e),c=i.offset,d=0;const[h,u,p,f]=Vy(t);l<u||l>p?(s=".3em",n=c,o=0,a="start"):l<h?(n=0,o=-c,r?(d=-90,a="start",s=".3em"):(a="middle",s="0")):l<f?(s=".3em",n=-c,o=0,a="end"):(n=0,o=c,r?(d=90,a="start",s=".3em"):(a="middle",s=".6em"));var m=Math.round;return Uy(i,{x:m(n),y:m(o),angle:d,attrs:{labelText:{y:s,textAnchor:a}}})}function Gy(e,t,r,i){i=jg({},i,{offset:15});var n,o,s,a,l=t.center().theta(e),c=i.offset,d=0;const[h,u,p,f]=Vy(t);l<u||l>p?(s=".3em",n=-c,o=0,a="end"):l<h?(n=0,o=c,r?(d=90,a="start",s=".3em"):(a="middle",s=".6em")):l<f?(s=".3em",n=c,o=0,a="start"):(n=0,o=-c,r?(d=-90,a="start",s=".3em"):(a="middle",s="0"));var m=Math.round;return Uy(i,{x:m(n),y:m(o),angle:d,attrs:{labelText:{y:s,textAnchor:a}}})}function Hy(e,t,r){r=jg({},r,{offset:20});var i,n=Lu(0,0),o=-e.theta(n),s=o,a=e.clone().move(n,r.offset).difference(e).round(),l=".3em";(o+90)%180==0?(i=t?"end":"middle",t||-270!==o||(l="0em")):o>-270&&o<-90?(i="start",s=o-180):i="end";var c=Math.round;return Uy(r,{x:c(a.x),y:c(a.y),angle:t?s:0,attrs:{labelText:{y:l,textAnchor:i}}})}var Wy=Object.freeze({__proto__:null,manual:function(e,t,r){return Uy(r)},left:function(e,t,r){return Uy(r,{x:-15,attrs:{labelText:{y:".3em",textAnchor:"end"}}})},right:function(e,t,r){return Uy(r,{x:15,attrs:{labelText:{y:".3em",textAnchor:"start"}}})},top:function(e,t,r){return Uy(r,{y:-15,attrs:{labelText:{y:"0",textAnchor:"middle"}}})},bottom:function(e,t,r){return Uy(r,{y:15,attrs:{labelText:{y:".6em",textAnchor:"middle"}}})},outsideOriented:function(e,t,r){return jy(e,t,!0,r)},outside:function(e,t,r){return jy(e,t,!1,r)},insideOriented:function(e,t,r){return Gy(e,t,!0,r)},inside:function(e,t,r){return Gy(e,t,!1,r)},radial:function(e,t,r){return Hy(e.difference(t.center()),!1,r)},radialOriented:function(e,t,r){return Hy(e.difference(t.center()),!0,r)}}),qy=function(e){var t=Zg(e)||{};this.ports=[],this.groups={},this.portLayoutNamespace=Fy,this.portLabelLayoutNamespace=Wy,this._init(t)};qy.prototype={getPorts:function(){return this.ports},getGroup:function(e){return this.groups[e]||{}},getPortsByGroup:function(e){return this.ports.filter((function(t){return t.group===e}))},getGroupPortsMetrics:function(e,t){var r=this.getGroup(e),i=this.getPortsByGroup(e),n=r.position||{},o=n.name,s=this.portLayoutNamespace;s[o]||(o="left");var a=n.args||{},l=i.map((function(e){return e&&e.position&&e.position.args})),c=s[o](l,t,a),d={ports:i,result:[]};return rv(c).reduce(function(e,r,i){var n=e.ports[i];return e.result.push({portId:n.id,portTransformation:r,labelTransformation:this._getPortLabelLayout(n,Iu(r),t),portAttrs:n.attrs,portSize:n.size,labelSize:n.label.size}),e}.bind(this),d),d.result},_getPortLabelLayout:function(e,t,r){var i=this.portLabelLayoutNamespace,n=e.label.position.name||"left";return i[n]?i[n](t,r,e.label.position.args):null},_init:function(e){if(Bg(e.groups))for(var t=Object.keys(e.groups),r=0,i=t.length;r<i;r++){var n=t[r];this.groups[n]=this._evaluateGroup(e.groups[n])}for(var o=rv(e.items),s=0,a=o.length;s<a;s++)this.ports.push(this._evaluatePort(o[s]))},_evaluateGroup:function(e){return vv(e,{position:this._getPosition(e.position,!0),label:this._getLabel(e,!0)})},_evaluatePort:function(e){var t=Vg({},e),r=this.getGroup(e.group);return t.markup=t.markup||r.markup,t.attrs=vv({},r.attrs,t.attrs),t.position=this._createPositionNode(r,t),t.label=vv({},r.label,this._getLabel(t)),t.z=this._getZIndex(r,t),t.size=Vg({},r.size,t.size),t},_getZIndex:function(e,t){return Fg(t.z)?t.z:Fg(e.z)||"auto"===e.z?e.z:"auto"},_createPositionNode:function(e,t){return vv({name:"left",args:{}},e.position,{args:t.args})},_getPosition:function(e,t){var r,i={};ev(e)?(r="fn",i.fn=e):Ug(e)?r=e:void 0===e?r=t?"left":null:Array.isArray(e)?(r="absolute",i.x=e[0],i.y=e[1]):Bg(e)&&(r=e.name,Vg(i,e.args));var n={args:i};return r&&(n.name=r),n},_getLabel:function(e,t){var r=e.label||{},i=r;return i.position=this._getPosition(r.position,t),i}};const Yy={_initializePorts:function(){this._createPortData(),this.on("change:ports",(function(){this._processRemovedPort(),this._createPortData()}),this)},_processRemovedPort:function(){var e=this.get("ports")||{},t={};rv(e.items).forEach((function(e){t[e.id]=!0}));var r=this.previous("ports")||{},i={};rv(r.items).forEach((function(e){t[e.id]||(i[e.id]=!0)}));var n=this.graph;n&&!Qg(i)&&(n.getConnectedLinks(this,{inbound:!0}).forEach((function(e){i[e.get("target").port]&&e.remove()})),n.getConnectedLinks(this,{outbound:!0}).forEach((function(e){i[e.get("source").port]&&e.remove()})))},hasPorts:function(){var e=this.prop("ports/items");return Array.isArray(e)&&e.length>0},hasPort:function(e){return-1!==this.getPortIndex(e)},getPorts:function(){return Zg(this.prop("ports/items"))||[]},getGroupPorts:function(e){const t=rv(this.prop(["ports","items"])).filter((t=>t.group===e));return Zg(t)},getPort:function(e){return Zg(rv(this.prop("ports/items")).find((function(t){return t.id&&t.id===e})))},getPortsPositions:function(e){return this._portSettingsData.getGroupPortsMetrics(e,Yu(this.size())).reduce((function(e,t){var r=t.portTransformation;return e[t.portId]={x:r.x,y:r.y,angle:r.angle},e}),{})},getPortIndex:function(e){var t=Bg(e)?e.id:e;return this._isValidPortId(t)?rv(this.prop("ports/items")).findIndex((function(e){return e.id===t})):-1},addPort:function(e,t){if(!Bg(e)||Array.isArray(e))throw new Error("Element: addPort requires an object.");var r=Vg([],this.prop("ports/items"));return r.push(e),this.prop("ports/items",r,t),this},insertPort:function(e,t,r){const i="number"==typeof e?e:this.getPortIndex(e);if(!Bg(t)||Array.isArray(t))throw new Error("dia.Element: insertPort requires an object.");const n=Vg([],this.prop("ports/items"));return n.splice(i,0,t),this.prop("ports/items",n,r),this},portProp:function(e,t,r,i){var n=this.getPortIndex(e);if(-1===n)throw new Error("Element: unable to find port with id "+e);var o=Array.prototype.slice.call(arguments,1);return Array.isArray(t)?o[0]=["ports","items",n].concat(t):Ug(t)?o[0]=["ports/items/",n,"/",t].join(""):(o=["ports/items/"+n],tv(t)&&(o.push(t),o.push(r))),this.prop.apply(this,o)},_validatePorts:function(){var e=this.get("ports")||{},t=[],r=rv((e=e||{}).items);return r.forEach((function(e){"object"!=typeof e&&t.push("Element: invalid port ",e),this._isValidPortId(e.id)||(e.id=this.generatePortId())}),this),Jg(r,"id").length!==r.length&&t.push("Element: found id duplicities in ports."),t},generatePortId:function(){return this.generateId()},_isValidPortId:function(e){return null!=e&&!Bg(e)},addPorts:function(e,t){return e.length&&this.prop("ports/items",Vg([],this.prop("ports/items")).concat(e),t),this},removePort:function(e,t){const r=t||{},i=this.getPortIndex(e);if(-1!==i){const e=Vg([],this.prop(["ports","items"]));e.splice(i,1),r.rewrite=!0,this.startBatch("port-remove"),this.prop(["ports","items"],e,r),this.stopBatch("port-remove")}return this},removePorts:function(e,t){let r,i;if(Array.isArray(e)){if(r=t||{},0===e.length)return this.this;i=Vg([],this.prop(["ports","items"])).filter((function(t){return!e.some((function(e){const r=Bg(e)?e.id:e;return t.id===r}))}))}else r=e||{},i=[];return this.startBatch("port-remove"),r.rewrite=!0,this.prop(["ports","items"],i,r),this.stopBatch("port-remove"),this},_createPortData:function(){var e,t=this._validatePorts();if(t.length>0)throw this.set("ports",this.previous("ports")),new Error(t.join(" "));this._portSettingsData&&(e=this._portSettingsData.getPorts()),this._portSettingsData=new qy(this.get("ports"));var r=this._portSettingsData.getPorts();if(e){var i=r.filter((function(t){if(!e.find((function(e){return e.id===t.id})))return t})),n=e.filter((function(e){if(!r.find((function(t){return t.id===e.id})))return e}));n.length>0&&this.trigger("ports:remove",this,n),i.length>0&&this.trigger("ports:add",this,i)}}},Jy={portContainerMarkup:"g",portMarkup:[{tagName:"circle",selector:"circle",attributes:{r:10,fill:"#FFFFFF",stroke:"#000000"}}],portLabelMarkup:[{tagName:"text",selector:"text",attributes:{fill:"#000000"}}],_portElementsCache:null,_initializePorts:function(){this._cleanPortsCache()},_refreshPorts:function(){this._removePorts(),this._cleanPortsCache(),this._renderPorts()},_cleanPortsCache:function(){this._portElementsCache={}},_renderPorts:function(){for(var e=[],t=this._getContainerElement(),r=0,i=t.node.childNodes.length;r<i;r++)e.push(t.node.childNodes[r]);var n=iv(this.model._portSettingsData.getPorts(),"z"),o="auto";rv(n[o]).forEach((function(r){var i=this._getPortElement(r);t.append(i),e.push(i)}),this);for(var s=Object.keys(n),a=0;a<s.length;a++){var l=s[a];if(l!==o){var c=parseInt(l,10);this._appendPorts(n[l],c,e)}}this._updatePorts()},_getContainerElement:function(){return this.rotatableNode||this.vel},_appendPorts:function(e,t,r){var i=this._getContainerElement(),n=rv(e).map(this._getPortElement,this);r[t]||t<0?ef(r[Math.max(t,0)]).before(n):i.append(n)},_getPortElement:function(e){return this._portElementsCache[e.id]?this._portElementsCache[e.id].portElement:this._createPortElement(e)},findPortNodes:function(e,t){const r=this._portElementsCache[e];if(!r)return[];if(!t)return[r.portContentElement.node];const i=r.portElement.node,n=r.portSelectors;return this.findBySelector(t,i,n)},findPortNode:function(e,t){const[r=null]=this.findPortNodes(e,t);return r},_updatePorts:function(){this._updatePortGroup(void 0),Object.keys(this.model._portSettingsData.groups).forEach(this._updatePortGroup,this)},_removePorts:function(){Wg(this._portElementsCache,"portElement.remove")},_createPortElement:function(e){let t,r,i,n;var o=ef(this.portContainerMarkup).addClass("joint-port"),s=this._getPortMarkup(e);if(Array.isArray(s)){var a=this.parseDOMJSON(s,o.node),l=a.fragment;t=l.childNodes.length>1?ef("g").append(l):ef(l.firstChild),n=a.selectors}else t=ef(s),Array.isArray(t)&&(t=ef("g").append(t));if(!t)throw new Error("ElementView: Invalid port markup.");t.attr({port:e.id,"port-group":e.group}),Fg(e.id)&&t.attr("port-id-type","number");const c=this._getPortLabelMarkup(e.label);if(Array.isArray(c)){const{fragment:e,selectors:t}=this.parseDOMJSON(c,o.node),n=e.childNodes.length;n>0&&(i=t,r=1===n?ef(e.firstChild):ef("g").append(e))}else r=ef(c),Array.isArray(r)&&(r=ef("g").append(r));var d;if(n&&i){for(var h in i)if(n[h]&&h!==this.selector)throw new Error("ElementView: selectors within port must be unique.");d=Vg({},n,i)}else d=n||i||{};const u="portRoot",p="labelRoot",f="labelText";if(u in d||(d[u]=t.node),r){const e=r.node;if(p in d||(d[p]=e),!(f in d)){const t="TEXT"===r.tagName()?e:Array.from(e.querySelectorAll("text"));d[f]=t,i||(i={}),i[f]=t}}return o.append(t.addClass("joint-port-body")),r&&o.append(r.addClass("joint-port-label")),this._portElementsCache[e.id]={portElement:o,portLabelElement:r,portSelectors:d,portLabelSelectors:i,portContentElement:t,portContentSelectors:n},o},_updatePortGroup:function(e){for(var t=Yu(this.model.size()),r=this.model._portSettingsData.getGroupPortsMetrics(e,t),i=0,n=r.length;i<n;i++){var o=r[i],s=o.portId,a=this._portElementsCache[s]||{},l=o.portTransformation,c=o.labelTransformation;c&&a.portLabelElement&&(this.updateDOMSubtreeAttributes(a.portLabelElement.node,c.attrs,{rootBBox:new Yu(o.labelSize),selectors:a.portLabelSelectors}),this.applyPortTransform(a.portLabelElement,c,-l.angle||0)),this.updateDOMSubtreeAttributes(a.portElement.node,o.portAttrs,{rootBBox:new Yu(o.portSize),selectors:a.portSelectors}),this.applyPortTransform(a.portElement,l)}},applyPortTransform:function(e,t,r){var i=ef.createSVGMatrix().rotate(r||0).translate(t.x||0,t.y||0).rotate(t.angle||0);e.transform(i,{absolute:!0})},_getPortMarkup:function(e){return e.markup||this.model.get("portMarkup")||this.model.portMarkup||this.portMarkup},_getPortLabelMarkup:function(e){return e.markup||this.model.get("portLabelMarkup")||this.model.portLabelMarkup||this.portLabelMarkup}},Xy=Ly.extend({defaults:{position:{x:0,y:0},size:{width:1,height:1},angle:0},initialize:function(){this._initializePorts(),Ly.prototype.initialize.apply(this,arguments)},_initializePorts:function(){},_refreshPorts:function(){},isElement:function(){return!0},position:function(e,t,r){const i=Fg(t);r=(i?r:e)||{};const{parentRelative:n,deep:o,restrictedArea:s}=r;let a;if(n){if(!this.graph)throw new Error("Element must be part of a graph.");const e=this.getParentCell();e&&!e.isLink()&&(a=e.get("position"))}if(i){if(a&&(e+=a.x,t+=a.y),o||s){const{x:i,y:n}=this.get("position");this.translate(e-i,t-n,r)}else this.set("position",{x:e,y:t},r);return this}{const e=Iu(this.get("position"));return n?e.difference(a):e}},translate:function(e,t,r){if(t=t||0,0===(e=e||0)&&0===t)return this;(r=r||{}).translateBy=r.translateBy||this.id;var i=this.get("position")||{x:0,y:0},n=r.restrictedArea;if(n&&r.translateBy===this.id)if("function"==typeof n){var o=n.call(this,i.x+e,i.y+t,r);e=o.x-i.x,t=o.y-i.y}else{var s=this.getBBox({deep:!0}),a=i.x-s.x,l=i.y-s.y,c=Math.max(n.x+a,Math.min(n.x+n.width+a-s.width,i.x+e)),d=Math.max(n.y+l,Math.min(n.y+n.height+l-s.height,i.y+t));e=c-i.x,t=d-i.y}var h={x:i.x+e,y:i.y+t};return r.tx=e,r.ty=t,r.transition?(Bg(r.transition)||(r.transition={}),this.transition("position",h,Vg({},r.transition,{valueFunction:wb.object})),Wg(this.getEmbeddedCells(),"translate",e,t,r)):(this.startBatch("translate",r),this.set("position",h,r),Wg(this.getEmbeddedCells(),"translate",e,t,r),this.stopBatch("translate",r)),this},size:function(e,t,r){var i=this.get("size");return void 0===e?{width:i.width,height:i.height}:(Bg(e)&&(r=t,t=Fg(e.height)?e.height:i.height,e=Fg(e.width)?e.width:i.width),this.resize(e,t,r))},resize:function(e,t,r){if(r=r||{},this.startBatch("resize",r),r.direction){var i=this.get("size");switch(r.direction){case"left":case"right":t=i.height;break;case"top":case"bottom":e=i.width}var n,o=lu(this.get("angle")||0),s=this.getBBox();if(o){var a={"top-right":0,right:0,"top-left":1,top:1,"bottom-left":2,left:2,"bottom-right":3,bottom:3}[r.direction];r.absolute&&(a+=Math.floor((o+45)/90),a%=4);var l=s[["bottomLeft","corner","topRight","origin"][a]](),c=Iu(l).rotate(s.center(),-o),d=Math.sqrt(e*e+t*t)/2,h=a*Math.PI/2;h+=Math.atan(a%2==0?t/e:e/t),h-=hu(o);var u=Iu.fromPolar(d,h,c);n=Iu(u).offset(e/-2,t/-2)}else switch(n=s.topLeft(),r.direction){case"top":case"top-right":n.offset(0,s.height-t);break;case"left":case"bottom-left":n.offset(s.width-e,0);break;case"top-left":n.offset(s.width-e,s.height-t)}this.set("size",{width:e,height:t},r),this.position(n.x,n.y,r)}else this.set("size",{width:e,height:t},r);return this.stopBatch("resize",r),this},scale:function(e,t,r,i){var n=this.getBBox().scale(e,t,r);return this.startBatch("scale",i),this.position(n.x,n.y,i),this.resize(n.width,n.height,i),this.stopBatch("scale"),this},fitEmbeds:function(e){return this.fitToChildren(e)},fitToChildren:function(e={}){const{graph:t}=this;if(!t)throw new Error("Element must be part of a graph.");const r=this.getEmbeddedCells().filter((e=>e.isElement()));return 0===r.length||(this.startBatch("fit-embeds",e),e.deep&&Wg(r,"fitToChildren",e),this._fitToElements(Object.assign({elements:r},e)),this.stopBatch("fit-embeds")),this},fitParent:function(e={}){const{graph:t}=this;if(!t)throw new Error("Element must be part of a graph.");if(e.deep&&e.terminator&&(e.terminator===this||e.terminator===this.id))return this;const r=this.getParentCell();if(!r||!r.isElement())return this;const i=r.getEmbeddedCells().filter((e=>e.isElement()));return 0===i.length||(this.startBatch("fit-parent",e),r._fitToElements(Object.assign({elements:i},e)),e.deep&&r.fitParent(e),this.stopBatch("fit-parent")),this},_fitToElements:function(e={}){const t=this.graph.getCellsBBox(e.elements);if(!t)return;const{expandOnly:r,shrinkOnly:i}=e;if(r&&i)return;let{x:n,y:o,width:s,height:a}=t;const{left:l,right:c,top:d,bottom:h}=yb(e.padding);n-=l,o-=d,s+=l+c,a+=h+d;let u=new Yu(n,o,s,a);if(r)u=this.getBBox().union(u);else if(i){const e=this.getBBox().intersect(u);if(!e)return;u=e}this.set({position:{x:u.x,y:u.y},size:{width:u.width,height:u.height}},e)},rotate:function(e,t,r,i){if(r){var n=this.getBBox().center(),o=this.get("size"),s=this.get("position");n.rotate(r,this.get("angle")-e);var a=n.x-o.width/2-s.x,l=n.y-o.height/2-s.y;this.startBatch("rotate",{angle:e,absolute:t,origin:r}),this.position(s.x+a,s.y+l,i),this.rotate(e,t,null,i),this.stopBatch("rotate")}else this.set("angle",t?e:(this.get("angle")+e)%360,i);return this},angle:function(){return lu(this.get("angle")||0)},getBBox:function(e={}){const{graph:t,attributes:r}=this,{deep:i,rotate:n}=e;if(i&&t){const r=this.getEmbeddedCells({deep:!0,breadthFirst:!0});return r.push(this),t.getCellsBBox(r,e)}const{angle:o=0,position:{x:s,y:a},size:{width:l,height:c}}=r,d=new Yu(s,a,l,c);return n&&d.rotateAroundCenter(o),d},getPointFromConnectedLink:function(e,t){var r=this.getBBox(),i=r.center(),n=e.get(t);if(!n)return i;var o=n.port;if(!o||!this.hasPort(o))return i;var s=this.portProp(o,["group"]),a=this.getPortsPositions(s),l=new Iu(a[o]).offset(r.origin()),c=this.angle();return c&&l.rotate(i,-c),l}});Vg(Xy.prototype,Yy);const Zy=Ly.extend({defaultLabel:void 0,labelMarkup:void 0,_builtins:{defaultLabel:{markup:[{tagName:"rect",selector:"rect"},{tagName:"text",selector:"text"}],attrs:{text:{fill:"#000000",fontSize:14,textAnchor:"middle",textVerticalAnchor:"middle",pointerEvents:"none"},rect:{ref:"text",fill:"#ffffff",rx:3,ry:3,x:"calc(x)",y:"calc(y)",width:"calc(w)",height:"calc(h)"}},position:{distance:.5}}},defaults:{source:{},target:{}},isLink:function(){return!0},disconnect:function(e){return this.set({source:{x:0,y:0},target:{x:0,y:0}},e)},source:function(e,t,r){return void 0===e?Xg(this.get("source")):e instanceof Ly?((i=Xg(t)||{}).id=e.id,n=r,this.set("source",i,n)):tv(e)?(i=e,n=t,this.set("source",i,n)):((i=Xg(t)||{}).x=e.x,i.y=e.y,n=r,this.set("source",i,n));var i,n},target:function(e,t,r){return void 0===e?Xg(this.get("target")):e instanceof Ly?((i=Xg(t)||{}).id=e.id,n=r,this.set("target",i,n)):tv(e)?(i=e,n=t,this.set("target",i,n)):((i=Xg(t)||{}).x=e.x,i.y=e.y,n=r,this.set("target",i,n));var i,n},router:function(e,t,r){if(void 0===e){var i=this.get("router");return i?"object"==typeof i?Xg(i):i:null}var n="object"==typeof e||"function"==typeof e,o=n?e:{name:e,args:t},s=n?t:r;return this.set("router",o,s)},connector:function(e,t,r){if(void 0===e){var i=this.get("connector");return i?"object"==typeof i?Xg(i):i:null}var n="object"==typeof e||"function"==typeof e,o=n?e:{name:e,args:t},s=n?t:r;return this.set("connector",o,s)},label:function(e,t,r){var i=this.labels();return(e=isFinite(e)&&null!==e?0|e:0)<0&&(e=i.length+e),arguments.length<=1?this.prop(["labels",e]):this.prop(["labels",e],t,r)},labels:function(e,t){return 0===arguments.length?(e=this.get("labels"),Array.isArray(e)?e.slice():[]):(Array.isArray(e)||(e=[]),this.set("labels",e,t))},hasLabels:function(){const{labels:e}=this.attributes;return Array.isArray(e)&&e.length>0},insertLabel:function(e,t,r){if(!t)throw new Error("dia.Link: no label provided");var i=this.labels(),n=i.length;return(e=isFinite(e)&&null!==e?0|e:n)<0&&(e=n+e+1),i.splice(e,0,t),this.labels(i,r)},appendLabel:function(e,t){return this.insertLabel(-1,e,t)},removeLabel:function(e,t){var r=this.labels();return e=isFinite(e)&&null!==e?0|e:-1,r.splice(e,1),this.labels(r,t)},vertex:function(e,t,r){var i=this.vertices();if((e=isFinite(e)&&null!==e?0|e:0)<0&&(e=i.length+e),arguments.length<=1)return this.prop(["vertices",e]);var n=this._normalizeVertex(t);return this.prop(["vertices",e],n,r)},vertices:function(e,t){if(0===arguments.length)return e=this.get("vertices"),Array.isArray(e)?e.slice():[];Array.isArray(e)||(e=[]);for(var r=[],i=0;i<e.length;i++){var n=e[i],o=this._normalizeVertex(n);r.push(o)}return this.set("vertices",r,t)},insertVertex:function(e,t,r){if(!t)throw new Error("dia.Link: no vertex provided");var i=this.vertices(),n=i.length;(e=isFinite(e)&&null!==e?0|e:n)<0&&(e=n+e+1);var o=this._normalizeVertex(t);return i.splice(e,0,o),this.vertices(i,r)},removeVertex:function(e,t){var r=this.vertices();return e=isFinite(e)&&null!==e?0|e:-1,r.splice(e,1),this.vertices(r,t)},_normalizeVertex:function(e){return!tv(e)?{x:e.x,y:e.y}:e},translate:function(e,t,r){return(r=r||{}).translateBy=r.translateBy||this.id,r.tx=e,r.ty=t,this.applyToPoints((function(r){return{x:(r.x||0)+e,y:(r.y||0)+t}}),r)},scale:function(e,t,r,i){return this.applyToPoints((function(i){return Iu(i).scale(e,t,r).toJSON()}),i)},applyToPoints:function(e,t){if(!ev(e))throw new TypeError("dia.Link: applyToPoints expects its first parameter to be a function.");var r={},{source:i,target:n}=this.attributes;i.id||(r.source=e(i)),n.id||(r.target=e(n));var o=this.vertices();return o.length>0&&(r.vertices=o.map(e)),this.set(r,t)},getSourcePoint:function(){var e=this.getSourceCell();return e?e.getPointFromConnectedLink(this,"source"):new Iu(this.source())},getTargetPoint:function(){var e=this.getTargetCell();return e?e.getPointFromConnectedLink(this,"target"):new Iu(this.target())},getPointFromConnectedLink:function(){return this.getPolyline().pointAt(.5)},getPolyline:function(){const e=[this.getSourcePoint(),...this.vertices().map(Iu),this.getTargetPoint()];return new Ku(e)},getBBox:function(){return this.getPolyline().bbox()},reparent:function(e){var t;if(this.graph){var r=this.getSourceElement(),i=this.getTargetElement(),n=this.getParentCell();r&&i&&(t=r===i||r.isEmbeddedIn(i)?i:i.isEmbeddedIn(r)?r:this.graph.getCommonAncestor(r,i)),!n||t&&t.id===n.id||n.unembed(this,e),t&&t.embed(this,e)}return t},hasLoop:function(e){e=e||{};var{source:t,target:r}=this.attributes,i=t.id,n=r.id;if(!i||!n)return!1;var o=i===n;if(!o&&e.deep&&this.graph){var s=this.getSourceCell(),a=this.getTargetCell();o=s.isEmbeddedIn(a)||a.isEmbeddedIn(s)}return o},getSourceCell:function(){const{graph:e,attributes:t}=this;var r=t.source;return r&&r.id&&e&&e.getCell(r.id)||null},getSourceElement:function(){var e=this,t={};do{if(t[e.id])return null;t[e.id]=!0,e=e.getSourceCell()}while(e&&e.isLink());return e},getTargetCell:function(){const{graph:e,attributes:t}=this;var r=t.target;return r&&r.id&&e&&e.getCell(r.id)||null},getTargetElement:function(){var e=this,t={};do{if(t[e.id])return null;t[e.id]=!0,e=e.getTargetCell()}while(e&&e.isLink());return e},getRelationshipAncestor:function(){var e;if(this.graph){var t=[this,this.getSourceElement(),this.getTargetElement()].filter((function(e){return!!e}));e=this.graph.getCommonAncestor.apply(this.graph,t)}return e||null},isRelationshipEmbeddedIn:function(e){var t=Ug(e)||Fg(e)?e:e.id,r=this.getRelationshipAncestor();return!!r&&(r.id===t||r.isEmbeddedIn(t))},_getDefaultLabel:function(){var e=this.get("defaultLabel")||this.defaultLabel||{},t={};return t.markup=e.markup||this.get("labelMarkup")||this.labelMarkup,t.position=e.position,t.attrs=e.attrs,t.size=e.size,t}},{endsEqual:function(e,t){var r=e.port===t.port||!e.port&&!t.port;return e.id===t.id&&r}}),Qy={_results:{},_tests:{svgforeignobject:function(){return!!document.createElementNS&&/SVGForeignObject/.test({}.toString.call(document.createElementNS("http://www.w3.org/2000/svg","foreignObject")))},isSafari:function(){return/Safari/.test(navigator.userAgent)&&/Apple Computer/.test(navigator.vendor)}},addTest:function(e,t){return this._tests[e]=t},test:function(e){var t=this._tests[e];if(!t)throw new Error('Test not defined ("'+e+'"). Use `joint.env.addTest(name, fn) to add a new test.`');var r=this._results[e];if(void 0!==r)return r;try{r=t()}catch(e){r=!1}return this._results[e]=r,r}},Ky=Xy.define("standard.Rectangle",{attrs:{root:{cursor:"move"},body:{width:"calc(w)",height:"calc(h)",strokeWidth:2,stroke:"#000000",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",x:"calc(w/2)",y:"calc(h/2)",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"body"},{tagName:"text",selector:"label"}]});Xy.define("standard.Circle",{attrs:{root:{cursor:"move"},body:{cx:"calc(s/2)",cy:"calc(s/2)",r:"calc(s/2)",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",x:"calc(w/2)",y:"calc(h/2)",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"circle",selector:"body"},{tagName:"text",selector:"label"}]}),Xy.define("standard.Ellipse",{attrs:{root:{cursor:"move"},body:{cx:"calc(w/2)",cy:"calc(h/2)",rx:"calc(w/2)",ry:"calc(h/2)",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",x:"calc(w/2)",y:"calc(h/2)",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"ellipse",selector:"body"},{tagName:"text",selector:"label"}]}),Xy.define("standard.Path",{attrs:{root:{cursor:"move"},body:{d:"M 0 0 H calc(w) V calc(h) H 0 Z",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",x:"calc(w/2)",y:"calc(h/2)",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"path",selector:"body"},{tagName:"text",selector:"label"}]}),Xy.define("standard.Polygon",{attrs:{root:{cursor:"move"},body:{points:"0 0 calc(w) 0 calc(w) calc(h) 0 calc(h)",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",x:"calc(w/2)",y:"calc(h/2)",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"polygon",selector:"body"},{tagName:"text",selector:"label"}]}),Xy.define("standard.Polyline",{attrs:{root:{cursor:"move"},body:{points:"0 0 calc(w) 0 calc(w) calc(h) 0 calc(h)",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",x:"calc(w/2)",y:"calc(h/2)",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"polyline",selector:"body"},{tagName:"text",selector:"label"}]}),Xy.define("standard.Image",{attrs:{root:{cursor:"move"},image:{width:"calc(w)",height:"calc(h)"},label:{textVerticalAnchor:"top",textAnchor:"middle",x:"calc(w/2)",y:"calc(h+10)",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"image",selector:"image"},{tagName:"text",selector:"label"}]}),Xy.define("standard.BorderedImage",{attrs:{root:{cursor:"move"},border:{width:"calc(w)",height:"calc(h)",stroke:"#333333",strokeWidth:2},background:{width:"calc(w-1)",height:"calc(h-1)",x:.5,y:.5,fill:"#FFFFFF"},image:{width:"calc(w-1)",height:"calc(h-1)",x:.5,y:.5},label:{textVerticalAnchor:"top",textAnchor:"middle",x:"calc(w/2)",y:"calc(h+10)",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"background",attributes:{stroke:"none"}},{tagName:"image",selector:"image"},{tagName:"rect",selector:"border",attributes:{fill:"none"}},{tagName:"text",selector:"label"}]}),Xy.define("standard.EmbeddedImage",{attrs:{root:{cursor:"move"},body:{width:"calc(w)",height:"calc(h)",stroke:"#333333",fill:"#FFFFFF",strokeWidth:2},image:{width:"calc(0.3*w)",height:"calc(h-20)",x:10,y:10,preserveAspectRatio:"xMidYMin"},label:{textVerticalAnchor:"top",textAnchor:"left",x:"calc(0.3*w+20)",y:10,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"body"},{tagName:"image",selector:"image"},{tagName:"text",selector:"label"}]}),Xy.define("standard.InscribedImage",{attrs:{root:{cursor:"move"},border:{rx:"calc(w/2)",ry:"calc(h/2)",cx:"calc(w/2)",cy:"calc(h/2)",stroke:"#333333",strokeWidth:2},background:{rx:"calc(w/2)",ry:"calc(h/2)",cx:"calc(w/2)",cy:"calc(h/2)",fill:"#FFFFFF"},image:{width:"calc(0.68*w)",height:"calc(0.68*h)",x:"calc(0.16*w)",y:"calc(0.16*h)",preserveAspectRatio:"xMidYMid"},label:{textVerticalAnchor:"top",textAnchor:"middle",x:"calc(w/2)",y:"calc(h+10)",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"ellipse",selector:"background"},{tagName:"image",selector:"image"},{tagName:"ellipse",selector:"border",attributes:{fill:"none"}},{tagName:"text",selector:"label"}]}),Xy.define("standard.HeaderedRectangle",{attrs:{root:{cursor:"move"},body:{width:"calc(w)",height:"calc(h)",strokeWidth:2,stroke:"#000000",fill:"#FFFFFF"},header:{width:"calc(w)",height:30,strokeWidth:2,stroke:"#000000",fill:"#FFFFFF"},headerText:{textVerticalAnchor:"middle",textAnchor:"middle",x:"calc(w/2)",y:15,fontSize:16,fill:"#333333"},bodyText:{textVerticalAnchor:"middle",textAnchor:"middle",x:"calc(w/2)",y:"calc(h/2+15)",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"body"},{tagName:"rect",selector:"header"},{tagName:"text",selector:"headerText"},{tagName:"text",selector:"bodyText"}]});Xy.define("standard.Cylinder",{attrs:{root:{cursor:"move"},body:{lateralArea:10,fill:"#FFFFFF",stroke:"#333333",strokeWidth:2},top:{cx:"calc(w/2)",cy:10,rx:"calc(w/2)",ry:10,fill:"#FFFFFF",stroke:"#333333",strokeWidth:2},label:{textVerticalAnchor:"middle",textAnchor:"middle",x:"calc(w/2)",y:"calc(h+15)",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"path",selector:"body"},{tagName:"ellipse",selector:"top"},{tagName:"text",selector:"label"}],topRy:function(e,t){if(void 0===e)return this.attr("body/lateralArea");var r={lateralArea:e},i=fb(e)?`calc(${parseFloat(e)/100}*h)`:e,n={cy:i,ry:i};return this.attr({body:r,top:n},t)}},{attributes:{"lateral-area":{set:function(e,t){var r=fb(e);r&&(e=parseFloat(e)/100);var i=t.x,n=t.y,o=t.width,s=t.height,a=o/2,l=r?s*e:e,c=ef.KAPPA,d=c*a,h=c*(r?s*e:e),u=i+o/2,p=i+o,f=n+l,m=f-l,g=n+s-l,v=n+s;return{d:["M",i,f,"L",i,g,"C",i,g+h,u-d,v,u,v,"C",u+d,v,p,g+h,p,g,"L",p,f,"C",p,f-h,u+d,m,u,m,"C",u-d,m,i,f-h,i,f,"Z"].join(" ")}}}}});var ex=Qy.test("svgforeignobject")?{tagName:"foreignObject",selector:"foreignObject",attributes:{overflow:"hidden"},children:[{tagName:"div",namespaceURI:"http://www.w3.org/1999/xhtml",selector:"label",style:{width:"100%",height:"100%",position:"static",backgroundColor:"transparent",textAlign:"center",margin:0,padding:"0px 5px",boxSizing:"border-box",display:"flex",alignItems:"center",justifyContent:"center"}}]}:{tagName:"text",selector:"label",attributes:{"text-anchor":"middle"}};Xy.define("standard.TextBlock",{attrs:{root:{cursor:"move"},body:{width:"calc(w)",height:"calc(h)",stroke:"#333333",fill:"#ffffff",strokeWidth:2},foreignObject:{width:"calc(w)",height:"calc(h)"},label:{style:{fontSize:14}}}},{markup:[{tagName:"rect",selector:"body"},ex]},{attributes:{text:{set:function(e,t,r,i){if(!(r instanceof HTMLElement)){var n=i.style||{},o={text:e,width:-5,height:"100%"},s=Vg({"text-vertical-anchor":"middle"},n);return Ey["text-wrap"].set.call(this,o,t,r,s),{fill:n.color||null}}r.textContent=e},position:function(e,t,r){if(r instanceof SVGElement)return t.center()}}}});const tx=Zy.define("standard.Link",{attrs:{line:{connection:!0,stroke:"#333333",strokeWidth:2,strokeLinejoin:"round",targetMarker:{type:"path",d:"M 10 -5 0 0 10 5 z"}},wrapper:{connection:!0,strokeWidth:10,strokeLinejoin:"round"}}},{markup:[{tagName:"path",selector:"wrapper",attributes:{fill:"none",cursor:"pointer",stroke:"transparent","stroke-linecap":"round"}},{tagName:"path",selector:"line",attributes:{fill:"none","pointer-events":"none"}}]});Zy.define("standard.DoubleLink",{attrs:{line:{connection:!0,stroke:"#DDDDDD",strokeWidth:4,strokeLinejoin:"round",targetMarker:{type:"path",stroke:"#000000",d:"M 10 -3 10 -10 -2 0 10 10 10 3"}},outline:{connection:!0,stroke:"#000000",strokeWidth:6,strokeLinejoin:"round"}}},{markup:[{tagName:"path",selector:"outline",attributes:{fill:"none",cursor:"pointer"}},{tagName:"path",selector:"line",attributes:{fill:"none","pointer-events":"none"}}]}),Zy.define("standard.ShadowLink",{attrs:{line:{connection:!0,stroke:"#FF0000",strokeWidth:20,strokeLinejoin:"round",targetMarker:{type:"path",stroke:"none",d:"M 0 -10 -10 0 0 10 z"},sourceMarker:{type:"path",stroke:"none",d:"M -10 -10 0 0 -10 10 0 10 0 -10 z"}},shadow:{connection:!0,transform:"translate(3,6)",stroke:"#000000",strokeOpacity:.2,strokeWidth:20,strokeLinejoin:"round",targetMarker:{type:"path",d:"M 0 -10 -10 0 0 10 z",stroke:"none"},sourceMarker:{type:"path",stroke:"none",d:"M -10 -10 0 0 -10 10 0 10 0 -10 z"}}}},{markup:[{tagName:"path",selector:"shadow",attributes:{fill:"none","pointer-events":"none"}},{tagName:"path",selector:"line",attributes:{fill:"none",cursor:"pointer"}}]});const rx={POINT:"point",CUBIC:"cubic",LINE:"line",GAP:"gap"},ix=Object.values(rx),nx=10,ox=1,sx=function(e,t,r=[],i={}){const{cornerType:n=rx.POINT,cornerRadius:o=nx,cornerPreserveAspectRatio:s=!1,precision:a=ox,raw:l=!1}=i;if(-1===ix.indexOf(n))throw new Error("Invalid `cornerType` provided to `straight` connector.");let c;if(n!==rx.POINT&&o){let i;c=new ap,c.appendSegment(ap.createSegment("M",e));const l=r.length;for(let d=0;d<l;d++){const l=new Iu(r[d]),h=r[d-1]||e,u=r[d+1]||t,p=i||l.distance(h)/2;let f,m;i=l.distance(u)/2,s?f=m=-Math.min(o,p,i):(f=-Math.min(o,p),m=-Math.min(o,i));const g=l.clone().move(h,f).round(a),v=l.clone().move(u,m).round(a);switch(c.appendSegment(ap.createSegment("L",g)),n){case rx.CUBIC:{const e=1/3,t=2/3,r=new Iu(e*g.x+t*l.x,t*l.y+e*g.y),i=new Iu(e*v.x+t*l.x,t*l.y+e*v.y);c.appendSegment(ap.createSegment("C",r,i,v));break}case rx.LINE:c.appendSegment(ap.createSegment("L",v));break;case rx.GAP:c.appendSegment(ap.createSegment("M",v))}}c.appendSegment(ap.createSegment("L",t))}else{const i=[e].concat(r).concat([t]),n=new Ku(i);c=new ap(n)}return l?c:c.serialize()};var ax=["arc","gap","cubic"],lx=["smooth"],cx=1/3,dx=2/3;function hx(e,t){let{x:r,y:i}=e,{x:n,y:o}=t;if(r>n){let e=r;r=n,n=e,e=i,i=o,o=e}if(i>o){let e=r;r=n,n=e,e=i,i=o,o=e}return[new Iu(r,i),new Iu(n,o)]}function ux(e,t,r){var i=[].concat(e,r,t);return i.reduce((function(e,t,r){var n=i[r+1];return null!=n&&(e[r]=$u(t,n)),e}),[])}function px(e,t){return $u(e,t).squaredLength()}function fx(e,t,r,i){var n,o=new ap;return n=ap.createSegment("M",e[0].start),o.appendSegment(n),rv(e).forEach((function(s,a){if(s.isJump){var l,c,d,h;if("arc"===r){l=-90,c=s.start.difference(s.end);var u=Number(c.x<0||0===c.x&&c.y<0);u&&(l+=180);var p,f=s.midpoint(),m=new Ru(f,s.end).rotate(f,l);d=(p=new Ru(s.start,f)).pointAt(2/3).rotate(s.start,l),h=m.pointAt(1/3).rotate(m.end,-l),n=ap.createSegment("C",d,h,m.end),o.appendSegment(n),p=new Ru(f,s.end),d=m.pointAt(1/3).rotate(m.end,l),h=p.pointAt(1/3).rotate(s.end,-l),n=ap.createSegment("C",d,h,s.end),o.appendSegment(n)}else if("gap"===r)n=ap.createSegment("M",s.end),o.appendSegment(n);else if("cubic"===r){l=s.start.theta(s.end);var g=.6*t,v=1.35*t;c=s.start.difference(s.end),(u=Number(c.x<0||0===c.x&&c.y<0))&&(v*=-1),d=Iu(s.start.x+g,s.start.y+v).rotate(s.start,l),h=Iu(s.end.x-g,s.end.y+v).rotate(s.end,l),n=ap.createSegment("C",d,h,s.end),o.appendSegment(n)}}else{var b=e[a+1];0==i||!b||b.isJump?(n=ap.createSegment("L",s.end),o.appendSegment(n)):function(e,t,r,i,n){var o,s=r.distance(i)/2,a=r.distance(n)/2,l=-Math.min(e,s),c=-Math.min(e,a),d=r.clone().move(i,l).round(),h=r.clone().move(n,c).round(),u=new Iu(cx*d.x+dx*r.x,dx*r.y+cx*d.y),p=new Iu(cx*h.x+dx*r.x,dx*r.y+cx*h.y);o=ap.createSegment("L",d),t.appendSegment(o),o=ap.createSegment("C",u,p,h),t.appendSegment(o)}(i,o,s.end,s.start,b.end)}})),o}const mx=10,gx={AUTO:"auto",HORIZONTAL:"horizontal",VERTICAL:"vertical",CLOSEST_POINT:"closest-point",OUTWARDS:"outwards"},vx={UP:"up",DOWN:"down",LEFT:"left",RIGHT:"right",AUTO:"auto",CLOSEST_POINT:"closest-point",OUTWARDS:"outwards"},bx=function(e,t,r=[],i={},n){const o=Boolean(i.raw),{direction:s=gx.AUTO,precision:a=3}=i,l={coeff:i.distanceCoefficient||.6,angleTangentCoefficient:i.angleTangentCoefficient||80,tau:i.tension||.5,sourceTangent:i.sourceTangent?new Iu(i.sourceTangent):null,targetTangent:i.targetTangent?new Iu(i.targetTangent):null,rotate:Boolean(i.rotate)};"string"==typeof i.sourceDirection?l.sourceDirection=i.sourceDirection:"number"==typeof i.sourceDirection?l.sourceDirection=new Iu(1,0).rotate(null,i.sourceDirection):l.sourceDirection=i.sourceDirection?new Iu(i.sourceDirection).normalize():null,"string"==typeof i.targetDirection?l.targetDirection=i.targetDirection:"number"==typeof i.targetDirection?l.targetDirection=new Iu(1,0).rotate(null,i.targetDirection):l.targetDirection=i.targetDirection?new Iu(i.targetDirection).normalize():null;const c=[e,...r,t].map((e=>new Iu(e)));let d,h;if(l.sourceTangent)d=l.sourceTangent;else{const e=function(e,t,r,i){if(i.sourceDirection)switch(i.sourceDirection){case vx.UP:return new Iu(0,-1);case vx.DOWN:return new Iu(0,1);case vx.LEFT:return new Iu(-1,0);case vx.RIGHT:return new Iu(1,0);case vx.AUTO:return yx(e,t,i);case vx.CLOSEST_POINT:return wx(e,t);case vx.OUTWARDS:return kx(e,t);default:return i.sourceDirection}switch(r){case gx.HORIZONTAL:return function(e,t,r){const{sourceBBox:i}=e;let n,o,s;if(e.sourceView)if(o=e.sourceView.model.angle(),r.rotate&&o){const r=e.sourceView.getNodeUnrotatedBBox(e.sourceView.el),s=t[0].clone();s.rotate(i.center(),o),n=r.sideNearestToPoint(s)}else n=i.sideNearestToPoint(t[0]);else n=i.x>t[1].x?"right":"left";if("left"===n)s=new Iu(-1,0);else s=new Iu(1,0);r.rotate&&o&&s.rotate(null,-o);return s}(e,t,i);case gx.VERTICAL:return function(e,t,r){const{sourceBBox:i}=e;let n,o,s;if(e.sourceView)if(o=e.sourceView.model.angle(),r.rotate&&o){const r=e.sourceView.getNodeUnrotatedBBox(e.sourceView.el),s=t[0].clone();s.rotate(i.center(),o),n=r.sideNearestToPoint(s)}else n=i.sideNearestToPoint(t[0]);else n=i.y>t[1].y?"bottom":"top";if("top"===n)s=new Iu(0,-1);else s=new Iu(0,1);r.rotate&&o&&s.rotate(null,-o);return s}(e,t,i);case gx.CLOSEST_POINT:return wx(e,t);case gx.OUTWARDS:return kx(e,t);case gx.AUTO:default:return yx(e,t,i)}}(n,c,s,l),t=c[0].distance(c[1])*l.coeff,r=Ax(e,c[1].difference(c[0]).normalize());if(r>Math.PI/4){const i=t+(r-Math.PI/4)*l.angleTangentCoefficient;d=e.clone().scale(i,i)}else d=e.clone().scale(t,t)}if(l.targetTangent)h=l.targetTangent;else{const e=function(e,t,r,i){if(i.targetDirection)switch(i.targetDirection){case vx.UP:return new Iu(0,-1);case vx.DOWN:return new Iu(0,1);case vx.LEFT:return new Iu(-1,0);case vx.RIGHT:return new Iu(1,0);case vx.AUTO:return xx(e,t,i);case vx.CLOSEST_POINT:return _x(e,t);case vx.OUTWARDS:return Cx(e,t);default:return i.targetDirection}switch(r){case gx.HORIZONTAL:return function(e,t,r){const{targetBBox:i}=e;let n,o,s;if(e.targetView)if(o=e.targetView.model.angle(),r.rotate&&o){const r=e.targetView.getNodeUnrotatedBBox(e.targetView.el),s=t[t.length-1].clone();s.rotate(i.center(),o),n=r.sideNearestToPoint(s)}else n=i.sideNearestToPoint(t[t.length-1]);else n=i.x>t[t.length-2].x?"left":"right";if("left"===n)s=new Iu(-1,0);else s=new Iu(1,0);r.rotate&&o&&s.rotate(null,-o);return s}(e,t,i);case gx.VERTICAL:return function(e,t,r){const{targetBBox:i}=e;let n,o,s;if(e.targetView)if(o=e.targetView.model.angle(),r.rotate&&o){const r=e.targetView.getNodeUnrotatedBBox(e.targetView.el),s=t[t.length-1].clone();s.rotate(i.center(),o),n=r.sideNearestToPoint(s)}else n=i.sideNearestToPoint(t[t.length-1]);else n=i.y>t[t.length-2].y?"top":"bottom";if("top"===n)s=new Iu(0,-1);else s=new Iu(0,1);r.rotate&&o&&s.rotate(null,-o);return s}(e,t,i);case gx.CLOSEST_POINT:return _x(e,t);case gx.OUTWARDS:return Cx(e,t);case gx.AUTO:default:return xx(e,t,i)}}(n,c,s,l),t=c.length-1,r=c[t-1].distance(c[t])*l.coeff,i=Ax(e,c[t-1].difference(c[t]).normalize());if(i>Math.PI/4){const t=r+(i-Math.PI/4)*l.angleTangentCoefficient;h=e.clone().scale(t,t)}else h=e.clone().scale(r,r)}const u=function(e,t,r,i){const{tau:n,coeff:o}=i,s=[],a=[],l=[],c=e.length-1;for(let t=0;t<c;t++)s[t]=e[t].distance(e[t+1]);a[0]=t,a[c]=r;for(let t=1;t<c;t++){let r,i;r=1===t?e[t-1].clone().offset(a[t-1].x,a[t-1].y):e[t-1].clone(),i=t===c-1?e[t+1].clone().offset(a[t+1].x,a[t+1].y):e[t+1].clone();const n=r.difference(e[t]).normalize(),l=i.difference(e[t]).normalize(),d=Ax(n,l);let h,u=(Math.PI-d)/2;const p=Px(n,l);let f;f=Px(e[t].difference(e[t+1]),e[t].difference(e[t-1])),p<0&&(u=-u),d<Math.PI/2&&(u<0&&f<0||u>0&&f>0)&&(u-=Math.PI),h=l.clone(),Sx(h,u);const m=h.clone(),g=h.clone(),v=s[t-1]*o,b=s[t]*o;m.scale(v,v),g.scale(b,b),a[t]=[m,g]}for(let t=0;t<c;t++){let r,i;r=0===t?e[t+1].difference(a[t].x/n,a[t].y/n):e[t+1].difference(a[t][1].x/n,a[t][1].y/n),i=t===c-1?e[t].clone().offset(a[t+1].x/n,a[t+1].y/n):e[t].difference(a[t+1][0].x/n,a[t+1][0].y/n),l[t]=[r,e[t],e[t+1],i]}return l}(c,d,h,l),p=u.map((e=>function(e,t){const{tau:r}=t,i=new Iu;i.x=e[1].x+(e[2].x-e[0].x)/(6*r),i.y=e[1].y+(e[2].y-e[0].y)/(6*r);const n=new Iu;return n.x=e[2].x+(e[3].x-e[1].x)/(6*r),n.y=e[2].y+(e[3].y-e[1].y)/(6*r),new op(e[1],i,n,e[2])}(e,l))),f=new ap(p).round(a);return o?f:f.serialize()};function yx(e,t,r){const{sourceBBox:i}=e;let n,o,s;if(e.sourceView)if(o=e.sourceView.model.angle(),r.rotate&&o){const r=e.sourceView.getNodeUnrotatedBBox(e.sourceView.el),s=t[0].clone();s.rotate(i.center(),o),n=r.sideNearestToPoint(s)}else n=i.sideNearestToPoint(t[0]);else n=i.sideNearestToPoint(t[1]);switch(n){case"top":s=new Iu(0,-1);break;case"bottom":s=new Iu(0,1);break;case"right":s=new Iu(1,0);break;case"left":s=new Iu(-1,0)}return r.rotate&&o&&s.rotate(null,-o),s}function xx(e,t,r){const{targetBBox:i}=e;let n,o,s;if(e.targetView)if(o=e.targetView.model.angle(),r.rotate&&o){const r=e.targetView.getNodeUnrotatedBBox(e.targetView.el),s=t[t.length-1].clone();s.rotate(i.center(),o),n=r.sideNearestToPoint(s)}else n=i.sideNearestToPoint(t[t.length-1]);else n=i.sideNearestToPoint(t[t.length-2]);switch(n){case"top":s=new Iu(0,-1);break;case"bottom":s=new Iu(0,1);break;case"right":s=new Iu(1,0);break;case"left":s=new Iu(-1,0)}return r.rotate&&o&&s.rotate(null,-o),s}function wx(e,t,r){return t[1].difference(t[0]).normalize()}function _x(e,t,r){const i=t.length-1;return t[i-1].difference(t[i]).normalize()}function kx(e,t,r){const{sourceBBox:i}=e,n=i.center();return t[0].difference(n).normalize()}function Cx(e,t,r){const{targetBBox:i}=e,n=i.center();return t[t.length-1].difference(n).normalize()}function Sx(e,t){const r=Math.cos(t),i=Math.sin(t),n=r*e.x-i*e.y,o=i*e.x+r*e.y;e.x=n,e.y=o}function Ax(e,t){let r=e.dot(t)/(e.magnitude()*t.magnitude());return r<-1&&(r=-1),r>1&&(r=1),Math.acos(r)}function Px(e,t){return e.x*t.y-e.y*t.x}bx.Directions=gx,bx.TangentDirections=vx;var Tx=Object.freeze({__proto__:null,straight:sx,jumpover:function(e,t,r,i){!function(e){var t=e.paper,r=t._jumpOverUpdateList;if(null==r){r=t._jumpOverUpdateList=[];var i=t.model;i.on("batch:stop",(function(){this.hasActiveBatch()||function(e){for(var t=e._jumpOverUpdateList,r=0;r<t.length;r++){const e=t[r],i=e.getFlag(e.constructor.Flags.CONNECTOR);e.requestUpdate(i)}}(t)})),i.on("reset",(function(){r=t._jumpOverUpdateList=[]}))}r.indexOf(e)<0&&(r.push(e),e.listenToOnce(e.model,"change:connector remove",(function(){r.splice(r.indexOf(e),1)})))}(this);var n=i.raw,o=i.size||5,s=i.jump&&(""+i.jump).toLowerCase(),a=i.radius||0,l=i.ignoreConnectors||lx;-1===ax.indexOf(s)&&(s=ax[0]);var c=this.paper,d=c.model.getLinks();if(1===d.length)return fx(ux(e,t,r),o,s,a);var h=this.model,u=d.indexOf(h),p=c.options.defaultConnector||{},f=d.filter((function(e,t){var r=e.get("connector")||p;return!rv(l).includes(r.name)&&(!(t>u)||"jumpover"!==r.name)})),m=f.map((function(e){return c.findViewByModel(e)})),g=ux(e,t,r),v=m.map((function(e){return null==e?[]:e===this?g:ux(e.sourcePoint,e.targetPoint,e.route)}),this),b=g.reduce((function(e,t){var r=f.reduce((function(e,r,i){if(r!==h){const r=v[i].slice(),n=r.findIndex((e=>function(e,t){const[{x:r,y:i},{x:n,y:o}]=hx(e.start,e.end),[{x:s,y:a},{x:l,y:c}]=hx(t.start,t.end);return r<=l&&s<=n&&i<=c&&a<=o}(t,e)));n>-1&&t.containsPoint(r[n].end)&&r.splice(n+1,1);const o=function(e,t){return rv(t).reduce((function(t,r){var i=e.intersection(r);return i&&t.push(i),t}),[])}(t,r);e.push.apply(e,o)}return e}),[]).sort((function(e,r){return px(t.start,e)-px(t.start,r)}));return r.length>0?e.push.apply(e,function(e,t,r){return t.reduce((function(i,n,o){if(!0===n.skip)return i;var s=i.pop()||e,a=Lu(n).move(s.start,-r),l=Lu(n).move(s.start,+r),c=t[o+1];if(null!=c){var d=l.distance(c);d<=r&&(l=c.move(s.start,d),c.skip=!0)}else if(a.distance(s.end)<2*r+1)return i.push(s),i;if(l.distance(s.start)<2*r+1)return i.push(s),i;var h=$u(a,l);return h.isJump=!0,i.push($u(s.start,a),h,$u(l,s.end)),i}),[])}(t,r,o)):e.push(t),e}),[]),y=fx(b,o,s,a);return n?y:y.serialize()},normal:function(e,t,r=[],i={}){const{raw:n}=i;return sx(e,t,r,{cornerType:"point",raw:n})},rounded:function(e,t,r=[],i={}){const{radius:n=mx,raw:o}=i;return sx(e,t,r,{cornerType:"cubic",cornerRadius:n,precision:0,raw:o})},smooth:function(e,t,r,i){var n,o=i&&i.raw;if(r&&0!==r.length){var s=[e].concat(r).concat([t]),a=op.throughPoints(s);n=new ap(a)}else{var l;if(n=new ap,l=ap.createSegment("M",e),n.appendSegment(l),Math.abs(e.x-t.x)>=Math.abs(e.y-t.y)){var c=(e.x+t.x)/2;l=ap.createSegment("C",c,e.y,c,t.y,t.x,t.y),n.appendSegment(l)}else{var d=(e.y+t.y)/2;l=ap.createSegment("C",e.x,d,t.x,d,t.x,t.y),n.appendSegment(l)}}return o?n:n.serialize()},curve:bx}),Ex=function(e){this.cid=gv("view"),this.preinitialize.apply(this,arguments),Vg(this,uv(e,Lx)),this._ensureElement(),this.initialize.apply(this,arguments)},Ix=/^(\S+)\s*(.*)$/,Lx=["model","collection","el","id","attributes","className","tagName","events"];Vg(Ex.prototype,Ab,{tagName:"div",$:function(e){return this.$el.find(e)},preinitialize:function(){},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(e){return this.undelegateEvents(),this._setElement(e),this.delegateEvents(),this},_setElement:function(e){this.$el=e instanceof eb?e:eb(e),this.el=this.$el[0]},delegateEvents:function(e){if(e||(e=dv(this,"events")),!e)return this;for(var t in this.undelegateEvents(),e){var r=e[t];if(ev(r)||(r=this[r]),r){var i=t.match(Ix);this.delegate(i[1],i[2],r.bind(this))}}return this},delegate:function(e,t,r){return this.$el.on(e+".delegateEvents"+this.cid,t,r),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(e,t,r){return this.$el.off(e+".delegateEvents"+this.cid,t,r),this},_createElement:function(e){return document.createElement(e)},_ensureElement:function(){if(this.el)this.setElement(dv(this,"el"));else{var e=Vg({},dv(this,"attributes"));this.id&&(e.id=dv(this,"id")),this.className&&(e.class=dv(this,"className")),this.setElement(this._createElement(dv(this,"tagName"))),this._setAttributes(e)}},_setAttributes:function(e){this.$el.attr(e)}}),Ex.extend=Db;const Ox={},Mx=Ex.extend({options:{},theme:null,themeClassNamePrefix:tb("theme-"),requireSetThemeOverride:!1,defaultTheme:Jv,children:null,childNodes:null,DETACHABLE:!0,UPDATE_PRIORITY:2,FLAG_INSERT:1<<30,FLAG_REMOVE:1<<29,FLAG_INIT:1<<28,constructor:function(e){this.requireSetThemeOverride=e&&!!e.theme,this.options=Vg({},this.options,e),Ex.call(this,e)},initialize:function(){Ox[this.cid]=this,this.setTheme(this.options.theme||this.defaultTheme),this.init()},unmount:function(){this.svgElement?this.vel.remove():this.$el.remove()},isMounted:function(){return null!==this.el.parentNode},renderChildren:function(e){if(e||(e=dv(this,"children")),e){var t=this.svgElement,r=ef.namespace[t?"svg":"xhtml"],i=rb(e,r);(t?this.vel:this.$el).empty().append(i.fragment),this.childNodes=i.selectors}return this},findAttributeNode:function(e,t){let r=t;for(;r&&1===r.nodeType;){if(r.getAttribute(e))return r;if(r===this.el)return null;r=r.parentNode}return null},findAttribute:function(e,t){const r=this.findAttributeNode(e,t);return r&&r.getAttribute(e)},_ensureElement:function(){if(this.el)this.setElement(dv(this,"el"));else{var e=dv(this,"tagName"),t=Vg({},dv(this,"attributes")),r=Vg({},dv(this,"style"));this.id&&(t.id=dv(this,"id")),this.setElement(this._createElement(e)),this._setAttributes(t),this._setStyle(r)}this._ensureElClassName()},_setAttributes:function(e){this.svgElement?this.vel.attr(e):this.$el.attr(e)},_setStyle:function(e){this.$el.css(e)},_createElement:function(e){return this.svgElement?document.createElementNS(ef.namespace.svg,e):document.createElement(e)},_setElement:function(e){this.$el=e instanceof eb?e:eb(e),this.el=this.$el[0],this.svgElement&&(this.vel=ef(this.el))},_ensureElClassName:function(){var e=dv(this,"className");if(e){var t=tb(e);this.svgElement?this.vel.removeClass(e).addClass(t):this.$el.removeClass(e).addClass(t)}},init:function(){},onRender:function(){},confirmUpdate:function(){return 0},setTheme:function(e,t){return t=t||{},this.theme&&this.requireSetThemeOverride&&!t.override||(this.removeThemeClassName(),this.addThemeClassName(e),this.onSetTheme(this.theme,e),this.theme=e),this},addThemeClassName:function(e){if(!(e=e||this.theme))return this;var t=this.themeClassNamePrefix+e;return this.svgElement?this.vel.addClass(t):this.$el.addClass(t),this},removeThemeClassName:function(e){e=e||this.theme;var t=this.themeClassNamePrefix+e;return this.svgElement?this.vel.removeClass(t):this.$el.removeClass(t),this},onSetTheme:function(e,t){},remove:function(){return this.onRemove(),this.undelegateDocumentEvents(),Ox[this.cid]=null,Ex.prototype.remove.apply(this,arguments),this},onRemove:function(){},getEventNamespace:function(){return".joint-event-ns-"+this.cid},delegateElementEvents:function(e,t,r){if(!t)return this;r||(r={});var i=this.getEventNamespace();for(var n in t){var o=t[n];"function"!=typeof o&&(o=this[o]),o&&eb(e).on(n+i,r,o.bind(this))}return this},undelegateElementEvents:function(e){return eb(e).off(this.getEventNamespace()),this},delegateDocumentEvents:function(e,t){return e||(e=dv(this,"documentEvents")),this.delegateElementEvents(document,e,t)},undelegateDocumentEvents:function(){return this.undelegateElementEvents(document)},eventData:function(e,t){if(!e)throw new Error("eventData(): event object required.");var r=e.data,i="__"+this.cid+"__";return void 0===t?r&&r[i]||{}:(r||(r=e.data={}),r[i]||(r[i]={}),Vg(r[i],t),this)},stopPropagation:function(e){return this.eventData(e,{propagationStopped:!0}),this},isPropagationStopped:function(e){return!!this.eventData(e).propagationStopped}},{extend:function(){var e=Array.from(arguments),t=e[0]&&Vg({},e[0])||{},r=e[1]&&Vg({},e[1])||{},i=t.render||this.prototype&&this.prototype.render||null;return t.render=function(){return"function"==typeof i&&i.apply(this,arguments),this.render.__render__===i&&this.onRender(),this},t.render.__render__=i,Ex.extend.call(this,t,r)}});var Rx=function(e,t){t||(t={}),this.preinitialize.apply(this,arguments),t.model&&(this.model=t.model),void 0!==t.comparator&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,Vg({silent:!0},t))},$x={add:!0,remove:!0,merge:!0},Nx={add:!0,remove:!1},Dx=function(e,t,r){r=Math.min(Math.max(r,0),e.length);var i,n=Array(e.length-r),o=t.length;for(i=0;i<n.length;i++)n[i]=e[i+r];for(i=0;i<o;i++)e[i+r]=t[i];for(i=0;i<n.length;i++)e[i+o+r]=n[i]};Vg(Rx.prototype,Ab,{model:Ub,preinitialize:function(){},initialize:function(){},toJSON:function(e){return this.map((function(t){return t.toJSON(e)}))},add:function(e,t){return this.set(e,Vg({merge:!1},t,Nx))},remove:function(e,t){t=Vg({},t);var r=!Array.isArray(e);e=r?[e]:e.slice();var i=this._removeModels(e,t);return!t.silent&&i.length&&(t.changes={added:[],merged:[],removed:i},this.trigger("update",this,t)),r?i[0]:i},set:function(e,t){if(null!=e){t=Vg({},$x,t);var r=!Array.isArray(e);e=r?[e]:e.slice();var i=t.at;null!=i&&(i=+i),i>this.length&&(i=this.length),i<0&&(i+=this.length+1);var n,o,s=[],a=[],l=[],c=[],d={},h=t.add,u=t.merge,p=t.remove,f=!1,m=this.comparator&&null==i&&!1!==t.sort,g=Ug(this.comparator)?this.comparator:null;for(o=0;o<e.length;o++){n=e[o];var v=this.get(n);if(v){if(u&&n!==v){var b=this._isModel(n)?n.attributes:n;v.set(b,t),l.push(v),m&&!f&&(f=v.hasChanged(g))}d[v.cid]||(d[v.cid]=!0,s.push(v)),e[o]=v}else h&&(n=e[o]=this._prepareModel(n,t))&&(a.push(n),this._addReference(n,t),d[n.cid]=!0,s.push(n))}if(p){for(o=0;o<this.length;o++)d[(n=this.models[o]).cid]||c.push(n);c.length&&this._removeModels(c,t)}var y=!1,x=!m&&h&&p;if(s.length&&x?(y=this.length!==s.length||this.models.some((function(e,t){return e!==s[t]})),this.models.length=0,Dx(this.models,s,0),this.length=this.models.length):a.length&&(m&&(f=!0),Dx(this.models,a,null==i?this.length:i),this.length=this.models.length),f&&this.sort({silent:!0}),!t.silent){for(o=0;o<a.length;o++)null!=i&&(t.index=i+o),(n=a[o]).trigger("add",n,this,t);(f||y)&&this.trigger("sort",this,t),(a.length||c.length||l.length)&&(t.changes={added:a,removed:c,merged:l},this.trigger("update",this,t))}return r?e[0]:e}},reset:function(e,t){t=t?Xg(t):{};for(var r=0;r<this.models.length;r++)this._removeReference(this.models[r],t);return t.previousModels=this.models,this._reset(),e=this.add(e,Vg({silent:!0},t)),t.silent||this.trigger("reset",this,t),e},push:function(e,t){return this.add(e,Vg({at:this.length},t))},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e)},unshift:function(e,t){return this.add(e,Vg({at:0},t))},shift:function(e){var t=this.at(0);return this.remove(t,e)},slice:function(){return Array.prototype.slice.apply(this.models,arguments)},get:function(e){if(null!=e)return this._byId[e]||this._byId[this.modelId(this._isModel(e)?e.attributes:e,e.idAttribute)]||e.cid&&this._byId[e.cid]},has:function(e){return null!=this.get(e)},at:function(e){return e<0&&(e+=this.length),this.models[e]},sort:function(e){var t=this.comparator;if(!t)throw new Error("Cannot sort a set without a comparator");e||(e={});var r=t.length;return ev(t)&&(t=t.bind(this)),1===r||Ug(t)?this.models=this.sortBy(t):this.models.sort(t),e.silent||this.trigger("sort",this,e),this},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(e,t){return e[t||this.model.prototype.idAttribute||"id"]},values:function(){return new Bx(this,Fx)},keys:function(){return new Bx(this,Ux)},entries:function(){return new Bx(this,Vx)},each:function(e,t){this.models.forEach(e,t)},filter:function(e,t){return this.models.filter(e,t)},find:function(e,t){return this.models.find(e,t)},findIndex:function(e,t){return this.models.findIndex(e,t)},first:function(){return this.models[0]},includes:function(e){return this.models.includes(e)},last:function(){return this.models[this.models.length-1]},isEmpty:function(){return!this.models.length},map:function(e,t){return this.models.map(e,t)},reduce:function(e,t=this.first()){return this.models.reduce(e,t)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){return this._isModel(e)?(e.collection||(e.collection=this),e):((t=t?Xg(t):{}).collection=this,(r=this.model.prototype?new this.model(e,t):this.model(e,t)).validationError?(this.trigger("invalid",this,r.validationError,t),!1):r);var r},_removeModels:function(e,t){for(var r=[],i=0;i<e.length;i++){var n=this.get(e[i]);if(n){var o=this.models.indexOf(n);this.models.splice(o,1),this.length--,delete this._byId[n.cid];var s=this.modelId(n.attributes,n.idAttribute);null!=s&&delete this._byId[s],t.silent||(t.index=o,n.trigger("remove",n,this,t)),r.push(n),this._removeReference(n,t)}}return e.length>0&&!t.silent&&delete t.index,r},_isModel:function(e){return e instanceof Ub},_addReference:function(e,t){this._byId[e.cid]=e;var r=this.modelId(e.attributes,e.idAttribute);null!=r&&(this._byId[r]=e),e.on("all",this._onModelEvent,this)},_removeReference:function(e,t){delete this._byId[e.cid];var r=this.modelId(e.attributes,e.idAttribute);null!=r&&delete this._byId[r],this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,r,i){if(t){if(("add"===e||"remove"===e)&&r!==this)return;if("changeId"===e){var n=this.modelId(t.previousAttributes(),t.idAttribute),o=this.modelId(t.attributes,t.idAttribute);null!=n&&delete this._byId[n],null!=o&&(this._byId[o]=t)}}this.trigger.apply(this,arguments)}});var zx="function"==typeof Symbol&&Symbol.iterator;zx&&(Rx.prototype[zx]=Rx.prototype.values);var Bx=function(e,t){this._collection=e,this._kind=t,this._index=0},Fx=1,Ux=2,Vx=3;zx&&(Bx.prototype[zx]=function(){return this}),Bx.prototype.next=function(){if(this._collection){if(this._index<this._collection.length){var e,t=this._collection.at(this._index);if(this._index++,this._kind===Fx)e=t;else{var r=this._collection.modelId(t.attributes,t.idAttribute);e=this._kind===Ux?r:[r,t]}return{value:e,done:!1}}this._collection=void 0}return{value:void 0,done:!0}};function jx(e){return e?Array.isArray(e)?e:[e]:[]}!function(e){var t=e[0],r=e[1],i=e[2];zb(t,{sortBy:nv,toArray:rv},r,i)}([Rx,{toArray:1,sortBy:3},"models"]),Rx.extend=Db;const Gx=Mx.extend({tagName:"g",svgElement:!0,className:"highlight",HIGHLIGHT_FLAG:1,UPDATE_PRIORITY:3,DETACHABLE:!1,UPDATABLE:!0,MOUNTABLE:!0,cellView:null,nodeSelector:null,node:null,updateRequested:!1,postponedUpdate:!1,transformGroup:null,detachedTransformGroup:null,requestUpdate(e,t){const{paper:r}=e;this.cellView=e,this.nodeSelector=t,r&&(this.updateRequested=!0,r.requestViewUpdate(this,this.HIGHLIGHT_FLAG,this.UPDATE_PRIORITY))},confirmUpdate(){this.updateRequested=!1;const{cellView:e,nodeSelector:t}=this;return e.isMounted()?(this.update(e,t),this.mount(),this.transform(),0):(this.postponedUpdate=!0,0)},findNode(e,t=null){let r;if("string"==typeof t)r=e.findNode(t);else if(tv(t)){const i=e.model.isLink(),{label:n=null,port:o,selector:s}=t;r=i&&null!==n?e.findLabelNode(n,s):!i&&o?e.findPortNode(o,s):e.findNode(s)}else t&&(r=ef.toNode(t),r instanceof SVGElement||(r=null));return r||null},getNodeMatrix(e,t){const{options:r}=this,{layer:i}=r,{rotatableNode:n}=e,o=e.getNodeMatrix(t);return n?i?n.contains(t)?o:e.getRootRotateMatrix().inverse().multiply(o):e.getNodeRotateMatrix(t).multiply(o):o},mount(){const{MOUNTABLE:e,cellView:t,el:r,options:i,transformGroup:n,detachedTransformGroup:o,postponedUpdate:s,nodeSelector:a}=this;if(!e||n)return;if(s)return this.update(t,a),void this.transform();const{vel:l,paper:c}=t,{layer:d}=i;if(d){let e;o?(e=o,this.detachedTransformGroup=null):e=ef("g").addClass("highlight-transform").append(r),this.transformGroup=e,c.getLayerView(d).insertSortedNode(e.node,i.z)}else r.parentNode&&!r.nextSibling||l.append(r)},unmount(){const{MOUNTABLE:e,transformGroup:t,vel:r}=this;e&&(t?(this.transformGroup=null,this.detachedTransformGroup=t,t.remove()):r.remove())},transform(){const{transformGroup:e,cellView:t,updateRequested:r}=this;if(!e||t.model.isLink()||r)return;const i=t.getRootTranslateMatrix(),n=t.getRootRotateMatrix(),o=i.multiply(n);e.attr("transform",ef.matrixToTransformString(o))},update(){const{node:e,cellView:t,nodeSelector:r,updateRequested:i,id:n}=this;if(i)return;this.postponedUpdate=!1;const o=this.node=this.findNode(t,r);e&&this.unhighlight(t,e),o?(this.highlight(t,o),this.mount()):(this.unmount(),t.notify("cell:highlight:invalid",n,this))},onRemove(){const{node:e,cellView:t,id:r,constructor:i}=this;e&&this.unhighlight(t,e),this.unmount(),i._removeRef(t,r)},highlight(e,t){},unhighlight(e,t){},listenToUpdateAttributes(e){const t=dv(this,"UPDATE_ATTRIBUTES");Array.isArray(t)&&0!==t.length&&this.listenTo(e.model,"change",this.onCellAttributeChange)},onCellAttributeChange(){const{cellView:e}=this;if(!e)return;const{model:t,paper:r}=e;dv(this,"UPDATE_ATTRIBUTES").some((e=>t.hasChanged(e)))&&r.requestViewUpdate(this,this.HIGHLIGHT_FLAG,this.UPDATE_PRIORITY)}},{_views:{},highlight:function(e,t,r){const i=this.uniqueId(t,r);this.add(e,t,i,r)},unhighlight:function(e,t,r){const i=this.uniqueId(t,r);this.remove(e,i)},get(e,t=null){const{cid:r}=e,{_views:i}=this,n=i[r];if(null===t){const e=[];if(!n)return e;for(let t in n){const r=n[t];r instanceof this&&e.push(r)}return e}if(!n)return null;if(t in n){const e=n[t];if(e instanceof this)return e}return null},add(e,t,r,i={}){if(!r)throw new Error("dia.HighlighterView: An ID required.");const n=Gx.get(e,r);n&&n.remove();const o=new this(i);return o.id=r,this._addRef(e,r,o),o.requestUpdate(e,t),o.listenToUpdateAttributes(e),o},_addRef(e,t,r){const{cid:i}=e,{_views:n}=this;let o=n[i];o||(o=n[i]={}),o[t]=r},_removeRef(e,t){const{cid:r}=e,{_views:i}=this,n=i[r];if(n){t&&delete n[t];for(let e in n)return;delete i[r]}},remove(e,t=null){jx(this.get(e,t)).forEach((e=>{e.remove()}))},removeAll(e,t=null){const{_views:r}=this;for(let i in r)for(let n in r[i]){const o=r[i][n];o.cellView.paper===e&&o instanceof this&&(null===t||n===t)&&o.remove()}},update(e,t=null,r=!1){jx(this.get(e,t)).forEach((e=>{(r||e.UPDATABLE)&&e.update()}))},transform(e,t=null){jx(this.get(e,t)).forEach((e=>{e.UPDATABLE&&e.transform()}))},unmount(e,t=null){jx(this.get(e,t)).forEach((e=>e.unmount()))},mount(e,t=null){jx(this.get(e,t)).forEach((e=>e.mount()))},uniqueId:(e,t="")=>ef.ensureId(e)+JSON.stringify(t)}),Hx=Gx.extend({tagName:"path",className:"highlight-stroke",attributes:{"pointer-events":"none",fill:"none"},options:{padding:3,rx:0,ry:0,useFirstSubpath:!1,attrs:{"stroke-width":3,stroke:"#FEB663"}},getPathData(e,t){const{options:r}=this,{useFirstSubpath:i}=r;let n;try{const e=ef(t);if(n=e.convertToPathData().trim(),"PATH"===e.tagName()&&i){const e=n.search(/.M/i)+1;e>0&&(n=n.substr(0,e))}}catch(i){const o=e.getNodeBoundingRect(t);n=ef.rectToPath(Vg({},r,o.toJSON()))}return n},highlightConnection(e){this.vel.attr("d",e.getSerializedConnection())},highlightNode(e,t){const{vel:r,options:i}=this,{padding:n,layer:o}=i;let s=this.getNodeMatrix(e,t);if(n){o||t!==e.el||r.remove();let i=e.getNodeBoundingRect(t);const a=i.x+i.width/2,l=i.y+i.height/2;i=ef.transformRect(i,s);const c=Math.max(i.width,1),d=Math.max(i.height,1),h=(c+n)/c,u=(d+n)/d,p=ef.createSVGMatrix({a:h,b:0,c:0,d:u,e:a-h*a,f:l-u*l});s=s.multiply(p)}r.attr({d:this.getPathData(e,t),transform:ef.matrixToTransformString(s)})},highlight(e,t){const{vel:r,options:i}=this;r.attr(i.attrs),i.nonScalingStroke&&r.attr("vector-effect","non-scaling-stroke"),e.isNodeConnection(t)?this.highlightConnection(e):this.highlightNode(e,t)}}),Wx=20;const qx=Gx.extend({tagName:"rect",className:"highlight-mask",attributes:{"pointer-events":"none"},options:{padding:3,maskClip:Wx,deep:!1,attrs:{stroke:"#FEB663","stroke-width":3,"stroke-linecap":"butt","stroke-linejoin":"miter"}},VISIBLE:"white",INVISIBLE:"black",MASK_ROOT_ATTRIBUTE_BLACKLIST:["marker-start","marker-end","marker-mid","transform","stroke-dasharray","class"],MASK_CHILD_ATTRIBUTE_BLACKLIST:["stroke","fill","stroke-width","stroke-opacity","stroke-dasharray","fill-opacity","marker-start","marker-end","marker-mid","class"],MASK_REPLACE_TAGS:["FOREIGNOBJECT","IMAGE","USE","TEXT","TSPAN","TEXTPATH"],MASK_REMOVE_TAGS:["TEXT","TSPAN","TEXTPATH"],transformMaskChild(e,t){const{MASK_CHILD_ATTRIBUTE_BLACKLIST:r,MASK_REPLACE_TAGS:i,MASK_REMOVE_TAGS:n}=this,o=t.tagName();if(!ef.isSVGGraphicsElement(t)||n.includes(o))return t.remove(),!1;if(i.includes(o)){const r=e.vel.findOne(`#${t.id}`);if(r){const{node:i}=r;let n=e.getNodeBoundingRect(i);e.model.isElement()&&(n=ef.transformRect(n,e.getNodeMatrix(i)));const o=ef("rect",n.toJSON()),{x:s,y:a}=n.center(),{angle:l,cx:c=s,cy:d=a}=r.rotate();l&&o.rotate(l,c,d),t.parent().append(o)}return t.remove(),!1}return r.forEach((e=>{"fill"===e&&"none"===t.attr("fill")||t.removeAttr(e)})),!0},transformMaskRoot(e,t){const{MASK_ROOT_ATTRIBUTE_BLACKLIST:r}=this;r.forEach((e=>{t.removeAttr(e)}))},getMaskShape(e,t){const{options:r,MASK_REPLACE_TAGS:i}=this,{deep:n}=r,o=t.tagName();let s;if("G"===o){if(!n)return null;s=t.clone(),function(e,t){const r=e.children();for(;r.length>0;){const e=r.shift();t(e)&&r.push(...e.children())}}(s,(t=>this.transformMaskChild(e,t)))}else{if(i.includes(o))return null;s=t.clone()}return this.transformMaskRoot(e,s),s},getMaskId(){return`highlight-mask-${this.cid}`},getMask(e,t){const{VISIBLE:r,INVISIBLE:i,options:n}=this,{padding:o,attrs:s}=n,a=parseFloat(ef("g").attr(s).attr("stroke-width")),l="none"!==t.attr("fill");let c=parseFloat(t.attr("stroke-width"));isNaN(c)&&(c=1);const d=c+2*o,h=d+2*a;let u=this.getMaskShape(e,t);if(!u){const r=e.getNodeBoundingRect(t.node);r.inflate(r.width?0:.5,r.height?0:.5),u=ef("rect",r.toJSON())}return u.attr(s),ef("mask",{id:this.getMaskId()}).append([u.clone().attr({fill:l?r:"none",stroke:r,"stroke-width":h}),u.clone().attr({fill:l?i:"none",stroke:i,"stroke-width":d})])},removeMask(e){const t=e.svg.getElementById(this.getMaskId());t&&e.defs.removeChild(t)},addMask(e,t){e.defs.appendChild(t.node)},highlight(e,t){const{options:r,vel:i}=this,{padding:n,attrs:o,maskClip:s=Wx,layer:a}=r,l="stroke"in o?o.stroke:"#000000";a||t!==e.el||i.remove();const c=e.getNodeBoundingRect(t).inflate(n+s),d=this.getNodeMatrix(e,t),h=this.getMask(e,ef(t));this.addMask(e.paper,h),i.attr(c.toJSON()),i.attr({transform:ef.matrixToTransformString(d),mask:`url(#${h.id})`,fill:l})},unhighlight(e){this.removeMask(e.paper)}}),Yx=Gx.extend({UPDATABLE:!1,MOUNTABLE:!1,highlight:function(e,t){const{alphaValue:r=.3}=this.options;t.style.opacity=r},unhighlight:function(e,t){t.style.opacity=""}}),Jx=tb("highlighted"),Xx=Gx.extend({UPDATABLE:!1,MOUNTABLE:!1,options:{className:Jx},highlight:function(e,t){ef(t).addClass(this.options.className)},unhighlight:function(e,t){ef(t).removeClass(this.options.className)}},{className:Jx}),Zx={ROW:"row",COLUMN:"column"},Qx=Gx.extend({tagName:"g",MOUNTABLE:!0,UPDATE_ATTRIBUTES:function(){return[this.options.attribute]},_prevItems:null,highlight(e,t){const r=e.model,{attribute:i,size:n=20,gap:o=5,direction:s=Zx.ROW}=this.options;if(!i)throw new Error("List: attribute is required");const a="number"==typeof n?{width:n,height:n}:n,l=s===Zx.ROW,c=l?a.width:a.height;let d=r.get(i);Array.isArray(d)||(d=[]);const h=this._prevItems||[],u=d.map(((e,t)=>Kg(h[t],d[t])));if(h.length!==d.length||u.some((e=>!e))){const e=this.vel.children(),t=d.map(((t,r)=>{const n=r in e?e[r].node:null;if(u[r])return n;const s=this.createListItem(t,a,n);if(!s)return null;if(!(s instanceof SVGElement))throw new Error("List: item must be an SVGElement");s.dataset.index=r,s.dataset.attribute=i;const d=r*(c+o);return s.setAttribute("transform",l?`translate(${d}, 0)`:`translate(0, ${d})`),s}));this.vel.empty().append(t),this._prevItems=d}const p=d.length,f=0===p?0:p*c+(p-1)*o,m=l?{width:f,height:a.height}:{width:a.width,height:f};this.position(r,m)},position(e,t){const{vel:r,options:i}=this,{margin:n=5,position:o="top-left"}=i,{width:s,height:a}=e.size(),{left:l,right:c,top:d,bottom:h}=yb(n),u=new Yu(l,d,s-(l+c),a-(d+h));let{x:p,y:f}=Ry(u,o);switch(o){case My.CENTER:case My.TOP:case My.BOTTOM:p-=t.width/2;break;case My.RIGHT:case My.BOTTOM_RIGHT:case My.TOP_RIGHT:p-=t.width}switch(o){case My.CENTER:case My.RIGHT:case My.LEFT:f-=t.height/2;break;case My.BOTTOM:case My.BOTTOM_RIGHT:case My.BOTTOM_LEFT:f-=t.height}r.attr("transform",`translate(${p}, ${f})`)}},{Directions:Zx,Positions:My});var Kx=Object.freeze({__proto__:null,stroke:Hx,mask:qx,opacity:Yx,addClass:Xx,list:Qx});function ew(e,t,r){if(tv(r)){const{x:i,y:n}=r;if(isFinite(n)){const r=new Ru(t,e),{start:i,end:o}=r.parallel(n);t=i,e=o}r=i}if(!isFinite(r))return e;var i=e.distance(t);return 0===r&&i>0?e:e.move(t,-Math.min(r,i-1))}function tw(e){var t=e.getAttribute("stroke-width");return null===t?0:parseFloat(t)||0}function rw(e,t,r,i){var n=t.getNodeBBox(r);i.stroke&&n.inflate(tw(r)/2);var o=e.intersect(n);return ew(o?e.start.chooseClosest(o):e.end,e.start,i.offset)}var iw="segmentSubdivisons",nw="shapeBBox";const ow=function(e,t,r,i){let{offset:n,alignOffset:o,align:s}=i;return s&&function(e,t,r=0){let i,n,o,s;const{start:a,end:l}=e;switch(t){case"left":i="x",n=l,o=a,s=-1;break;case"right":i="x",n=a,o=l,s=1;break;case"top":i="y",n=l,o=a,s=-1;break;case"bottom":i="y",n=a,o=l,s=1;break;default:return}a[i]<l[i]?n[i]=o[i]:o[i]=n[i],isFinite(r)&&(n[i]+=s*r,o[i]+=s*r)}(e,s,o),ew(e.end,e.start,n)},sw=rw,aw=function(e,t,r,i){var n=t.model.angle();if(0===n)return rw(e,t,r,i);var o=t.getNodeUnrotatedBBox(r);i.stroke&&o.inflate(tw(r)/2);var s=o.center(),a=e.clone().rotate(s,n),l=a.setLength(1e6).intersect(o);return ew(l?a.start.chooseClosest(l).rotate(s,-n):e.end,e.start,i.offset)},lw=function(e,t,r,i){var n,o,s=i.selector,a=e.end;if(n="string"==typeof s?t.findNode(s):!1===s?r:Array.isArray(s)?nb(r,s):function(e){if(!e)return null;var t=e;do{var r=t.tagName;if("string"!=typeof r)return null;if("G"===(r=r.toUpperCase()))t=t.firstElementChild;else{if("TITLE"!==r)break;t=t.nextElementSibling}}while(t);return t}(r),!ef.isSVGGraphicsElement(n)){if(n===r||!ef.isSVGGraphicsElement(r))return a;n=r}var l,c=t.getNodeShape(n),d=t.getNodeMatrix(n),h=t.getRootTranslateMatrix(),u=t.getRootRotateMatrix(),p=h.multiply(u).multiply(d),f=p.inverse(),m=ef.transformLine(e,f),g=m.start.clone(),v=t.getNodeData(n);if(!1===i.insideout&&(v[nw]||(v[nw]=c.bbox()),v[nw].containsPoint(g)))return a;if(c instanceof ap){var b=i.precision||2;v[iw]||(v[iw]=c.getSegmentSubdivisions({precision:b})),l={precision:b,segmentSubdivisions:v[iw]}}!0===i.extrapolate&&m.setLength(1e6),(o=m.intersect(c,l))?ef.isArray(o)&&(o=g.chooseClosest(o)):!0===i.sticky&&(o=c instanceof Yu?c.pointNearestToPoint(g):c instanceof Bu?c.intersectionWithLineFromCenterToPoint(g):c.closestPoint(g,l));var y=o?ef.transformPoint(o,p):a,x=i.offset||0;return i.stroke&&(x+=tw(n)/2),ew(y,e.start,x)};var cw=Object.freeze({__proto__:null,anchor:ow,bbox:sw,rectangle:aw,boundary:lw});var dw={N:"S",S:"N",E:"W",W:"E"},hw={N:-Math.PI/2*3,S:-Math.PI/2,E:0,W:Math.PI};function uw(e,t,r){var i=new Iu(e.x,t.y);return r.containsPoint(i)&&(i=new Iu(t.x,e.y)),i}function pw(e,t){return e["W"===t||"E"===t?"width":"height"]}function fw(e,t){return e.x===t.x?e.y>t.y?"N":"S":e.y===t.y?e.x>t.x?"W":"E":null}function mw(e){return new Yu(e.x,e.y,0,0)}function gw(e){var t=yb(e.padding||e.elementPadding||20);return{x:-t.left,y:-t.top,width:t.left+t.right,height:t.top+t.bottom}}function vw(e,t){return e.sourceBBox.clone().moveAndExpand(gw(t))}function bw(e,t){return e.targetBBox.clone().moveAndExpand(gw(t))}function yw(e,t,r){var i=new Iu(e.x,t.y),n=new Iu(t.x,e.y),o=fw(e,i),s=fw(e,n),a=dw[r],l=o===r||o!==a&&(s===a||s!==r)?i:n;return{points:[l],direction:fw(l,t)}}function xw(e,t,r){var i=uw(e,t,r);return{points:[i],direction:fw(i,t)}}function ww(e,t,r,i){var n,o={},s=[new Iu(e.x,t.y),new Iu(t.x,e.y)],a=s.filter((function(e){return!r.containsPoint(e)})),l=a.filter((function(t){return fw(t,e)!==i}));if(l.length>0)n=(n=l.filter((function(t){return fw(e,t)===i})).pop())||l[0],o.points=[n],o.direction=fw(n,t);else{n=av(s,a)[0];var c=new Iu(t).move(n,-pw(r,i)/2),d=uw(c,e,r);o.points=[d,c],o.direction=fw(c,t)}return o}function _w(e,t,r,i){var n=xw(t,e,i),o=n.points[0];if(r.containsPoint(o)){var s=(n=xw(e,t,r)).points[0];if(i.containsPoint(s)){var a=new Iu(e).move(s,-pw(r,fw(e,s))/2),l=new Iu(t).move(o,-pw(i,fw(t,o))/2),c=new Ru(a,l).midpoint(),d=xw(e,c,r),h=yw(c,t,d.direction);n.points=[d.points[0],h.points[0]],n.direction=h.direction}}return n}function kw(e,t,r,i,n){var o,s,a,l={},c=r.union(i).inflate(1),d=c.center().distance(t)>c.center().distance(e),h=d?t:e,u=d?e:t;return n?(o=Iu.fromPolar(c.width+c.height,hw[n],h),o=c.pointNearestToPoint(o).move(o,-1)):o=c.pointNearestToPoint(h).move(h,1),s=uw(o,u,c),o.round().equals(s.round())?(s=Iu.fromPolar(c.width+c.height,hu(o.theta(h))+Math.PI/2,u),a=uw(o,s=c.pointNearestToPoint(s).move(u,1).round(),c),l.points=d?[s,a,o]:[o,a,s]):l.points=d?[s,o]:[o,s],l.direction=fw(d?o:s,t),l}function Cw(e,t,r){var i,n=vw(r,t),o=bw(r,t),s=function(e,t){return e.sourceAnchor?e.sourceAnchor:vw(e,t).center()}(r,t),a=function(e,t){return e.targetAnchor?e.targetAnchor:bw(e,t).center()}(r,t);n=n.union(mw(s)),o=o.union(mw(a)),(e=rv(e).map(Iu)).unshift(s),e.push(a);for(var l=[],c=0,d=e.length-1;c<d;c++){var h=null,u=e[c],p=e[c+1],f=!!fw(u,p);if(0===c)c+1===d?n.intersect(o.clone().inflate(1))?h=kw(u,p,n,o):f||(h=_w(u,p,n,o)):n.containsPoint(p)?h=kw(u,p,n,mw(p).moveAndExpand(gw(t))):f||(h=xw(u,p,n));else if(c+1===d){var m=f&&fw(p,u)===i;o.containsPoint(u)||m?h=kw(u,p,mw(u).moveAndExpand(gw(t)),o,i):f||(h=ww(u,p,o,i))}else f||(h=yw(u,p,i));h?(Array.prototype.push.apply(l,h.points),i=h.direction):i=fw(u,p),c+1<d&&l.push(p)}return l}var Sw={step:10,maximumLoops:2e3,precision:1,maxAllowedDirectionChange:90,perpendicular:!0,excludeEnds:[],excludeTypes:[],startDirections:["top","right","bottom","left"],endDirections:["top","right","bottom","left"],directionMap:{top:{x:0,y:-1},right:{x:1,y:0},bottom:{x:0,y:1},left:{x:-1,y:0}},cost:function(){return this.step},directions:function(){var e=this.step,t=this.cost();return[{offsetX:e,offsetY:0,cost:t},{offsetX:-e,offsetY:0,cost:t},{offsetX:0,offsetY:e,cost:t},{offsetX:0,offsetY:-e,cost:t}]},penalties:function(){return{0:0,45:this.step/2,90:this.step/2}},paddingBox:function(){var e=this.step;return{x:-e,y:-e,width:2*e,height:2*e}},isPointObstacle:null,fallbackRouter:function(e,t,r){if(!ev(Cw))throw new Error("Manhattan requires the orthogonal router as default fallback.");return Cw(e,Vg({},Sw,t),r)},fallbackRoute:function(e,t,r){return null},draggingRoute:null};function Aw(e){this.map={},this.options=e,this.mapGridSize=100}function Pw(){this.items=[],this.hash={},this.values={},this.OPEN=1,this.CLOSE=2}function Tw(e,t){return t&&t.paddingBox?e.sourceBBox.clone().moveAndExpand(t.paddingBox):e.sourceBBox.clone()}function Ew(e,t){return t&&t.paddingBox?e.targetBBox.clone().moveAndExpand(t.paddingBox):e.targetBBox.clone()}function Iw(e,t){return e.sourceAnchor?e.sourceAnchor:Tw(e,t).center()}function Lw(e,t,r,i,n){var o=360/r,s=e.theta(function(e,t,r,i){var n=i.step,o=t.x-e.x,s=t.y-e.y,a=o/r.x,l=s/r.y,c=a*n,d=l*n;return new Iu(e.x+c,e.y+d)}(e,t,i,n)),a=lu(s+o/2);return o*Math.floor(a/o)}function Ow(e,t){var r=Math.abs(e-t);return r>180?360-r:r}function Mw(e,t){if(!e)return t;var r=Math.abs(e),i=Math.round(r/t);return i?t+(r-i*t)/i:r}function Rw(e,t){return e.round(t)}function $w(e,t,r){return Rw(function(e,t){var r=t.source,i=cu(e.x-r.x,t.x)+r.x,n=cu(e.y-r.y,t.y)+r.y;return new Iu(i,n)}(e.clone(),t),r)}function Nw(e){return e.clone().toString()}function Dw(e){return new Iu(0===e.x?0:Math.abs(e.x)/e.x,0===e.y?0:Math.abs(e.y)/e.y)}function zw(e,t,r,i,n,o,s){for(var a,l=[],c=Dw(n.difference(r)),d=Nw(r),h=e[d];h;){var u=Dw((a=t[d]).difference(h));u.equals(c)||(l.unshift(a),c=u),h=e[d=Nw(h)]}var p=t[d];return Dw(p.difference(i)).equals(c)||l.unshift(p),l}function Bw(e,t){for(var r=1/0,i=0,n=t.length;i<n;i++){var o=e.manhattanDistance(t[i]);o<r&&(r=o)}return r}function Fw(e,t,r,i,n){var o=n.precision,s=n.directionMap,a=e.difference(t.center()),l=Bg(s)?Object.keys(s):[],c=rv(r),d=l.reduce((function(r,n){if(c.includes(n)){for(var l,d=s[n],h=new Iu(e.x+d.x*(Math.abs(a.x)+t.width),e.y+d.y*(Math.abs(a.y)+t.height)),u=new Ru(e,h).intersect(t)||[],p=u.length,f=null,m=0;m<p;m++){var g=u[m],v=e.squaredDistance(g);(void 0===l||v>l)&&(l=v,f=g)}if(f){var b=$w(f,i,o);t.containsPoint(b)&&(b=$w(b.offset(d.x*i.x,d.y*i.y),i,o)),r.push(b)}}return r}),[]);return t.containsPoint(e)||d.push($w(e,i,o)),d}function Uw(e,t,r,i){var n,o,s=i.precision;n=Rw(e instanceof Yu?Iw(this,i).clone():e.clone(),s),o=Rw(t instanceof Yu?function(e,t){return e.targetAnchor?e.targetAnchor:Ew(e,t).center()}(this,i).clone():t.clone(),s);var a,l,c,d,h,u,p,f=(a=i.step,c=o,{source:(l=n).clone(),x:Mw(c.x-l.x,a),y:Mw(c.y-l.y,a)});if(u=e instanceof Yu?Fw(d=n,e,i.startDirections,f,i):[d=n],t instanceof Yu?(h=o,p=Fw(o,t,i.endDirections,f,i)):p=[h=o],u=u.filter((e=>!r(e))),p=p.filter((e=>!r(e))),u.length>0&&p.length>0){for(var m=new Pw,g={},v={},b={},y=0,x=u.length;y<x;y++){var w=u[y],_=Nw(w);m.add(_,Bw(w,p)),g[_]=w,b[_]=0}var k,C,S=i.previousDirectionAngle,A=void 0===S,P=i.directions;!function(e,t,r){var i=r.step;rv(r.directions).forEach((function(e){e.gridOffsetX=e.offsetX/i*t.x,e.gridOffsetY=e.offsetY/i*t.y}))}(0,f,i);for(var T=P.length,E=rv(p).reduce((function(e,t){var r=Nw(t);return e.push(r),e}),[]),I=i.maximumLoops;!m.isEmpty()&&I>0;){var L,O=m.pop(),M=g[O],R=v[O],$=b[O],N=void 0===R,D=M.equals(d);L=N?A?D?null:Lw(d,M,T,f,i):S:Lw(R,M,T,f,i);var z=u.length===p.length;if(z)for(var B=0;B<u.length;B++)if(!u[B].equals(p[B])){z=!1;break}if(!(N&&z)&&E.indexOf(O)>=0)return i.previousDirectionAngle=L,zw(v,g,M,d,h);for(y=0;y<T;y++){var F=(k=P[y]).angle;if(C=Ow(L,F),A&&D||!(C>i.maxAllowedDirectionChange)){var U=$w(M.clone().offset(k.gridOffsetX,k.gridOffsetY),f,s),V=Nw(U);if(!m.isClose(V)&&!r(U)){if(E.indexOf(V)>=0)if(!U.equals(h))if(Ow(F,Lw(U,h,T,f,i))>i.maxAllowedDirectionChange)continue;var j=$+k.cost+(D?0:i.penalties[C]);(!m.isOpen(V)||j<b[V])&&(g[V]=U,v[V]=M,b[V]=j,m.add(V,j+Bw(U,p)))}}}I--}}return i.fallbackRoute.call(this,d,h,i)}function Vw(e,t,r){!function(e){if(e.directions=dv(e,"directions"),e.penalties=dv(e,"penalties"),e.paddingBox=dv(e,"paddingBox"),e.padding=dv(e,"padding"),e.padding){var t=yb(e.padding);e.paddingBox={x:-t.left,y:-t.top,width:t.left+t.right,height:t.top+t.bottom}}rv(e.directions).forEach((function(e){var t=new Iu(0,0),r=new Iu(e.offsetX,e.offsetY);e.angle=lu(t.theta(r))}))}(t),r.options.perpendicular=!!t.perpendicular;var i=Tw(r,t),n=Ew(r,t),o=Iw(r,t);let s;if("function"==typeof t.isPointObstacle)s=t.isPointObstacle;else{const e=new Aw(t);e.build(r.paper.model,r.model),s=t=>!e.isPointAccessible(t)}for(var a,l,c=rv(e).map(Iu),d=[],h=o,u=0,p=c.length;u<=p;u++){var f=null;if(l=a||i,!(a=c[u]))if(a=n,(!r.model.get("source").id||!r.model.get("target").id)&&ev(t.draggingRoute)){var m=l===i?o:l,g=a.origin();f=t.draggingRoute.call(r,m,g,t)}if(null===(f=f||Uw.call(r,l,a,s,t)))return t.fallbackRouter(e,t,r);var v=f[0];v&&v.equals(h)&&f.shift(),h=f[f.length-1]||h,Array.prototype.push.apply(d,f)}return d}Aw.prototype.build=function(e,t){var r=this.options,i=rv(r.excludeEnds).reduce((function(r,i){var n=t.get(i);if(n){var o=e.getCell(n.id);o&&r.push(o)}return r}),[]),n=[],o=e.getCell(t.get("source").id);o&&(n=lv(n,o.getAncestors().map((function(e){return e.id}))));var s=e.getCell(t.get("target").id);s&&(n=lv(n,s.getAncestors().map((function(e){return e.id}))));var a=this.mapGridSize;return e.getElements().reduce((function(e,t){var o=rv(r.excludeTypes).includes(t.get("type")),s=i.find((function(e){return e.id===t.id})),l=n.includes(t.id);if(!(o||s||l))for(var c=t.getBBox().moveAndExpand(r.paddingBox),d=c.origin().snapToGrid(a),h=c.corner().snapToGrid(a),u=d.x;u<=h.x;u+=a)for(var p=d.y;p<=h.y;p+=a){var f=u+"@"+p;e[f]=e[f]||[],e[f].push(c)}return e}),this.map),this},Aw.prototype.isPointAccessible=function(e){var t=e.clone().snapToGrid(this.mapGridSize).toString();return rv(this.map[t]).every((function(t){return!t.containsPoint(e)}))},Pw.prototype.add=function(e,t){this.hash[e]?this.items.splice(this.items.indexOf(e),1):this.hash[e]=this.OPEN,this.values[e]=t;var r=Yg(this.items,e,function(e){return this.values[e]}.bind(this));this.items.splice(r,0,e)},Pw.prototype.remove=function(e){this.hash[e]=this.CLOSE},Pw.prototype.isOpen=function(e){return this.hash[e]===this.OPEN},Pw.prototype.isClose=function(e){return this.hash[e]===this.CLOSE},Pw.prototype.isEmpty=function(){return 0===this.items.length},Pw.prototype.pop=function(){var e=this.items.shift();return this.remove(e),e};const jw=function(e,t,r){return Vw(e,Vg({},Sw,t),r)};var Gw={maxAllowedDirectionChange:45,diagonalCost:function(){var e=this.step;return Math.ceil(Math.sqrt(e*e<<1))},directions:function(){var e=this.step,t=this.cost(),r=this.diagonalCost();return[{offsetX:e,offsetY:0,cost:t},{offsetX:e,offsetY:e,cost:r},{offsetX:0,offsetY:e,cost:t},{offsetX:-e,offsetY:e,cost:r},{offsetX:-e,offsetY:0,cost:t},{offsetX:-e,offsetY:-e,cost:r},{offsetX:0,offsetY:-e,cost:t},{offsetX:e,offsetY:-e,cost:r}]},fallbackRoute:function(e,t,r){var i=e.theta(t),n=[],o={x:t.x,y:e.y},s={x:e.x,y:t.y};if(i%180>90){var a=o;o=s,s=a}var l=i%90<45?o:s,c=new Ru(e,l),d=90*Math.ceil(i/90),h=Iu.fromPolar(c.squaredLength(),hu(d+135),l),u=new Ru(t,h),p=c.intersection(u),f=p||t,m=p?f:e,g=360/r.directions.length,v=m.theta(t),b=lu(v+g/2),y=g*Math.floor(b/g);return r.previousDirectionAngle=y,f&&n.push(f.round()),n.push(t),n}};const Hw={AUTO:"auto",LEFT:"left",RIGHT:"right",TOP:"top",BOTTOM:"bottom",ANCHOR_SIDE:"anchor-side",MAGNET_SIDE:"magnet-side"},Ww=[Hw.LEFT,Hw.RIGHT,Hw.TOP,Hw.BOTTOM],qw={[Hw.LEFT]:Hw.RIGHT,[Hw.RIGHT]:Hw.LEFT,[Hw.TOP]:Hw.BOTTOM,[Hw.BOTTOM]:Hw.TOP},Yw=[Hw.TOP,Hw.BOTTOM],Jw={0:Hw.RIGHT,180:Hw.LEFT,270:Hw.TOP,90:Hw.BOTTOM};function Xw(e){return e.angle()}function Zw(e){return new Ku(e).simplify({threshold:1}).points}function Qw(e,t){const{point:r,x0:i,y0:n,view:o,bbox:s,direction:a}=e,{point:l,x0:c,y0:d,view:h,bbox:u,direction:p}=t;let f,m;if(o)f=o.model.isLink()?e_(l,r,o):a===Hw.ANCHOR_SIDE?s.sideNearestToPoint(r):a===Hw.MAGNET_SIDE?o.model.getBBox().sideNearestToPoint(r):a;else{const e=new Yu(i,n,0,0);f=Ww.includes(a)?a:e.sideNearestToPoint(l)}if(h)m=h.model.isLink()?e_(r,l,h):p===Hw.ANCHOR_SIDE?u.sideNearestToPoint(l):p===Hw.MAGNET_SIDE?h.model.getBBox().sideNearestToPoint(l):p;else{const e=new Yu(c,d,0,0);m=Ww.includes(p)?p:e.sideNearestToPoint(r)}return[f,m]}function Kw(e,t,r){const[i]=Qw(e,t);switch(i){case Hw.TOP:return function(e,t,r){const{x0:i,y0:n,width:o,height:s,point:a,margin:l}=e,c=n+s,d=i-l,h=i+o+l,u=n-l,{x:p}=a,{x0:f,y0:m}=t;return f===p&&m<n?Hw.BOTTOM:f<p&&m<u?r.point.x===p?Hw.BOTTOM:Hw.RIGHT:f>p&&m<u?r.point.x===p?Hw.BOTTOM:Hw.LEFT:f<d&&m>=n||f>h&&m>=n?Hw.TOP:f>=d&&f<=p&&m>c||f<=h&&f>=p&&m>c?r.point.x<f?Hw.RIGHT:Hw.LEFT:Hw.TOP}(e,t,r);case Hw.RIGHT:return function(e,t,r){const{y0:i,x0:n,width:o,height:s,point:a,margin:l}=e,c=n+o,d=c+l,h=i-l,u=i+s+l,{x:p,y:f}=a,{x0:m,y0:g}=t;return m>p&&g===f?Hw.LEFT:m>=d&&g<f?Hw.BOTTOM:m>=d&&g>f?Hw.TOP:m<=c&&g<=h||m<=c&&g>=u?Hw.RIGHT:m<n&&g>=h&&g<=f||m<n&&g<=u&&g>=f?r.point.y<g?Hw.BOTTOM:Hw.TOP:Hw.RIGHT}(e,t,r);case Hw.BOTTOM:return function(e,t,r){const{x0:i,y0:n,width:o,height:s,point:a,margin:l}=e,c=n+s,d=i-l,h=i+o+l,u=c+l,{x:p}=a,{x0:f,y0:m}=t;return f===p&&m>c?Hw.TOP:f<p&&m>u?r.point.x===p?Hw.TOP:Hw.RIGHT:f>p&&m>u?r.point.x===p?Hw.TOP:Hw.LEFT:f<d&&m<=c||f>h&&m<=c?Hw.BOTTOM:f>=d&&f<=p&&m<n||f<=h&&f>=p&&m<n?r.point.x<f?Hw.RIGHT:Hw.LEFT:Hw.BOTTOM}(e,t,r);case Hw.LEFT:return function(e,t,r){const{y0:i,x0:n,width:o,height:s,point:a,margin:l}=e,c=n+o,d=n-l,h=i-l,u=i+s+l,{x:p,y:f}=a,{x0:m,y0:g}=t;return m<p&&g===f?Hw.RIGHT:m<=d&&g<f?Hw.BOTTOM:m<=d&&g>f?Hw.TOP:m>=n&&g<=h||m>=n&&g>=u?Hw.LEFT:m>c&&g>=h&&g<=f||m>c&&g<=u&&g>=f?r.point.y<g?Hw.BOTTOM:Hw.TOP:Hw.LEFT}(e,t,r)}}function e_(e,t,r){const i=r.getTangentAtLength(r.getClosestPointLength(t)),n=90*Math.round(Xw(i)/90);if(n%180==0&&e.y===t.y)return e.x<t.x?Hw.LEFT:Hw.RIGHT;if(e.x===t.x)return e.y<t.y?Hw.TOP:Hw.BOTTOM;switch(n){case 0:case 180:case 360:return e.y<t.y?Hw.TOP:Hw.BOTTOM;case 90:case 270:return e.x<t.x?Hw.LEFT:Hw.RIGHT}}function t_(e,t,r,i,n,o,s){i===Hw.AUTO&&(i=n?Hw.MAGNET_SIDE:Hw.ANCHOR_SIDE);const a=e&&e.model.isElement(),{x:l,y:c,width:d=0,height:h=0}=a?Yu.fromRectUnion(r,e.model.getBBox()):o;return{point:t,x0:l,y0:c,view:e,bbox:r,width:d,height:h,direction:i,margin:a?s:0}}function r_({x:e,y:t}){const r=new Iu(e,t);return{point:r,x0:r.x,y0:r.y,view:null,bbox:new Yu(e,t,0,0),width:0,height:0,direction:null,margin:0}}function i_(e,t,r){const i=t.point.clone(),{x0:n,y0:o,width:s,height:a}=t;switch(e){case"left":i.x=n-r;break;case"right":i.x=n+s+r;break;case"top":i.y=o-r;break;case"bottom":i.y=o+a+r}return i}function n_(e,t,r={}){const{point:i,x0:n,y0:o,width:s,height:a,margin:l}=e,{point:c,x0:d,y0:h,width:u,height:p,margin:f}=t,{targetInSourceBBox:m=!1}=r,g=d+u,v=h+p,b=n+s,y=o+a,x=n-l,w=b+l,_=o-l,k=y+l,C=d-f,S=g+f,A=h-f,P=v+f,[T,E]=Qw(e,t),I=i_(T,{point:i,x0:n,y0:o,width:s,height:a},l),L=i_(E,{point:c,x0:d,y0:h,width:u,height:p},f),{x:O,y:M}=I,{x:R,y:$}=L,N=((n+b)/2<(d+g)/2?b+d:g+n)/2,D=((o+y)/2<(h+v)/2?y+h:v+o)/2,z=new Yu(n,o,s,a),B=new Yu(d,h,u,p),F=z.clone().inflate(l),U=B.clone().inflate(f);if("left"===T&&"right"===E){if(x<=S){let e=D;return O<=C&&(v>=_&&$<M?e=Math.min(A,_):h<=k&&$>=M&&(e=Math.max(P,k))),[{x:O,y:M},{x:O,y:e},{x:R,y:e},{x:R,y:$}]}const e=(O+R)/2;return[{x:e,y:M},{x:e,y:$}]}if("right"===T&&"left"===E){if(O>=C){let e=D;return O>g&&(v>=_&&$<M?e=Math.min(A,_):h<=k&&$>=M&&(e=Math.max(P,k))),[{x:O,y:M},{x:O,y:e},{x:R,y:e},{x:R,y:$}]}const e=(O+R)/2;return[{x:e,y:M},{x:e,y:$}]}if("top"===T&&"bottom"===E){const e=Zp.rectWithRect(F,B);if(M<$){let t=N,r=M;return e&&(r=Math.min(r,A)),g>=x&&R<O?t=Math.min(C,x):d<=w&&R>=O&&(t=Math.max(S,w)),[{x:O,y:r},{x:t,y:r},{x:t,y:$},{x:R,y:$}]}const t=(M+$)/2;return[{x:O,y:t},{x:R,y:t}]}if("bottom"===T&&"top"===E){const e=Zp.rectWithRect(F,B);if(M>$){let t=N,r=M;return e&&(r=Math.max(r,P)),g>=x&&R<O?t=Math.min(C,x):d<=w&&R>=O&&(t=Math.max(S,w)),[{x:O,y:r},{x:t,y:r},{x:t,y:$},{x:R,y:$}]}const t=(M+$)/2;return[{x:O,y:t},{x:R,y:t}]}if("top"===T&&"top"===E){if(m||Zp.rectWithRect(F,B)||M<=h&&(F.bottomRight().x<=R||F.bottomLeft().x>=R)||M>=h&&(U.bottomRight().x<=O||U.bottomLeft().x>=O))return[{x:O,y:Math.min(M,$)},{x:R,y:Math.min(M,$)}];let e,t=Math.min((y+h)/2,$),r=Math.min((o+v)/2,M);return e=$<M?R>O?Math.min(O,C):Math.max(O,S):R>=O?Math.max(R,w):Math.min(R,x),[{x:O,y:r},{x:e,y:r},{x:e,y:t},{x:R,y:t}]}if("bottom"===T&&"bottom"===E){if(m||Zp.rectWithRect(F,B)||M>=$&&(F.topRight().x<=R||F.topLeft().x>=R)||M<=$&&(U.topRight().x<=O||U.topLeft().x>=O))return[{x:O,y:Math.max(M,$)},{x:R,y:Math.max(M,$)}];let e,t=Math.max((o+v)/2,$),r=Math.max((y+h)/2,M);return e=$>M?R>O?Math.min(O,C):Math.max(O,S):R>=O?Math.max(R,w):Math.min(R,x),[{x:O,y:r},{x:e,y:r},{x:e,y:t},{x:R,y:t}]}if("left"===T&&"left"===E){if(m||Zp.rectWithRect(F,B)||O<=R&&(F.bottomRight().y<=$||F.topRight().y>=$)||O>=R&&(U.bottomRight().y<=M||U.topRight().y>=M))return[{x:Math.min(O,R),y:M},{x:Math.min(O,R),y:$}];let e,t=Math.min((b+d)/2,R),r=Math.min((n+g)/2,O);return e=R>O?$<=M?Math.min(_,$):Math.max(k,$):$>=M?Math.min(A,M):Math.max(P,M),[{x:r,y:M},{x:r,y:e},{x:t,y:e},{x:t,y:$}]}if("right"===T&&"right"===E){if(m||Zp.rectWithRect(F,B)||O>=R&&(F.bottomLeft().y<=$||F.topLeft().y>=$)||O<=R&&(U.bottomLeft().y<=M||U.topLeft().y>=M))return[{x:Math.max(O,R),y:M},{x:Math.max(O,R),y:$}];let e,t=Math.max((n+g)/2,R),r=Math.max((b+d)/2,O);return e=R<=O?$<=M?Math.min(_,$):Math.max(k,$):$>=M?Math.min(A,M):Math.max(P,M),[{x:r,y:M},{x:r,y:e},{x:t,y:e},{x:t,y:$}]}if("top"===T&&"right"===E){if(F.containsPoint(c)){if(O<=S){const e=Math.max(O+l,R),t=Math.min(_,A);return[{x:O,y:t},{x:e,y:t},{x:e,y:$}]}const e=(O-l+R)/2;return[{x:O,y:M},{x:e,y:M},{x:e,y:$}]}if(_>$){if(O<R){let e=A;return P<=_&&S>=O&&(e=D),[{x:O,y:e},{x:R,y:e},{x:R,y:$}]}return[{x:O,y:$}]}const e=Math.max(N,S);if(O>R&&y>=$)return[{x:O,y:M},{x:e,y:M},{x:e,y:$}];if(e>x&&M<v){const e=Math.min(_,A),t=Math.max(w,S);return[{x:O,y:e},{x:t,y:e},{x:t,y:$}]}return[{x:O,y:M},{x:e,y:M},{x:e,y:$}]}if("top"===T&&"left"===E){if(F.containsPoint(c)){if(O>=C){const e=Math.min(O-l,R),t=Math.min(_,A);return[{x:O,y:t},{x:e,y:t},{x:e,y:$}]}const e=(O+l+R)/2;return[{x:O,y:M},{x:e,y:M},{x:e,y:$}]}if(_>$){if(O>R){let e=A;return P<=_&&C<=O&&(e=D),[{x:O,y:e},{x:R,y:e},{x:R,y:$}]}return[{x:O,y:$}]}const e=Math.min(C,N);if(O<R&&y>=$)return[{x:O,y:M},{x:e,y:M},{x:e,y:$}];if(e<w&&M<v){const e=Math.min(_,A),t=Math.min(x,C);return[{x:O,y:e},{x:t,y:e},{x:t,y:$}]}return[{x:O,y:M},{x:e,y:M},{x:e,y:$}]}if("bottom"===T&&"right"===E){if(F.containsPoint(c)){if(O<=S){const e=Math.max(O+l,R),t=Math.max(k,P);return[{x:O,y:t},{x:e,y:t},{x:e,y:$}]}const e=(O-l+R)/2;return[{x:O,y:M},{x:e,y:M},{x:e,y:$}]}if(k<$){if(O<R){let e=P;return A>=k&&S>=O&&(e=D),[{x:O,y:e},{x:R,y:e},{x:R,y:$}]}return[{x:O,y:$}]}const e=Math.max(N,S);if(O>R&&o<=$)return[{x:O,y:M},{x:e,y:M},{x:e,y:$}];if(e>x&&M>h){const e=Math.max(k,P),t=Math.max(w,S);return[{x:O,y:e},{x:t,y:e},{x:t,y:$}]}return[{x:O,y:M},{x:e,y:M},{x:e,y:$}]}if("bottom"===T&&"left"===E){if(F.containsPoint(c)){if(O>=C){const e=Math.min(O-l,R),t=Math.max(k,P);return[{x:O,y:t},{x:e,y:t},{x:e,y:$}]}const e=(O+l+R)/2;return[{x:O,y:M},{x:e,y:M},{x:e,y:$}]}if(k<$){if(O>R){let e=P;return A>=k&&C<=O&&(e=D),[{x:O,y:e},{x:R,y:e},{x:R,y:$}]}return[{x:O,y:$}]}const e=Math.min(C,N);if(O<R&&o<=$)return[{x:O,y:M},{x:e,y:M},{x:e,y:$}];if(e<w&&M>h){const e=Math.max(k,P),t=Math.min(x,C);return[{x:O,y:e},{x:t,y:e},{x:t,y:$}]}return[{x:O,y:M},{x:e,y:M},{x:e,y:$}]}if("left"===T&&"bottom"===E){if(F.containsPoint(c)){if(M<=P){const e=Math.min(x,C),t=Math.max(M+l,$);return[{x:e,y:M},{x:e,y:t},{x:R,y:t}]}const e=(M-l+$)/2;return[{x:O,y:M},{x:O,y:e},{x:R,y:e}]}if(x>R){if(M<$){let e=C;return S<=x&&P>=M&&(e=N),[{x:e,y:M},{x:e,y:$},{x:R,y:$}]}return[{x:R,y:M}]}const e=Math.max(P,D);if(M>$&&b>=R)return[{x:O,y:M},{x:O,y:e},{x:R,y:e}];if(e>_&&O<g){const e=Math.min(x,C),t=Math.max(k,P);return[{x:e,y:M},{x:e,y:t},{x:R,y:t}]}return[{x:O,y:M},{x:O,y:e},{x:R,y:e}]}if("left"===T&&"top"===E){if(F.containsPoint(c)){if(M>=A){const e=Math.min(M-l,$),t=Math.min(x,C);return[{x:t,y:M},{x:t,y:e},{x:R,y:e}]}const e=(M+l+$)/2;return[{x:O,y:M},{x:O,y:e},{x:R,y:e}]}if(x>R){if(M>$){let e=C;return S<=x&&A<=M&&(e=N),[{x:e,y:M},{x:e,y:$},{x:R,y:$}]}return[{x:R,y:M}]}const e=Math.min(A,D);if(M<$&&b>=R)return[{x:O,y:M},{x:O,y:e},{x:R,y:e}];if(e<k&&O<g){const e=Math.min(x,C),t=Math.min(_,A);return[{x:e,y:M},{x:e,y:t},{x:R,y:t}]}return[{x:O,y:M},{x:O,y:e},{x:R,y:e}]}if("right"===T&&"top"===E){if(F.containsPoint(c)){if(M>=A){const e=Math.max(w,S),t=Math.min(M-l,$);return[{x:e,y:M},{x:e,y:t},{x:R,y:t}]}const e=(M+l+$)/2;return[{x:O,y:M},{x:O,y:e},{x:R,y:e}]}if(w<R){if(M>$){let e=S;return C>=w&&A<=M&&(e=N),[{x:e,y:M},{x:e,y:$},{x:R,y:$}]}return[{x:R,y:M}]}const e=Math.min(A,D);if(M<$&&n<=R)return[{x:O,y:M},{x:O,y:e},{x:R,y:e}];if(e<k&&O>d){const e=Math.max(w,S),t=Math.min(_,A);return[{x:e,y:M},{x:e,y:t},{x:R,y:t}]}return[{x:O,y:M},{x:O,y:e},{x:R,y:e}]}if("right"===T&&"bottom"===E){if(F.containsPoint(c)){if(M<=P){const e=Math.max(w,S),t=Math.max(M+l,$);return[{x:e,y:M},{x:e,y:t},{x:R,y:t}]}const e=(M-l+$)/2;return[{x:O,y:M},{x:O,y:e},{x:R,y:e}]}if(w<R){if(M<$){let e=S;return C>=w&&P>=M&&(e=N),[{x:e,y:M},{x:e,y:$},{x:R,y:$}]}return[{x:R,y:M}]}const e=Math.max(P,D);if(M>$&&n<=R)return[{x:O,y:M},{x:O,y:e},{x:R,y:e}];if(e>_&&O>d){const e=Math.max(w,S),t=Math.max(k,P);return[{x:e,y:M},{x:e,y:t},{x:R,y:t}]}return[{x:O,y:M},{x:O,y:e},{x:R,y:e}]}}function o_(e,t,r){const{sourceDirection:i=Hw.AUTO,targetDirection:n=Hw.AUTO}=t,o=t.margin||20,s=t.useVertices||!1,a=!!r.model.source().port,l=t_(r.sourceView,r.sourceAnchor,r.sourceBBox,i,a,r.sourceAnchor,o),c=!!r.model.target().port,d=t_(r.targetView,r.targetAnchor,r.targetBBox,n,c,r.targetAnchor,o);let h=[];if(!s||0===e.length)return Zw(n_(l,d));const u=e.map((e=>r_(e))),[p]=u;if(l.view&&l.view.model.isElement()&&l.view.model.getBBox().inflate(o).containsPoint(p.point)){const[e]=Qw(l,p),t=e,r=r_(l.point);r.margin=o,r.direction=e,p.direction=t,h.push(...n_(r,p,{targetInSourceBBox:!0}),p.point)}else{const e=Kw(l,p,u[1]||d);p.direction=e,h.push(...n_(l,p),p.point)}for(let e=0;e<u.length-1;e++){const t=u[e],r=u[e+1],i=Xw(new Ru(t.point,r.point));if(i%90==0){const e=Jw[i],n=qw[e];if(e!==t.direction)h.push(t.point,r.point),r.direction=n;else{const e=lu(i-90);let n=0,s=0;90===e?s=-o:180===e?n=-o:270===e?s=o:0===e&&(n=o);const a={x:t.point.x+n,y:t.point.y+s},l={x:r.point.x+n,y:r.point.y+s},c=new Ru(r.point,l);r.direction=Jw[Xw(c)],h.push(t.point,a,l,r.point)}continue}const[n,s]=s_(t,r);t.direction=n,r.direction=s,h.push(...n_(t,r),r.point)}const f=u[u.length-1];if(d.view&&d.view.model.isElement())if(d.view.model.getBBox().inflate(o).containsPoint(f.point)){const[e]=s_(f,d),t=r_(d.point),[,r]=Qw(f,d);t.margin=o,t.direction=r,f.direction=e,h.push(...n_(f,t))}else{const e=Zw(h),t=new Ru(e[e.length-2],f.point),r=Jw[Math.round(Xw(t))];f.direction=r;let i=n_(f,d);const[n,s]=Zw([...i,d.point]),a=new Ru(n,s),l=Math.round(Xw(a)),c=Jw[l];c!==r&&r===qw[c]&&(f.margin=o,i=n_(f,d)),h.push(...i)}else{const[e]=s_(f,d);f.direction=e,h.push(...n_(f,d))}return Zw(h)}function s_(e,t){const r=e.direction,i=Yw.includes(r);let n=e.direction,o=t.direction;if(i){const i=e.point.y>t.point.y,s=t.point.x-e.point.x;r===Hw.BOTTOM?(n=i?qw[r]:s>=0?Hw.RIGHT:Hw.LEFT,s>0?o=i?Hw.LEFT:Hw.TOP:s<0&&(o=i?Hw.RIGHT:Hw.TOP)):(n=i?s>=0?Hw.RIGHT:Hw.LEFT:qw[r],s>0?o=i?Hw.BOTTOM:Hw.LEFT:s<0&&(o=i?Hw.BOTTOM:Hw.RIGHT))}else{const i=e.point.x>t.point.x,s=t.point.y-e.point.y;r===Hw.RIGHT?(n=i?qw[r]:s>=0?Hw.BOTTOM:Hw.TOP,s>0?o=i?Hw.TOP:Hw.LEFT:s<0&&(o=i?Hw.BOTTOM:Hw.LEFT)):(n=i?s>=0?Hw.BOTTOM:Hw.TOP:qw[r],s>0?o=i?Hw.RIGHT:Hw.TOP:s<0&&(o=i?Hw.RIGHT:Hw.BOTTOM))}return[n,o]}o_.Directions=Hw;const a_=o_;var l_=Object.freeze({__proto__:null,normal:function(e,t,r){return e},oneSide:function(e,t,r){var i,n,o,s=t.side||"bottom",a=yb(t.padding||40),l=r.sourceBBox,c=r.targetBBox,d=l.center(),h=c.center();switch(s){case"bottom":o=1,i="y",n="height";break;case"top":o=-1,i="y",n="height";break;case"left":o=-1,i="x",n="width";break;case"right":o=1,i="x",n="width";break;default:throw new Error("Router: invalid side")}return d[i]+=o*(l[n]/2+a[s]),h[i]+=o*(c[n]/2+a[s]),o*(d[i]-h[i])>0?h[i]=d[i]:d[i]=h[i],[d].concat(e,h)},orthogonal:Cw,manhattan:jw,metro:function(e,t,r){if(!ev(jw))throw new Error("Metro requires the manhattan router.");return jw(e,Vg({},Gw,t),r)},rightAngle:a_});function c_(e){return function(t,r,i,n){if(i instanceof Element){var o,s=this.paper.findView(i);if(s)if(s.isNodeConnection(i))o=d_(s,"fixedAt"in n?n.fixedAt:"50%");else o=s.getNodeBBox(i).center();else o=new Iu;return e.call(this,t,r,o,n)}return e.apply(this,arguments)}}function d_(e,t){var r=parseFloat(t);return fb(t)?e.getPointAtRatio(r/100):e.getPointAtLength(r)}const h_=c_((function(e,t,r,i){var n=1e6,o=e.getConnection(),s=e.getConnectionSubdivisions(),a=new Ru(r.clone().offset(0,n),r.clone().offset(0,-n)),l=new Ru(r.clone().offset(n,0),r.clone().offset(-n,0)),c=a.intersect(o,{segmentSubdivisions:s}),d=l.intersect(o,{segmentSubdivisions:s}),h=[];return c&&Array.prototype.push.apply(h,c),d&&Array.prototype.push.apply(h,d),h.length>0?r.chooseClosest(h):"fallbackAt"in i?d_(e,i.fallbackAt):u_(e,t,r,i)})),u_=c_((function(e,t,r,i){var n=e.getClosestPoint(r);return n||new Iu}));var p_=Object.freeze({__proto__:null,resolveRef:c_,connectionRatio:function(e,t,r,i){var n="ratio"in i?i.ratio:.5;return e.getPointAtRatio(n)},connectionLength:function(e,t,r,i){var n="length"in i?i.length:20;return e.getPointAtLength(n)},connectionPerpendicular:h_,connectionClosest:u_});function f_(e){return function(t,r,i,n){var o=!!n.rotate,s=o?t.getNodeUnrotatedBBox(r):t.getNodeBBox(r),a=s[e](),l=n.dx;if(l){var c=fb(l);l=parseFloat(l),isFinite(l)&&(c&&(l/=100,l*=s.width),a.x+=l)}var d=n.dy;if(d){var h=fb(d);d=parseFloat(d),isFinite(d)&&(h&&(d/=100,d*=s.height),a.y+=d)}return o?a.rotate(t.model.getBBox().center(),-t.model.angle()):a}}const m_=f_("center"),g_=f_("topMiddle"),v_=f_("bottomMiddle"),b_=f_("leftMiddle"),y_=f_("rightMiddle"),x_=f_("origin"),w_=f_("topRight"),__=f_("bottomLeft"),k_=f_("corner"),C_=c_((function(e,t,r,i){var n=e.model.angle(),o=e.getNodeBBox(t),s=o.center(),a=o.origin(),l=o.corner(),c=i.padding;if(isFinite(c)||(c=0),a.y+c<=r.y&&r.y<=l.y-c){var d=r.y-s.y;s.x+=0===n||180===n?0:1*d/Math.tan(hu(n)),s.y+=d}else if(a.x+c<=r.x&&r.x<=l.x-c){var h=r.x-s.x;s.y+=90===n||270===n?0:h*Math.tan(hu(n)),s.x+=h}return s})),S_=c_((function(e,t,r,i){var n,o,s,a=!!i.rotate;a?(n=e.getNodeUnrotatedBBox(t),s=e.model.getBBox().center(),o=e.model.angle()):n=e.getNodeBBox(t);var l,c=i.padding;switch(isFinite(c)&&n.inflate(c),a&&r.rotate(s,o),n.sideNearestToPoint(r)){case"left":l=n.leftMiddle();break;case"right":l=n.rightMiddle();break;case"top":l=n.topMiddle();break;case"bottom":l=n.bottomMiddle()}return a?l.rotate(s,-o):l})),A_=function(e,t,r,i,n){return e.model.getPointFromConnectedLink(this.model,n).offset(i.dx,i.dy)};var P_=Object.freeze({__proto__:null,center:m_,top:g_,bottom:v_,left:b_,right:y_,topLeft:x_,topRight:w_,bottomLeft:__,bottomRight:k_,perpendicular:C_,midSide:S_,modelCenter:A_});const T_=Rx.extend({initialize:function(e,t){t.cellNamespace?this.cellNamespace=t.cellNamespace:this.cellNamespace="undefined"!=typeof joint&&cv(joint,"shapes")?joint.shapes:null,this.graph=t.graph},model:function(e,t){const r=t.collection,i=r.cellNamespace,{type:n}=e,o=nb(i,n,".");if(!o)throw new Error(`dia.Graph: Could not find cell constructor for type: '${n}'. Make sure to add the constructor to 'cellNamespace'.`);const s=new o(e,t);return t.dry||(s.graph=r.graph),s},comparator:function(e){return e.get("z")||0}}),E_=Ub.extend({initialize:function(e,t){var r=new T_([],{model:(t=t||{}).cellModel,cellNamespace:t.cellNamespace,graph:this});Ub.prototype.set.call(this,"cells",r),r.on("all",this.trigger,this),this.on("change:z",this._sortOnChangeZ,this),this._out={},this._in={},this._nodes={},this._edges={},this._batches={},r.on("add",this._restructureOnAdd,this),r.on("remove",this._restructureOnRemove,this),r.on("reset",this._restructureOnReset,this),r.on("change:source",this._restructureOnChangeSource,this),r.on("change:target",this._restructureOnChangeTarget,this),r.on("remove",this._removeCell,this)},_sortOnChangeZ:function(){this.get("cells").sort()},_restructureOnAdd:function(e){if(e.isLink()){this._edges[e.id]=!0;var{source:t,target:r}=e.attributes;t.id&&((this._out[t.id]||(this._out[t.id]={}))[e.id]=!0),r.id&&((this._in[r.id]||(this._in[r.id]={}))[e.id]=!0)}else this._nodes[e.id]=!0},_restructureOnRemove:function(e){if(e.isLink()){delete this._edges[e.id];var{source:t,target:r}=e.attributes;t.id&&this._out[t.id]&&this._out[t.id][e.id]&&delete this._out[t.id][e.id],r.id&&this._in[r.id]&&this._in[r.id][e.id]&&delete this._in[r.id][e.id]}else delete this._nodes[e.id]},_restructureOnReset:function(e){e=e.models,this._out={},this._in={},this._nodes={},this._edges={},e.forEach(this._restructureOnAdd,this)},_restructureOnChangeSource:function(e){var t=e.previous("source");t.id&&this._out[t.id]&&delete this._out[t.id][e.id];var r=e.attributes.source;r.id&&((this._out[r.id]||(this._out[r.id]={}))[e.id]=!0)},_restructureOnChangeTarget:function(e){var t=e.previous("target");t.id&&this._in[t.id]&&delete this._in[t.id][e.id];var r=e.get("target");r.id&&((this._in[r.id]||(this._in[r.id]={}))[e.id]=!0)},getOutboundEdges:function(e){return this._out&&this._out[e]||{}},getInboundEdges:function(e){return this._in&&this._in[e]||{}},toJSON:function(){var e=Ub.prototype.toJSON.apply(this,arguments);return e.cells=this.get("cells").toJSON(),e},fromJSON:function(e,t){if(!e.cells)throw new Error("Graph JSON must contain cells array.");return this.set(e,t)},set:function(e,t,r){var i;return"object"==typeof e?(i=e,r=t):(i={})[e]=t,i.hasOwnProperty("cells")&&(this.resetCells(i.cells,r),i=hv(i,"cells")),Ub.prototype.set.call(this,i,r)},clear:function(e){e=Vg({},e,{clear:!0});var t=this.get("cells");if(0===t.length)return this;this.startBatch("clear",e);var r=t.sortBy((function(e){return e.isLink()?1:2}));do{r.shift().remove(e)}while(r.length>0);return this.stopBatch("clear"),this},_prepareCell:function(e,t){var r;if(e instanceof Ub?(r=e.attributes,e.graph||t&&t.dry||(e.graph=this)):r=e,!Ug(r.type))throw new TypeError("dia.Graph: cell type must be a string.");return e},minZIndex:function(){var e=this.get("cells").first();return e&&e.get("z")||0},maxZIndex:function(){var e=this.get("cells").last();return e&&e.get("z")||0},addCell:function(e,t){return Array.isArray(e)?this.addCells(e,t):(e instanceof Ub?e.has("z")||e.set("z",this.maxZIndex()+1):void 0===e.z&&(e.z=this.maxZIndex()+1),this.get("cells").add(this._prepareCell(e,t),t||{}),this)},addCells:function(e,t){return 0===e.length||(e=ov(e),t.maxPosition=t.position=e.length-1,this.startBatch("add",t),e.forEach((function(e){this.addCell(e,t),t.position--}),this),this.stopBatch("add",t)),this},resetCells:function(e,t){var r=rv(e).map((function(e){return this._prepareCell(e,t)}),this);return this.get("cells").reset(r,t),this},removeCells:function(e,t){return e.length&&(this.startBatch("remove"),Wg(e,"remove",t),this.stopBatch("remove")),this},_removeCell:function(e,t,r){(r=r||{}).clear||(r.disconnectLinks?this.disconnectLinks(e,r):this.removeLinks(e,r)),this.get("cells").remove(e,{silent:!0}),e.graph===this&&(e.graph=null)},getCell:function(e){return this.get("cells").get(e)},getCells:function(){return this.get("cells").toArray()},getElements:function(){return this.get("cells").toArray().filter((e=>e.isElement()))},getLinks:function(){return this.get("cells").toArray().filter((e=>e.isLink()))},getFirstCell:function(){return this.get("cells").first()},getLastCell:function(){return this.get("cells").last()},getConnectedLinks:function(e,t){var r=(t=t||{}).indirect,i=t.inbound,n=t.outbound;void 0===i&&void 0===n&&(i=n=!0);var o=[],s={};function a(e,t){if(pv(e.getOutboundEdges(t.id),function(t,c){if(!s[c]){var d=e.getCell(c);o.push(d),s[c]=!0,r&&(i&&l(e,d),n&&a(e,d))}}.bind(e)),r&&t.isLink()){var c=t.getTargetCell();c&&c.isLink()&&(s[c.id]||(o.push(c),a(e,c)))}}function l(e,t){if(pv(e.getInboundEdges(t.id),function(t,c){if(!s[c]){var d=e.getCell(c);o.push(d),s[c]=!0,r&&(i&&l(e,d),n&&a(e,d))}}.bind(e)),r&&t.isLink()){var c=t.getSourceCell();c&&c.isLink()&&(s[c.id]||(o.push(c),l(e,c)))}}if(n&&a(this,e),i&&l(this,e),t.deep){var c=e.getEmbeddedCells({deep:!0}),d={};c.forEach((function(e){e.isElement()&&(d[e.id]=!0)})),c.forEach((function(e){e.isLink()||(n&&pv(this.getOutboundEdges(e.id),function(e,r){if(!s[r]){var i=this.getCell(r),{source:n,target:a}=i.attributes,l=n.id,c=a.id;if(!t.includeEnclosed&&l&&d[l]&&c&&d[c])return;o.push(this.getCell(r)),s[r]=!0}}.bind(this)),i&&pv(this.getInboundEdges(e.id),function(e,r){if(!s[r]){var i=this.getCell(r),{source:n,target:a}=i.attributes,l=n.id,c=a.id;if(!t.includeEnclosed&&l&&d[l]&&c&&d[c])return;o.push(this.getCell(r)),s[r]=!0}}.bind(this)))}),this)}return o},getNeighbors:function(e,t){t||(t={});var r=t.inbound,i=t.outbound;void 0===r&&void 0===i&&(r=i=!0);var n=this.getConnectedLinks(e,t).reduce(function(n,o){var{source:s,target:a}=o.attributes,l=o.hasLoop(t);if(r&&cv(s,"id")&&!n[s.id]){var c=this.getCell(s.id);c.isElement()&&(!l&&(!c||c===e||t.deep&&c.isEmbeddedIn(e))||(n[s.id]=c))}if(i&&cv(a,"id")&&!n[a.id]){var d=this.getCell(a.id);d.isElement()&&(!l&&(!d||d===e||t.deep&&d.isEmbeddedIn(e))||(n[a.id]=d))}return n}.bind(this),{});if(e.isLink()){if(r){var o=e.getSourceCell();o&&o.isElement()&&!n[o.id]&&(n[o.id]=o)}if(i){var s=e.getTargetCell();s&&s.isElement()&&!n[s.id]&&(n[s.id]=s)}}return rv(n)},getCommonAncestor:function(){var e=Array.from(arguments).map((function(e){for(var t=[],r=e.get("parent");r;)t.push(r),r=this.getCell(r).get("parent");return t}),this);e=e.sort((function(e,t){return e.length-t.length}));var t=rv(e.shift()).find((function(t){return e.every((function(e){return e.includes(t)}))}));return this.getCell(t)},getSuccessors:function(e,t){t=t||{};var r=[];return this.search(e,(function(t){t!==e&&r.push(t)}),Vg({},t,{outbound:!0})),r},cloneCells:Vb,cloneSubgraph:function(e,t){var r=this.getSubgraph(e,t);return this.cloneCells(r)},getSubgraph:function(e,t){t=t||{};var r=[],i={},n=[],o=[];return rv(e).forEach((function(e){(i[e.id]||(r.push(e),i[e.id]=e,e.isLink()?o.push(e):n.push(e)),t.deep)&&e.getEmbeddedCells({deep:!0}).forEach((function(e){i[e.id]||(r.push(e),i[e.id]=e,e.isLink()?o.push(e):n.push(e))}))})),o.forEach((function(e){var{source:t,target:o}=e.attributes;if(t.id&&!i[t.id]){var s=this.getCell(t.id);r.push(s),i[s.id]=s,n.push(s)}if(o.id&&!i[o.id]){var a=this.getCell(o.id);r.push(this.getCell(o.id)),i[a.id]=a,n.push(a)}}),this),n.forEach((function(e){this.getConnectedLinks(e,t).forEach((function(e){var{source:t,target:n}=e.attributes;!i[e.id]&&t.id&&i[t.id]&&n.id&&i[n.id]&&(r.push(e),i[e.id]=e)}))}),this),r},getPredecessors:function(e,t){t=t||{};var r=[];return this.search(e,(function(t){t!==e&&r.push(t)}),Vg({},t,{inbound:!0})),r},search:function(e,t,r){(r=r||{}).breadthFirst?this.bfs(e,t,r):this.dfs(e,t,r)},bfs:function(e,t,r={}){const i={},n={},o=[];for(o.push(e),n[e.id]=0;o.length>0;){var s=o.shift();if(i[s.id])continue;if(i[s.id]=!0,!1===t.call(this,s,n[s.id]))continue;const e=this.getNeighbors(s,r);for(let t=0,r=e.length;t<r;t++){const r=e[t];n[r.id]=n[s.id]+1,o.push(r)}}},dfs:function(e,t,r={}){const i={},n={},o=[];for(o.push(e),n[e.id]=0;o.length>0;){const e=o.pop();if(i[e.id])continue;if(i[e.id]=!0,!1===t.call(this,e,n[e.id]))continue;const s=this.getNeighbors(e,r),a=o.length;for(let t=0,r=s.length;t<r;t++){const r=s[t];n[r.id]=n[e.id]+1,o.splice(a,0,r)}}},getSources:function(){var e=[];return pv(this._nodes,function(t,r){this._in[r]&&!Qg(this._in[r])||e.push(this.getCell(r))}.bind(this)),e},getSinks:function(){var e=[];return pv(this._nodes,function(t,r){this._out[r]&&!Qg(this._out[r])||e.push(this.getCell(r))}.bind(this)),e},isSource:function(e){return!this._in[e.id]||Qg(this._in[e.id])},isSink:function(e){return!this._out[e.id]||Qg(this._out[e.id])},isSuccessor:function(e,t){var r=!1;return this.search(e,(function(i){if(i===t&&i!==e)return r=!0,!1}),{outbound:!0}),r},isPredecessor:function(e,t){var r=!1;return this.search(e,(function(i){if(i===t&&i!==e)return r=!0,!1}),{inbound:!0}),r},isNeighbor:function(e,t,r){var i=(r=r||{}).inbound,n=r.outbound;void 0===i&&void 0===n&&(i=n=!0);var o=!1;return this.getConnectedLinks(e,r).forEach((function(e){var{source:r,target:s}=e.attributes;return i&&cv(r,"id")&&r.id===t.id||n&&cv(s,"id")&&s.id===t.id?(o=!0,!1):void 0})),o},disconnectLinks:function(e,t){this.getConnectedLinks(e).forEach((function(r){r.set(r.attributes.source.id===e.id?"source":"target",{x:0,y:0},t)}))},removeLinks:function(e,t){Wg(this.getConnectedLinks(e),"remove",t)},findModelsFromPoint:function(e){return this.getElements().filter((t=>t.getBBox({rotate:!0}).containsPoint(e)))},findModelsInArea:function(e,t={}){const r=new Yu(e),{strict:i=!1}=t,n=i?"containsRect":"intersect";return this.getElements().filter((e=>r[n](e.getBBox({rotate:!0}))))},findModelsUnderElement:function(e,t={}){const{searchBy:r="bbox"}=t,i=e.getBBox().rotateAroundCenter(e.angle());return("bbox"===r?this.findModelsInArea(i):this.findModelsFromPoint(Ry(i,r))).filter((t=>e.id!==t.id&&!t.isEmbeddedIn(e)))},getBBox:function(){return this.getCellsBBox(this.getCells())},getCellsBBox:function(e,t={}){const{rotate:r=!0}=t;return rv(e).reduce((function(e,t){const i=t.getBBox({rotate:r});return i?e?e.union(i):i:e}),null)},translate:function(e,t,r){var i=this.getCells().filter((function(e){return!e.isEmbedded()}));return Wg(i,"translate",e,t,r),this},resize:function(e,t,r){return this.resizeCells(e,t,this.getCells(),r)},resizeCells:function(e,t,r,i){var n=this.getCellsBBox(r);if(n){var o=Math.max(e/n.width,0),s=Math.max(t/n.height,0);Wg(r,"scale",o,s,n.origin(),i)}return this},startBatch:function(e,t){return t=t||{},this._batches[e]=(this._batches[e]||0)+1,this.trigger("batch:start",Vg({},t,{batchName:e}))},stopBatch:function(e,t){return t=t||{},this._batches[e]=(this._batches[e]||0)-1,this.trigger("batch:stop",Vg({},t,{batchName:e}))},hasActiveBatch:function(e){const t=this._batches;let r;return r=0===arguments.length?Object.keys(t):Array.isArray(e)?e:[e],r.some((e=>t[e]>0))}},{validations:{multiLinks:function(e,t){var{source:r,target:i}=t.attributes;if(r.id&&i.id){var n=t.getSourceCell();if(n)if(e.getConnectedLinks(n,{outbound:!0}).filter((function(e){var{source:t,target:n}=e.attributes;return t&&t.id===r.id&&(!t.port||t.port===r.port)&&n&&n.id===i.id&&(!n.port||n.port===i.port)})).length>1)return!1}return!0},linkPinning:function(e,t){var{source:r,target:i}=t.attributes;return r.id&&i.id}}});!function(e,t,r){if(Ug(r)){if(!Oy[r])throw new Error('Unknown wrapper: "'+r+'"');r=Oy[r]}if(!ev(r))throw new Error("Wrapper must be a function.");rv(t).forEach((function(t){e[t]=r(e[t])}))}(E_.prototype,["resetCells","addCells","removeCells"],Oy.cells);const I_={GRID:"grid",CELLS:"cells",BACK:"back",FRONT:"front",TOOLS:"tools",LABELS:"labels"},L_=Mx.extend({tagName:"g",svgElement:!0,pivotNodes:null,defaultTheme:null,options:{name:""},className:function(){return tb(`${this.options.name}-layer`)},init:function(){this.pivotNodes={}},insertSortedNode:function(e,t){this.el.insertBefore(e,this.insertPivot(t))},insertNode:function(e){const{el:t}=this;e.parentNode!==t&&t.appendChild(e)},insertPivot:function(e){const{el:t,pivotNodes:r}=this;(e=+e)||(e=0);let i=r[e];if(i)return i;i=r[e]=document.createComment("z-index:"+(e+1));let n=-1/0;for(let t in r)t=+t,t<e&&t>n&&(n=t);if(n!==-1/0){const e=r[n];t.insertBefore(i,e.nextSibling)}else t.insertBefore(i,t.firstChild);return i},removePivots:function(){const{el:e,pivotNodes:t}=this;for(let r in t)e.removeChild(t[r]);this.pivotNodes={}}}),O_=["transform","x","y","cx","cy","dx","dy","x1","y1","x2","y2","points","d","r","rx","ry","width","height","stroke-width","font-size"].reduce(((e,t)=>(e[t]=!0,e)),{}),M_=["r","rx","ry","width","height","stroke-width","font-size"].reduce(((e,t)=>(e[t]=!0,e)),{});function R_(e,t){const r={};for(let i in e)e.hasOwnProperty(i)&&(r[i]=$_(i,e[i],t));return r}function $_(e,t,r){if(e in O_&&ny(t)){let i=ay(t,r);return e in M_&&(i=Math.max(0,i)),i}return t}const N_={DEFAULT:"default",EMBEDDING:"embedding",CONNECTING:"connecting",MAGNET_AVAILABILITY:"magnetAvailability",ELEMENT_AVAILABILITY:"elementAvailability"},D_=Mx.extend({tagName:"g",svgElement:!0,selector:"root",metrics:null,className:function(){var e=["cell"],t=this.model.get("type");return t&&t.toLowerCase().split(".").forEach((function(t,r,i){e.push("type-"+i.slice(0,r+1).join("-"))})),e.join(" ")},_presentationAttributes:null,_flags:null,setFlags:function(){var e,t,r,i={},n={},o=0,s=dv(this,"presentationAttributes");for(var a in s)if(s.hasOwnProperty(a)){var l=s[a];for(Array.isArray(l)||(l=[l]),e=0,t=l.length;e<t;e++){var c=i[r=l[e]];c||(c=i[r]=1<<o++),n[a]|=c}}var d=dv(this,"initFlag");for(Array.isArray(d)||(d=[d]),e=0,t=d.length;e<t;e++)i[r=d[e]]||(i[r]=1<<o++);if(o>25)throw new Error("dia.CellView: Maximum number of flags exceeded.");this._flags=i,this._presentationAttributes=n},hasFlag:function(e,t){return e&this.getFlag(t)},removeFlag:function(e,t){return e^e&this.getFlag(t)},getFlag:function(e){var t=this._flags;if(!t)return 0;var r=0;if(Array.isArray(e))for(var i=0,n=e.length;i<n;i++)r|=t[e[i]];else r|=t[e];return r},attributes:function(){var e=this.model;return{"model-id":e.id,"data-type":e.attributes.type}},constructor:function(e){e.id=e.id||lb(this),Mx.call(this,e)},initialize:function(){this.setFlags(),Mx.prototype.initialize.apply(this,arguments),this.cleanNodesCache(),this.startListening()},startListening:function(){this.listenTo(this.model,"change",this.onAttributesChange)},onAttributesChange:function(e,t){var r=e.getChangeFlag(this._presentationAttributes);!t.updateHandled&&r&&(t.dirty&&this.hasFlag(r,"UPDATE")&&(r|=this.getFlag("RENDER")),t.tool&&(t.async=!1),this.requestUpdate(r,t))},requestUpdate:function(e,t){const{paper:r}=this;r&&e>0&&r.requestViewUpdate(this,e,this.UPDATE_PRIORITY,t)},parseDOMJSON:function(e,t){var r=rb(e),i=r.selectors,n=r.groupSelectors;for(var o in n){if(i[o])throw new Error("dia.CellView: ambiguous group selector");i[o]=n[o]}if(t){var s=this.selector;if(i[s])throw new Error("dia.CellView: ambiguous root selector.");i[s]=t}return{fragment:r.fragment,selectors:i}},can:function(e){var t=ev(this.options.interactive)?this.options.interactive(this):this.options.interactive;return Bg(t)&&!1!==t[e]||function(e){var t=Object.prototype.toString;return!0===e||!1===e||!!e&&"object"==typeof e&&t.call(e)===nf}(t)&&!1!==t},findBySelector:function(e,t,r){if(!e||"."===e)return[t];if(r){var i=r[e];if(i)return Array.isArray(i)?i:[i]}return this.useCSSSelectors?eb(t).find(e).toArray():[]},findNodes:function(e){return this.findBySelector(e,this.el,this.selectors)},findNode:function(e){const[t=null]=this.findNodes(e);return t},notify:function(e){if(this.paper){var t=Array.prototype.slice.call(arguments,1);this.trigger.apply(this,[e].concat(t)),this.paper.trigger.apply(this.paper,[e,this].concat(t))}},getBBox:function(e){var t;if(e&&e.useModelGeometry){var r=this.model;t=r.getBBox().bbox(r.angle())}else t=this.getNodeBBox(this.el);return this.paper.localToPaperRect(t)},getNodeBBox:function(e){const t=this.getNodeBoundingRect(e),r=this.getRootTranslateMatrix().multiply(this.getNodeRotateMatrix(e)),i=this.getNodeMatrix(e);return ef.transformRect(t,r.multiply(i))},getNodeRotateMatrix(e){return!this.rotatableNode||this.rotatableNode.contains(e)?this.getRootRotateMatrix():ef.createSVGMatrix()},getNodeUnrotatedBBox:function(e){var t=this.getNodeBoundingRect(e),r=this.getNodeMatrix(e),i=this.getRootTranslateMatrix();return ef.transformRect(t,i.multiply(r))},getRootTranslateMatrix:function(){var e=this.model.position();return ef.createSVGMatrix().translate(e.x,e.y)},getRootRotateMatrix:function(){var e=ef.createSVGMatrix(),t=this.model,r=t.angle();if(r){var i=t.getBBox(),n=i.width/2,o=i.height/2;e=e.translate(n,o).rotate(r).translate(-n,-o)}return e},_notifyHighlight:function(e,t,r={}){const{el:i}=this;let n;if("string"==typeof t?n=this.findNode(t)||i:[n=i]=this.$(t),r.partial=n!==i,void 0===r.type){let e;switch(!0){case r.embedding:e=N_.EMBEDDING;break;case r.connecting:e=N_.CONNECTING;break;case r.magnetAvailability:e=N_.MAGNET_AVAILABILITY;break;case r.elementAvailability:e=N_.ELEMENT_AVAILABILITY;break;default:e=N_.DEFAULT}r.type=e}return this.notify(e,n,r),this},highlight:function(e,t){return this._notifyHighlight("cell:highlight",e,t)},unhighlight:function(e,t={}){return this._notifyHighlight("cell:unhighlight",e,t)},findMagnet:function(e){const t=this.el;let r=this.$(e)[0];r||(r=t);do{const e=r.getAttribute("magnet"),i=r===t;if((e||i)&&"false"!==e)return r;if(i)return;r=r.parentNode}while(r)},findProxyNode:function(e,t){e||(e=this.el);const r=e.getAttribute(`${t}-selector`);if(r){const e=this.findNode(r);if(e)return e}return e},getSelector:function(e,t){var r;if(e===this.el)return"string"==typeof t&&(r=":scope > "+t),r;if(e){var i=ef(e).index()+1;r=e.tagName+":nth-child("+i+")",t&&(r+=" > "+t),r=this.getSelector(e.parentNode,r)}return r},addLinkFromMagnet:function(e,t,r){var i=this.paper,n=i.model,o=i.getDefaultLink(this,e);return o.set({source:this.getLinkEnd(e,t,r,o,"source"),target:{x:t,y:r}}).addTo(n,{async:!1,ui:!0}),o.findView(i)},getLinkEnd:function(e,...t){const r=this.model,i=r.id,n=this.findAttributeNode("port",e),o=e.getAttribute("joint-selector"),s={id:i};if(null!=o&&(s.magnet=o),null!=n){let t=n.getAttribute("port");"number"===n.getAttribute("port-id-type")&&(t=parseInt(t,10)),s.port=t,r.hasPort(t)||o||(s.selector=this.getSelector(e))}else null==o&&this.el!==e&&(s.selector=this.getSelector(e));return this.customizeLinkEnd(s,e,...t)},customizeLinkEnd:function(e,t,r,i,n,o){const{paper:s}=this,{connectionStrategy:a}=s.options;if("function"==typeof a){var l=a.call(s,e,this,t,new Iu(r,i),n,o,s);if(l)return l}return e},getMagnetFromLinkEnd:function(e){var t,r=e.port,i=e.magnet,n=this.model;return null!=r&&n.isElement()&&n.hasPort(r)?t=this.findPortNode(r,i)||this.el:(i||(i=e.selector),i||null==r||(i='[port="'+r+'"]'),t=this.findNode(i)),this.findProxyNode(t,"magnet")},dragLinkStart:function(e,t,r,i){this.model.startBatch("add-link");const n=this.addLinkFromMagnet(t,r,i);n.notifyPointerdown(e,r,i),n.eventData(e,n.startArrowheadMove("target",{whenNotAllowed:"remove"})),this.eventData(e,{linkView:n})},dragLink:function(e,t,r){var i=this.eventData(e),n=i.linkView;if(n)n.pointermove(e,t,r);else{var o=this.paper,s=o.options.magnetThreshold,a=this.getEventTarget(e),l=i.targetMagnet;if("onleave"===s){if(l===a||ef(l).contains(a))return}else if(o.eventData(e).mousemoved<=s)return;this.dragLinkStart(e,l,t,r)}},dragLinkEnd:function(e,t,r){var i=this.eventData(e).linkView;i&&(i.pointerup(e,t,r),this.model.stopBatch("add-link"))},getAttributeDefinition:function(e){return this.model.constructor.getAttributeDefinition(e)},setNodeAttributes:function(e,t){Qg(t)||(e instanceof SVGElement?ef(e).attr(t):eb(e).attr(t))},processNodeAttributes:function(e,t){var r,i,n,o,s,a,l,c,d,h=[];const u={};for(r in t)t.hasOwnProperty(r)&&(u[ef.attributeNames[r]]=t[r]);for(r in u)u.hasOwnProperty(r)&&(i=u[r],!(n=this.getAttributeDefinition(r))||ev(n.qualify)&&!n.qualify.call(this,i,e,u,this)?(a||(a={}),a[r]=i):(Ug(n.set)&&(a||(a={}),a[n.set]=i),null!==i&&h.push(r,n)));for(o=0,s=h.length;o<s;o+=2)r=h[o],n=h[o+1],i=t[r],ev(n.set)&&(l||(l={}),l[r]=i),ev(n.position)&&(c||(c={}),c[r]=i),ev(n.offset)&&(d||(d={}),d[r]=i);return{raw:u,normal:a,set:l,position:c,offset:d}},updateRelativeAttributes:function(e,t,r,i){var n,o;i||(i={});var s=R_(t.raw||{},r),a=t.normal||{};for(const e in a)a[e]=s[e];var l=t.set,c=t.position,d=t.offset;for(n in l){o=s[n];var h=this.getAttributeDefinition(n).set.call(this,o,r.clone(),e,s,this);Bg(h)?Vg(a,h):void 0!==h&&(a[n]=h)}if(e instanceof HTMLElement)this.setNodeAttributes(e,a);else{var u,p,f,m=a.transform,g=ef.transformStringToMatrix(m),v=Iu(g.e,g.f);if(m&&(a=hv(a,"transform"),g.e=g.f=0),c||d){var b=this.getNodeScale(e,i.scalableNode);u=b.sx,p=b.sy}var y=!1;for(n in c)o=s[n],(f=this.getAttributeDefinition(n).position.call(this,o,r.clone(),e,s,this))&&(v.offset(Iu(f).scale(u,p)),y||(y=!0));this.setNodeAttributes(e,a);var x=!1;if(d){var w=this.getNodeBoundingRect(e);if(w.width>0&&w.height>0){var _=ef.transformRect(w,g).scale(1/u,1/p);for(n in d)o=s[n],(f=this.getAttributeDefinition(n).offset.call(this,o,_,e,s,this))&&(v.offset(Iu(f).scale(u,p)),x||(x=!0))}}(void 0!==m||y||x)&&(v.round(1),g.e=v.x,g.f=v.y,e.setAttribute("transform",ef.matrixToTransformString(g)))}},getNodeScale:function(e,t){var r,i;if(t&&t.contains(e)){var n=t.scale();r=1/n.sx,i=1/n.sy}else r=1,i=1;return{sx:r,sy:i}},cleanNodesCache:function(){this.metrics={}},nodeCache:function(e){var t=this.metrics;if(!t)return{};var r=ef.ensureId(e),i=t[r];return i||(i=t[r]={}),i},getNodeData:function(e){var t=this.nodeCache(e);return t.data||(t.data={}),t.data},getNodeBoundingRect:function(e){var t=this.nodeCache(e);return void 0===t.boundingRect&&(t.boundingRect=ef(e).getBBox()),new Yu(t.boundingRect)},getNodeMatrix:function(e){const t=this.nodeCache(e);if(void 0===t.magnetMatrix){const{rotatableNode:r,el:i}=this;let n;n=r&&r.contains(e)?r:i,t.magnetMatrix=ef(e).getTransformToElement(n)}return ef.createSVGMatrix(t.magnetMatrix)},getNodeShape:function(e){var t=this.nodeCache(e);return void 0===t.geometryShape&&(t.geometryShape=ef(e).toGeometryShape()),t.geometryShape.clone()},isNodeConnection:function(e){return this.model.isLink()&&(!e||e===this.el)},findNodesAttributes:function(e,t,r,i){var n,o,s,a,l={},c=[];for(var d in e)if(e.hasOwnProperty(d)&&(s=e[d],tv(s))){var h=r[d]=this.findBySelector(d,t,i);for(n=0,o=h.length;n<o;n++){var u=h[n];a=ef.ensureId(u);var p=i&&i[d]===u,f=l[a];if(f){f.array||(c.push(a),f.array=!0,f.attributes=[f.attributes],f.selectedLength=[f.selectedLength]);var m=f.attributes,g=f.selectedLength;if(p)m.unshift(s),g.unshift(-1);else{var v=Yg(g,o);m.splice(v,0,s),g.splice(v,0,o)}}else l[a]={attributes:s,selectedLength:p?-1:o,node:u,array:!1}}}for(n=0,o=c.length;n<o;n++)(s=l[a=c[n]]).attributes=vv({},...s.attributes.reverse());return l},getEventTarget:function(e,t={}){const{target:r,type:i,clientX:n=0,clientY:o=0}=e;return t.fromPoint||"touchmove"===i||"touchend"===i||"pointerId"in e&&r.hasPointerCapture(e.pointerId)?document.elementFromPoint(n,o):r},updateDOMSubtreeAttributes:function(e,t,r){r||(r={}),r.rootBBox||(r.rootBBox=Yu()),r.selectors||(r.selectors=this.selectors);var i,n,o,s,a,l={},c={},d=[],h=[],u=r.roAttributes,p=this.findNodesAttributes(u||t,e,l,r.selectors),f=u?this.findNodesAttributes(t,e,l,r.selectors):p;for(var m in p)if(o=(s=p[m]).attributes,n=s.node,(a=this.processNodeAttributes(n,o)).set||a.position||a.offset||a.raw.ref){var g,v=f[m]&&f[m].attributes,b=v&&void 0===o.ref?v.ref:o.ref;if(b){if(!(g=(l[b]||this.findBySelector(b,e,r.selectors))[0]))throw new Error('dia.CellView: "'+b+'" reference does not exist.')}else g=null;if(i={node:n,refNode:g,processedAttributes:a,allAttributes:v},g){var y=h.findIndex((function(e){return e.refNode===n}));y>-1?h.splice(y,0,i):h.push(i)}else d.push(i)}else this.setNodeAttributes(n,R_(a.normal,r.rootBBox));d.push(...h);for(let e=0,t=d.length;e<t;e++){i=d[e],n=i.node;const t=(g=i.refNode)?ef.ensureId(g):"";let o=c[t];o||(o=c[t]=g?ef(g).getBBox({target:z_(n,g)}):r.rootBBox),u?(a=this.processNodeAttributes(n,i.allAttributes),this.mergeProcessedAttributes(a,i.processedAttributes)):a=i.processedAttributes,this.updateRelativeAttributes(n,a,o,r)}},mergeProcessedAttributes:function(e,t){e.set||(e.set={}),e.position||(e.position={}),e.offset||(e.offset={}),Vg(e.set,t.set),Vg(e.position,t.position),Vg(e.offset,t.offset);var r=e.normal&&e.normal.transform;void 0!==r&&t.normal&&(t.normal.transform=r),e.normal=t.normal},onMount(e){e||(this.mountTools(),Gx.mount(this))},onDetach(){this.unmountTools(),Gx.unmount(this)},onRemove:function(){this.removeTools(),this.removeHighlighters()},_toolsView:null,hasTools:function(e){var t=this._toolsView;return!!t&&(!e||t.getName()===e)},addTools:function(e){return this.removeTools(),e&&(this._toolsView=e,e.configure({relatedView:this}),e.listenTo(this.paper,"tools:event",this.onToolEvent.bind(this))),this},unmountTools(){const e=this._toolsView;return e&&e.unmount(),this},mountTools(){const e=this._toolsView;return e&&!e.isMounted()&&e.mount(),this},updateTools:function(e){var t=this._toolsView;return t&&t.update(e),this},removeTools:function(){var e=this._toolsView;return e&&(e.remove(),this._toolsView=null),this},hideTools:function(){var e=this._toolsView;return e&&e.hide(),this},showTools:function(){var e=this._toolsView;return e&&e.show(),this},onToolEvent:function(e){switch(e){case"remove":this.removeTools();break;case"hide":this.hideTools();break;case"show":this.showTools()}},removeHighlighters:function(){Gx.remove(this)},updateHighlighters:function(e=!1){Gx.update(this,null,e)},transformHighlighters:function(){Gx.transform(this)},preventDefaultInteraction(e){this.eventData(e,{defaultInteractionPrevented:!0})},isDefaultInteractionPrevented(e){const{defaultInteractionPrevented:t=!1}=this.eventData(e);return t},pointerdblclick:function(e,t,r){this.notify("cell:pointerdblclick",e,t,r)},pointerclick:function(e,t,r){this.notify("cell:pointerclick",e,t,r)},contextmenu:function(e,t,r){this.notify("cell:contextmenu",e,t,r)},pointerdown:function(e,t,r){const{model:i}=this,{graph:n}=i;n&&(i.startBatch("pointer"),this.eventData(e,{graph:n})),this.notify("cell:pointerdown",e,t,r)},pointermove:function(e,t,r){this.notify("cell:pointermove",e,t,r)},pointerup:function(e,t,r){const{graph:i}=this.eventData(e);this.notify("cell:pointerup",e,t,r),i&&i.stopBatch("pointer",{cell:this.model})},mouseover:function(e){this.notify("cell:mouseover",e)},mouseout:function(e){this.notify("cell:mouseout",e)},mouseenter:function(e){this.notify("cell:mouseenter",e)},mouseleave:function(e){this.notify("cell:mouseleave",e)},mousewheel:function(e,t,r,i){this.notify("cell:mousewheel",e,t,r,i)},onevent:function(e,t,r,i){this.notify(t,e,r,i)},onmagnet:function(){},magnetpointerdblclick:function(){},magnetcontextmenu:function(){},checkMouseleave(e){const{paper:t,model:r}=this;if(t.isAsync()){if(r.isLink()){const e=r.getSourceElement();if(e){const r=t.findViewByModel(e);r&&(t.dumpView(r),t.checkViewVisibility(r))}const i=r.getTargetElement();if(i){const e=t.findViewByModel(i);e&&(t.dumpView(e),t.checkViewVisibility(e))}}t.dumpView(this),t.checkViewVisibility(this)}const i=this.getEventTarget(e,{fromPoint:!0}),n=t.findView(i);n!==this&&(this.mouseleave(e),n&&n.mouseenter(e))},setInteractivity:function(e){this.options.interactive=e}},{Flags:{TOOLS:"TOOLS"},Highlighting:N_,addPresentationAttributes:function(e){return vv({},dv(this.prototype,"presentationAttributes"),e,(function(e,t){if(e&&t)return"string"==typeof e&&(e=[e]),"string"==typeof t&&(t=[t]),Array.isArray(e)&&Array.isArray(t)?Jg(e.concat(t)):void 0}))},evalAttribute:$_});function z_(e,t){let r=e;do{if(r.contains(t))return r;r=r.parentNode}while(r);return null}Object.defineProperty(D_.prototype,"useCSSSelectors",{get(){const e=this.model.useCSSSelectors;return void 0!==e?e:qv}});const B_={TOOLS:D_.Flags.TOOLS,UPDATE:"UPDATE",TRANSLATE:"TRANSLATE",RESIZE:"RESIZE",PORTS:"PORTS",ROTATE:"ROTATE",RENDER:"RENDER"},F_="move",U_="magnet",V_=D_.extend({_removePorts:function(){},_renderPorts:function(){},className:function(){var e=D_.prototype.className.apply(this).split(" ");return e.push("element"),e.join(" ")},initialize:function(){D_.prototype.initialize.apply(this,arguments),this._initializePorts()},presentationAttributes:{attrs:[B_.UPDATE],position:[B_.TRANSLATE,B_.TOOLS],size:[B_.RESIZE,B_.PORTS,B_.TOOLS],angle:[B_.ROTATE,B_.TOOLS],markup:[B_.RENDER],ports:[B_.PORTS]},initFlag:[B_.RENDER],UPDATE_PRIORITY:0,confirmUpdate:function(e,t){const{useCSSSelectors:r}=this;this.hasFlag(e,B_.PORTS)&&(this._removePorts(),this._cleanPortsCache());let i=!1;if(this.hasFlag(e,B_.RENDER))this.render(),this.updateTools(t),this.updateHighlighters(!0),i=!0,e=this.removeFlag(e,[B_.RENDER,B_.UPDATE,B_.RESIZE,B_.TRANSLATE,B_.ROTATE,B_.PORTS,B_.TOOLS]);else{let n=!1;this.hasFlag(e,B_.RESIZE)&&(this.resize(t),n=!0,e=this.removeFlag(e,[B_.RESIZE,B_.UPDATE]),r&&(e=this.removeFlag(e,B_.PORTS))),this.hasFlag(e,B_.UPDATE)&&(this.update(this.model,null,t),e=this.removeFlag(e,B_.UPDATE),n=!0,r&&(e=this.removeFlag(e,B_.PORTS))),this.hasFlag(e,B_.TRANSLATE)&&(this.translate(),e=this.removeFlag(e,B_.TRANSLATE),i=!0),this.hasFlag(e,B_.ROTATE)&&(this.rotate(),e=this.removeFlag(e,B_.ROTATE),i=!0),this.hasFlag(e,B_.PORTS)&&(this._renderPorts(),n=!0,e=this.removeFlag(e,B_.PORTS)),n&&this.updateHighlighters(!1)}return i&&this.transformHighlighters(),this.hasFlag(e,B_.TOOLS)&&(this.updateTools(t),e=this.removeFlag(e,B_.TOOLS)),e},_initializePorts:function(){},update:function(e,t){this.cleanNodesCache();const{useCSSSelectors:r}=this;r&&this._removePorts();var i=this.model,n=i.attr();this.updateDOMSubtreeAttributes(this.el,n,{rootBBox:new Yu(i.size()),selectors:this.selectors,scalableNode:this.scalableNode,rotatableNode:this.rotatableNode,roAttributes:t===n?null:t}),r&&this._renderPorts()},rotatableSelector:"rotatable",scalableSelector:"scalable",scalableNode:null,rotatableNode:null,renderMarkup:function(){var e=this.model,t=e.get("markup")||e.markup;if(!t)throw new Error("dia.ElementView: markup required");if(Array.isArray(t))return this.renderJSONMarkup(t);if("string"==typeof t)return this.renderStringMarkup(t);throw new Error("dia.ElementView: invalid markup")},renderJSONMarkup:function(e){var t=this.parseDOMJSON(e,this.el),r=this.selectors=t.selectors;this.rotatableNode=ef(r[this.rotatableSelector])||null,this.scalableNode=ef(r[this.scalableSelector])||null,this.vel.append(t.fragment)},renderStringMarkup:function(e){var t=this.vel;t.append(ef(e)),this.rotatableNode=t.findOne(".rotatable"),this.scalableNode=t.findOne(".scalable"),(this.selectors={})[this.selector]=this.el},render:function(){return this.vel.empty(),this.renderMarkup(),this.scalableNode&&this.update(),this.resize(),this.rotatableNode?(this.rotate(),this.translate()):this.updateTransformation(),this.useCSSSelectors||this._renderPorts(),this},resize:function(e){if(this.scalableNode)return this.sgResize(e);this.model.attributes.angle&&this.rotate(),this.update()},translate:function(){if(this.rotatableNode)return this.rgTranslate();this.updateTransformation()},rotate:function(){if(this.rotatableNode)return this.rgRotate(),void this.update();this.updateTransformation()},updateTransformation:function(){var e=this.getTranslateString(),t=this.getRotateString();t&&(e+=" "+t),this.vel.attr("transform",e)},getTranslateString:function(){var e=this.model.attributes.position;return"translate("+e.x+","+e.y+")"},getRotateString:function(){var e=this.model.attributes,t=e.angle;if(!t)return null;var r=e.size;return"rotate("+t+","+r.width/2+","+r.height/2+")"},rgRotate:function(){this.rotatableNode.attr("transform",this.getRotateString())},rgTranslate:function(){this.vel.attr("transform",this.getTranslateString())},sgResize:function(e){var t=this.model,r=t.angle(),i=t.size(),n=this.scalableNode,o=!1;n.node.getElementsByTagName("path").length>0&&(o=!0);var s=n.getBBox({recursive:o}),a=i.width/(s.width||1),l=i.height/(s.height||1);n.attr("transform","scale("+a+","+l+")");var c=this.rotatableNode,d=c&&c.attr("transform");if(d){c.attr("transform",d+" rotate("+-r+","+i.width/2+","+i.height/2+")");var h=n.getBBox({target:this.paper.cells});t.set("position",{x:h.x,y:h.y},Vg({updateHandled:!0},e)),this.translate(),this.rotate()}this.update()},prepareEmbedding:function(e={}){const t=e.model||this.model,r=(e.paper||this.paper).model,i=e.initialZIndices={},n=t.getEmbeddedCells({deep:!0}),o=r.getConnectedLinks(t,{deep:!0,includeEnclosed:!0});[t,...n,...o].forEach((e=>i[e.id]=e.attributes.z)),t.startBatch("to-front"),t.toFront({deep:!0,ui:!0});const s=r.getElements().reduce(((e,t)=>Math.max(e,t.attributes.z||0)),0);o.forEach((e=>{e.attributes.z<=s&&e.set("z",s+1,{ui:!0})})),t.stopBatch("to-front");const a=t.parent();if(a){r.getCell(a).unembed(t,{ui:!0}),e.initialParentId=a}else e.initialParentId=null},processEmbedding:function(e={},t,r,i){const n=e.model||this.model,o=e.paper||this.paper,s=o.model,{findParentBy:a,frontParentOnly:l,validateEmbedding:c}=o.options;let d;d=ev(a)?rv(a.call(s,this,t,r,i)):"pointer"===a?rv(s.findModelsFromPoint({x:r,y:i})):s.findModelsUnderElement(n,{searchBy:a}),d=d.filter((e=>e instanceof Ly&&n.id!==e.id&&!e.isEmbeddedIn(n))),l&&(d=d.slice(-1));let h=null;const u=e.candidateEmbedView;for(let e=d.length-1;e>=0;e--){const t=d[e];if(u&&u.model.id==t.id){h=u;break}{const e=t.findView(o);if(!ev(c)||c.call(o,this,e)){h=e;break}}}h&&h!=u&&(this.clearEmbedding(e),e.candidateEmbedView=h.highlight(h.findProxyNode(null,"container"),{embedding:!0})),!h&&u&&this.clearEmbedding(e)},clearEmbedding:function(e){e||(e={});var t=e.candidateEmbedView;t&&(t.unhighlight(t.findProxyNode(null,"container"),{embedding:!0}),e.candidateEmbedView=null)},finalizeEmbedding:function(e={}){const t=e.candidateEmbedView,r=e.model||this.model,i=e.paper||this.paper;if(t)t.model.embed(r,{ui:!0}),t.unhighlight(t.findProxyNode(null,"container"),{embedding:!0}),e.candidateEmbedView=null;else{const{validateUnembedding:t}=i.options,{initialParentId:r}=e;if(r&&"function"==typeof t&&!t.call(i,this))return void this._disallowUnembed(e)}i.model.getConnectedLinks(r,{deep:!0}).forEach((e=>{e.reparent({ui:!0})}))},_disallowUnembed:function(e){const{model:t,whenNotAllowed:r="revert"}=e,i=t||this.model,n=(e.paper||this.paper).model;switch(r){case"remove":i.remove({ui:!0});break;case"revert":{const{initialParentId:t,initialPosition:r,initialZIndices:o}=e;if(r){const{x:e,y:t}=r;i.position(e,t,{deep:!0,ui:!0})}o&&Object.keys(o).forEach((e=>{const t=n.getCell(e);t&&t.set("z",o[e],{ui:!0})}));const s=n.getCell(t);s&&s.embed(i,{ui:!0});break}}},getDelegatedView:function(){for(var e=this,t=e.model,r=e.paper;e&&!t.isLink();){if(!t.isEmbedded()||e.can("stopDelegation"))return e;t=t.getParentCell(),e=r.findViewByModel(t)}return null},findProxyNode:function(e,t){e||(e=this.el);const r=e.getAttribute(`${t}-selector`);if(r){const t=this.findAttribute("port",e);if(t){const e=this.findPortNode(t,r);if(e)return e}else{const e=this.findNode(r);if(e)return e}}return e},notifyPointerdown(e,t,r){D_.prototype.pointerdown.call(this,e,t,r),this.notify("element:pointerdown",e,t,r)},notifyPointermove(e,t,r){D_.prototype.pointermove.call(this,e,t,r),this.notify("element:pointermove",e,t,r)},notifyPointerup(e,t,r){this.notify("element:pointerup",e,t,r),D_.prototype.pointerup.call(this,e,t,r)},pointerdblclick:function(e,t,r){D_.prototype.pointerdblclick.apply(this,arguments),this.notify("element:pointerdblclick",e,t,r)},pointerclick:function(e,t,r){D_.prototype.pointerclick.apply(this,arguments),this.notify("element:pointerclick",e,t,r)},contextmenu:function(e,t,r){D_.prototype.contextmenu.apply(this,arguments),this.notify("element:contextmenu",e,t,r)},pointerdown:function(e,t,r){this.notifyPointerdown(e,t,r),this.dragStart(e,t,r)},pointermove:function(e,t,r){const i=this.eventData(e),{targetMagnet:n,action:o,delegatedView:s}=i;switch(n&&this.magnetpointermove(e,n,t,r),o){case U_:this.dragMagnet(e,t,r);break;case F_:(s||this).drag(e,t,r);default:if(i.preventPointerEvents)break;this.notifyPointermove(e,t,r)}this.eventData(e,i)},pointerup:function(e,t,r){const i=this.eventData(e),{targetMagnet:n,action:o,delegatedView:s}=i;switch(n&&this.magnetpointerup(e,n,t,r),o){case U_:this.dragMagnetEnd(e,t,r);break;case F_:(s||this).dragEnd(e,t,r);default:if(i.preventPointerEvents)break;this.notifyPointerup(e,t,r)}n&&this.magnetpointerclick(e,n,t,r),this.checkMouseleave(e)},mouseover:function(e){D_.prototype.mouseover.apply(this,arguments),this.notify("element:mouseover",e)},mouseout:function(e){D_.prototype.mouseout.apply(this,arguments),this.notify("element:mouseout",e)},mouseenter:function(e){D_.prototype.mouseenter.apply(this,arguments),this.notify("element:mouseenter",e)},mouseleave:function(e){D_.prototype.mouseleave.apply(this,arguments),this.notify("element:mouseleave",e)},mousewheel:function(e,t,r,i){D_.prototype.mousewheel.apply(this,arguments),this.notify("element:mousewheel",e,t,r,i)},onmagnet:function(e,t,r){const{currentTarget:i}=e;this.magnetpointerdown(e,i,t,r),this.eventData(e,{targetMagnet:i}),this.dragMagnetStart(e,t,r)},magnetpointerdown:function(e,t,r,i){this.notify("element:magnet:pointerdown",e,t,r,i)},magnetpointermove:function(e,t,r,i){this.notify("element:magnet:pointermove",e,t,r,i)},magnetpointerup:function(e,t,r,i){this.notify("element:magnet:pointerup",e,t,r,i)},magnetpointerdblclick:function(e,t,r,i){this.notify("element:magnet:pointerdblclick",e,t,r,i)},magnetcontextmenu:function(e,t,r,i){this.notify("element:magnet:contextmenu",e,t,r,i)},dragStart:function(e,t,r){if(this.isDefaultInteractionPrevented(e))return;var i=this.getDelegatedView();if(!i||!i.can("elementMove"))return;this.eventData(e,{action:F_,delegatedView:i});const n=i.model.position();i.eventData(e,{initialPosition:n,pointerOffset:n.difference(t,r),restrictedArea:this.paper.getRestrictedArea(i,t,r)})},dragMagnetStart:function(e,t,r){const{paper:i}=this,n=e.isPropagationStopped();if(n&&this.eventData(e,{preventPointerEvents:!0}),this.isDefaultInteractionPrevented(e)||!this.can("addLinkFromMagnet"))return;const{targetMagnet:o=e.currentTarget}=this.eventData(e);e.stopPropagation(),i.options.validateMagnet.call(i,this,o,e)?(i.options.magnetThreshold<=0&&this.dragLinkStart(e,o,t,r),this.eventData(e,{action:U_})):n?this.dragStart(e,t,r):this.pointerdown(e,t,r)},drag:function(e,t,r){var i=this.paper,n=i.options.gridSize,o=this.model,s=this.eventData(e),{pointerOffset:a,restrictedArea:l,embedding:c}=s,d=cu(t+a.x,n),h=cu(r+a.y,n);o.position(d,h,{restrictedArea:l,deep:!0,ui:!0}),i.options.embeddingMode&&(c||(this.prepareEmbedding(s),c=!0),this.processEmbedding(s,e,t,r)),this.eventData(e,{embedding:c})},dragMagnet:function(e,t,r){this.dragLink(e,t,r)},dragEnd:function(e,t,r){var i=this.eventData(e);i.embedding&&this.finalizeEmbedding(i)},dragMagnetEnd:function(e,t,r){this.dragLinkEnd(e,t,r)},magnetpointerclick:function(e,t,r,i){var n=this.paper;n.eventData(e).mousemoved>n.options.clickThreshold||this.notify("element:magnet:pointerclick",e,t,r,i)}},{Flags:B_});Vg(V_.prototype,Jy);const j_={TOOLS:D_.Flags.TOOLS,RENDER:"RENDER",UPDATE:"UPDATE",LABELS:"LABELS",SOURCE:"SOURCE",TARGET:"TARGET",CONNECTOR:"CONNECTOR"},G_=D_.extend({className:function(){var e=D_.prototype.className.apply(this).split(" ");return e.push("link"),e.join(" ")},_labelCache:null,_labelSelectors:null,_V:null,_dragData:null,metrics:null,decimalsRounding:2,initialize:function(){D_.prototype.initialize.apply(this,arguments),this._labelCache={},this._labelSelectors={},this._V={},this.cleanNodesCache()},presentationAttributes:{markup:[j_.RENDER],attrs:[j_.UPDATE],router:[j_.UPDATE],connector:[j_.CONNECTOR],labels:[j_.LABELS],labelMarkup:[j_.LABELS],vertices:[j_.UPDATE],source:[j_.SOURCE,j_.UPDATE],target:[j_.TARGET,j_.UPDATE]},initFlag:[j_.RENDER,j_.SOURCE,j_.TARGET,j_.TOOLS],UPDATE_PRIORITY:1,confirmUpdate:function(e,t){if(t||(t={}),this.hasFlag(e,j_.SOURCE)){if(!this.updateEndProperties("source"))return e;e=this.removeFlag(e,j_.SOURCE)}if(this.hasFlag(e,j_.TARGET)){if(!this.updateEndProperties("target"))return e;e=this.removeFlag(e,j_.TARGET)}const{paper:r,sourceView:i,targetView:n}=this;if(r&&(i&&!r.isViewMounted(i)||n&&!r.isViewMounted(n)))return e;if(this.hasFlag(e,j_.RENDER))return this.render(),this.updateHighlighters(!0),this.updateTools(t),e=this.removeFlag(e,[j_.RENDER,j_.UPDATE,j_.LABELS,j_.TOOLS,j_.CONNECTOR]),Qy.test("isSafari")&&this.__fixSafariBug268376(),e;let o=!1;const{model:s}=this,{attributes:a}=s;let l=this.hasFlag(e,j_.LABELS);l&&(this.onLabelsChange(s,a.labels,t),e=this.removeFlag(e,j_.LABELS),o=!0);const c=this.hasFlag(e,j_.UPDATE),d=this.hasFlag(e,j_.CONNECTOR);return(c||d)&&(c?t.translateBy&&s.isRelationshipEmbeddedIn(t.translateBy)?this.translate(t.tx,t.ty):this.update():(this.updatePath(),this.updateDOM()),this.updateTools(t),e=this.removeFlag(e,[j_.UPDATE,j_.TOOLS,j_.CONNECTOR]),l=!1,o=!0),l&&this.updateLabelPositions(),o&&this.updateHighlighters(),this.hasFlag(e,j_.TOOLS)&&(this.updateTools(t),e=this.removeFlag(e,j_.TOOLS)),e},__fixSafariBug268376:function(){const{el:e}=this,t=Array.from(e.childNodes),r=document.createDocumentFragment();for(let i=0,n=t.length;i<n;i++)e.removeChild(t[i]),r.appendChild(t[i]);e.appendChild(r)},requestConnectionUpdate:function(e){this.requestUpdate(this.getFlag(j_.UPDATE),e)},isLabelsRenderRequired:function(e={}){const t=this.model.previous("labels");if(!t)return!0;if("propertyPathArray"in e&&"propertyValue"in e){var r=e.propertyPathArray||[],i=r.length;if(i>1)if(!!t[r[1]]){if(2===i)return"markup"in Object(e.propertyValue);if("markup"!==r[2])return!1}}return!0},onLabelsChange:function(e,t,r){this.isLabelsRenderRequired(r)?this.renderLabels():this.updateLabels()},render:function(){return this.vel.empty(),this.unmountLabels(),this._V={},this.renderMarkup(),this.renderLabels(),this.update(),this},renderMarkup:function(){var e=this.model,t=e.get("markup")||e.markup;if(!t)throw new Error("dia.LinkView: markup required");if(Array.isArray(t))return this.renderJSONMarkup(t);if("string"==typeof t)return this.renderStringMarkup(t);throw new Error("dia.LinkView: invalid markup")},renderJSONMarkup:function(e){var t=this.parseDOMJSON(e,this.el);this.selectors=t.selectors,this.vel.append(t.fragment)},renderStringMarkup:function(e){var t=ef(e);Array.isArray(t)||(t=[t]),this.vel.append(t)},_getLabelMarkup:function(e){if(e){if(Array.isArray(e))return this.parseDOMJSON(e,null);if("string"==typeof e)return this._getLabelStringMarkup(e);throw new Error("dia.linkView: invalid label markup")}},_getLabelStringMarkup:function(e){var t=ef(e),r=document.createDocumentFragment();if(Array.isArray(t))for(var i=0,n=t.length;i<n;i++){var o=t[i].node;r.appendChild(o)}else r.appendChild(t.node);return{fragment:r,selectors:{}}},_normalizeLabelMarkup:function(e){if(e){var t,r=e.fragment;if(!(e.fragment instanceof DocumentFragment&&e.fragment.hasChildNodes()))throw new Error("dia.LinkView: invalid label markup.");var i=r.childNodes;return(t=i.length>1||"G"!==i[0].nodeName.toUpperCase()?ef("g").append(r):ef(i[0])).addClass("label"),{node:t.node,selectors:e.selectors}}},renderLabels:function(){var e=this._V,t=e.labels,r=this._labelCache={},i=this._labelSelectors={},n=this.model,o=n.attributes.labels||[],s=o.length;if(0===s)return t&&t.remove(),this;t?t.empty():(t=e.labels=ef("g").addClass("labels"),this.options.labelsLayer&&(t.addClass(tb(dv(this,"className"))),t.attr("model-id",n.id)));for(var a=0;a<s;a++){var l,c,d=o[a],h=this._normalizeLabelMarkup(this._getLabelMarkup(d.markup));if(h)l=h.node,c=h.selectors;else{var u=n._builtins.defaultLabel,p=this._normalizeLabelMarkup(this._getLabelMarkup(u.markup)),f=n._getDefaultLabel(),m=this._normalizeLabelMarkup(this._getLabelMarkup(f.markup))||p;l=m.node,c=m.selectors}l.setAttribute("label-idx",a),t.append(l),r[a]=l;var g=this.selector;if(c[g])throw new Error("dia.LinkView: ambiguous label root selector.");c[g]=l,i[a]=c}return t.parent()||this.mountLabels(),this.updateLabels(),this},mountLabels:function(){const{el:e,paper:t,model:r,_V:i,options:n}=this,{labels:o}=i;if(!o||!r.hasLabels())return;const{node:s}=o;n.labelsLayer?t.getLayerView(n.labelsLayer).insertSortedNode(s,r.get("z")):s.parentNode!==e&&e.appendChild(s)},unmountLabels:function(){const{options:e,_V:t}=this;if(!t)return;const{labels:r}=t;r&&e.labelsLayer&&r.remove()},findLabelNodes:function(e,t){const r=this._labelCache[e];if(!r)return[];const i=this._labelSelectors[e];return this.findBySelector(t,r,i)},findLabelNode:function(e,t){const[r=null]=this.findLabelNodes(e,t);return r},_mergeLabelAttrs:function(e,t,r,i){if(null===t)return null;if(void 0===t){if(null===r)return null;if(void 0===r){if(e)return;return i}return e?r:vv({},i,r)}return e?vv({},r,t):vv({},i,r,t)},_mergeLabelSize:function(e,t){if(null===e)return null;if(void 0===e){if(null===t)return null;if(void 0===t)return;return t}return vv({},t,e)},updateLabels:function(){if(!this._V.labels)return this;for(var e=this.model,t=e.get("labels")||[],r=this.can("labelMove"),i=e._builtins.defaultLabel.attrs,n=e._getDefaultLabel(),o=n.markup,s=n.attrs,a=n.size,l=0,c=t.length;l<c;l++){var d=this._labelCache[l];d.setAttribute("cursor",r?"move":"default");var h=this._labelSelectors[l],u=t[l],p=u.markup,f=u.attrs,m=u.size,g=this._mergeLabelAttrs(p||o,f,s,i),v=this._mergeLabelSize(m,a);this.updateDOMSubtreeAttributes(d,g,{rootBBox:new Yu(v),selectors:h})}return this},removeRedundantLinearVertices:function(e){const t=this.model,r=t.vertices(),i=[this.sourceAnchor,...r,this.targetAnchor],n=i.length,o=new Ku(i);o.simplify({threshold:.001});const s=o.points.map((e=>e.toJSON())),a=s.length;return n===a?0:(t.vertices(s.slice(1,a-1),e),n-a)},getEndView:function(e){switch(e){case"source":return this.sourceView||null;case"target":return this.targetView||null;default:throw new Error("dia.LinkView: type parameter required.")}},getEndAnchor:function(e){switch(e){case"source":return new Iu(this.sourceAnchor);case"target":return new Iu(this.targetAnchor);default:throw new Error("dia.LinkView: type parameter required.")}},getEndConnectionPoint:function(e){switch(e){case"source":return new Iu(this.sourcePoint);case"target":return new Iu(this.targetPoint);default:throw new Error("dia.LinkView: type parameter required.")}},getEndMagnet:function(e){switch(e){case"source":var t=this.sourceView;if(!t)break;return this.sourceMagnet||t.el;case"target":var r=this.targetView;if(!r)break;return this.targetMagnet||r.el;default:throw new Error("dia.LinkView: type parameter required.")}},update:function(){return this.updateRoute(),this.updatePath(),this.updateDOM(),this},translate:function(e=0,t=0){const{route:r,path:i}=this;if(!r||!i)return;const n=new Ku(r);n.translate(e,t),this.route=n.points,this.sourcePoint.offset(e,t),this.targetPoint.offset(e,t),this.sourceAnchor.offset(e,t),this.targetAnchor.offset(e,t),i.translate(e,t),this.updateDOM()},updateDOM(){const{el:e,model:t,selectors:r}=this;this.cleanNodesCache(),this.updateDOMSubtreeAttributes(e,t.attr(),{selectors:r}),this.updateLabelPositions(),this.options.perpendicular=null},updateRoute:function(){const{model:e}=this,t=e.vertices(),r=this.findAnchors(t),i=this.sourceAnchor=r.source,n=this.targetAnchor=r.target,o=this.findRoute(t);this.route=o;var s=this.findConnectionPoints(o,i,n);this.sourcePoint=s.source,this.targetPoint=s.target},updatePath:function(){const{route:e,sourcePoint:t,targetPoint:r}=this,i=this.findPath(e,t.clone(),r.clone());this.path=i},findAnchorsOrdered:function(e,t,r,i){var n,o,s,a,l=this.model,c=l.get(e),d=l.get(r),h=this.getEndView(e),u=this.getEndView(r),p=this.getEndMagnet(e),f=this.getEndMagnet(r);h?(s=t?new Iu(t):u?f:new Iu(d),n=this.getAnchor(c.anchor,h,p,s,e)):n=new Iu(c),u?(a=new Iu(i||n),o=this.getAnchor(d.anchor,u,f,a,r)):o=new Iu(d);var m={};return m[e]=n,m[r]=o,m},findAnchors:function(e){var t=this.model,r=e[0],i=e[e.length-1];return t.target().priority&&!t.source().priority?this.findAnchorsOrdered("target",i,"source",r):this.findAnchorsOrdered("source",r,"target",i)},findConnectionPoints:function(e,t,r){var i,n,o,s,a=e[0],l=e[e.length-1],c=this.model,d=c.get("source"),h=c.get("target"),u=this.sourceView,p=this.targetView,f=this.paper.options;if(u&&!u.isNodeConnection(this.sourceMagnet)){i=this.sourceMagnet||u.el;var m=d.connectionPoint||f.defaultConnectionPoint,g=new Ru(a||r,t);o=this.getConnectionPoint(m,u,i,g,"source")}else o=t;if(p&&!p.isNodeConnection(this.targetMagnet)){n=this.targetMagnet||p.el;var v=h.connectionPoint||f.defaultConnectionPoint,b=new Ru(l||t,r);s=this.getConnectionPoint(v,p,n,b,"target")}else s=r;return{source:o,target:s}},getAnchor:function(e,t,r,i,n){var o,s=t.isNodeConnection(r),a=this.paper.options;if(e||(e=s?a.defaultLinkAnchor:this.options.perpendicular?{name:"perpendicular"}:a.defaultAnchor),!e)throw new Error("Anchor required.");if("function"==typeof e)o=e;else{var l=e.name;if("function"!=typeof(o=a[s?"linkAnchorNamespace":"anchorNamespace"][l]))throw new Error("Unknown anchor: "+l)}var c=o.call(this,t,r,i,e.args||{},n,this);return c?c.round(this.decimalsRounding):new Iu},getConnectionPoint:function(e,t,r,i,n){var o,s,a=i.end,l=this.paper.options;if(!e)return a;if("function"==typeof e)s=e;else{var c=e.name;if("function"!=typeof(s=l.connectionPointNamespace[c]))throw new Error("Unknown connection point: "+c)}return(o=s.call(this,i,t,r,e.args||{},n,this))?o.round(this.decimalsRounding):a},_getDefaultLabelPositionProperty:function(){var e=this.model,t=e._builtins.defaultLabel.position,r=e._getDefaultLabel(),i=this._normalizeLabelPosition(r.position);return vv({},t,i)},_normalizeLabelPosition:function(e){return"number"==typeof e?{distance:e,offset:null,angle:0,args:null}:e},_mergeLabelPositionProperty:function(e,t){return null===e?null:void 0===e?null===t?null:t:vv({},t,e)},updateLabelPositions:function(){if(!this._V.labels)return this;if(!this.path)return this;var e=this.model.get("labels")||[];if(!e.length)return this;for(var t=this._getDefaultLabelPositionProperty(),r=0,i=e.length;r<i;r++){var n=this._labelCache[r];if(n){var o=e[r],s=this._normalizeLabelPosition(o.position),a=this._mergeLabelPositionProperty(s,t),l=this._getLabelTransformationMatrix(a);n.setAttribute("transform",ef.matrixToTransformString(l)),this._cleanLabelMatrices(r)}}return this},_cleanLabelMatrices:function(e){const{metrics:t,_labelSelectors:r}=this,i=r[e];if(i)for(let e in i){const{id:r}=i[e];r&&r in t&&delete t[r].magnetMatrix}},updateEndProperties:function(e){const{model:t,paper:r}=this,i=`${e}View`,n=t.get(e),o=n&&n.id;if(!o)return this[i]=null,this.updateEndMagnet(e),!0;const s=r.getModelById(o);if(!s)throw new Error("LinkView: invalid "+e+" cell.");const a=s.findView(r);return!!a&&(this[i]=a,this.updateEndMagnet(e),!0)},updateEndMagnet:function(e){const t=`${e}Magnet`,r=this.getEndView(e);if(r){let i=r.getMagnetFromLinkEnd(this.model.get(e));i===r.el&&(i=null),this[t]=i}else this[t]=null},_getLabelPositionProperty:function(e){return this.model.label(e).position||{}},_getLabelPositionAngle:function(e){return this._getLabelPositionProperty(e).angle||0},_getLabelPositionArgs:function(e){return this._getLabelPositionProperty(e).args},_getDefaultLabelPositionArgs:function(){return(this.model._getDefaultLabel().position||{}).args},_mergeLabelPositionArgs:function(e,t){return null===e?null:void 0===e?null===t?null:t:vv({},t,e)},addLabel:function(e,t,r,i){var n,o,s,a=0;"number"!=typeof e?(n=e.x,o=e.y,"number"==typeof t?(a=t,s=r):s=t):(n=e,o=t,"number"==typeof r?(a=r,s=i):s=r);var l=this._getDefaultLabelPositionArgs(),c=s,d=this._mergeLabelPositionArgs(c,l),h={position:this.getLabelPosition(n,o,a,d)};return this.model.insertLabel(-1,h,s),-1},addVertex:function(e,t,r){var i="number"!=typeof e,n=i?e.x:e,o=i?e.y:t,s=i?t:r,a={x:n,y:o},l=this.getVertexIndex(n,o);return this.model.insertVertex(l,a,s),l},sendToken:function(e,t,r){var i,n,o;Bg(t)?(i=t.duration,n="reverse"===t.direction,o=t.connection):(i=t,n=!1,o=null);var s={dur:(i=i||1e3)+"ms",repeatCount:1,calcMode:"linear",fill:"freeze"};n&&(s.keyPoints="1;0",s.keyTimes="0;1");var a,l=ef(e);if("string"==typeof o)a=this.findNode(o);else{var c=this._V;a=c.connection?c.connection.node:this.el.querySelector("path")}if(!(a instanceof SVGPathElement))throw new Error("dia.LinkView: token animation requires a valid connection path.");l.appendTo(this.paper.cells).animateAlongPath(s,a),setTimeout(function(e,t){return function(){e.remove(),"function"==typeof t&&t()}}(l,r),i)},findRoute:function(e){e||(e=[]);var t=this.paper.options.routerNamespace||l_,r=this.model.router(),i=this.paper.options.defaultRouter;if(!r){if(!i)return e.map(Iu);r=i}var n=ev(r)?r:t[r.name];if(!ev(n))throw new Error('dia.LinkView: unknown router: "'+r.name+'".');var o=r.args||{},s=n.call(this,e,o,this);return s||e.map(Iu)},findPath:function(e,t,r){var i=this.paper.options.connectorNamespace||Tx,n=this.model.connector(),o=this.paper.options.defaultConnector;n||(n=o||{});var s=ev(n)?n:i[n.name];if(!ev(s))throw new Error('dia.LinkView: unknown connector: "'+n.name+'".');var a=Xg(n.args||{});a.raw=!0;var l=s.call(this,t,r,e,a,this);return"string"==typeof l&&(l=new ap(ef.normalizePathData(l))),l},getConnection:function(){var e=this.path;return e?e.clone():null},getSerializedConnection:function(){var e=this.path;if(!e)return null;var t=this.metrics;if(t.hasOwnProperty("data"))return t.data;var r=e.serialize();return t.data=r,r},getConnectionSubdivisions:function(){var e=this.path;if(!e)return null;var t=this.metrics;if(t.hasOwnProperty("segmentSubdivisions"))return t.segmentSubdivisions;var r=e.getSegmentSubdivisions();return t.segmentSubdivisions=r,r},getConnectionLength:function(){var e=this.path;if(!e)return 0;var t=this.metrics;if(t.hasOwnProperty("length"))return t.length;var r=e.length({segmentSubdivisions:this.getConnectionSubdivisions()});return t.length=r,r},getPointAtLength:function(e){var t=this.path;return t?t.pointAtLength(e,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getPointAtRatio:function(e){var t=this.path;return t?(fb(e)&&(e=parseFloat(e)/100),t.pointAt(e,{segmentSubdivisions:this.getConnectionSubdivisions()})):null},getTangentAtLength:function(e){var t=this.path;return t?t.tangentAtLength(e,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getTangentAtRatio:function(e){var t=this.path;return t?t.tangentAt(e,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getClosestPoint:function(e){var t=this.path;return t?t.closestPoint(e,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getClosestPointLength:function(e){var t=this.path;return t?t.closestPointLength(e,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getClosestPointRatio:function(e){var t=this.path;return t?t.closestPointNormalizedLength(e,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getLabelPosition:function(e,t,r,i){var n,o={},s=0;"number"==typeof r?(s=r,n=i):n=r,n&&(o.args=n);var a,l,c=!(n&&n.absoluteDistance),d=n&&n.absoluteDistance&&n.reverseDistance,h=n&&n.absoluteOffset,u=this.path,p={segmentSubdivisions:this.getConnectionSubdivisions()},f=new Iu(e,t),m=u.closestPointT(f,p),g=u.lengthAtT(m,p);if(c&&(g=g/this.getConnectionLength()||0),d&&(g=-1*(this.getConnectionLength()-g)||1),o.distance=g,h||(a=u.tangentAtT(m)),a)l=a.pointOffset(f);else{var v=u.pointAtT(m),b=f.difference(v);l={x:b.x,y:b.y}}return o.offset=l,o.angle=s,o},_getLabelTransformationMatrix:function(e){var t,r=0,i={};if("number"==typeof e)t=e;else{if("number"!=typeof e.distance)throw new Error("dia.LinkView: invalid label position distance.");i=e.args||{},t=e.distance,r=e.angle||0}var n=t>0&&t<=1,o=0,s={x:0,y:0};if(e.offset){var a=e.offset;"number"==typeof a&&(o=a),a.x&&(s.x=a.x),a.y&&(s.y=a.y)}var l,c=0!==s.x||0!==s.y||0===o,d=i.keepGradient,h=i.ensureLegibility,u=this.path,p={segmentSubdivisions:this.getConnectionSubdivisions()},f=n?t*this.getConnectionLength():t,m=u.tangentAtLength(f,p),g=r;if(m){if(c)(l=m.start.clone()).offset(s);else{var v=m.clone();v.rotate(m.start,-90),v.setLength(o),l=v.end}d&&(g=m.angle()+r,h&&(g=lu((g+90)%180-90)))}else l=u.start.clone(),c&&l.offset(s);return ef.createSVGMatrix().translate(l.x,l.y).rotate(g)},getLabelCoordinates:function(e){var t=this._getLabelTransformationMatrix(e);return new Iu(t.e,t.f)},getVertexIndex:function(e,t){for(var r=this.model.vertices(),i=this.getClosestPointLength(new Iu(e,t)),n=0,o=r.length;n<o;n++){var s=r[n];if(i<this.getClosestPointLength(s))break}return n},notifyPointerdown(e,t,r){D_.prototype.pointerdown.call(this,e,t,r),this.notify("link:pointerdown",e,t,r)},notifyPointermove(e,t,r){D_.prototype.pointermove.call(this,e,t,r),this.notify("link:pointermove",e,t,r)},notifyPointerup(e,t,r){this.notify("link:pointerup",e,t,r),D_.prototype.pointerup.call(this,e,t,r)},pointerdblclick:function(e,t,r){D_.prototype.pointerdblclick.apply(this,arguments),this.notify("link:pointerdblclick",e,t,r)},pointerclick:function(e,t,r){D_.prototype.pointerclick.apply(this,arguments),this.notify("link:pointerclick",e,t,r)},contextmenu:function(e,t,r){D_.prototype.contextmenu.apply(this,arguments),this.notify("link:contextmenu",e,t,r)},pointerdown:function(e,t,r){this.notifyPointerdown(e,t,r),this.dragStart(e,t,r)},pointermove:function(e,t,r){var i=this._dragData;switch(i&&this.eventData(e,i),this.eventData(e).action){case"label-move":this.dragLabel(e,t,r);break;case"arrowhead-move":this.dragArrowhead(e,t,r);break;case"move":this.drag(e,t,r)}i&&Vg(i,this.eventData(e)),this.notifyPointermove(e,t,r)},pointerup:function(e,t,r){var i=this._dragData;switch(i&&(this.eventData(e,i),this._dragData=null),this.eventData(e).action){case"label-move":this.dragLabelEnd(e,t,r);break;case"arrowhead-move":this.dragArrowheadEnd(e,t,r);break;case"move":this.dragEnd(e,t,r)}this.notifyPointerup(e,t,r),this.checkMouseleave(e)},mouseover:function(e){D_.prototype.mouseover.apply(this,arguments),this.notify("link:mouseover",e)},mouseout:function(e){D_.prototype.mouseout.apply(this,arguments),this.notify("link:mouseout",e)},mouseenter:function(e){D_.prototype.mouseenter.apply(this,arguments),this.notify("link:mouseenter",e)},mouseleave:function(e){D_.prototype.mouseleave.apply(this,arguments),this.notify("link:mouseleave",e)},mousewheel:function(e,t,r,i){D_.prototype.mousewheel.apply(this,arguments),this.notify("link:mousewheel",e,t,r,i)},onlabel:function(e,t,r){this.notifyPointerdown(e,t,r),this.dragLabelStart(e,t,r),this.eventData(e).stopPropagation&&e.stopPropagation()},dragLabelStart:function(e,t,r){if(this.can("labelMove")){if(this.isDefaultInteractionPrevented(e))return;var i=e.currentTarget,n=parseInt(i.getAttribute("label-idx"),10),o=this._getDefaultLabelPositionProperty(),s=this._normalizeLabelPosition(this._getLabelPositionProperty(n)),a=this._mergeLabelPositionProperty(s,o),l=this.getLabelCoordinates(a),c=l.x-t,d=l.y-r,h=this._getLabelPositionAngle(n),u=this._getLabelPositionArgs(n),p=this._getDefaultLabelPositionArgs(),f=this._mergeLabelPositionArgs(u,p);this.eventData(e,{action:"label-move",labelIdx:n,dx:c,dy:d,positionAngle:h,positionArgs:f,stopPropagation:!0})}else this.eventData(e,{stopPropagation:!0});this.paper.delegateDragEvents(this,e.data)},dragArrowheadStart:function(e,t,r){if(this.can("arrowheadMove")){var i=e.target.getAttribute("end"),n=this.startArrowheadMove(i,{ignoreBackwardsCompatibility:!0});this.eventData(e,n)}},dragStart:function(e,t,r){this.isDefaultInteractionPrevented(e)||this.can("linkMove")&&this.eventData(e,{action:"move",dx:t,dy:r})},dragLabel:function(e,t,r){var i=this.eventData(e),n={position:this.getLabelPosition(t+i.dx,r+i.dy,i.positionAngle,i.positionArgs)};this.paper.options.snapLabels&&delete n.position.offset;const o={ui:!0};this.paper.isAsync()&&"touchmove"===e.type&&(o.async=!1),this.model.label(i.labelIdx,n,o)},dragArrowhead:function(e,t,r){if(this.paper.options.snapLinks){!this._snapArrowhead(e,t,r)&&this.paper.options.snapLinksSelf&&this._snapArrowheadSelf(e,t,r)}else this.paper.options.snapLinksSelf?this._snapArrowheadSelf(e,t,r):this._connectArrowhead(this.getEventTarget(e),t,r,this.eventData(e))},drag:function(e,t,r){var i=this.eventData(e);this.model.translate(t-i.dx,r-i.dy,{ui:!0}),this.eventData(e,{dx:t,dy:r})},dragLabelEnd:function(){},dragArrowheadEnd:function(e,t,r){var i=this.eventData(e),n=this.paper;n.options.snapLinks?this._snapArrowheadEnd(i):this._connectArrowheadEnd(i,t,r),n.linkAllowed(this)?(this._finishEmbedding(i),this._notifyConnectEvent(i,e)):this._disallow(i),this._afterArrowheadMove(i)},dragEnd:function(){},_disallow:function(e){if("remove"===e.whenNotAllowed)this.model.remove({ui:!0});else this.model.set(e.arrowhead,e.initialEnd,{ui:!0})},_finishEmbedding:function(e){this.paper.options.embeddingMode&&this.model.reparent()&&(e.z=null)},_notifyConnectEvent:function(e,t){var r=e.arrowhead,i=e.initialEnd,n=this.model.prop(r);if(n&&!Zy.endsEqual(i,n)){var o=this.paper;i.id&&this.notify("link:disconnect",t,o.findViewByModel(i.id),e.initialMagnet,r),n.id&&this.notify("link:connect",t,o.findViewByModel(n.id),e.magnetUnderPointer,r)}},_snapToPoints:function(e,t,r){let i=null,n=1/0,o=null,s=1/0,a=e.x,l=e.y;for(let r=0;r<t.length;r++){const a=Math.abs(t[r].x-e.x);a<n&&(n=a,i=t[r]);const l=Math.abs(t[r].y-e.y);l<s&&(s=l,o=t[r])}return n<r&&(a=i.x),s<r&&(l=o.y),{x:a,y:l}},_snapArrowheadSelf:function(e,t,r){const{paper:i,model:n}=this,{snapLinksSelf:o}=i.options,s=this.eventData(e),a=o.radius||20,l=[this.getEndAnchor("source"===s.arrowhead?"target":"source"),...n.vertices()],c=this._snapToPoints({x:t,y:r},l,a),d=i.localToClientPoint(c);this._connectArrowhead(document.elementFromPoint(d.x,d.y),c.x,c.y,this.eventData(e))},_snapArrowhead:function(e,t,r){const{paper:i}=this,{snapLinks:n,connectionStrategy:o}=i.options,s=this.eventData(e);let a=!1;var l=n.radius||50,c=i.findViewsInArea({x:t-l,y:r-l,width:2*l,height:2*l}),d=s.closestView||null,h=s.closestMagnet||null,u=s.magnetProxy||null;s.closestView=s.closestMagnet=s.magnetProxy=null;var p,f=Number.MAX_VALUE,m=new Iu(t,r);c.forEach((function(e){const t=[];"false"!==e.el.getAttribute("magnet")&&t.push({bbox:e.model.getBBox(),magnet:e.el}),e.$("[magnet]").toArray().forEach((r=>{t.push({bbox:e.getNodeBBox(r),magnet:r})})),t.forEach((t=>{const{magnet:r,bbox:n}=t,o=n.center().squaredDistance(m);if(o<f){(h===r||i.options.validateConnection.apply(i,s.validateConnectionArgs(e,e.el===r?null:r)))&&(f=o,s.closestView=e,s.closestMagnet=r)}}))}),this);var g=null,v=s.closestView,b=s.closestMagnet;b&&(g=s.magnetProxy=v.findProxyNode(b,"highlighter"));var y=s.arrowhead,x=h!==b;if(d&&x&&d.unhighlight(u,{connecting:!0,snapping:!0}),v){const{prevEnd:e,prevX:i,prevY:n}=s;if(s.prevX=t,s.prevY=r,a=!0,!x&&("function"!=typeof o||i===t&&n===r))return a;if(p=v.getLinkEnd(b,t,r,this.model,y),!x&&Kg(e,p))return a;s.prevEnd=p,x&&v.highlight(g,{connecting:!0,snapping:!0})}else p={x:t,y:r};return this.model.set(y,p||{x:t,y:r},{ui:!0}),d&&this.notify("link:snap:disconnect",e,d,h,y),v&&this.notify("link:snap:connect",e,v,b,y),a},_snapArrowheadEnd:function(e){var t=e.closestView,r=e.closestMagnet;t&&r&&(t.unhighlight(e.magnetProxy,{connecting:!0,snapping:!0}),e.magnetUnderPointer=t.findMagnet(r)),e.closestView=e.closestMagnet=null},_connectArrowhead:function(e,t,r,i){const{paper:n,model:o}=this;if(i.eventTarget!==e){i.magnetProxy&&i.viewUnderPointer.unhighlight(i.magnetProxy,{connecting:!0});const t=i.viewUnderPointer=n.findView(e);if(t){const r=i.magnetUnderPointer=t.findMagnet(e),o=i.magnetProxy=t.findProxyNode(r,"highlighter");r&&this.paper.options.validateConnection.apply(n,i.validateConnectionArgs(t,r))?o&&t.highlight(o,{connecting:!0}):(i.magnetUnderPointer=null,i.magnetProxy=null)}else i.magnetUnderPointer=null,i.magnetProxy=null}i.eventTarget=e,o.set(i.arrowhead,{x:t,y:r},{ui:!0})},_connectArrowheadEnd:function(e={},t,r){const{model:i}=this,{viewUnderPointer:n,magnetUnderPointer:o,magnetProxy:s,arrowhead:a}=e;if(!o||!s||!n)return;n.unhighlight(s,{connecting:!0});const l=n.getLinkEnd(o,t,r,i,a);i.set(a,l,{ui:!0})},_beforeArrowheadMove:function(e){e.z=this.model.get("z"),this.model.toFront();var t=this.el.style;e.pointerEvents=t.pointerEvents,t.pointerEvents="none",this.paper.options.markAvailable&&this._markAvailableMagnets(e)},_afterArrowheadMove:function(e){null!==e.z&&(this.model.set("z",e.z,{ui:!0}),e.z=null),this.el.style.pointerEvents=e.pointerEvents,this.paper.options.markAvailable&&this._unmarkAvailableMagnets(e)},_createValidateConnectionArgs:function(e){var t,r=[];r[4]=e,r[5]=this;var i=0,n=0;"source"===e?(i=2,t="target"):(n=2,t="source");var o=this.model.get(t);if(o.id){var s=r[i]=this.paper.findViewByModel(o.id),a=s.getMagnetFromLinkEnd(o);a===s.el&&(a=void 0),r[i+1]=a}return function(e,t){return r[n]=e,r[n+1]=e.el===t?void 0:t,r}},_markAvailableMagnets:function(e){function t(e,t){var r=e.paper;return r.options.validateConnection.apply(r,this.validateConnectionArgs(e,t))}var r=this.paper,i=r.model.getCells();e.marked={};for(var n=0,o=i.length;n<o;n++){var s=i[n].findView(r);if(s){var a=Array.prototype.slice.call(s.el.querySelectorAll("[magnet]"));"false"!==s.el.getAttribute("magnet")&&a.push(s.el);var l=a.filter(t.bind(e,s));if(l.length>0){for(var c=0,d=l.length;c<d;c++)s.highlight(l[c],{magnetAvailability:!0});s.highlight(null,{elementAvailability:!0}),e.marked[s.model.id]=l}}}},_unmarkAvailableMagnets:function(e){for(var t,r,i=Object.keys(e.marked),n=0,o=i.length;n<o;n++){t=i[n],r=e.marked[t];var s=this.paper.findViewByModel(t);if(s){for(var a=0,l=r.length;a<l;a++)s.unhighlight(r[a],{magnetAvailability:!0});s.unhighlight(null,{elementAvailability:!0})}}e.marked=null},startArrowheadMove:function(e,t){t||(t={});var r={action:"arrowhead-move",arrowhead:e,whenNotAllowed:t.whenNotAllowed||"revert",initialMagnet:this[e+"Magnet"]||(this[e+"View"]?this[e+"View"].el:null),initialEnd:Xg(this.model.get(e)),validateConnectionArgs:this._createValidateConnectionArgs(e)};return this._beforeArrowheadMove(r),!0!==t.ignoreBackwardsCompatibility&&(this._dragData=r),r},onMount:function(){D_.prototype.onMount.apply(this,arguments),this.mountLabels()},onDetach:function(){D_.prototype.onDetach.apply(this,arguments),this.unmountLabels()},onRemove:function(){D_.prototype.onRemove.apply(this,arguments),this.unmountLabels()}},{Flags:j_});Object.defineProperty(G_.prototype,"sourceBBox",{enumerable:!0,get:function(){var e=this.sourceView;if(!e){var t=this.model.source();return new Yu(t.x,t.y)}var r=this.sourceMagnet;return e.isNodeConnection(r)?new Yu(this.sourceAnchor):e.getNodeBBox(r||e.el)}}),Object.defineProperty(G_.prototype,"targetBBox",{enumerable:!0,get:function(){var e=this.targetView;if(!e){var t=this.model.target();return new Yu(t.x,t.y)}var r=this.targetMagnet;return e.isNodeConnection(r)?new Yu(this.targetAnchor):e.getNodeBBox(r||e.el)}});const H_=L_.extend({style:{"pointer-events":"none"},_gridCache:null,_gridSettings:null,init(){L_.prototype.init.apply(this,arguments);const{options:{paper:e}}=this;this._gridCache=null,this._gridSettings=[],this.listenTo(e,"transform resize",this.updateGrid)},setGrid(e){this._gridSettings=this.getGridSettings(e),this.renderGrid()},getGridSettings(e){const t=[];if(e){(Array.isArray(e)?e:[e||{}]).forEach((e=>{t.push(...this._resolveDrawGridOption(e))}))}return t},removeGrid(){const{_gridCache:e}=this;e&&(e.root.remove(),this._gridCache=null)},renderGrid(){const{options:{paper:e}}=this,{_gridSettings:t}=this;if(this.removeGrid(),0===t.length)return;const r=e.options.drawGridSize||e.options.gridSize;if(r<=1)return;const i=this._getGridRefs();t.forEach(((t,n)=>{const o=this._getPatternId(n),s=vv({},t),{scaleFactor:a=1}=s;let l;s.width=r*a||1,s.height=r*a||1,i.exist(o)?l=i.get(o):(l=ef("pattern",{id:o,patternUnits:"userSpaceOnUse"},ef(s.markup)),i.add(o,l)),ev(s.render)&&s.render(l.node.firstChild,s,e),l.attr({width:s.width,height:s.height})})),i.root.appendTo(this.el),this.updateGrid()},updateGrid(){const{_gridCache:e,_gridSettings:t,options:{paper:r}}=this;if(!e)return;const{root:i,patterns:n}=e,{x:o,y:s,width:a,height:l}=r.getArea();i.attr({x:o,y:s,width:a,height:l});for(const e in n){n[e].attr({x:-o,y:-s})}t.forEach(((e,t)=>{if(ev(e.update)){const i=n[this._getPatternId(t)];e.update(i.node.firstChild,e,r)}}))},_getPatternId(e){return`pattern_${this.options.paper.cid}_${e}`},_getGridRefs(){let{_gridCache:e}=this;if(e)return e;const t=ef("defs"),r=ef("svg",{width:"100%",height:"100%"},[t]);return e=this._gridCache={root:r,patterns:{},add:function(e,i){const n=ef("rect",{width:"100%",height:"100%",fill:`url(#${e})`});t.append(i),r.append(n),this.patterns[e]=i},get:function(e){return this.patterns[e]},exist:function(e){return void 0!==this.patterns[e]}},e},_resolveDrawGridOption(e){var t=this.options.patterns;if(Ug(e)&&Array.isArray(t[e]))return t[e].map((function(e){return Vg({},e)}));var r=e||{args:[{}]},i=Array.isArray(r),n=r.name;if(i||n||r.markup||(n="dot"),n&&Array.isArray(t[n])){var o=t[n].map((function(e){return Vg({},e)})),s=Array.isArray(r.args)?r.args:[r.args||{}];jg(s[0],hv(e,"args"));for(var a=0;a<s.length;a++)o[a]&&Vg(o[a],s[a]);return o}return i?r:[r]}}),W_={NONE:"sorting-none",APPROX:"sorting-approximate",EXACT:"sorting-exact"},q_=1/0,Y_=9007199254740991,J_=D_.Highlighting,X_={[J_.DEFAULT]:{name:"stroke",options:{padding:3}},[J_.MAGNET_AVAILABILITY]:{name:"addClass",options:{className:"available-magnet"}},[J_.ELEMENT_AVAILABILITY]:{name:"addClass",options:{className:"available-cell"}}},Z_=[{name:I_.GRID},{name:I_.BACK},{name:I_.CELLS},{name:I_.LABELS},{name:I_.FRONT},{name:I_.TOOLS}],Q_=Mx.extend({className:"paper",options:{width:800,height:600,gridSize:1,drawGrid:!1,drawGridSize:null,background:!1,elementView:V_,linkView:G_,snapLabels:!1,snapLinks:!1,snapLinksSelf:!1,labelsLayer:!1,multiLinks:!0,guard:function(e,t){return!1},highlighting:X_,preventContextMenu:!0,preventDefaultBlankAction:!0,preventDefaultViewAction:!0,restrictTranslate:!1,markAvailable:!1,defaultLink:function(){const{cellNamespace:e}=this.model.get("cells"),t=nb(e,["standard","Link"]);if(!t)throw new Error("dia.Paper: no default link model found. Use `options.defaultLink` to specify a default link model.");return new t},defaultConnector:{name:"normal"},defaultRouter:{name:"normal"},defaultAnchor:{name:"center"},defaultLinkAnchor:{name:"connectionRatio"},defaultConnectionPoint:{name:"boundary"},connectionStrategy:null,validateMagnet:function(e,t,r){return"passive"!==t.getAttribute("magnet")},validateConnection:function(e,t,r,i,n,o){return("target"===n?r:e)instanceof V_},embeddingMode:!1,validateEmbedding:function(e,t){return!0},validateUnembedding:function(e){return!0},findParentBy:"bbox",frontParentOnly:!0,interactive:{labelMove:!1},linkPinning:!0,allowLink:null,clickThreshold:0,moveThreshold:0,magnetThreshold:0,sorting:W_.APPROX,frozen:!1,autoFreeze:!1,onViewUpdate:function(e,t,r,i,n){t&(e.FLAG_INSERT|e.FLAG_REMOVE)||i.mounting||i.isolate||n.requestConnectedLinksUpdate(e,r,i)},onViewPostponed:function(e,t,r){return r.forcePostponedViewUpdate(e,t)},beforeRender:null,afterRender:null,viewport:null,cellViewNamespace:null,routerNamespace:null,connectorNamespace:null,highlighterNamespace:Kx,anchorNamespace:P_,linkAnchorNamespace:p_,connectionPointNamespace:cw,overflow:!1},events:{dblclick:"pointerdblclick",dbltap:"pointerdblclick",contextmenu:"contextmenu",mousedown:"pointerdown",touchstart:"pointerdown",mouseover:"mouseover",mouseout:"mouseout",mouseenter:"mouseenter",mouseleave:"mouseleave",wheel:"mousewheel","mouseenter .joint-cell":"mouseenter","mouseleave .joint-cell":"mouseleave","mouseenter .joint-tools":"mouseenter","mouseleave .joint-tools":"mouseleave","dblclick .joint-cell [magnet]":"magnetpointerdblclick","contextmenu .joint-cell [magnet]":"magnetcontextmenu","mousedown .joint-link .label":"onlabel","touchstart .joint-link .label":"onlabel","dragstart .joint-cell image":"onImageDragStart"},documentEvents:{mousemove:"pointermove",touchmove:"pointermove",mouseup:"pointerup",touchend:"pointerup",touchcancel:"pointerup"},stylesheet:"\n        .joint-element .scalable * {\n            vector-effect: non-scaling-stroke;\n        }\n    ",svg:null,viewport:null,defs:null,tools:null,layers:null,_viewportMatrix:null,_viewportTransformString:null,_updates:null,_layers:null,SORT_DELAYING_BATCHES:["add","to-front","to-back"],UPDATE_DELAYING_BATCHES:["translate"],FORM_CONTROL_TAG_NAMES:["TEXTAREA","INPUT","BUTTON","SELECT","OPTION"],GUARDED_TAG_NAMES:["SELECT"],MIN_SCALE:1e-6,init:function(){const{options:e}=this;e.cellViewNamespace||(e.cellViewNamespace="undefined"!=typeof joint&&cv(joint,"shapes")?joint.shapes:null);const t=this.model=e.model||new E_;this._layers={},this.cloneOptions(),this.render(),this._setDimensions(),this.startListening(),this._views={},this._mw_evt_buffer={event:null,deltas:[]},this.resetViews(t.attributes.cells.models),!this.isFrozen()&&this.isAsync()&&this.updateViewsAsync()},_resetUpdates:function(){return this._updates&&this._updates.id&&hb(this._updates.id),this._updates={id:null,priorities:[{},{},{}],unmountedCids:[],mountedCids:[],unmounted:{},mounted:{},count:0,keyFrozen:!1,freezeKey:null,sort:!1,disabled:!1,idle:!1}},startListening:function(){var e=this.model;this.listenTo(e,"add",this.onCellAdded).listenTo(e,"remove",this.onCellRemoved).listenTo(e,"change",this.onCellChange).listenTo(e,"reset",this.onGraphReset).listenTo(e,"sort",this.onGraphSort).listenTo(e,"batch:stop",this.onGraphBatchStop),this.on("cell:highlight",this.onCellHighlight).on("cell:unhighlight",this.onCellUnhighlight).on("transform",this.update)},onCellAdded:function(e,t,r){var i=r.position;this.isAsync()||!Fg(i)?this.renderView(e,r):(r.maxPosition===i&&this.freeze({key:"addCells"}),this.renderView(e,r),0===i&&this.unfreeze({key:"addCells"}))},onCellRemoved:function(e,t,r){const i=this.findViewByModel(e);i&&this.requestViewUpdate(i,i.FLAG_REMOVE,i.UPDATE_PRIORITY,r)},onCellChange:function(e,t){if(e!==this.model.attributes.cells&&e.hasChanged("z")&&this.options.sorting===W_.APPROX){const r=this.findViewByModel(e);r&&this.requestViewUpdate(r,r.FLAG_INSERT,r.UPDATE_PRIORITY,t)}},onGraphReset:function(e,t){this.resetLayers(),this.resetViews(e.models,t)},onGraphSort:function(){this.model.hasActiveBatch(this.SORT_DELAYING_BATCHES)||this.sortViews()},onGraphBatchStop:function(e){if(!this.isFrozen()){var t=e&&e.batchName,r=this.model;if(!this.isAsync()){var i=this.UPDATE_DELAYING_BATCHES;i.includes(t)&&!r.hasActiveBatch(i)&&this.updateViews(e)}var n=this.SORT_DELAYING_BATCHES;n.includes(t)&&!r.hasActiveBatch(n)&&this.sortViews()}},cloneOptions:function(){const{options:e}=this,{defaultConnector:t,defaultRouter:r,defaultConnectionPoint:i,defaultAnchor:n,defaultLinkAnchor:o,highlighting:s,cellViewNamespace:a,interactive:l}=e;!a&&"undefined"!=typeof joint&&cv(joint,"shapes")&&(e.cellViewNamespace=joint.shapes),ev(t)||(e.defaultConnector=Zg(t)),ev(r)||(e.defaultRouter=Zg(r)),ev(i)||(e.defaultConnectionPoint=Zg(i)),ev(n)||(e.defaultAnchor=Zg(n)),ev(o)||(e.defaultLinkAnchor=Zg(o)),tv(l)&&(e.interactive=Vg({},l)),tv(s)&&(e.highlighting=Hg({},s,X_))},children:function(){var e=ef.namespace;return[{namespaceURI:e.xhtml,tagName:"div",className:tb("paper-background"),selector:"background",style:{position:"absolute",inset:0}},{namespaceURI:e.svg,tagName:"svg",attributes:{width:"100%",height:"100%","xmlns:xlink":e.xlink},selector:"svg",style:{position:"absolute",inset:0},children:[{tagName:"defs",selector:"defs"},{tagName:"g",className:tb("layers"),selector:"layers"}]}]},hasLayerView(e){return e in this._layers},getLayerView(e){const{_layers:t}=this;if(e in t)return t[e];throw new Error(`dia.Paper: Unknown layer "${e}"`)},getLayerNode(e){return this.getLayerView(e).el},render:function(){this.renderChildren();const{el:e,childNodes:t,options:r,stylesheet:i}=this,{svg:n,defs:o,layers:s}=t;return e.style.position="relative",n.style.overflow=r.overflow?"visible":"hidden",this.svg=n,this.defs=o,this.layers=s,this.renderLayers(),ef.ensureId(n),this.addStylesheet(i),r.background&&this.drawBackground(r.background),r.drawGrid&&this.setGrid(r.drawGrid),this},addStylesheet:function(e){e&&ef(this.svg).prepend(ef.createSVGStyle(e))},createLayer(e){return e===I_.GRID?new H_({name:e,paper:this,patterns:this.constructor.gridPatterns}):new L_({name:e})},renderLayers:function(e=Z_){this.removeLayers(),e.forEach((({name:e,sorted:t})=>{const r=this.createLayer(e);this.layers.appendChild(r.el),this._layers[e]=r}));const t=this.getLayerView(I_.CELLS),r=this.getLayerView(I_.TOOLS),i=this.getLayerView(I_.LABELS);this.tools=r.el,this.cells=this.viewport=t.el,t.vel.addClass(tb("viewport")),i.vel.addClass(tb("viewport")),t.el.style.webkitUserSelect="none",t.el.style.userSelect="none",i.el.style.webkitUserSelect="none",i.el.style.userSelect="none"},removeLayers:function(){const{_layers:e}=this;Object.keys(e).forEach((t=>{e[t].remove(),delete e[t]}))},resetLayers:function(){const{_layers:e}=this;Object.keys(e).forEach((t=>{e[t].removePivots()}))},update:function(){return this._background&&this.updateBackgroundImage(this._background),this},scale:function(e,t,r){const i=this.matrix();return void 0===e?ef.matrixToScale(i):(void 0===t&&(t=e),e=Math.max(e||0,this.MIN_SCALE),t=Math.max(t||0,this.MIN_SCALE),i.a=e,i.d=t,this.matrix(i,r),this)},scaleUniformAtPoint:function(e,t,r){const{a:i,d:n,e:o,f:s}=this.matrix();if((e=Math.max(e||0,this.MIN_SCALE))===i&&e===n)return this;const a=ef.createSVGMatrix().translate(o-t.x*(e-i),s-t.y*(e-n)).scale(e,e);return this.matrix(a,r),this},translate:function(e,t,r){const i=this.matrix();return void 0===e?ef.matrixToTranslate(i):(e||(e=0),t||(t=0),i.e===e&&i.f===t||(i.e=e,i.f=t,this.matrix(i,r)),this)},matrix:function(e,t={}){var r=this.layers;if(void 0===e){var i=r.getAttribute("transform");return(this._viewportTransformString||null)===i?e=this._viewportMatrix:(e=r.getCTM(),this._viewportMatrix=e,this._viewportTransformString=i),ef.createSVGMatrix(e)}const n=this.matrix(),o=ef.createSVGMatrix(e),s=this._viewportTransformString,a=ef.matrixToTransformString(o);if(a===s)return this;if(!s&&ef.matrixToTransformString()===a)return this;const{a:l,d:c,e:d,f:h}=o;return r.setAttribute("transform",a),this._viewportMatrix=o,this._viewportTransformString=r.getAttribute("transform"),l===n.a&&c===n.d||this.trigger("scale",l,c,t),d===n.e&&h===n.f||this.trigger("translate",d,h,t),this.trigger("transform",o,t),this},clientMatrix:function(){return ef.createSVGMatrix(this.cells.getScreenCTM())},requestConnectedLinksUpdate:function(e,t,r){if(e instanceof D_)for(var i=e.model,n=this.model.getConnectedLinks(i),o=0,s=n.length;o<s;o++){var a=n[o],l=this.findViewByModel(a);if(l){var c=["UPDATE"];a.getTargetCell()===i&&c.push("TARGET"),a.getSourceCell()===i&&c.push("SOURCE");var d=Math.max(t+1,l.UPDATE_PRIORITY);this.scheduleViewUpdate(l,l.getFlag(c),d,r)}}},forcePostponedViewUpdate:function(e,t){if(!(e&&e instanceof D_))return!1;var r=e.model;if(r.isElement())return!1;if(!(t&e.getFlag(["SOURCE","TARGET"]))){var i={silent:!0},n=0,o=this.findViewByModel(r.getSourceCell());o&&!this.isViewMounted(o)&&(n=this.dumpView(o,i),e.updateEndMagnet("source"));var s=0,a=this.findViewByModel(r.getTargetCell());if(a&&!this.isViewMounted(a)&&(s=this.dumpView(a,i),e.updateEndMagnet("target")),0===n&&0===s)return!this.dumpView(e,i)}return!1},requestViewUpdate:function(e,t,r,i){i||(i={}),this.scheduleViewUpdate(e,t,r,i);var n=this.isAsync();if(!(this.isFrozen()||n&&!1!==i.async||this.model.hasActiveBatch(this.UPDATE_DELAYING_BATCHES))){var o=this.updateViews(i);n&&this.notifyAfterRender(o,i)}},scheduleViewUpdate:function(e,t,r,i){const{_updates:n,options:o}=this;n.idle&&o.autoFreeze&&(n.idle=!1,this.unfreeze());const{FLAG_REMOVE:s,FLAG_INSERT:a,UPDATE_PRIORITY:l,cid:c}=e;let d=n.priorities[r];if(d||(d=n.priorities[r]={}),r>l)for(let e=r-1;e>=l;e--){const t=n.priorities[e];t&&c in t&&(d[c]|=t[c],delete t[c])}let h=d[c]||0;if((h&t)===t)return;h||n.count++,t&s&&h&a?d[c]^=a:t&a&&h&s&&(d[c]^=s),d[c]|=t;const u=o.onViewUpdate;"function"==typeof u&&u.call(this,e,t,r,i||{},this)},dumpViewUpdate:function(e){if(!e)return 0;var t=this._updates,r=e.cid,i=t.priorities[e.UPDATE_PRIORITY],n=this.registerMountedView(e)|i[r];return delete i[r],n},dumpView:function(e,t={}){const r=this.dumpViewUpdate(e);if(!r)return 0;const i=!t.silent;i&&this.notifyBeforeRender(t);const n=this.updateView(e,r,t);if(i){const r={updated:1,priority:e.UPDATE_PRIORITY};this.notifyAfterRender(r,t)}return n},updateView:function(e,t,r){if(!e)return 0;const{FLAG_REMOVE:i,FLAG_INSERT:n,FLAG_INIT:o,model:s}=e;if(e instanceof D_){if(t&i)return this.removeView(s),0;if(t&n){const r=!!(t&o);r&&(t^=o),this.insertView(e,r),t^=n}}return t?e.confirmUpdate(t,r||{}):0},requireView:function(e,t){var r=this.findViewByModel(e);return r?(this.dumpView(r,t),r):null},registerUnmountedView:function(e){var t=e.cid,r=this._updates;if(t in r.unmounted)return 0;var i=r.unmounted[t]|=e.FLAG_INSERT;return r.unmountedCids.push(t),delete r.mounted[t],i},registerMountedView:function(e){var t=e.cid,r=this._updates;if(t in r.mounted)return 0;r.mounted[t]=!0,r.mountedCids.push(t);var i=r.unmounted[t]||0;return delete r.unmounted[t],i},isViewMounted:function(e){return!!e&&e.cid in this._updates.mounted},dumpViews:function(e){var t=jg({},e,{viewport:null});this.checkViewport(t),this.updateViews(t)},updateViews:function(e){let t;this.notifyBeforeRender(e);let r=0,i=0,n=Y_;do{i++,t=this.updateViewsBatch(e),r+=t.updated,n=Math.min(t.priority,n)}while(!t.empty);const o={updated:r,batches:i,priority:n};return this.notifyAfterRender(o,e),o},hasScheduledUpdates:function(){const e=this._updates.priorities,t=Object.keys(e);let r=t.length;for(;r>0&&r--;)for(let i in e[t[r]])return!0;return!1},updateViewsAsync:function(e,t){e||(e={}),t||(t={processed:0,priority:Y_});const{_updates:r,options:i}=this,n=r.id;if(n){hb(n),0===t.processed&&this.hasScheduledUpdates()&&this.notifyBeforeRender(e);const o=this.updateViewsBatch(e),s=jg({},e,{mountBatchSize:1e3-o.mounted,unmountBatchSize:1e3-o.unmounted}),a=this.checkViewport(s),l=a.unmounted,c=a.mounted;let d=t.processed;const h=r.count;o.updated>0?(d+=o.updated+o.unmounted,o.processed=d,t.priority=Math.min(o.priority,t.priority),o.empty&&0===c?(o.unmounted+=l,o.mounted+=c,o.priority=t.priority,this.notifyAfterRender(o,e),t.processed=0,t.priority=Y_,r.count=0):t.processed=d):r.idle||i.autoFreeze&&(this.freeze(),r.idle=!0,this.trigger("render:idle",e));const u=e.progress;if(h&&"function"==typeof u&&u.call(this,o.empty,d,h,o,this),r.id!==n)return}if(r.disabled)throw new Error("dia.Paper: can not unfreeze the paper after it was removed");r.id=db(this.updateViewsAsync,this,e,t)},notifyBeforeRender:function(e={}){let t=e.beforeRender;"function"!=typeof t&&(t=this.options.beforeRender,"function"!=typeof t)||t.call(this,e,this)},notifyAfterRender:function(e,t={}){let r=t.afterRender;"function"!=typeof r&&(r=this.options.afterRender),"function"==typeof r&&r.call(this,e,t,this),this.trigger("render:done",e,t)},updateViewsBatch:function(e){e||(e={});var t=e.batchSize||q_,r=this._updates,i=0,n=0,o=0,s=0,a=Y_,l=!0,c=this.options,d=r.priorities,h="viewport"in e?e.viewport:c.viewport;"function"!=typeof h&&(h=null);var u=c.onViewPostponed;"function"!=typeof u&&(u=null);var p=Object.keys(d);e:for(var f=0,m=p.length;f<m;f++){var g=+p[f],v=d[g];for(var b in v){if(i>=t){l=!1;break e}var y=Ox[b];if(y){var x=v[b];if(!(x&y.FLAG_REMOVE)){var w=b in r.unmounted;if(y.DETACHABLE&&h&&!h.call(this,y,!w,this)){w||(this.registerUnmountedView(y),this.detachView(y)),r.unmounted[b]|=x,delete v[b],o++;continue}w&&(x|=y.FLAG_INSERT,s++),x|=this.registerMountedView(y)}var _=this.updateView(y,x,e);_>0&&(v[b]=_,!u||!u.call(this,y,_,this)||v[b])?(n++,l=!1):(a>g&&(a=g),i++,delete v[b])}else delete v[b]}}return{priority:a,updated:i,postponed:n,unmounted:o,mounted:s,empty:l}},getUnmountedViews:function(){const e=this._updates,t=Object.keys(e.unmounted),r=t.length,i=new Array(r);for(var n=0;n<r;n++)i[n]=Ox[t[n]];return i},getMountedViews:function(){const e=this._updates,t=Object.keys(e.mounted),r=t.length,i=new Array(r);for(var n=0;n<r;n++)i[n]=Ox[t[n]];return i},checkUnmountedViews:function(e,t){t||(t={});var r=0;"function"!=typeof e&&(e=null);for(var i=("mountBatchSize"in t?t.mountBatchSize:1/0),n=this._updates,o=n.unmountedCids,s=n.unmounted,a=0,l=Math.min(o.length,i);a<l;a++){var c=o[a];if(c in s){var d=Ox[c];if(d)if(d.DETACHABLE&&e&&!e.call(this,d,!1,this))o.push(c);else{r++;var h=this.registerMountedView(d);h&&this.scheduleViewUpdate(d,h,d.UPDATE_PRIORITY,{mounting:!0})}}}return o.splice(0,a),r},checkMountedViews:function(e,t){t||(t={});var r=0;if("function"!=typeof e)return r;for(var i=("unmountBatchSize"in t?t.unmountBatchSize:1/0),n=this._updates,o=n.mountedCids,s=n.mounted,a=0,l=Math.min(o.length,i);a<l;a++){var c=o[a];if(c in s){var d=Ox[c];if(d)if(d.DETACHABLE&&!e.call(this,d,!0,this))r++,this.registerUnmountedView(d)&&this.detachView(d);else o.push(c)}}return o.splice(0,a),r},checkViewVisibility:function(e,t={}){let r="viewport"in t?t.viewport:this.options.viewport;"function"!=typeof r&&(r=null);const i=this._updates,{mounted:n,unmounted:o}=i,s=!e.DETACHABLE||!r||r.call(this,e,!1,this);let a=!1,l=!1;if(e.cid in n&&!s){this.registerUnmountedView(e)&&this.detachView(e);const t=i.mountedCids.indexOf(e.cid);i.mountedCids.splice(t,1),a=!0}if(!a&&e.cid in o&&s){const t=i.unmountedCids.indexOf(e.cid);i.unmountedCids.splice(t,1);var c=this.registerMountedView(e);c&&this.scheduleViewUpdate(e,c,e.UPDATE_PRIORITY,{mounting:!0}),l=!0}return{mounted:l?1:0,unmounted:a?1:0}},checkViewport:function(e){var t=jg({},e,{mountBatchSize:1/0,unmountBatchSize:1/0}),r="viewport"in t?t.viewport:this.options.viewport,i=this.checkMountedViews(r,t);if(i>0){var n=this._updates.unmountedCids;t.mountBatchSize=Math.min(n.length-i,t.mountBatchSize)}return{mounted:this.checkUnmountedViews(r,t),unmounted:i}},freeze:function(e){e||(e={});var t=this._updates,r=e.key,i=this.options.frozen,n=t.freezeKey;if(r&&r!==n){if(i&&n)return;t.freezeKey=r,t.keyFrozen=i}this.options.frozen=!0;var o=t.id;t.id=null,this.isAsync()&&o&&hb(o)},unfreeze:function(e){e||(e={});var t=this._updates,r=e.key,i=t.freezeKey;r&&i&&r!==i||(t.freezeKey=null,r&&r===i&&t.keyFrozen||(this.isAsync()?(this.freeze(),this.updateViewsAsync(e)):this.updateViews(e),this.options.frozen=t.keyFrozen=!1,t.sort&&(this.sortViews(),t.sort=!1)))},isAsync:function(){return!!this.options.async},isFrozen:function(){return!!this.options.frozen},isExactSorting:function(){return this.options.sorting===W_.EXACT},onRemove:function(){this.freeze(),this._updates.disabled=!0,this.removeLayers(),this.removeViews()},getComputedSize:function(){var e=this.options,t=e.width,r=e.height;return Fg(t)||(t=this.el.clientWidth),Fg(r)||(r=this.el.clientHeight),{width:t,height:r}},setDimensions:function(e,t,r={}){const{options:i}=this,{width:n,height:o}=i;let s=void 0===e?n:e,a=void 0===t?o:t;if(n===s&&o===a)return;i.width=s,i.height=a,this._setDimensions();const l=this.getComputedSize();this.trigger("resize",l.width,l.height,r)},_setDimensions:function(){const{options:e}=this;let t=e.width,r=e.height;Fg(t)&&(t=`${Math.round(t)}px`),Fg(r)&&(r=`${Math.round(r)}px`),this.$el.css({width:null===t?"":t,height:null===r?"":r})},fitToContent:function(e,t,r,i){i=Bg(e)?e:Vg({gridWidth:e,gridHeight:t,padding:r},i);const{x:n,y:o,width:s,height:a}=this.getFitToContentArea(i),{sx:l,sy:c}=this.scale();return this.translate(-n*l,-o*c,i),this.setDimensions(s*l,a*c,i),new Yu(n,o,s,a)},getFitToContentArea:function(e={}){const t=e.gridWidth||1,r=e.gridHeight||1,i=yb(e.padding||0),n=Math.max(e.minWidth||0,t),o=Math.max(e.minHeight||0,r),s=e.maxWidth||Number.MAX_VALUE,a=e.maxHeight||Number.MAX_VALUE,l=e.allowNewOrigin,c="contentArea"in e?new Yu(e.contentArea):this.getContentArea(e),{sx:d,sy:h}=this.scale();c.x*=d,c.y*=h,c.width*=d,c.height*=h;let u=Math.ceil((c.width+c.x)/t),p=Math.ceil((c.height+c.y)/r);e.allowNegativeBottomRight||(u=Math.max(u,1),p=Math.max(p,1)),u*=t,p*=r;let f=0;("negative"===l&&c.x<0||"positive"===l&&c.x>=0||"any"===l)&&(f=Math.ceil(-c.x/t)*t,f+=i.left,u+=f);let m=0;return("negative"===l&&c.y<0||"positive"===l&&c.y>=0||"any"===l)&&(m=Math.ceil(-c.y/r)*r,m+=i.top,p+=m),u+=i.right,p+=i.bottom,u=Math.max(u,n),p=Math.max(p,o),u=Math.min(u,s),p=Math.min(p,a),new Yu(-f/d,-m/h,u/d,p/h)},transformToFitContent:function(e){let t,r;if(e||(e={}),"contentArea"in e){const i=e.contentArea;t=this.localToPaperRect(i),r=new Iu(i)}else t=this.getContentBBox(e),r=this.paperToLocalPoint(t);if(!t.width||!t.height)return;jg(e,{padding:0,preserveAspectRatio:!0,scaleGrid:null,minScale:0,maxScale:Number.MAX_VALUE,verticalAlign:"top",horizontalAlign:"left"});const i=yb(e.padding),n=e.minScaleX||e.minScale,o=e.maxScaleX||e.maxScale,s=e.minScaleY||e.minScale,a=e.maxScaleY||e.maxScale;let l;if(e.fittingBBox)l=e.fittingBBox;else{const e=this.translate(),t=this.getComputedSize();l={x:e.tx,y:e.ty,width:t.width,height:t.height}}l=new Yu(l).moveAndExpand({x:i.left,y:i.top,width:-i.left-i.right,height:-i.top-i.bottom});const c=this.matrix(),{a:d,d:h,e:u,f:p}=c;let f=l.width/t.width*d,m=l.height/t.height*h;if(e.preserveAspectRatio&&(f=m=Math.min(f,m)),e.scaleGrid){const t=e.scaleGrid;f=t*Math.floor(f/t),m=t*Math.floor(m/t)}f=Math.min(o,Math.max(n,f)),m=Math.min(a,Math.max(s,m));const g=f/d,v=m/h;let b=l.x-r.x*f-u,y=l.y-r.y*m-p;switch(e.verticalAlign){case"middle":y+=(l.height-t.height*v)/2;break;case"bottom":y+=l.height-t.height*v}switch(e.horizontalAlign){case"middle":b+=(l.width-t.width*g)/2;break;case"right":b+=l.width-t.width*g}c.a=f,c.d=m,c.e=b,c.f=y,this.matrix(c,e)},scaleContentToFit:function(e){this.transformToFitContent(e)},getContentArea:function(e){return e&&e.useModelGeometry?this.model.getBBox()||new Yu:ef(this.cells).getBBox()},getContentBBox:function(e){return this.localToPaperRect(this.getContentArea(e))},getArea:function(){return this.paperToLocalRect(this.getComputedSize())},getRestrictedArea:function(...e){const{restrictTranslate:t}=this.options;let r;return r=ev(t)?t.apply(this,e):!0===t?this.getArea():t?new Yu(t):null,r},createViewForModel:function(e){const{options:t}=this;var r,i,n=t.cellViewNamespace,o=e.get("type")+"View",s=nb(n,o,".");return e.isLink()?(r=t.linkView,i=G_):(r=t.elementView,i=V_),new(r.prototype instanceof Ex?s||r:r.call(this,e)||s||i)({model:e,interactive:t.interactive,labelsLayer:!0===t.labelsLayer?I_.LABELS:t.labelsLayer})},removeView:function(e){const{id:t}=e,{_views:r,_updates:i}=this,n=r[t];if(n){var{cid:o}=n;const{mounted:e,unmounted:s}=i;n.remove(),delete r[t],delete e[o],delete s[o]}return n},renderView:function(e,t){const{id:r}=e,i=this._views;let n,o,s=!0;return r in i&&(n=i[r],n.model===e?(o=n.FLAG_INSERT,s=!1):this.removeView(e)),s&&(n=i[r]=this.createViewForModel(e),n.paper=this,o=this.registerUnmountedView(n)|this.FLAG_INIT|n.getFlag(dv(n,"initFlag"))),this.requestViewUpdate(n,o,n.UPDATE_PRIORITY,t),n},onImageDragStart:function(){return!1},resetViews:function(e,t){t||(t={}),e||(e=[]),this._resetUpdates(),this.removeViews();const r=this.options.autoFreeze?null:"reset";this.freeze({key:r});for(var i=0,n=e.length;i<n;i++)this.renderView(e[i],t);this.unfreeze({key:r}),this.sortViews()},removeViews:function(){Wg(this._views,"remove"),this._views={}},sortViews:function(){this.isExactSorting()&&(this.isFrozen()?this._updates.sort=!0:this.sortViewsExact())},sortViewsExact:function(){var e=Array.from(this.cells.childNodes).filter((e=>e.getAttribute("model-id"))),t=this.model.get("cells");!function(e,t){var r=(e=eb(e).toArray()).map((function(e){var t=e.parentNode,r=t.insertBefore(document.createTextNode(""),e.nextSibling);return function(){if(t===this)throw new Error("You can't sort elements if any one is a descendant of another.");t.insertBefore(this,r),t.removeChild(r)}}));e.sort(t);for(var i=0;i<r.length;i++)r[i].call(e[i])}(e,(function(e,r){var i=t.get(e.getAttribute("model-id")),n=t.get(r.getAttribute("model-id")),o=i.attributes.z||0,s=n.attributes.z||0;return o===s?0:o<s?-1:1}))},insertView:function(e,t){const r=this.getLayerView(I_.CELLS),{el:i,model:n}=e;if(this.options.sorting===W_.APPROX)r.insertSortedNode(i,n.get("z"));else r.insertNode(i);e.onMount(t)},detachView(e){e.unmount(),e.onDetach()},findView:function(e){var t=Ug(e)?this.cells.querySelector(e):e instanceof eb?e[0]:e,r=this.findAttribute("model-id",t);if(r)return this._views[r]},findViewByModel:function(e){var t=Ug(e)||Fg(e)?e:e&&e.id;return this._views[t]},findViewsFromPoint:function(e){return e=new Iu(e),this.model.getElements().map(this.findViewByModel,this).filter((function(t){return t&&t.vel.getBBox({target:this.cells}).containsPoint(e)}),this)},findViewsInArea:function(e,t){t=jg(t||{},{strict:!1}),e=new Yu(e);var r=this.model.getElements().map(this.findViewByModel,this),i=t.strict?"containsRect":"intersect";return r.filter((function(t){return t&&e[i](t.vel.getBBox({target:this.cells}))}),this)},removeTools:function(){return this.dispatchToolsEvent("remove"),this},hideTools:function(){return this.dispatchToolsEvent("hide"),this},showTools:function(){return this.dispatchToolsEvent("show"),this},dispatchToolsEvent:function(e,...t){"string"==typeof e&&this.trigger("tools:event",e,...t)},getModelById:function(e){return this.model.getCell(e)},snapToGrid:function(e,t){return this.clientToLocalPoint(e,t).snapToGrid(this.options.gridSize)},localToPaperPoint:function(e,t){var r=new Iu(e,t);return ef.transformPoint(r,this.matrix())},localToPaperRect:function(e,t,r,i){var n=new Yu(e,t,r,i);return ef.transformRect(n,this.matrix())},paperToLocalPoint:function(e,t){var r=new Iu(e,t);return ef.transformPoint(r,this.matrix().inverse())},paperToLocalRect:function(e,t,r,i){var n=new Yu(e,t,r,i);return ef.transformRect(n,this.matrix().inverse())},localToClientPoint:function(e,t){var r=new Iu(e,t);return ef.transformPoint(r,this.clientMatrix())},localToClientRect:function(e,t,r,i){var n=new Yu(e,t,r,i);return ef.transformRect(n,this.clientMatrix())},clientToLocalPoint:function(e,t){var r=new Iu(e,t);return ef.transformPoint(r,this.clientMatrix().inverse())},clientToLocalRect:function(e,t,r,i){var n=new Yu(e,t,r,i);return ef.transformRect(n,this.clientMatrix().inverse())},localToPagePoint:function(e,t){return this.localToPaperPoint(e,t).offset(this.pageOffset())},localToPageRect:function(e,t,r,i){return this.localToPaperRect(e,t,r,i).offset(this.pageOffset())},pageToLocalPoint:function(e,t){var r=new Iu(e,t).difference(this.pageOffset());return this.paperToLocalPoint(r)},pageToLocalRect:function(e,t,r,i){var n=this.pageOffset(),o=new Yu(e,t,r,i);return o.x-=n.x,o.y-=n.y,this.paperToLocalRect(o)},clientOffset:function(){var e=this.svg.getBoundingClientRect();return new Iu(e.left,e.top)},pageOffset:function(){return this.clientOffset().offset(window.scrollX,window.scrollY)},linkAllowed:function(e){if(!(e instanceof G_))throw new Error("Must provide a linkView.");var t=e.model,r=this.options,i=this.model,n=i.constructor.validations;return!(!r.multiLinks&&!n.multiLinks.call(this,i,t))&&(!(!r.linkPinning&&!n.linkPinning.call(this,i,t))&&!("function"==typeof r.allowLink&&!r.allowLink.call(this,e,this)))},getDefaultLink:function(e,t){return ev(this.options.defaultLink)?this.options.defaultLink.call(this,e,t):this.options.defaultLink.clone()},resolveHighlighter:function(e={}){let{highlighter:t,type:r}=e;const{highlighting:i,highlighterNamespace:n}=this.options;if(void 0===t){if(!i)return!1;if(r&&(t=i[r],!1===t))return!1;t||(t=i.default)}if(!t)return!1;Ug(t)&&(t={name:t});const o=t.name,s=n[o];if(!s)throw new Error('Unknown highlighter ("'+o+'")');if("function"!=typeof s.highlight)throw new Error('Highlighter ("'+o+'") is missing required highlight() method');if("function"!=typeof s.unhighlight)throw new Error('Highlighter ("'+o+'") is missing required unhighlight() method');return{highlighter:s,options:t.options||{},name:o}},onCellHighlight:function(e,t,r){const i=this.resolveHighlighter(r);if(!i)return;const{highlighter:n,options:o}=i;n.highlight(e,t,o)},onCellUnhighlight:function(e,t,r){const i=this.resolveHighlighter(r);if(!i)return;const{highlighter:n,options:o}=i;n.unhighlight(e,t,o)},pointerdblclick:function(e){e.preventDefault(),e=cb(e);var t=this.findView(e.target);if(!this.guard(e,t)){var r=this.snapToGrid(e.clientX,e.clientY);t?t.pointerdblclick(e,r.x,r.y):this.trigger("blank:pointerdblclick",e,r.x,r.y)}},pointerclick:function(e){if(this.eventData(e).mousemoved<=this.options.clickThreshold){e=cb(e);var t=this.findView(e.target);if(this.guard(e,t))return;var r=this.snapToGrid(e.clientX,e.clientY);t?t.pointerclick(e,r.x,r.y):this.trigger("blank:pointerclick",e,r.x,r.y)}},contextmenu:function(e){this.options.preventContextMenu&&e.preventDefault(),this.contextMenuFired?this.contextMenuFired=!1:(e=cb(e),this.contextMenuTrigger(e))},contextMenuTrigger:function(e){var t=this.findView(e.target);if(!this.guard(e,t)){var r=this.snapToGrid(e.clientX,e.clientY);t?t.contextmenu(e,r.x,r.y):this.trigger("blank:contextmenu",e,r.x,r.y)}},pointerdown:function(e){e=cb(e);const{target:t,button:r}=e,i=this.findView(t),n=2===r;if(i){if(!n&&this.guard(e,i))return;const r=this.FORM_CONTROL_TAG_NAMES.includes(t.tagName);this.options.preventDefaultViewAction&&!r&&e.preventDefault(),r&&i.preventDefaultInteraction(e);const o=this.customEventTrigger(e,i);if(o){if(o.isPropagationStopped())return;e.data=o.data}const s=t.closest("[magnet]");if(s&&i.el!==s&&i.el.contains(s)){const t=cb(new eb.Event(e.originalEvent,{data:e.data,currentTarget:s}));if(this.onmagnet(t),t.isDefaultPrevented()&&e.preventDefault(),t.isPropagationStopped()){if(n)return;return void this.delegateDragEvents(i,t.data)}e.data=t.data}}if(n){this.contextMenuFired=!0;const t=new eb.Event(e.originalEvent,{type:"contextmenu",data:e.data});this.contextMenuTrigger(t)}else{const t=this.snapToGrid(e.clientX,e.clientY);i?i.pointerdown(e,t.x,t.y):(this.options.preventDefaultBlankAction&&e.preventDefault(),this.trigger("blank:pointerdown",e,t.x,t.y)),this.delegateDragEvents(i,e.data)}},pointermove:function(e){var t=this.eventData(e);if(t.mousemoved||(t.mousemoved=0,this.undelegateEvents()),!(++t.mousemoved<=this.options.moveThreshold)){e=cb(e);var r=this.snapToGrid(e.clientX,e.clientY),i=t.sourceView;i?i.pointermove(e,r.x,r.y):this.trigger("blank:pointermove",e,r.x,r.y),this.eventData(e,t)}},pointerup:function(e){this.undelegateDocumentEvents();var t=cb(e),r=this.snapToGrid(t.clientX,t.clientY),i=this.eventData(e).sourceView;i?i.pointerup(t,r.x,r.y):this.trigger("blank:pointerup",t,r.x,r.y),t.isPropagationStopped()||this.pointerclick(new eb.Event(e.originalEvent,{type:"click",data:e.data})),this.delegateEvents()},mouseover:function(e){e=cb(e);var t=this.findView(e.target);if(!this.guard(e,t))if(t)t.mouseover(e);else{if(this.el===e.target)return;this.trigger("blank:mouseover",e)}},mouseout:function(e){e=cb(e);var t=this.findView(e.target);if(!this.guard(e,t))if(t)t.mouseout(e);else{if(this.el===e.target)return;this.trigger("blank:mouseout",e)}},mouseenter:function(e){e=cb(e);const{target:t,relatedTarget:r,currentTarget:i}=e,n=this.findView(t);if(this.guard(e,n))return;const o=this.findView(r);if(n){if(o===n)return;if(n.mouseenter(e),this.el.contains(r))return}o||i===this.el&&this.trigger("paper:mouseenter",e)},mouseleave:function(e){e=cb(e);const{target:t,relatedTarget:r,currentTarget:i}=e,n=this.findView(t);if(this.guard(e,n))return;const o=this.findView(r);if(n){if(o===n)return;if(n.mouseleave(e),this.el.contains(r))return}o||i===this.el&&this.trigger("paper:mouseleave",e)},_processMouseWheelEvtBuf:function(e,t,r){if("function"!=typeof e)throw new TypeError("Expected a function");let i,n,o,s,a,l,c=0,d=!1,h=!1,u=!0;const p=!t&&0!==t&&window&&"function"==typeof window.requestAnimationFrame;function f(t){const r=i,o=n;return i=n=void 0,c=t,s=e.apply(o,r),s}function m(e,t){return p?(window.cancelAnimationFrame(a),window.requestAnimationFrame(e)):setTimeout(e,t)}function g(e){const r=e-l;return void 0===l||r>=t||r<0||h&&e-c>=o}function v(){const e=Date.now();if(g(e))return b(e);a=m(v,function(e){const r=e-c,i=t-(e-l);return h?Math.min(i,o-r):i}(e))}function b(e){return a=void 0,u&&i?f(e):(i=n=void 0,s)}function y(...e){const r=Date.now(),o=g(r);if(i=e,n=this,l=r,o){if(void 0===a)return function(e){return c=e,a=m(v,t),d?f(e):s}(l);if(h)return a=m(v,t),f(l)}return void 0===a&&(a=m(v,t)),s}return t=+t||0,Bg(r)&&(d=!!r.leading,h="maxWait"in r,o=h?Math.max(+r.maxWait||0,t):o,u="trailing"in r?!!r.trailing:u),y.cancel=()=>{void 0!==a&&function(e){if(p)return window.cancelAnimationFrame(e);clearTimeout(e)}(a),c=0,i=l=n=a=void 0},y.flush=()=>void 0===a?s:b(Date.now()),y.pending=()=>void 0!==a,y}((function(){const{event:e,deltas:t}=this._mw_evt_buffer,r=t.reduce(((e,t)=>e+function(e,t){return e>t?t:e<-t?-t:e}(t,50)),0),i=Math.pow(.995,r),{x:n,y:o}=this.clientToLocalPoint(e.clientX,e.clientY);this.trigger("paper:pinch",e,n,o,i),this._mw_evt_buffer={event:null,deltas:[]}}),20,{maxWait:20}),mousewheel:function(e){e=cb(e);const t=this.findView(e.target);if(this.guard(e,t))return;const r=e.originalEvent,i=this.snapToGrid(r.clientX,r.clientY),{deltaX:n,deltaY:o}=function(e){let t=0,r=0,i=0,n=0;return"detail"in e&&(r=e.detail),"wheelDelta"in e&&(r=-e.wheelDelta/120),"wheelDeltaY"in e&&(r=-e.wheelDeltaY/120),"wheelDeltaX"in e&&(t=-e.wheelDeltaX/120),"axis"in e&&e.axis===e.HORIZONTAL_AXIS&&(t=r,r=0),i="deltaX"in e?e.deltaX:10*t,n="deltaY"in e?e.deltaY:10*r,(i||n)&&e.deltaMode&&(1==e.deltaMode?(i*=40,n*=40):(i*=800,n*=800)),0===e.deltaX&&0!==e.deltaY&&e.shiftKey&&(i=n,n=0,t=r,r=0),i&&!t&&(t=i<1?-1:1),n&&!r&&(r=n<1?-1:1),{spinX:t,spinY:r,deltaX:i,deltaY:n}}(r),s=this._events["paper:pinch"];if(e.ctrlKey&&s&&s.length>0)r.preventDefault(),this._mw_evt_buffer.event=e,this._mw_evt_buffer.deltas.push(o),this._processMouseWheelEvtBuf();else{const s=Math.max(-1,Math.min(1,r.wheelDelta));t?t.mousewheel(e,i.x,i.y,s):this.trigger("blank:mousewheel",e,i.x,i.y,s),this.trigger("paper:pan",e,n,o)}},onevent:function(e){var t=e.currentTarget,r=t.getAttribute("event");if(r){var i=this.findView(t);if(i){if(e=cb(e),this.guard(e,i))return;var n=this.snapToGrid(e.clientX,e.clientY);i.onevent(e,r,n.x,n.y)}}},magnetEvent:function(e,t){var r=e.currentTarget;if(r.getAttribute("magnet")){var i=this.findView(r);if(i){if(e=cb(e),this.guard(e,i))return;var n=this.snapToGrid(e.clientX,e.clientY);t.call(this,i,e,r,n.x,n.y)}}},onmagnet:function(e){if(2===e.button){this.contextMenuFired=!0,this.magnetContextMenuFired=!0;const t=new eb.Event(e.originalEvent,{type:"contextmenu",data:e.data,currentTarget:e.currentTarget});this.magnetContextMenuTrigger(t),t.isPropagationStopped()&&e.stopPropagation()}else this.magnetEvent(e,(function(e,t,r,i,n){e.onmagnet(t,i,n)}))},magnetpointerdblclick:function(e){this.magnetEvent(e,(function(e,t,r,i,n){e.magnetpointerdblclick(t,r,i,n)}))},magnetcontextmenu:function(e){this.options.preventContextMenu&&e.preventDefault(),this.magnetContextMenuFired?this.magnetContextMenuFired=!1:this.magnetContextMenuTrigger(e)},magnetContextMenuTrigger:function(e){this.magnetEvent(e,(function(e,t,r,i,n){e.magnetcontextmenu(t,r,i,n)}))},onlabel:function(e){var t=e.currentTarget,r=this.findView(t);if(!r)return;if(e=cb(e),this.guard(e,r))return;const i=this.customEventTrigger(e,r,t);if(i){if(i.isPropagationStopped())return;e.data=i.data}var n=this.snapToGrid(e.clientX,e.clientY);r.onlabel(e,n.x,n.y)},getPointerArgs(e){const t=cb(e),{x:r,y:i}=this.snapToGrid(t.clientX,t.clientY);return[t,r,i]},delegateDragEvents:function(e,t){t||(t={}),this.eventData({data:t},{sourceView:e||null,mousemoved:0}),this.delegateDocumentEvents(null,t)},guard:function(e,t){if("mousedown"===e.type&&2===e.button)return!0;if(this.options.guard&&this.options.guard(e,t))return!0;if(e.data&&void 0!==e.data.guarded)return e.data.guarded;const{target:r}=e;return!!this.GUARDED_TAG_NAMES.includes(r.tagName)||!(t&&t.model&&t.model instanceof Ly)&&(this.el!==r&&!this.svg.contains(r))},setGridSize:function(e){const{options:t}=this;return t.gridSize=e,t.drawGrid&&!t.drawGridSize&&this.getLayerView(I_.GRID).renderGrid(),this},setGrid:function(e){return this.getLayerView(I_.GRID).setGrid(e),this},updateBackgroundImage:function(e){var t=(e=e||{}).position||"center",r=e.size||"auto auto",i=this.scale(),n=this.translate();Bg(t)&&(t=n.tx+i.sx*(t.x||0)+"px "+(n.ty+i.sy*(t.y||0))+"px");Bg(r)&&(r=(r=new Yu(r).scale(i.sx,i.sy)).width+"px "+r.height+"px");const{background:o}=this.childNodes;o.style.backgroundSize=r,o.style.backgroundPosition=t},drawBackgroundImage:function(e,t){if(e instanceof HTMLImageElement){if(this._background&&this._background.id===t.id){var r,i=(t=t||{}).size,n=t.repeat||"no-repeat",o=t.opacity||1,s=Math.abs(t.quality)||1,a=this.constructor.backgroundPatterns[fv(n)];if(ev(a)){e.width*=s,e.height*=s;var l=a(e,t);if(!(l instanceof HTMLCanvasElement))throw new Error("dia.Paper: background pattern must return an HTML Canvas instance");r=l.toDataURL("image/png"),n="repeat",Bg(i)?(i.width*=l.width/e.width,i.height*=l.height/e.height):void 0===i&&(t.size={width:l.width/s,height:l.height/s})}else r=e.src,void 0===i&&(t.size={width:e.width,height:e.height});this.childNodes.background.style.opacity=o,this.childNodes.background.style.backgroundRepeat=n,this.childNodes.background.style.backgroundImage=`url(${r})`,this.updateBackgroundImage(t)}}else this.childNodes.background.style.backgroundImage=""},updateBackgroundColor:function(e){this.$el.css("backgroundColor",e||"")},drawBackground:function(e){if(e=e||{},this.updateBackgroundColor(e.color),e.image){e=this._background=Zg(e),lb(e);var t=document.createElement("img");t.onload=this.drawBackgroundImage.bind(this,t,e),t.src=e.image}else this.drawBackgroundImage(null),this._background=null;return this},setInteractivity:function(e){this.options.interactive=e,Wg(this._views,"setInteractivity",e)},isDefined:function(e){return!!this.svg.getElementById(e)},defineFilter:function(e){if(!Bg(e))throw new TypeError("dia.Paper: defineFilter() requires 1. argument to be an object.");var t=e.id,r=e.name;if(t||(t=r+this.svg.id+ib(JSON.stringify(e))),!this.isDefined(t)){var i=_b,n=i[r]&&i[r](e.args||{});if(!n)throw new Error("Non-existing filter "+r);var o=Vg({filterUnits:"userSpaceOnUse"},e.attrs,{id:t});ef(n,o).appendTo(this.defs)}return t},defineGradient:function(e){if(!Bg(e))throw new TypeError("dia.Paper: defineGradient() requires 1. argument to be an object.");const{svg:t,defs:r}=this,{type:i,id:n=i+t.id+ib(JSON.stringify(e)),stops:o,attrs:s={}}=e;if(this.isDefined(n))return n;const a=rv(o).map((({offset:e,color:t,opacity:r})=>ef("stop").attr({offset:e,"stop-color":t,"stop-opacity":Number.isFinite(r)?r:1}))),l=ef(i,s,a);return l.id=n,l.appendTo(r),n},definePattern:function(e){if(!Bg(e))throw new TypeError("dia.Paper: definePattern() requires 1. argument to be an object.");const{svg:t,defs:r}=this,{id:i=t.id+ib(JSON.stringify(e)),markup:n,attrs:o={}}=e;if(!n)throw new TypeError("dia.Paper: definePattern() requires markup.");if(this.isDefined(i))return i;const s=ef("pattern",{patternUnits:"userSpaceOnUse"});if(s.id=i,s.attr(o),"string"==typeof n)s.append(ef(n));else{const{fragment:e}=rb(n);s.append(e)}return s.appendTo(r),i},defineMarker:function(e){if(!Bg(e))throw new TypeError("dia.Paper: defineMarker() requires the first argument to be an object.");const{svg:t,defs:r}=this,{id:i=t.id+ib(JSON.stringify(e)),markup:n,attrs:o={},markerUnits:s="userSpaceOnUse"}=e;if(this.isDefined(i))return i;const a=ef("marker",{orient:"auto",overflow:"visible",markerUnits:s});let l;if(a.id=i,a.attr(o),n){let e;if("string"==typeof n)e=ef(n),e=Array.isArray(e)?e:[e];else{const{fragment:t}=rb(n);e=ef(t).children()}l=e.length>1?ef("g").append(e):e[0]}else{const{type:t="path"}=e;l=ef(t)}const c=hv(e,"type","id","markup","attrs","markerUnits");return Object.keys(c).forEach((e=>{const t=c[e],r=l.attr(e);if(null==r)l.attr(e,t);else if("transform"===e)l.attr(e,t+" "+r)})),l.appendTo(a),a.appendTo(r),i},customEventTrigger:function(e,t,r=t.el){const i=e.target.closest("[event]");if(i&&r!==i&&t.el.contains(i)){const t=cb(new eb.Event(e.originalEvent,{data:e.data,currentTarget:i}));return this.onevent(t),t.isDefaultPrevented()&&e.preventDefault(),t}return null}},{sorting:W_,Layers:I_,backgroundPatterns:{flipXy:function(e){var t=document.createElement("canvas"),r=e.width,i=e.height;t.width=2*r,t.height=2*i;var n=t.getContext("2d");return n.drawImage(e,0,0,r,i),n.setTransform(-1,0,0,-1,t.width,t.height),n.drawImage(e,0,0,r,i),n.setTransform(-1,0,0,1,t.width,0),n.drawImage(e,0,0,r,i),n.setTransform(1,0,0,-1,0,t.height),n.drawImage(e,0,0,r,i),t},flipX:function(e){var t=document.createElement("canvas"),r=e.width,i=e.height;t.width=2*r,t.height=i;var n=t.getContext("2d");return n.drawImage(e,0,0,r,i),n.translate(2*r,0),n.scale(-1,1),n.drawImage(e,0,0,r,i),t},flipY:function(e){var t=document.createElement("canvas"),r=e.width,i=e.height;t.width=r,t.height=2*i;var n=t.getContext("2d");return n.drawImage(e,0,0,r,i),n.translate(0,2*i),n.scale(1,-1),n.drawImage(e,0,0,r,i),t},watermark:function(e,t){t=t||{};var r=e.width,i=e.height,n=document.createElement("canvas");n.width=3*r,n.height=3*i;for(var o=n.getContext("2d"),s=Fg(t.watermarkAngle)?-t.watermarkAngle:-20,a=hu(s),l=n.width/4,c=n.height/4,d=0;d<4;d++)for(var h=0;h<4;h++)(d+h)%2>0&&(o.setTransform(1,0,0,1,(2*d-1)*l,(2*h-1)*c),o.rotate(a),o.drawImage(e,-r/2,-i/2,r,i));return n}},gridPatterns:{dot:[{color:"#AAAAAA",thickness:1,markup:"rect",render:function(e,t){ef(e).attr({width:t.thickness,height:t.thickness,fill:t.color})}}],fixedDot:[{color:"#AAAAAA",thickness:1,markup:"rect",render:function(e,t){ef(e).attr({fill:t.color})},update:function(e,t,r){const{sx:i,sy:n}=r.scale(),o=i<=1?t.thickness:t.thickness/i,s=n<=1?t.thickness:t.thickness/n;ef(e).attr({width:o,height:s})}}],mesh:[{color:"#AAAAAA",thickness:1,markup:"path",render:function(e,t){var r,i=t.width,n=t.height,o=t.thickness;r=i-o>=0&&n-o>=0?["M",i,0,"H0 M0 0 V0",n].join(" "):"M 0 0 0 0",ef(e).attr({d:r,stroke:t.color,"stroke-width":t.thickness})}}],doubleMesh:[{color:"#AAAAAA",thickness:1,markup:"path",render:function(e,t){var r,i=t.width,n=t.height,o=t.thickness;r=i-o>=0&&n-o>=0?["M",i,0,"H0 M0 0 V0",n].join(" "):"M 0 0 0 0",ef(e).attr({d:r,stroke:t.color,"stroke-width":t.thickness})}},{color:"#000000",thickness:3,scaleFactor:4,markup:"path",render:function(e,t){var r,i=t.width,n=t.height,o=t.thickness;r=i-o>=0&&n-o>=0?["M",i,0,"H0 M0 0 V0",n].join(" "):"M 0 0 0 0",ef(e).attr({d:r,stroke:t.color,"stroke-width":t.thickness})}}]}});var K_="\0",ek="\0",tk="";function rk(e,t){e[t]?e[t]++:e[t]=1}function ik(e,t){--e[t]||delete e[t]}function nk(e,t,r,i){var n=""+t,o=""+r;if(!e&&n>o){var s=n;n=o,o=s}return n+tk+o+tk+(void 0===i?K_:i)}function ok(e,t){return nk(e,t.v,t.w,t.name)}var sk=class{#r=!0;#i=!1;#n=!1;#o;#s=()=>{};#a=()=>{};#l={};#c={};#d={};#h={};#u={};#p={};#f={};#m=0;#g=0;#v;#b;constructor(e){e&&(this.#r=!e.hasOwnProperty("directed")||e.directed,this.#i=!!e.hasOwnProperty("multigraph")&&e.multigraph,this.#n=!!e.hasOwnProperty("compound")&&e.compound),this.#n&&(this.#v={},this.#b={},this.#b[ek]={})}isDirected(){return this.#r}isMultigraph(){return this.#i}isCompound(){return this.#n}setGraph(e){return this.#o=e,this}graph(){return this.#o}setDefaultNodeLabel(e){return this.#s=e,"function"!=typeof e&&(this.#s=()=>e),this}nodeCount(){return this.#m}nodes(){return Object.keys(this.#l)}sources(){var e=this;return this.nodes().filter((t=>0===Object.keys(e.#c[t]).length))}sinks(){var e=this;return this.nodes().filter((t=>0===Object.keys(e.#h[t]).length))}setNodes(e,t){var r=arguments,i=this;return e.forEach((function(e){r.length>1?i.setNode(e,t):i.setNode(e)})),this}setNode(e,t){return this.#l.hasOwnProperty(e)?(arguments.length>1&&(this.#l[e]=t),this):(this.#l[e]=arguments.length>1?t:this.#s(e),this.#n&&(this.#v[e]=ek,this.#b[e]={},this.#b[ek][e]=!0),this.#c[e]={},this.#d[e]={},this.#h[e]={},this.#u[e]={},++this.#m,this)}node(e){return this.#l[e]}hasNode(e){return this.#l.hasOwnProperty(e)}removeNode(e){var t=this;if(this.#l.hasOwnProperty(e)){var r=e=>t.removeEdge(t.#p[e]);delete this.#l[e],this.#n&&(this.#y(e),delete this.#v[e],this.children(e).forEach((function(e){t.setParent(e)})),delete this.#b[e]),Object.keys(this.#c[e]).forEach(r),delete this.#c[e],delete this.#d[e],Object.keys(this.#h[e]).forEach(r),delete this.#h[e],delete this.#u[e],--this.#m}return this}setParent(e,t){if(!this.#n)throw new Error("Cannot set parent in a non-compound graph");if(void 0===t)t=ek;else{for(var r=t+="";void 0!==r;r=this.parent(r))if(r===e)throw new Error("Setting "+t+" as parent of "+e+" would create a cycle");this.setNode(t)}return this.setNode(e),this.#y(e),this.#v[e]=t,this.#b[t][e]=!0,this}#y(e){delete this.#b[this.#v[e]][e]}parent(e){if(this.#n){var t=this.#v[e];if(t!==ek)return t}}children(e=ek){if(this.#n){var t=this.#b[e];if(t)return Object.keys(t)}else{if(e===ek)return this.nodes();if(this.hasNode(e))return[]}}predecessors(e){var t=this.#d[e];if(t)return Object.keys(t)}successors(e){var t=this.#u[e];if(t)return Object.keys(t)}neighbors(e){var t=this.predecessors(e);if(t){const i=new Set(t);for(var r of this.successors(e))i.add(r);return Array.from(i.values())}}isLeaf(e){return 0===(this.isDirected()?this.successors(e):this.neighbors(e)).length}filterNodes(e){var t=new this.constructor({directed:this.#r,multigraph:this.#i,compound:this.#n});t.setGraph(this.graph());var r=this;Object.entries(this.#l).forEach((function([r,i]){e(r)&&t.setNode(r,i)})),Object.values(this.#p).forEach((function(e){t.hasNode(e.v)&&t.hasNode(e.w)&&t.setEdge(e,r.edge(e))}));var i={};function n(e){var o=r.parent(e);return void 0===o||t.hasNode(o)?(i[e]=o,o):o in i?i[o]:n(o)}return this.#n&&t.nodes().forEach((e=>t.setParent(e,n(e)))),t}setDefaultEdgeLabel(e){return this.#a=e,"function"!=typeof e&&(this.#a=()=>e),this}edgeCount(){return this.#g}edges(){return Object.values(this.#p)}setPath(e,t){var r=this,i=arguments;return e.reduce((function(e,n){return i.length>1?r.setEdge(e,n,t):r.setEdge(e,n),n})),this}setEdge(){var e,t,r,i,n=!1,o=arguments[0];"object"==typeof o&&null!==o&&"v"in o?(e=o.v,t=o.w,r=o.name,2===arguments.length&&(i=arguments[1],n=!0)):(e=o,t=arguments[1],r=arguments[3],arguments.length>2&&(i=arguments[2],n=!0)),e=""+e,t=""+t,void 0!==r&&(r=""+r);var s=nk(this.#r,e,t,r);if(this.#f.hasOwnProperty(s))return n&&(this.#f[s]=i),this;if(void 0!==r&&!this.#i)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(e),this.setNode(t),this.#f[s]=n?i:this.#a(e,t,r);var a=function(e,t,r,i){var n=""+t,o=""+r;if(!e&&n>o){var s=n;n=o,o=s}var a={v:n,w:o};i&&(a.name=i);return a}(this.#r,e,t,r);return e=a.v,t=a.w,Object.freeze(a),this.#p[s]=a,rk(this.#d[t],e),rk(this.#u[e],t),this.#c[t][s]=a,this.#h[e][s]=a,this.#g++,this}edge(e,t,r){var i=1===arguments.length?ok(this.#r,arguments[0]):nk(this.#r,e,t,r);return this.#f[i]}edgeAsObj(){const e=this.edge(...arguments);return"object"!=typeof e?{label:e}:e}hasEdge(e,t,r){var i=1===arguments.length?ok(this.#r,arguments[0]):nk(this.#r,e,t,r);return this.#f.hasOwnProperty(i)}removeEdge(e,t,r){var i=1===arguments.length?ok(this.#r,arguments[0]):nk(this.#r,e,t,r),n=this.#p[i];return n&&(e=n.v,t=n.w,delete this.#f[i],delete this.#p[i],ik(this.#d[t],e),ik(this.#u[e],t),delete this.#c[t][i],delete this.#h[e][i],this.#g--),this}inEdges(e,t){var r=this.#c[e];if(r){var i=Object.values(r);return t?i.filter((e=>e.v===t)):i}}outEdges(e,t){var r=this.#h[e];if(r){var i=Object.values(r);return t?i.filter((e=>e.w===t)):i}}nodeEdges(e,t){var r=this.inEdges(e,t);if(r)return r.concat(this.outEdges(e,t))}},ak={Graph:sk,version:"2.1.13"},lk={write:function(e){var t={options:{directed:e.isDirected(),multigraph:e.isMultigraph(),compound:e.isCompound()},nodes:ck(e),edges:dk(e)};void 0!==e.graph()&&(t.value=structuredClone(e.graph()));return t},read:function(e){var t=new sk(e.options).setGraph(e.value);return e.nodes.forEach((function(e){t.setNode(e.v,e.value),e.parent&&t.setParent(e.v,e.parent)})),e.edges.forEach((function(e){t.setEdge({v:e.v,w:e.w,name:e.name},e.value)})),t}};function ck(e){return e.nodes().map((function(t){var r=e.node(t),i=e.parent(t),n={v:t};return void 0!==r&&(n.value=r),void 0!==i&&(n.parent=i),n}))}function dk(e){return e.edges().map((function(t){var r=e.edge(t),i={v:t.v,w:t.w};return void 0!==t.name&&(i.name=t.name),void 0!==r&&(i.value=r),i}))}var hk=function(e){var t,r={},i=[];function n(i){r.hasOwnProperty(i)||(r[i]=!0,t.push(i),e.successors(i).forEach(n),e.predecessors(i).forEach(n))}return e.nodes().forEach((function(e){t=[],n(e),t.length&&i.push(t)})),i};var uk=class{#x=[];#w={};size(){return this.#x.length}keys(){return this.#x.map((function(e){return e.key}))}has(e){return this.#w.hasOwnProperty(e)}priority(e){var t=this.#w[e];if(void 0!==t)return this.#x[t].priority}min(){if(0===this.size())throw new Error("Queue underflow");return this.#x[0].key}add(e,t){var r=this.#w;if(e=String(e),!r.hasOwnProperty(e)){var i=this.#x,n=i.length;return r[e]=n,i.push({key:e,priority:t}),this.#_(n),!0}return!1}removeMin(){this.#k(0,this.#x.length-1);var e=this.#x.pop();return delete this.#w[e.key],this.#C(0),e.key}decrease(e,t){var r=this.#w[e];if(t>this.#x[r].priority)throw new Error("New priority is greater than current priority. Key: "+e+" Old: "+this.#x[r].priority+" New: "+t);this.#x[r].priority=t,this.#_(r)}#C(e){var t=this.#x,r=2*e,i=r+1,n=e;r<t.length&&(n=t[r].priority<t[n].priority?r:n,i<t.length&&(n=t[i].priority<t[n].priority?i:n),n!==e&&(this.#k(e,n),this.#C(n)))}#_(e){for(var t,r=this.#x,i=r[e].priority;0!==e&&!(r[t=e>>1].priority<i);)this.#k(e,t),e=t}#k(e,t){var r=this.#x,i=this.#w,n=r[e],o=r[t];r[e]=o,r[t]=n,i[o.key]=e,i[n.key]=t}},pk=function(e,t,r,i){return function(e,t,r,i){var n,o,s={},a=new uk,l=function(e){var t=e.v!==n?e.v:e.w,i=s[t],l=r(e),c=o.distance+l;if(l<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+e+" Weight: "+l);c<i.distance&&(i.distance=c,i.predecessor=n,a.decrease(t,c))};e.nodes().forEach((function(e){var r=e===t?0:Number.POSITIVE_INFINITY;s[e]={distance:r},a.add(e,r)}));for(;a.size()>0&&(n=a.removeMin(),(o=s[n]).distance!==Number.POSITIVE_INFINITY);)i(n).forEach(l);return s}(e,String(t),r||fk,i||function(t){return e.outEdges(t)})},fk=()=>1;var mk=function(e,t,r){return e.nodes().reduce((function(i,n){return i[n]=pk(e,n,t,r),i}),{})};var gk=function(e){var t=0,r=[],i={},n=[];function o(s){var a=i[s]={onStack:!0,lowlink:t,index:t++};if(r.push(s),e.successors(s).forEach((function(e){i.hasOwnProperty(e)?i[e].onStack&&(a.lowlink=Math.min(a.lowlink,i[e].index)):(o(e),a.lowlink=Math.min(a.lowlink,i[e].lowlink))})),a.lowlink===a.index){var l,c=[];do{l=r.pop(),i[l].onStack=!1,c.push(l)}while(s!==l);n.push(c)}}return e.nodes().forEach((function(e){i.hasOwnProperty(e)||o(e)})),n};var vk=function(e){return gk(e).filter((function(t){return t.length>1||1===t.length&&e.hasEdge(t[0],t[0])}))};var bk=function(e,t,r){return function(e,t,r){var i={},n=e.nodes();return n.forEach((function(e){i[e]={},i[e][e]={distance:0},n.forEach((function(t){e!==t&&(i[e][t]={distance:Number.POSITIVE_INFINITY})})),r(e).forEach((function(r){var n=r.v===e?r.w:r.v,o=t(r);i[e][n]={distance:o,predecessor:e}}))})),n.forEach((function(e){var t=i[e];n.forEach((function(r){var o=i[r];n.forEach((function(r){var i=o[e],n=t[r],s=o[r],a=i.distance+n.distance;a<s.distance&&(s.distance=a,s.predecessor=n.predecessor)}))}))})),i}(e,t||yk,r||function(t){return e.outEdges(t)})},yk=()=>1;function xk(e){var t={},r={},i=[];if(e.sinks().forEach((function n(o){if(r.hasOwnProperty(o))throw new wk;t.hasOwnProperty(o)||(r[o]=!0,t[o]=!0,e.predecessors(o).forEach(n),delete r[o],i.push(o))})),Object.keys(t).length!==e.nodeCount())throw new wk;return i}class wk extends Error{constructor(){super(...arguments)}}var _k=xk;xk.CycleException=wk;var kk=function(e){try{_k(e)}catch(e){if(e instanceof _k.CycleException)return!1;throw e}return!0};var Ck=function(e,t,r){Array.isArray(t)||(t=[t]);var i=e.isDirected()?t=>e.successors(t):t=>e.neighbors(t),n="post"===r?Sk:Ak,o=[],s={};return t.forEach((t=>{if(!e.hasNode(t))throw new Error("Graph does not have node: "+t);n(t,i,s,o)})),o};function Sk(e,t,r,i){for(var n=[[e,!1]];n.length>0;){var o=n.pop();o[1]?i.push(o[0]):r.hasOwnProperty(o[0])||(r[o[0]]=!0,n.push([o[0],!0]),Pk(t(o[0]),(e=>n.push([e,!1]))))}}function Ak(e,t,r,i){for(var n=[e];n.length>0;){var o=n.pop();r.hasOwnProperty(o)||(r[o]=!0,i.push(o),Pk(t(o),(e=>n.push(e))))}}function Pk(e,t){for(var r=e.length;r--;)t(e[r],r,e);return e}var Tk=function(e,t){return Ck(e,t,"post")};var Ek=function(e,t){return Ck(e,t,"pre")};var Ik=function(e,t){var r,i=new sk,n={},o=new uk;function s(e){var i=e.v===r?e.w:e.v,s=o.priority(i);if(void 0!==s){var a=t(e);a<s&&(n[i]=r,o.decrease(i,a))}}if(0===e.nodeCount())return i;e.nodes().forEach((function(e){o.add(e,Number.POSITIVE_INFINITY),i.setNode(e)})),o.decrease(e.nodes()[0],0);var a=!1;for(;o.size()>0;){if(r=o.removeMin(),n.hasOwnProperty(r))i.setEdge(r,n[r]);else{if(a)throw new Error("Input graph is not connected: "+e);a=!0}e.nodeEdges(r).forEach(s)}return i};var Lk={Graph:ak.Graph,json:lk,alg:{components:hk,dijkstra:pk,dijkstraAll:mk,findCycles:vk,floydWarshall:bk,isAcyclic:kk,postorder:Tk,preorder:Ek,prim:Ik,tarjan:gk,topsort:_k},version:ak.version},Ok=Lk.Graph;function Mk(e){e._prev._next=e._next,e._next._prev=e._prev,delete e._next,delete e._prev}function Rk(e,t){if("_next"!==e&&"_prev"!==e)return t}var $k=class{constructor(){let e={};e._next=e._prev=e,this._sentinel=e}dequeue(){let e=this._sentinel,t=e._prev;if(t!==e)return Mk(t),t}enqueue(e){let t=this._sentinel;e._prev&&e._next&&Mk(e),e._next=t._next,t._next._prev=e,t._next=e,e._prev=t}toString(){let e=[],t=this._sentinel,r=t._prev;for(;r!==t;)e.push(JSON.stringify(r,Rk)),r=r._prev;return"["+e.join(", ")+"]"}};let Nk=Lk.Graph;var Dk=function(e,t){if(e.nodeCount()<=1)return[];let r=function(e,t){let r=new Nk,i=0,n=0;e.nodes().forEach((e=>{r.setNode(e,{v:e,in:0,out:0})})),e.edges().forEach((e=>{let o=r.edge(e.v,e.w)||0,s=t(e),a=o+s;r.setEdge(e.v,e.w,a),n=Math.max(n,r.node(e.v).out+=s),i=Math.max(i,r.node(e.w).in+=s)}));let o=function(e){const t=[];for(let r=0;r<e;r++)t.push(r);return t}(n+i+3).map((()=>new $k)),s=i+1;return r.nodes().forEach((e=>{Fk(o,s,r.node(e))})),{graph:r,buckets:o,zeroIdx:s}}(e,t||zk);return function(e,t,r){let i,n=[],o=t[t.length-1],s=t[0];for(;e.nodeCount();){for(;i=s.dequeue();)Bk(e,t,r,i);for(;i=o.dequeue();)Bk(e,t,r,i);if(e.nodeCount())for(let o=t.length-2;o>0;--o)if(i=t[o].dequeue(),i){n=n.concat(Bk(e,t,r,i,!0));break}}return n}(r.graph,r.buckets,r.zeroIdx).flatMap((t=>e.outEdges(t.v,t.w)))};let zk=()=>1;function Bk(e,t,r,i,n){let o=n?[]:void 0;return e.inEdges(i.v).forEach((i=>{let s=e.edge(i),a=e.node(i.v);n&&o.push({v:i.v,w:i.w}),a.out-=s,Fk(t,r,a)})),e.outEdges(i.v).forEach((i=>{let n=e.edge(i),o=i.w,s=e.node(o);s.in-=n,Fk(t,r,s)})),e.removeNode(i.v),o}function Fk(e,t,r){r.out?r.in?e[r.out-r.in+t].enqueue(r):e[e.length-1].enqueue(r):e[0].enqueue(r)}let Uk=Lk.Graph;var Vk={addBorderNode:function(e,t,r,i){let n={width:0,height:0};arguments.length>=4&&(n.rank=r,n.order=i);return jk(e,"border",n,t)},addDummyNode:jk,asNonCompoundGraph:function(e){let t=new Uk({multigraph:e.isMultigraph()}).setGraph(e.graph());return e.nodes().forEach((r=>{e.children(r).length||t.setNode(r,e.node(r))})),e.edges().forEach((r=>{t.setEdge(r,e.edge(r))})),t},buildLayerMatrix:function(e){let t=qk(Gk(e)+1).map((()=>[]));return e.nodes().forEach((r=>{let i=e.node(r),n=i.rank;void 0!==n&&(t[n][i.order]=r)})),t},intersectRect:function(e,t){let r,i,n=e.x,o=e.y,s=t.x-n,a=t.y-o,l=e.width/2,c=e.height/2;if(!s&&!a)throw new Error("Not possible to find intersection inside of the rectangle");Math.abs(a)*l>Math.abs(s)*c?(a<0&&(c=-c),r=c*s/a,i=c):(s<0&&(l=-l),r=l,i=l*a/s);return{x:n+r,y:o+i}},mapValues:function(e,t){let r=t;"string"==typeof t&&(r=e=>e[t]);return Object.entries(e).reduce(((e,[t,i])=>(e[t]=r(i,t),e)),{})},maxRank:Gk,normalizeRanks:function(e){let t=Math.min(...e.nodes().map((t=>{let r=e.node(t).rank;return void 0===r?Number.MAX_VALUE:r})));e.nodes().forEach((r=>{let i=e.node(r);i.hasOwnProperty("rank")&&(i.rank-=t)}))},notime:function(e,t){return t()},partition:function(e,t){let r={lhs:[],rhs:[]};return e.forEach((e=>{t(e)?r.lhs.push(e):r.rhs.push(e)})),r},pick:function(e,t){const r={};for(const i of t)void 0!==e[i]&&(r[i]=e[i]);return r},predecessorWeights:function(e){let t=e.nodes().map((t=>{let r={};return e.inEdges(t).forEach((t=>{r[t.v]=(r[t.v]||0)+e.edge(t).weight})),r}));return Yk(e.nodes(),t)},range:qk,removeEmptyRanks:function(e){let t=Math.min(...e.nodes().map((t=>e.node(t).rank))),r=[];e.nodes().forEach((i=>{let n=e.node(i).rank-t;r[n]||(r[n]=[]),r[n].push(i)}));let i=0,n=e.graph().nodeRankFactor;Array.from(r).forEach(((t,r)=>{void 0===t&&r%n!=0?--i:void 0!==t&&i&&t.forEach((t=>e.node(t).rank+=i))}))},simplify:function(e){let t=(new Uk).setGraph(e.graph());return e.nodes().forEach((r=>t.setNode(r,e.node(r)))),e.edges().forEach((r=>{let i=t.edge(r.v,r.w)||{weight:0,minlen:1},n=e.edge(r);t.setEdge(r.v,r.w,{weight:i.weight+n.weight,minlen:Math.max(i.minlen,n.minlen)})})),t},successorWeights:function(e){let t=e.nodes().map((t=>{let r={};return e.outEdges(t).forEach((t=>{r[t.w]=(r[t.w]||0)+e.edge(t).weight})),r}));return Yk(e.nodes(),t)},time:function(e,t){let r=Date.now();try{return t()}finally{console.log(e+" time: "+(Date.now()-r)+"ms")}},uniqueId:Wk,zipObject:Yk};function jk(e,t,r,i){let n;do{n=Wk(i)}while(e.hasNode(n));return r.dummy=t,e.setNode(n,r),n}function Gk(e){return Math.max(...e.nodes().map((t=>{let r=e.node(t).rank;return void 0===r?Number.MIN_VALUE:r})))}let Hk=0;function Wk(e){var t=++Hk;return toString(e)+t}function qk(e,t,r=1){null==t&&(t=e,e=0);let i=e=>e<t;r<0&&(i=e=>t<e);const n=[];for(let t=e;i(t);t+=r)n.push(t);return n}function Yk(e,t){return e.reduce(((e,r,i)=>(e[r]=t[i],e)),{})}let Jk=Vk.uniqueId;var Xk={run:function(e){let t="greedy"===e.graph().acyclicer?Dk(e,function(e){return t=>e.edge(t).weight}(e)):function(e){let t=[],r={},i={};function n(o){i.hasOwnProperty(o)||(i[o]=!0,r[o]=!0,e.outEdges(o).forEach((e=>{r.hasOwnProperty(e.w)?t.push(e):n(e.w)})),delete r[o])}return e.nodes().forEach(n),t}(e);t.forEach((t=>{let r=e.edge(t);e.removeEdge(t),r.forwardName=t.name,r.reversed=!0,e.setEdge(t.w,t.v,r,Jk("rev"))}))},undo:function(e){e.edges().forEach((t=>{let r=e.edge(t);if(r.reversed){e.removeEdge(t);let i=r.forwardName;delete r.reversed,delete r.forwardName,e.setEdge(t.w,t.v,r,i)}}))}};var Zk={run:function(e){e.graph().dummyChains=[],e.edges().forEach((t=>function(e,t){let r,i,n,o=t.v,s=e.node(o).rank,a=t.w,l=e.node(a).rank,c=t.name,d=e.edge(t),h=d.labelRank;if(l===s+1)return;for(e.removeEdge(t),n=0,++s;s<l;++n,++s)d.points=[],i={width:0,height:0,edgeLabel:d,edgeObj:t,rank:s},r=Vk.addDummyNode(e,"edge",i,"_d"),s===h&&(i.width=d.width,i.height=d.height,i.dummy="edge-label",i.labelpos=d.labelpos),e.setEdge(o,r,{weight:d.weight},c),0===n&&e.graph().dummyChains.push(r),o=r;e.setEdge(o,a,{weight:d.weight},c)}(e,t)))},undo:function(e){e.graph().dummyChains.forEach((t=>{let r,i=e.node(t),n=i.edgeLabel;for(e.setEdge(i.edgeObj,n);i.dummy;)r=e.successors(t)[0],e.removeNode(t),n.points.push({x:i.x,y:i.y}),"edge-label"===i.dummy&&(n.x=i.x,n.y=i.y,n.width=i.width,n.height=i.height),t=r,i=e.node(t)}))}};var Qk=function(e){var t={};e.sources().forEach((function r(i){var n=e.node(i);if(t.hasOwnProperty(i))return n.rank;t[i]=!0;var o=Math.min(...e.outEdges(i).map((t=>null==t?Number.POSITIVE_INFINITY:r(t.w)-e.edge(t).minlen)));return o===Number.POSITIVE_INFINITY&&(o=0),n.rank=o}))},Kk=function(e,t){return e.node(t.w).rank-e.node(t.v).rank-e.edge(t).minlen};var eC=Lk.Graph,tC=Kk,rC=function(e){var t,r,i=new eC({directed:!1}),n=e.nodes()[0],o=e.nodeCount();i.setNode(n,{});for(;iC(i,e)<o;)t=nC(i,e),r=i.hasNode(t.v)?tC(e,t):-tC(e,t),oC(i,e,r);return i};function iC(e,t){return e.nodes().forEach((function r(i){t.nodeEdges(i).forEach((n=>{var o=n.v,s=i===o?n.w:o;e.hasNode(s)||tC(t,n)||(e.setNode(s,{}),e.setEdge(i,s,{}),r(s))}))})),e.nodeCount()}function nC(e,t){return t.edges().reduce(((r,i)=>{let n=Number.POSITIVE_INFINITY;return e.hasNode(i.v)!==e.hasNode(i.w)&&(n=tC(t,i)),n<r[0]?[n,i]:r}),[Number.POSITIVE_INFINITY,null])[1]}function oC(e,t,r){e.nodes().forEach((e=>t.node(e).rank+=r))}var sC=Kk,aC=Qk,lC=Lk.alg.preorder,cC=Lk.alg.postorder,dC=Vk.simplify,hC=uC;function uC(e){e=dC(e),aC(e);var t,r=rC(e);for(mC(r),pC(r,e);t=vC(r);)yC(r,e,t,bC(r,e,t))}function pC(e,t){var r=cC(e,e.nodes());(r=r.slice(0,r.length-1)).forEach((r=>function(e,t,r){var i=e.node(r),n=i.parent;e.edge(r,n).cutvalue=fC(e,t,r)}(e,t,r)))}function fC(e,t,r){var i=e.node(r).parent,n=!0,o=t.edge(r,i),s=0;return o||(n=!1,o=t.edge(i,r)),s=o.weight,t.nodeEdges(r).forEach((o=>{var a=o.v===r,l=a?o.w:o.v;if(l!==i){var c=a===n,d=t.edge(o).weight;if(s+=c?d:-d,function(e,t,r){return e.hasEdge(t,r)}(e,r,l)){var h=e.edge(r,l).cutvalue;s+=c?-h:h}}})),s}function mC(e,t){arguments.length<2&&(t=e.nodes()[0]),gC(e,{},1,t)}function gC(e,t,r,i,n){var o=r,s=e.node(i);return t[i]=!0,e.neighbors(i).forEach((n=>{t.hasOwnProperty(n)||(r=gC(e,t,r,n,i))})),s.low=o,s.lim=r++,n?s.parent=n:delete s.parent,r}function vC(e){return e.edges().find((t=>e.edge(t).cutvalue<0))}function bC(e,t,r){var i=r.v,n=r.w;t.hasEdge(i,n)||(i=r.w,n=r.v);var o=e.node(i),s=e.node(n),a=o,l=!1;o.lim>s.lim&&(a=s,l=!0);var c=t.edges().filter((t=>l===xC(e,e.node(t.v),a)&&l!==xC(e,e.node(t.w),a)));return c.reduce(((e,r)=>sC(t,r)<sC(t,e)?r:e))}function yC(e,t,r,i){var n=r.v,o=r.w;e.removeEdge(n,o),e.setEdge(i.v,i.w,{}),mC(e),pC(e,t),function(e,t){var r=e.nodes().find((e=>!t.node(e).parent)),i=lC(e,r);(i=i.slice(1)).forEach((r=>{var i=e.node(r).parent,n=t.edge(r,i),o=!1;n||(n=t.edge(i,r),o=!0),t.node(r).rank=t.node(i).rank+(o?n.minlen:-n.minlen)}))}(e,t)}function xC(e,t,r){return r.low<=t.lim&&t.lim<=r.lim}uC.initLowLimValues=mC,uC.initCutValues=pC,uC.calcCutValue=fC,uC.leaveEdge=vC,uC.enterEdge=bC,uC.exchangeEdges=yC;var wC=Qk,_C=function(e){switch(e.graph().ranker){case"network-simplex":default:CC(e);break;case"tight-tree":!function(e){wC(e),rC(e)}(e);break;case"longest-path":kC(e)}};var kC=wC;function CC(e){hC(e)}var SC=function(e){let t=function(e){let t={},r=0;function i(n){let o=r;e.children(n).forEach(i),t[n]={low:o,lim:r++}}return e.children().forEach(i),t}(e);e.graph().dummyChains.forEach((r=>{let i=e.node(r),n=i.edgeObj,o=function(e,t,r,i){let n,o,s=[],a=[],l=Math.min(t[r].low,t[i].low),c=Math.max(t[r].lim,t[i].lim);n=r;do{n=e.parent(n),s.push(n)}while(n&&(t[n].low>l||c>t[n].lim));o=n,n=i;for(;(n=e.parent(n))!==o;)a.push(n);return{path:s.concat(a.reverse()),lca:o}}(e,t,n.v,n.w),s=o.path,a=o.lca,l=0,c=s[l],d=!0;for(;r!==n.w;){if(i=e.node(r),d){for(;(c=s[l])!==a&&e.node(c).maxRank<i.rank;)l++;c===a&&(d=!1)}if(!d){for(;l<s.length-1&&e.node(c=s[l+1]).minRank<=i.rank;)l++;c=s[l]}e.setParent(r,c),r=e.successors(r)[0]}}))};var AC={run:function(e){let t=Vk.addDummyNode(e,"root",{},"_root"),r=function(e){var t={};function r(i,n){var o=e.children(i);o&&o.length&&o.forEach((e=>r(e,n+1))),t[i]=n}return e.children().forEach((e=>r(e,1))),t}(e),i=Math.max(...Object.values(r))-1,n=2*i+1;e.graph().nestingRoot=t,e.edges().forEach((t=>e.edge(t).minlen*=n));let o=function(e){return e.edges().reduce(((t,r)=>t+e.edge(r).weight),0)}(e)+1;e.children().forEach((s=>PC(e,t,n,o,i,r,s))),e.graph().nodeRankFactor=n},cleanup:function(e){var t=e.graph();e.removeNode(t.nestingRoot),delete t.nestingRoot,e.edges().forEach((t=>{e.edge(t).nestingEdge&&e.removeEdge(t)}))}};function PC(e,t,r,i,n,o,s){let a=e.children(s);if(!a.length)return void(s!==t&&e.setEdge(t,s,{weight:0,minlen:r}));let l=Vk.addBorderNode(e,"_bt"),c=Vk.addBorderNode(e,"_bb"),d=e.node(s);e.setParent(l,s),d.borderTop=l,e.setParent(c,s),d.borderBottom=c,a.forEach((a=>{PC(e,t,r,i,n,o,a);let d=e.node(a),h=d.borderTop?d.borderTop:a,u=d.borderBottom?d.borderBottom:a,p=d.borderTop?i:2*i,f=h!==u?1:n-o[s]+1;e.setEdge(l,h,{weight:p,minlen:f,nestingEdge:!0}),e.setEdge(u,c,{weight:p,minlen:f,nestingEdge:!0})})),e.parent(s)||e.setEdge(t,l,{weight:0,minlen:n+o[s]})}var TC=function(e){e.children().forEach((function t(r){let i=e.children(r),n=e.node(r);if(i.length&&i.forEach(t),n.hasOwnProperty("minRank")){n.borderLeft=[],n.borderRight=[];for(let t=n.minRank,i=n.maxRank+1;t<i;++t)EC(e,"borderLeft","_bl",r,n,t),EC(e,"borderRight","_br",r,n,t)}}))};function EC(e,t,r,i,n,o){let s={width:0,height:0,rank:o,borderType:t},a=n[t][o-1],l=Vk.addDummyNode(e,"border",s,r);n[t][o]=l,e.setParent(l,i),a&&e.setEdge(a,l,{weight:1})}var IC={adjust:function(e){let t=e.graph().rankdir.toLowerCase();"lr"!==t&&"rl"!==t||LC(e)},undo:function(e){let t=e.graph().rankdir.toLowerCase();"bt"!==t&&"rl"!==t||function(e){e.nodes().forEach((t=>MC(e.node(t)))),e.edges().forEach((t=>{let r=e.edge(t);r.points.forEach(MC),r.hasOwnProperty("y")&&MC(r)}))}(e);"lr"!==t&&"rl"!==t||(!function(e){e.nodes().forEach((t=>RC(e.node(t)))),e.edges().forEach((t=>{let r=e.edge(t);r.points.forEach(RC),r.hasOwnProperty("x")&&RC(r)}))}(e),LC(e))}};function LC(e){e.nodes().forEach((t=>OC(e.node(t)))),e.edges().forEach((t=>OC(e.edge(t))))}function OC(e){let t=e.width;e.width=e.height,e.height=t}function MC(e){e.y=-e.y}function RC(e){let t=e.x;e.x=e.y,e.y=t}var $C=function(e){let t={},r=e.nodes().filter((t=>!e.children(t).length)),i=Math.max(...r.map((t=>e.node(t).rank))),n=Vk.range(i+1).map((()=>[]));function o(r){if(t[r])return;t[r]=!0;let i=e.node(r);n[i.rank].push(r),e.successors(r).forEach(o)}let s=r.sort(((t,r)=>e.node(t).rank-e.node(r).rank));return s.forEach(o),n};let NC=Vk.zipObject;var DC=function(e,t){let r=0;for(let i=1;i<t.length;++i)r+=zC(e,t[i-1],t[i]);return r};function zC(e,t,r){let i=NC(r,r.map(((e,t)=>t))),n=t.flatMap((t=>e.outEdges(t).map((t=>({pos:i[t.w],weight:e.edge(t).weight}))).sort(((e,t)=>e.pos-t.pos)))),o=1;for(;o<r.length;)o<<=1;let s=2*o-1;o-=1;let a=new Array(s).fill(0),l=0;return n.forEach((e=>{let t=e.pos+o;a[t]+=e.weight;let r=0;for(;t>0;)t%2&&(r+=a[t+1]),t=t-1>>1,a[t]+=e.weight;l+=e.weight*r})),l}var BC=function(e,t=[]){return t.map((t=>{let r=e.inEdges(t);if(r.length){let i=r.reduce(((t,r)=>{let i=e.edge(r),n=e.node(r.v);return{sum:t.sum+i.weight*n.order,weight:t.weight+i.weight}}),{sum:0,weight:0});return{v:t,barycenter:i.sum/i.weight,weight:i.weight}}return{v:t}}))};var FC=function(e,t){let r={};return e.forEach(((e,t)=>{let i=r[e.v]={indegree:0,in:[],out:[],vs:[e.v],i:t};void 0!==e.barycenter&&(i.barycenter=e.barycenter,i.weight=e.weight)})),t.edges().forEach((e=>{let t=r[e.v],i=r[e.w];void 0!==t&&void 0!==i&&(i.indegree++,t.out.push(r[e.w]))})),function(e){let t=[];function r(e){return t=>{t.merged||(void 0===t.barycenter||void 0===e.barycenter||t.barycenter>=e.barycenter)&&function(e,t){let r=0,i=0;e.weight&&(r+=e.barycenter*e.weight,i+=e.weight);t.weight&&(r+=t.barycenter*t.weight,i+=t.weight);e.vs=t.vs.concat(e.vs),e.barycenter=r/i,e.weight=i,e.i=Math.min(t.i,e.i),t.merged=!0}(e,t)}}function i(t){return r=>{r.in.push(t),0==--r.indegree&&e.push(r)}}for(;e.length;){let n=e.pop();t.push(n),n.in.reverse().forEach(r(n)),n.out.forEach(i(n))}return t.filter((e=>!e.merged)).map((e=>Vk.pick(e,["vs","i","barycenter","weight"])))}(Object.values(r).filter((e=>!e.indegree)))};var UC=function(e,t){let r=Vk.partition(e,(e=>e.hasOwnProperty("barycenter"))),i=r.lhs,n=r.rhs.sort(((e,t)=>t.i-e.i)),o=[],s=0,a=0,l=0;i.sort((c=!!t,(e,t)=>e.barycenter<t.barycenter?-1:e.barycenter>t.barycenter?1:c?t.i-e.i:e.i-t.i)),l=VC(o,n,l),i.forEach((e=>{l+=e.vs.length,o.push(e.vs),s+=e.barycenter*e.weight,a+=e.weight,l=VC(o,n,l)}));var c;let d={vs:o.flat(!0)};a&&(d.barycenter=s/a,d.weight=a);return d};function VC(e,t,r){let i;for(;t.length&&(i=t[t.length-1]).i<=r;)t.pop(),e.push(i.vs),r++;return r}var jC=function e(t,r,i,n){let o=t.children(r),s=t.node(r),a=s?s.borderLeft:void 0,l=s?s.borderRight:void 0,c={};a&&(o=o.filter((e=>e!==a&&e!==l)));let d=BC(t,o);d.forEach((r=>{if(t.children(r.v).length){let a=e(t,r.v,i,n);c[r.v]=a,a.hasOwnProperty("barycenter")&&(s=a,void 0!==(o=r).barycenter?(o.barycenter=(o.barycenter*o.weight+s.barycenter*s.weight)/(o.weight+s.weight),o.weight+=s.weight):(o.barycenter=s.barycenter,o.weight=s.weight))}var o,s}));let h=FC(d,i);!function(e,t){e.forEach((e=>{e.vs=e.vs.flatMap((e=>t[e]?t[e].vs:e))}))}(h,c);let u=UC(h,n);if(a&&(u.vs=[a,u.vs,l].flat(!0),t.predecessors(a).length)){let e=t.node(t.predecessors(a)[0]),r=t.node(t.predecessors(l)[0]);u.hasOwnProperty("barycenter")||(u.barycenter=0,u.weight=0),u.barycenter=(u.barycenter*u.weight+e.order+r.order)/(u.weight+2),u.weight+=2}return u};let GC=Lk.Graph;var HC=function(e,t,r){let i=function(e){var t;for(;e.hasNode(t=Vk.uniqueId("_root")););return t}(e),n=new GC({compound:!0}).setGraph({root:i}).setDefaultNodeLabel((t=>e.node(t)));return e.nodes().forEach((o=>{let s=e.node(o),a=e.parent(o);(s.rank===t||s.minRank<=t&&t<=s.maxRank)&&(n.setNode(o),n.setParent(o,a||i),e[r](o).forEach((t=>{let r=t.v===o?t.w:t.v,i=n.edge(r,o),s=void 0!==i?i.weight:0;n.setEdge(r,o,{weight:e.edge(t).weight+s})})),s.hasOwnProperty("minRank")&&n.setNode(o,{borderLeft:s.borderLeft[t],borderRight:s.borderRight[t]}))})),n};var WC=function(e,t,r){let i,n={};r.forEach((r=>{let o,s,a=e.parent(r);for(;a;){if(o=e.parent(a),o?(s=n[o],n[o]=a):(s=i,i=a),s&&s!==a)return void t.setEdge(s,a);a=o}}))};let qC=Lk.Graph;var YC=function(e){let t=Vk.maxRank(e),r=JC(e,Vk.range(1,t+1),"inEdges"),i=JC(e,Vk.range(t-1,-1,-1),"outEdges"),n=$C(e);ZC(e,n);let o,s=Number.POSITIVE_INFINITY;for(let t=0,a=0;a<4;++t,++a){XC(t%2?r:i,t%4>=2),n=Vk.buildLayerMatrix(e);let l=DC(e,n);l<s&&(a=0,o=Object.assign({},n),s=l)}ZC(e,o)};function JC(e,t,r){return t.map((function(t){return HC(e,t,r)}))}function XC(e,t){let r=new qC;e.forEach((function(e){let i=e.graph().root,n=jC(e,i,r,t);n.vs.forEach(((t,r)=>e.node(t).order=r)),WC(e,r,n.vs)}))}function ZC(e,t){Object.values(t).forEach((t=>t.forEach(((t,r)=>e.node(t).order=r))))}let QC=Lk.Graph;var KC=function(e){let t,r=Vk.buildLayerMatrix(e),i=Object.assign(eS(e,r),tS(e,r)),n={};["u","d"].forEach((o=>{t="u"===o?r:Object.values(r).reverse(),["l","r"].forEach((r=>{"r"===r&&(t=t.map((e=>Object.values(e).reverse())));let s=("u"===o?e.predecessors:e.successors).bind(e),a=nS(e,t,i,s),l=oS(e,t,a.root,a.align,"r"===r);"r"===r&&(l=Vk.mapValues(l,(e=>-e))),n[o+r]=l}))}));let o=sS(e,n);return aS(n,o),lS(n,e.graph().align)};function eS(e,t){let r={};return t.reduce((function(t,i){let n=0,o=0,s=t.length,a=i[i.length-1];return i.forEach(((t,l)=>{let c=function(e,t){if(e.node(t).dummy)return e.predecessors(t).find((t=>e.node(t).dummy))}(e,t),d=c?e.node(c).order:s;(c||t===a)&&(i.slice(o,l+1).forEach((t=>{e.predecessors(t).forEach((i=>{let o=e.node(i),s=o.order;!(s<n||d<s)||o.dummy&&e.node(t).dummy||rS(r,i,t)}))})),o=l+1,n=d)})),i})),r}function tS(e,t){let r={};function i(t,i,n,o,s){let a;Vk.range(i,n).forEach((i=>{a=t[i],e.node(a).dummy&&e.predecessors(a).forEach((t=>{let i=e.node(t);i.dummy&&(i.order<o||i.order>s)&&rS(r,t,a)}))}))}return t.reduce((function(t,r){let n,o=-1,s=0;return r.forEach(((a,l)=>{if("border"===e.node(a).dummy){let t=e.predecessors(a);t.length&&(n=e.node(t[0]).order,i(r,s,l,o,n),s=l,o=n)}i(r,s,r.length,n,t.length)})),r})),r}function rS(e,t,r){if(t>r){let e=t;t=r,r=e}let i=e[t];i||(e[t]=i={}),i[r]=!0}function iS(e,t,r){if(t>r){let e=t;t=r,r=e}return!!e[t]&&e[t].hasOwnProperty(r)}function nS(e,t,r,i){let n={},o={},s={};return t.forEach((e=>{e.forEach(((e,t)=>{n[e]=e,o[e]=e,s[e]=t}))})),t.forEach((e=>{let t=-1;e.forEach((e=>{let a=i(e);if(a.length){a=a.sort(((e,t)=>s[e]-s[t]));let i=(a.length-1)/2;for(let l=Math.floor(i),c=Math.ceil(i);l<=c;++l){let i=a[l];o[e]===e&&t<s[i]&&!iS(r,e,i)&&(o[i]=e,o[e]=n[e]=n[i],t=s[i])}}}))})),{root:n,align:o}}function oS(e,t,r,i,n){let o={},s=function(e,t,r,i){let n=new QC,o=e.graph(),s=function(e,t,r){return(i,n,o)=>{let s,a=i.node(n),l=i.node(o),c=0;if(c+=a.width/2,a.hasOwnProperty("labelpos"))switch(a.labelpos.toLowerCase()){case"l":s=-a.width/2;break;case"r":s=a.width/2}if(s&&(c+=r?s:-s),s=0,c+=(a.dummy?t:e)/2,c+=(l.dummy?t:e)/2,c+=l.width/2,l.hasOwnProperty("labelpos"))switch(l.labelpos.toLowerCase()){case"l":s=l.width/2;break;case"r":s=-l.width/2}return s&&(c+=r?s:-s),s=0,c}}(o.nodesep,o.edgesep,i);return t.forEach((t=>{let i;t.forEach((t=>{let o=r[t];if(n.setNode(o),i){var a=r[i],l=n.edge(a,o);n.setEdge(a,o,Math.max(s(e,t,i),l||0))}i=t}))})),n}(e,t,r,n),a=n?"borderLeft":"borderRight";function l(e,t){let r=s.nodes(),i=r.pop(),n={};for(;i;)n[i]?e(i):(n[i]=!0,r.push(i),r=r.concat(t(i))),i=r.pop()}return l((function(e){o[e]=s.inEdges(e).reduce(((e,t)=>Math.max(e,o[t.v]+s.edge(t))),0)}),s.predecessors.bind(s)),l((function(t){let r=s.outEdges(t).reduce(((e,t)=>Math.min(e,o[t.w]-s.edge(t))),Number.POSITIVE_INFINITY),i=e.node(t);r!==Number.POSITIVE_INFINITY&&i.borderType!==a&&(o[t]=Math.max(o[t],r))}),s.successors.bind(s)),Object.keys(i).forEach((e=>o[e]=o[r[e]])),o}function sS(e,t){return Object.values(t).reduce(((t,r)=>{let i=Number.NEGATIVE_INFINITY,n=Number.POSITIVE_INFINITY;Object.entries(r).forEach((([t,r])=>{let o=function(e,t){return e.node(t).width}(e,t)/2;i=Math.max(r+o,i),n=Math.min(r-o,n)}));const o=i-n;return o<t[0]&&(t=[o,r]),t}),[Number.POSITIVE_INFINITY,null])[1]}function aS(e,t){let r=Object.values(t),i=Math.min(...r),n=Math.max(...r);["u","d"].forEach((r=>{["l","r"].forEach((o=>{let s=r+o,a=e[s];if(a===t)return;let l=Object.values(a),c=i-Math.min(...l);"l"!==o&&(c=n-Math.max(...l)),c&&(e[s]=Vk.mapValues(a,(e=>e+c)))}))}))}function lS(e,t){return Vk.mapValues(e.ul,((r,i)=>{if(t)return e[t.toLowerCase()][i];{let t=Object.values(e).map((e=>e[i])).sort(((e,t)=>e-t));return(t[1]+t[2])/2}}))}let cS=KC;var dS=function(e){e=Vk.asNonCompoundGraph(e),function(e){let t=Vk.buildLayerMatrix(e),r=e.graph().ranksep,i=0;t.forEach((t=>{const n=t.reduce(((t,r)=>{const i=e.node(r).height;return t>i?t:i}),0);t.forEach((t=>e.node(t).y=i+n/2)),i+=n+r}))}(e),Object.entries(cS(e)).forEach((([t,r])=>e.node(t).x=r))};let hS=Vk.normalizeRanks,uS=Vk.removeEmptyRanks,pS=Vk,fS=Lk.Graph;var mS=function(e,t){let r=t&&t.debugTiming?pS.time:pS.notime;r("layout",(()=>{let t=r("  buildLayoutGraph",(()=>function(e){let t=new fS({multigraph:!0,compound:!0}),r=SS(e.graph());return t.setGraph(Object.assign({},vS,CS(r,gS),pS.pick(r,bS))),e.nodes().forEach((r=>{const i=CS(SS(e.node(r)),yS);Object.keys(xS).forEach((e=>{void 0===i[e]&&(i[e]=xS[e])})),t.setNode(r,i),t.setParent(r,e.parent(r))})),e.edges().forEach((r=>{let i=SS(e.edge(r));t.setEdge(r,Object.assign({},_S,CS(i,wS),pS.pick(i,kS)))})),t}(e)));r("  runLayout",(()=>function(e,t){t("    makeSpaceForEdgeLabels",(()=>function(e){let t=e.graph();t.ranksep/=2,e.edges().forEach((r=>{let i=e.edge(r);i.minlen*=2,"c"!==i.labelpos.toLowerCase()&&("TB"===t.rankdir||"BT"===t.rankdir?i.width+=i.labeloffset:i.height+=i.labeloffset)}))}(e))),t("    removeSelfEdges",(()=>function(e){e.edges().forEach((t=>{if(t.v===t.w){var r=e.node(t.v);r.selfEdges||(r.selfEdges=[]),r.selfEdges.push({e:t,label:e.edge(t)}),e.removeEdge(t)}}))}(e))),t("    acyclic",(()=>Xk.run(e))),t("    nestingGraph.run",(()=>AC.run(e))),t("    rank",(()=>_C(pS.asNonCompoundGraph(e)))),t("    injectEdgeLabelProxies",(()=>function(e){e.edges().forEach((t=>{let r=e.edge(t);if(r.width&&r.height){let r=e.node(t.v),i={rank:(e.node(t.w).rank-r.rank)/2+r.rank,e:t};pS.addDummyNode(e,"edge-proxy",i,"_ep")}}))}(e))),t("    removeEmptyRanks",(()=>uS(e))),t("    nestingGraph.cleanup",(()=>AC.cleanup(e))),t("    normalizeRanks",(()=>hS(e))),t("    assignRankMinMax",(()=>function(e){let t=0;e.nodes().forEach((r=>{let i=e.node(r);i.borderTop&&(i.minRank=e.node(i.borderTop).rank,i.maxRank=e.node(i.borderBottom).rank,t=Math.max(t,i.maxRank))})),e.graph().maxRank=t}(e))),t("    removeEdgeLabelProxies",(()=>function(e){e.nodes().forEach((t=>{let r=e.node(t);"edge-proxy"===r.dummy&&(e.edge(r.e).labelRank=r.rank,e.removeNode(t))}))}(e))),t("    normalize.run",(()=>Zk.run(e))),t("    parentDummyChains",(()=>SC(e))),t("    addBorderSegments",(()=>TC(e))),t("    order",(()=>YC(e))),t("    insertSelfEdges",(()=>function(e){var t=pS.buildLayerMatrix(e);t.forEach((t=>{var r=0;t.forEach(((t,i)=>{var n=e.node(t);n.order=i+r,(n.selfEdges||[]).forEach((t=>{pS.addDummyNode(e,"selfedge",{width:t.label.width,height:t.label.height,rank:n.rank,order:i+ ++r,e:t.e,label:t.label},"_se")})),delete n.selfEdges}))}))}(e))),t("    adjustCoordinateSystem",(()=>IC.adjust(e))),t("    position",(()=>dS(e))),t("    positionSelfEdges",(()=>function(e){e.nodes().forEach((t=>{var r=e.node(t);if("selfedge"===r.dummy){var i=e.node(r.e.v),n=i.x+i.width/2,o=i.y,s=r.x-n,a=i.height/2;e.setEdge(r.e,r.label),e.removeNode(t),r.label.points=[{x:n+2*s/3,y:o-a},{x:n+5*s/6,y:o-a},{x:n+s,y:o},{x:n+5*s/6,y:o+a},{x:n+2*s/3,y:o+a}],r.label.x=r.x,r.label.y=r.y}}))}(e))),t("    removeBorderNodes",(()=>function(e){e.nodes().forEach((t=>{if(e.children(t).length){let r=e.node(t),i=e.node(r.borderTop),n=e.node(r.borderBottom),o=e.node(r.borderLeft[r.borderLeft.length-1]),s=e.node(r.borderRight[r.borderRight.length-1]);r.width=Math.abs(s.x-o.x),r.height=Math.abs(n.y-i.y),r.x=o.x+r.width/2,r.y=i.y+r.height/2}})),e.nodes().forEach((t=>{"border"===e.node(t).dummy&&e.removeNode(t)}))}(e))),t("    normalize.undo",(()=>Zk.undo(e))),t("    fixupEdgeLabelCoords",(()=>function(e){e.edges().forEach((t=>{let r=e.edge(t);if(r.hasOwnProperty("x"))switch("l"!==r.labelpos&&"r"!==r.labelpos||(r.width-=r.labeloffset),r.labelpos){case"l":r.x-=r.width/2+r.labeloffset;break;case"r":r.x+=r.width/2+r.labeloffset}}))}(e))),t("    undoCoordinateSystem",(()=>IC.undo(e))),t("    translateGraph",(()=>function(e){let t=Number.POSITIVE_INFINITY,r=0,i=Number.POSITIVE_INFINITY,n=0,o=e.graph(),s=o.marginx||0,a=o.marginy||0;function l(e){let o=e.x,s=e.y,a=e.width,l=e.height;t=Math.min(t,o-a/2),r=Math.max(r,o+a/2),i=Math.min(i,s-l/2),n=Math.max(n,s+l/2)}e.nodes().forEach((t=>l(e.node(t)))),e.edges().forEach((t=>{let r=e.edge(t);r.hasOwnProperty("x")&&l(r)})),t-=s,i-=a,e.nodes().forEach((r=>{let n=e.node(r);n.x-=t,n.y-=i})),e.edges().forEach((r=>{let n=e.edge(r);n.points.forEach((e=>{e.x-=t,e.y-=i})),n.hasOwnProperty("x")&&(n.x-=t),n.hasOwnProperty("y")&&(n.y-=i)})),o.width=r-t+s,o.height=n-i+a}(e))),t("    assignNodeIntersects",(()=>function(e){e.edges().forEach((t=>{let r,i,n=e.edge(t),o=e.node(t.v),s=e.node(t.w);n.points?(r=n.points[0],i=n.points[n.points.length-1]):(n.points=[],r=s,i=o),n.points.unshift(pS.intersectRect(o,r)),n.points.push(pS.intersectRect(s,i))}))}(e))),t("    reversePoints",(()=>function(e){e.edges().forEach((t=>{let r=e.edge(t);r.reversed&&r.points.reverse()}))}(e))),t("    acyclic.undo",(()=>Xk.undo(e)))}(t,r))),r("  updateInputGraph",(()=>function(e,t){e.nodes().forEach((r=>{let i=e.node(r),n=t.node(r);i&&(i.x=n.x,i.y=n.y,i.rank=n.rank,t.children(r).length&&(i.width=n.width,i.height=n.height))})),e.edges().forEach((r=>{let i=e.edge(r),n=t.edge(r);i.points=n.points,n.hasOwnProperty("x")&&(i.x=n.x,i.y=n.y)})),e.graph().width=t.graph().width,e.graph().height=t.graph().height}(e,t)))}))};let gS=["nodesep","edgesep","ranksep","marginx","marginy"],vS={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},bS=["acyclicer","ranker","rankdir","align"],yS=["width","height"],xS={width:0,height:0},wS=["minlen","weight","width","height","labeloffset"],_S={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},kS=["labelpos"];function CS(e,t){return pS.mapValues(pS.pick(e,t),Number)}function SS(e){var t={};return e&&Object.entries(e).forEach((([e,r])=>{"string"==typeof e&&(e=e.toLowerCase()),t[e]=r})),t}let AS=Lk.Graph;var PS={debugOrdering:function(e){let t=Vk.buildLayerMatrix(e),r=new AS({compound:!0,multigraph:!0}).setGraph({});return e.nodes().forEach((t=>{r.setNode(t,{label:t}),r.setParent(t,"layer"+e.node(t).rank)})),e.edges().forEach((e=>r.setEdge(e.v,e.w,{},e.name))),t.forEach(((e,t)=>{let i="layer"+t;r.setNode(i,{rank:"same"}),e.reduce(((e,t)=>(r.setEdge(e,t,{style:"invis"}),t)))})),r}};var TS={graphlib:Lk,layout:mS,debug:PS,util:{time:Vk.time,notime:Vk.notime},version:"1.0.4"}.layout;const ES={exportElement:function(e){return e.size()},exportLink:function(e){var t=e.get("labelSize")||{};return{minLen:e.get("minLen")||1,weight:e.get("weight")||1,labelpos:e.get("labelPosition")||"c",labeloffset:e.get("labelOffset")||0,width:t.width||0,height:t.height||0}},importElement:function(e,t,r){var i=this.getCell(t),n=r.node(t);e.setPosition?e.setPosition(i,n):i.set("position",{x:n.x-n.width/2,y:n.y-n.height/2})},importLink:function(e,t,r){const i=this.getCell(t.name),n=r.edge(t),o=n.points||[],s=new Ku(o);if(e.setVertices||e.setLinkVertices)if(ev(e.setVertices))e.setVertices(i,o);else{s.simplify({threshold:.001});const e=s.points.map((e=>e.toJSON())),t=e.length;i.set("vertices",e.slice(1,t-1))}if(e.setLabels&&"x"in n&&"y"in n){const t={x:n.x,y:n.y};if(ev(e.setLabels))e.setLabels(i,t,o);else{const e=s.closestPointLength(t),r=s.pointAtLength(e),n=e/s.length(),o=new Iu(t).difference(r).toJSON();i.label(0,{position:{distance:n,offset:o}})}}},layout:function(e,t){var r;r=e instanceof E_?e:(new E_).resetCells(e,{dry:!0,sort:!1}),e=null,t=jg(t||{},{resizeClusters:!0,clusterPadding:10,exportElement:this.exportElement,exportLink:this.exportLink});var i=ES.toGraphLib(r,{directed:!0,multigraph:!0,compound:!0,setNodeLabel:t.exportElement,setEdgeLabel:t.exportLink,setEdgeName:function(e){return e.id}}),n={},o=t.marginX||0,s=t.marginY||0;if(t.rankDir&&(n.rankdir=t.rankDir),t.align&&(n.align=t.align),t.nodeSep&&(n.nodesep=t.nodeSep),t.edgeSep&&(n.edgesep=t.edgeSep),t.rankSep&&(n.ranksep=t.rankSep),t.ranker&&(n.ranker=t.ranker),o&&(n.marginx=o),s&&(n.marginy=s),i.setGraph(n),TS(i,{debugTiming:!!t.debugTiming}),r.startBatch("layout"),ES.fromGraphLib(i,{importNode:this.importElement.bind(r,t),importEdge:this.importLink.bind(r,t)}),t.resizeClusters){var a=i.nodes().filter((function(e){return i.children(e).length>0})).map(r.getCell.bind(r)).sort((function(e,t){return t.getAncestors().length-e.getAncestors().length}));Wg(a,"fitToChildren",{padding:t.clusterPadding})}r.stopBatch("layout");var l=i.graph();return new Yu(o,s,Math.abs(l.width-2*o),Math.abs(l.height-2*s))},fromGraphLib:function(e,t){var r=(t=t||{}).importNode||Cb,i=t.importEdge||Cb,n=this instanceof E_?this:new E_;return e.nodes().forEach((function(i){r.call(n,i,e,n,t)})),e.edges().forEach((function(r){i.call(n,r,e,n,t)})),n},toGraphLib:function(e,t){for(var r=uv(t=t||{},"directed","compound","multigraph"),i=new Ok(r),n=t.setNodeLabel||Cb,o=t.setEdgeLabel||Cb,s=t.setEdgeName||Cb,a=e.get("cells"),l=0,c=a.length;l<c;l++){var d=a.at(l);if(d.isLink()){var h=d.get("source"),u=d.get("target");if(!h.id||!u.id)break;i.setEdge(h.id,u.id,o(d),s(d))}else if(i.setNode(d.id,n(d)),i.isCompound()&&d.has("parent")){var p=d.get("parent");a.has(p)&&i.setParent(d.id,p)}}return i}},IS=o`:host{--_container-color:var(--md-filled-icon-button-container-color, var(--md-sys-color-primary, #6750a4));--_container-height:var(--md-filled-icon-button-container-height, 40px);--_container-width:var(--md-filled-icon-button-container-width, 40px);--_disabled-container-color:var(--md-filled-icon-button-disabled-container-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-container-opacity:var(--md-filled-icon-button-disabled-container-opacity, 0.12);--_disabled-icon-color:var(--md-filled-icon-button-disabled-icon-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-icon-opacity:var(--md-filled-icon-button-disabled-icon-opacity, 0.38);--_focus-icon-color:var(--md-filled-icon-button-focus-icon-color, var(--md-sys-color-on-primary, #fff));--_hover-icon-color:var(--md-filled-icon-button-hover-icon-color, var(--md-sys-color-on-primary, #fff));--_hover-state-layer-color:var(--md-filled-icon-button-hover-state-layer-color, var(--md-sys-color-on-primary, #fff));--_hover-state-layer-opacity:var(--md-filled-icon-button-hover-state-layer-opacity, 0.08);--_icon-color:var(--md-filled-icon-button-icon-color, var(--md-sys-color-on-primary, #fff));--_icon-size:var(--md-filled-icon-button-icon-size, 24px);--_pressed-icon-color:var(--md-filled-icon-button-pressed-icon-color, var(--md-sys-color-on-primary, #fff));--_pressed-state-layer-color:var(--md-filled-icon-button-pressed-state-layer-color, var(--md-sys-color-on-primary, #fff));--_pressed-state-layer-opacity:var(--md-filled-icon-button-pressed-state-layer-opacity, 0.12);--_selected-container-color:var(--md-filled-icon-button-selected-container-color, var(--md-sys-color-primary, #6750a4));--_toggle-selected-focus-icon-color:var(--md-filled-icon-button-toggle-selected-focus-icon-color, var(--md-sys-color-on-primary, #fff));--_toggle-selected-hover-icon-color:var(--md-filled-icon-button-toggle-selected-hover-icon-color, var(--md-sys-color-on-primary, #fff));--_toggle-selected-hover-state-layer-color:var(--md-filled-icon-button-toggle-selected-hover-state-layer-color, var(--md-sys-color-on-primary, #fff));--_toggle-selected-icon-color:var(--md-filled-icon-button-toggle-selected-icon-color, var(--md-sys-color-on-primary, #fff));--_toggle-selected-pressed-icon-color:var(--md-filled-icon-button-toggle-selected-pressed-icon-color, var(--md-sys-color-on-primary, #fff));--_toggle-selected-pressed-state-layer-color:var(--md-filled-icon-button-toggle-selected-pressed-state-layer-color, var(--md-sys-color-on-primary, #fff));--_unselected-container-color:var(--md-filled-icon-button-unselected-container-color, var(--md-sys-color-surface-container-highest, #e6e0e9));--_toggle-focus-icon-color:var(--md-filled-icon-button-toggle-focus-icon-color, var(--md-sys-color-primary, #6750a4));--_toggle-hover-icon-color:var(--md-filled-icon-button-toggle-hover-icon-color, var(--md-sys-color-primary, #6750a4));--_toggle-hover-state-layer-color:var(--md-filled-icon-button-toggle-hover-state-layer-color, var(--md-sys-color-primary, #6750a4));--_toggle-icon-color:var(--md-filled-icon-button-toggle-icon-color, var(--md-sys-color-primary, #6750a4));--_toggle-pressed-icon-color:var(--md-filled-icon-button-toggle-pressed-icon-color, var(--md-sys-color-primary, #6750a4));--_toggle-pressed-state-layer-color:var(--md-filled-icon-button-toggle-pressed-state-layer-color, var(--md-sys-color-primary, #6750a4));--_container-shape-start-start:var(--md-filled-icon-button-container-shape-start-start, var(--md-filled-icon-button-container-shape, var(--md-sys-shape-corner-full, 9999px)));--_container-shape-start-end:var(--md-filled-icon-button-container-shape-start-end, var(--md-filled-icon-button-container-shape, var(--md-sys-shape-corner-full, 9999px)));--_container-shape-end-end:var(--md-filled-icon-button-container-shape-end-end, var(--md-filled-icon-button-container-shape, var(--md-sys-shape-corner-full, 9999px)));--_container-shape-end-start:var(--md-filled-icon-button-container-shape-end-start, var(--md-filled-icon-button-container-shape, var(--md-sys-shape-corner-full, 9999px)))}.icon-button{color:var(--_icon-color);--md-ripple-hover-color:var(--_hover-state-layer-color);--md-ripple-hover-opacity:var(--_hover-state-layer-opacity);--md-ripple-pressed-color:var(--_pressed-state-layer-color);--md-ripple-pressed-opacity:var(--_pressed-state-layer-opacity)}.icon-button:hover{color:var(--_hover-icon-color)}.icon-button:focus{color:var(--_focus-icon-color)}.icon-button:active{color:var(--_pressed-icon-color)}.icon-button:disabled{color:var(--_disabled-icon-color)}.icon-button::before{background-color:var(--_container-color);border-radius:inherit;content:"";inset:0;position:absolute;z-index:-1}.icon-button:disabled::before{background-color:var(--_disabled-container-color);opacity:var(--_disabled-container-opacity)}.icon-button:disabled .icon{opacity:var(--_disabled-icon-opacity)}.toggle-filled{--md-ripple-hover-color:var(--_toggle-hover-state-layer-color);--md-ripple-pressed-color:var(--_toggle-pressed-state-layer-color)}.toggle-filled:not(:disabled){color:var(--_toggle-icon-color)}.toggle-filled:not(:disabled):hover{color:var(--_toggle-hover-icon-color)}.toggle-filled:not(:disabled):focus{color:var(--_toggle-focus-icon-color)}.toggle-filled:not(:disabled):active{color:var(--_toggle-pressed-icon-color)}.toggle-filled:not(:disabled)::before{background-color:var(--_unselected-container-color)}.selected{--md-ripple-hover-color:var(--_toggle-selected-hover-state-layer-color);--md-ripple-pressed-color:var(--_toggle-selected-pressed-state-layer-color)}.selected:not(:disabled){color:var(--_toggle-selected-icon-color)}.selected:not(:disabled):hover{color:var(--_toggle-selected-hover-icon-color)}.selected:not(:disabled):focus{color:var(--_toggle-selected-focus-icon-color)}.selected:not(:disabled):active{color:var(--_toggle-selected-pressed-icon-color)}.selected:not(:disabled)::before{background-color:var(--_selected-container-color)}`
/**
 * @license
 * Copyright 2022 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */;
/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let LS=class extends Jt{getRenderClasses(){return{...super.getRenderClasses(),filled:!0,"toggle-filled":this.toggle}}};LS.styles=[Xt,IS],LS=we([ce("md-filled-icon-button")],LS);
/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
const OS=o`:host{--_container-color:var(--md-filled-tonal-icon-button-container-color, var(--md-sys-color-secondary-container, #e8def8));--_container-height:var(--md-filled-tonal-icon-button-container-height, 40px);--_container-width:var(--md-filled-tonal-icon-button-container-width, 40px);--_disabled-container-color:var(--md-filled-tonal-icon-button-disabled-container-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-container-opacity:var(--md-filled-tonal-icon-button-disabled-container-opacity, 0.12);--_disabled-icon-color:var(--md-filled-tonal-icon-button-disabled-icon-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-icon-opacity:var(--md-filled-tonal-icon-button-disabled-icon-opacity, 0.38);--_focus-icon-color:var(--md-filled-tonal-icon-button-focus-icon-color, var(--md-sys-color-on-secondary-container, #1d192b));--_hover-icon-color:var(--md-filled-tonal-icon-button-hover-icon-color, var(--md-sys-color-on-secondary-container, #1d192b));--_hover-state-layer-color:var(--md-filled-tonal-icon-button-hover-state-layer-color, var(--md-sys-color-on-secondary-container, #1d192b));--_hover-state-layer-opacity:var(--md-filled-tonal-icon-button-hover-state-layer-opacity, 0.08);--_icon-color:var(--md-filled-tonal-icon-button-icon-color, var(--md-sys-color-on-secondary-container, #1d192b));--_icon-size:var(--md-filled-tonal-icon-button-icon-size, 24px);--_pressed-icon-color:var(--md-filled-tonal-icon-button-pressed-icon-color, var(--md-sys-color-on-secondary-container, #1d192b));--_pressed-state-layer-color:var(--md-filled-tonal-icon-button-pressed-state-layer-color, var(--md-sys-color-on-secondary-container, #1d192b));--_pressed-state-layer-opacity:var(--md-filled-tonal-icon-button-pressed-state-layer-opacity, 0.12);--_selected-container-color:var(--md-filled-tonal-icon-button-selected-container-color, var(--md-sys-color-secondary-container, #e8def8));--_toggle-selected-focus-icon-color:var(--md-filled-tonal-icon-button-toggle-selected-focus-icon-color, var(--md-sys-color-on-secondary-container, #1d192b));--_toggle-selected-hover-icon-color:var(--md-filled-tonal-icon-button-toggle-selected-hover-icon-color, var(--md-sys-color-on-secondary-container, #1d192b));--_toggle-selected-hover-state-layer-color:var(--md-filled-tonal-icon-button-toggle-selected-hover-state-layer-color, var(--md-sys-color-on-secondary-container, #1d192b));--_toggle-selected-icon-color:var(--md-filled-tonal-icon-button-toggle-selected-icon-color, var(--md-sys-color-on-secondary-container, #1d192b));--_toggle-selected-pressed-icon-color:var(--md-filled-tonal-icon-button-toggle-selected-pressed-icon-color, var(--md-sys-color-on-secondary-container, #1d192b));--_toggle-selected-pressed-state-layer-color:var(--md-filled-tonal-icon-button-toggle-selected-pressed-state-layer-color, var(--md-sys-color-on-secondary-container, #1d192b));--_unselected-container-color:var(--md-filled-tonal-icon-button-unselected-container-color, var(--md-sys-color-surface-container-highest, #e6e0e9));--_toggle-focus-icon-color:var(--md-filled-tonal-icon-button-toggle-focus-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_toggle-hover-icon-color:var(--md-filled-tonal-icon-button-toggle-hover-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_toggle-hover-state-layer-color:var(--md-filled-tonal-icon-button-toggle-hover-state-layer-color, var(--md-sys-color-on-surface-variant, #49454f));--_toggle-icon-color:var(--md-filled-tonal-icon-button-toggle-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_toggle-pressed-icon-color:var(--md-filled-tonal-icon-button-toggle-pressed-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_toggle-pressed-state-layer-color:var(--md-filled-tonal-icon-button-toggle-pressed-state-layer-color, var(--md-sys-color-on-surface-variant, #49454f));--_container-shape-start-start:var(--md-filled-tonal-icon-button-container-shape-start-start, var(--md-filled-tonal-icon-button-container-shape, var(--md-sys-shape-corner-full, 9999px)));--_container-shape-start-end:var(--md-filled-tonal-icon-button-container-shape-start-end, var(--md-filled-tonal-icon-button-container-shape, var(--md-sys-shape-corner-full, 9999px)));--_container-shape-end-end:var(--md-filled-tonal-icon-button-container-shape-end-end, var(--md-filled-tonal-icon-button-container-shape, var(--md-sys-shape-corner-full, 9999px)));--_container-shape-end-start:var(--md-filled-tonal-icon-button-container-shape-end-start, var(--md-filled-tonal-icon-button-container-shape, var(--md-sys-shape-corner-full, 9999px)))}.icon-button{color:var(--_icon-color);--md-ripple-hover-color:var(--_hover-state-layer-color);--md-ripple-hover-opacity:var(--_hover-state-layer-opacity);--md-ripple-pressed-color:var(--_pressed-state-layer-color);--md-ripple-pressed-opacity:var(--_pressed-state-layer-opacity)}.icon-button:hover{color:var(--_hover-icon-color)}.icon-button:focus{color:var(--_focus-icon-color)}.icon-button:active{color:var(--_pressed-icon-color)}.icon-button:disabled{color:var(--_disabled-icon-color)}.icon-button::before{background-color:var(--_container-color);border-radius:inherit;content:"";inset:0;position:absolute;z-index:-1}.icon-button:disabled::before{background-color:var(--_disabled-container-color);opacity:var(--_disabled-container-opacity)}.icon-button:disabled .icon{opacity:var(--_disabled-icon-opacity)}.toggle-filled-tonal{--md-ripple-hover-color:var(--_toggle-hover-state-layer-color);--md-ripple-pressed-color:var(--_toggle-pressed-state-layer-color)}.toggle-filled-tonal:not(:disabled){color:var(--_toggle-icon-color)}.toggle-filled-tonal:not(:disabled):hover{color:var(--_toggle-hover-icon-color)}.toggle-filled-tonal:not(:disabled):focus{color:var(--_toggle-focus-icon-color)}.toggle-filled-tonal:not(:disabled):active{color:var(--_toggle-pressed-icon-color)}.toggle-filled-tonal:not(:disabled)::before{background-color:var(--_unselected-container-color)}.selected{--md-ripple-hover-color:var(--_toggle-selected-hover-state-layer-color);--md-ripple-pressed-color:var(--_toggle-selected-pressed-state-layer-color)}.selected:not(:disabled){color:var(--_toggle-selected-icon-color)}.selected:not(:disabled):hover{color:var(--_toggle-selected-hover-icon-color)}.selected:not(:disabled):focus{color:var(--_toggle-selected-focus-icon-color)}.selected:not(:disabled):active{color:var(--_toggle-selected-pressed-icon-color)}.selected:not(:disabled)::before{background-color:var(--_selected-container-color)}`
/**
 * @license
 * Copyright 2022 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */;let MS=class extends Jt{getRenderClasses(){return{...super.getRenderClasses(),"filled-tonal":!0,"toggle-filled-tonal":this.toggle}}};MS.styles=[Xt,OS],MS=we([ce("md-filled-tonal-icon-button")],MS);class RS extends Bs{constructor(e="/api"){super(),this.baseLtpPath="/crt/",this.baseUrlPath=e}async getCrt(e){return await this.fetchWrapper(this.baseUrlPath+`${this.baseLtpPath}${e}`,{},!1)}createTree(e){return this.fetchWrapper(this.baseUrlPath+"/crt",{method:"POST",body:JSON.stringify(e)},!1)}updateNodeChildren(e,t,r){return this.fetchWrapper(this.baseUrlPath+`${this.baseLtpPath}${e}/updateChildren`,{method:"PUT",body:JSON.stringify({nodeId:t,childrenIds:r})},!1)}reviewConfiguration(e,t){return this.fetchWrapper(this.baseUrlPath+`${this.baseLtpPath}/reviewConfiguration`,{method:"PUT",body:JSON.stringify({context:t.context,undesirableEffects:t.undesirableEffects,wsClientId:e})},!1,void 0)}createDirectCauses(e,t){return this.fetchWrapper(this.baseUrlPath+`${this.baseLtpPath}${e}/createDirectCauses`,{method:"POST",body:JSON.stringify({parentNodeId:t})},!1)}addDirectCauses(e,t,r,i){return this.fetchWrapper(this.baseUrlPath+`${this.baseLtpPath}${e}/addDirectCauses`,{method:"POST",body:JSON.stringify({parentNodeId:t,causes:r,type:i})},!1)}sendGetRefinedCauseQuery(e,t,r,i,n,o,s){const a=(r=r.filter((e=>"thinking"!=e.type&&"noStreaming"!=e.type))).map((e=>({sender:"bot"==e.sender?"assistant":"user",message:e.rawMessage?e.rawMessage:e.message})));return this.fetchWrapper(this.baseUrlPath+`${this.baseLtpPath}${e}/getRefinedCauses`,{method:"POST",body:JSON.stringify({wsClientId:i,crtNodeId:t,chatLog:a,effect:n,causes:o,validationErrors:s})},!1)}runValidationChain(e,t,r,i,n,o){const s=(r=r.filter((e=>"thinking"!=e.type&&"noStreaming"!=e.type))).map((e=>({sender:"bot"==e.sender?"assistant":"user",message:e.rawMessage?e.rawMessage:e.message})));return this.fetchWrapper(this.baseUrlPath+`${this.baseLtpPath}${e}/runValidationChain`,{method:"POST",body:JSON.stringify({wsClientId:i,crtNodeId:t,chatLog:s,effect:n,causes:o})},!1)}updateNode(e,t){return this.fetchWrapper(this.baseUrlPath+`${this.baseLtpPath}${e}`,{method:"PUT",body:JSON.stringify(t)},!1)}deleteNode(e,t){return this.fetchWrapper(this.baseUrlPath+`${this.baseLtpPath}${e}`,{method:"DELETE",body:JSON.stringify({nodeId:t})},!1)}}var $S=function(e,t,r,i){var n,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,r,s):n(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s};let NS=class extends As{constructor(){super(),this.api=new RS}static get styles(){return[super.styles,o`.causeText{font-size:14px;padding:8px;height:100%;width:100%;max-height:70px;overflow-y:auto}.causeText[is-ude]{max-height:75px}.causeTextContainer{height:100%}.createOptionsButtons{display:flex;justify-content:center;position:absolute;bottom:0;left:0;right:0;padding-left:8px;padding-right:8px}.editButton{position:absolute;bottom:0;right:0;z-index:1500}.typeIconCore{position:absolute;bottom:8px;left:8px}.typeIcon{color:var(--md-sys-color-primary)}.typeIconUde{color:var(--md-sys-color-tertiary)}.typeIconRoot{color:var(--md-sys-color-on-primary)}md-icon-button[root-cause]{--md-icon-button-icon-color:var(--md-sys-color-on-primary)}md-circular-progress{--md-circular-progress-size:28px;margin-bottom:6px}md-menu{--md-menu-z-index:1000;z-index:1000}[hidden]{display:none!important}`]}editNode(){this.fire("edit-node",{nodeId:this.nodeId,element:this})}toggleMenu(){const e=this.shadowRoot?.getElementById("menu");e.open=!e.open}};$S([ue({type:String})],NS.prototype,"nodeId",void 0),$S([ue({type:Number})],NS.prototype,"posX",void 0),$S([ue({type:Number})],NS.prototype,"posY",void 0),NS=$S([ce("ps-operations-base-node")],NS);var DS=function(e,t,r,i){var n,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,r,s):n(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s};let zS=class extends NS{constructor(){super(),this.isWorking=!1,this.api=new RS}static get styles(){return[super.styles,o`.causeText{font-size:14px;padding:8px;height:100%;width:100%;max-height:70px;overflow-y:auto}.causeText[is-ude]{max-height:75px}.causeTextContainer{height:100%}.createOptionsButtons{display:flex;justify-content:center;position:absolute;bottom:0;left:0;right:0;padding-left:8px;padding-right:8px}.editButton{position:absolute;bottom:0;right:0;z-index:1500}.typeIconCore{position:absolute;bottom:8px;left:8px}.typeIcon{color:var(--md-sys-color-primary)}.typeIconUde{color:var(--md-sys-color-tertiary)}.typeIconRoot{color:var(--md-sys-color-on-primary)}md-icon-button[root-cause]{--md-icon-button-icon-color:var(--md-sys-color-on-primary)}md-circular-progress{--md-circular-progress-size:28px;margin-bottom:6px}md-menu{--md-menu-z-index:1000;z-index:1000}[hidden]{display:none!important}`]}async createDirectCauses(){const e=await this.api.createDirectCauses(this.agent.id,this.nodeId);this.fireGlobal("add-nodes",{parentNodeId:this.nodeId,nodes:e})}editNode(){this.fire("edit-node",{nodeId:this.nodeId,element:this})}toggleMenu(){const e=this.shadowRoot?.getElementById("menu");e.open=!e.open}render(){return V` <div class="layout vertical mainContainer"> <div class="layout horizontal causeTextContainer"> <div class="causeText"> ${this.agent.class.description} </div> </div> <md-icon class="typeIconCore ${this.agent.class.iconName}">${this.agent.class.iconName}</md-icon> <md-icon-button class="editButton" @click="${this.editNode}"><md-icon>edit</md-icon></md-icon-button> <div class="layout horizontal center-justify createOptionsButtons"> ${this.isWorking?V` <md-circular-progress indeterminate></md-circular-progress> `:V` <md-icon-button class="createOptionsButton" @click="${()=>this.fire("open-add-cause-dialog",{parentNodeId:this.nodeId})}"><md-icon>add</md-icon></md-icon-button> `} </div> </div> `}};DS([ue({type:Object})],zS.prototype,"agent",void 0),DS([ue({type:Boolean})],zS.prototype,"isWorking",void 0),zS=DS([ce("ps-agent-node")],zS);var BS=function(e,t,r,i){var n,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,r,s):n(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s};let FS=class extends NS{static get styles(){return[super.styles,o`.connectorType{font-size:15px;text-transform:uppercase;padding:8px;padding-top:8px;margin-left:10px}md-icon-button[root-cause]{--md-icon-button-icon-color:var(--md-sys-color-on-primary)}md-circular-progress{--md-circular-progress-size:28px;margin-bottom:6px}md-menu{--md-menu-z-index:1000;z-index:1000}`]}editNode(){this.fire("edit-node",{nodeId:this.nodeId,element:this})}toggleMenu(){const e=this.shadowRoot?.getElementById("menu");e.open=!e.open}render(){return V` <div class="layout horizontal mainContainer"> <div class="layout horizontal center-center"> <div class="causeType">${this.connector.class.name}</div> </div> <md-icon-button class="editButton" @click="${this.editNode}"><md-icon>edit</md-icon></md-icon-button> </div> `}};BS([ue({type:Object})],FS.prototype,"connector",void 0),FS=BS([ce("ps-connector-node")],FS);class US extends V_{render(){let e,t;super.render(),this.model.get("markup"),this.model.attributes.nodeType,e=90,t=40;const r=ef("foreignObject",{width:90,height:40,style:"overflow: visible; display: block;"}).node;return ef(this.el).append(r),setTimeout((()=>{const e=document.createElement("div");e.setAttribute("class","html-element"),e.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),e.innerHTML=`<ps-agent-node\n        agentId="${this.model.attributes.agentId}"\n      >\n     </ps-agent-node>`,r.appendChild(e),r.getBoundingClientRect()}),0),this.update(),this}}class VS extends(void 0){constructor(){super(...arguments),this.view=US}defaults(){return Gg({type:"html.AgentShape",attrs:{},markup:"<div></div>"},void 0)}}class jS extends V_{render(){let e,t;super.render(),this.model.get("markup"),e=90,t=40;const r=ef("foreignObject",{width:90,height:40,style:"overflow: visible; display: block;"}).node;return ef(this.el).append(r),setTimeout((()=>{const e=document.createElement("div");e.setAttribute("class","html-element"),e.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),e.innerHTML=`<ps-connector-node\n        agentId="${this.model.attributes.agentId}"\n        >\n      </ps-connectors-node>`,r.appendChild(e),r.getBoundingClientRect()}),0),this.update(),this}}class GS extends(void 0){constructor(){super(...arguments),this.view=jS}defaults(){return Gg({type:"html.ConnectorShape",attrs:{},markup:"<div></div>"},void 0)}}var HS=function(e,t,r,i){var n,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,r,s):n(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s};let WS=class extends As{constructor(){super(),this.elements={},this.selection=null,this.panning=!1,this.lastClientX=0,this.lastClientY=0,this.jointNamespace={},this.api=new RS}async connectedCallback(){super.connectedCallback(),window.psAppGlobals.activity("Agent Ops - open"),this.addEventListener("add-nodes",this.addNodesEvent),this.addGlobalListener("add-nodes",this.addNodesEvent.bind(this)),window.addEventListener("resize",(()=>{this.updatePaperSize()}))}zoom(e,t,r){const i=this.paper.scale().sx*e,n=this.paper.getComputedSize(),o=e-1,s=(t-n.width/2)*o/e,a=(r-n.height/2)*o/e;this.paper.translate(this.paper.translate().tx-s,this.paper.translate().ty-a),this.paper.scale(i,i)}zoomIn(){const e=this.paper.getComputedSize();this.zoom(1.1,e.width/2,e.height/2)}zoomOut(){const e=this.paper.getComputedSize();this.zoom(.9,e.width/2,e.height/2)}resetZoom(){this.paper.scale(1,1)}firstUpdated(e){this.initializeJointJS(),this.paper.el.addEventListener("wheel",(e=>{e.shiftKey&&(e.preventDefault(),this.debounce&&clearTimeout(this.debounce),this.debounce=window.setTimeout((()=>{const t=this.paper.clientToLocalPoint({x:e.offsetX,y:e.offsetY}),r=e.deltaY<0?1.05:.95;this.zoom(r,t.x,t.y)}),5))}))}addNodesEvent(e){this.addNodes(e.detail.parentNodeId,e.detail.nodes)}updated(e){super.updated(e),e.has("currentAgent")&&this.currentAgent&&(this.paper.freeze(),this.updateGraphWithAgentData(),this.paper.unfreeze())}disconnectedCallback(){super.disconnectedCallback(),window.psAppGlobals.activity("Agent Ops - close")}handleNodeDoubleClick(e,t=!1){const r=e.getBBox();if(t){const e=(r.x+r.width/2)*this.paper.scale().sx,t=(r.y+r.height/2)*this.paper.scale().sy,i=this.paper.scale().sx,n=1/4,o=Math.max(this.paper.options.zoom.min,i*n);this.zoom(o,e,t)}else{const e=r.x+r.width/2,t=r.y+r.height/2;this.zoom(2,e,t)}}async initializeJointJS(){const e=this.shadowRoot?.getElementById("paper-container");if(!e)return void console.error("Paper container not found");this.graph=new E_({},{cellNamespace:this.jointNamespace}),this.paper=new Q_({elementView:()=>MyShapeView,el:e,model:this.graph,cellViewNamespace:this.jointNamespace,width:"100%",height:"100%",gridSize:20,panning:{enabled:!1,modifiers:"mouseMiddle"},zoom:{enabled:!0,mousewheel:!1,wheelEnabled:!0,max:2,min:.2,step:.2},async:!0,frozen:!0,sorting:Q_.sorting.APPROX,background:{color:"var(--md-sys-color-surface)"},clickThreshold:10,defaultConnector:{name:"normal"},defaultRouter:{name:"orthogonal",args:{startDirections:["bottom"],endDirections:["top"]}}}),this.paper.on("element:pointerclick",(e=>{})),this.paper.on("element:pointerdblclick",((e,t)=>{const r=e.model;t.shiftKey&&this.handleNodeDoubleClick(r,!0),t.shiftKey&&t.ctrlKey&&this.handleNodeDoubleClick(r)})),this.paper.on("blank:pointerclick",((e,t)=>{})),ef(e).prepend(ef("style",{type:"text/css"}).text("\n        .joint-element .selection {\n            stroke: var(--md-sys-color-surface);\n        }\n        .joint-link .selection {\n            stroke: var(--md-sys-color-surface);\n            stroke-dasharray: 5;\n            stroke-dashoffset: 10;\n            animation: dash 0.5s infinite linear;\n        }\n        @keyframes dash {\n            to {\n                stroke-dashoffset: 0;\n            }\n        }\n      ")),Object.assign(this.jointNamespace,{myShapeGroup:{AgentShape:VS,AgentShapeView:US,ConnectorShape:GS,ConnectorShapeView:jS},standard:{Rectangle:Ky}}),this.paper.unfreeze(),this.updatePaperSize(),await this.updateComplete;const t=this.paper.el;t.addEventListener("mousedown",(e=>{1===e.button&&(this.panning=!0,this.lastClientX=e.clientX,this.lastClientY=e.clientY,t.style.cursor="move",e.preventDefault())})),t.addEventListener("mousemove",(e=>{if(this.panning){const t=e.clientX-this.lastClientX,r=e.clientY-this.lastClientY;this.lastClientX=e.clientX,this.lastClientY=e.clientY;const i=this.paper.translate();this.paper.translate(i.tx+t,i.ty+r)}})),t.addEventListener("mouseup",(e=>{this.panning&&1===e.button&&(this.panning=!1,t.style.cursor="default")})),t.addEventListener("mouseleave",(e=>{this.panning&&(this.panning=!1,t.style.cursor="default")}))}applyDirectedGraphLayout(){ES.layout(this.graph,{setLinkVertices:!0,align:"UR",ranker:"longest-path",rankDir:"BT",marginX:20,marginY:40,nodeSep:120,edgeSep:120,rankSep:80}),this.graph.getElements().forEach((e=>{}));const e=this.graph.getBBox(),t=100-e.x-e.width/2,r=100-e.y-e.height/2;this.graph.translate(t,r)}centerParentNodeOnScreen(e){const t=this.elements[e];if(!t)return void console.error(`Parent node with ID ${e} not found.`);const r=this.paper.scale().sx,i=t.getBBox(),n=this.paper.getComputedSize(),o=i.x+i.width/2,s=i.y+i.height/2,a=n.width/2-o*r,l=n.height/2-s*r;this.paper.translate(a-53.5,l-92.5)}updatePaperSize(){this.paper?this.paper.transformToFitContent({padding:78,minScaleX:.2,minScaleY:.2,maxScaleX:1.1,maxScaleY:1.1,preserveAspectRatio:!0,contentArea:this.graph.getBBox(),verticalAlign:"top",horizontalAlign:"middle"}):console.warn("Paper not initialized")}createAgentElement(e){const t=new VS({position:{x:e.graphPosX||600*Math.random(),y:e.graphPosY||400*Math.random()},label:e.class.description,text:e.class.description,agentId:e.id,attrs:{},type:"html.Element"});return t.addTo(this.graph),t}createConnectorElement(e){const t=new GS({position:{x:e.graphPosX||600*Math.random(),y:e.graphPosY||400*Math.random()},label:e.class.description,text:e.class.description,connectorId:e.id,attrs:{},type:"html.Element"});return t.addTo(this.graph),t}updateGraphWithAgentData(){this.graph.clear(),this.elements={};const e=new Set;this.currentAgent.subAgents&&this.currentAgent.subAgents.length>0&&this.currentAgent.subAgents.forEach((t=>{const r=this.createAgentElement(t);this.elements[t.id]=r,e.add(t.id)})),this.currentAgent.connectors&&this.currentAgent.connectors.length>0&&this.currentAgent.connectors.forEach((t=>{const r=this.createConnectorElement(t);this.elements[t.id]=r,e.add(t.id)})),setTimeout((()=>{this.applyDirectedGraphLayout(),this.updatePaperSize()}))}createLink(e,t){if(!e||!t)return void console.error(`source or target is null ${e} ${t}`);const r=new tx({source:{id:t.id},target:{id:e.id},attrs:{".connection":{stroke:"var(--md-sys-color-on-surface)","stroke-width":2},".marker-target":{fill:"var(--md-sys-color-on-surface)",d:"M 10 -5 L 0 0 L 10 5 z","ref-x":.5,"ref-y":0}},z:1,router:{name:"orthogonal",args:{startDirections:["top"],endDirections:["bottom"]}},connector:{name:"rounded"}});return this.graph.addCell(r),r}selectElement(e){this.selection&&(this.unhighlightCell(this.selection),this.graph.getLinks().forEach((e=>this.unhighlightCell(e)))),e?(this.highlightCell(e),this.selection=e):this.selection=null}highlightCell(e){const t=e.findView(this.paper);t&&Xx.add(t,e.isElement()?"body":"line","selection",{className:"selection"})}unhighlightCell(e){const t=e.findView(this.paper);t&&Xx.remove(t,"selection")}addNodes(e,t){}static get styles(){return[super.styles,o`.causeContainer{color:var(--md-sys-color-on-primary-container);background-color:var(--md-sys-color-primary-container);border-radius:16px;padding:0}.rootCauseContainer{color:var(--md-sys-color-on-primary);background-color:var(--md-sys-color-primary);border-radius:0;padding:0}.connectorContainer{color:var(--md-sys-color-on-secondary-container);background-color:var(--md-sys-color-secondary-container);border-radius:0;padding:0}.udeContainer{color:var(--md-sys-color-on-tertiary-container);background-color:var(--md-sys-color-tertiary-container);border-radius:8px;padding:0}.assumptionCauseContainer{color:var(--md-sys-color-on-secondary-container);background-color:var(--md-sys-color-secondary-container);border-radius:16px;padding:0}.jointJSCanvas{width:100vw!important;height:calc(100vh - 90px)!important;overflow-x:auto!important;overflow-y:auto!important}.controlPanel{display:flex;flex-direction:row;justify-content:center;align-items:center;margin:0 0;width:100%;position:absolute;top:64px;left:0;width:100%;height:56px;padding:0;padding-top:4px;opacity:1;background:0 0;color:var(--md-sys-color-on-surface-variant)}.controlPanelContainer{margin:0 0;position:absolute;top:64px;left:0;width:100%;height:62px;padding:0;opacity:.65;background:var(--md-sys-color-surface-variant)}md-filled-tonal-icon-button{margin-left:8px;margin-right:8px}.firstButton{margin-left:16px}.lastButton{margin-right:16px}@keyframes fadeAwayAnimation{0%{opacity:1}8%{opacity:.1}100%{opacity:1}}.fadeAway{animation:fadeAwayAnimation 60.5s}.downloadButton{margin-right:28px}`]}pan(e){const t=this.paper.translate();let r=0,i=0;switch(e){case"left":r=25;break;case"right":r=-25;break;case"up":i=25;break;case"down":i=-25}this.paper.translate(t.tx+r,t.ty+i)}render(){return V` <div class="controlPanelContainer"></div> <div class="controlPanel"> <md-filled-tonal-icon-button @click="${this.zoomIn}" class="firstButton"><md-icon>zoom_in</md-icon></md-filled-tonal-icon-button> <md-filled-tonal-icon-button @click="${this.zoomOut}"><md-icon>zoom_out</md-icon></md-filled-tonal-icon-button> <md-filled-tonal-icon-button @click="${this.resetZoom}"><md-icon>center_focus_strong</md-icon></md-filled-tonal-icon-button> <md-filled-tonal-icon-button @click="${this.updatePaperSize}"><md-icon>zoom_out_map</md-icon></md-filled-tonal-icon-button> <div class="flex"></div> <md-icon-button @click="${()=>this.pan("left")}"><md-icon>arrow_back</md-icon></md-icon-button> <md-icon-button @click="${()=>this.pan("up")}"><md-icon>arrow_upward</md-icon></md-icon-button> <md-icon-button @click="${()=>this.pan("down")}"><md-icon>arrow_downward</md-icon></md-icon-button> <md-icon-button @click="${()=>this.pan("right")}" class="lastButton"><md-icon>arrow_forward</md-icon></md-icon-button> <div class="flex"></div> </div> <div class="jointJSCanvas" id="paper-container"></div> `}};HS([ue({type:Object})],WS.prototype,"currentAgent",void 0),WS=HS([ce("ps-operations-view")],WS);
/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
class qS extends ae{constructor(){super(...arguments),this.size="medium",this.label="",this.lowered=!1}render(){const{ariaLabel:e}=this;return V` <button class="fab ${Je(this.getRenderClasses())}" aria-label="${e||G}"> <md-elevation part="elevation"></md-elevation> <md-focus-ring part="focus-ring"></md-focus-ring> <md-ripple class="ripple"></md-ripple> ${this.renderTouchTarget()} ${this.renderIcon()} ${this.renderLabel()} </button> `}getRenderClasses(){const e=!!this.label;return{lowered:this.lowered,small:"small"===this.size&&!e,large:"large"===this.size&&!e,extended:e}}renderTouchTarget(){return V`<div class="touch-target"></div>`}renderLabel(){return this.label?V`<span class="label">${this.label}</span>`:""}renderIcon(){const{ariaLabel:e}=this;return V`<span class="icon"> <slot name="icon" aria-hidden="${e||this.label?"true":G}"> <span></span> </slot> </span>`}}Ie(qS),qS.shadowRootOptions={mode:"open",delegatesFocus:!0},we([ue({reflect:!0})],qS.prototype,"size",void 0),we([ue()],qS.prototype,"label",void 0),we([ue({type:Boolean})],qS.prototype,"lowered",void 0);
/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
class YS extends qS{constructor(){super(...arguments),this.variant="surface"}getRenderClasses(){return{...super.getRenderClasses(),primary:"primary"===this.variant,secondary:"secondary"===this.variant,tertiary:"tertiary"===this.variant}}}we([ue()],YS.prototype,"variant",void 0);
/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
const JS=o`:host{--_container-color:var(--md-fab-container-color, var(--md-sys-color-surface-container-high, #ece6f0));--_container-elevation:var(--md-fab-container-elevation, 3);--_container-height:var(--md-fab-container-height, 56px);--_container-shadow-color:var(--md-fab-container-shadow-color, var(--md-sys-color-shadow, #000));--_container-width:var(--md-fab-container-width, 56px);--_focus-container-elevation:var(--md-fab-focus-container-elevation, 3);--_focus-icon-color:var(--md-fab-focus-icon-color, var(--md-sys-color-primary, #6750a4));--_hover-container-elevation:var(--md-fab-hover-container-elevation, 4);--_hover-icon-color:var(--md-fab-hover-icon-color, var(--md-sys-color-primary, #6750a4));--_hover-state-layer-color:var(--md-fab-hover-state-layer-color, var(--md-sys-color-primary, #6750a4));--_hover-state-layer-opacity:var(--md-fab-hover-state-layer-opacity, 0.08);--_icon-color:var(--md-fab-icon-color, var(--md-sys-color-primary, #6750a4));--_icon-size:var(--md-fab-icon-size, 24px);--_lowered-container-color:var(--md-fab-lowered-container-color, var(--md-sys-color-surface-container-low, #f7f2fa));--_lowered-container-elevation:var(--md-fab-lowered-container-elevation, 1);--_lowered-focus-container-elevation:var(--md-fab-lowered-focus-container-elevation, 1);--_lowered-hover-container-elevation:var(--md-fab-lowered-hover-container-elevation, 2);--_lowered-pressed-container-elevation:var(--md-fab-lowered-pressed-container-elevation, 1);--_pressed-container-elevation:var(--md-fab-pressed-container-elevation, 3);--_pressed-icon-color:var(--md-fab-pressed-icon-color, var(--md-sys-color-primary, #6750a4));--_pressed-state-layer-color:var(--md-fab-pressed-state-layer-color, var(--md-sys-color-primary, #6750a4));--_pressed-state-layer-opacity:var(--md-fab-pressed-state-layer-opacity, 0.12);--_focus-label-text-color:var(--md-fab-focus-label-text-color, var(--md-sys-color-primary, #6750a4));--_hover-label-text-color:var(--md-fab-hover-label-text-color, var(--md-sys-color-primary, #6750a4));--_label-text-color:var(--md-fab-label-text-color, var(--md-sys-color-primary, #6750a4));--_label-text-font:var(--md-fab-label-text-font, var(--md-sys-typescale-label-large-font, var(--md-ref-typeface-plain, Roboto)));--_label-text-line-height:var(--md-fab-label-text-line-height, var(--md-sys-typescale-label-large-line-height, 1.25rem));--_label-text-size:var(--md-fab-label-text-size, var(--md-sys-typescale-label-large-size, 0.875rem));--_label-text-weight:var(--md-fab-label-text-weight, var(--md-sys-typescale-label-large-weight, var(--md-ref-typeface-weight-medium, 500)));--_large-container-height:var(--md-fab-large-container-height, 96px);--_large-container-width:var(--md-fab-large-container-width, 96px);--_large-icon-size:var(--md-fab-large-icon-size, 36px);--_pressed-label-text-color:var(--md-fab-pressed-label-text-color, var(--md-sys-color-primary, #6750a4));--_primary-container-color:var(--md-fab-primary-container-color, var(--md-sys-color-primary-container, #eaddff));--_primary-focus-icon-color:var(--md-fab-primary-focus-icon-color, var(--md-sys-color-on-primary-container, #21005d));--_primary-focus-label-text-color:var(--md-fab-primary-focus-label-text-color, var(--md-sys-color-on-primary-container, #21005d));--_primary-hover-icon-color:var(--md-fab-primary-hover-icon-color, var(--md-sys-color-on-primary-container, #21005d));--_primary-hover-label-text-color:var(--md-fab-primary-hover-label-text-color, var(--md-sys-color-on-primary-container, #21005d));--_primary-hover-state-layer-color:var(--md-fab-primary-hover-state-layer-color, var(--md-sys-color-on-primary-container, #21005d));--_primary-icon-color:var(--md-fab-primary-icon-color, var(--md-sys-color-on-primary-container, #21005d));--_primary-label-text-color:var(--md-fab-primary-label-text-color, var(--md-sys-color-on-primary-container, #21005d));--_primary-pressed-icon-color:var(--md-fab-primary-pressed-icon-color, var(--md-sys-color-on-primary-container, #21005d));--_primary-pressed-label-text-color:var(--md-fab-primary-pressed-label-text-color, var(--md-sys-color-on-primary-container, #21005d));--_primary-pressed-state-layer-color:var(--md-fab-primary-pressed-state-layer-color, var(--md-sys-color-on-primary-container, #21005d));--_secondary-container-color:var(--md-fab-secondary-container-color, var(--md-sys-color-secondary-container, #e8def8));--_secondary-focus-icon-color:var(--md-fab-secondary-focus-icon-color, var(--md-sys-color-on-secondary-container, #1d192b));--_secondary-focus-label-text-color:var(--md-fab-secondary-focus-label-text-color, var(--md-sys-color-on-secondary-container, #1d192b));--_secondary-hover-icon-color:var(--md-fab-secondary-hover-icon-color, var(--md-sys-color-on-secondary-container, #1d192b));--_secondary-hover-label-text-color:var(--md-fab-secondary-hover-label-text-color, var(--md-sys-color-on-secondary-container, #1d192b));--_secondary-hover-state-layer-color:var(--md-fab-secondary-hover-state-layer-color, var(--md-sys-color-on-secondary-container, #1d192b));--_secondary-icon-color:var(--md-fab-secondary-icon-color, var(--md-sys-color-on-secondary-container, #1d192b));--_secondary-label-text-color:var(--md-fab-secondary-label-text-color, var(--md-sys-color-on-secondary-container, #1d192b));--_secondary-pressed-icon-color:var(--md-fab-secondary-pressed-icon-color, var(--md-sys-color-on-secondary-container, #1d192b));--_secondary-pressed-label-text-color:var(--md-fab-secondary-pressed-label-text-color, var(--md-sys-color-on-secondary-container, #1d192b));--_secondary-pressed-state-layer-color:var(--md-fab-secondary-pressed-state-layer-color, var(--md-sys-color-on-secondary-container, #1d192b));--_small-container-height:var(--md-fab-small-container-height, 40px);--_small-container-width:var(--md-fab-small-container-width, 40px);--_small-icon-size:var(--md-fab-small-icon-size, 24px);--_tertiary-container-color:var(--md-fab-tertiary-container-color, var(--md-sys-color-tertiary-container, #ffd8e4));--_tertiary-focus-icon-color:var(--md-fab-tertiary-focus-icon-color, var(--md-sys-color-on-tertiary-container, #31111d));--_tertiary-focus-label-text-color:var(--md-fab-tertiary-focus-label-text-color, var(--md-sys-color-on-tertiary-container, #31111d));--_tertiary-hover-icon-color:var(--md-fab-tertiary-hover-icon-color, var(--md-sys-color-on-tertiary-container, #31111d));--_tertiary-hover-label-text-color:var(--md-fab-tertiary-hover-label-text-color, var(--md-sys-color-on-tertiary-container, #31111d));--_tertiary-hover-state-layer-color:var(--md-fab-tertiary-hover-state-layer-color, var(--md-sys-color-on-tertiary-container, #31111d));--_tertiary-icon-color:var(--md-fab-tertiary-icon-color, var(--md-sys-color-on-tertiary-container, #31111d));--_tertiary-label-text-color:var(--md-fab-tertiary-label-text-color, var(--md-sys-color-on-tertiary-container, #31111d));--_tertiary-pressed-icon-color:var(--md-fab-tertiary-pressed-icon-color, var(--md-sys-color-on-tertiary-container, #31111d));--_tertiary-pressed-label-text-color:var(--md-fab-tertiary-pressed-label-text-color, var(--md-sys-color-on-tertiary-container, #31111d));--_tertiary-pressed-state-layer-color:var(--md-fab-tertiary-pressed-state-layer-color, var(--md-sys-color-on-tertiary-container, #31111d));--_container-shape-start-start:var(--md-fab-container-shape-start-start, var(--md-fab-container-shape, var(--md-sys-shape-corner-large, 16px)));--_container-shape-start-end:var(--md-fab-container-shape-start-end, var(--md-fab-container-shape, var(--md-sys-shape-corner-large, 16px)));--_container-shape-end-end:var(--md-fab-container-shape-end-end, var(--md-fab-container-shape, var(--md-sys-shape-corner-large, 16px)));--_container-shape-end-start:var(--md-fab-container-shape-end-start, var(--md-fab-container-shape, var(--md-sys-shape-corner-large, 16px)));--_large-container-shape-start-start:var(--md-fab-large-container-shape-start-start, var(--md-fab-large-container-shape, var(--md-sys-shape-corner-extra-large, 28px)));--_large-container-shape-start-end:var(--md-fab-large-container-shape-start-end, var(--md-fab-large-container-shape, var(--md-sys-shape-corner-extra-large, 28px)));--_large-container-shape-end-end:var(--md-fab-large-container-shape-end-end, var(--md-fab-large-container-shape, var(--md-sys-shape-corner-extra-large, 28px)));--_large-container-shape-end-start:var(--md-fab-large-container-shape-end-start, var(--md-fab-large-container-shape, var(--md-sys-shape-corner-extra-large, 28px)));--_small-container-shape-start-start:var(--md-fab-small-container-shape-start-start, var(--md-fab-small-container-shape, var(--md-sys-shape-corner-medium, 12px)));--_small-container-shape-start-end:var(--md-fab-small-container-shape-start-end, var(--md-fab-small-container-shape, var(--md-sys-shape-corner-medium, 12px)));--_small-container-shape-end-end:var(--md-fab-small-container-shape-end-end, var(--md-fab-small-container-shape, var(--md-sys-shape-corner-medium, 12px)));--_small-container-shape-end-start:var(--md-fab-small-container-shape-end-start, var(--md-fab-small-container-shape, var(--md-sys-shape-corner-medium, 12px)));cursor:pointer}:host([size=small][touch-target=wrapper]){margin:max(0,48px - var(--_small-container-height))}.fab{cursor:inherit}.fab .icon ::slotted(*){color:var(--_icon-color)}.fab:focus{color:var(--_focus-icon-color)}.fab:hover{color:var(--_hover-icon-color)}.fab:active{color:var(--_pressed-icon-color)}.fab.primary{background-color:var(--_primary-container-color);--md-ripple-hover-color:var(--_primary-hover-state-layer-color);--md-ripple-pressed-color:var(--_primary-pressed-state-layer-color)}.fab.primary .icon ::slotted(*){color:var(--_primary-icon-color)}.fab.primary:focus{color:var(--_primary-focus-icon-color)}.fab.primary:hover{color:var(--_primary-hover-icon-color)}.fab.primary:active{color:var(--_primary-pressed-icon-color)}.fab.primary .label{color:var(--_primary-label-text-color)}.fab:hover .fab.primary .label{color:var(--_primary-hover-label-text-color)}.fab:focus .fab.primary .label{color:var(--_primary-focus-label-text-color)}.fab:active .fab.primary .label{color:var(--_primary-pressed-label-text-color)}.fab.secondary{background-color:var(--_secondary-container-color);--md-ripple-hover-color:var(--_secondary-hover-state-layer-color);--md-ripple-pressed-color:var(--_secondary-pressed-state-layer-color)}.fab.secondary .icon ::slotted(*){color:var(--_secondary-icon-color)}.fab.secondary:focus{color:var(--_secondary-focus-icon-color)}.fab.secondary:hover{color:var(--_secondary-hover-icon-color)}.fab.secondary:active{color:var(--_secondary-pressed-icon-color)}.fab.secondary .label{color:var(--_secondary-label-text-color)}.fab:hover .fab.secondary .label{color:var(--_secondary-hover-label-text-color)}.fab:focus .fab.secondary .label{color:var(--_secondary-focus-label-text-color)}.fab:active .fab.secondary .label{color:var(--_secondary-pressed-label-text-color)}.fab.tertiary{background-color:var(--_tertiary-container-color);--md-ripple-hover-color:var(--_tertiary-hover-state-layer-color);--md-ripple-pressed-color:var(--_tertiary-pressed-state-layer-color)}.fab.tertiary .icon ::slotted(*){color:var(--_tertiary-icon-color)}.fab.tertiary:focus{color:var(--_tertiary-focus-icon-color)}.fab.tertiary:hover{color:var(--_tertiary-hover-icon-color)}.fab.tertiary:active{color:var(--_tertiary-pressed-icon-color)}.fab.tertiary .label{color:var(--_tertiary-label-text-color)}.fab:hover .fab.tertiary .label{color:var(--_tertiary-hover-label-text-color)}.fab:focus .fab.tertiary .label{color:var(--_tertiary-focus-label-text-color)}.fab:active .fab.tertiary .label{color:var(--_tertiary-pressed-label-text-color)}.fab.extended slot span{padding-inline-start:4px}.fab.small{width:var(--_small-container-width);height:var(--_small-container-height)}.fab.small .icon ::slotted(*){width:var(--_small-icon-size);height:var(--_small-icon-size);font-size:var(--_small-icon-size)}.fab.small,.fab.small .ripple{border-start-start-radius:var(--_small-container-shape-start-start);border-start-end-radius:var(--_small-container-shape-start-end);border-end-start-radius:var(--_small-container-shape-end-start);border-end-end-radius:var(--_small-container-shape-end-end)}.fab.small md-focus-ring{--md-focus-ring-shape-start-start:var(--_small-container-shape-start-start);--md-focus-ring-shape-start-end:var(--_small-container-shape-start-end);--md-focus-ring-shape-end-end:var(--_small-container-shape-end-end);--md-focus-ring-shape-end-start:var(--_small-container-shape-end-start)}`
/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */,XS=o`@media(forced-colors:active){.fab{border:1px solid ButtonText}.fab.extended{padding-inline-start:15px;padding-inline-end:19px}md-focus-ring{--md-focus-ring-outward-offset:3px}}`
/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */,ZS=o`:host{--md-ripple-hover-opacity:var(--_hover-state-layer-opacity);--md-ripple-pressed-opacity:var(--_pressed-state-layer-opacity);display:inline-flex;-webkit-tap-highlight-color:transparent}:host([size=medium][touch-target=wrapper]){margin:max(0,48px - var(--_container-height))}:host([size=large][touch-target=wrapper]){margin:max(0,48px - var(--_large-container-height))}.fab,.icon,.icon ::slotted(*){display:flex}.fab{align-items:center;justify-content:center;vertical-align:middle;padding:0;position:relative;height:var(--_container-height);transition-property:background-color;border-width:0;outline:0;z-index:0;text-transform:inherit;--md-elevation-level:var(--_container-elevation);--md-elevation-shadow-color:var(--_container-shadow-color);background-color:var(--_container-color);--md-ripple-hover-color:var(--_hover-state-layer-color);--md-ripple-pressed-color:var(--_pressed-state-layer-color)}.fab.extended{width:inherit;box-sizing:border-box;padding-inline-start:16px;padding-inline-end:20px}.fab:not(.extended){width:var(--_container-width)}.fab.large{width:var(--_large-container-width);height:var(--_large-container-height)}.fab.large .icon ::slotted(*){width:var(--_large-icon-size);height:var(--_large-icon-size);font-size:var(--_large-icon-size)}.fab.large,.fab.large .ripple{border-start-start-radius:var(--_large-container-shape-start-start);border-start-end-radius:var(--_large-container-shape-start-end);border-end-start-radius:var(--_large-container-shape-end-start);border-end-end-radius:var(--_large-container-shape-end-end)}.fab.large md-focus-ring{--md-focus-ring-shape-start-start:var(--_large-container-shape-start-start);--md-focus-ring-shape-start-end:var(--_large-container-shape-start-end);--md-focus-ring-shape-end-end:var(--_large-container-shape-end-end);--md-focus-ring-shape-end-start:var(--_large-container-shape-end-start)}.fab:focus{--md-elevation-level:var(--_focus-container-elevation)}.fab:hover{--md-elevation-level:var(--_hover-container-elevation)}.fab:active{--md-elevation-level:var(--_pressed-container-elevation)}.fab.lowered{background-color:var(--_lowered-container-color);--md-elevation-level:var(--_lowered-container-elevation)}.fab.lowered:focus{--md-elevation-level:var(--_lowered-focus-container-elevation)}.fab.lowered:hover{--md-elevation-level:var(--_lowered-hover-container-elevation)}.fab.lowered:active{--md-elevation-level:var(--_lowered-pressed-container-elevation)}.fab .label{color:var(--_label-text-color)}.fab:hover .fab .label{color:var(--_hover-label-text-color)}.fab:focus .fab .label{color:var(--_focus-label-text-color)}.fab:active .fab .label{color:var(--_pressed-label-text-color)}.label{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-family:var(--_label-text-font);font-size:var(--_label-text-size);line-height:var(--_label-text-line-height);font-weight:var(--_label-text-weight)}.fab.extended .icon ::slotted(*){margin-inline-end:12px}.ripple{overflow:hidden}.ripple,md-elevation{z-index:-1}.touch-target{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%,-50%)}:host([touch-target=none]) .touch-target{display:none}.fab,md-elevation{transition-duration:280ms;transition-timing-function:cubic-bezier(.2,0,0,1)}.fab,.ripple{border-start-start-radius:var(--_container-shape-start-start);border-start-end-radius:var(--_container-shape-start-end);border-end-start-radius:var(--_container-shape-end-start);border-end-end-radius:var(--_container-shape-end-end)}md-focus-ring{--md-focus-ring-shape-start-start:var(--_container-shape-start-start);--md-focus-ring-shape-start-end:var(--_container-shape-start-end);--md-focus-ring-shape-end-end:var(--_container-shape-end-end);--md-focus-ring-shape-end-start:var(--_container-shape-end-start)}.icon ::slotted(*){width:var(--_icon-size);height:var(--_icon-size);font-size:var(--_icon-size)}`
/**
 * @license
 * Copyright 2022 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */;let QS=class extends YS{};QS.styles=[ZS,JS,XS],QS=we([ce("md-fab")],QS);
/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
class KS extends lo{computeValidity(e){this.radioElement||(this.radioElement=document.createElement("input"),this.radioElement.type="radio",this.radioElement.name="group");let t=!1,r=!1;for(const{checked:i,required:n}of e)n&&(t=!0),i&&(r=!0);return this.radioElement.checked=r,this.radioElement.required=t,{validity:{valueMissing:t&&!r},validationMessage:this.radioElement.validationMessage}}equals(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++){const i=e[r],n=t[r];if(i.checked!==n.checked||i.required!==n.required)return!1}return!0}copy(e){return e.map((({checked:e,required:t})=>({checked:e,required:t})))}}
/**
 * @license
 * Copyright 2022 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class eA{get controls(){const e=this.host.getAttribute("name");return e&&this.root&&this.host.isConnected?Array.from(this.root.querySelectorAll(`[name="${e}"]`)):[this.host]}constructor(e){this.host=e,this.focused=!1,this.root=null,this.handleFocusIn=()=>{this.focused=!0,this.updateTabIndices()},this.handleFocusOut=()=>{this.focused=!1,this.updateTabIndices()},this.handleKeyDown=e=>{const t="ArrowDown"===e.key,r="ArrowUp"===e.key,i="ArrowLeft"===e.key,n="ArrowRight"===e.key;if(!(i||n||t||r))return;const o=this.controls;if(!o.length)return;e.preventDefault();const s="rtl"===getComputedStyle(this.host).direction?i||t:n||t,a=o.indexOf(this.host);let l=s?a+1:a-1;for(;l!==a;){l>=o.length?l=0:l<0&&(l=o.length-1);const e=o[l];if(!e.hasAttribute("disabled")){for(const t of o)t!==e&&(t.checked=!1,t.tabIndex=-1,t.blur());e.checked=!0,e.tabIndex=0,e.focus(),e.dispatchEvent(new Event("change",{bubbles:!0}));break}s?l++:l--}}}hostConnected(){this.root=this.host.getRootNode(),this.host.addEventListener("keydown",this.handleKeyDown),this.host.addEventListener("focusin",this.handleFocusIn),this.host.addEventListener("focusout",this.handleFocusOut),this.host.checked&&this.uncheckSiblings(),this.updateTabIndices()}hostDisconnected(){this.host.removeEventListener("keydown",this.handleKeyDown),this.host.removeEventListener("focusin",this.handleFocusIn),this.host.removeEventListener("focusout",this.handleFocusOut),this.updateTabIndices(),this.root=null}handleCheckedChange(){this.host.checked&&(this.uncheckSiblings(),this.updateTabIndices())}uncheckSiblings(){for(const e of this.controls)e!==this.host&&(e.checked=!1)}updateTabIndices(){const e=this.controls,t=e.find((e=>e.checked));if(t||this.focused){const r=t||this.host;r.tabIndex=0;for(const t of e)t!==r&&(t.tabIndex=-1)}else for(const t of e)t.tabIndex=0}}
/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var tA;const rA=Symbol("checked");let iA=0;const nA=no(ao(Wt(oh(ae))));class oA extends nA{get checked(){return this[rA]}set checked(e){const t=this.checked;t!==e&&(this[rA]=e,this.requestUpdate("checked",t),this.selectionController.handleCheckedChange())}constructor(){super(),this.maskId="cutout"+ ++iA,this[tA]=!1,this.required=!1,this.value="on",this.selectionController=new eA(this),this.addController(this.selectionController),this[Gt].role="radio",this.addEventListener("click",this.handleClick.bind(this)),this.addEventListener("keydown",this.handleKeydown.bind(this))}render(){const e={checked:this.checked};return V` <div class="container ${Je(e)}" aria-hidden="true"> <md-ripple part="ripple" .control="${this}" ?disabled="${this.disabled}"></md-ripple> <md-focus-ring part="focus-ring" .control="${this}"></md-focus-ring> <svg class="icon" viewBox="0 0 20 20"> <mask id="${this.maskId}"> <rect width="100%" height="100%" fill="white"/> <circle cx="10" cy="10" r="8" fill="black"/> </mask> <circle class="outer circle" cx="10" cy="10" r="10" mask="url(#${this.maskId})"/> <circle class="inner circle" cx="10" cy="10" r="5"/> </svg> <input id="input" type="radio" tabindex="-1" .checked="${this.checked}" .value="${this.value}" ?disabled="${this.disabled}"> </div> `}updated(){this[Gt].ariaChecked=String(this.checked)}async handleClick(e){this.disabled||(await 0,e.defaultPrevented||(Xn(e)&&this.focus(),this.checked=!0,this.dispatchEvent(new Event("change",{bubbles:!0})),this.dispatchEvent(new InputEvent("input",{bubbles:!0,composed:!0}))))}async handleKeydown(e){await 0," "!==e.key||e.defaultPrevented||this.click()}[(tA=rA,oo)](){return this.checked?this.value:null}[so](){return String(this.checked)}formResetCallback(){this.checked=this.hasAttribute("checked")}formStateRestoreCallback(e){this.checked="true"===e}[Kn](){return new KS((()=>this.selectionController?this.selectionController.controls:[this]))}[eo](){return this.container}}we([ue({type:Boolean})],oA.prototype,"checked",null),we([ue({type:Boolean})],oA.prototype,"required",void 0),we([ue()],oA.prototype,"value",void 0),we([me(".container")],oA.prototype,"container",void 0);
/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
const sA=o`@layer{:host{display:inline-flex;height:var(--md-radio-icon-size, 20px);outline:none;position:relative;vertical-align:top;width:var(--md-radio-icon-size, 20px);-webkit-tap-highlight-color:rgba(0,0,0,0);cursor:pointer;--md-ripple-hover-color: var(--md-radio-hover-state-layer-color, var(--md-sys-color-on-surface, #1d1b20));--md-ripple-hover-opacity: var(--md-radio-hover-state-layer-opacity, 0.08);--md-ripple-pressed-color: var(--md-radio-pressed-state-layer-color, var(--md-sys-color-primary, #6750a4));--md-ripple-pressed-opacity: var(--md-radio-pressed-state-layer-opacity, 0.12)}:host([disabled]){cursor:default}:host([touch-target=wrapper]){margin:max(0px,(48px - var(--md-radio-icon-size, 20px))/2)}.container{display:flex;height:100%;place-content:center;place-items:center;width:100%}md-focus-ring{height:44px;inset:unset;width:44px}.checked{--md-ripple-hover-color: var(--md-radio-selected-hover-state-layer-color, var(--md-sys-color-primary, #6750a4));--md-ripple-hover-opacity: var(--md-radio-selected-hover-state-layer-opacity, 0.08);--md-ripple-pressed-color: var(--md-radio-selected-pressed-state-layer-color, var(--md-sys-color-on-surface, #1d1b20));--md-ripple-pressed-opacity: var(--md-radio-selected-pressed-state-layer-opacity, 0.12)}input{appearance:none;height:48px;margin:0;position:absolute;width:48px;cursor:inherit}:host([touch-target=none]) input{width:100%;height:100%}md-ripple{border-radius:50%;height:var(--md-radio-state-layer-size, 40px);inset:unset;width:var(--md-radio-state-layer-size, 40px)}.icon{fill:var(--md-radio-icon-color, var(--md-sys-color-on-surface-variant, #49454f));inset:0;position:absolute}.outer.circle{transition:fill 50ms linear}.inner.circle{opacity:0;transform-origin:center;transition:opacity 50ms linear}.checked .icon{fill:var(--md-radio-selected-icon-color, var(--md-sys-color-primary, #6750a4))}.checked .inner.circle{animation:inner-circle-grow 300ms cubic-bezier(0.05, 0.7, 0.1, 1);opacity:1}@keyframes inner-circle-grow{from{transform:scale(0)}to{transform:scale(1)}}:host([disabled]) .circle{animation-duration:0s;transition-duration:0s}:host(:hover) .icon{fill:var(--md-radio-hover-icon-color, var(--md-sys-color-on-surface, #1d1b20))}:host(:focus-within) .icon{fill:var(--md-radio-focus-icon-color, var(--md-sys-color-on-surface, #1d1b20))}:host(:active) .icon{fill:var(--md-radio-pressed-icon-color, var(--md-sys-color-on-surface, #1d1b20))}:host([disabled]) .icon{fill:var(--md-radio-disabled-unselected-icon-color, var(--md-sys-color-on-surface, #1d1b20));opacity:var(--md-radio-disabled-unselected-icon-opacity, 0.38)}:host(:hover) .checked .icon{fill:var(--md-radio-selected-hover-icon-color, var(--md-sys-color-primary, #6750a4))}:host(:focus-within) .checked .icon{fill:var(--md-radio-selected-focus-icon-color, var(--md-sys-color-primary, #6750a4))}:host(:active) .checked .icon{fill:var(--md-radio-selected-pressed-icon-color, var(--md-sys-color-primary, #6750a4))}:host([disabled]) .checked .icon{fill:var(--md-radio-disabled-selected-icon-color, var(--md-sys-color-on-surface, #1d1b20));opacity:var(--md-radio-disabled-selected-icon-opacity, 0.38)}}@layer hcm{@media(forced-colors: active){.icon{fill:CanvasText}:host([disabled]) .icon{fill:GrayText;opacity:1}}}
`
/**
 * @license
 * Copyright 2022 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */;let aA=class extends oA{};aA.styles=[sA],aA=we([ce("md-radio")],aA);
/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
class lA extends go{renderElevationOrOutline(){return V`<md-elevation part="elevation"></md-elevation>`}}
/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const cA=o`:host{--_container-color:var(--md-elevated-button-container-color, var(--md-sys-color-surface-container-low, #f7f2fa));--_container-elevation:var(--md-elevated-button-container-elevation, 1);--_container-height:var(--md-elevated-button-container-height, 40px);--_container-shadow-color:var(--md-elevated-button-container-shadow-color, var(--md-sys-color-shadow, #000));--_disabled-container-color:var(--md-elevated-button-disabled-container-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-container-elevation:var(--md-elevated-button-disabled-container-elevation, 0);--_disabled-container-opacity:var(--md-elevated-button-disabled-container-opacity, 0.12);--_disabled-label-text-color:var(--md-elevated-button-disabled-label-text-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-label-text-opacity:var(--md-elevated-button-disabled-label-text-opacity, 0.38);--_focus-container-elevation:var(--md-elevated-button-focus-container-elevation, 1);--_focus-label-text-color:var(--md-elevated-button-focus-label-text-color, var(--md-sys-color-primary, #6750a4));--_hover-container-elevation:var(--md-elevated-button-hover-container-elevation, 2);--_hover-label-text-color:var(--md-elevated-button-hover-label-text-color, var(--md-sys-color-primary, #6750a4));--_hover-state-layer-color:var(--md-elevated-button-hover-state-layer-color, var(--md-sys-color-primary, #6750a4));--_hover-state-layer-opacity:var(--md-elevated-button-hover-state-layer-opacity, 0.08);--_label-text-color:var(--md-elevated-button-label-text-color, var(--md-sys-color-primary, #6750a4));--_label-text-font:var(--md-elevated-button-label-text-font, var(--md-sys-typescale-label-large-font, var(--md-ref-typeface-plain, Roboto)));--_label-text-line-height:var(--md-elevated-button-label-text-line-height, var(--md-sys-typescale-label-large-line-height, 1.25rem));--_label-text-size:var(--md-elevated-button-label-text-size, var(--md-sys-typescale-label-large-size, 0.875rem));--_label-text-weight:var(--md-elevated-button-label-text-weight, var(--md-sys-typescale-label-large-weight, var(--md-ref-typeface-weight-medium, 500)));--_pressed-container-elevation:var(--md-elevated-button-pressed-container-elevation, 1);--_pressed-label-text-color:var(--md-elevated-button-pressed-label-text-color, var(--md-sys-color-primary, #6750a4));--_pressed-state-layer-color:var(--md-elevated-button-pressed-state-layer-color, var(--md-sys-color-primary, #6750a4));--_pressed-state-layer-opacity:var(--md-elevated-button-pressed-state-layer-opacity, 0.12);--_disabled-icon-color:var(--md-elevated-button-disabled-icon-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-icon-opacity:var(--md-elevated-button-disabled-icon-opacity, 0.38);--_focus-icon-color:var(--md-elevated-button-focus-icon-color, var(--md-sys-color-primary, #6750a4));--_hover-icon-color:var(--md-elevated-button-hover-icon-color, var(--md-sys-color-primary, #6750a4));--_icon-color:var(--md-elevated-button-icon-color, var(--md-sys-color-primary, #6750a4));--_icon-size:var(--md-elevated-button-icon-size, 18px);--_pressed-icon-color:var(--md-elevated-button-pressed-icon-color, var(--md-sys-color-primary, #6750a4));--_container-shape-start-start:var(--md-elevated-button-container-shape-start-start, var(--md-elevated-button-container-shape, var(--md-sys-shape-corner-full, 9999px)));--_container-shape-start-end:var(--md-elevated-button-container-shape-start-end, var(--md-elevated-button-container-shape, var(--md-sys-shape-corner-full, 9999px)));--_container-shape-end-end:var(--md-elevated-button-container-shape-end-end, var(--md-elevated-button-container-shape, var(--md-sys-shape-corner-full, 9999px)));--_container-shape-end-start:var(--md-elevated-button-container-shape-end-start, var(--md-elevated-button-container-shape, var(--md-sys-shape-corner-full, 9999px)));--_leading-space:var(--md-elevated-button-leading-space, 24px);--_trailing-space:var(--md-elevated-button-trailing-space, 24px);--_with-leading-icon-leading-space:var(--md-elevated-button-with-leading-icon-leading-space, 16px);--_with-leading-icon-trailing-space:var(--md-elevated-button-with-leading-icon-trailing-space, 24px);--_with-trailing-icon-leading-space:var(--md-elevated-button-with-trailing-icon-leading-space, 24px);--_with-trailing-icon-trailing-space:var(--md-elevated-button-with-trailing-icon-trailing-space, 16px)}`
/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */;let dA=class extends lA{};dA.styles=[yo,Uh,cA],dA=we([ce("md-elevated-button")],dA);
/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
class hA extends bh{renderBackground(){return V` <div class="background"></div> <div class="state-layer"></div> `}renderIndicator(){return V`<div class="active-indicator"></div>`}}
/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const uA=o`@layer styles{:host{--_active-indicator-color: var(--md-filled-field-active-indicator-color, var(--md-sys-color-on-surface-variant, #49454f));--_active-indicator-height: var(--md-filled-field-active-indicator-height, 1px);--_bottom-space: var(--md-filled-field-bottom-space, 16px);--_container-color: var(--md-filled-field-container-color, var(--md-sys-color-surface-container-highest, #e6e0e9));--_content-color: var(--md-filled-field-content-color, var(--md-sys-color-on-surface, #1d1b20));--_content-font: var(--md-filled-field-content-font, var(--md-sys-typescale-body-large-font, var(--md-ref-typeface-plain, Roboto)));--_content-line-height: var(--md-filled-field-content-line-height, var(--md-sys-typescale-body-large-line-height, 1.5rem));--_content-size: var(--md-filled-field-content-size, var(--md-sys-typescale-body-large-size, 1rem));--_content-weight: var(--md-filled-field-content-weight, var(--md-sys-typescale-body-large-weight, var(--md-ref-typeface-weight-regular, 400)));--_disabled-active-indicator-color: var(--md-filled-field-disabled-active-indicator-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-active-indicator-height: var(--md-filled-field-disabled-active-indicator-height, 1px);--_disabled-active-indicator-opacity: var(--md-filled-field-disabled-active-indicator-opacity, 0.38);--_disabled-container-color: var(--md-filled-field-disabled-container-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-container-opacity: var(--md-filled-field-disabled-container-opacity, 0.04);--_disabled-content-color: var(--md-filled-field-disabled-content-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-content-opacity: var(--md-filled-field-disabled-content-opacity, 0.38);--_disabled-label-text-color: var(--md-filled-field-disabled-label-text-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-label-text-opacity: var(--md-filled-field-disabled-label-text-opacity, 0.38);--_disabled-leading-content-color: var(--md-filled-field-disabled-leading-content-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-leading-content-opacity: var(--md-filled-field-disabled-leading-content-opacity, 0.38);--_disabled-supporting-text-color: var(--md-filled-field-disabled-supporting-text-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-supporting-text-opacity: var(--md-filled-field-disabled-supporting-text-opacity, 0.38);--_disabled-trailing-content-color: var(--md-filled-field-disabled-trailing-content-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-trailing-content-opacity: var(--md-filled-field-disabled-trailing-content-opacity, 0.38);--_error-active-indicator-color: var(--md-filled-field-error-active-indicator-color, var(--md-sys-color-error, #b3261e));--_error-content-color: var(--md-filled-field-error-content-color, var(--md-sys-color-on-surface, #1d1b20));--_error-focus-active-indicator-color: var(--md-filled-field-error-focus-active-indicator-color, var(--md-sys-color-error, #b3261e));--_error-focus-content-color: var(--md-filled-field-error-focus-content-color, var(--md-sys-color-on-surface-variant, #49454f));--_error-focus-label-text-color: var(--md-filled-field-error-focus-label-text-color, var(--md-sys-color-error, #b3261e));--_error-focus-leading-content-color: var(--md-filled-field-error-focus-leading-content-color, var(--md-sys-color-on-surface-variant, #49454f));--_error-focus-supporting-text-color: var(--md-filled-field-error-focus-supporting-text-color, var(--md-sys-color-error, #b3261e));--_error-focus-trailing-content-color: var(--md-filled-field-error-focus-trailing-content-color, var(--md-sys-color-error, #b3261e));--_error-hover-active-indicator-color: var(--md-filled-field-error-hover-active-indicator-color, var(--md-sys-color-on-error-container, #410e0b));--_error-hover-content-color: var(--md-filled-field-error-hover-content-color, var(--md-sys-color-on-surface, #1d1b20));--_error-hover-label-text-color: var(--md-filled-field-error-hover-label-text-color, var(--md-sys-color-on-error-container, #410e0b));--_error-hover-leading-content-color: var(--md-filled-field-error-hover-leading-content-color, var(--md-sys-color-on-surface-variant, #49454f));--_error-hover-state-layer-color: var(--md-filled-field-error-hover-state-layer-color, var(--md-sys-color-on-surface, #1d1b20));--_error-hover-state-layer-opacity: var(--md-filled-field-error-hover-state-layer-opacity, 0.08);--_error-hover-supporting-text-color: var(--md-filled-field-error-hover-supporting-text-color, var(--md-sys-color-error, #b3261e));--_error-hover-trailing-content-color: var(--md-filled-field-error-hover-trailing-content-color, var(--md-sys-color-on-error-container, #410e0b));--_error-label-text-color: var(--md-filled-field-error-label-text-color, var(--md-sys-color-error, #b3261e));--_error-leading-content-color: var(--md-filled-field-error-leading-content-color, var(--md-sys-color-on-surface-variant, #49454f));--_error-supporting-text-color: var(--md-filled-field-error-supporting-text-color, var(--md-sys-color-error, #b3261e));--_error-trailing-content-color: var(--md-filled-field-error-trailing-content-color, var(--md-sys-color-error, #b3261e));--_focus-active-indicator-color: var(--md-filled-field-focus-active-indicator-color, var(--md-sys-color-primary, #6750a4));--_focus-active-indicator-height: var(--md-filled-field-focus-active-indicator-height, 3px);--_focus-content-color: var(--md-filled-field-focus-content-color, var(--md-sys-color-on-surface, #1d1b20));--_focus-label-text-color: var(--md-filled-field-focus-label-text-color, var(--md-sys-color-primary, #6750a4));--_focus-leading-content-color: var(--md-filled-field-focus-leading-content-color, var(--md-sys-color-on-surface-variant, #49454f));--_focus-supporting-text-color: var(--md-filled-field-focus-supporting-text-color, var(--md-sys-color-on-surface-variant, #49454f));--_focus-trailing-content-color: var(--md-filled-field-focus-trailing-content-color, var(--md-sys-color-on-surface-variant, #49454f));--_hover-active-indicator-color: var(--md-filled-field-hover-active-indicator-color, var(--md-sys-color-on-surface, #1d1b20));--_hover-active-indicator-height: var(--md-filled-field-hover-active-indicator-height, 1px);--_hover-content-color: var(--md-filled-field-hover-content-color, var(--md-sys-color-on-surface, #1d1b20));--_hover-label-text-color: var(--md-filled-field-hover-label-text-color, var(--md-sys-color-on-surface-variant, #49454f));--_hover-leading-content-color: var(--md-filled-field-hover-leading-content-color, var(--md-sys-color-on-surface-variant, #49454f));--_hover-state-layer-color: var(--md-filled-field-hover-state-layer-color, var(--md-sys-color-on-surface, #1d1b20));--_hover-state-layer-opacity: var(--md-filled-field-hover-state-layer-opacity, 0.08);--_hover-supporting-text-color: var(--md-filled-field-hover-supporting-text-color, var(--md-sys-color-on-surface-variant, #49454f));--_hover-trailing-content-color: var(--md-filled-field-hover-trailing-content-color, var(--md-sys-color-on-surface-variant, #49454f));--_label-text-color: var(--md-filled-field-label-text-color, var(--md-sys-color-on-surface-variant, #49454f));--_label-text-font: var(--md-filled-field-label-text-font, var(--md-sys-typescale-body-large-font, var(--md-ref-typeface-plain, Roboto)));--_label-text-line-height: var(--md-filled-field-label-text-line-height, var(--md-sys-typescale-body-large-line-height, 1.5rem));--_label-text-populated-line-height: var(--md-filled-field-label-text-populated-line-height, var(--md-sys-typescale-body-small-line-height, 1rem));--_label-text-populated-size: var(--md-filled-field-label-text-populated-size, var(--md-sys-typescale-body-small-size, 0.75rem));--_label-text-size: var(--md-filled-field-label-text-size, var(--md-sys-typescale-body-large-size, 1rem));--_label-text-weight: var(--md-filled-field-label-text-weight, var(--md-sys-typescale-body-large-weight, var(--md-ref-typeface-weight-regular, 400)));--_leading-content-color: var(--md-filled-field-leading-content-color, var(--md-sys-color-on-surface-variant, #49454f));--_leading-space: var(--md-filled-field-leading-space, 16px);--_supporting-text-color: var(--md-filled-field-supporting-text-color, var(--md-sys-color-on-surface-variant, #49454f));--_supporting-text-font: var(--md-filled-field-supporting-text-font, var(--md-sys-typescale-body-small-font, var(--md-ref-typeface-plain, Roboto)));--_supporting-text-leading-space: var(--md-filled-field-supporting-text-leading-space, 16px);--_supporting-text-line-height: var(--md-filled-field-supporting-text-line-height, var(--md-sys-typescale-body-small-line-height, 1rem));--_supporting-text-size: var(--md-filled-field-supporting-text-size, var(--md-sys-typescale-body-small-size, 0.75rem));--_supporting-text-top-space: var(--md-filled-field-supporting-text-top-space, 4px);--_supporting-text-trailing-space: var(--md-filled-field-supporting-text-trailing-space, 16px);--_supporting-text-weight: var(--md-filled-field-supporting-text-weight, var(--md-sys-typescale-body-small-weight, var(--md-ref-typeface-weight-regular, 400)));--_top-space: var(--md-filled-field-top-space, 16px);--_trailing-content-color: var(--md-filled-field-trailing-content-color, var(--md-sys-color-on-surface-variant, #49454f));--_trailing-space: var(--md-filled-field-trailing-space, 16px);--_with-label-bottom-space: var(--md-filled-field-with-label-bottom-space, 8px);--_with-label-top-space: var(--md-filled-field-with-label-top-space, 8px);--_container-shape-start-start: var(--md-filled-field-container-shape-start-start, var(--md-filled-field-container-shape, var(--md-sys-shape-corner-extra-small, 4px)));--_container-shape-start-end: var(--md-filled-field-container-shape-start-end, var(--md-filled-field-container-shape, var(--md-sys-shape-corner-extra-small, 4px)));--_container-shape-end-end: var(--md-filled-field-container-shape-end-end, var(--md-filled-field-container-shape, var(--md-sys-shape-corner-none, 0px)));--_container-shape-end-start: var(--md-filled-field-container-shape-end-start, var(--md-filled-field-container-shape, var(--md-sys-shape-corner-none, 0px)))}.background,.state-layer{border-radius:inherit;inset:0;pointer-events:none;position:absolute}.background{background:var(--_container-color)}.state-layer{visibility:hidden}.field:not(.disabled):hover .state-layer{visibility:visible}.label.floating{position:absolute;top:var(--_with-label-top-space)}.field:not(.with-start) .label-wrapper{margin-inline-start:var(--_leading-space)}.field:not(.with-end) .label-wrapper{margin-inline-end:var(--_trailing-space)}.active-indicator{inset:auto 0 0 0;pointer-events:none;position:absolute;width:100%;z-index:1}.active-indicator::before,.active-indicator::after{border-bottom:var(--_active-indicator-height) solid var(--_active-indicator-color);inset:auto 0 0 0;content:"";position:absolute;width:100%}.active-indicator::after{opacity:0;transition:opacity 150ms cubic-bezier(0.2, 0, 0, 1)}.focused .active-indicator::after{opacity:1}.field:not(.with-start) .content ::slotted(*){padding-inline-start:var(--_leading-space)}.field:not(.with-end) .content ::slotted(*){padding-inline-end:var(--_trailing-space)}.field:not(.no-label) .content ::slotted(:not(textarea)){padding-bottom:var(--_with-label-bottom-space);padding-top:calc(var(--_with-label-top-space) + var(--_label-text-populated-line-height))}.field:not(.no-label) .content ::slotted(textarea){margin-bottom:var(--_with-label-bottom-space);margin-top:calc(var(--_with-label-top-space) + var(--_label-text-populated-line-height))}:hover .active-indicator::before{border-bottom-color:var(--_hover-active-indicator-color);border-bottom-width:var(--_hover-active-indicator-height)}.active-indicator::after{border-bottom-color:var(--_focus-active-indicator-color);border-bottom-width:var(--_focus-active-indicator-height)}:hover .state-layer{background:var(--_hover-state-layer-color);opacity:var(--_hover-state-layer-opacity)}.disabled .active-indicator::before{border-bottom-color:var(--_disabled-active-indicator-color);border-bottom-width:var(--_disabled-active-indicator-height);opacity:var(--_disabled-active-indicator-opacity)}.disabled .background{background:var(--_disabled-container-color);opacity:var(--_disabled-container-opacity)}.error .active-indicator::before{border-bottom-color:var(--_error-active-indicator-color)}.error:hover .active-indicator::before{border-bottom-color:var(--_error-hover-active-indicator-color)}.error:hover .state-layer{background:var(--_error-hover-state-layer-color);opacity:var(--_error-hover-state-layer-opacity)}.error .active-indicator::after{border-bottom-color:var(--_error-focus-active-indicator-color)}.resizable .container{bottom:var(--_focus-active-indicator-height);clip-path:inset(var(--_focus-active-indicator-height) 0 0 0)}.resizable .container>*{top:var(--_focus-active-indicator-height)}}@layer hcm{@media(forced-colors: active){.disabled .active-indicator::before{border-color:GrayText;opacity:1}}}
`
/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */;let pA=class extends hA{};pA.styles=[wh,uA],pA=we([ce("md-filled-field")],pA);
/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
const fA=o`:host{--_active-indicator-color:var(--md-filled-text-field-active-indicator-color, var(--md-sys-color-on-surface-variant, #49454f));--_active-indicator-height:var(--md-filled-text-field-active-indicator-height, 1px);--_caret-color:var(--md-filled-text-field-caret-color, var(--md-sys-color-primary, #6750a4));--_container-color:var(--md-filled-text-field-container-color, var(--md-sys-color-surface-container-highest, #e6e0e9));--_disabled-active-indicator-color:var(--md-filled-text-field-disabled-active-indicator-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-active-indicator-height:var(--md-filled-text-field-disabled-active-indicator-height, 1px);--_disabled-active-indicator-opacity:var(--md-filled-text-field-disabled-active-indicator-opacity, 0.38);--_disabled-container-color:var(--md-filled-text-field-disabled-container-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-container-opacity:var(--md-filled-text-field-disabled-container-opacity, 0.04);--_disabled-input-text-color:var(--md-filled-text-field-disabled-input-text-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-input-text-opacity:var(--md-filled-text-field-disabled-input-text-opacity, 0.38);--_disabled-label-text-color:var(--md-filled-text-field-disabled-label-text-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-label-text-opacity:var(--md-filled-text-field-disabled-label-text-opacity, 0.38);--_disabled-leading-icon-color:var(--md-filled-text-field-disabled-leading-icon-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-leading-icon-opacity:var(--md-filled-text-field-disabled-leading-icon-opacity, 0.38);--_disabled-supporting-text-color:var(--md-filled-text-field-disabled-supporting-text-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-supporting-text-opacity:var(--md-filled-text-field-disabled-supporting-text-opacity, 0.38);--_disabled-trailing-icon-color:var(--md-filled-text-field-disabled-trailing-icon-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-trailing-icon-opacity:var(--md-filled-text-field-disabled-trailing-icon-opacity, 0.38);--_error-active-indicator-color:var(--md-filled-text-field-error-active-indicator-color, var(--md-sys-color-error, #b3261e));--_error-focus-active-indicator-color:var(--md-filled-text-field-error-focus-active-indicator-color, var(--md-sys-color-error, #b3261e));--_error-focus-caret-color:var(--md-filled-text-field-error-focus-caret-color, var(--md-sys-color-error, #b3261e));--_error-focus-input-text-color:var(--md-filled-text-field-error-focus-input-text-color, var(--md-sys-color-on-surface, #1d1b20));--_error-focus-label-text-color:var(--md-filled-text-field-error-focus-label-text-color, var(--md-sys-color-error, #b3261e));--_error-focus-leading-icon-color:var(--md-filled-text-field-error-focus-leading-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_error-focus-supporting-text-color:var(--md-filled-text-field-error-focus-supporting-text-color, var(--md-sys-color-error, #b3261e));--_error-focus-trailing-icon-color:var(--md-filled-text-field-error-focus-trailing-icon-color, var(--md-sys-color-error, #b3261e));--_error-hover-active-indicator-color:var(--md-filled-text-field-error-hover-active-indicator-color, var(--md-sys-color-on-error-container, #410e0b));--_error-hover-input-text-color:var(--md-filled-text-field-error-hover-input-text-color, var(--md-sys-color-on-surface, #1d1b20));--_error-hover-label-text-color:var(--md-filled-text-field-error-hover-label-text-color, var(--md-sys-color-on-error-container, #410e0b));--_error-hover-leading-icon-color:var(--md-filled-text-field-error-hover-leading-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_error-hover-state-layer-color:var(--md-filled-text-field-error-hover-state-layer-color, var(--md-sys-color-on-surface, #1d1b20));--_error-hover-state-layer-opacity:var(--md-filled-text-field-error-hover-state-layer-opacity, 0.08);--_error-hover-supporting-text-color:var(--md-filled-text-field-error-hover-supporting-text-color, var(--md-sys-color-error, #b3261e));--_error-hover-trailing-icon-color:var(--md-filled-text-field-error-hover-trailing-icon-color, var(--md-sys-color-on-error-container, #410e0b));--_error-input-text-color:var(--md-filled-text-field-error-input-text-color, var(--md-sys-color-on-surface, #1d1b20));--_error-label-text-color:var(--md-filled-text-field-error-label-text-color, var(--md-sys-color-error, #b3261e));--_error-leading-icon-color:var(--md-filled-text-field-error-leading-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_error-supporting-text-color:var(--md-filled-text-field-error-supporting-text-color, var(--md-sys-color-error, #b3261e));--_error-trailing-icon-color:var(--md-filled-text-field-error-trailing-icon-color, var(--md-sys-color-error, #b3261e));--_focus-active-indicator-color:var(--md-filled-text-field-focus-active-indicator-color, var(--md-sys-color-primary, #6750a4));--_focus-active-indicator-height:var(--md-filled-text-field-focus-active-indicator-height, 3px);--_focus-input-text-color:var(--md-filled-text-field-focus-input-text-color, var(--md-sys-color-on-surface, #1d1b20));--_focus-label-text-color:var(--md-filled-text-field-focus-label-text-color, var(--md-sys-color-primary, #6750a4));--_focus-leading-icon-color:var(--md-filled-text-field-focus-leading-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_focus-supporting-text-color:var(--md-filled-text-field-focus-supporting-text-color, var(--md-sys-color-on-surface-variant, #49454f));--_focus-trailing-icon-color:var(--md-filled-text-field-focus-trailing-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_hover-active-indicator-color:var(--md-filled-text-field-hover-active-indicator-color, var(--md-sys-color-on-surface, #1d1b20));--_hover-active-indicator-height:var(--md-filled-text-field-hover-active-indicator-height, 1px);--_hover-input-text-color:var(--md-filled-text-field-hover-input-text-color, var(--md-sys-color-on-surface, #1d1b20));--_hover-label-text-color:var(--md-filled-text-field-hover-label-text-color, var(--md-sys-color-on-surface-variant, #49454f));--_hover-leading-icon-color:var(--md-filled-text-field-hover-leading-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_hover-state-layer-color:var(--md-filled-text-field-hover-state-layer-color, var(--md-sys-color-on-surface, #1d1b20));--_hover-state-layer-opacity:var(--md-filled-text-field-hover-state-layer-opacity, 0.08);--_hover-supporting-text-color:var(--md-filled-text-field-hover-supporting-text-color, var(--md-sys-color-on-surface-variant, #49454f));--_hover-trailing-icon-color:var(--md-filled-text-field-hover-trailing-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_input-text-color:var(--md-filled-text-field-input-text-color, var(--md-sys-color-on-surface, #1d1b20));--_input-text-font:var(--md-filled-text-field-input-text-font, var(--md-sys-typescale-body-large-font, var(--md-ref-typeface-plain, Roboto)));--_input-text-line-height:var(--md-filled-text-field-input-text-line-height, var(--md-sys-typescale-body-large-line-height, 1.5rem));--_input-text-placeholder-color:var(--md-filled-text-field-input-text-placeholder-color, var(--md-sys-color-on-surface-variant, #49454f));--_input-text-prefix-color:var(--md-filled-text-field-input-text-prefix-color, var(--md-sys-color-on-surface-variant, #49454f));--_input-text-size:var(--md-filled-text-field-input-text-size, var(--md-sys-typescale-body-large-size, 1rem));--_input-text-suffix-color:var(--md-filled-text-field-input-text-suffix-color, var(--md-sys-color-on-surface-variant, #49454f));--_input-text-weight:var(--md-filled-text-field-input-text-weight, var(--md-sys-typescale-body-large-weight, var(--md-ref-typeface-weight-regular, 400)));--_label-text-color:var(--md-filled-text-field-label-text-color, var(--md-sys-color-on-surface-variant, #49454f));--_label-text-font:var(--md-filled-text-field-label-text-font, var(--md-sys-typescale-body-large-font, var(--md-ref-typeface-plain, Roboto)));--_label-text-line-height:var(--md-filled-text-field-label-text-line-height, var(--md-sys-typescale-body-large-line-height, 1.5rem));--_label-text-populated-line-height:var(--md-filled-text-field-label-text-populated-line-height, var(--md-sys-typescale-body-small-line-height, 1rem));--_label-text-populated-size:var(--md-filled-text-field-label-text-populated-size, var(--md-sys-typescale-body-small-size, 0.75rem));--_label-text-size:var(--md-filled-text-field-label-text-size, var(--md-sys-typescale-body-large-size, 1rem));--_label-text-weight:var(--md-filled-text-field-label-text-weight, var(--md-sys-typescale-body-large-weight, var(--md-ref-typeface-weight-regular, 400)));--_leading-icon-color:var(--md-filled-text-field-leading-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_leading-icon-size:var(--md-filled-text-field-leading-icon-size, 24px);--_supporting-text-color:var(--md-filled-text-field-supporting-text-color, var(--md-sys-color-on-surface-variant, #49454f));--_supporting-text-font:var(--md-filled-text-field-supporting-text-font, var(--md-sys-typescale-body-small-font, var(--md-ref-typeface-plain, Roboto)));--_supporting-text-line-height:var(--md-filled-text-field-supporting-text-line-height, var(--md-sys-typescale-body-small-line-height, 1rem));--_supporting-text-size:var(--md-filled-text-field-supporting-text-size, var(--md-sys-typescale-body-small-size, 0.75rem));--_supporting-text-weight:var(--md-filled-text-field-supporting-text-weight, var(--md-sys-typescale-body-small-weight, var(--md-ref-typeface-weight-regular, 400)));--_trailing-icon-color:var(--md-filled-text-field-trailing-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_trailing-icon-size:var(--md-filled-text-field-trailing-icon-size, 24px);--_container-shape-start-start:var(--md-filled-text-field-container-shape-start-start, var(--md-filled-text-field-container-shape, var(--md-sys-shape-corner-extra-small, 4px)));--_container-shape-start-end:var(--md-filled-text-field-container-shape-start-end, var(--md-filled-text-field-container-shape, var(--md-sys-shape-corner-extra-small, 4px)));--_container-shape-end-end:var(--md-filled-text-field-container-shape-end-end, var(--md-filled-text-field-container-shape, var(--md-sys-shape-corner-none, 0px)));--_container-shape-end-start:var(--md-filled-text-field-container-shape-end-start, var(--md-filled-text-field-container-shape, var(--md-sys-shape-corner-none, 0px)));--_leading-space:var(--md-filled-text-field-leading-space, 16px);--_trailing-space:var(--md-filled-text-field-trailing-space, 16px);--_top-space:var(--md-filled-text-field-top-space, 16px);--_bottom-space:var(--md-filled-text-field-bottom-space, 16px);--_input-text-prefix-trailing-space:var(--md-filled-text-field-input-text-prefix-trailing-space, 2px);--_input-text-suffix-leading-space:var(--md-filled-text-field-input-text-suffix-leading-space, 2px);--_with-label-top-space:var(--md-filled-text-field-with-label-top-space, 8px);--_with-label-bottom-space:var(--md-filled-text-field-with-label-bottom-space, 8px);--_focus-caret-color:var(--md-filled-text-field-focus-caret-color, var(--md-sys-color-primary, #6750a4));--md-filled-field-active-indicator-color:var(--_active-indicator-color);--md-filled-field-active-indicator-height:var(--_active-indicator-height);--md-filled-field-bottom-space:var(--_bottom-space);--md-filled-field-container-color:var(--_container-color);--md-filled-field-container-shape-end-end:var(--_container-shape-end-end);--md-filled-field-container-shape-end-start:var(--_container-shape-end-start);--md-filled-field-container-shape-start-end:var(--_container-shape-start-end);--md-filled-field-container-shape-start-start:var(--_container-shape-start-start);--md-filled-field-content-color:var(--_input-text-color);--md-filled-field-content-font:var(--_input-text-font);--md-filled-field-content-line-height:var(--_input-text-line-height);--md-filled-field-content-size:var(--_input-text-size);--md-filled-field-content-weight:var(--_input-text-weight);--md-filled-field-disabled-active-indicator-color:var(--_disabled-active-indicator-color);--md-filled-field-disabled-active-indicator-height:var(--_disabled-active-indicator-height);--md-filled-field-disabled-active-indicator-opacity:var(--_disabled-active-indicator-opacity);--md-filled-field-disabled-container-color:var(--_disabled-container-color);--md-filled-field-disabled-container-opacity:var(--_disabled-container-opacity);--md-filled-field-disabled-content-color:var(--_disabled-input-text-color);--md-filled-field-disabled-content-opacity:var(--_disabled-input-text-opacity);--md-filled-field-disabled-label-text-color:var(--_disabled-label-text-color);--md-filled-field-disabled-label-text-opacity:var(--_disabled-label-text-opacity);--md-filled-field-disabled-leading-content-color:var(--_disabled-leading-icon-color);--md-filled-field-disabled-leading-content-opacity:var(--_disabled-leading-icon-opacity);--md-filled-field-disabled-supporting-text-color:var(--_disabled-supporting-text-color);--md-filled-field-disabled-supporting-text-opacity:var(--_disabled-supporting-text-opacity);--md-filled-field-disabled-trailing-content-color:var(--_disabled-trailing-icon-color);--md-filled-field-disabled-trailing-content-opacity:var(--_disabled-trailing-icon-opacity);--md-filled-field-error-active-indicator-color:var(--_error-active-indicator-color);--md-filled-field-error-content-color:var(--_error-input-text-color);--md-filled-field-error-focus-active-indicator-color:var(--_error-focus-active-indicator-color);--md-filled-field-error-focus-content-color:var(--_error-focus-input-text-color);--md-filled-field-error-focus-label-text-color:var(--_error-focus-label-text-color);--md-filled-field-error-focus-leading-content-color:var(--_error-focus-leading-icon-color);--md-filled-field-error-focus-supporting-text-color:var(--_error-focus-supporting-text-color);--md-filled-field-error-focus-trailing-content-color:var(--_error-focus-trailing-icon-color);--md-filled-field-error-hover-active-indicator-color:var(--_error-hover-active-indicator-color);--md-filled-field-error-hover-content-color:var(--_error-hover-input-text-color);--md-filled-field-error-hover-label-text-color:var(--_error-hover-label-text-color);--md-filled-field-error-hover-leading-content-color:var(--_error-hover-leading-icon-color);--md-filled-field-error-hover-state-layer-color:var(--_error-hover-state-layer-color);--md-filled-field-error-hover-state-layer-opacity:var(--_error-hover-state-layer-opacity);--md-filled-field-error-hover-supporting-text-color:var(--_error-hover-supporting-text-color);--md-filled-field-error-hover-trailing-content-color:var(--_error-hover-trailing-icon-color);--md-filled-field-error-label-text-color:var(--_error-label-text-color);--md-filled-field-error-leading-content-color:var(--_error-leading-icon-color);--md-filled-field-error-supporting-text-color:var(--_error-supporting-text-color);--md-filled-field-error-trailing-content-color:var(--_error-trailing-icon-color);--md-filled-field-focus-active-indicator-color:var(--_focus-active-indicator-color);--md-filled-field-focus-active-indicator-height:var(--_focus-active-indicator-height);--md-filled-field-focus-content-color:var(--_focus-input-text-color);--md-filled-field-focus-label-text-color:var(--_focus-label-text-color);--md-filled-field-focus-leading-content-color:var(--_focus-leading-icon-color);--md-filled-field-focus-supporting-text-color:var(--_focus-supporting-text-color);--md-filled-field-focus-trailing-content-color:var(--_focus-trailing-icon-color);--md-filled-field-hover-active-indicator-color:var(--_hover-active-indicator-color);--md-filled-field-hover-active-indicator-height:var(--_hover-active-indicator-height);--md-filled-field-hover-content-color:var(--_hover-input-text-color);--md-filled-field-hover-label-text-color:var(--_hover-label-text-color);--md-filled-field-hover-leading-content-color:var(--_hover-leading-icon-color);--md-filled-field-hover-state-layer-color:var(--_hover-state-layer-color);--md-filled-field-hover-state-layer-opacity:var(--_hover-state-layer-opacity);--md-filled-field-hover-supporting-text-color:var(--_hover-supporting-text-color);--md-filled-field-hover-trailing-content-color:var(--_hover-trailing-icon-color);--md-filled-field-label-text-color:var(--_label-text-color);--md-filled-field-label-text-font:var(--_label-text-font);--md-filled-field-label-text-line-height:var(--_label-text-line-height);--md-filled-field-label-text-populated-line-height:var(--_label-text-populated-line-height);--md-filled-field-label-text-populated-size:var(--_label-text-populated-size);--md-filled-field-label-text-size:var(--_label-text-size);--md-filled-field-label-text-weight:var(--_label-text-weight);--md-filled-field-leading-content-color:var(--_leading-icon-color);--md-filled-field-leading-space:var(--_leading-space);--md-filled-field-supporting-text-color:var(--_supporting-text-color);--md-filled-field-supporting-text-font:var(--_supporting-text-font);--md-filled-field-supporting-text-line-height:var(--_supporting-text-line-height);--md-filled-field-supporting-text-size:var(--_supporting-text-size);--md-filled-field-supporting-text-weight:var(--_supporting-text-weight);--md-filled-field-top-space:var(--_top-space);--md-filled-field-trailing-content-color:var(--_trailing-icon-color);--md-filled-field-trailing-space:var(--_trailing-space);--md-filled-field-with-label-bottom-space:var(--_with-label-bottom-space);--md-filled-field-with-label-top-space:var(--_with-label-top-space)}`
/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */;class mA extends $h{constructor(){super(...arguments),this.fieldTag=wt`md-filled-field`}}
/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let gA=class extends mA{constructor(){super(...arguments),this.fieldTag=wt`md-filled-field`}};gA.styles=[Dh,fA],gA=we([ce("md-filled-text-field")],gA);class vA extends Error{constructor(e,t){super(e+" at position "+t),this.position=t}}const bA=123,yA=125,xA=93,wA=32,_A=10,kA=9,CA=13,SA=8,AA=12,PA=34,TA=39,EA=48,IA=57,LA=44,OA=65,MA=97,RA=70,$A=102,NA=160,DA=8192,zA=8202,BA=8239,FA=8287,UA=12288,VA=8220,jA=8221,GA=8216,HA=8217,WA=96,qA=180;function YA(e){return e>=EA&&e<=IA}function JA(e){return e>=32&&e<=1114111}function XA(e){return ZA.test(e)}const ZA=/^[,:[\]/{}()\n+]$/;function QA(e){return KA.test(e)||e&&rP(e.charCodeAt(0))}const KA=/^[[{\w-]$/;function eP(e){return e===_A||e===CA||e===kA||e===SA||e===AA}function tP(e){return e===wA||e===_A||e===kA||e===CA}function rP(e){return iP(e)||oP(e)}function iP(e){return e===PA||e===VA||e===jA}function nP(e){return e===PA}function oP(e){return e===TA||e===GA||e===HA||e===WA||e===qA}function sP(e){return e===TA}function aP(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i=e.lastIndexOf(t);return-1!==i?e.substring(0,i)+(r?"":e.substring(i+1)):e}function lP(e,t){let r=e.length;if(!tP(e.charCodeAt(r-1)))return e+t;for(;tP(e.charCodeAt(r-1));)r--;return e.substring(0,r)+t+e.substring(r)}function cP(e,t,r){return e.substring(0,t)+e.substring(t+r)}const dP={"\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t"},hP={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"};function uP(e){let t=0,r="";n()||function(){throw new vA("Unexpected end of json string",e.length)}();const i=l(LA);for(i&&o(),QA(e[t])&&function(e){return/[,\n][ \t\r]*$/.test(e)}(r)?(i||(r=lP(r,",")),function(){let e=!0,t=!0;for(;t;){if(e)e=!1;else{l(LA)||(r=lP(r,","))}t=n()}t||(r=aP(r,","));r="[\n".concat(r,"\n]")}()):i&&(r=aP(r,","));e.charCodeAt(t)===yA||93===e.charCodeAt(t);)t++,o();if(t>=e.length)return r;function n(){o();const i=function(){if(e.charCodeAt(t)===bA){r+="{",t++,o(),c(LA)&&o();let i=!0;for(;t<e.length&&e.charCodeAt(t)!==yA;){let s;i?(s=!0,i=!1):(s=l(LA),s||(r=lP(r,",")),o()),d();if(!(h()||f())){e.charCodeAt(t)===yA||e.charCodeAt(t)===bA||93===e.charCodeAt(t)||91===e.charCodeAt(t)||void 0===e[t]?r=aP(r,","):y();break}o();const a=l(58),c=t>=e.length;a||(QA(e[t])||c?r=lP(r,":"):x());n()||(a||c?r+="null":x())}return e.charCodeAt(t)===yA?(r+="}",t++):r=lP(r,"}"),!0}return!1}()||function(){if(91===e.charCodeAt(t)){r+="[",t++,o(),c(LA)&&o();let i=!0;for(;t<e.length&&e.charCodeAt(t)!==xA;){if(i)i=!1;else{l(LA)||(r=lP(r,","))}d();if(!n()){r=aP(r,",");break}}return e.charCodeAt(t)===xA?(r+="]",t++):r=lP(r,"]"),!0}return!1}()||h()||function(){const i=t;if(45===e.charCodeAt(t)){if(t++,g())return v(i),!0;if(!YA(e.charCodeAt(t)))return t=i,!1}for(;YA(e.charCodeAt(t));)t++;if(46===e.charCodeAt(t)){if(t++,g())return v(i),!0;if(!YA(e.charCodeAt(t)))return t=i,!1;for(;YA(e.charCodeAt(t));)t++}if(101===e.charCodeAt(t)||69===e.charCodeAt(t)){if(t++,45!==e.charCodeAt(t)&&43!==e.charCodeAt(t)||t++,g())return v(i),!0;if(!YA(e.charCodeAt(t)))return t=i,!1;for(;YA(e.charCodeAt(t));)t++}if(!g())return t=i,!1;if(t>i){const n=e.slice(i,t),o=/^0\d/.test(n);return r+=o?'"'.concat(n,'"'):n,!0}return!1}()||p("true","true")||p("false","false")||p("null","null")||p("True","true")||p("False","false")||p("None","null")||f();return o(),i}function o(){const e=t;let r=s();do{r=a(),r&&(r=s())}while(r);return t>e}function s(){let i,n="";for(;(i=tP(e.charCodeAt(t)))||((o=e.charCodeAt(t))===NA||o>=DA&&o<=zA||o===BA||o===FA||o===UA);)n+=i?e[t]:" ",t++;var o;return n.length>0&&(r+=n,!0)}function a(){if(47===e.charCodeAt(t)&&42===e.charCodeAt(t+1)){for(;t<e.length&&!pP(e,t);)t++;return t+=2,!0}if(47===e.charCodeAt(t)&&47===e.charCodeAt(t+1)){for(;t<e.length&&e.charCodeAt(t)!==_A;)t++;return!0}return!1}function l(i){return e.charCodeAt(t)===i&&(r+=e[t],t++,!0)}function c(r){return e.charCodeAt(t)===r&&(t++,!0)}function d(){return o(),46===e.charCodeAt(t)&&46===e.charCodeAt(t+1)&&46===e.charCodeAt(t+2)&&(t+=3,o(),c(LA),!0)}function h(){let i=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=92===e.charCodeAt(t);if(n&&(t++,n=!0),rP(e.charCodeAt(t))){const a=nP(e.charCodeAt(t))?nP:sP(e.charCodeAt(t))?sP:oP(e.charCodeAt(t))?oP:iP,l=t,d=r.length;let p='"';for(t++;;){if(t>=e.length){const n=m(t-1);return!i&&XA(e.charAt(n))?(t=l,r=r.substring(0,d),h(!0)):(p=lP(p,'"'),r+=p,!0)}if(a(e.charCodeAt(t))){const n=t,s=p.length;if(p+='"',t++,r+=p,o(),i||t>=e.length||XA(e.charAt(t))||rP(e.charCodeAt(t))||YA(e.charCodeAt(t)))return u(),!0;if(XA(e.charAt(m(n-1))))return t=l,r=r.substring(0,d),h(!0);r=r.substring(0,d),t=n+1,p=p.substring(0,s)+"\\"+p.substring(s)}else{if(i&&XA(e[t]))return p=lP(p,'"'),r+=p,u(),!0;if(92===e.charCodeAt(t)){const r=e.charAt(t+1);if(void 0!==hP[r])p+=e.slice(t,t+2),t+=2;else if("u"===r){let r=2;for(;r<6&&((s=e.charCodeAt(t+r))>=EA&&s<=IA||s>=OA&&s<=RA||s>=MA&&s<=$A);)r++;6===r?(p+=e.slice(t,t+6),t+=6):t+r>=e.length?t=e.length:w()}else p+=r,t+=2}else{const r=e.charAt(t),i=e.charCodeAt(t);i===PA&&92!==e.charCodeAt(t-1)?(p+="\\"+r,t++):eP(i)?(p+=dP[r],t++):(JA(i)||b(r),p+=r,t++)}}n&&c(92)}}var s;return!1}function u(){let i=!1;for(o();43===e.charCodeAt(t);){i=!0,t++,o(),r=aP(r,'"',!0);const e=r.length,n=h();r=n?cP(r,e,1):lP(r,'"')}return i}function p(i,n){return e.slice(t,t+i.length)===i&&(r+=n,t+=i.length,!0)}function f(){const i=t;for(;t<e.length&&(!XA(o=e[t])||"/"===o)&&!rP(e.charCodeAt(t));)t++;var o;if(t>i){if(40===e.charCodeAt(t)&&function(e){return/^\w+$/.test(e)}(e.slice(i,t).trim()))return t++,n(),41===e.charCodeAt(t)&&(t++,59===e.charCodeAt(t)&&t++),!0;{for(;tP(e.charCodeAt(t-1))&&t>0;)t--;const n=e.slice(i,t);return r+="undefined"===n?"null":JSON.stringify(n),e.charCodeAt(t)===PA&&t++,!0}}}function m(t){let r=t;for(;r>0&&tP(e.charCodeAt(r));)r--;return r}function g(){return t>=e.length||XA(e[t])||tP(e.charCodeAt(t))}function v(i){r+=e.slice(i,t)+"0"}function b(e){throw new vA("Invalid character "+JSON.stringify(e),t)}function y(){throw new vA("Object key expected",t)}function x(){throw new vA("Colon expected",t)}function w(){const r=e.slice(t,t+6);throw new vA('Invalid unicode character "'.concat(r,'"'),t)}!function(){throw new vA("Unexpected character "+JSON.stringify(e[t]),t)}()}function pP(e,t){return"*"===e[t]&&"/"===e[t+1]}class fP extends Bs{constructor(e="/api"){super(),this.baseLtpPath="/ltp/crt/",this.baseUrlPath=e}}var mP=function(e,t,r,i){var n,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,r,s):n(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s};let gP=class extends As{constructor(){super(),this.spinnerActive=!1,this.fullReferencesOpen=!1,this.followUpQuestionsRaw="",this.followUpQuestions=[],this.jsonLoading=!1,this.handleJsonLoadingStart=()=>{console.log("JSON loading start event triggered"),this.jsonLoading=!0,this.requestUpdate()},this.handleJsonLoadingEnd=e=>{const t=e.detail;let r;console.log("JSON loading end event triggered with JSON content:",t),this.jsonLoading=!1;try{r=JSON.parse(t.jsonContent)}catch(e){console.error("Error parsing JSON content:",e);try{r=JSON.parse(uP(t.jsonContent))}catch(e){console.error("Error parsing JSON content again:",e)}}},this.api=new fP}connectedCallback(){super.connectedCallback(),this.addEventListener("jsonLoadingStart",this.handleJsonLoadingStart),this.addEventListener("jsonLoadingEnd",this.handleJsonLoadingEnd)}disconnectedCallback(){this.removeEventListener("jsonLoadingStart",this.handleJsonLoadingStart),this.removeEventListener("jsonLoadingEnd",this.handleJsonLoadingEnd),super.disconnectedCallback()}stopJsonLoading(){this.jsonLoading=!1}static get styles(){return[super.styles,o`
        :host {
          display: flex;
        }
        .chatImage {
          padding: 8px;
          vertical-align: text-top;
        }

        .robotIcon {
          --md-icon-size: 34px;
        }

        .chatText {
          padding: 8px;
          padding-left: 8px;
          margin-top: 0;
          padding-top: 2px;
        }

        .chatTextUser {
        }

        .userChatDialog {
          color: var(--md-sys-color-on-surface);
          background-color: var(--md-sys-color-surface-container);
          padding: 8px;
          margin: 16px;
          line-height: 1.5;
          margin-bottom: 0px;
          border-radius: 12px;
        }

        .post {
          margin: 8px;
          padding: 12px;
          border-radius: 24px;
          margin-right: 0;
          background-color: var(--md-sys-color-secondary);
          color: var(--md-sys-color-on-secondary);
          cursor: pointer;
        }

        .refinedCausesSuggestionshowMore {
          padding-left: 16px;
          padding-right: 16px;
        }

        .postImage {
          height: 28px;
          width: 50px;
        }

        .postName {
          display: flex;
          justify-content: center;
          align-content: center;
          flex-direction: column;
          margin-right: 8px;
        }

        .chatGPTDialogContainer {
          max-width: 100%;
          width: 100%;
        }

        .chatGPTDialog {
          color: var(--md-sys-color-on-surface);
          background-color: var(--md-sys-color-surface);
          padding: 8px;
          margin: 16px;
          line-height: 1.5;
          margin-bottom: 0px;
          border-radius: 10px;
          max-width: 89%;
          margin-top: 12px;
        }

        @media (max-width: 800px) {
          .chatGPTDialog {
            margin: 8px;
            max-width: 100%;
          }
        }

        .chatGPTDialog[error] {
          background-color: var(--md-sys-color-error);
          color: var(--md-sys-color-on-error);
        }

        .followup-question-container {
          margin-top: 12px;
          width: 100%;
          align-self: flex-end;
          justify-content: flex-end;
          margin-right: 32px;
          width: 100%;
        }

        .labelText {
          padding-left: 6px;
          width: 100%;
        }

        md-circular-progress {
          --md-circular-progress-size: 32px;
          width: 32px;
          height: 32px;
          margin-top: 8px;
        }

        .refinedSuggestions {
          padding: 0;
          border-radius: 8px;
          margin: 16px;
          margin-top: 0;
        }

        .refinedSuggestions label {
          display: flex;
          align-items: center;
          margin-bottom: 0; // Reduced margin for a tighter layout
          padding: 8px;
        }

        .labelText {
          margin-left: 4px; // Adjust as needed
        }

        .refinedContainer {
          padding: 0;
        }

        .directCause {
          background-color: var(--md-sys-color-primary);
          color: var(--md-sys-color-on-primary);
          margin-bottom: 16px !important;
          border-radius: 16px;
        }

        .assumption {
          background-color: var(--md-sys-color-secondary);
          color: var(--md-sys-color-on-secondary);
          margin-bottom: 16px !important;
          border-radius: 16px;
        }

        .assumptionCheckbox {
          --md-checkbox-outline-color: var(--md-sys-color-on-secondary);
          --md-checkbox-hover-outline-color: var(--md-sys-color-on-primary);
        }

        .directCauseCheckbox {
          --md-checkbox-outline-color: var(--md-sys-color-on-primary);
          --md-checkbox-hover-outline-color: var(--md-sys-color-on-secondary);
        }

        md-filled-button {
          max-width: 250px;
          margin-top: 16px;
          margin-bottom: 16px;
        }

        .refinedCausesSuggestions {
          margin-top: 8px;
          margin-left: 36px;
          margin-right: 36px;
          margin-bottom: 22px;
          padding: 8px;
          border-radius: 12px;
          background-color: var(--md-sys-color-tertiary-container);
          color: var(--md-sys-color-on-tertiary-container);
        }
        .followup-question {
          padding: 0;
          margin: 6px;
        }

        .chat-message {
          flex: 1;
        }

        .thinkingText {
          margin-top: 4px;
          margin-left: 6px;
          color: var(--md-sys-color-secondary);
        }

        .thinkingText[spinnerActive] {
          color: var(--md-sys-color-primary);
        }

        .doneIcon {
          margin-left: 16px;
          margin-right: 4px;
          color: var(--md-sys-color-secondary);
          font-size: 28px;
        }

        .postCitation {
          font-size: 9px;
          background-color: var(--md-sys-color-inverse-on-surface);
          color: var(--md-sys-color-primary);
          padding: 3px;
        }

        md-checkbox {
          margin: 15px;
        }

        .followUpQuestionMark {
          color: var(--md-sys-color-primary);
          font-size: 36px;
          margin-top: 8px;
        }

        .citationLink {
          margin-left: 8px;
          margin-bottom: 8px;
        }

        .progress-ring {
          transform: rotate(-90deg);
          color: var(--md-sys-color-secondary);
          transform-origin: 50% 50%;
          margin-left: 16px;
          margin-right: 4px;
        }
        .progress-ring__circle {
          stroke: var(--md-sys-color-primary);
          stroke-dasharray: 75.4;
          stroke-dashoffset: 75.4;
          stroke-linecap: round;
          animation: progress-ring 2.5s infinite;
        }
        @keyframes progress-ring {
          0% {
            stroke-dashoffset: 75.4;
          }
          50% {
            stroke-dashoffset: 0;
            transform: rotate(0deg);
          }
        }

        .suggestionsHeader {
          font-size: 18px;
          color: var(--md-sys-color-primary);
          margin-bottom: 16px;
        }

        .sourceFavIcon {
          margin-right: 8px;
        }

        .sourceButton {
          margin: 8px;
          padding: 8px;
          max-width: 250px;
          max-height: 60px;
          height: 60px;
          line-height: 1.2;
          white-space: collapse balance;
          font-size: 12px;
          --md-elevated-button-container-height: 60px !important;
          --md-elevated-button-hover-label-text-color: var(
            --md-sys-color-on-surface
          );
        }

        .sourceContainer {
          text-align: left;
        }

        a {
          color: var(--md-sys-color-primary);
         }
      `]}get isError(){return"error"==this.type||"moderation_error"==this.type}renderCGImage(){return V` <md-icon class="robotIcon">smart_toy</md-icon> `}renderRoboImage(){return V` <md-icon class="robotIcon">person</md-icon> `}renderJson(){return V``}renderInfo(){if(this.wsMessage&&this.wsMessage.data&&this.wsMessage.data){const e=this.wsMessage.data;return"sourceDocuments"===e.name?(console.error(JSON.stringify(e)),V`<div class="layout horizontal wrap sourceDocumentsContainer"> ${e.message.map((e=>V` <md-elevated-button class="sourceButton" @click="${()=>this.fire("ps-open-source-dialog",e)}"> <div class="layout horizontal sourceContainer"> <img src="https://www.google.com/s2/favicons?domain=${this.stripDomainForFacIcon(e.url)}&sz=24" slot="icon" width="24" height="24" class="sourceFavIcon"> <div class="documentShortDescription"> ${this.shortenText(`${this.capitalizeFirstLetter(e.title)}: ${e.description}`,65)} </div> </div> </md-elevated-button> `))} </div>`):G}return G}shortenText(e,t){return e.length>t?e.substr(0,t)+"...":e}capitalizeFirstLetter(e){return 0===e.length?e:e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()}stripDomainForFacIcon(e){let t=e.split("/")[2];return console.error(`Domain is ${t}`),t}renderChatGPT(){return V` <div class="layout vertical chatGPTDialogContainer"> <div class="chatGPTDialog layout vertical bot-message" ?error="${this.isError}"> <div class="layout ${this.wide?"horizontal":"vertical"}"> <div class="layout vertical chatImage">${this.renderCGImage()}</div> <div class="layout vertical chatText"> ${qd(this.message,{includeImages:!0,includeCodeBlockClassNames:!0,handleJsonBlocks:!0,targetElement:this})} ${this.jsonLoading?V`<div class="layout horizontal center-center"> <md-circular-progress indeterminate></md-circular-progress> </div>`:G} </div> </div> ${this.renderJson()} </div> ${this.followUpQuestions&&this.followUpQuestions.length>0?V` <div class="layout horizontal followup-question-container wrap"> <md-icon class="followUpQuestionMark">contact_support</md-icon>${this.followUpQuestions.map((e=>V` <md-outlined-button class="followup-question" .label="${e}" @click="${()=>this.fire("followup-question",e)}"></md-outlined-button> `))} </div> `:G} </div> `}parseFollowUpQuestions(){this.followUpQuestionsRaw=this.followUpQuestionsRaw.replace(/<<([^>>]+)>>/g,((e,t)=>(this.followUpQuestions.push(t),"")))}updated(e){super.updated(e),e.has("followUpQuestionsRaw")&&this.followUpQuestionsRaw&&this.parseFollowUpQuestions()}renderUser(){return V` <div class="userChatDialog layout horizontal user-message"> <div class="layout vertical chatImage">${this.renderRoboImage()}</div> <div class="layout vertical chatText chatTextUser"> ${qd(this.message,{includeImages:!0,includeCodeBlockClassNames:!0,handleJsonBlocks:!0,targetElement:this})} </div> </div> `}renderNoStreaming(){return V`${this.spinnerActive?V`<svg class="progress-ring" width="28" height="28"> <circle class="progress-ring__circle" ?spinnerActive="${this.spinnerActive}" stroke="blue" stroke-width="2" fill="transparent" r="10" cx="12" cy="12"/> </svg>`:V`<md-icon class="doneIcon">done</md-icon>`} <div class="thinkingText" ?spinnerActive="${this.spinnerActive}"> ${this.message} ${this.updateMessage?V`- ${this.updateMessage}`:G} </div> `}renderThinking(){return V`${this.spinnerActive?V`<svg class="progress-ring" width="28" height="28"> <circle class="progress-ring__circle" ?spinnerActive="${this.spinnerActive}" stroke="blue" stroke-width="2" fill="transparent" r="10" cx="12" cy="12"/> </svg>`:V`<md-icon class="doneIcon">done</md-icon>`} <div class="thinkingText" ?spinnerActive="${this.spinnerActive}"> ${this.getThinkingText()} </div> `}getThinkingText(){return"es"==this.detectedLanguage?"Meldes...":"is"==this.detectedLanguage?"Hugsa...":"Thinking..."}renderMessage(){return"you"===this.sender?this.renderUser():"bot"===this.sender&&"thinking"===this.type?this.renderThinking():"bot"===this.sender&&"noStreaming"===this.type?this.renderNoStreaming():"bot"===this.sender&&"info"===this.type?this.renderInfo():"bot"===this.sender?this.renderChatGPT():void 0}render(){return V` ${this.renderMessage()} `}};mP([ue({type:String})],gP.prototype,"message",void 0),mP([ue({type:Object})],gP.prototype,"wsMessage",void 0),mP([ue({type:String})],gP.prototype,"updateMessage",void 0),mP([ue({type:String})],gP.prototype,"sender",void 0),mP([ue({type:String})],gP.prototype,"detectedLanguage",void 0),mP([ue({type:Number})],gP.prototype,"clusterId",void 0),mP([ue({type:String})],gP.prototype,"type",void 0),mP([ue({type:Boolean})],gP.prototype,"spinnerActive",void 0),mP([ue({type:Boolean})],gP.prototype,"fullReferencesOpen",void 0),mP([ue({type:String})],gP.prototype,"followUpQuestionsRaw",void 0),mP([ue({type:Array})],gP.prototype,"followUpQuestions",void 0),mP([ue({type:Boolean})],gP.prototype,"jsonLoading",void 0),gP=mP([ce("ps-ai-chat-element")],gP);var vP=function(e,t,r,i){var n,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,r,s):n(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s};let bP=class extends gP{constructor(){super(),this.handleJsonLoadingEnd=e=>{const t=e.detail;let r;console.log("JSON loading end event triggered with JSON content:",t),this.jsonLoading=!1;try{r=JSON.parse(t.jsonContent)}catch(e){console.error("Error parsing JSON content:",e);try{r=JSON.parse(uP(t.jsonContent))}catch(e){console.error("Error parsing JSON content again:",e)}}r&&(this.lastChainCompletedAsValid&&this.lastValidateCauses&&this.lastValidateCauses.length>0?this.refinedCausesSuggestions=this.lastValidateCauses:r.suggestedCauses&&(this.refinedCausesSuggestions=r.suggestedCauses))},this.api=new RS}static get styles(){return[super.styles,o`
        .refinedCausesSuggestionshowMore {
          padding-left: 16px;
          padding-right: 16px;
        }

        .refinedSuggestions {
          padding: 0;
          border-radius: 8px;
          margin: 16px;
          margin-top: 0;
        }

        .refinedSuggestions label {
          display: flex;
          align-items: center;
          margin-bottom: 0; // Reduced margin for a tighter layout
          padding: 8px;
        }

        .refinedContainer {
          padding: 0;
        }

        .directCause {
          background-color: var(--md-sys-color-primary);
          color: var(--md-sys-color-on-primary);
          margin-bottom: 16px !important;
          border-radius: 16px;
        }

        .assumption {
          background-color: var(--md-sys-color-secondary);
          color: var(--md-sys-color-on-secondary);
          margin-bottom: 16px !important;
          border-radius: 16px;
        }

        .assumptionCheckbox {
          --md-checkbox-outline-color: var(--md-sys-color-on-secondary);
          --md-checkbox-hover-outline-color: var(--md-sys-color-on-primary);
        }

        .directCauseCheckbox {
          --md-checkbox-outline-color: var(--md-sys-color-on-primary);
          --md-checkbox-hover-outline-color: var(--md-sys-color-on-secondary);
        }

        md-filled-button {
          max-width: 250px;
          margin-top: 16px;
          margin-bottom: 16px;
        }

        .refinedCausesSuggestions {
          margin-top: 8px;
          margin-left: 36px;
          margin-right: 36px;
          margin-bottom: 22px;
          padding: 8px;
          border-radius: 12px;
          background-color: var(--md-sys-color-tertiary-container);
          color: var(--md-sys-color-on-tertiary-container);
        }

        .suggestionsHeader {
          font-size: 18px;
          color: var(--md-sys-color-primary);
          margin-bottom: 16px;
        }
      `]}async addSelected(){const e=this.shadowRoot.querySelectorAll("md-checkbox"),t=[],r=[];e.forEach((e=>{if(e.checked){const i=e.getAttribute("aria-label"),n=e.dataset.type;"directCause"===n?t.push(i):"assumption"===n&&r.push(i)}})),this.isCreatingCauses=!0;let i=[];if(this.lastChainCompletedAsValid){if(t.length){const e=await this.api.addDirectCauses(this.crtId,this.parentNodeId,t,"directCause");i=i.concat(e)}if(r.length){const e=await this.api.addDirectCauses(this.crtId,this.parentNodeId,r,"assumption");i=i.concat(e)}this.fireGlobal("add-nodes",{parentNodeId:this.parentNodeId,nodes:i}),await new Promise((e=>setTimeout(e,10))),this.fire("close-add-cause-dialog"),this.isCreatingCauses=!1}else this.fire("validate-selected-causes",t);this.fire("scroll-down-enabled")}get isError(){return"error"==this.type||"moderation_error"==this.type}renderJson(){if(!this.refinedCausesSuggestions)return V``;return V` ${((e,t,r)=>e&&0!==e.length?V` <div class="layout horizontal center-center"> <div class="suggestionsHeader">${t}</div> </div> <div class="layout vertical refinedSuggestions ${r} wrap" role="group"> ${e.map((e=>V` <label class="layout horizontal refinedContainer"> <md-checkbox aria-label="${e}" .checked="${this.lastChainCompletedAsValid}" .disabled="${this.lastChainCompletedAsValid}" class="${r}Checkbox" data-type="${r}" touch-target="wrapper"></md-checkbox> <div class="labelText">${e}</div> </label> `))} </div> `:V``)(this.refinedCausesSuggestions??[],"Suggested Direct Causes","directCause")} <div class="layout horizontal center-center"> <md-filled-button @click="${()=>this.addSelected()}"> ${this.lastChainCompletedAsValid?this.t("Add selected"):this.t("Validate selected")} </md-filled-button> </div> `}};vP([ue({type:String})],bP.prototype,"parentNodeId",void 0),vP([ue({type:String})],bP.prototype,"crtId",void 0),vP([ue({type:Array})],bP.prototype,"refinedCausesSuggestions",void 0),vP([ue({type:Boolean})],bP.prototype,"lastChainCompletedAsValid",void 0),vP([ue({type:Array})],bP.prototype,"lastValidateCauses",void 0),vP([ue({type:Boolean})],bP.prototype,"isCreatingCauses",void 0),bP=vP([ce("ltp-ai-chat-element")],bP);var yP=function(e,t,r,i){var n,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,r,s):n(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s};let xP=class extends As{constructor(){super(),this.chatLog=[],this.webSocketsErrorCount=0,this.defaultInfoMessage="I'm your friendly chat assistant",this.inputIsFocused=!1,this.onlyUseTextField=!1,this.userScrolled=!1,this.currentFollowUpQuestions="",this.programmaticScroll=!1,this.showCleanupButtonAtBottom=!1,this.scrollStart=0,this.defaultDevWsPort=8e3,this.api=new fP}calcVH(){const e=Math.max(document.documentElement.clientHeight,window.innerHeight||0);this.chatWindow.setAttribute("style","height:"+e+"px;")}handleCtrlPKeyPress(e){(e.ctrlKey||e.metaKey)&&e.altKey&&"c"===e.key&&(this.copyLatestDebugInfoToClipboard(),e.preventDefault())}copyLatestDebugInfoToClipboard(){const e=this.chatLog[this.chatLog.length-1];if(e&&e.debug){const t=`${e.debug.systemPromptUsedForGeneration||""}\n\n-------------------------\n\n${e.debug.firstUserMessageUserForGeneration||""}`;navigator.clipboard.writeText(t).then((()=>console.log("Debug info copied to clipboard!"))).catch((e=>console.error("Failed to copy debug info:",e)))}}connectedCallback(){super.connectedCallback(),document.addEventListener("keydown",this.handleCtrlPKeyPress.bind(this)),this.initWebSockets()}initWebSockets(){let e;e="localhost"===window.location.hostname||"192.1.168"===window.location.hostname?`ws://${window.location.hostname}:${this.defaultDevWsPort}`:`wss://${window.location.hostname}:443`;try{this.ws=new WebSocket(e),console.error("WebSocket Opened"),this.ws.onmessage=this.onMessage.bind(this),this.ws.onopen=this.onWsOpen.bind(this),this.ws.onerror=e=>{this.webSocketsErrorCount++,console.error("WebSocket Error "+e),setTimeout((()=>this.initWebSockets()),this.webSocketsErrorCount>1?1e3*this.webSocketsErrorCount:2e3)},this.ws.onclose=e=>{console.error("WebSocket Close "+e),this.webSocketsErrorCount++,setTimeout((()=>this.initWebSockets()),this.webSocketsErrorCount>1?1e3*this.webSocketsErrorCount:2e3)}}catch(e){console.error("WebSocket Error "+e),this.webSocketsErrorCount++,setTimeout((()=>this.initWebSockets()),this.webSocketsErrorCount>1?1e3*this.webSocketsErrorCount:1500)}}firstUpdated(e){setTimeout((()=>{this.chatInputField.focus()}),420),setTimeout((()=>{this.chatMessagesElement.addEventListener("scroll",this.handleScroll.bind(this))}),500)}sendHeartbeat(){this.ws.readyState===WebSocket.OPEN?this.ws.send(JSON.stringify({type:"heartbeat"})):console.error("WebSocket not open")}onWsOpen(){console.error("WebSocket onWsOpen"),this.sendHeartbeat(),this.heartbeatInterval=setInterval((()=>this.sendHeartbeat()),55e3),this.ws.onmessage=e=>{const t=JSON.parse(e.data);t.clientId?(this.wsClientId=t.clientId,this.ws.onmessage=this.onMessage.bind(this),console.error(`WebSocket clientId: ${this.wsClientId}`)):console.error("Error: No clientId received from server!")}}updated(e){super.updated(e),e.has("themeDarkMode")}handleScroll(){if(this.programmaticScroll)return;const e=this.chatMessagesElement.scrollTop;0===this.scrollStart&&(this.scrollStart=e);this.chatMessagesElement.scrollHeight-e-this.chatMessagesElement.clientHeight<=10?(this.userScrolled=!1,this.scrollStart=0):Math.abs(this.scrollStart-e)>10&&(this.userScrolled=!0)}disconnectedCallback(){super.disconnectedCallback(),document.removeEventListener("keydown",this.handleCtrlPKeyPress.bind(this)),this.chatMessagesElement&&this.chatMessagesElement.removeEventListener("scroll",this.handleScroll.bind(this)),this.heartbeatInterval&&clearInterval(this.heartbeatInterval)}async onMessage(e){const t=JSON.parse(e.data);switch(t.sender){case"bot":this.addChatBotElement(t);break;case"you":this.addChatUserElement(t)}this.chatLog.length>1&&(this.textInputLabel=this.t("Ask a follow-up question")),"stream_followup"!==t.type&&this.scrollDown()}scrollDown(){this.userScrolled||(this.programmaticScroll=!0,this.$$("#chat-messages").scrollTop=this.$$("#chat-messages").scrollHeight,setTimeout((()=>{this.programmaticScroll=!1}),100))}addUserChatBotMessage(e){this.addChatBotElement({sender:"you",type:"start",message:e})}addThinkingChatBotMessage(){this.addChatBotElement({sender:"bot",type:"thinking",message:""})}addToChatLogWithMessage(e,t=void 0,r=void 0,i=void 0,n=void 0,o=void 0){this.infoMessage=t,e.refinedCausesSuggestions=n||[],e.rawMessage=e.rawMessage||o,this.chatLog=[...this.chatLog,e],this.requestUpdate(),void 0!==r&&(this.sendButton.disabled=r)}get lastChatUiElement(){return this.chatElements[this.chatElements.length-1]}async addChatBotElement(e){switch(e.type){case"hello_message":this.addToChatLogWithMessage(e);break;case"thinking":this.lastChatUiElement&&(this.lastChatUiElement.spinnerActive=!1),this.addToChatLogWithMessage(e,this.t("Thinking..."));break;case"noStreaming":this.addToChatLogWithMessage(e,e.message),await this.updateComplete,this.lastChatUiElement.spinnerActive=!0;break;case"agentStart":console.log("agentStart"),this.lastChatUiElement&&(this.lastChatUiElement.spinnerActive=!1);const t=e.data;setTimeout((()=>{this.scrollDown()}),50),t.noStreaming?this.addChatBotElement({sender:"bot",type:"noStreaming",message:t.name}):(this.addToChatLogWithMessage(e,t.name),this.chatLog[this.chatLog.length-1].message=`${t.name}\n\n`),this.requestUpdate();break;case"liveLlmCosts":this.fire("llm-total-cost-update",e.data);break;case"memoryIdCreated":this.serverMemoryId=e.data,this.fire("server-memory-id-created",e.data);break;case"agentCompleted":console.log("agentCompleted...");const r=e.data;this.lastChatUiElement?(this.lastChatUiElement.spinnerActive=!1,this.lastChatUiElement.message=r.name):console.error("No last element on agentCompleted");break;case"agentUpdated":console.log("agentUpdated"),this.lastChatUiElement?this.lastChatUiElement.updateMessage=e.message:console.error("No last element on agentUpdated");break;case"start":this.lastChatUiElement&&(this.lastChatUiElement.spinnerActive=!1),this.addToChatLogWithMessage(e,this.t("Thinking...")),this.chatLog[this.chatLog.length-1].message||(this.chatLog[this.chatLog.length-1].message="");break;case"start_followup":this.lastChatUiElement.followUpQuestionsRaw="";break;case"stream_followup":this.lastChatUiElement.followUpQuestionsRaw+=e.message,this.requestUpdate();break;case"info":if(e.message)this.infoMessage=e.message;else if(e.data){const t=e.data;"sourceDocuments"===t.name&&(this.fire("source-documents",t.message),this.addToChatLogWithMessage(e)),this.lastChatUiElement&&(this.lastChatUiElement.spinnerActive=!1)}break;case"moderation_error":e.message="OpenAI Moderation Flag Error. Please refine your question.",this.addToChatLogWithMessage(e,e.message,!1,this.t("Send"));break;case"error":this.addToChatLogWithMessage(e,e.message,!1,this.t("Send"));break;case"end":this.lastChatUiElement.stopJsonLoading(),this.chatLog[this.chatLog.length-1].debug=e.debug,this.sendButton.disabled=!1,this.sendButton.innerHTML=this.t("Send"),this.infoMessage=this.defaultInfoMessage;break;case"message":this.lastChatUiElement&&(this.lastChatUiElement.spinnerActive=!1),this.addToChatLogWithMessage(e,e.message,void 0,void 0,e.refinedCausesSuggestions),this.chatLog[this.chatLog.length-1].refinedCausesSuggestions=e.refinedCausesSuggestions,this.sendButton.disabled=!1,this.sendButton.innerHTML=this.t("Send"),this.infoMessage=this.defaultInfoMessage,this.requestUpdate();break;case"stream":if(e.message&&"undefined"!=e.message){this.infoMessage=this.t("typing"),this.chatLog[this.chatLog.length-1].message=this.chatLog[this.chatLog.length-1].message+e.message,this.requestUpdate();break}}this.scrollDown()}addChatUserElement(e){this.chatLog=[...this.chatLog,e]}async sendChatMessage(){0!==this.chatInputField.value.length&&(this.chatInputField.value="",this.sendButton.disabled=!1,setTimeout((()=>{this.chatInputField.blur()})))}get simplifiedChatLog(){return this.chatLog.filter((e=>"thinking"!=e.type&&"info"!=e.type&&"noStreaming"!=e.type&&e.message)).map((e=>({sender:"bot"==e.sender?"assistant":"user",message:e.rawMessage?e.rawMessage:e.message})))}static get styles(){return[super.styles,o`md-textfield{width:600px;--mdc-theme-primary:var(--md-sys-color-primary);--mdc-text-field-ink-color:var(--md-sys-color-on-surface);--mdc-text-area-outlined-hover-border-color:var(
            --md-sys-color-on-surface
          );--mdc-text-area-outlined-idle-border-color:var(
            --md-sys-color-on-surface
          );--mdc-notched-outline-border-color:var(
            --md-sys-color-on-surface-variant
          )}md-outlined-text-field{width:350px}.infoMessage{margin-top:8px}.chat-window{display:flex;flex-direction:column;height:75vh;width:100%;max-width:1200px;margin:0 auto;border-radius:10px;overflow:hidden}.chat-messages{display:flex;flex-direction:column;flex:1;padding:20px;overflow-y:scroll}.you-chat-element{align-self:flex-start;max-width:80%;justify-content:flex-start;margin-right:32px}.bot-chat-element{align-self:flex-start;justify-content:flex-start;width:100%;max-width:100%}.chat-input{display:flex;align-items:center;justify-content:space-between;padding:8px}@media (max-width:600px){.you-chat-element{margin-right:0}}md-tonal-button{padding:16px;padding-left:0;margin-top:0}.sendIcon{cursor:pointer}.restartButton{margin-left:16px}.darkModeButton{margin-right:16px}.currentSourceTitle{font-size:18px;font-weight:700;margin-bottom:4px}.currentSourceDescription{margin-top:8px;margin-bottom:8px}.sourceLinkButton{margin-top:16px;margin-bottom:320px}.currentSourceUrl{max-width:40ch;overflow:hidden;text-overflow:ellipsis;font-size:12px}md-outlined-text-field{flex:1;border-radius:10px;border:none;padding:10px;margin:16px;margin-bottom:16px;margin-left:8px;margin-right:8px;width:650px}.chatElement[thinking]{margin-top:16px;margin-bottom:8px}@media (max-width:960px){.restartButton{margin-left:8px;display:none}.darkModeButton{margin-right:8px;display:none}md-outlined-text-field{transition:transform .5s;width:400px}md-outlined-text-field[focused]{width:100%}}@media (max-width:450px){md-outlined-text-field{width:350px}md-outlined-text-field[focused]{width:100%}}@media (max-width:400px){md-outlined-text-field{width:320px}md-outlined-text-field[focused]{width:100%}}`]}followUpQuestion(e){this.chatInputField.value=e.detail,this.sendChatMessage()}reset(){this.chatLog=[],this.ws&&(this.ws.close(),this.initWebSockets()),this.serverMemoryId=void 0,this.requestUpdate()}toggleDarkMode(){this.themeDarkMode=!this.themeDarkMode,this.fire("theme-dark-mode",this.themeDarkMode),this.requestUpdate()}renderChatInput(){return V` ${this.showCleanupButtonAtBottom?V` <md-outlined-icon-button class="restartButton" @click="${()=>this.fire("reset-chat")}"><md-icon>refresh</md-icon></md-outlined-icon-button> `:G} ${this.onlyUseTextField||this.chatLog.length>1?V` <md-outlined-text-field class="textInput" type="text" hasTrailingIcon id="chatInput" rows="${this.chatLog.length>1?"1":"3"}" @focus="${()=>this.inputIsFocused=!0}" @blur="${()=>this.inputIsFocused=!0}" @keyup="${e=>{"Enter"===e.key&&this.sendChatMessage()}}" .label="${this.textInputLabel}"> <md-icon class="sendIcon" @click="${this.sendChatMessage}" slot="trailing-icon" id="sendButton" ?input-is-focused="${this.inputIsFocused}">send</md-icon> </md-outlined-text-field> `:V`<md-outlined-text-field class="textInput" type="textarea" hasTrailingIcon id="chatInput" rows="3" @focus="${()=>this.inputIsFocused=!0}" @blur="${()=>this.inputIsFocused=!0}" .label="${this.textInputLabel}"> <md-icon class="sendIcon" @click="${this.sendChatMessage}" slot="trailing-icon" id="sendButton" ?input-is-focused="${this.inputIsFocused}">send</md-icon></md-outlined-text-field>`} `}cancelSourceDialog(){this.currentDocumentSourceToDisplay=void 0;this.$$("#sourceDialog").open=!1}openSourceDialog(e){this.currentDocumentSourceToDisplay=e.detail,this.requestUpdate();this.$$("#sourceDialog").open=!0}stripDomainForFacIcon(e){let t=e.split("/")[2];return console.error(`Domain is ${t}`),t}renderSourceDialog(){return V` <md-dialog id="sourceDialog" @closed="${()=>this.cancelSourceDialog()}" ?fullscreen="${!this.wide}" class="dialog" id="dialog"> ${this.currentDocumentSourceToDisplay?V` <div slot="headline"> ${this.currentDocumentSourceToDisplay.title} </div> <div slot="content" id="content"> <div class="layout vertical"> <div class="layout horizontal center-center"> <img src="https://www.google.com/s2/favicons?domain=${this.stripDomainForFacIcon(this.currentDocumentSourceToDisplay.url)}&sz=24" slot="icon" width="24" height="24" class="sourceFavIcon"> </div> <div class="currentSourceDescription"> ${this.currentDocumentSourceToDisplay.compressedFullDescriptionOfAllContents} </div> <div class="layout horizontal center-center sourceLinkButton"> ${this.currentDocumentSourceToDisplay.url.toLowerCase().indexOf(".pdf")>-1?V` <a href="${this.currentDocumentSourceToDisplay.url}" target="_blank" download> <md-filled-button> ${this.t("Open PDF")} </md-filled-button> </a> `:V` <a href="${this.currentDocumentSourceToDisplay.url}" target="_blank"> <md-filled-button> ${this.t("Visit Website")} </md-filled-button> </a> `} </div> </div> </div>`:G} <div slot="actions"> <md-text-button @click="${()=>this.cancelSourceDialog()}"> ${this.t("cancel")} </md-text-button> </div> </md-dialog> `}render(){return V` ${this.renderSourceDialog()} <div class="chat-window" id="chat-window"> <div class="chat-messages" id="chat-messages"> <ps-ai-chat-element ?hidden="${!this.defaultInfoMessage}" class="chatElement bot-chat-element" .detectedLanguage="${this.language}" .message="${this.defaultInfoMessage}" type="welcomeMessage" sender="bot"></ps-ai-chat-element> ${this.chatLog.filter((e=>!e.hidden)).map((e=>V` <ps-ai-chat-element ?thinking="${"thinking"===e.type||"noStreaming"===e.type}" @followup-question="${this.followUpQuestion}" @ps-open-source-dialog="${this.openSourceDialog}" .clusterId="${this.clusterId}" class="chatElement ${e.sender}-chat-element" .detectedLanguage="${this.language}" .wsMessage="${e}" .message="${e.message}" @scroll-down-enabled="${()=>this.userScrolled=!1}" .type="${e.type}" .sender="${e.sender}"></ps-ai-chat-element> `))} </div> <div class="layout horizontal center-center chat-input"> ${this.renderChatInput()} </div> </div> `}};yP([ue({type:Array})],xP.prototype,"chatLog",void 0),yP([ue({type:String})],xP.prototype,"infoMessage",void 0),yP([ue({type:String})],xP.prototype,"wsClientId",void 0),yP([ue({type:Number})],xP.prototype,"webSocketsErrorCount",void 0),yP([ue({type:String})],xP.prototype,"defaultInfoMessage",void 0),yP([ue({type:String})],xP.prototype,"wsEndpoint",void 0),yP([ue({type:Object})],xP.prototype,"ws",void 0),yP([ue({type:Boolean})],xP.prototype,"inputIsFocused",void 0),yP([ue({type:Boolean})],xP.prototype,"onlyUseTextField",void 0),yP([ue({type:Object})],xP.prototype,"currentDocumentSourceToDisplay",void 0),yP([ue({type:Number})],xP.prototype,"clusterId",void 0),yP([ue({type:Boolean})],xP.prototype,"userScrolled",void 0),yP([ue({type:Number})],xP.prototype,"communityId",void 0),yP([ue({type:String})],xP.prototype,"textInputLabel",void 0),yP([ue({type:String})],xP.prototype,"currentFollowUpQuestions",void 0),yP([ue({type:Boolean})],xP.prototype,"programmaticScroll",void 0),yP([ue({type:Boolean})],xP.prototype,"showCleanupButtonAtBottom",void 0),yP([ue({type:Number})],xP.prototype,"scrollStart",void 0),yP([ue({type:String})],xP.prototype,"serverMemoryId",void 0),yP([ue({type:Number})],xP.prototype,"defaultDevWsPort",void 0),yP([me("#sendButton")],xP.prototype,"sendButton",void 0),yP([ve("ps-ai-chat-element")],xP.prototype,"chatElements",void 0),yP([me("#chatInput")],xP.prototype,"chatInputField",void 0),yP([me("#chat-window")],xP.prototype,"chatWindow",void 0),yP([me("#chat-messages")],xP.prototype,"chatMessagesElement",void 0),xP=yP([ce("ps-chat-assistant")],xP);var wP=function(e,t,r,i){var n,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,r,s):n(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s};let _P=class extends xP{constructor(){super(),this.defaultInfoMessage="I'm your Current Reality Tree assistant. I'm here to help to identify direct causes of: ",this.lastChainCompletedAsValid=!1,this.defaultDevWsPort=8e3,this.api=new RS}connectedCallback(){super.connectedCallback(),this.defaultInfoMessage+=`**${this.nodeToAddCauseTo.description}**`}async addChatBotElement(e){const t=this.chatElements[this.chatElements.length-1];switch(e.type){case"hello_message":this.addToChatLogWithMessage(e);break;case"thinking":t&&(t.spinnerActive=!1),this.addToChatLogWithMessage(e,this.t("Thinking..."));break;case"noStreaming":t&&(t.spinnerActive=!0),this.addToChatLogWithMessage(e,e.message);break;case"agentStart":t&&(t.spinnerActive=!1);const r=e.message;setTimeout((()=>{this.scrollDown()}),50),r.noStreaming?this.addChatBotElement({sender:"bot",type:"noStreaming",message:r.name}):(this.addToChatLogWithMessage(e,r.name),this.chatLog[this.chatLog.length-1].message=`${r.name}\n\n`),this.requestUpdate();break;case"agentCompleted":t&&(t.spinnerActive=!1),this.lastChainCompletedAsValid=!1,this.lastValidatedCauses=void 0;const i=e.message;(i.results.lastAgent||i.results.validationErrors&&i.results.validationErrors.length>0)&&this.getSuggestionsFromValidation(i.name,i.results),i.results.isValid&&i.results.lastAgent&&(this.lastChainCompletedAsValid=!0,this.lastValidatedCauses=this.lastCausesToValidate);break;case"start":t&&(t.spinnerActive=!1),this.addToChatLogWithMessage(e,this.t("Thinking...")),this.chatLog[this.chatLog.length-1].message||(this.chatLog[this.chatLog.length-1].message="");break;case"start_followup":t.followUpQuestionsRaw="";break;case"stream_followup":t.followUpQuestionsRaw+=e.message,this.requestUpdate();break;case"info":this.infoMessage=e.message;break;case"moderation_error":e.message="OpenAI Moderation Flag Error. Please refine your question.",this.addToChatLogWithMessage(e,e.message,!1,this.t("Send"));break;case"error":this.addToChatLogWithMessage(e,e.message,!1,this.t("Send"));break;case"end":t.stopJsonLoading(),this.chatLog[this.chatLog.length-1].debug=e.debug,this.sendButton.disabled=!1,this.sendButton.innerHTML=this.t("Send"),this.infoMessage=this.defaultInfoMessage;break;case"message":t&&(t.spinnerActive=!1),this.addToChatLogWithMessage(e,e.message,void 0,void 0,e.refinedCausesSuggestions),this.chatLog[this.chatLog.length-1].refinedCausesSuggestions=e.refinedCausesSuggestions,this.sendButton.disabled=!1,this.sendButton.innerHTML=this.t("Send"),this.infoMessage=this.defaultInfoMessage,this.requestUpdate();break;case"stream":if(e.message&&"undefined"!=e.message){this.infoMessage=this.t("typing"),this.chatLog[this.chatLog.length-1].message=this.chatLog[this.chatLog.length-1].message+e.message,this.requestUpdate();break}}this.scrollDown()}async sendChatMessage(){const e=this.chatInputField.value;if(0===e.length)return;this.chatInputField.value="",this.sendButton.disabled=!1,setTimeout((()=>{this.chatInputField.blur()}));const t=this.nodeToAddCauseTo.description;let r=e.split("\n").map((e=>e.trim())).filter((e=>""!==e)),i=`Effect: ${t}\n`;r.forEach(((e,t)=>{i+=`Cause ${t+1}: ${e}\n`})),this.addChatBotElement({sender:"you",type:"start",message:0===this.chatLog.length?i:e}),1===this.chatLog.length?(this.lastCausesToValidate=r,await this.api.runValidationChain(this.crtData.id,this.nodeToAddCauseTo.id,this.chatLog,this.wsClientId,t,r)):(this.addChatBotElement({sender:"bot",type:"thinking",message:""}),this.lastChainCompletedAsValid=!1,await this.api.sendGetRefinedCauseQuery(this.crtData.id,this.nodeToAddCauseTo.id,this.chatLog,this.wsClientId))}async validateSelectedChoices(e){const t=e.detail;this.lastCausesToValidate=t,await this.api.runValidationChain(this.crtData.id,this.nodeToAddCauseTo.id,this.chatLog,this.wsClientId,this.nodeToAddCauseTo.description,t)}async getSuggestionsFromValidation(e,t){this.nodeToAddCauseTo.description;let r=`Expert: ${e}\n\nEffect: ${this.nodeToAddCauseTo?.description}\n`;this.lastCausesToValidate.forEach(((e,t)=>{r+=`Cause ${t+1}: ${e}\n`})),r+="Expert Validation Results:\n",r+=JSON.stringify(t,null,2),this.addChatBotElement({sender:"you",type:"start",message:r}),this.chatLog[this.chatLog.length-1].hidden=!0,this.addChatBotElement({sender:"bot",type:"thinking",message:""}),await this.api.sendGetRefinedCauseQuery(this.crtData.id,this.nodeToAddCauseTo.id,this.chatLog,this.wsClientId)}renderChatInput(){return V` ${this.onlyUseTextField||this.chatLog.length>1?V` <md-outlined-text-field class="textInput" type="text" hasTrailingIcon id="chatInput" rows="${this.chatLog.length>1?"1":"3"}" @focus="${()=>this.inputIsFocused=!0}" @blur="${()=>this.inputIsFocused=!0}" @keyup="${e=>{"Enter"===e.key&&this.sendChatMessage()}}" .label="${this.textInputLabel}"><md-icon class="sendIcon" @click="${this.sendChatMessage}" slot="trailing-icon" id="sendButton" ?input-is-focused="${this.inputIsFocused}">send</md-icon> </md-outlined-text-field> `:V`<md-outlined-text-field class="textInput" type="textarea" hasTrailingIcon id="chatInput" rows="${this.chatLog.length>1?"1":"3"}" @focus="${()=>this.inputIsFocused=!0}" @blur="${()=>this.inputIsFocused=!0}" .label="${this.textInputLabel}"><md-icon class="sendIcon" @click="${this.sendChatMessage}" slot="trailing-icon" id="sendButton" ?input-is-focused="${this.inputIsFocused}">send</md-icon></md-outlined-text-field>`} `}render(){return V` <div class="chat-window" id="chat-window"> <div class="chat-messages" id="chat-messages"> <ltp-ai-chat-element class="chatElement bot-chat-element" .detectedLanguage="${this.language}" .message="${this.defaultInfoMessage}" type="info" sender="bot"></ltp-ai-chat-element> ${this.chatLog.filter((e=>!e.hidden)).map((e=>V` <ltp-ai-chat-element ?thinking="${"thinking"===e.type||"noStreaming"===e.type}" @followup-question="${this.followUpQuestion}" @validate-selected-causes="${this.validateSelectedChoices}" .clusterId="${this.clusterId}" class="chatElement ${e.sender}-chat-element" .detectedLanguage="${this.language}" .message="${e.message}" @scroll-down-enabled="${()=>this.userScrolled=!1}" .lastChainCompletedAsValid="${this.lastChainCompletedAsValid}" .lastValidatedCauses="${this.lastValidatedCauses}" .crtId="${this.crtData.id}" .parentNodeId="${this.nodeToAddCauseTo.id}" .type="${e.type}" .sender="${e.sender}"></ltp-ai-chat-element> `))} </div> <div class="layout horizontal center-center chat-input"> ${this.renderChatInput()} </div> </div> `}};wP([ue({type:Object})],_P.prototype,"crtData",void 0),wP([ue({type:Object})],_P.prototype,"nodeToAddCauseTo",void 0),wP([ue({type:String})],_P.prototype,"defaultInfoMessage",void 0),wP([ue({type:Boolean})],_P.prototype,"lastChainCompletedAsValid",void 0),wP([ve("ltp-ai-chat-element")],_P.prototype,"chatElements",void 0),wP([ue({type:Array})],_P.prototype,"lastCausesToValidate",void 0),wP([ue({type:Array})],_P.prototype,"lastValidatedCauses",void 0),_P=wP([ce("ltp-chat-assistant")],_P);class kP extends Ds{constructor(e,t=void 0){super(),this.isActive=!1,this.caller=e,this.api=new RS,this.targetContainer=t}close(){this.ws.close(),this.isActive=!1}async connect(){return new Promise(((e,t)=>{let r;this.isActive=!0,r="localhost"===window.location.hostname||"192.1.168"===window.location.hostname?`ws://${window.location.hostname}:8000`:`wss://${window.location.hostname}:443`,this.ws=new WebSocket(r),this.ws.onmessage=this.onMessage.bind(this),this.ws.onopen=t=>{this.onWsOpen(t,e)},this.ws.onerror=t}))}onWsOpen(e,t){this.ws.onmessage=e=>{const r=JSON.parse(e.data);r.clientId&&(this.wsClientId=r.clientId,t(this.wsClientId),this.ws.onmessage=this.onMessage.bind(this))}}onMessage(e){if(!this.isActive)return;const t=JSON.parse(e.data);"part"===t.type&&this.targetContainer&&(this.targetContainer.innerHTML+=t.text),this.caller.fire("wsMessage",{data:t,wsClientId:this.wsClientId})}}var CP=function(e,t,r,i){var n,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,r,s):n(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s};const SP=["ude","directCause","assumption","intermediateCause","rootCause","and","xor","mag"];let AP=class extends As{constructor(){super(),this.isFetchingAgent=!1,this.allCausesExceptCurrentToEdit=[],this.showDeleteConfirmation=!1,this.activeTabIndex=0,this.isReviewingAgent=!1,this.isCreatingAgent=!1,this.wsMessageListener=void 0,this.api=new RS}async connectedCallback(){super.connectedCallback(),this.addEventListener("open-add-cause-dialog",this.openAddCauseDialog),this.addEventListener("close-add-cause-dialog",this.closeAddCauseDialog),this.currentAgentId&&this.fetchCurrentAgent(),this.addEventListener("edit-node",this.openEditNodeDialog)}openEditNodeDialog(e){this.nodeToEditInfo=e.detail,this.currentlySelectedCauseIdToAddAsChild=void 0,this.$$("#editNodeDialog").show()}closeEditNodeDialog(){this.$$("#editNodeDialog").close(),this.nodeToEdit=void 0,this.nodeToEditInfo=void 0}addChildChanged(){const e=this.$$("#addEffectToNodeId");this.currentlySelectedCauseIdToAddAsChild=e.value}async handleSaveEditNode(){this.$$("#nodeDescription").value;if(this.$$("#nodeTypeSelect").value,this.nodeToEdit&&this.currentAgentId)try{await this.api.updateNode(this.currentAgentId,this.nodeToEdit),this.closeEditNodeDialog(),this.currentAgent={...this.currentAgent}}catch(e){console.error("Error updating node:",e)}}handleDeleteNode(){this.showDeleteConfirmation=!0}removeNodeRecursively(e,t){const r=e.findIndex((e=>e.id===t));-1===r?e.forEach((e=>{e.children})):e.splice(r,1)}async confirmDeleteNode(){if(this.nodeToEdit&&this.currentAgentId)try{await this.api.deleteNode(this.currentAgentId,this.nodeToEdit.id),this.closeEditNodeDialog(),this.currentAgent={...this.currentAgent}}catch(e){console.error("Error deleting node:",e)}finally{this.closeDeleteConfirmationDialog()}}createDirectCauses(){this.nodeToEditInfo,this.closeEditNodeDialog()}closeDeleteConfirmationDialog(){this.showDeleteConfirmation=!1}renderDeleteConfirmationDialog(){return V` <md-dialog id="deleteConfirmationDialog" ?open="${this.showDeleteConfirmation}" @closed="${()=>this.showDeleteConfirmation=!1}"> <div slot="headline">Confirm Deletion</div> <div slot="content">Are you sure you want to delete this node?</div> <div slot="actions"> <md-text-button @click="${this.closeDeleteConfirmationDialog}"> Cancel </md-text-button> <md-text-button @click="${this.confirmDeleteNode}"> Delete </md-text-button> </div> </md-dialog> `}renderEditNodeDialog(){return V` <md-dialog id="editNodeDialog" style="max-width:800px;max-height:90vh" @closed="${this.closeEditNodeDialog}"> <div slot="headline">Edit Node</div> <div slot="content" id="editNodeForm" style="max-height:90vh;height:500px" class="layout vertical"> ${this.nodeToEditInfo?V` <md-outlined-text-field label="Description" .value="${""}" id="nodeDescription"></md-outlined-text-field> <md-outlined-select menuPositioning="fixed" label="Node Type" id="nodeTypeSelect"> ${SP.filter((e=>void 0!==e)).map((e=>V` <md-select-option value="${e}" ?selected="${0}"> <div slot="headline"> ${this.camelCaseToHumanReadable(e)} </div> </md-select-option> `))} </md-outlined-select> <div class="flex"></div> <div class="childEditing"> <div class="layout horizontal"> <md-outlined-select menuPositioning="fixed" label="Add as Effect to" id="addEffectToNodeId" @change="${this.addChildChanged}"> ${this.allCausesExceptCurrentToEdit.map((e=>V` <md-select-option value="${e.id}"> <div slot="headline">${""}</div> </md-select-option> `))} </md-outlined-select> ${this.currentlySelectedCauseIdToAddAsChild?V` <md-text-button class="addButton"> Add as an Effect </md-text-button> `:G} </div> <div class="flex"></div> <div class="layout horizontal center-center"> <md-text-button class="automaticCreateButton" @click="${this.createDirectCauses}"> Automatically create nodes (for testing) </md-text-button> </div> </div>`:G} </div> <div slot="actions"> <md-text-button @click="${this.handleDeleteNode}" class="deleteButton"> Delete </md-text-button> <div class="flex"></div> <md-text-button @click="${this.closeEditNodeDialog}" value="cancel"> Cancel </md-text-button> <md-text-button @click="${this.handleSaveEditNode}" value="ok"> Save </md-text-button> </div> </md-dialog> `}updatePath(){this.currentAgent&&this.currentAgent.id?window.history.pushState({},"",`/agent/${this.currentAgent.id}`):console.error("Could not fetch current tree: "+this.currentAgentId)}async fetchCurrentAgent(){this.isFetchingAgent=!0,this.currentAgent=void 0,this.isFetchingAgent=!1,this.currentAgent&&(this.updatePath(),await this.updateComplete,this.$$("#context").value=this.currentAgent.class.description,this.$$("#undesirableEffects").value="",this.activeTabIndex=1,this.$$("#tabBar").activeTabIndex=1)}updated(e){super.updated(e)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("open-add-cause-dialog",this.openAddCauseDialog),this.removeEventListener("close-add-cause-dialog",this.closeAddCauseDialog)}camelCaseToHumanReadable(e){const t=e.replace(/([A-Z])/g," $1").trim();return t.charAt(0).toUpperCase()+t.slice(1)}static get styles(){return[super.styles,o`.causeText{font-size:12px;color:var(--md-sys-color-on-primary-container);background-color:var(--md-sys-color-primary-container);padding:8px}.childEditing{color:var(--md-sys-color-on-surface-variant);background-color:var(--md-sys-color-surface-variant);padding:16px;border-radius:8px}.childrenList{height:100px;overflow-y:auto}md-icon-button{margin-top:32px}.createOptionsButtons{display:flex;justify-content:center;position:absolute;bottom:0;left:0;right:0;padding-left:8px;padding-right:8px}.deleteButton{--md-sys-color-primary:var(--md-sys-color-error)}md-circular-progress{margin-bottom:6px}md-filled-text-field,md-outlined-text-field{width:600px;margin-bottom:16px}[type=textarea]{min-height:150px}[type=textarea][supporting-text]{min-height:76px}.formContainer{margin-top:32px}md-filled-button,md-outlined-button{margin-top:8px;margin-left:8px;margin-right:8px;margin-bottom:8px}.aiConfigReview{margin-left:8px;margin-right:8px;padding:16px;margin-top:8px;margin-bottom:8px;border-radius:12px;max-width:560px;font-size:14px;background-color:var(--md-sys-color-primary-container);color:var(--md-sys-color-on-primary-container)}.agentUDEDescription{font-size:18px;margin:32px;margin-bottom:0;padding:24px;border-radius:12px;background-color:var(--md-sys-color-primary);color:var(--md-sys-color-on-primary)}agent-tab,configure-tab,md-tabs{width:100%}.themeToggle{margin-top:32px}ltp-chat-assistant{height:100%;max-height:100%;width:100%;height:100%}md-linear-progress{width:600px}.darkModeButton{margin-right:8px;margin-left:8px}.topDiv{margin-bottom:256px}md-outlined-select{z-index:1500px;margin:16px;margin-left:0;max-width:250px}.automaticCreateButton{max-width:300px}[hidden]{display:none!important}`]}tabChanged(){this.activeTabIndex=this.$$("#tabBar").activeTabIndex}clearForNew(){this.currentAgent=void 0,this.currentAgentId=void 0,this.AIConfigReview=void 0,this.$$("#context").value="",this.$$("#undesirableEffects").value=""}get agentInputData(){return{description:this.$$("#description")?.value??"",context:this.$$("#context").value??"",undesirableEffects:this.$$("#undesirableEffects").value.split("\n")??[],nodes:[]}}async reviewAgentConfiguration(){this.isReviewingAgent=!0,this.currentStreaminReponse&&this.currentStreaminReponse.close(),this.wsMessageListener&&this.removeEventListener("wsMessage",this.wsMessageListener),this.AIConfigReview=void 0,this.currentStreaminReponse=new kP(this);try{const e=await this.currentStreaminReponse.connect();this.AIConfigReview="",console.log("Connected with clientId:",e),this.wsMessageListener=e=>{const{data:t}=e.detail;"part"===t.type&&t.text?this.AIConfigReview+=t.text:"end"===t.type&&(this.removeListener("wsMessage",this.wsMessageListener),this.wsMessageListener=void 0,this.currentStreaminReponse=void 0,this.isReviewingAgent=!1)},this.addEventListener("wsMessage",this.wsMessageListener),await this.api.reviewConfiguration(e,this.agentInputData)}catch(e){console.error("WebSocket connection failed:",e),this.removeListener("wsMessage",this.wsMessageListener)}}async createAgent(){this.isCreatingAgent=!0,this.agentInputData,this.updatePath(),this.isCreatingAgent=!1,this.activeTabIndex=1,this.$$("#tabBar").activeTabIndex=1}toggleDarkMode(){this.fire("yp-theme-dark-mode",!this.themeDarkMode),window.psAppGlobals.activity("Agent - toggle darkmode"),this.themeDarkMode?(window.psAppGlobals.activity("Settings - dark mode"),localStorage.setItem("md3-ps-dark-mode","true")):(window.psAppGlobals.activity("Settings - light mode"),localStorage.removeItem("md3-ps-dark-mode"))}randomizeTheme(){const e=Math.floor(16777215*Math.random()).toString(16);this.fire("yp-theme-color",`#${e}`)}renderAIConfigReview(){return V` <div class="aiConfigReview" id="aiConfigReview"> ${this.AIConfigReview?V` ${qd(this.AIConfigReview,{includeImages:!0,includeCodeBlockClassNames:!0})} `:G} </div> `}renderReviewAndSubmit(){return V` <md-outlined-button @click="${this.reviewAgentConfiguration}" ?hidden="${!this.AIConfigReview||null!=this.currentAgent}">${this.t("Review CRT again")}<md-icon slot="icon">rate_review</md-icon></md-outlined-button> <md-filled-button @click="${this.reviewAgentConfiguration}" ?hidden="${null!=this.AIConfigReview||null!=this.currentAgent}" ?disabled="${this.isReviewingAgent}">${this.t("Review CRT")}<md-icon slot="icon">rate_review</md-icon></md-filled-button> `}renderThemeToggle(){return V`<div class="layout horizontal center-center themeToggle"> ${this.themeDarkMode?V` <md-outlined-icon-button class="darkModeButton" @click="${this.toggleDarkMode}"><md-icon>light_mode</md-icon></md-outlined-icon-button> `:V` <md-outlined-icon-button class="darkModeButton" @click="${this.toggleDarkMode}"><md-icon>dark_mode</md-icon></md-outlined-icon-button> `} <md-outlined-icon-button class="darkModeButton" @click="${this.randomizeTheme}"><md-icon>shuffle</md-icon></md-outlined-icon-button> </div> `}renderConfiguration(){return V` <div class="layout vertical center-center topDiv"> ${this.renderThemeToggle()} <div class="formContainer"> <div> <md-outlined-text-field type="textarea" label="Context" id="context"></md-outlined-text-field> </div> <div> <md-outlined-text-field type="textarea" label="Undesirable Effects" id="undesirableEffects"></md-outlined-text-field> </div> <div class="layout horizontal center-center"> <md-outlined-button @click="${this.clearForNew}" ?hidden="${!this.currentAgent}">${this.t("Create New Agent")}<md-icon slot="icon">rate_review</md-icon></md-outlined-button> ${this.renderReviewAndSubmit()} <md-filled-button @click="${this.createAgent}" ?hidden="${!this.AIConfigReview||null!=this.currentAgent}" ?disabled="${this.isReviewingAgent}">${this.t("Create CRT")}<md-icon slot="icon">send</md-icon></md-filled-button> </div> ${this.isReviewingAgent&&!this.AIConfigReview?V`<md-linear-progress indeterminate></md-linear-progress>`:G} ${this.AIConfigReview?this.renderAIConfigReview():G} </div> </div> `}openAddCauseDialog(e){console.error(`openAddCauseDialog ${e.detail.parentNodeId}`),e.detail.parentNodeId}closeAddCauseDialog(){this.$$("#addCauseDialog").close(),this.nodeToAddCauseTo=void 0}renderAddCauseDialog(){return V` <md-dialog id="addCauseDialog" style="max-width:800px;max-height:90vh" @closed="${this.closeAddCauseDialog}"> <div slot="headline">${""}</div> <div slot="content" class="chatContainer"> ${this.nodeToAddCauseTo?V` <ltp-chat-assistant .nodeToAddCauseTo="${this.nodeToAddCauseTo}" method="dialog" .textInputLabel="${this.t("Enter sufficent direct causes to the effect")}" .agentData="${this.currentAgent}" @close="${this.closeAddCauseDialog}"> </ltp-chat-assistant> `:G} </div> </md-dialog> `}render(){return this.isFetchingAgent?V`<md-linear-progress indeterminate></md-linear-progress>`:Pc(V` ${this.renderAddCauseDialog()} ${this.renderEditNodeDialog()} ${this.renderDeleteConfirmationDialog()} <md-tabs id="tabBar" @change="${this.tabChanged}"> <md-primary-tab id="configure-tab" aria-controls="configure-panel"> <md-icon slot="icon">psychology</md-icon> ${this.t("Configuration")} </md-primary-tab> <md-primary-tab id="agent-tab" aria-controls="agent-panel" ?disabled="${!this.currentAgent}"> <md-icon slot="icon">account_tree</md-icon> Current Reality Agent </md-primary-tab> <md-primary-tab id="agent-tab" aria-controls="agent-panel" ?disabled="${!this.currentAgent}"> <md-icon slot="icon">mindfulness</md-icon> ${this.t("Logic Validation")} </md-primary-tab> </md-tabs> <div ?hidden="${0!==this.activeTabIndex}" id="configure-panel" role="tabpanel" aria-labelledby="configure-tab"> ${this.renderConfiguration()} </div> <div id="agent-panel" role="tabpanel" aria-labelledby="agent-tab" ?hidden="${1!==this.activeTabIndex}"> <ltp-current-reality-tree .agentData="${this.currentAgent}"></ltp-current-reality-tree> </div> `)}};CP([ue({type:Number})],AP.prototype,"currentAgentId",void 0),CP([ue({type:Object})],AP.prototype,"currentAgent",void 0),CP([ue({type:Boolean})],AP.prototype,"isFetchingAgent",void 0),CP([ue({type:Object})],AP.prototype,"nodeToEditInfo",void 0),CP([ue({type:Object})],AP.prototype,"nodeToEdit",void 0),CP([ue({type:Array})],AP.prototype,"allCausesExceptCurrentToEdit",void 0),CP([ue({type:Boolean})],AP.prototype,"showDeleteConfirmation",void 0),CP([ue({type:Number})],AP.prototype,"activeTabIndex",void 0),CP([ue({type:String})],AP.prototype,"currentlySelectedCauseIdToAddAsChild",void 0),CP([ue({type:String})],AP.prototype,"AIConfigReview",void 0),CP([ue({type:Boolean})],AP.prototype,"isReviewingAgent",void 0),CP([ue({type:Boolean})],AP.prototype,"isCreatingAgent",void 0),CP([me("ps-operations-view")],AP.prototype,"agentElement",void 0),CP([ue({type:Object})],AP.prototype,"nodeToAddCauseTo",void 0),AP=CP([ce("ps-operations-manager")],AP);
/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const PP=new WeakMap,TP=e=>{if((e=>void 0!==e.pattern)(e))return e.pattern;let t=PP.get(e);return void 0===t&&PP.set(e,t=new URLPattern({pathname:e.path})),t};class EP{constructor(e,t,r){this.routes=[],this._childRoutes=[],this._currentParams={},this._onRoutesConnected=e=>{if(e.routes===this)return;const t=e.routes;this._childRoutes.push(t),t._parentRoutes=this,e.stopImmediatePropagation(),e.onDisconnect=()=>{this._childRoutes?.splice(this._childRoutes.indexOf(t)>>>0,1)};const r=IP(this._currentParams);void 0!==r&&t.goto(r)},(this._host=e).addController(this),this.routes=[...t],this.fallback=r?.fallback}link(e){if(e?.startsWith("/"))return e;if(e?.startsWith("."))throw new Error("Not implemented");return e??=this._currentPathname,(this._parentRoutes?.link()??"")+e}async goto(e){let t;if(0===this.routes.length&&void 0===this.fallback)t=e,this._currentPathname="",this._currentParams={0:t};else{const r=this._getRoute(e);if(void 0===r)throw new Error(`No route found for ${e}`);const i=TP(r).exec({pathname:e}),n=i?.pathname.groups??{};if(t=IP(n),"function"==typeof r.enter){if(!1===await r.enter(n))return}this._currentRoute=r,this._currentParams=n,this._currentPathname=void 0===t?e:e.substring(0,e.length-t.length)}if(void 0!==t)for(const e of this._childRoutes)e.goto(t);this._host.requestUpdate()}outlet(){return this._currentRoute?.render?.(this._currentParams)}get params(){return this._currentParams}_getRoute(e){const t=this.routes.find((t=>TP(t).test({pathname:e})));return t||void 0===this.fallback?t:this.fallback?{...this.fallback,path:"/*"}:void 0}hostConnected(){this._host.addEventListener(LP.eventName,this._onRoutesConnected);const e=new LP(this);this._host.dispatchEvent(e),this._onDisconnect=e.onDisconnect}hostDisconnected(){this._onDisconnect?.(),this._parentRoutes=void 0}}const IP=e=>{let t;for(const r of Object.keys(e))/\d+/.test(r)&&(void 0===t||r>t)&&(t=r);return t&&e[t]};class LP extends Event{constructor(e){super(LP.eventName,{bubbles:!0,composed:!0,cancelable:!1}),this.routes=e}}LP.eventName="lit-routes-connected";
/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const OP=location.origin||location.protocol+"//"+location.host;class MP extends EP{constructor(){super(...arguments),this._onClick=e=>{const t=0!==e.button||e.metaKey||e.ctrlKey||e.shiftKey;if(e.defaultPrevented||t)return;const r=e.composedPath().find((e=>"A"===e.tagName));if(void 0===r||""!==r.target||r.hasAttribute("download")||"external"===r.getAttribute("rel"))return;const i=r.href;if(""===i||i.startsWith("mailto:"))return;const n=window.location;r.origin===OP&&(e.preventDefault(),i!==n.href&&(window.history.pushState({},"",i),this.goto(r.pathname)))},this._onPopState=e=>{this.goto(window.location.pathname)}}hostConnected(){super.hostConnected(),window.addEventListener("click",this._onClick),window.addEventListener("popstate",this._onPopState),this.goto(window.location.pathname)}hostDisconnected(){super.hostDisconnected(),window.removeEventListener("click",this._onClick),window.removeEventListener("popstate",this._onPopState)}}var RP=function(e,t,r,i){var n,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,r,s):n(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s};const $P=1;let NP=class extends As{constructor(){super(),this.currentProjectId=void 0,this.pageIndex=$P,this.totalNumberOfVotes=0,this.showAllCosts=!1,this.collectionType="domain",this.localStorageThemeColorKey="md3-ps-theme-color-v2",this.themeColor="#df2302",this.themePrimaryColor="#000000",this.themeSecondaryColor="#000000",this.themeTertiaryColor="#000000",this.themeNeutralColor="#000000",this.themeNeutralVariantColor="#000000",this.themeScheme="tonal",this.themeHighContrast=!1,this.isAdmin=!1,this.surveyClosed=!1,this.numberOfSolutionsGenerations=0,this.numberOfPoliciesIdeasGeneration=0,this.totalSolutions=0,this.totalPros=0,this.totalCons=0,this.router=new MP(this,[{path:"/",render:()=>V`<ps-home .memory="${this.currentMemory}"></ps-home>`},{path:"/agent/:agentId/",render:e=>this.renderAgentPage(e.agentId)},{path:"/agent/:agentId",render:e=>this.renderAgentPage(e.agentId)},{path:"/agent",render:e=>this.renderAgentPage()},{path:"/agent/",render:e=>this.renderAgentPage()}],{fallback:{render:()=>V`<h2>Page not found</h2>`}}),window.psServerApi=new Fs,window.psAppGlobals=new cl(window.psServerApi),window.appUser=new fc(window.psServerApi);const e=localStorage.getItem("md3-ps-dark-mode");this.themeDarkMode=!!e;const t=localStorage.getItem("md3-ps-high-contrast-mode");this.themeHighContrast=!!t,window.psAppGlobals.activity("pageview"),this.setupDebugScroll()}setupDebugScroll(){let e,t=!1;window.addEventListener("keydown",(r=>{"s"!==r.key||t||t||(t=!0,e=setInterval((()=>{window.scrollBy(0,1)}),4))})),window.addEventListener("keyup",(r=>{"s"===r.key&&t&&(clearInterval(e),t=!1)}))}renderAgentPage(e=void 0){return V`
      <ps-operations-manager
        .currentAgentId="${e}"
        ="${e}"
      ></ps-operations-manager>
    `}getServerUrlFromClusterId(e){return 1==e?"https://betrireykjavik.is/api":3==e?"https://ypus.org/api":"https://yrpri.org/api"}connectedCallback(){super.connectedCallback(),this._setupEventListeners();const e=localStorage.getItem(this.localStorageThemeColorKey);e&&this.fireGlobal("yp-theme-color",e),this.setupTheme()}async boot(){window.psAppGlobals.activity("Boot - fetch start");const e=await window.psServerApi.getProject(this.currentProjectId,this.tempPassword,location.pathname.indexOf("refresh827cDb")>-1?"999":void 0);if(e&&"needsTrm"in e)this.tempPassword&&await new Promise((e=>setTimeout(e,2e3))),window.psAppGlobals.activity("Boot - needs trm");else{const t=e;this.currentMemory=t.currentMemory,document.title=t.name,!0===t.isAdmin?this.isAdmin=!0:this.isAdmin=!1,this.themeColor=t.configuration.theme_color?t.configuration.theme_color:"#df2302",this.themePrimaryColor=t.configuration.theme_primary_color,this.themeSecondaryColor=t.configuration.theme_secondary_color,this.themeTertiaryColor=t.configuration.theme_tertiary_color,this.themeNeutralColor=t.configuration.theme_neutral_color,this.themeScheme=t.configuration.theme_scheme?t.configuration.theme_scheme.toLowerCase():"tonal",this.themeChanged(),window.psAppGlobals.activity("Boot - fetch end")}}disconnectedCallback(){super.disconnectedCallback(),this._removeEventListeners()}getHexColor(e){return e&&6===(e=e.replace(/#/g,"")).length?`#${e}`:void 0}themeChanged(e=void 0){let t={};localStorage.setItem(this.localStorageThemeColorKey,this.themeColor);const r=void 0===this.themeDarkMode?window.matchMedia("(prefers-color-scheme: dark)").matches:this.themeDarkMode;if(this.isAppleDevice){!function(e,t){const r=t?.target||document.body;if(yi(r,t?.dark?e.schemes.dark:e.schemes.light),t?.brightnessSuffix&&(yi(r,e.schemes.dark,"-dark"),yi(r,e.schemes.light,"-light")),t?.paletteTones){const i=t?.paletteTones??[];for(const[t,n]of Object.entries(e.palettes)){const e=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();for(const t of i){const i=`--md-ref-palette-${e}-${e}${t}`,o=mi(n.tone(t));r.style.setProperty(i,o)}}}}(bi(gi(this.themeColor||this.themePrimaryColor||"#000000"),[{name:"up-vote",value:gi("#0F0"),blend:!0},{name:"down-vote",value:gi("#F00"),blend:!0}]),{target:document.body,dark:r})}else t=this.getHexColor(this.themeColor)?ol(this.getHexColor(this.themeColor),this.themeVariant,r,this.themeScheme,this.themeHighContrast?2:0):ol({primary:this.getHexColor(this.themePrimaryColor||"#000000"),secondary:this.getHexColor(this.themeSecondaryColor||"#000000"),tertiary:this.getHexColor(this.themeTertiaryColor||"#000000"),neutral:this.getHexColor(this.themeNeutralColor||"#000000"),neutralVariant:this.getHexColor(this.themeNeutralVariantColor||"#000000")},this.themeVariant,r,"dynamic",this.themeHighContrast?2:0),sl(document,t)}snackbarclosed(){this.lastSnackbarText=void 0}async _displaySnackbar(e){this.lastSnackbarText=e.detail,await this.updateComplete}_setupEventListeners(){this.addListener("app-error",this._appError),this.addListener("display-snackbar",this._displaySnackbar),this.addListener("toggle-dark-mode",this.toggleDarkMode.bind(this)),this.addListener("toggle-high-contrast-mode",this.toggleHighContrastMode.bind(this)),window.addEventListener("popstate",(()=>{this.router.goto(window.location.pathname),this.requestUpdate()}))}_removeEventListeners(){this.removeListener("display-snackbar",this._displaySnackbar),this.removeListener("app-error",this._appError),this.removeListener("toggle-dark-mode",this.toggleDarkMode.bind(this)),this.removeListener("toggle-high-contrast-mode",this.toggleHighContrastMode.bind(this))}updated(e){super.updated(e),(e.has("themeColor")||e.has("themeDarkMode"))&&this.themeChanged()}_appError(e){console.error(e.detail.message),this.currentError=e.detail.message}get adminConfirmed(){return!0}_settingsColorChanged(e){this.fireGlobal("yp-theme-color",e.detail.value)}static get styles(){return[Yn,o``]}updateThemeColor(e){this.themeColor=e.detail}toggleDarkMode(){this.themeDarkMode=!this.themeDarkMode,this.themeDarkMode?(window.psAppGlobals.activity("Settings - dark mode"),localStorage.setItem("md3-ps-dark-mode","true")):(window.psAppGlobals.activity("Settings - light mode"),localStorage.removeItem("md3-ps-dark-mode")),this.themeChanged()}toggleHighContrastMode(){this.themeHighContrast=!this.themeHighContrast,this.themeHighContrast?(window.psAppGlobals.activity("Settings - high contrast mode"),localStorage.setItem("md3-ps-high-contrast-mode","true")):(window.psAppGlobals.activity("Settings - non high contrast mode"),localStorage.removeItem("md3-ps-high-contrast-mode")),this.themeChanged()}setupTheme(){const e=localStorage.getItem("md3-ps-dark-mode");this.themeDarkMode=!!e;const t=localStorage.getItem("md3-ps-high-contrast-mode");this.themeHighContrast=!!t;const r=localStorage.getItem(this.localStorageThemeColorKey);r&&(this.themeColor=r),this.fire("yp-theme-dark-mode",this.themeDarkMode),this.themeChanged()}toCamelCase(e){return e.replace(/-([a-z])/g,(function(e){return e[1].toUpperCase()}))}renderContentOrLoader(e){return this.currentMemory?e:V` <div class="loading"> <md-circular-progress indeterminate></md-circular-progress> </div> `}handleShowMore(e){e.preventDefault(),this.showAllCosts=!0}renderThemeToggle(e=!1){return V`<div class="layout vertical center-center lightDarkContainer"> ${this.themeDarkMode?V` <md-outlined-icon-button class="darkModeButton" @click="${this.toggleDarkMode}"><md-icon>light_mode</md-icon></md-outlined-icon-button> `:V` <md-outlined-icon-button class="darkModeButton" @click="${this.toggleDarkMode}"><md-icon>dark_mode</md-icon></md-outlined-icon-button> `} <div ?hidden="${e}">${this.t("Light/Dark")}</div> </div> <div class="layout vertical center-center lightDarkContainer" ?hidden="${this.isAppleDevice}"> ${this.themeHighContrast?V` <md-outlined-icon-button class="darkModeButton" @click="${this.toggleHighContrastMode}"><md-icon>contrast_rtl_off</md-icon></md-outlined-icon-button> `:V` <md-outlined-icon-button class="darkModeButton" @click="${this.toggleHighContrastMode}"><md-icon>contrast</md-icon></md-outlined-icon-button> `} <div ?hidden="${e}">${this.t("Contrast")}</div> </div>`}render(){return V` ${this.router.outlet()}  ${this.lastSnackbarText?V` <mwc-snackbar id="snackbar" @MDCSnackbar:closed="${this.snackbarclosed}" style="text-align:center" .labelText="${this.lastSnackbarText}"></mwc-snackbar> `:G} `}};RP([ue({type:Number})],NP.prototype,"currentProjectId",void 0),RP([ue({type:Number})],NP.prototype,"activeSubProblemIndex",void 0),RP([ue({type:Number})],NP.prototype,"activePopulationIndex",void 0),RP([ue({type:Number})],NP.prototype,"activeSolutionIndex",void 0),RP([ue({type:Number})],NP.prototype,"activePolicyIndex",void 0),RP([ue({type:Number})],NP.prototype,"pageIndex",void 0),RP([ue({type:Object})],NP.prototype,"currentMemory",void 0),RP([ue({type:Number})],NP.prototype,"totalNumberOfVotes",void 0),RP([ue({type:Boolean})],NP.prototype,"showAllCosts",void 0),RP([ue({type:String})],NP.prototype,"lastSnackbarText",void 0),RP([ue({type:String})],NP.prototype,"collectionType",void 0),RP([ue({type:String})],NP.prototype,"earlName",void 0),RP([ue({type:String})],NP.prototype,"currentError",void 0),RP([ue({type:String})],NP.prototype,"forceGetBackupForProject",void 0),RP([ue({type:String})],NP.prototype,"tempPassword",void 0),RP([ue({type:String})],NP.prototype,"localStorageThemeColorKey",void 0),RP([ue({type:String})],NP.prototype,"themeColor",void 0),RP([ue({type:String})],NP.prototype,"themePrimaryColor",void 0),RP([ue({type:String})],NP.prototype,"themeSecondaryColor",void 0),RP([ue({type:String})],NP.prototype,"themeTertiaryColor",void 0),RP([ue({type:String})],NP.prototype,"themeNeutralColor",void 0),RP([ue({type:String})],NP.prototype,"themeNeutralVariantColor",void 0),RP([ue({type:String})],NP.prototype,"themeScheme",void 0),RP([ue({type:String})],NP.prototype,"themeVariant",void 0),RP([ue({type:Boolean})],NP.prototype,"themeHighContrast",void 0),RP([ue({type:Boolean})],NP.prototype,"isAdmin",void 0),RP([ue({type:Boolean})],NP.prototype,"surveyClosed",void 0),RP([ue({type:String})],NP.prototype,"appearanceLookup",void 0),RP([ue({type:String})],NP.prototype,"currentLeftAnswer",void 0),RP([ue({type:String})],NP.prototype,"currentRightAnswer",void 0),RP([ue({type:Number})],NP.prototype,"numberOfSolutionsGenerations",void 0),RP([ue({type:Number})],NP.prototype,"numberOfPoliciesIdeasGeneration",void 0),RP([ue({type:Number})],NP.prototype,"totalSolutions",void 0),RP([ue({type:Number})],NP.prototype,"totalPros",void 0),RP([ue({type:Number})],NP.prototype,"totalCons",void 0),NP=RP([ce("ps-agents-operations-app")],NP);
